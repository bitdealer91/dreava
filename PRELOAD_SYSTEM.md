# Система предзагрузки изображений DREAVA

## Обзор

Система предзагрузки изображений обеспечивает быструю загрузку всех необходимых изображений при первом посещении сайта, что значительно улучшает пользовательский опыт.

## Компоненты

### 1. LoadingScreen (`src/components/LoadingScreen.jsx`)
- Отображается при первой загрузке сайта
- Показывает видео `IMG_9240.MP4` в качестве фона
- Предзагружает все статические изображения
- Отображает прогресс загрузки с процентами
- Предзагружает изображения коллекций из localStorage

### 2. useImagePreloader (`src/hooks/useImagePreloader.js`)
- Хук для предзагрузки изображений коллекций
- Автоматически вызывается в компонентах Home и ActiveSales
- Предзагружает обложки, баннеры и NFT изображения

### 3. imagePreloader (`src/utils/imagePreloader.js`)
- Утилиты для предзагрузки изображений
- Глобальный кэш предзагруженных изображений
- Функции для батчевой загрузки

### 4. PreloadStatus (`src/components/PreloadStatus.jsx`)
- Компонент для отображения статуса предзагрузки
- Показывает количество предзагруженных изображений
- Отображается только в режиме разработки

## Как это работает

### 1. Первая загрузка сайта
1. Пользователь заходит на сайт
2. Отображается `LoadingScreen` с видео фоном
3. Система предзагружает все статические изображения:
   - Слайды главной страницы (10 изображений)
   - Логотипы и иконки (15 изображений)
   - Изображения для квестов (2 изображения)
4. Предзагружаются изображения коллекций из localStorage
5. После завершения загрузки сайт становится доступным

### 2. Последующие посещения
- Экран загрузки не показывается (используется sessionStorage)
- Изображения загружаются мгновенно из кэша браузера

### 3. Предзагрузка коллекций
- При загрузке страниц Home и ActiveSales автоматически предзагружаются изображения коллекций
- Включает обложки, баннеры и NFT изображения
- Загрузка происходит батчами по 3 изображения для оптимизации

## Преимущества

1. **Быстрая загрузка**: Все изображения загружаются заранее
2. **Плавный UX**: Нет задержек при навигации
3. **Оптимизация**: Батчевая загрузка и кэширование
4. **Адаптивность**: Работает на всех устройствах

## Настройка

### Добавление новых изображений для предзагрузки

1. Добавьте импорт в `LoadingScreen.jsx`:
```javascript
import newImage from '../assets/new-image.png';
```

2. Добавьте в массив `IMAGES_TO_PRELOAD`:
```javascript
const IMAGES_TO_PRELOAD = [
  // ... существующие изображения
  newImage,
];
```

### Предзагрузка изображений в новых компонентах

1. Импортируйте хук:
```javascript
import { useImagePreloader } from '../hooks/useImagePreloader';
```

2. Используйте в компоненте:
```javascript
const MyComponent = ({ collections }) => {
  useImagePreloader(collections);
  // ... остальной код
};
```

## Отладка

### Статус предзагрузки
В режиме разработки в правом нижнем углу отображается счетчик предзагруженных изображений.

### Логирование
В консоли браузера можно увидеть:
- Прогресс загрузки изображений
- Количество предзагруженных изображений
- Ошибки загрузки (если есть)

## Производительность

- **Батчевая загрузка**: Изображения загружаются группами по 3-5 штук
- **Кэширование**: Предзагруженные изображения сохраняются в памяти
- **Оптимизация**: Задержки между батчами для предотвращения блокировки UI
- **Обработка ошибок**: Система продолжает работу даже при ошибках загрузки

## Совместимость

- ✅ Все современные браузеры
- ✅ Мобильные устройства
- ✅ Планшеты
- ✅ Десктопные браузеры 