{"version":3,"file":"serviceWorkerCache-B_gri7LS-B_gri7LS.js","sources":["../../assets/serviceWorkerCache-B_gri7LS.js"],"sourcesContent":["class t{constructor(){this.cacheName=\"dreava-upload-cache-v1\";this.initialized=!1;this.init()}async init(){try{if(\"serviceWorker\"in navigator){await this.registerServiceWorker();this.initialized=!0}}catch(t){}}async registerServiceWorker(){try{const t=await navigator.serviceWorker.register(\"/sw.js\",{scope:\"/\"});return t}catch(t){throw t}}async cacheUpload(t,a){if(this.initialized)try{const e=await caches.open(this.cacheName);const i=await this.generateFileHash(t);const c=`upload_${i}`;const n=new Response(JSON.stringify(a),{headers:{\"Content-Type\":\"application/json\",\"Cache-Control\":\"max-age=86400\"}});await e.put(c,n);return c}catch(e){}}async getCachedUpload(t){if(!this.initialized)return null;try{const a=await caches.open(this.cacheName);const e=await this.generateFileHash(t);const i=`upload_${e}`;const c=await a.match(i);if(c){const t=await c.json();return t}return null}catch(a){return null}}async cacheMetadata(t,a){if(this.initialized)try{const e=await caches.open(this.cacheName);const i=`metadata_${t}`;const c=new Response(JSON.stringify(a),{headers:{\"Content-Type\":\"application/json\",\"Cache-Control\":\"max-age=3600\"}});await e.put(i,c);return i}catch(e){}}async getCachedMetadata(t){if(!this.initialized)return null;try{const a=await caches.open(this.cacheName);const e=`metadata_${t}`;const i=await a.match(e);if(i){const t=await i.json();return t}return null}catch(a){return null}}async clearCache(){if(this.initialized)try{const t=await caches.open(this.cacheName);const a=await t.keys();for(const e of a)await t.delete(e)}catch(t){}}async getCacheStats(){if(!this.initialized)return null;try{const t=await caches.open(this.cacheName);const a=await t.keys();let e=0;for(const i of a){const a=await t.match(i);if(a){const t=await a.blob();e+=t.size}}return{entries:a.length,totalSize:e,cacheName:this.cacheName}}catch(t){return null}}async generateFileHash(t){return new Promise(a=>{const e=new FileReader;e.onload=t=>{const e=t.target.result;crypto.subtle.digest(\"SHA-256\",e).then(t=>{const e=Array.from(new Uint8Array(t));const i=e.map(t=>t.toString(16).padStart(2,\"0\")).join(\"\");a(i)})};e.readAsArrayBuffer(t)})}async cacheNetworkResponse(t,a){if(this.initialized)try{const e=await caches.open(this.cacheName);await e.put(t,a.clone())}catch(e){}}async getCachedNetworkResponse(t){if(!this.initialized)return null;try{const a=await caches.open(this.cacheName);const e=await a.match(t);return e||null}catch(a){return null}}}export{t as ServiceWorkerCache};\n//# sourceMappingURL=serviceWorkerCache-B_gri7LS.js.map\n"],"names":["t","constructor","this","cacheName","initialized","init","navigator","registerServiceWorker","serviceWorker","register","scope","cacheUpload","a","e","caches","open","i","generateFileHash","c","n","Response","JSON","stringify","headers","put","getCachedUpload","match","json","cacheMetadata","getCachedMetadata","clearCache","keys","delete","getCacheStats","blob","size","entries","length","totalSize","Promise","FileReader","onload","target","result","crypto","subtle","digest","then","Array","from","Uint8Array","map","toString","padStart","join","readAsArrayBuffer","cacheNetworkResponse","clone","getCachedNetworkResponse"],"mappings":"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"}