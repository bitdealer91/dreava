{"version":3,"file":"sharedBufferWorker-CTA752j6-CWZKBTEP-CWZKBTEP.js","sources":["../../assets/sharedBufferWorker-CTA752j6-CWZKBTEP.js"],"sourcesContent":["class h{constructor(){this.worker=null,this.initialized=!1,this.bufferSize=1024*1024,this.init()}async init(){try{typeof SharedArrayBuffer<\"u\"?(this.worker=new Worker(\"/workers/shared-buffer-worker.js\"),this.worker.onmessage=this.handleMessage.bind(this),this.worker.onerror=this.handleError.bind(this),this.initialized=!0,console.log(\"‚úÖ Shared Buffer Worker initialized\")):console.warn(\"‚ö†Ô∏è SharedArrayBuffer not supported\")}catch(e){console.warn(\"‚ö†Ô∏è Shared Buffer Worker initialization failed:\",e)}}handleMessage(e){const{type:s,data:r,id:t}=e.data;switch(s){case\"PROCESSING_COMPLETE\":console.log(\"‚úÖ Shared buffer processing complete:\",r);break;case\"PROCESSING_PROGRESS\":console.log(\"üìä Shared buffer progress:\",r);break;case\"ERROR\":console.error(\"‚ùå Shared buffer error:\",r);break;default:console.log(\"üì® Shared buffer message:\",s,r)}}handleError(e){console.error(\"‚ùå Shared Buffer Worker error:\",e)}async processFiles(e){return this.initialized?new Promise((s,r)=>{const t=Date.now(),c=setTimeout(()=>{console.error(\"‚è∞ Shared buffer processing timeout\"),r(new Error(\"Processing timeout\"))},3e4),a=i=>{const{type:o,data:l,id:d}=i.data;d===t&&(clearTimeout(c),this.worker.removeEventListener(\"message\",a),o===\"PROCESSING_COMPLETE\"?s(l):o===\"ERROR\"&&r(new Error(l)))};this.worker.addEventListener(\"message\",a);const n=e.map(i=>{const o=new SharedArrayBuffer(this.bufferSize);return{file:i,buffer:o}});this.worker.postMessage({type:\"PROCESS_FILES\",data:{files:n},id:t})}):(console.warn(\"‚ö†Ô∏è Shared Buffer Worker not available, using fallback\"),await this.fallbackProcessing(e))}async fallbackProcessing(e){console.log(\"üîÑ Using fallback processing for files:\",e.length);const s=[];for(const r of e)try{const t=await this.processFileFallback(r);s.push(t)}catch(t){console.error(\"‚ùå Fallback processing failed for file:\",r.name,t),s.push({error:t.message})}return s}async processFileFallback(e){return new Promise(s=>{const r=new FileReader;r.onload=t=>{const c=t.target.result,a=new Uint8Array(c);let n=0;for(let i=0;i<a.length;i++)n+=a[i];s({file:e.name,size:e.size,checksum:n,processed:!0})},r.onerror=()=>{s({file:e.name,error:\"File reading failed\",processed:!1})},r.readAsArrayBuffer(e)})}async compressData(e){return this.initialized?new Promise((s,r)=>{const t=Date.now(),c=setTimeout(()=>{console.error(\"‚è∞ Compression timeout\"),r(new Error(\"Compression timeout\"))},1e4),a=n=>{const{type:i,data:o,id:l}=n.data;l===t&&(clearTimeout(c),this.worker.removeEventListener(\"message\",a),i===\"COMPRESSION_COMPLETE\"?s(o):i===\"ERROR\"&&r(new Error(o)))};this.worker.addEventListener(\"message\",a),this.worker.postMessage({type:\"COMPRESS_DATA\",data:{data:e},id:t})}):await this.fallbackCompression(e)}async fallbackCompression(e){try{const s=new CompressionStream(\"gzip\"),r=s.writable.getWriter(),t=s.readable.getReader(),c=new Uint8Array(e);r.write(c),r.close();const a=[];for(;;){const{done:o,value:l}=await t.read();if(o)break;a.push(l)}const n=new Uint8Array(a.reduce((o,l)=>o+l.length,0));let i=0;for(const o of a)n.set(o,i),i+=o.length;return n.buffer}catch(s){return console.warn(\"‚ö†Ô∏è Fallback compression failed:\",s),e}}async decompressData(e){return this.initialized?new Promise((s,r)=>{const t=Date.now(),c=setTimeout(()=>{console.error(\"‚è∞ Decompression timeout\"),r(new Error(\"Decompression timeout\"))},1e4),a=n=>{const{type:i,data:o,id:l}=n.data;l===t&&(clearTimeout(c),this.worker.removeEventListener(\"message\",a),i===\"DECOMPRESSION_COMPLETE\"?s(o):i===\"ERROR\"&&r(new Error(o)))};this.worker.addEventListener(\"message\",a),this.worker.postMessage({type:\"DECOMPRESS_DATA\",data:{data:e},id:t})}):await this.fallbackDecompression(e)}async fallbackDecompression(e){try{const s=new DecompressionStream(\"gzip\"),r=s.writable.getWriter(),t=s.readable.getReader(),c=new Uint8Array(e);r.write(c),r.close();const a=[];for(;;){const{done:o,value:l}=await t.read();if(o)break;a.push(l)}const n=new Uint8Array(a.reduce((o,l)=>o+l.length,0));let i=0;for(const o of a)n.set(o,i),i+=o.length;return n.buffer}catch(s){return console.warn(\"‚ö†Ô∏è Fallback decompression failed:\",s),e}}destroy(){this.worker&&(this.worker.terminate(),this.worker=null),this.initialized=!1}}export{h as SharedBufferWorker};\n//# sourceMappingURL=sharedBufferWorker-CTA752j6-CWZKBTEP.js.map\n"],"names":[],"mappings":"AAAA,MAAM,CAAC,CAAC,aAAa,CAAC,KAAK,OAAO,KAAK,KAAK,YAAY,GAAG,KAAK,WAAW,KAAK,KAAK,KAAK,KAAI,CAAE,CAAC,MAAM,MAAM,CAAC,GAAG,CAAC,OAAO,kBAAkB,KAAK,KAAK,OAAO,IAAI,OAAO,kCAAkC,EAAE,KAAK,OAAO,UAAU,KAAK,cAAc,KAAK,IAAI,EAAE,KAAK,OAAO,QAAQ,KAAK,YAAY,KAAK,IAAI,EAAE,KAAK,YAAY,GAAG,QAAQ,IAAI,oCAAoC,GAAG,QAAQ,KAAK,oCAAoC,CAAC,OAAO,EAAE,CAAC,QAAQ,KAAK,iDAAiD,CAAC,CAAC,CAAC,CAAC,cAAc,EAAE,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,EAAE,EAAE,KAAK,OAAO,EAAC,CAAE,IAAI,sBAAsB,QAAQ,IAAI,uCAAuC,CAAC,EAAE,MAAM,IAAI,sBAAsB,QAAQ,IAAI,6BAA6B,CAAC,EAAE,MAAM,IAAI,QAAQ,QAAQ,MAAM,yBAAyB,CAAC,EAAE,MAAM,QAAQ,QAAQ,IAAI,4BAA4B,EAAE,CAAC,CAAC,CAAC,CAAC,YAAY,EAAE,CAAC,QAAQ,MAAM,gCAAgC,CAAC,CAAC,CAAC,MAAM,aAAa,EAAE,CAAC,OAAO,KAAK,YAAY,IAAI,QAAQ,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,IAAG,EAAG,EAAE,WAAW,IAAI,CAAC,QAAQ,MAAM,oCAAoC,EAAE,EAAE,IAAI,MAAM,oBAAoB,CAAC,CAAC,EAAE,GAAG,EAAE,EAAE,GAAG,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,EAAE,EAAE,KAAK,IAAI,IAAI,aAAa,CAAC,EAAE,KAAK,OAAO,oBAAoB,UAAU,CAAC,EAAE,IAAI,sBAAsB,EAAE,CAAC,EAAE,IAAI,SAAS,EAAE,IAAI,MAAM,CAAC,CAAC,EAAE,EAAE,KAAK,OAAO,iBAAiB,UAAU,CAAC,EAAE,MAAM,EAAE,EAAE,IAAI,GAAG,CAAC,MAAM,EAAE,IAAI,kBAAkB,KAAK,UAAU,EAAE,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC,CAAC,EAAE,KAAK,OAAO,YAAY,CAAC,KAAK,gBAAgB,KAAK,CAAC,MAAM,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,QAAQ,KAAK,uDAAuD,EAAE,MAAM,KAAK,mBAAmB,CAAC,EAAE,CAAC,MAAM,mBAAmB,EAAE,CAAC,QAAQ,IAAI,0CAA0C,EAAE,MAAM,EAAE,MAAM,EAAE,CAAA,EAAG,UAAU,KAAK,EAAE,GAAG,CAAC,MAAM,EAAE,MAAM,KAAK,oBAAoB,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC,OAAO,EAAE,CAAC,QAAQ,MAAM,yCAAyC,EAAE,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,MAAM,oBAAoB,EAAE,CAAC,OAAO,IAAI,QAAQ,GAAG,CAAC,MAAM,EAAE,IAAI,WAAW,EAAE,OAAO,GAAG,CAAC,MAAM,EAAE,EAAE,OAAO,OAAO,EAAE,IAAI,WAAW,CAAC,EAAE,IAAI,EAAE,EAAE,QAAQ,EAAE,EAAE,EAAE,EAAE,OAAO,IAAI,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC,KAAK,EAAE,KAAK,KAAK,EAAE,KAAK,SAAS,EAAE,UAAU,EAAE,CAAC,CAAC,EAAE,EAAE,QAAQ,IAAI,CAAC,EAAE,CAAC,KAAK,EAAE,KAAK,MAAM,sBAAsB,UAAU,EAAE,CAAC,CAAC,EAAE,EAAE,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,aAAa,EAAE,CAAC,OAAO,KAAK,YAAY,IAAI,QAAQ,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,IAAG,EAAG,EAAE,WAAW,IAAI,CAAC,QAAQ,MAAM,uBAAuB,EAAE,EAAE,IAAI,MAAM,qBAAqB,CAAC,CAAC,EAAE,GAAG,EAAE,EAAE,GAAG,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,EAAE,EAAE,KAAK,IAAI,IAAI,aAAa,CAAC,EAAE,KAAK,OAAO,oBAAoB,UAAU,CAAC,EAAE,IAAI,uBAAuB,EAAE,CAAC,EAAE,IAAI,SAAS,EAAE,IAAI,MAAM,CAAC,CAAC,EAAE,EAAE,KAAK,OAAO,iBAAiB,UAAU,CAAC,EAAE,KAAK,OAAO,YAAY,CAAC,KAAK,gBAAgB,KAAK,CAAC,KAAK,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,KAAK,oBAAoB,CAAC,CAAC,CAAC,MAAM,oBAAoB,EAAE,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,kBAAkB,MAAM,EAAE,EAAE,EAAE,SAAS,UAAS,EAAG,EAAE,EAAE,SAAS,UAAS,EAAG,EAAE,IAAI,WAAW,CAAC,EAAE,EAAE,MAAM,CAAC,EAAE,EAAE,MAAK,EAAG,MAAM,EAAE,CAAA,EAAG,OAAO,CAAC,KAAK,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,MAAM,EAAE,KAAI,EAAG,GAAG,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC,MAAM,EAAE,IAAI,WAAW,EAAE,OAAO,CAAC,EAAE,IAAI,EAAE,EAAE,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,EAAE,UAAU,KAAK,EAAE,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,OAAO,OAAO,EAAE,MAAM,OAAO,EAAE,CAAC,OAAO,QAAQ,KAAK,kCAAkC,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,eAAe,EAAE,CAAC,OAAO,KAAK,YAAY,IAAI,QAAQ,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,IAAG,EAAG,EAAE,WAAW,IAAI,CAAC,QAAQ,MAAM,yBAAyB,EAAE,EAAE,IAAI,MAAM,uBAAuB,CAAC,CAAC,EAAE,GAAG,EAAE,EAAE,GAAG,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,CAAC,EAAE,EAAE,KAAK,IAAI,IAAI,aAAa,CAAC,EAAE,KAAK,OAAO,oBAAoB,UAAU,CAAC,EAAE,IAAI,yBAAyB,EAAE,CAAC,EAAE,IAAI,SAAS,EAAE,IAAI,MAAM,CAAC,CAAC,EAAE,EAAE,KAAK,OAAO,iBAAiB,UAAU,CAAC,EAAE,KAAK,OAAO,YAAY,CAAC,KAAK,kBAAkB,KAAK,CAAC,KAAK,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,MAAM,KAAK,sBAAsB,CAAC,CAAC,CAAC,MAAM,sBAAsB,EAAE,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,oBAAoB,MAAM,EAAE,EAAE,EAAE,SAAS,UAAS,EAAG,EAAE,EAAE,SAAS,UAAS,EAAG,EAAE,IAAI,WAAW,CAAC,EAAE,EAAE,MAAM,CAAC,EAAE,EAAE,MAAK,EAAG,MAAM,EAAE,CAAA,EAAG,OAAO,CAAC,KAAK,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,MAAM,EAAE,KAAI,EAAG,GAAG,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC,MAAM,EAAE,IAAI,WAAW,EAAE,OAAO,CAAC,EAAE,IAAI,EAAE,EAAE,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,EAAE,UAAU,KAAK,EAAE,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,OAAO,OAAO,EAAE,MAAM,OAAO,EAAE,CAAC,OAAO,QAAQ,KAAK,oCAAoC,CAAC,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,KAAK,SAAS,KAAK,OAAO,UAAS,EAAG,KAAK,OAAO,MAAM,KAAK,YAAY,EAAE,CAAC"}