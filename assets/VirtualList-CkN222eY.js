import{r,j as c}from"./wagmi-Ck0DqXmB.js";import"./vendor-CgHzTxSQ.js";const M=({items:a=[],itemHeight:t=200,containerHeight:u=600,overscan:o=5,renderItem:h,className:i="",onScroll:d=null,keyExtractor:m=(s,l)=>l})=>{const[s,l]=r.useState(0),v=r.useRef(null),p=r.useRef(null),b=r.useMemo(()=>{const e=Math.max(0,Math.floor(s/t)-o),n=Math.min(a.length-1,Math.ceil((s+u)/t)+o);return{startIndex:e,endIndex:n}},[s,u,t,o,a.length]),E=r.useMemo(()=>{const{startIndex:e,endIndex:n}=b;return a.slice(e,n+1).map((x,I)=>({item:x,index:e+I,style:{position:"absolute",top:(e+I)*t,height:t,width:"100%"}}))},[a,b,t]),j=r.useCallback(e=>{const n=e.target.scrollTop;l(n),d&&d(n)},[d]),f=r.useCallback(e=>{p.current||(p.current=requestAnimationFrame(()=>{j(e),p.current=null}))},[j]);r.useEffect(()=>{const e=v.current;if(e)return e.addEventListener("scroll",f,{passive:!0}),()=>{e.removeEventListener("scroll",f),p.current&&cancelAnimationFrame(p.current)}},[f]);const S=a.length*t;return c.jsx("div",{ref:v,className:`overflow-auto ${i}`,style:{height:u},onScroll:f,children:c.jsx("div",{style:{height:S,position:"relative"},children:E.map(({item:e,index:n,style:x})=>c.jsx("div",{style:x,children:h(e,n)},m(e,n)))})})},w=({images:a=[],itemHeight:t=200,containerHeight:u=600,renderImage:o,className:h=""})=>{const[i,d]=r.useState(new Set);r.useCallback(s=>{d(l=>new Set(l).add(s))},[]);const m=r.useCallback((s,l)=>c.jsxs("div",{className:"relative",children:[o(s,l,i.has(l)),!i.has(l)&&c.jsx("div",{className:"absolute inset-0 bg-zinc-800 animate-pulse",style:{height:t}})]}),[o,i,t]);return c.jsx(M,{items:a,itemHeight:t,containerHeight:u,renderItem:m,className:h,keyExtractor:(s,l)=>`image-${l}-${s.src||s}`})};export{w as VirtualImageList,M as default};
//# sourceMappingURL=VirtualList-CkN222eY.js.map
