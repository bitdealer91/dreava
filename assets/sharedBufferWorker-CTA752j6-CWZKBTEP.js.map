{"version":3,"file":"sharedBufferWorker-CTA752j6-CWZKBTEP.js","sources":["../../assets/sharedBufferWorker-CTA752j6.js"],"sourcesContent":["class u{constructor(){this.worker=null,this.initialized=!1,this.bufferSize=1024*1024,this.init()}async init(){try{typeof SharedArrayBuffer<\"u\"?(this.worker=new Worker(\"/workers/shared-buffer-worker.js\"),this.worker.onmessage=this.handleMessage.bind(this),this.worker.onerror=this.handleError.bind(this),this.initialized=!0,console.log(\"‚úÖ Shared Buffer Worker initialized\")):console.warn(\"‚ö†Ô∏è SharedArrayBuffer not supported\")}catch(e){console.warn(\"‚ö†Ô∏è Shared Buffer Worker initialization failed:\",e)}}handleMessage(e){const{type:s,data:r,id:o}=e.data;switch(s){case\"PROCESSING_COMPLETE\":console.log(\"‚úÖ Shared buffer processing complete:\",r);break;case\"PROCESSING_PROGRESS\":console.log(\"üìä Shared buffer progress:\",r);break;case\"ERROR\":console.error(\"‚ùå Shared buffer error:\",r);break;default:console.log(\"üì® Shared buffer message:\",s,r)}}handleError(e){console.error(\"‚ùå Shared Buffer Worker error:\",e)}async processFiles(e){return this.initialized?new Promise((s,r)=>{const o=Date.now(),l=setTimeout(()=>{console.error(\"‚è∞ Shared buffer processing timeout\"),r(new Error(\"Processing timeout\"))},3e4),a=n=>{const{type:t,data:c,id:f}=n.data;f===o&&(clearTimeout(l),this.worker.removeEventListener(\"message\",a),t===\"PROCESSING_COMPLETE\"?s(c):t===\"ERROR\"&&r(new Error(c)))};this.worker.addEventListener(\"message\",a);const i=e.map(n=>{const t=new SharedArrayBuffer(this.bufferSize);return{file:n,buffer:t}});this.worker.postMessage({type:\"PROCESS_FILES\",data:{files:i},id:o})}):(console.warn(\"‚ö†Ô∏è Shared Buffer Worker not available, using fallback\"),await this.fallbackProcessing(e))}async fallbackProcessing(e){console.log(\"üîÑ Using fallback processing for files:\",e.length);const s=[];for(const r of e)try{const o=await this.processFileFallback(r);s.push(o)}catch(o){console.error(\"‚ùå Fallback processing failed for file:\",r.name,o),s.push({error:o.message})}return s}async processFileFallback(e){return new Promise(s=>{const r=new FileReader;r.onload=o=>{const l=o.target.result,a=new Uint8Array(l);let i=0;for(let n=0;n<a.length;n++)i+=a[n];s({file:e.name,size:e.size,checksum:i,processed:!0})},r.onerror=()=>{s({file:e.name,error:\"File reading failed\",processed:!1})},r.readAsArrayBuffer(e)})}async compressData(e){return this.initialized?new Promise((s,r)=>{const o=Date.now(),l=setTimeout(()=>{console.error(\"‚è∞ Compression timeout\"),r(new Error(\"Compression timeout\"))},1e4),a=i=>{const{type:n,data:t,id:c}=i.data;c===o&&(clearTimeout(l),this.worker.removeEventListener(\"message\",a),n===\"COMPRESSION_COMPLETE\"?s(t):n===\"ERROR\"&&r(new Error(t)))};this.worker.addEventListener(\"message\",a),this.worker.postMessage({type:\"COMPRESS_DATA\",data:{data:e},id:o})}):await this.fallbackCompression(e)}async fallbackCompression(e){try{const s=new CompressionStream(\"gzip\"),r=s.writable.getWriter(),o=s.readable.getReader(),l=new Uint8Array(e);r.write(l),r.close();const a=[];for(;;){const{done:t,value:c}=await o.read();if(t)break;a.push(c)}const i=new Uint8Array(a.reduce((t,c)=>t+c.length,0));let n=0;for(const t of a)i.set(t,n),n+=t.length;return i.buffer}catch(s){return console.warn(\"‚ö†Ô∏è Fallback compression failed:\",s),e}}async decompressData(e){return this.initialized?new Promise((s,r)=>{const o=Date.now(),l=setTimeout(()=>{console.error(\"‚è∞ Decompression timeout\"),r(new Error(\"Decompression timeout\"))},1e4),a=i=>{const{type:n,data:t,id:c}=i.data;c===o&&(clearTimeout(l),this.worker.removeEventListener(\"message\",a),n===\"DECOMPRESSION_COMPLETE\"?s(t):n===\"ERROR\"&&r(new Error(t)))};this.worker.addEventListener(\"message\",a),this.worker.postMessage({type:\"DECOMPRESS_DATA\",data:{data:e},id:o})}):await this.fallbackDecompression(e)}async fallbackDecompression(e){try{const s=new DecompressionStream(\"gzip\"),r=s.writable.getWriter(),o=s.readable.getReader(),l=new Uint8Array(e);r.write(l),r.close();const a=[];for(;;){const{done:t,value:c}=await o.read();if(t)break;a.push(c)}const i=new Uint8Array(a.reduce((t,c)=>t+c.length,0));let n=0;for(const t of a)i.set(t,n),n+=t.length;return i.buffer}catch(s){return console.warn(\"‚ö†Ô∏è Fallback decompression failed:\",s),e}}destroy(){this.worker&&(this.worker.terminate(),this.worker=null),this.initialized=!1}}export{u as SharedBufferWorker};\n//# sourceMappingURL=sharedBufferWorker-CTA752j6.js.map\n"],"names":["u","o","l","n","t","c","f","i"],"mappings":"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"}