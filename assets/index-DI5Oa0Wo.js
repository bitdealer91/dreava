const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C48FUAJh-BylhyVHQ.js","assets/wagmi-Cp7MbjcB.js","assets/VirtualList-yZ8rWXJ5-DCcLzWuZ.js"])))=>i.map(i=>d[i]);
import{_ as n}from"./wagmi-Cp7MbjcB.js";!function(){const n=document.createElement("link").relList;if(!(n&&n.supports&&n.supports("modulepreload"))){for(const n of document.querySelectorAll('link[rel="modulepreload"]'))processPreload(n);new MutationObserver(n=>{for(const a of n)if("childList"===a.type)for(const n of a.addedNodes)"LINK"===n.tagName&&"modulepreload"===n.rel&&processPreload(n)}).observe(document,{childList:!0,subtree:!0})}function getFetchOpts(n){const a={};n.integrity&&(a.integrity=n.integrity);n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy);"use-credentials"===n.crossOrigin?a.credentials="include":"anonymous"===n.crossOrigin?a.credentials="omit":a.credentials="same-origin";return a}function processPreload(n){if(n.ep)return;n.ep=!0;const a=getFetchOpts(n);fetch(n.href,a)}}();function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function getAugmentedNamespace(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var a=n.default;if("function"==typeof a){var o=function a22(){return this instanceof a22?Reflect.construct(a,arguments,this.constructor):a.apply(this,arguments)};o.prototype=a.prototype}else o={};Object.defineProperty(o,"__esModule",{value:!0});Object.keys(n).forEach(function(a){var i=Object.getOwnPropertyDescriptor(n,a);Object.defineProperty(o,a,i.get?i:{enumerable:!0,get:function(){return n[a]}})});return o}var a={exports:{}};var o={};var i;function requireReact_production_min(){if(i)return o;i=1;
/**
     * @license React
     * react.production.min.js
     *
     * Copyright (c) Facebook, Inc. and its affiliates.
     *
     * This source code is licensed under the MIT license found in the
     * LICENSE file in the root directory of this source tree.
     */var n=Symbol.for("react.element"),a=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),y=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),N=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),E=Symbol.iterator;function A2(n){if(null===n||"object"!=typeof n)return null;n=E&&n[E]||n["@@iterator"];return"function"==typeof n?n:null}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,_={};function E2(n,a,o){this.props=n;this.context=a;this.refs=_;this.updater=o||S}E2.prototype.isReactComponent={};E2.prototype.setState=function(n,a){if("object"!=typeof n&&"function"!=typeof n&&null!=n)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,a,"setState")};E2.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function F2(){}F2.prototype=E2.prototype;function G2(n,a,o){this.props=n;this.context=a;this.refs=_;this.updater=o||S}var j=G2.prototype=new F2;j.constructor=G2;A(j,E2.prototype);j.isPureReactComponent=!0;var I=Array.isArray,O=Object.prototype.hasOwnProperty,R={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function M2(a,o,i){var u,d={},m=null,g=null;if(null!=o)for(u in void 0!==o.ref&&(g=o.ref),void 0!==o.key&&(m=""+o.key),o)O.call(o,u)&&!B.hasOwnProperty(u)&&(d[u]=o[u]);var y=arguments.length-2;if(1===y)d.children=i;else if(1<y){for(var v=Array(y),x=0;x<y;x++)v[x]=arguments[x+2];d.children=v}if(a&&a.defaultProps)for(u in y=a.defaultProps,y)void 0===d[u]&&(d[u]=y[u]);return{$$typeof:n,type:a,key:m,ref:g,props:d,_owner:R.current}}function N3(a,o){return{$$typeof:n,type:a.type,key:o,ref:a.ref,props:a.props,_owner:a._owner}}function O2(a){return"object"==typeof a&&null!==a&&a.$$typeof===n}function escape2(n){var a={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(n){return a[n]})}var M=/\/+/g;function Q2(n,a){return"object"==typeof n&&null!==n&&null!=n.key?escape2(""+n.key):a.toString(36)}function R2(o,i,u,d,m){var g=typeof o;"undefined"!==g&&"boolean"!==g||(o=null);var y=!1;if(null===o)y=!0;else switch(g){case"string":case"number":y=!0;break;case"object":switch(o.$$typeof){case n:case a:y=!0}}if(y)return y=o,m=m(y),o=""===d?"."+Q2(y,0):d,I(m)?(u="",null!=o&&(u=o.replace(M,"$&/")+"/"),R2(m,i,u,"",function(n){return n})):null!=m&&(O2(m)&&(m=N3(m,u+(!m.key||y&&y.key===m.key?"":(""+m.key).replace(M,"$&/")+"/")+o)),i.push(m)),1;y=0;d=""===d?".":d+":";if(I(o))for(var v=0;v<o.length;v++){g=o[v];var x=d+Q2(g,v);y+=R2(g,i,u,x,m)}else if(x=A2(o),"function"==typeof x)for(o=x.call(o),v=0;!(g=o.next()).done;)g=g.value,x=d+Q2(g,v++),y+=R2(g,i,u,x,m);else if("object"===g)throw i=String(o),Error("Objects are not valid as a React child (found: "+("[object Object]"===i?"object with keys {"+Object.keys(o).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.");return y}function S2(n,a,o){if(null==n)return n;var i=[],u=0;R2(n,i,"","",function(n){return a.call(o,n,u++)});return i}function T2(n){if(-1===n._status){var a=n._result;a=a();a.then(function(a){0!==n._status&&-1!==n._status||(n._status=1,n._result=a)},function(a){0!==n._status&&-1!==n._status||(n._status=2,n._result=a)});-1===n._status&&(n._status=0,n._result=a)}if(1===n._status)return n._result.default;throw n._result}var z={current:null},L={transition:null},D={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:L,ReactCurrentOwner:R};function X2(){throw Error("act(...) is not supported in production builds of React.")}o.Children={map:S2,forEach:function(n,a,o){S2(n,function(){a.apply(this,arguments)},o)},count:function(n){var a=0;S2(n,function(){a++});return a},toArray:function(n){return S2(n,function(n){return n})||[]},only:function(n){if(!O2(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};o.Component=E2;o.Fragment=u;o.Profiler=m;o.PureComponent=G2;o.StrictMode=d;o.Suspense=x;o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D;o.act=X2;o.cloneElement=function(a,o,i){if(null==a)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+a+".");var u=A({},a.props),d=a.key,m=a.ref,g=a._owner;if(null!=o){void 0!==o.ref&&(m=o.ref,g=R.current);void 0!==o.key&&(d=""+o.key);if(a.type&&a.type.defaultProps)var y=a.type.defaultProps;for(v in o)O.call(o,v)&&!B.hasOwnProperty(v)&&(u[v]=void 0===o[v]&&void 0!==y?y[v]:o[v])}var v=arguments.length-2;if(1===v)u.children=i;else if(1<v){y=Array(v);for(var x=0;x<v;x++)y[x]=arguments[x+2];u.children=y}return{$$typeof:n,type:a.type,key:d,ref:m,props:u,_owner:g}};o.createContext=function(n){n={$$typeof:y,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};n.Provider={$$typeof:g,_context:n};return n.Consumer=n};o.createElement=M2;o.createFactory=function(n){var a=M2.bind(null,n);a.type=n;return a};o.createRef=function(){return{current:null}};o.forwardRef=function(n){return{$$typeof:v,render:n}};o.isValidElement=O2;o.lazy=function(n){return{$$typeof:k,_payload:{_status:-1,_result:n},_init:T2}};o.memo=function(n,a){return{$$typeof:N,type:n,compare:void 0===a?null:a}};o.startTransition=function(n){var a=L.transition;L.transition={};try{n()}finally{L.transition=a}};o.unstable_act=X2;o.useCallback=function(n,a){return z.current.useCallback(n,a)};o.useContext=function(n){return z.current.useContext(n)};o.useDebugValue=function(){};o.useDeferredValue=function(n){return z.current.useDeferredValue(n)};o.useEffect=function(n,a){return z.current.useEffect(n,a)};o.useId=function(){return z.current.useId()};o.useImperativeHandle=function(n,a,o){return z.current.useImperativeHandle(n,a,o)};o.useInsertionEffect=function(n,a){return z.current.useInsertionEffect(n,a)};o.useLayoutEffect=function(n,a){return z.current.useLayoutEffect(n,a)};o.useMemo=function(n,a){return z.current.useMemo(n,a)};o.useReducer=function(n,a,o){return z.current.useReducer(n,a,o)};o.useRef=function(n){return z.current.useRef(n)};o.useState=function(n){return z.current.useState(n)};o.useSyncExternalStore=function(n,a,o){return z.current.useSyncExternalStore(n,a,o)};o.useTransition=function(){return z.current.useTransition()};o.version="18.3.1";return o}var u;function requireReact(){if(u)return a.exports;u=1;a.exports=requireReact_production_min();return a.exports}var d={exports:{}};var m={};var g={exports:{}};var y={};
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v;function requireScheduler_production_min(){if(v)return y;v=1;!function(n){function f2(n,a){var o=n.length;n.push(a);e:for(;0<o;){var i=o-1>>>1,u=n[i];if(!(0<g2(u,a)))break e;n[i]=a,n[o]=u,o=i}}function h2(n){return 0===n.length?null:n[0]}function k2(n){if(0===n.length)return null;var a=n[0],o=n.pop();if(o!==a){n[0]=o;e:for(var i=0,u=n.length,d=u>>>1;i<d;){var m=2*(i+1)-1,g=n[m],y=m+1,v=n[y];if(0>g2(g,o))y<u&&0>g2(v,g)?(n[i]=v,n[y]=o,i=y):(n[i]=g,n[m]=o,i=m);else{if(!(y<u&&0>g2(v,o)))break e;n[i]=v,n[y]=o,i=y}}}return a}function g2(n,a){var o=n.sortIndex-a.sortIndex;return 0!==o?o:n.id-a.id}if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,i=o.now();n.unstable_now=function(){return o.now()-i}}var u=[],d=[],m=1,g=null,y=3,v=!1,x=!1,N=!1,k="function"==typeof setTimeout?setTimeout:null,E="function"==typeof clearTimeout?clearTimeout:null,S="undefined"!=typeof setImmediate?setImmediate:null;"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G2(n){for(var a=h2(d);null!==a;){if(null===a.callback)k2(d);else{if(!(a.startTime<=n))break;k2(d),a.sortIndex=a.expirationTime,f2(u,a)}a=h2(d)}}function H2(n){N=!1;G2(n);if(!x)if(null!==h2(u))x=!0,I2(J2);else{var a=h2(d);null!==a&&K2(H2,a.startTime-n)}}function J2(a,o){x=!1;N&&(N=!1,E(j),j=-1);v=!0;var i=y;try{G2(o);for(g=h2(u);null!==g&&(!(g.expirationTime>o)||a&&!M2());){var m=g.callback;if("function"==typeof m){g.callback=null;y=g.priorityLevel;var k=m(g.expirationTime<=o);o=n.unstable_now();"function"==typeof k?g.callback=k:g===h2(u)&&k2(u);G2(o)}else k2(u);g=h2(u)}if(null!==g)var S=!0;else{var A=h2(d);null!==A&&K2(H2,A.startTime-o);S=!1}return S}finally{g=null,y=i,v=!1}}var A=!1,_=null,j=-1,I=5,O=-1;function M2(){return!(n.unstable_now()-O<I)}function R2(){if(null!==_){var a=n.unstable_now();O=a;var o=!0;try{o=_(!0,a)}finally{o?R():(A=!1,_=null)}}else A=!1}var R;if("function"==typeof S)R=function(){S(R2)};else if("undefined"!=typeof MessageChannel){var B=new MessageChannel,M=B.port2;B.port1.onmessage=R2;R=function(){M.postMessage(null)}}else R=function(){k(R2,0)};function I2(n){_=n;A||(A=!0,R())}function K2(a,o){j=k(function(){a(n.unstable_now())},o)}n.unstable_IdlePriority=5;n.unstable_ImmediatePriority=1;n.unstable_LowPriority=4;n.unstable_NormalPriority=3;n.unstable_Profiling=null;n.unstable_UserBlockingPriority=2;n.unstable_cancelCallback=function(n){n.callback=null};n.unstable_continueExecution=function(){x||v||(x=!0,I2(J2))};n.unstable_forceFrameRate=function(n){0>n||125<n?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<n?Math.floor(1e3/n):5};n.unstable_getCurrentPriorityLevel=function(){return y};n.unstable_getFirstCallbackNode=function(){return h2(u)};n.unstable_next=function(n){switch(y){case 1:case 2:case 3:var a=3;break;default:a=y}var o=y;y=a;try{return n()}finally{y=o}};n.unstable_pauseExecution=function(){};n.unstable_requestPaint=function(){};n.unstable_runWithPriority=function(n,a){switch(n){case 1:case 2:case 3:case 4:case 5:break;default:n=3}var o=y;y=n;try{return a()}finally{y=o}};n.unstable_scheduleCallback=function(a,o,i){var g=n.unstable_now();"object"==typeof i&&null!==i?(i=i.delay,i="number"==typeof i&&0<i?g+i:g):i=g;switch(a){case 1:var y=-1;break;case 2:y=250;break;case 5:y=1073741823;break;case 4:y=1e4;break;default:y=5e3}y=i+y;a={id:m++,callback:o,priorityLevel:a,startTime:i,expirationTime:y,sortIndex:-1};i>g?(a.sortIndex=i,f2(d,a),null===h2(u)&&a===h2(d)&&(N?(E(j),j=-1):N=!0,K2(H2,i-g))):(a.sortIndex=y,f2(u,a),x||v||(x=!0,I2(J2)));return a};n.unstable_shouldYield=M2;n.unstable_wrapCallback=function(n){var a=y;return function(){var o=y;y=a;try{return n.apply(this,arguments)}finally{y=o}}}}(y);return y}var x;function requireScheduler(){if(x)return g.exports;x=1;g.exports=requireScheduler_production_min();return g.exports}
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N;function requireReactDom_production_min(){if(N)return m;N=1;var n=requireReact(),a=requireScheduler();function p2(n){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+n,o=1;o<arguments.length;o++)a+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,i={};function fa3(n,a){ha3(n,a);ha3(n+"Capture",a)}function ha3(n,a){i[n]=a;for(n=0;n<a.length;n++)o.add(a[n])}var u=!("undefined"==typeof window||"undefined"==typeof window.document||"undefined"==typeof window.document.createElement),d=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},v={};function oa3(n){if(d.call(v,n))return!0;if(d.call(y,n))return!1;if(g.test(n))return v[n]=!0;y[n]=!0;return!1}function pa3(n,a,o,i){if(null!==o&&0===o.type)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":if(i)return!1;if(null!==o)return!o.acceptsBooleans;n=n.toLowerCase().slice(0,5);return"data-"!==n&&"aria-"!==n;default:return!1}}function qa3(n,a,o,i){if(null===a||"undefined"==typeof a||pa3(n,a,o,i))return!0;if(i)return!1;if(null!==o)switch(o.type){case 3:return!a;case 4:return!1===a;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function v2(n,a,o,i,u,d,m){this.acceptsBooleans=2===a||3===a||4===a;this.attributeName=i;this.attributeNamespace=u;this.mustUseProperty=o;this.propertyName=n;this.type=a;this.sanitizeURL=d;this.removeEmptyString=m}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){x[n]=new v2(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var a=n[0];x[a]=new v2(a,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){x[n]=new v2(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){x[n]=new v2(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){x[n]=new v2(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){x[n]=new v2(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){x[n]=new v2(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){x[n]=new v2(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){x[n]=new v2(n,5,!1,n.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function sa2(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var a=n.replace(k,sa2);x[a]=new v2(a,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var a=n.replace(k,sa2);x[a]=new v2(a,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var a=n.replace(k,sa2);x[a]=new v2(a,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){x[n]=new v2(n,1,!1,n.toLowerCase(),null,!1,!1)});x.xlinkHref=new v2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){x[n]=new v2(n,1,!1,n.toLowerCase(),null,!0,!0)});function ta2(n,a,o,i){var u=x.hasOwnProperty(a)?x[a]:null;(null!==u?0!==u.type:i||!(2<a.length)||"o"!==a[0]&&"O"!==a[0]||"n"!==a[1]&&"N"!==a[1])&&(qa3(a,o,u,i)&&(o=null),i||null===u?oa3(a)&&(null===o?n.removeAttribute(a):n.setAttribute(a,""+o)):u.mustUseProperty?n[u.propertyName]=null===o?3!==u.type&&"":o:(a=u.attributeName,i=u.attributeNamespace,null===o?n.removeAttribute(a):(u=u.type,o=3===u||4===u&&!0===o?"":""+o,i?n.setAttributeNS(i,a,o):n.setAttribute(a,o))))}var E=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),A=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),R=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),D=Symbol.for("react.lazy");var W=Symbol.for("react.offscreen");var H=Symbol.iterator;function Ka4(n){if(null===n||"object"!=typeof n)return null;n=H&&n[H]||n["@@iterator"];return"function"==typeof n?n:null}var q,G=Object.assign;function Ma2(n){if(void 0===q)try{throw Error()}catch(o){var a=o.stack.trim().match(/\n( *(at )?)/);q=a&&a[1]||""}return"\n"+q+n}var V=!1;function Oa3(n,a){if(!n||V)return"";V=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(a,[])}catch(v){var i=v}Reflect.construct(n,[],a)}else{try{a.call()}catch(v){i=v}n.call(a.prototype)}else{try{throw Error()}catch(v){i=v}n()}}catch(v){if(v&&i&&"string"==typeof v.stack){for(var u=v.stack.split("\n"),d=i.stack.split("\n"),m=u.length-1,g=d.length-1;1<=m&&0<=g&&u[m]!==d[g];)g--;for(;1<=m&&0<=g;m--,g--)if(u[m]!==d[g]){if(1!==m||1!==g)do{if(m--,g--,0>g||u[m]!==d[g]){var y="\n"+u[m].replace(" at new "," at ");n.displayName&&y.includes("<anonymous>")&&(y=y.replace("<anonymous>",n.displayName));return y}}while(1<=m&&0<=g);break}}}finally{V=!1,Error.prepareStackTrace=o}return(n=n?n.displayName||n.name:"")?Ma2(n):""}function Pa2(n){switch(n.tag){case 5:return Ma2(n.type);case 16:return Ma2("Lazy");case 13:return Ma2("Suspense");case 19:return Ma2("SuspenseList");case 0:case 2:case 15:return n=Oa3(n.type,!1),n;case 11:return n=Oa3(n.type.render,!1),n;case 1:return n=Oa3(n.type,!0),n;default:return""}}function Qa3(n){if(null==n)return null;if("function"==typeof n)return n.displayName||n.name||null;if("string"==typeof n)return n;switch(n){case _:return"Fragment";case A:return"Portal";case I:return"Profiler";case j:return"StrictMode";case M:return"Suspense";case z:return"SuspenseList"}if("object"==typeof n)switch(n.$$typeof){case R:return(n.displayName||"Context")+".Consumer";case O:return(n._context.displayName||"Context")+".Provider";case B:var a=n.render;n=n.displayName;n||(n=a.displayName||a.name||"",n=""!==n?"ForwardRef("+n+")":"ForwardRef");return n;case L:return a=n.displayName||null,null!==a?a:Qa3(n.type)||"Memo";case D:a=n._payload;n=n._init;try{return Qa3(n(a))}catch(o){}}return null}function Ra2(n){var a=n.type;switch(n.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=a.render,n=n.displayName||n.name||"",a.displayName||(""!==n?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa3(a);case 8:return a===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof a)return a.displayName||a.name||null;if("string"==typeof a)return a}return null}function Sa2(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":case"object":return n;default:return""}}function Ta2(n){var a=n.type;return(n=n.nodeName)&&"input"===n.toLowerCase()&&("checkbox"===a||"radio"===a)}function Ua2(n){var a=Ta2(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,a),i=""+n[a];if(!n.hasOwnProperty(a)&&"undefined"!=typeof o&&"function"==typeof o.get&&"function"==typeof o.set){var u=o.get,d=o.set;Object.defineProperty(n,a,{configurable:!0,get:function(){return u.call(this)},set:function(n){i=""+n;d.call(this,n)}});Object.defineProperty(n,a,{enumerable:o.enumerable});return{getValue:function(){return i},setValue:function(n){i=""+n},stopTracking:function(){n._valueTracker=null;delete n[a]}}}}function Va3(n){n._valueTracker||(n._valueTracker=Ua2(n))}function Wa3(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var o=a.getValue();var i="";n&&(i=Ta2(n)?n.checked?"true":"false":n.value);n=i;return n!==o&&(a.setValue(n),!0)}function Xa2(n){n=n||("undefined"!=typeof document?document:void 0);if("undefined"==typeof n)return null;try{return n.activeElement||n.body}catch(a){return n.body}}function Ya2(n,a){var o=a.checked;return G({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=o?o:n._wrapperState.initialChecked})}function Za2(n,a){var o=null==a.defaultValue?"":a.defaultValue,i=null!=a.checked?a.checked:a.defaultChecked;o=Sa2(null!=a.value?a.value:o);n._wrapperState={initialChecked:i,initialValue:o,controlled:"checkbox"===a.type||"radio"===a.type?null!=a.checked:null!=a.value}}function ab2(n,a){a=a.checked;null!=a&&ta2(n,"checked",a,!1)}function bb2(n,a){ab2(n,a);var o=Sa2(a.value),i=a.type;if(null!=o)"number"===i?(0===o&&""===n.value||n.value!=o)&&(n.value=""+o):n.value!==""+o&&(n.value=""+o);else if("submit"===i||"reset"===i){n.removeAttribute("value");return}a.hasOwnProperty("value")?cb2(n,a.type,o):a.hasOwnProperty("defaultValue")&&cb2(n,a.type,Sa2(a.defaultValue));null==a.checked&&null!=a.defaultChecked&&(n.defaultChecked=!!a.defaultChecked)}function db2(n,a,o){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var i=a.type;if(!("submit"!==i&&"reset"!==i||void 0!==a.value&&null!==a.value))return;a=""+n._wrapperState.initialValue;o||a===n.value||(n.value=a);n.defaultValue=a}o=n.name;""!==o&&(n.name="");n.defaultChecked=!!n._wrapperState.initialChecked;""!==o&&(n.name=o)}function cb2(n,a,o){"number"===a&&Xa2(n.ownerDocument)===n||(null==o?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+o&&(n.defaultValue=""+o))}var Z=Array.isArray;function fb2(n,a,o,i){n=n.options;if(a){a={};for(var u=0;u<o.length;u++)a["$"+o[u]]=!0;for(o=0;o<n.length;o++)u=a.hasOwnProperty("$"+n[o].value),n[o].selected!==u&&(n[o].selected=u),u&&i&&(n[o].defaultSelected=!0)}else{o=""+Sa2(o);a=null;for(u=0;u<n.length;u++){if(n[u].value===o){n[u].selected=!0;i&&(n[u].defaultSelected=!0);return}null!==a||n[u].disabled||(a=n[u])}null!==a&&(a.selected=!0)}}function gb2(n,a){if(null!=a.dangerouslySetInnerHTML)throw Error(p2(91));return G({},a,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function hb2(n,a){var o=a.value;if(null==o){o=a.children;a=a.defaultValue;if(null!=o){if(null!=a)throw Error(p2(92));if(Z(o)){if(1<o.length)throw Error(p2(93));o=o[0]}a=o}null==a&&(a="");o=a}n._wrapperState={initialValue:Sa2(o)}}function ib2(n,a){var o=Sa2(a.value),i=Sa2(a.defaultValue);null!=o&&(o=""+o,o!==n.value&&(n.value=o),null==a.defaultValue&&n.defaultValue!==o&&(n.defaultValue=o));null!=i&&(n.defaultValue=""+i)}function jb2(n){var a=n.textContent;a===n._wrapperState.initialValue&&""!==a&&null!==a&&(n.value=a)}function kb2(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb2(n,a){return null==n||"http://www.w3.org/1999/xhtml"===n?kb2(a):"http://www.w3.org/2000/svg"===n&&"foreignObject"===a?"http://www.w3.org/1999/xhtml":n}var Y,J=function(n){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(a,o,i,u){MSApp.execUnsafeLocalFunction(function(){return n(a,o,i,u)})}:n}(function(n,a){if("http://www.w3.org/2000/svg"!==n.namespaceURI||"innerHTML"in n)n.innerHTML=a;else{Y=Y||document.createElement("div");Y.innerHTML="<svg>"+a.valueOf().toString()+"</svg>";for(a=Y.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;a.firstChild;)n.appendChild(a.firstChild)}});function ob2(n,a){if(a){var o=n.firstChild;if(o&&o===n.lastChild&&3===o.nodeType){o.nodeValue=a;return}}n.textContent=a}var X={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ee=["Webkit","ms","Moz","O"];Object.keys(X).forEach(function(n){ee.forEach(function(a){a=a+n.charAt(0).toUpperCase()+n.substring(1);X[a]=X[n]})});function rb2(n,a,o){return null==a||"boolean"==typeof a||""===a?"":o||"number"!=typeof a||0===a||X.hasOwnProperty(n)&&X[n]?(""+a).trim():a+"px"}function sb2(n,a){n=n.style;for(var o in a)if(a.hasOwnProperty(o)){var i=0===o.indexOf("--"),u=rb2(o,a[o],i);"float"===o&&(o="cssFloat");i?n.setProperty(o,u):n[o]=u}}var te=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub2(n,a){if(a){if(te[n]&&(null!=a.children||null!=a.dangerouslySetInnerHTML))throw Error(p2(137,n));if(null!=a.dangerouslySetInnerHTML){if(null!=a.children)throw Error(p2(60));if("object"!=typeof a.dangerouslySetInnerHTML||!("__html"in a.dangerouslySetInnerHTML))throw Error(p2(61))}if(null!=a.style&&"object"!=typeof a.style)throw Error(p2(62))}}function vb2(n,a){if(-1===n.indexOf("-"))return"string"==typeof a.is;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ne=null;function xb2(n){n=n.target||n.srcElement||window;n.correspondingUseElement&&(n=n.correspondingUseElement);return 3===n.nodeType?n.parentNode:n}var re=null,se=null,ae=null;function Bb2(n){if(n=Cb2(n)){if("function"!=typeof re)throw Error(p2(280));var a=n.stateNode;a&&(a=Db2(a),re(n.stateNode,n.type,a))}}function Eb2(n){se?ae?ae.push(n):ae=[n]:se=n}function Fb2(){if(se){var n=se,a=ae;ae=se=null;Bb2(n);if(a)for(n=0;n<a.length;n++)Bb2(a[n])}}function Gb(n,a){return n(a)}function Hb2(){}var oe=!1;function Jb(n,a,o){if(oe)return n(a,o);oe=!0;try{return Gb(n,a,o)}finally{(oe=!1,null!==se||null!==ae)&&(Hb2(),Fb2())}}function Kb(n,a){var o=n.stateNode;if(null===o)return null;var i=Db2(o);if(null===i)return null;o=i[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!("button"===n||"input"===n||"select"===n||"textarea"===n));n=!i;break e;default:n=!1}if(n)return null;if(o&&"function"!=typeof o)throw Error(p2(231,a,typeof o));return o}var ie=!1;if(u)try{var ce={};Object.defineProperty(ce,"passive",{get:function(){ie=!0}});window.addEventListener("test",ce,ce);window.removeEventListener("test",ce,ce)}catch(As){ie=!1}function Nb2(n,a,o,i,u,d,m,g,y){var v=Array.prototype.slice.call(arguments,3);try{a.apply(o,v)}catch(x){this.onError(x)}}var le=!1,ue=null,de=!1,he=null,fe={onError:function(n){le=!0;ue=n}};function Tb2(n,a,o,i,u,d,m,g,y){le=!1;ue=null;Nb2.apply(fe,arguments)}function Ub2(n,a,o,i,u,d,m,g,y){Tb2.apply(this,arguments);if(le){if(!le)throw Error(p2(198));var v=ue;le=!1;ue=null;de||(de=!0,he=v)}}function Vb(n){var a=n,o=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do{a=n,!!(4098&a.flags)&&(o=a.return),n=a.return}while(n)}return 3===a.tag?o:null}function Wb2(n){if(13===n.tag){var a=n.memoizedState;null===a&&(n=n.alternate,null!==n&&(a=n.memoizedState));if(null!==a)return a.dehydrated}return null}function Xb(n){if(Vb(n)!==n)throw Error(p2(188))}function Yb(n){var a=n.alternate;if(!a){a=Vb(n);if(null===a)throw Error(p2(188));return a!==n?null:n}for(var o=n,i=a;;){var u=o.return;if(null===u)break;var d=u.alternate;if(null===d){i=u.return;if(null!==i){o=i;continue}break}if(u.child===d.child){for(d=u.child;d;){if(d===o)return Xb(u),n;if(d===i)return Xb(u),a;d=d.sibling}throw Error(p2(188))}if(o.return!==i.return)o=u,i=d;else{for(var m=!1,g=u.child;g;){if(g===o){m=!0;o=u;i=d;break}if(g===i){m=!0;i=u;o=d;break}g=g.sibling}if(!m){for(g=d.child;g;){if(g===o){m=!0;o=d;i=u;break}if(g===i){m=!0;i=d;o=u;break}g=g.sibling}if(!m)throw Error(p2(189))}}if(o.alternate!==i)throw Error(p2(190))}if(3!==o.tag)throw Error(p2(188));return o.stateNode.current===o?n:a}function Zb(n){n=Yb(n);return null!==n?$b2(n):null}function $b2(n){if(5===n.tag||6===n.tag)return n;for(n=n.child;null!==n;){var a=$b2(n);if(null!==a)return a;n=n.sibling}return null}var pe=a.unstable_scheduleCallback,me=a.unstable_cancelCallback,ge=a.unstable_shouldYield,ye=a.unstable_requestPaint,be=a.unstable_now,we=a.unstable_getCurrentPriorityLevel,xe=a.unstable_ImmediatePriority,Ne=a.unstable_UserBlockingPriority,ke=a.unstable_NormalPriority,Ee=a.unstable_LowPriority,Se=a.unstable_IdlePriority,Ae=null,_e=null;function mc2(n){if(_e&&"function"==typeof _e.onCommitFiberRoot)try{_e.onCommitFiberRoot(Ae,n,void 0,!(128&~n.current.flags))}catch(a){}}var Te=Math.clz32?Math.clz32:nc3,je=Math.log,Ie=Math.LN2;function nc3(n){n>>>=0;return 0===n?32:31-(je(n)/Ie|0)|0}var Pe=64,Oe=4194304;function tc3(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&n;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&n;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function uc2(n,a){var o=n.pendingLanes;if(0===o)return 0;var i=0,u=n.suspendedLanes,d=n.pingedLanes,m=268435455&o;if(0!==m){var g=m&~u;0!==g?i=tc3(g):(d&=m,0!==d&&(i=tc3(d)))}else m=o&~u,0!==m?i=tc3(m):0!==d&&(i=tc3(d));if(0===i)return 0;if(0!==a&&a!==i&&0===(a&u)&&(u=i&-i,d=a&-a,u>=d||16===u&&4194240&d))return a;4&i&&(i|=16&o);a=n.entangledLanes;if(0!==a)for(n=n.entanglements,a&=i;0<a;)o=31-Te(a),u=1<<o,i|=n[o],a&=~u;return i}function vc2(n,a){switch(n){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;default:return-1}}function wc3(n,a){for(var o=n.suspendedLanes,i=n.pingedLanes,u=n.expirationTimes,d=n.pendingLanes;0<d;){var m=31-Te(d),g=1<<m,y=u[m];-1===y?0!==(g&o)&&0===(g&i)||(u[m]=vc2(g,a)):y<=a&&(n.expiredLanes|=g);d&=~g}}function xc2(n){n=-1073741825&n.pendingLanes;return 0!==n?n:1073741824&n?1073741824:0}function yc2(){var n=Pe;Pe<<=1;!(4194240&Pe)&&(Pe=64);return n}function zc2(n){for(var a=[],o=0;31>o;o++)a.push(n);return a}function Ac3(n,a,o){n.pendingLanes|=a;536870912!==a&&(n.suspendedLanes=0,n.pingedLanes=0);n=n.eventTimes;a=31-Te(a);n[a]=o}function Bc2(n,a){var o=n.pendingLanes&~a;n.pendingLanes=a;n.suspendedLanes=0;n.pingedLanes=0;n.expiredLanes&=a;n.mutableReadLanes&=a;n.entangledLanes&=a;a=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<o;){var u=31-Te(o),d=1<<u;a[u]=0;i[u]=-1;n[u]=-1;o&=~d}}function Cc2(n,a){var o=n.entangledLanes|=a;for(n=n.entanglements;o;){var i=31-Te(o),u=1<<i;u&a|n[i]&a&&(n[i]|=a);o&=~u}}var Re=0;function Dc2(n){n&=-n;return 1<n?4<n?268435455&n?16:536870912:4:1}var Be,Me,ze,Fe,Le,De=!1,$e=[],Ue=null,We=null,He=null,qe=new Map,Ge=new Map,Ve=[],Ke="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc2(n,a){switch(n){case"focusin":case"focusout":Ue=null;break;case"dragenter":case"dragleave":We=null;break;case"mouseover":case"mouseout":He=null;break;case"pointerover":case"pointerout":qe.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ge.delete(a.pointerId)}}function Tc2(n,a,o,i,u,d){if(null===n||n.nativeEvent!==d)return n={blockedOn:a,domEventName:o,eventSystemFlags:i,nativeEvent:d,targetContainers:[u]},null!==a&&(a=Cb2(a),null!==a&&Me(a)),n;n.eventSystemFlags|=i;a=n.targetContainers;null!==u&&-1===a.indexOf(u)&&a.push(u);return n}function Uc2(n,a,o,i,u){switch(a){case"focusin":return Ue=Tc2(Ue,n,a,o,i,u),!0;case"dragenter":return We=Tc2(We,n,a,o,i,u),!0;case"mouseover":return He=Tc2(He,n,a,o,i,u),!0;case"pointerover":var d=u.pointerId;qe.set(d,Tc2(qe.get(d)||null,n,a,o,i,u));return!0;case"gotpointercapture":return d=u.pointerId,Ge.set(d,Tc2(Ge.get(d)||null,n,a,o,i,u)),!0}return!1}function Vc2(n){var a=Wc2(n.target);if(null!==a){var o=Vb(a);if(null!==o)if(a=o.tag,13===a){if(a=Wb2(o),null!==a){n.blockedOn=a;Le(n.priority,function(){ze(o)});return}}else if(3===a&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=3===o.tag?o.stateNode.containerInfo:null;return}}n.blockedOn=null}function Xc2(n){if(null!==n.blockedOn)return!1;for(var a=n.targetContainers;0<a.length;){var o=Yc2(n.domEventName,n.eventSystemFlags,a[0],n.nativeEvent);if(null!==o)return a=Cb2(o),null!==a&&Me(a),n.blockedOn=o,!1;o=n.nativeEvent;var i=new o.constructor(o.type,o);ne=i;o.target.dispatchEvent(i);ne=null;a.shift()}return!0}function Zc2(n,a,o){Xc2(n)&&o.delete(a)}function $c2(){De=!1;null!==Ue&&Xc2(Ue)&&(Ue=null);null!==We&&Xc2(We)&&(We=null);null!==He&&Xc2(He)&&(He=null);qe.forEach(Zc2);Ge.forEach(Zc2)}function ad2(n,o){n.blockedOn===o&&(n.blockedOn=null,De||(De=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,$c2)))}function bd2(n){function b2(a){return ad2(a,n)}if(0<$e.length){ad2($e[0],n);for(var a=1;a<$e.length;a++){var o=$e[a];o.blockedOn===n&&(o.blockedOn=null)}}null!==Ue&&ad2(Ue,n);null!==We&&ad2(We,n);null!==He&&ad2(He,n);qe.forEach(b2);Ge.forEach(b2);for(a=0;a<Ve.length;a++)o=Ve[a],o.blockedOn===n&&(o.blockedOn=null);for(;0<Ve.length&&(a=Ve[0],null===a.blockedOn);)Vc2(a),null===a.blockedOn&&Ve.shift()}var Ze=E.ReactCurrentBatchConfig,Ye=!0;function ed2(n,a,o,i){var u=Re,d=Ze.transition;Ze.transition=null;try{Re=1,fd2(n,a,o,i)}finally{Re=u,Ze.transition=d}}function gd2(n,a,o,i){var u=Re,d=Ze.transition;Ze.transition=null;try{Re=4,fd2(n,a,o,i)}finally{Re=u,Ze.transition=d}}function fd2(n,a,o,i){if(Ye){var u=Yc2(n,a,o,i);if(null===u)hd2(n,a,i,Je,o),Sc2(n,i);else if(Uc2(u,n,a,o,i))i.stopPropagation();else if(Sc2(n,i),4&a&&-1<Ke.indexOf(n)){for(;null!==u;){var d=Cb2(u);null!==d&&Be(d);d=Yc2(n,a,o,i);null===d&&hd2(n,a,i,Je,o);if(d===u)break;u=d}null!==u&&i.stopPropagation()}else hd2(n,a,i,null,o)}}var Je=null;function Yc2(n,a,o,i){Je=null;n=xb2(i);n=Wc2(n);if(null!==n)if(a=Vb(n),null===a)n=null;else if(o=a.tag,13===o){n=Wb2(a);if(null!==n)return n;n=null}else if(3===o){if(a.stateNode.current.memoizedState.isDehydrated)return 3===a.tag?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null);Je=n;return null}function jd2(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(we()){case xe:return 1;case Ne:return 4;case ke:case Ee:return 16;case Se:return 536870912;default:return 16}default:return 16}}var Qe=null,Xe=null,et=null;function nd2(){if(et)return et;var n,a,o=Xe,i=o.length,u="value"in Qe?Qe.value:Qe.textContent,d=u.length;for(n=0;n<i&&o[n]===u[n];n++);var m=i-n;for(a=1;a<=m&&o[i-a]===u[d-a];a++);return et=u.slice(n,1<a?1-a:void 0)}function od2(n){var a=n.keyCode;"charCode"in n?(n=n.charCode,0===n&&13===a&&(n=13)):n=a;10===n&&(n=13);return 32<=n||13===n?n:0}function pd2(){return!0}function qd2(){return!1}function rd2(n){function b2(a,o,i,u,d){this._reactName=a;this._targetInst=i;this.type=o;this.nativeEvent=u;this.target=d;this.currentTarget=null;for(var m in n)n.hasOwnProperty(m)&&(a=n[m],this[m]=a?a(u):u[m]);this.isDefaultPrevented=(null!=u.defaultPrevented?u.defaultPrevented:!1===u.returnValue)?pd2:qd2;this.isPropagationStopped=qd2;return this}G(b2.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():"unknown"!=typeof n.returnValue&&(n.returnValue=!1),this.isDefaultPrevented=pd2)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():"unknown"!=typeof n.cancelBubble&&(n.cancelBubble=!0),this.isPropagationStopped=pd2)},persist:function(){},isPersistent:pd2});return b2}var tt,nt,rt,st={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},at=rd2(st),ot=G({},st,{view:0,detail:0}),it=rd2(ot),ct=G({},ot,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd2,button:0,buttons:0,relatedTarget:function(n){return void 0===n.relatedTarget?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){if("movementX"in n)return n.movementX;n!==rt&&(rt&&"mousemove"===n.type?(tt=n.screenX-rt.screenX,nt=n.screenY-rt.screenY):nt=tt=0,rt=n);return tt},movementY:function(n){return"movementY"in n?n.movementY:nt}}),lt=rd2(ct),ut=G({},ct,{dataTransfer:0}),dt=rd2(ut),ht=G({},ot,{relatedTarget:0}),ft=rd2(ht),pt=G({},st,{animationName:0,elapsedTime:0,pseudoElement:0}),mt=rd2(pt),gt=G({},st,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),yt=rd2(gt),bt=G({},st,{data:0}),vt=rd2(bt),wt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd2(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):!!(n=Nt[n])&&!!a[n]}function zd2(){return Pd2}var kt=G({},ot,{key:function(n){if(n.key){var a=wt[n.key]||n.key;if("Unidentified"!==a)return a}return"keypress"===n.type?(n=od2(n),13===n?"Enter":String.fromCharCode(n)):"keydown"===n.type||"keyup"===n.type?xt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd2,charCode:function(n){return"keypress"===n.type?od2(n):0},keyCode:function(n){return"keydown"===n.type||"keyup"===n.type?n.keyCode:0},which:function(n){return"keypress"===n.type?od2(n):"keydown"===n.type||"keyup"===n.type?n.keyCode:0}}),Ct=rd2(kt),Et=G({},ct,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),St=rd2(Et),At=G({},ot,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd2}),_t=rd2(At),Tt=G({},st,{propertyName:0,elapsedTime:0,pseudoElement:0}),jt=rd2(Tt),It=G({},ct,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Pt=rd2(It),Ot=[9,13,27,32],Rt=u&&"CompositionEvent"in window,Bt=null;u&&"documentMode"in document&&(Bt=document.documentMode);var Mt=u&&"TextEvent"in window&&!Bt,zt=u&&(!Rt||Bt&&8<Bt&&11>=Bt),Ft=String.fromCharCode(32),Lt=!1;function ge2(n,a){switch(n){case"keyup":return-1!==Ot.indexOf(a.keyCode);case"keydown":return 229!==a.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he2(n){n=n.detail;return"object"==typeof n&&"data"in n?n.data:null}var Dt=!1;function je3(n,a){switch(n){case"compositionend":return he2(a);case"keypress":if(32!==a.which)return null;Lt=!0;return Ft;case"textInput":return n=a.data,n===Ft&&Lt?null:n;default:return null}}function ke2(n,a){if(Dt)return"compositionend"===n||!Rt&&ge2(n,a)?(n=nd2(),et=Xe=Qe=null,Dt=!1,n):null;switch(n){case"paste":default:return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return zt&&"ko"!==a.locale?null:a.data}}var $t={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me2(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return"input"===a?!!$t[n.type]:"textarea"===a}function ne2(n,a,o,i){Eb2(i);a=oe2(a,"onChange");0<a.length&&(o=new at("onChange","change",null,o,i),n.push({event:o,listeners:a}))}var Ut=null,Wt=null;function re2(n){se2(n,0)}function te2(n){var a=ue2(n);if(Wa3(a))return n}function ve2(n,a){if("change"===n)return a}var Ht=!1;if(u){var qt;if(u){var Gt="oninput"in document;if(!Gt){var Vt=document.createElement("div");Vt.setAttribute("oninput","return;");Gt="function"==typeof Vt.oninput}qt=Gt}else qt=!1;Ht=qt&&(!document.documentMode||9<document.documentMode)}function Ae2(){Ut&&(Ut.detachEvent("onpropertychange",Be2),Wt=Ut=null)}function Be2(n){if("value"===n.propertyName&&te2(Wt)){var a=[];ne2(a,Wt,n,xb2(n));Jb(re2,a)}}function Ce2(n,a,o){"focusin"===n?(Ae2(),Ut=a,Wt=o,Ut.attachEvent("onpropertychange",Be2)):"focusout"===n&&Ae2()}function De2(n){if("selectionchange"===n||"keyup"===n||"keydown"===n)return te2(Wt)}function Ee2(n,a){if("click"===n)return te2(a)}function Fe2(n,a){if("input"===n||"change"===n)return te2(a)}function Ge2(n,a){return n===a&&(0!==n||1/n==1/a)||n!=n&&a!=a}var Kt="function"==typeof Object.is?Object.is:Ge2;function Ie2(n,a){if(Kt(n,a))return!0;if("object"!=typeof n||null===n||"object"!=typeof a||null===a)return!1;var o=Object.keys(n),i=Object.keys(a);if(o.length!==i.length)return!1;for(i=0;i<o.length;i++){var u=o[i];if(!d.call(a,u)||!Kt(n[u],a[u]))return!1}return!0}function Je3(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ke3(n,a){var o=Je3(n);n=0;for(var i;o;){if(3===o.nodeType){i=n+o.textContent.length;if(n<=a&&i>=a)return{node:o,offset:a-n};n=i}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Je3(o)}}function Le3(n,a){return!(!n||!a)&&(n===a||(!n||3!==n.nodeType)&&(a&&3===a.nodeType?Le3(n,a.parentNode):"contains"in n?n.contains(a):!!n.compareDocumentPosition&&!!(16&n.compareDocumentPosition(a))))}function Me3(){for(var n=window,a=Xa2();a instanceof n.HTMLIFrameElement;){try{var o="string"==typeof a.contentWindow.location.href}catch(i){o=!1}if(!o)break;n=a.contentWindow;a=Xa2(n.document)}return a}function Ne2(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&("input"===a&&("text"===n.type||"search"===n.type||"tel"===n.type||"url"===n.type||"password"===n.type)||"textarea"===a||"true"===n.contentEditable)}function Oe2(n){var a=Me3(),o=n.focusedElem,i=n.selectionRange;if(a!==o&&o&&o.ownerDocument&&Le3(o.ownerDocument.documentElement,o)){if(null!==i&&Ne2(o))if(a=i.start,n=i.end,void 0===n&&(n=a),"selectionStart"in o)o.selectionStart=a,o.selectionEnd=Math.min(n,o.value.length);else if(n=(a=o.ownerDocument||document)&&a.defaultView||window,n.getSelection){n=n.getSelection();var u=o.textContent.length,d=Math.min(i.start,u);i=void 0===i.end?d:Math.min(i.end,u);!n.extend&&d>i&&(u=i,i=d,d=u);u=Ke3(o,d);var m=Ke3(o,i);u&&m&&(1!==n.rangeCount||n.anchorNode!==u.node||n.anchorOffset!==u.offset||n.focusNode!==m.node||n.focusOffset!==m.offset)&&(a=a.createRange(),a.setStart(u.node,u.offset),n.removeAllRanges(),d>i?(n.addRange(a),n.extend(m.node,m.offset)):(a.setEnd(m.node,m.offset),n.addRange(a)))}a=[];for(n=o;n=n.parentNode;)1===n.nodeType&&a.push({element:n,left:n.scrollLeft,top:n.scrollTop});"function"==typeof o.focus&&o.focus();for(o=0;o<a.length;o++)n=a[o],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Zt=u&&"documentMode"in document&&11>=document.documentMode,Yt=null,Jt=null,Qt=null,Xt=!1;function Ue3(n,a,o){var i=o.window===o?o.document:9===o.nodeType?o:o.ownerDocument;Xt||null==Yt||Yt!==Xa2(i)||(i=Yt,"selectionStart"in i&&Ne2(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Qt&&Ie2(Qt,i)||(Qt=i,i=oe2(Jt,"onSelect"),0<i.length&&(a=new at("onSelect","select",null,a,o),n.push({event:a,listeners:i}),a.target=Yt)))}function Ve3(n,a){var o={};o[n.toLowerCase()]=a.toLowerCase();o["Webkit"+n]="webkit"+a;o["Moz"+n]="moz"+a;return o}var en={animationend:Ve3("Animation","AnimationEnd"),animationiteration:Ve3("Animation","AnimationIteration"),animationstart:Ve3("Animation","AnimationStart"),transitionend:Ve3("Transition","TransitionEnd")},tn={},nn={};u&&(nn=document.createElement("div").style,"AnimationEvent"in window||(delete en.animationend.animation,delete en.animationiteration.animation,delete en.animationstart.animation),"TransitionEvent"in window||delete en.transitionend.transition);function Ze3(n){if(tn[n])return tn[n];if(!en[n])return n;var a,o=en[n];for(a in o)if(o.hasOwnProperty(a)&&a in nn)return tn[n]=o[a];return n}var rn=Ze3("animationend"),sn=Ze3("animationiteration"),an=Ze3("animationstart"),on=Ze3("transitionend"),cn=new Map,ln="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff2(n,a){cn.set(n,a);fa3(a,[n])}for(var un=0;un<ln.length;un++){var dn=ln[un],hn=dn.toLowerCase(),fn=dn[0].toUpperCase()+dn.slice(1);ff2(hn,"on"+fn)}ff2(rn,"onAnimationEnd");ff2(sn,"onAnimationIteration");ff2(an,"onAnimationStart");ff2("dblclick","onDoubleClick");ff2("focusin","onFocus");ff2("focusout","onBlur");ff2(on,"onTransitionEnd");ha3("onMouseEnter",["mouseout","mouseover"]);ha3("onMouseLeave",["mouseout","mouseover"]);ha3("onPointerEnter",["pointerout","pointerover"]);ha3("onPointerLeave",["pointerout","pointerover"]);fa3("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa3("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa3("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa3("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa3("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa3("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mn=new Set("cancel close invalid load scroll toggle".split(" ").concat(pn));function nf2(n,a,o){var i=n.type||"unknown-event";n.currentTarget=o;Ub2(i,a,void 0,n);n.currentTarget=null}function se2(n,a){a=!!(4&a);for(var o=0;o<n.length;o++){var i=n[o],u=i.event;i=i.listeners;e:{var d=void 0;if(a)for(var m=i.length-1;0<=m;m--){var g=i[m],y=g.instance,v=g.currentTarget;g=g.listener;if(y!==d&&u.isPropagationStopped())break e;nf2(u,g,v);d=y}else for(m=0;m<i.length;m++){g=i[m];y=g.instance;v=g.currentTarget;g=g.listener;if(y!==d&&u.isPropagationStopped())break e;nf2(u,g,v);d=y}}}if(de)throw n=he,de=!1,he=null,n}function D2(n,a){var o=a[Tn];void 0===o&&(o=a[Tn]=new Set);var i=n+"__bubble";o.has(i)||(pf2(a,n,2,!1),o.add(i))}function qf2(n,a,o){var i=0;a&&(i|=4);pf2(o,n,i,a)}var gn="_reactListening"+Math.random().toString(36).slice(2);function sf2(n){if(!n[gn]){n[gn]=!0;o.forEach(function(a){"selectionchange"!==a&&(mn.has(a)||qf2(a,!1,n),qf2(a,!0,n))});var a=9===n.nodeType?n:n.ownerDocument;null===a||a[gn]||(a[gn]=!0,qf2("selectionchange",!1,a))}}function pf2(n,a,o,i){switch(jd2(a)){case 1:var u=ed2;break;case 4:u=gd2;break;default:u=fd2}o=u.bind(null,a,o,n);u=void 0;!ie||"touchstart"!==a&&"touchmove"!==a&&"wheel"!==a||(u=!0);i?void 0!==u?n.addEventListener(a,o,{capture:!0,passive:u}):n.addEventListener(a,o,!0):void 0!==u?n.addEventListener(a,o,{passive:u}):n.addEventListener(a,o,!1)}function hd2(n,a,o,i,u){var d=i;if(!(1&a||2&a||null===i))e:for(;;){if(null===i)return;var m=i.tag;if(3===m||4===m){var g=i.stateNode.containerInfo;if(g===u||8===g.nodeType&&g.parentNode===u)break;if(4===m)for(m=i.return;null!==m;){var y=m.tag;if((3===y||4===y)&&(y=m.stateNode.containerInfo,y===u||8===y.nodeType&&y.parentNode===u))return;m=m.return}for(;null!==g;){m=Wc2(g);if(null===m)return;y=m.tag;if(5===y||6===y){i=d=m;continue e}g=g.parentNode}}i=i.return}Jb(function(){var i=d,u=xb2(o),m=[];e:{var g=cn.get(n);if(void 0!==g){var y=at,v=n;switch(n){case"keypress":if(0===od2(o))break e;case"keydown":case"keyup":y=Ct;break;case"focusin":v="focus";y=ft;break;case"focusout":v="blur";y=ft;break;case"beforeblur":case"afterblur":y=ft;break;case"click":if(2===o.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=lt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=dt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=_t;break;case rn:case sn:case an:y=mt;break;case on:y=jt;break;case"scroll":y=it;break;case"wheel":y=Pt;break;case"copy":case"cut":case"paste":y=yt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=St}var x=!!(4&a),N=!x&&"scroll"===n,k=x?null!==g?g+"Capture":null:g;x=[];for(var E,S=i;null!==S;){E=S;var A=E.stateNode;5===E.tag&&null!==A&&(E=A,null!==k&&(A=Kb(S,k),null!=A&&x.push(tf2(S,A,E))));if(N)break;S=S.return}0<x.length&&(g=new y(g,v,null,o,u),m.push({event:g,listeners:x}))}}if(!(7&a)){g="mouseover"===n||"pointerover"===n;y="mouseout"===n||"pointerout"===n;if((!g||o===ne||!(v=o.relatedTarget||o.fromElement)||!Wc2(v)&&!v[_n])&&(y||g)){g=u.window===u?u:(g=u.ownerDocument)?g.defaultView||g.parentWindow:window;y?(v=o.relatedTarget||o.toElement,y=i,v=v?Wc2(v):null,null!==v&&(N=Vb(v),v!==N||5!==v.tag&&6!==v.tag))&&(v=null):(y=null,v=i);if(y!==v){x=lt;A="onMouseLeave";k="onMouseEnter";S="mouse";"pointerout"!==n&&"pointerover"!==n||(x=St,A="onPointerLeave",k="onPointerEnter",S="pointer");N=null==y?g:ue2(y);E=null==v?g:ue2(v);g=new x(A,S+"leave",y,o,u);g.target=N;g.relatedTarget=E;A=null;Wc2(u)===i&&(x=new x(k,S+"enter",v,o,u),x.target=E,x.relatedTarget=N,A=x);N=A;if(y&&v)e:{x=y;k=v;S=0;for(E=x;E;E=vf2(E))S++;E=0;for(A=k;A;A=vf2(A))E++;for(;0<S-E;)x=vf2(x),S--;for(;0<E-S;)k=vf2(k),E--;for(;S--;){if(x===k||null!==k&&x===k.alternate)break e;x=vf2(x);k=vf2(k)}x=null}else x=null;null!==y&&wf2(m,g,y,x,!1);null!==v&&null!==N&&wf2(m,N,v,x,!0)}}g=i?ue2(i):window;y=g.nodeName&&g.nodeName.toLowerCase();if("select"===y||"input"===y&&"file"===g.type)var _=ve2;else if(me2(g))if(Ht)_=Fe2;else{_=De2;var j=Ce2}else(y=g.nodeName)&&"input"===y.toLowerCase()&&("checkbox"===g.type||"radio"===g.type)&&(_=Ee2);if(_&&(_=_(n,i)))ne2(m,_,o,u);else{j&&j(n,g,i);"focusout"===n&&(j=g._wrapperState)&&j.controlled&&"number"===g.type&&cb2(g,"number",g.value)}j=i?ue2(i):window;switch(n){case"focusin":(me2(j)||"true"===j.contentEditable)&&(Yt=j,Jt=i,Qt=null);break;case"focusout":Qt=Jt=Yt=null;break;case"mousedown":Xt=!0;break;case"contextmenu":case"mouseup":case"dragend":Xt=!1;Ue3(m,o,u);break;case"selectionchange":if(Zt)break;case"keydown":case"keyup":Ue3(m,o,u)}var I;if(Rt)e:{switch(n){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Dt?ge2(n,o)&&(O="onCompositionEnd"):"keydown"===n&&229===o.keyCode&&(O="onCompositionStart");O&&(zt&&"ko"!==o.locale&&(Dt||"onCompositionStart"!==O?"onCompositionEnd"===O&&Dt&&(I=nd2()):(Qe=u,Xe="value"in Qe?Qe.value:Qe.textContent,Dt=!0)),j=oe2(i,O),0<j.length&&(O=new vt(O,n,null,o,u),m.push({event:O,listeners:j}),I?O.data=I:(I=he2(o),null!==I&&(O.data=I))));(I=Mt?je3(n,o):ke2(n,o))&&(i=oe2(i,"onBeforeInput"),0<i.length&&(u=new vt("onBeforeInput","beforeinput",null,o,u),m.push({event:u,listeners:i}),u.data=I))}se2(m,a)})}function tf2(n,a,o){return{instance:n,listener:a,currentTarget:o}}function oe2(n,a){for(var o=a+"Capture",i=[];null!==n;){var u=n,d=u.stateNode;5===u.tag&&null!==d&&(u=d,d=Kb(n,o),null!=d&&i.unshift(tf2(n,d,u)),d=Kb(n,a),null!=d&&i.push(tf2(n,d,u)));n=n.return}return i}function vf2(n){if(null===n)return null;do{n=n.return}while(n&&5!==n.tag);return n||null}function wf2(n,a,o,i,u){for(var d=a._reactName,m=[];null!==o&&o!==i;){var g=o,y=g.alternate,v=g.stateNode;if(null!==y&&y===i)break;5===g.tag&&null!==v&&(g=v,u?(y=Kb(o,d),null!=y&&m.unshift(tf2(o,y,g))):u||(y=Kb(o,d),null!=y&&m.push(tf2(o,y,g))));o=o.return}0!==m.length&&n.push({event:a,listeners:m})}var yn=/\r\n?/g,bn=/\u0000|\uFFFD/g;function zf2(n){return("string"==typeof n?n:""+n).replace(yn,"\n").replace(bn,"")}function Af2(n,a,o){a=zf2(a);if(zf2(n)!==a&&o)throw Error(p2(425))}function Bf2(){}var vn=null,wn=null;function Ef2(n,a){return"textarea"===n||"noscript"===n||"string"==typeof a.children||"number"==typeof a.children||"object"==typeof a.dangerouslySetInnerHTML&&null!==a.dangerouslySetInnerHTML&&null!=a.dangerouslySetInnerHTML.__html}var xn="function"==typeof setTimeout?setTimeout:void 0,Nn="function"==typeof clearTimeout?clearTimeout:void 0,kn="function"==typeof Promise?Promise:void 0,Cn="function"==typeof queueMicrotask?queueMicrotask:"undefined"!=typeof kn?function(n){return kn.resolve(null).then(n).catch(If2)}:xn;function If2(n){setTimeout(function(){throw n})}function Kf2(n,a){var o=a,i=0;do{var u=o.nextSibling;n.removeChild(o);if(u&&8===u.nodeType)if(o=u.data,"/$"===o){if(0===i){n.removeChild(u);bd2(a);return}i--}else"$"!==o&&"$?"!==o&&"$!"!==o||i++;o=u}while(o);bd2(a)}function Lf2(n){for(;null!=n;n=n.nextSibling){var a=n.nodeType;if(1===a||3===a)break;if(8===a){a=n.data;if("$"===a||"$!"===a||"$?"===a)break;if("/$"===a)return null}}return n}function Mf2(n){n=n.previousSibling;for(var a=0;n;){if(8===n.nodeType){var o=n.data;if("$"===o||"$!"===o||"$?"===o){if(0===a)return n;a--}else"/$"===o&&a++}n=n.previousSibling}return null}var En=Math.random().toString(36).slice(2),Sn="__reactFiber$"+En,An="__reactProps$"+En,_n="__reactContainer$"+En,Tn="__reactEvents$"+En,jn="__reactListeners$"+En,In="__reactHandles$"+En;function Wc2(n){var a=n[Sn];if(a)return a;for(var o=n.parentNode;o;){if(a=o[_n]||o[Sn]){o=a.alternate;if(null!==a.child||null!==o&&null!==o.child)for(n=Mf2(n);null!==n;){if(o=n[Sn])return o;n=Mf2(n)}return a}n=o;o=n.parentNode}return null}function Cb2(n){n=n[Sn]||n[_n];return!n||5!==n.tag&&6!==n.tag&&13!==n.tag&&3!==n.tag?null:n}function ue2(n){if(5===n.tag||6===n.tag)return n.stateNode;throw Error(p2(33))}function Db2(n){return n[An]||null}var Pn=[],On=-1;function Uf2(n){return{current:n}}function E2(n){0>On||(n.current=Pn[On],Pn[On]=null,On--)}function G2(n,a){On++;Pn[On]=n.current;n.current=a}var Rn={},Bn=Uf2(Rn),Mn=Uf2(!1),zn=Rn;function Yf2(n,a){var o=n.type.contextTypes;if(!o)return Rn;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===a)return i.__reactInternalMemoizedMaskedChildContext;var u,d={};for(u in o)d[u]=a[u];i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=a,n.__reactInternalMemoizedMaskedChildContext=d);return d}function Zf2(n){n=n.childContextTypes;return null!=n}function $f2(){E2(Mn);E2(Bn)}function ag2(n,a,o){if(Bn.current!==Rn)throw Error(p2(168));G2(Bn,a);G2(Mn,o)}function bg2(n,a,o){var i=n.stateNode;a=a.childContextTypes;if("function"!=typeof i.getChildContext)return o;i=i.getChildContext();for(var u in i)if(!(u in a))throw Error(p2(108,Ra2(n)||"Unknown",u));return G({},o,i)}function cg2(n){n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Rn;zn=Bn.current;G2(Bn,n);G2(Mn,Mn.current);return!0}function dg2(n,a,o){var i=n.stateNode;if(!i)throw Error(p2(169));o?(n=bg2(n,a,zn),i.__reactInternalMemoizedMergedChildContext=n,E2(Mn),E2(Bn),G2(Bn,n)):E2(Mn);G2(Mn,o)}var Fn=null,Ln=!1,Dn=!1;function hg2(n){null===Fn?Fn=[n]:Fn.push(n)}function ig2(n){Ln=!0;hg2(n)}function jg2(){if(!Dn&&null!==Fn){Dn=!0;var n=0,a=Re;try{var o=Fn;for(Re=1;n<o.length;n++){var i=o[n];do{i=i(!0)}while(null!==i)}Fn=null;Ln=!1}catch(u){throw null!==Fn&&(Fn=Fn.slice(n+1)),pe(xe,jg2),u}finally{Re=a,Dn=!1}}return null}var $n=[],Un=0,Wn=null,Hn=0,qn=[],Gn=0,Vn=null,Kn=1,Zn="";function tg2(n,a){$n[Un++]=Hn;$n[Un++]=Wn;Wn=n;Hn=a}function ug2(n,a,o){qn[Gn++]=Kn;qn[Gn++]=Zn;qn[Gn++]=Vn;Vn=n;var i=Kn;n=Zn;var u=32-Te(i)-1;i&=~(1<<u);o+=1;var d=32-Te(a)+u;if(30<d){var m=u-u%5;d=(i&(1<<m)-1).toString(32);i>>=m;u-=m;Kn=1<<32-Te(a)+u|o<<u|i;Zn=d+n}else Kn=1<<d|o<<u|i,Zn=n}function vg2(n){null!==n.return&&(tg2(n,1),ug2(n,1,0))}function wg2(n){for(;n===Wn;)Wn=$n[--Un],$n[Un]=null,Hn=$n[--Un],$n[Un]=null;for(;n===Vn;)Vn=qn[--Gn],qn[Gn]=null,Zn=qn[--Gn],qn[Gn]=null,Kn=qn[--Gn],qn[Gn]=null}var Yn=null,Jn=null,Qn=!1,Xn=null;function Ag2(n,a){var o=Bg2(5,null,null,0);o.elementType="DELETED";o.stateNode=a;o.return=n;a=n.deletions;null===a?(n.deletions=[o],n.flags|=16):a.push(o)}function Cg2(n,a){switch(n.tag){case 5:var o=n.type;a=1!==a.nodeType||o.toLowerCase()!==a.nodeName.toLowerCase()?null:a;return null!==a&&(n.stateNode=a,Yn=n,Jn=Lf2(a.firstChild),!0);case 6:return a=""===n.pendingProps||3!==a.nodeType?null:a,null!==a&&(n.stateNode=a,Yn=n,Jn=null,!0);case 13:return a=8!==a.nodeType?null:a,null!==a&&(o=null!==Vn?{id:Kn,overflow:Zn}:null,n.memoizedState={dehydrated:a,treeContext:o,retryLane:1073741824},o=Bg2(18,null,null,0),o.stateNode=a,o.return=n,n.child=o,Yn=n,Jn=null,!0);default:return!1}}function Dg2(n){return!(!(1&n.mode)||128&n.flags)}function Eg2(n){if(Qn){var a=Jn;if(a){var o=a;if(!Cg2(n,a)){if(Dg2(n))throw Error(p2(418));a=Lf2(o.nextSibling);var i=Yn;a&&Cg2(n,a)?Ag2(i,o):(n.flags=-4097&n.flags|2,Qn=!1,Yn=n)}}else{if(Dg2(n))throw Error(p2(418));n.flags=-4097&n.flags|2;Qn=!1;Yn=n}}}function Fg2(n){for(n=n.return;null!==n&&5!==n.tag&&3!==n.tag&&13!==n.tag;)n=n.return;Yn=n}function Gg2(n){if(n!==Yn)return!1;if(!Qn)return Fg2(n),Qn=!0,!1;var a;(a=3!==n.tag)&&!(a=5!==n.tag)&&(a=n.type,a="head"!==a&&"body"!==a&&!Ef2(n.type,n.memoizedProps));if(a&&(a=Jn)){if(Dg2(n))throw Hg2(),Error(p2(418));for(;a;)Ag2(n,a),a=Lf2(a.nextSibling)}Fg2(n);if(13===n.tag){n=n.memoizedState;n=null!==n?n.dehydrated:null;if(!n)throw Error(p2(317));e:{n=n.nextSibling;for(a=0;n;){if(8===n.nodeType){var o=n.data;if("/$"===o){if(0===a){Jn=Lf2(n.nextSibling);break e}a--}else"$"!==o&&"$!"!==o&&"$?"!==o||a++}n=n.nextSibling}Jn=null}}else Jn=Yn?Lf2(n.stateNode.nextSibling):null;return!0}function Hg2(){for(var n=Jn;n;)n=Lf2(n.nextSibling)}function Ig2(){Jn=Yn=null;Qn=!1}function Jg2(n){null===Xn?Xn=[n]:Xn.push(n)}var er=E.ReactCurrentBatchConfig;function Lg2(n,a,o){n=o.ref;if(null!==n&&"function"!=typeof n&&"object"!=typeof n){if(o._owner){o=o._owner;if(o){if(1!==o.tag)throw Error(p2(309));var i=o.stateNode}if(!i)throw Error(p2(147,n));var u=i,d=""+n;if(null!==a&&null!==a.ref&&"function"==typeof a.ref&&a.ref._stringRef===d)return a.ref;a=function(n){var a=u.refs;null===n?delete a[d]:a[d]=n};a._stringRef=d;return a}if("string"!=typeof n)throw Error(p2(284));if(!o._owner)throw Error(p2(290,n))}return n}function Mg2(n,a){n=Object.prototype.toString.call(a);throw Error(p2(31,"[object Object]"===n?"object with keys {"+Object.keys(a).join(", ")+"}":n))}function Ng2(n){var a=n._init;return a(n._payload)}function Og2(n){function b2(a,o){if(n){var i=a.deletions;null===i?(a.deletions=[o],a.flags|=16):i.push(o)}}function c2(a,o){if(!n)return null;for(;null!==o;)b2(a,o),o=o.sibling;return null}function d3(n,a){for(n=new Map;null!==a;)null!==a.key?n.set(a.key,a):n.set(a.index,a),a=a.sibling;return n}function e7(n,a){n=Pg2(n,a);n.index=0;n.sibling=null;return n}function f2(a,o,i){a.index=i;if(!n)return a.flags|=1048576,o;i=a.alternate;if(null!==i)return i=i.index,i<o?(a.flags|=2,o):i;a.flags|=2;return o}function g2(a){n&&null===a.alternate&&(a.flags|=2);return a}function h2(n,a,o,i){if(null===a||6!==a.tag)return a=Qg2(o,n.mode,i),a.return=n,a;a=e7(a,o);a.return=n;return a}function k2(n,a,o,i){var u=o.type;if(u===_)return m3(n,a,o.props.children,i,o.key);if(null!==a&&(a.elementType===u||"object"==typeof u&&null!==u&&u.$$typeof===D&&Ng2(u)===a.type))return i=e7(a,o.props),i.ref=Lg2(n,a,o),i.return=n,i;i=Rg2(o.type,o.key,o.props,null,n.mode,i);i.ref=Lg2(n,a,o);i.return=n;return i}function l2(n,a,o,i){if(null===a||4!==a.tag||a.stateNode.containerInfo!==o.containerInfo||a.stateNode.implementation!==o.implementation)return a=Sg(o,n.mode,i),a.return=n,a;a=e7(a,o.children||[]);a.return=n;return a}function m3(n,a,o,i,u){if(null===a||7!==a.tag)return a=Tg2(o,n.mode,i,u),a.return=n,a;a=e7(a,o);a.return=n;return a}function q2(n,a,o){if("string"==typeof a&&""!==a||"number"==typeof a)return a=Qg2(""+a,n.mode,o),a.return=n,a;if("object"==typeof a&&null!==a){switch(a.$$typeof){case S:return o=Rg2(a.type,a.key,a.props,null,n.mode,o),o.ref=Lg2(n,null,a),o.return=n,o;case A:return a=Sg(a,n.mode,o),a.return=n,a;case D:var i=a._init;return q2(n,i(a._payload),o)}if(Z(a)||Ka4(a))return a=Tg2(a,n.mode,o,null),a.return=n,a;Mg2(n,a)}return null}function r2(n,a,o,i){var u=null!==a?a.key:null;if("string"==typeof o&&""!==o||"number"==typeof o)return null!==u?null:h2(n,a,""+o,i);if("object"==typeof o&&null!==o){switch(o.$$typeof){case S:return o.key===u?k2(n,a,o,i):null;case A:return o.key===u?l2(n,a,o,i):null;case D:return u=o._init,r2(n,a,u(o._payload),i)}if(Z(o)||Ka4(o))return null!==u?null:m3(n,a,o,i,null);Mg2(n,o)}return null}function y3(n,a,o,i,u){if("string"==typeof i&&""!==i||"number"==typeof i)return n=n.get(o)||null,h2(a,n,""+i,u);if("object"==typeof i&&null!==i){switch(i.$$typeof){case S:return n=n.get(null===i.key?o:i.key)||null,k2(a,n,i,u);case A:return n=n.get(null===i.key?o:i.key)||null,l2(a,n,i,u);case D:var d=i._init;return y3(n,a,o,d(i._payload),u)}if(Z(i)||Ka4(i))return n=n.get(o)||null,m3(a,n,i,u,null);Mg2(a,i)}return null}function n3(a,o,i,u){for(var d=null,m=null,g=o,y=o=0,v=null;null!==g&&y<i.length;y++){g.index>y?(v=g,g=null):v=g.sibling;var x=r2(a,g,i[y],u);if(null===x){null===g&&(g=v);break}n&&g&&null===x.alternate&&b2(a,g);o=f2(x,o,y);null===m?d=x:m.sibling=x;m=x;g=v}if(y===i.length)return c2(a,g),Qn&&tg2(a,y),d;if(null===g){for(;y<i.length;y++)g=q2(a,i[y],u),null!==g&&(o=f2(g,o,y),null===m?d=g:m.sibling=g,m=g);Qn&&tg2(a,y);return d}for(g=d3(a,g);y<i.length;y++)v=y3(g,a,y,i[y],u),null!==v&&(n&&null!==v.alternate&&g.delete(null===v.key?y:v.key),o=f2(v,o,y),null===m?d=v:m.sibling=v,m=v);n&&g.forEach(function(n){return b2(a,n)});Qn&&tg2(a,y);return d}function t21(a,o,i,u){var d=Ka4(i);if("function"!=typeof d)throw Error(p2(150));i=d.call(i);if(null==i)throw Error(p2(151));for(var m=d=null,g=o,y=o=0,v=null,x=i.next();null!==g&&!x.done;y++,x=i.next()){g.index>y?(v=g,g=null):v=g.sibling;var N=r2(a,g,x.value,u);if(null===N){null===g&&(g=v);break}n&&g&&null===N.alternate&&b2(a,g);o=f2(N,o,y);null===m?d=N:m.sibling=N;m=N;g=v}if(x.done)return c2(a,g),Qn&&tg2(a,y),d;if(null===g){for(;!x.done;y++,x=i.next())x=q2(a,x.value,u),null!==x&&(o=f2(x,o,y),null===m?d=x:m.sibling=x,m=x);Qn&&tg2(a,y);return d}for(g=d3(a,g);!x.done;y++,x=i.next())x=y3(g,a,y,x.value,u),null!==x&&(n&&null!==x.alternate&&g.delete(null===x.key?y:x.key),o=f2(x,o,y),null===m?d=x:m.sibling=x,m=x);n&&g.forEach(function(n){return b2(a,n)});Qn&&tg2(a,y);return d}function J2(n,a,o,i){"object"==typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children);if("object"==typeof o&&null!==o){switch(o.$$typeof){case S:e:{for(var u=o.key,d=a;null!==d;){if(d.key===u){u=o.type;if(u===_){if(7===d.tag){c2(n,d.sibling);a=e7(d,o.props.children);a.return=n;n=a;break e}}else if(d.elementType===u||"object"==typeof u&&null!==u&&u.$$typeof===D&&Ng2(u)===d.type){c2(n,d.sibling);a=e7(d,o.props);a.ref=Lg2(n,d,o);a.return=n;n=a;break e}c2(n,d);break}b2(n,d);d=d.sibling}o.type===_?(a=Tg2(o.props.children,n.mode,i,o.key),a.return=n,n=a):(i=Rg2(o.type,o.key,o.props,null,n.mode,i),i.ref=Lg2(n,a,o),i.return=n,n=i)}return g2(n);case A:e:{for(d=o.key;null!==a;){if(a.key===d){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){c2(n,a.sibling);a=e7(a,o.children||[]);a.return=n;n=a;break e}c2(n,a);break}b2(n,a);a=a.sibling}a=Sg(o,n.mode,i);a.return=n;n=a}return g2(n);case D:return d=o._init,J2(n,a,d(o._payload),i)}if(Z(o))return n3(n,a,o,i);if(Ka4(o))return t21(n,a,o,i);Mg2(n,o)}return"string"==typeof o&&""!==o||"number"==typeof o?(o=""+o,null!==a&&6===a.tag?(c2(n,a.sibling),a=e7(a,o),a.return=n,n=a):(c2(n,a),a=Qg2(o,n.mode,i),a.return=n,n=a),g2(n)):c2(n,a)}return J2}var tr=Og2(!0),nr=Og2(!1),rr=Uf2(null),sr=null,ar=null,or=null;function $g2(){or=ar=sr=null}function ah2(n){var a=rr.current;E2(rr);n._currentValue=a}function bh2(n,a,o){for(;null!==n;){var i=n.alternate;(n.childLanes&a)!==a?(n.childLanes|=a,null!==i&&(i.childLanes|=a)):null!==i&&(i.childLanes&a)!==a&&(i.childLanes|=a);if(n===o)break;n=n.return}}function ch2(n,a){sr=n;or=ar=null;n=n.dependencies;null!==n&&null!==n.firstContext&&(0!==(n.lanes&a)&&(Pr=!0),n.firstContext=null)}function eh2(n){var a=n._currentValue;if(or!==n)if(n={context:n,memoizedValue:a,next:null},null===ar){if(null===sr)throw Error(p2(308));ar=n;sr.dependencies={lanes:0,firstContext:n}}else ar=ar.next=n;return a}var ir=null;function gh2(n){null===ir?ir=[n]:ir.push(n)}function hh2(n,a,o,i){var u=a.interleaved;null===u?(o.next=o,gh2(a)):(o.next=u.next,u.next=o);a.interleaved=o;return ih2(n,i)}function ih2(n,a){n.lanes|=a;var o=n.alternate;null!==o&&(o.lanes|=a);o=n;for(n=n.return;null!==n;)n.childLanes|=a,o=n.alternate,null!==o&&(o.childLanes|=a),o=n,n=n.return;return 3===o.tag?o.stateNode:null}var cr=!1;function kh2(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh2(n,a){n=n.updateQueue;a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function mh2(n,a){return{eventTime:n,lane:a,tag:0,payload:null,callback:null,next:null}}function nh2(n,a,o){var i=n.updateQueue;if(null===i)return null;i=i.shared;if(2&Zr){var u=i.pending;null===u?a.next=a:(a.next=u.next,u.next=a);i.pending=a;return ih2(n,o)}u=i.interleaved;null===u?(a.next=a,gh2(i)):(a.next=u.next,u.next=a);i.interleaved=a;return ih2(n,o)}function oh2(n,a,o){a=a.updateQueue;if(null!==a&&(a=a.shared,4194240&o)){var i=a.lanes;i&=n.pendingLanes;o|=i;a.lanes=o;Cc2(n,o)}}function ph2(n,a){var o=n.updateQueue,i=n.alternate;if(null===i||(i=i.updateQueue,o!==i)){n=o.lastBaseUpdate;null===n?o.firstBaseUpdate=a:n.next=a;o.lastBaseUpdate=a}else{var u=null,d=null;o=o.firstBaseUpdate;if(null!==o){do{var m={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};null===d?u=d=m:d=d.next=m;o=o.next}while(null!==o);null===d?u=d=a:d=d.next=a}else u=d=a;o={baseState:i.baseState,firstBaseUpdate:u,lastBaseUpdate:d,shared:i.shared,effects:i.effects};n.updateQueue=o}}function qh(n,a,o,i){var u=n.updateQueue;cr=!1;var d=u.firstBaseUpdate,m=u.lastBaseUpdate,g=u.shared.pending;if(null!==g){u.shared.pending=null;var y=g,v=y.next;y.next=null;null===m?d=v:m.next=v;m=y;var x=n.alternate;null!==x&&(x=x.updateQueue,g=x.lastBaseUpdate,g!==m&&(null===g?x.firstBaseUpdate=v:g.next=v,x.lastBaseUpdate=y))}if(null!==d){var N=u.baseState;m=0;x=v=y=null;g=d;for(;;){var k=g.lane,E=g.eventTime;if((i&k)===k){null!==x&&(x=x.next={eventTime:E,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var S=n,A=g;k=a;E=o;switch(A.tag){case 1:S=A.payload;if("function"==typeof S){N=S.call(E,N,k);break e}N=S;break e;case 3:S.flags=-65537&S.flags|128;case 0:S=A.payload;k="function"==typeof S?S.call(E,N,k):S;if(null==k)break e;N=G({},N,k);break e;case 2:cr=!0}}null!==g.callback&&0!==g.lane&&(n.flags|=64,k=u.effects,null===k?u.effects=[g]:k.push(g))}else E={eventTime:E,lane:k,tag:g.tag,payload:g.payload,callback:g.callback,next:null},null===x?(v=x=E,y=N):x=x.next=E,m|=k;g=g.next;if(null===g){if(g=u.shared.pending,null===g)break;k=g,g=k.next,k.next=null,u.lastBaseUpdate=k,u.shared.pending=null}}null===x&&(y=N);u.baseState=y;u.firstBaseUpdate=v;u.lastBaseUpdate=x;a=u.shared.interleaved;if(null!==a){u=a;do{m|=u.lane,u=u.next}while(u!==a)}else null===d&&(u.shared.lanes=0);rs|=m;n.lanes=m;n.memoizedState=N}}function sh2(n,a,o){n=a.effects;a.effects=null;if(null!==n)for(a=0;a<n.length;a++){var i=n[a],u=i.callback;if(null!==u){i.callback=null;i=o;if("function"!=typeof u)throw Error(p2(191,u));u.call(i)}}}var lr={},ur=Uf2(lr),dr=Uf2(lr),hr=Uf2(lr);function xh2(n){if(n===lr)throw Error(p2(174));return n}function yh2(n,a){G2(hr,a);G2(dr,n);G2(ur,lr);n=a.nodeType;switch(n){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:lb2(null,"");break;default:n=8===n?a.parentNode:a,a=n.namespaceURI||null,n=n.tagName,a=lb2(a,n)}E2(ur);G2(ur,a)}function zh2(){E2(ur);E2(dr);E2(hr)}function Ah2(n){xh2(hr.current);var a=xh2(ur.current);var o=lb2(a,n.type);a!==o&&(G2(dr,n),G2(ur,o))}function Bh2(n){dr.current===n&&(E2(ur),E2(dr))}var fr=Uf2(0);function Ch2(n){for(var a=n;null!==a;){if(13===a.tag){var o=a.memoizedState;if(null!==o&&(o=o.dehydrated,null===o||"$?"===o.data||"$!"===o.data))return a}else if(19===a.tag&&void 0!==a.memoizedProps.revealOrder){if(128&a.flags)return a}else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===n)break;for(;null===a.sibling;){if(null===a.return||a.return===n)return null;a=a.return}a.sibling.return=a.return;a=a.sibling}return null}var pr=[];function Eh2(){for(var n=0;n<pr.length;n++)pr[n]._workInProgressVersionPrimary=null;pr.length=0}var mr=E.ReactCurrentDispatcher,gr=E.ReactCurrentBatchConfig,yr=0,br=null,vr=null,wr=null,xr=!1,Nr=!1,kr=0,Cr=0;function P2(){throw Error(p2(321))}function Mh2(n,a){if(null===a)return!1;for(var o=0;o<a.length&&o<n.length;o++)if(!Kt(n[o],a[o]))return!1;return!0}function Nh2(n,a,o,i,u,d){yr=d;br=a;a.memoizedState=null;a.updateQueue=null;a.lanes=0;mr.current=null===n||null===n.memoizedState?Sr:Ar;n=o(i,u);if(Nr){d=0;do{Nr=!1;kr=0;if(25<=d)throw Error(p2(301));d+=1;wr=vr=null;a.updateQueue=null;mr.current=_r;n=o(i,u)}while(Nr)}mr.current=Er;a=null!==vr&&null!==vr.next;yr=0;wr=vr=br=null;xr=!1;if(a)throw Error(p2(300));return n}function Sh2(){var n=0!==kr;kr=0;return n}function Th2(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===wr?br.memoizedState=wr=n:wr=wr.next=n;return wr}function Uh2(){if(null===vr){var n=br.alternate;n=null!==n?n.memoizedState:null}else n=vr.next;var a=null===wr?br.memoizedState:wr.next;if(null!==a)wr=a,vr=n;else{if(null===n)throw Error(p2(310));vr=n;n={memoizedState:vr.memoizedState,baseState:vr.baseState,baseQueue:vr.baseQueue,queue:vr.queue,next:null};null===wr?br.memoizedState=wr=n:wr=wr.next=n}return wr}function Vh2(n,a){return"function"==typeof a?a(n):a}function Wh2(n){var a=Uh2(),o=a.queue;if(null===o)throw Error(p2(311));o.lastRenderedReducer=n;var i=vr,u=i.baseQueue,d=o.pending;if(null!==d){if(null!==u){var m=u.next;u.next=d.next;d.next=m}i.baseQueue=u=d;o.pending=null}if(null!==u){d=u.next;i=i.baseState;var g=m=null,y=null,v=d;do{var x=v.lane;if((yr&x)===x)null!==y&&(y=y.next={lane:0,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null}),i=v.hasEagerState?v.eagerState:n(i,v.action);else{var N={lane:x,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null};null===y?(g=y=N,m=i):y=y.next=N;br.lanes|=x;rs|=x}v=v.next}while(null!==v&&v!==d);null===y?m=i:y.next=g;Kt(i,a.memoizedState)||(Pr=!0);a.memoizedState=i;a.baseState=m;a.baseQueue=y;o.lastRenderedState=i}n=o.interleaved;if(null!==n){u=n;do{d=u.lane,br.lanes|=d,rs|=d,u=u.next}while(u!==n)}else null===u&&(o.lanes=0);return[a.memoizedState,o.dispatch]}function Xh2(n){var a=Uh2(),o=a.queue;if(null===o)throw Error(p2(311));o.lastRenderedReducer=n;var i=o.dispatch,u=o.pending,d=a.memoizedState;if(null!==u){o.pending=null;var m=u=u.next;do{d=n(d,m.action),m=m.next}while(m!==u);Kt(d,a.memoizedState)||(Pr=!0);a.memoizedState=d;null===a.baseQueue&&(a.baseState=d);o.lastRenderedState=d}return[d,i]}function Yh2(){}function Zh2(n,a){var o=br,i=Uh2(),u=a(),d=!Kt(i.memoizedState,u);d&&(i.memoizedState=u,Pr=!0);i=i.queue;$h(ai2.bind(null,o,i,n),[n]);if(i.getSnapshot!==a||d||null!==wr&&1&wr.memoizedState.tag){o.flags|=2048;bi2(9,ci2.bind(null,o,i,u,a),void 0,null);if(null===Yr)throw Error(p2(349));30&yr||di3(o,a,u)}return u}function di3(n,a,o){n.flags|=16384;n={getSnapshot:a,value:o};a=br.updateQueue;null===a?(a={lastEffect:null,stores:null},br.updateQueue=a,a.stores=[n]):(o=a.stores,null===o?a.stores=[n]:o.push(n))}function ci2(n,a,o,i){a.value=o;a.getSnapshot=i;ei3(a)&&fi3(n)}function ai2(n,a,o){return o(function(){ei3(a)&&fi3(n)})}function ei3(n){var a=n.getSnapshot;n=n.value;try{var o=a();return!Kt(n,o)}catch(i){return!0}}function fi3(n){var a=ih2(n,1);null!==a&&gi3(a,n,1,-1)}function hi3(n){var a=Th2();"function"==typeof n&&(n=n());a.memoizedState=a.baseState=n;n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh2,lastRenderedState:n};a.queue=n;n=n.dispatch=ii2.bind(null,br,n);return[a.memoizedState,n]}function bi2(n,a,o,i){n={tag:n,create:a,destroy:o,deps:i,next:null};a=br.updateQueue;null===a?(a={lastEffect:null,stores:null},br.updateQueue=a,a.lastEffect=n.next=n):(o=a.lastEffect,null===o?a.lastEffect=n.next=n:(i=o.next,o.next=n,n.next=i,a.lastEffect=n));return n}function ji2(){return Uh2().memoizedState}function ki2(n,a,o,i){var u=Th2();br.flags|=n;u.memoizedState=bi2(1|a,o,void 0,void 0===i?null:i)}function li2(n,a,o,i){var u=Uh2();i=void 0===i?null:i;var d=void 0;if(null!==vr){var m=vr.memoizedState;d=m.destroy;if(null!==i&&Mh2(i,m.deps)){u.memoizedState=bi2(a,o,d,i);return}}br.flags|=n;u.memoizedState=bi2(1|a,o,d,i)}function mi3(n,a){return ki2(8390656,8,n,a)}function $h(n,a){return li2(2048,8,n,a)}function ni3(n,a){return li2(4,2,n,a)}function oi2(n,a){return li2(4,4,n,a)}function pi3(n,a){return"function"==typeof a?(n=n(),a(n),function(){a(null)}):null!=a?(n=n(),a.current=n,function(){a.current=null}):void 0}function qi2(n,a,o){o=null!=o?o.concat([n]):null;return li2(4,4,pi3.bind(null,a,n),o)}function ri2(){}function si2(n,a){var o=Uh2();a=void 0===a?null:a;var i=o.memoizedState;if(null!==i&&null!==a&&Mh2(a,i[1]))return i[0];o.memoizedState=[n,a];return n}function ti3(n,a){var o=Uh2();a=void 0===a?null:a;var i=o.memoizedState;if(null!==i&&null!==a&&Mh2(a,i[1]))return i[0];n=n();o.memoizedState=[n,a];return n}function ui2(n,a,o){if(!(21&yr))return n.baseState&&(n.baseState=!1,Pr=!0),n.memoizedState=o;Kt(o,a)||(o=yc2(),br.lanes|=o,rs|=o,n.baseState=!0);return a}function vi3(n,a){var o=Re;Re=0!==o&&4>o?o:4;n(!0);var i=gr.transition;gr.transition={};try{n(!1),a()}finally{Re=o,gr.transition=i}}function wi2(){return Uh2().memoizedState}function xi2(n,a,o){var i=yi2(n);o={lane:i,action:o,hasEagerState:!1,eagerState:null,next:null};if(zi2(n))Ai2(a,o);else if(o=hh2(n,a,o,i),null!==o){var u=R2();gi3(o,n,i,u);Bi2(o,a,i)}}function ii2(n,a,o){var i=yi2(n),u={lane:i,action:o,hasEagerState:!1,eagerState:null,next:null};if(zi2(n))Ai2(a,u);else{var d=n.alternate;if(0===n.lanes&&(null===d||0===d.lanes)&&(d=a.lastRenderedReducer,null!==d))try{var m=a.lastRenderedState,g=d(m,o);u.hasEagerState=!0;u.eagerState=g;if(Kt(g,m)){var y=a.interleaved;null===y?(u.next=u,gh2(a)):(u.next=y.next,y.next=u);a.interleaved=u;return}}catch(v){}o=hh2(n,a,u,i);null!==o&&(u=R2(),gi3(o,n,i,u),Bi2(o,a,i))}}function zi2(n){var a=n.alternate;return n===br||null!==a&&a===br}function Ai2(n,a){Nr=xr=!0;var o=n.pending;null===o?a.next=a:(a.next=o.next,o.next=a);n.pending=a}function Bi2(n,a,o){if(4194240&o){var i=a.lanes;i&=n.pendingLanes;o|=i;a.lanes=o;Cc2(n,o)}}var Er={readContext:eh2,useCallback:P2,useContext:P2,useEffect:P2,useImperativeHandle:P2,useInsertionEffect:P2,useLayoutEffect:P2,useMemo:P2,useReducer:P2,useRef:P2,useState:P2,useDebugValue:P2,useDeferredValue:P2,useTransition:P2,useMutableSource:P2,useSyncExternalStore:P2,useId:P2,unstable_isNewReconciler:!1},Sr={readContext:eh2,useCallback:function(n,a){Th2().memoizedState=[n,void 0===a?null:a];return n},useContext:eh2,useEffect:mi3,useImperativeHandle:function(n,a,o){o=null!=o?o.concat([n]):null;return ki2(4194308,4,pi3.bind(null,a,n),o)},useLayoutEffect:function(n,a){return ki2(4194308,4,n,a)},useInsertionEffect:function(n,a){return ki2(4,2,n,a)},useMemo:function(n,a){var o=Th2();a=void 0===a?null:a;n=n();o.memoizedState=[n,a];return n},useReducer:function(n,a,o){var i=Th2();a=void 0!==o?o(a):a;i.memoizedState=i.baseState=a;n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:a};i.queue=n;n=n.dispatch=xi2.bind(null,br,n);return[i.memoizedState,n]},useRef:function(n){var a=Th2();n={current:n};return a.memoizedState=n},useState:hi3,useDebugValue:ri2,useDeferredValue:function(n){return Th2().memoizedState=n},useTransition:function(){var n=hi3(!1),a=n[0];n=vi3.bind(null,n[1]);Th2().memoizedState=n;return[a,n]},useMutableSource:function(){},useSyncExternalStore:function(n,a,o){var i=br,u=Th2();if(Qn){if(void 0===o)throw Error(p2(407));o=o()}else{o=a();if(null===Yr)throw Error(p2(349));30&yr||di3(i,a,o)}u.memoizedState=o;var d={value:o,getSnapshot:a};u.queue=d;mi3(ai2.bind(null,i,d,n),[n]);i.flags|=2048;bi2(9,ci2.bind(null,i,d,o,a),void 0,null);return o},useId:function(){var n=Th2(),a=Yr.identifierPrefix;if(Qn){var o=Zn;var i=Kn;o=(i&~(1<<32-Te(i)-1)).toString(32)+o;a=":"+a+"R"+o;o=kr++;0<o&&(a+="H"+o.toString(32));a+=":"}else o=Cr++,a=":"+a+"r"+o.toString(32)+":";return n.memoizedState=a},unstable_isNewReconciler:!1},Ar={readContext:eh2,useCallback:si2,useContext:eh2,useEffect:$h,useImperativeHandle:qi2,useInsertionEffect:ni3,useLayoutEffect:oi2,useMemo:ti3,useReducer:Wh2,useRef:ji2,useState:function(){return Wh2(Vh2)},useDebugValue:ri2,useDeferredValue:function(n){var a=Uh2();return ui2(a,vr.memoizedState,n)},useTransition:function(){var n=Wh2(Vh2)[0],a=Uh2().memoizedState;return[n,a]},useMutableSource:Yh2,useSyncExternalStore:Zh2,useId:wi2,unstable_isNewReconciler:!1},_r={readContext:eh2,useCallback:si2,useContext:eh2,useEffect:$h,useImperativeHandle:qi2,useInsertionEffect:ni3,useLayoutEffect:oi2,useMemo:ti3,useReducer:Xh2,useRef:ji2,useState:function(){return Xh2(Vh2)},useDebugValue:ri2,useDeferredValue:function(n){var a=Uh2();return null===vr?a.memoizedState=n:ui2(a,vr.memoizedState,n)},useTransition:function(){var n=Xh2(Vh2)[0],a=Uh2().memoizedState;return[n,a]},useMutableSource:Yh2,useSyncExternalStore:Zh2,useId:wi2,unstable_isNewReconciler:!1};function Ci2(n,a){if(n&&n.defaultProps){a=G({},a);n=n.defaultProps;for(var o in n)void 0===a[o]&&(a[o]=n[o]);return a}return a}function Di3(n,a,o,i){a=n.memoizedState;o=o(i,a);o=null==o?a:G({},a,o);n.memoizedState=o;0===n.lanes&&(n.updateQueue.baseState=o)}var Tr={isMounted:function(n){return!!(n=n._reactInternals)&&Vb(n)===n},enqueueSetState:function(n,a,o){n=n._reactInternals;var i=R2(),u=yi2(n),d=mh2(i,u);d.payload=a;null!=o&&(d.callback=o);a=nh2(n,d,u);null!==a&&(gi3(a,n,u,i),oh2(a,n,u))},enqueueReplaceState:function(n,a,o){n=n._reactInternals;var i=R2(),u=yi2(n),d=mh2(i,u);d.tag=1;d.payload=a;null!=o&&(d.callback=o);a=nh2(n,d,u);null!==a&&(gi3(a,n,u,i),oh2(a,n,u))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var o=R2(),i=yi2(n),u=mh2(o,i);u.tag=2;null!=a&&(u.callback=a);a=nh2(n,u,i);null!==a&&(gi3(a,n,i,o),oh2(a,n,i))}};function Fi2(n,a,o,i,u,d,m){n=n.stateNode;return"function"==typeof n.shouldComponentUpdate?n.shouldComponentUpdate(i,d,m):!(a.prototype&&a.prototype.isPureReactComponent&&Ie2(o,i)&&Ie2(u,d))}function Gi2(n,a,o){var i=!1,u=Rn;var d=a.contextType;"object"==typeof d&&null!==d?d=eh2(d):(u=Zf2(a)?zn:Bn.current,i=a.contextTypes,d=(i=null!=i)?Yf2(n,u):Rn);a=new a(o,d);n.memoizedState=null!==a.state&&void 0!==a.state?a.state:null;a.updater=Tr;n.stateNode=a;a._reactInternals=n;i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=u,n.__reactInternalMemoizedMaskedChildContext=d);return a}function Hi2(n,a,o,i){n=a.state;"function"==typeof a.componentWillReceiveProps&&a.componentWillReceiveProps(o,i);"function"==typeof a.UNSAFE_componentWillReceiveProps&&a.UNSAFE_componentWillReceiveProps(o,i);a.state!==n&&Tr.enqueueReplaceState(a,a.state,null)}function Ii3(n,a,o,i){var u=n.stateNode;u.props=o;u.state=n.memoizedState;u.refs={};kh2(n);var d=a.contextType;"object"==typeof d&&null!==d?u.context=eh2(d):(d=Zf2(a)?zn:Bn.current,u.context=Yf2(n,d));u.state=n.memoizedState;d=a.getDerivedStateFromProps;"function"==typeof d&&(Di3(n,a,d,o),u.state=n.memoizedState);"function"==typeof a.getDerivedStateFromProps||"function"==typeof u.getSnapshotBeforeUpdate||"function"!=typeof u.UNSAFE_componentWillMount&&"function"!=typeof u.componentWillMount||(a=u.state,"function"==typeof u.componentWillMount&&u.componentWillMount(),"function"==typeof u.UNSAFE_componentWillMount&&u.UNSAFE_componentWillMount(),a!==u.state&&Tr.enqueueReplaceState(u,u.state,null),qh(n,o,u,i),u.state=n.memoizedState);"function"==typeof u.componentDidMount&&(n.flags|=4194308)}function Ji2(n,a){try{var o="",i=a;do{o+=Pa2(i),i=i.return}while(i);var u=o}catch(d){u="\nError generating stack: "+d.message+"\n"+d.stack}return{value:n,source:a,stack:u,digest:null}}function Ki2(n,a,o){return{value:n,source:null,stack:null!=o?o:null,digest:null!=a?a:null}}function Li2(n,a){try{console.error(a.value)}catch(o){setTimeout(function(){throw o})}}var jr="function"==typeof WeakMap?WeakMap:Map;function Ni2(n,a,o){o=mh2(-1,o);o.tag=3;o.payload={element:null};var i=a.value;o.callback=function(){ds||(ds=!0,hs=i);Li2(n,a)};return o}function Qi2(n,a,o){o=mh2(-1,o);o.tag=3;var i=n.type.getDerivedStateFromError;if("function"==typeof i){var u=a.value;o.payload=function(){return i(u)};o.callback=function(){Li2(n,a)}}var d=n.stateNode;null!==d&&"function"==typeof d.componentDidCatch&&(o.callback=function(){Li2(n,a);"function"!=typeof i&&(null===fs?fs=new Set([this]):fs.add(this));var o=a.stack;this.componentDidCatch(a.value,{componentStack:null!==o?o:""})});return o}function Si3(n,a,o){var i=n.pingCache;if(null===i){i=n.pingCache=new jr;var u=new Set;i.set(a,u)}else u=i.get(a),void 0===u&&(u=new Set,i.set(a,u));u.has(o)||(u.add(o),n=Ti2.bind(null,n,a,o),a.then(n,n))}function Ui2(n){do{var a;(a=13===n.tag)&&(a=n.memoizedState,a=null===a||null!==a.dehydrated);if(a)return n;n=n.return}while(null!==n);return null}function Vi2(n,a,o,i,u){if(!(1&n.mode))return n===a?n.flags|=65536:(n.flags|=128,o.flags|=131072,o.flags&=-52805,1===o.tag&&(null===o.alternate?o.tag=17:(a=mh2(-1,1),a.tag=2,nh2(o,a,1))),o.lanes|=1),n;n.flags|=65536;n.lanes=u;return n}var Ir=E.ReactCurrentOwner,Pr=!1;function Xi2(n,a,o,i){a.child=null===n?nr(a,null,o,i):tr(a,n.child,o,i)}function Yi2(n,a,o,i,u){o=o.render;var d=a.ref;ch2(a,u);i=Nh2(n,a,o,i,d,u);o=Sh2();if(null!==n&&!Pr)return a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~u,Zi2(n,a,u);Qn&&o&&vg2(a);a.flags|=1;Xi2(n,a,i,u);return a.child}function $i2(n,a,o,i,u){if(null===n){var d=o.type;if("function"==typeof d&&!aj(d)&&void 0===d.defaultProps&&null===o.compare&&void 0===o.defaultProps)return a.tag=15,a.type=d,bj(n,a,d,i,u);n=Rg2(o.type,null,i,a,a.mode,u);n.ref=a.ref;n.return=a;return a.child=n}d=n.child;if(0===(n.lanes&u)){var m=d.memoizedProps;o=o.compare;o=null!==o?o:Ie2;if(o(m,i)&&n.ref===a.ref)return Zi2(n,a,u)}a.flags|=1;n=Pg2(d,i);n.ref=a.ref;n.return=a;return a.child=n}function bj(n,a,o,i,u){if(null!==n){var d=n.memoizedProps;if(Ie2(d,i)&&n.ref===a.ref){if(Pr=!1,a.pendingProps=i=d,0===(n.lanes&u))return a.lanes=n.lanes,Zi2(n,a,u);131072&n.flags&&(Pr=!0)}}return cj(n,a,o,i,u)}function dj(n,a,o){var i=a.pendingProps,u=i.children,d=null!==n?n.memoizedState:null;if("hidden"===i.mode)if(1&a.mode){if(!(1073741824&o))return n=null!==d?d.baseLanes|o:o,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:n,cachePool:null,transitions:null},a.updateQueue=null,G2(es,Xr),Xr|=n,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null};i=null!==d?d.baseLanes:o;G2(es,Xr);Xr|=i}else a.memoizedState={baseLanes:0,cachePool:null,transitions:null},G2(es,Xr),Xr|=o;else null!==d?(i=d.baseLanes|o,a.memoizedState=null):i=o,G2(es,Xr),Xr|=i;Xi2(n,a,u,o);return a.child}function gj(n,a){var o=a.ref;(null===n&&null!==o||null!==n&&n.ref!==o)&&(a.flags|=512,a.flags|=2097152)}function cj(n,a,o,i,u){var d=Zf2(o)?zn:Bn.current;d=Yf2(a,d);ch2(a,u);o=Nh2(n,a,o,i,d,u);i=Sh2();if(null!==n&&!Pr)return a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~u,Zi2(n,a,u);Qn&&i&&vg2(a);a.flags|=1;Xi2(n,a,o,u);return a.child}function hj(n,a,o,i,u){if(Zf2(o)){var d=!0;cg2(a)}else d=!1;ch2(a,u);if(null===a.stateNode)ij(n,a),Gi2(a,o,i),Ii3(a,o,i,u),i=!0;else if(null===n){var m=a.stateNode,g=a.memoizedProps;m.props=g;var y=m.context,v=o.contextType;"object"==typeof v&&null!==v?v=eh2(v):(v=Zf2(o)?zn:Bn.current,v=Yf2(a,v));var x=o.getDerivedStateFromProps,N="function"==typeof x||"function"==typeof m.getSnapshotBeforeUpdate;N||"function"!=typeof m.UNSAFE_componentWillReceiveProps&&"function"!=typeof m.componentWillReceiveProps||(g!==i||y!==v)&&Hi2(a,m,i,v);cr=!1;var k=a.memoizedState;m.state=k;qh(a,i,m,u);y=a.memoizedState;g!==i||k!==y||Mn.current||cr?("function"==typeof x&&(Di3(a,o,x,i),y=a.memoizedState),(g=cr||Fi2(a,o,g,i,k,y,v))?(N||"function"!=typeof m.UNSAFE_componentWillMount&&"function"!=typeof m.componentWillMount||("function"==typeof m.componentWillMount&&m.componentWillMount(),"function"==typeof m.UNSAFE_componentWillMount&&m.UNSAFE_componentWillMount()),"function"==typeof m.componentDidMount&&(a.flags|=4194308)):("function"==typeof m.componentDidMount&&(a.flags|=4194308),a.memoizedProps=i,a.memoizedState=y),m.props=i,m.state=y,m.context=v,i=g):("function"==typeof m.componentDidMount&&(a.flags|=4194308),i=!1)}else{m=a.stateNode;lh2(n,a);g=a.memoizedProps;v=a.type===a.elementType?g:Ci2(a.type,g);m.props=v;N=a.pendingProps;k=m.context;y=o.contextType;"object"==typeof y&&null!==y?y=eh2(y):(y=Zf2(o)?zn:Bn.current,y=Yf2(a,y));var E=o.getDerivedStateFromProps;(x="function"==typeof E||"function"==typeof m.getSnapshotBeforeUpdate)||"function"!=typeof m.UNSAFE_componentWillReceiveProps&&"function"!=typeof m.componentWillReceiveProps||(g!==N||k!==y)&&Hi2(a,m,i,y);cr=!1;k=a.memoizedState;m.state=k;qh(a,i,m,u);var S=a.memoizedState;g!==N||k!==S||Mn.current||cr?("function"==typeof E&&(Di3(a,o,E,i),S=a.memoizedState),(v=cr||Fi2(a,o,v,i,k,S,y)||!1)?(x||"function"!=typeof m.UNSAFE_componentWillUpdate&&"function"!=typeof m.componentWillUpdate||("function"==typeof m.componentWillUpdate&&m.componentWillUpdate(i,S,y),"function"==typeof m.UNSAFE_componentWillUpdate&&m.UNSAFE_componentWillUpdate(i,S,y)),"function"==typeof m.componentDidUpdate&&(a.flags|=4),"function"==typeof m.getSnapshotBeforeUpdate&&(a.flags|=1024)):("function"!=typeof m.componentDidUpdate||g===n.memoizedProps&&k===n.memoizedState||(a.flags|=4),"function"!=typeof m.getSnapshotBeforeUpdate||g===n.memoizedProps&&k===n.memoizedState||(a.flags|=1024),a.memoizedProps=i,a.memoizedState=S),m.props=i,m.state=S,m.context=y,i=v):("function"!=typeof m.componentDidUpdate||g===n.memoizedProps&&k===n.memoizedState||(a.flags|=4),"function"!=typeof m.getSnapshotBeforeUpdate||g===n.memoizedProps&&k===n.memoizedState||(a.flags|=1024),i=!1)}return jj(n,a,o,i,d,u)}function jj(n,a,o,i,u,d){gj(n,a);var m=!!(128&a.flags);if(!i&&!m)return u&&dg2(a,o,!1),Zi2(n,a,d);i=a.stateNode;Ir.current=a;var g=m&&"function"!=typeof o.getDerivedStateFromError?null:i.render();a.flags|=1;null!==n&&m?(a.child=tr(a,n.child,null,d),a.child=tr(a,null,g,d)):Xi2(n,a,g,d);a.memoizedState=i.state;u&&dg2(a,o,!0);return a.child}function kj(n){var a=n.stateNode;a.pendingContext?ag2(n,a.pendingContext,a.pendingContext!==a.context):a.context&&ag2(n,a.context,!1);yh2(n,a.containerInfo)}function lj(n,a,o,i,u){Ig2();Jg2(u);a.flags|=256;Xi2(n,a,o,i);return a.child}var Or={dehydrated:null,treeContext:null,retryLane:0};function nj(n){return{baseLanes:n,cachePool:null,transitions:null}}function oj(n,a,o){var i,u=a.pendingProps,d=fr.current,m=!1,g=!!(128&a.flags);(i=g)||(i=(null===n||null!==n.memoizedState)&&!!(2&d));i?(m=!0,a.flags&=-129):null!==n&&null===n.memoizedState||(d|=1);G2(fr,1&d);if(null===n){Eg2(a);n=a.memoizedState;if(null!==n&&(n=n.dehydrated,null!==n))return 1&a.mode?"$!"===n.data?a.lanes=8:a.lanes=1073741824:a.lanes=1,null;g=u.children;n=u.fallback;return m?(u=a.mode,m=a.child,g={mode:"hidden",children:g},1&u||null===m?m=pj(g,u,0,null):(m.childLanes=0,m.pendingProps=g),n=Tg2(n,u,o,null),m.return=a,n.return=a,m.sibling=n,a.child=m,a.child.memoizedState=nj(o),a.memoizedState=Or,n):qj(a,g)}d=n.memoizedState;if(null!==d&&(i=d.dehydrated,null!==i))return rj(n,a,g,u,i,d,o);if(m){m=u.fallback;g=a.mode;d=n.child;i=d.sibling;var y={mode:"hidden",children:u.children};1&g||a.child===d?(u=Pg2(d,y),u.subtreeFlags=14680064&d.subtreeFlags):(u=a.child,u.childLanes=0,u.pendingProps=y,a.deletions=null);null!==i?m=Pg2(i,m):(m=Tg2(m,g,o,null),m.flags|=2);m.return=a;u.return=a;u.sibling=m;a.child=u;u=m;m=a.child;g=n.child.memoizedState;g=null===g?nj(o):{baseLanes:g.baseLanes|o,cachePool:null,transitions:g.transitions};m.memoizedState=g;m.childLanes=n.childLanes&~o;a.memoizedState=Or;return u}m=n.child;n=m.sibling;u=Pg2(m,{mode:"visible",children:u.children});!(1&a.mode)&&(u.lanes=o);u.return=a;u.sibling=null;null!==n&&(o=a.deletions,null===o?(a.deletions=[n],a.flags|=16):o.push(n));a.child=u;a.memoizedState=null;return u}function qj(n,a){a=pj({mode:"visible",children:a},n.mode,0,null);a.return=n;return n.child=a}function sj(n,a,o,i){null!==i&&Jg2(i);tr(a,n.child,null,o);n=qj(a,a.pendingProps.children);n.flags|=2;a.memoizedState=null;return n}function rj(n,a,o,i,u,d,m){if(o){if(256&a.flags)return a.flags&=-257,i=Ki2(Error(p2(422))),sj(n,a,m,i);if(null!==a.memoizedState)return a.child=n.child,a.flags|=128,null;d=i.fallback;u=a.mode;i=pj({mode:"visible",children:i.children},u,0,null);d=Tg2(d,u,m,null);d.flags|=2;i.return=a;d.return=a;i.sibling=d;a.child=i;1&a.mode&&tr(a,n.child,null,m);a.child.memoizedState=nj(m);a.memoizedState=Or;return d}if(!(1&a.mode))return sj(n,a,m,null);if("$!"===u.data){i=u.nextSibling&&u.nextSibling.dataset;if(i)var g=i.dgst;i=g;d=Error(p2(419));i=Ki2(d,i,void 0);return sj(n,a,m,i)}g=0!==(m&n.childLanes);if(Pr||g){i=Yr;if(null!==i){switch(m&-m){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=0!==(u&(i.suspendedLanes|m))?0:u;0!==u&&u!==d.retryLane&&(d.retryLane=u,ih2(n,u),gi3(i,n,u,-1))}tj();i=Ki2(Error(p2(421)));return sj(n,a,m,i)}if("$?"===u.data)return a.flags|=128,a.child=n.child,a=uj.bind(null,n),u._reactRetry=a,null;n=d.treeContext;Jn=Lf2(u.nextSibling);Yn=a;Qn=!0;Xn=null;null!==n&&(qn[Gn++]=Kn,qn[Gn++]=Zn,qn[Gn++]=Vn,Kn=n.id,Zn=n.overflow,Vn=a);a=qj(a,i.children);a.flags|=4096;return a}function vj(n,a,o){n.lanes|=a;var i=n.alternate;null!==i&&(i.lanes|=a);bh2(n.return,a,o)}function wj(n,a,o,i,u){var d=n.memoizedState;null===d?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:i,tail:o,tailMode:u}:(d.isBackwards=a,d.rendering=null,d.renderingStartTime=0,d.last=i,d.tail=o,d.tailMode=u)}function xj(n,a,o){var i=a.pendingProps,u=i.revealOrder,d=i.tail;Xi2(n,a,i.children,o);i=fr.current;if(2&i)i=1&i|2,a.flags|=128;else{if(null!==n&&128&n.flags)e:for(n=a.child;null!==n;){if(13===n.tag)null!==n.memoizedState&&vj(n,o,a);else if(19===n.tag)vj(n,o,a);else if(null!==n.child){n.child.return=n;n=n.child;continue}if(n===a)break e;for(;null===n.sibling;){if(null===n.return||n.return===a)break e;n=n.return}n.sibling.return=n.return;n=n.sibling}i&=1}G2(fr,i);if(1&a.mode)switch(u){case"forwards":o=a.child;for(u=null;null!==o;)n=o.alternate,null!==n&&null===Ch2(n)&&(u=o),o=o.sibling;o=u;null===o?(u=a.child,a.child=null):(u=o.sibling,o.sibling=null);wj(a,!1,u,o,d);break;case"backwards":o=null;u=a.child;for(a.child=null;null!==u;){n=u.alternate;if(null!==n&&null===Ch2(n)){a.child=u;break}n=u.sibling;u.sibling=o;o=u;u=n}wj(a,!0,o,null,d);break;case"together":wj(a,!1,null,null,void 0);break;default:a.memoizedState=null}else a.memoizedState=null;return a.child}function ij(n,a){!(1&a.mode)&&null!==n&&(n.alternate=null,a.alternate=null,a.flags|=2)}function Zi2(n,a,o){null!==n&&(a.dependencies=n.dependencies);rs|=a.lanes;if(0===(o&a.childLanes))return null;if(null!==n&&a.child!==n.child)throw Error(p2(153));if(null!==a.child){n=a.child;o=Pg2(n,n.pendingProps);a.child=o;for(o.return=a;null!==n.sibling;)n=n.sibling,o=o.sibling=Pg2(n,n.pendingProps),o.return=a;o.sibling=null}return a.child}function yj(n,a,o){switch(a.tag){case 3:kj(a);Ig2();break;case 5:Ah2(a);break;case 1:Zf2(a.type)&&cg2(a);break;case 4:yh2(a,a.stateNode.containerInfo);break;case 10:var i=a.type._context,u=a.memoizedProps.value;G2(rr,i._currentValue);i._currentValue=u;break;case 13:i=a.memoizedState;if(null!==i){if(null!==i.dehydrated)return G2(fr,1&fr.current),a.flags|=128,null;if(0!==(o&a.child.childLanes))return oj(n,a,o);G2(fr,1&fr.current);n=Zi2(n,a,o);return null!==n?n.sibling:null}G2(fr,1&fr.current);break;case 19:i=0!==(o&a.childLanes);if(128&n.flags){if(i)return xj(n,a,o);a.flags|=128}u=a.memoizedState;null!==u&&(u.rendering=null,u.tail=null,u.lastEffect=null);G2(fr,fr.current);if(i)break;return null;case 22:case 23:return a.lanes=0,dj(n,a,o)}return Zi2(n,a,o)}var Rr,Br,Mr,zr;Rr=function(n,a){for(var o=a.child;null!==o;){if(5===o.tag||6===o.tag)n.appendChild(o.stateNode);else if(4!==o.tag&&null!==o.child){o.child.return=o;o=o.child;continue}if(o===a)break;for(;null===o.sibling;){if(null===o.return||o.return===a)return;o=o.return}o.sibling.return=o.return;o=o.sibling}};Br=function(){};Mr=function(n,a,o,u){var d=n.memoizedProps;if(d!==u){n=a.stateNode;xh2(ur.current);var m=null;switch(o){case"input":d=Ya2(n,d);u=Ya2(n,u);m=[];break;case"select":d=G({},d,{value:void 0});u=G({},u,{value:void 0});m=[];break;case"textarea":d=gb2(n,d);u=gb2(n,u);m=[];break;default:"function"!=typeof d.onClick&&"function"==typeof u.onClick&&(n.onclick=Bf2)}ub2(o,u);var g;o=null;for(x in d)if(!u.hasOwnProperty(x)&&d.hasOwnProperty(x)&&null!=d[x])if("style"===x){var y=d[x];for(g in y)y.hasOwnProperty(g)&&(o||(o={}),o[g]="")}else"dangerouslySetInnerHTML"!==x&&"children"!==x&&"suppressContentEditableWarning"!==x&&"suppressHydrationWarning"!==x&&"autoFocus"!==x&&(i.hasOwnProperty(x)?m||(m=[]):(m=m||[]).push(x,null));for(x in u){var v=u[x];y=null!=d?d[x]:void 0;if(u.hasOwnProperty(x)&&v!==y&&(null!=v||null!=y))if("style"===x)if(y){for(g in y)!y.hasOwnProperty(g)||v&&v.hasOwnProperty(g)||(o||(o={}),o[g]="");for(g in v)v.hasOwnProperty(g)&&y[g]!==v[g]&&(o||(o={}),o[g]=v[g])}else o||(m||(m=[]),m.push(x,o)),o=v;else"dangerouslySetInnerHTML"===x?(v=v?v.__html:void 0,y=y?y.__html:void 0,null!=v&&y!==v&&(m=m||[]).push(x,v)):"children"===x?"string"!=typeof v&&"number"!=typeof v||(m=m||[]).push(x,""+v):"suppressContentEditableWarning"!==x&&"suppressHydrationWarning"!==x&&(i.hasOwnProperty(x)?(null!=v&&"onScroll"===x&&D2("scroll",n),m||y===v||(m=[])):(m=m||[]).push(x,v))}o&&(m=m||[]).push("style",o);var x=m;(a.updateQueue=x)&&(a.flags|=4)}};zr=function(n,a,o,i){o!==i&&(a.flags|=4)};function Dj(n,a){if(!Qn)switch(n.tailMode){case"hidden":a=n.tail;for(var o=null;null!==a;)null!==a.alternate&&(o=a),a=a.sibling;null===o?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var i=null;null!==o;)null!==o.alternate&&(i=o),o=o.sibling;null===i?a||null===n.tail?n.tail=null:n.tail.sibling=null:i.sibling=null}}function S2(n){var a=null!==n.alternate&&n.alternate.child===n.child,o=0,i=0;if(a)for(var u=n.child;null!==u;)o|=u.lanes|u.childLanes,i|=14680064&u.subtreeFlags,i|=14680064&u.flags,u.return=n,u=u.sibling;else for(u=n.child;null!==u;)o|=u.lanes|u.childLanes,i|=u.subtreeFlags,i|=u.flags,u.return=n,u=u.sibling;n.subtreeFlags|=i;n.childLanes=o;return a}function Ej(n,a,o){var u=a.pendingProps;wg2(a);switch(a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S2(a),null;case 1:case 17:return Zf2(a.type)&&$f2(),S2(a),null;case 3:u=a.stateNode;zh2();E2(Mn);E2(Bn);Eh2();u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null);null!==n&&null!==n.child||(Gg2(a)?a.flags|=4:null===n||n.memoizedState.isDehydrated&&!(256&a.flags)||(a.flags|=1024,null!==Xn&&(Fj(Xn),Xn=null)));Br(n,a);S2(a);return null;case 5:Bh2(a);var d=xh2(hr.current);o=a.type;if(null!==n&&null!=a.stateNode)Mr(n,a,o,u,d),n.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!u){if(null===a.stateNode)throw Error(p2(166));S2(a);return null}n=xh2(ur.current);if(Gg2(a)){u=a.stateNode;o=a.type;var m=a.memoizedProps;u[Sn]=a;u[An]=m;n=!!(1&a.mode);switch(o){case"dialog":D2("cancel",u);D2("close",u);break;case"iframe":case"object":case"embed":D2("load",u);break;case"video":case"audio":for(d=0;d<pn.length;d++)D2(pn[d],u);break;case"source":D2("error",u);break;case"img":case"image":case"link":D2("error",u);D2("load",u);break;case"details":D2("toggle",u);break;case"input":Za2(u,m);D2("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!m.multiple};D2("invalid",u);break;case"textarea":hb2(u,m),D2("invalid",u)}ub2(o,m);d=null;for(var g in m)if(m.hasOwnProperty(g)){var y=m[g];"children"===g?"string"==typeof y?u.textContent!==y&&(!0!==m.suppressHydrationWarning&&Af2(u.textContent,y,n),d=["children",y]):"number"==typeof y&&u.textContent!==""+y&&(!0!==m.suppressHydrationWarning&&Af2(u.textContent,y,n),d=["children",""+y]):i.hasOwnProperty(g)&&null!=y&&"onScroll"===g&&D2("scroll",u)}switch(o){case"input":Va3(u);db2(u,m,!0);break;case"textarea":Va3(u);jb2(u);break;case"select":case"option":break;default:"function"==typeof m.onClick&&(u.onclick=Bf2)}u=d;a.updateQueue=u;null!==u&&(a.flags|=4)}else{g=9===d.nodeType?d:d.ownerDocument;"http://www.w3.org/1999/xhtml"===n&&(n=kb2(o));"http://www.w3.org/1999/xhtml"===n?"script"===o?(n=g.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):"string"==typeof u.is?n=g.createElement(o,{is:u.is}):(n=g.createElement(o),"select"===o&&(g=n,u.multiple?g.multiple=!0:u.size&&(g.size=u.size))):n=g.createElementNS(n,o);n[Sn]=a;n[An]=u;Rr(n,a,!1,!1);a.stateNode=n;e:{g=vb2(o,u);switch(o){case"dialog":D2("cancel",n);D2("close",n);d=u;break;case"iframe":case"object":case"embed":D2("load",n);d=u;break;case"video":case"audio":for(d=0;d<pn.length;d++)D2(pn[d],n);d=u;break;case"source":D2("error",n);d=u;break;case"img":case"image":case"link":D2("error",n);D2("load",n);d=u;break;case"details":D2("toggle",n);d=u;break;case"input":Za2(n,u);d=Ya2(n,u);D2("invalid",n);break;case"option":default:d=u;break;case"select":n._wrapperState={wasMultiple:!!u.multiple};d=G({},u,{value:void 0});D2("invalid",n);break;case"textarea":hb2(n,u);d=gb2(n,u);D2("invalid",n)}ub2(o,d);y=d;for(m in y)if(y.hasOwnProperty(m)){var v=y[m];"style"===m?sb2(n,v):"dangerouslySetInnerHTML"===m?(v=v?v.__html:void 0,null!=v&&J(n,v)):"children"===m?"string"==typeof v?("textarea"!==o||""!==v)&&ob2(n,v):"number"==typeof v&&ob2(n,""+v):"suppressContentEditableWarning"!==m&&"suppressHydrationWarning"!==m&&"autoFocus"!==m&&(i.hasOwnProperty(m)?null!=v&&"onScroll"===m&&D2("scroll",n):null!=v&&ta2(n,m,v,g))}switch(o){case"input":Va3(n);db2(n,u,!1);break;case"textarea":Va3(n);jb2(n);break;case"option":null!=u.value&&n.setAttribute("value",""+Sa2(u.value));break;case"select":n.multiple=!!u.multiple;m=u.value;null!=m?fb2(n,!!u.multiple,m,!1):null!=u.defaultValue&&fb2(n,!!u.multiple,u.defaultValue,!0);break;default:"function"==typeof d.onClick&&(n.onclick=Bf2)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(a.flags|=4)}null!==a.ref&&(a.flags|=512,a.flags|=2097152)}S2(a);return null;case 6:if(n&&null!=a.stateNode)zr(n,a,n.memoizedProps,u);else{if("string"!=typeof u&&null===a.stateNode)throw Error(p2(166));o=xh2(hr.current);xh2(ur.current);if(Gg2(a)){u=a.stateNode;o=a.memoizedProps;u[Sn]=a;if((m=u.nodeValue!==o)&&(n=Yn,null!==n))switch(n.tag){case 3:Af2(u.nodeValue,o,!!(1&n.mode));break;case 5:!0!==n.memoizedProps.suppressHydrationWarning&&Af2(u.nodeValue,o,!!(1&n.mode))}m&&(a.flags|=4)}else u=(9===o.nodeType?o:o.ownerDocument).createTextNode(u),u[Sn]=a,a.stateNode=u}S2(a);return null;case 13:E2(fr);u=a.memoizedState;if(null===n||null!==n.memoizedState&&null!==n.memoizedState.dehydrated){if(Qn&&null!==Jn&&1&a.mode&&!(128&a.flags))Hg2(),Ig2(),a.flags|=98560,m=!1;else if(m=Gg2(a),null!==u&&null!==u.dehydrated){if(null===n){if(!m)throw Error(p2(318));m=a.memoizedState;m=null!==m?m.dehydrated:null;if(!m)throw Error(p2(317));m[Sn]=a}else Ig2(),!(128&a.flags)&&(a.memoizedState=null),a.flags|=4;S2(a);m=!1}else null!==Xn&&(Fj(Xn),Xn=null),m=!0;if(!m)return 65536&a.flags?a:null}if(128&a.flags)return a.lanes=o,a;u=null!==u;u!==(null!==n&&null!==n.memoizedState)&&u&&(a.child.flags|=8192,1&a.mode&&(null===n||1&fr.current?0===ts&&(ts=3):tj()));null!==a.updateQueue&&(a.flags|=4);S2(a);return null;case 4:return zh2(),Br(n,a),null===n&&sf2(a.stateNode.containerInfo),S2(a),null;case 10:return ah2(a.type._context),S2(a),null;case 19:E2(fr);m=a.memoizedState;if(null===m)return S2(a),null;u=!!(128&a.flags);g=m.rendering;if(null===g)if(u)Dj(m,!1);else{if(0!==ts||null!==n&&128&n.flags)for(n=a.child;null!==n;){g=Ch2(n);if(null!==g){a.flags|=128;Dj(m,!1);u=g.updateQueue;null!==u&&(a.updateQueue=u,a.flags|=4);a.subtreeFlags=0;u=o;for(o=a.child;null!==o;)m=o,n=u,m.flags&=14680066,g=m.alternate,null===g?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=g.childLanes,m.lanes=g.lanes,m.child=g.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=g.memoizedProps,m.memoizedState=g.memoizedState,m.updateQueue=g.updateQueue,m.type=g.type,n=g.dependencies,m.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext}),o=o.sibling;G2(fr,1&fr.current|2);return a.child}n=n.sibling}null!==m.tail&&be()>ls&&(a.flags|=128,u=!0,Dj(m,!1),a.lanes=4194304)}else{if(!u)if(n=Ch2(g),null!==n){if(a.flags|=128,u=!0,o=n.updateQueue,null!==o&&(a.updateQueue=o,a.flags|=4),Dj(m,!0),null===m.tail&&"hidden"===m.tailMode&&!g.alternate&&!Qn)return S2(a),null}else 2*be()-m.renderingStartTime>ls&&1073741824!==o&&(a.flags|=128,u=!0,Dj(m,!1),a.lanes=4194304);m.isBackwards?(g.sibling=a.child,a.child=g):(o=m.last,null!==o?o.sibling=g:a.child=g,m.last=g)}if(null!==m.tail)return a=m.tail,m.rendering=a,m.tail=a.sibling,m.renderingStartTime=be(),a.sibling=null,o=fr.current,G2(fr,u?1&o|2:1&o),a;S2(a);return null;case 22:case 23:return Hj(),u=null!==a.memoizedState,null!==n&&null!==n.memoizedState!==u&&(a.flags|=8192),u&&1&a.mode?!!(1073741824&Xr)&&(S2(a),6&a.subtreeFlags&&(a.flags|=8192)):S2(a),null;case 24:case 25:return null}throw Error(p2(156,a.tag))}function Ij(n,a){wg2(a);switch(a.tag){case 1:return Zf2(a.type)&&$f2(),n=a.flags,65536&n?(a.flags=-65537&n|128,a):null;case 3:return zh2(),E2(Mn),E2(Bn),Eh2(),n=a.flags,65536&n&&!(128&n)?(a.flags=-65537&n|128,a):null;case 5:return Bh2(a),null;case 13:E2(fr);n=a.memoizedState;if(null!==n&&null!==n.dehydrated){if(null===a.alternate)throw Error(p2(340));Ig2()}n=a.flags;return 65536&n?(a.flags=-65537&n|128,a):null;case 19:return E2(fr),null;case 4:return zh2(),null;case 10:return ah2(a.type._context),null;case 22:case 23:return Hj(),null;default:return null}}var Fr=!1,Lr=!1,Dr="function"==typeof WeakSet?WeakSet:Set,$r=null;function Lj(n,a){var o=n.ref;if(null!==o)if("function"==typeof o)try{o(null)}catch(i){W2(n,a,i)}else o.current=null}function Mj(n,a,o){try{o()}catch(i){W2(n,a,i)}}var Ur=!1;function Oj(n,a){vn=Ye;n=Me3();if(Ne2(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var i=o.getSelection&&o.getSelection();if(i&&0!==i.rangeCount){o=i.anchorNode;var u=i.anchorOffset,d=i.focusNode;i=i.focusOffset;try{o.nodeType,d.nodeType}catch(R){o=null;break e}var m=0,g=-1,y=-1,v=0,x=0,N=n,k=null;t:for(;;){for(var E;;){N!==o||0!==u&&3!==N.nodeType||(g=m+u);N!==d||0!==i&&3!==N.nodeType||(y=m+i);3===N.nodeType&&(m+=N.nodeValue.length);if(null===(E=N.firstChild))break;k=N;N=E}for(;;){if(N===n)break t;k===o&&++v===u&&(g=m);k===d&&++x===i&&(y=m);if(null!==(E=N.nextSibling))break;N=k;k=N.parentNode}N=E}o=-1===g||-1===y?null:{start:g,end:y}}else o=null}o=o||{start:0,end:0}}else o=null;wn={focusedElem:n,selectionRange:o};Ye=!1;for($r=a;null!==$r;)if(a=$r,n=a.child,1028&a.subtreeFlags&&null!==n)n.return=a,$r=n;else for(;null!==$r;){a=$r;try{var S=a.alternate;if(1024&a.flags)switch(a.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==S){var A=S.memoizedProps,_=S.memoizedState,j=a.stateNode,I=j.getSnapshotBeforeUpdate(a.elementType===a.type?A:Ci2(a.type,A),_);j.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var O=a.stateNode.containerInfo;1===O.nodeType?O.textContent="":9===O.nodeType&&O.documentElement&&O.removeChild(O.documentElement);break;default:throw Error(p2(163))}}catch(R){W2(a,a.return,R)}n=a.sibling;if(null!==n){n.return=a.return;$r=n;break}$r=a.return}S=Ur;Ur=!1;return S}function Pj(n,a,o){var i=a.updateQueue;i=null!==i?i.lastEffect:null;if(null!==i){var u=i=i.next;do{if((u.tag&n)===n){var d=u.destroy;u.destroy=void 0;void 0!==d&&Mj(a,o,d)}u=u.next}while(u!==i)}}function Qj(n,a){a=a.updateQueue;a=null!==a?a.lastEffect:null;if(null!==a){var o=a=a.next;do{if((o.tag&n)===n){var i=o.create;o.destroy=i()}o=o.next}while(o!==a)}}function Rj(n){var a=n.ref;if(null!==a){var o=n.stateNode;n.tag;n=o;"function"==typeof a?a(n):a.current=n}}function Sj(n){var a=n.alternate;null!==a&&(n.alternate=null,Sj(a));n.child=null;n.deletions=null;n.sibling=null;5===n.tag&&(a=n.stateNode,null!==a&&(delete a[Sn],delete a[An],delete a[Tn],delete a[jn],delete a[In]));n.stateNode=null;n.return=null;n.dependencies=null;n.memoizedProps=null;n.memoizedState=null;n.pendingProps=null;n.stateNode=null;n.updateQueue=null}function Tj(n){return 5===n.tag||3===n.tag||4===n.tag}function Uj(n){e:for(;;){for(;null===n.sibling;){if(null===n.return||Tj(n.return))return null;n=n.return}n.sibling.return=n.return;for(n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.flags))return n.stateNode}}function Vj(n,a,o){var i=n.tag;if(5===i||6===i)n=n.stateNode,a?8===o.nodeType?o.parentNode.insertBefore(n,a):o.insertBefore(n,a):(8===o.nodeType?(a=o.parentNode,a.insertBefore(n,o)):(a=o,a.appendChild(n)),o=o._reactRootContainer,null!=o||null!==a.onclick||(a.onclick=Bf2));else if(4!==i&&(n=n.child,null!==n))for(Vj(n,a,o),n=n.sibling;null!==n;)Vj(n,a,o),n=n.sibling}function Wj(n,a,o){var i=n.tag;if(5===i||6===i)n=n.stateNode,a?o.insertBefore(n,a):o.appendChild(n);else if(4!==i&&(n=n.child,null!==n))for(Wj(n,a,o),n=n.sibling;null!==n;)Wj(n,a,o),n=n.sibling}var Wr=null,Hr=!1;function Yj(n,a,o){for(o=o.child;null!==o;)Zj(n,a,o),o=o.sibling}function Zj(n,a,o){if(_e&&"function"==typeof _e.onCommitFiberUnmount)try{_e.onCommitFiberUnmount(Ae,o)}catch(g){}switch(o.tag){case 5:Lr||Lj(o,a);case 6:var i=Wr,u=Hr;Wr=null;Yj(n,a,o);Wr=i;Hr=u;null!==Wr&&(Hr?(n=Wr,o=o.stateNode,8===n.nodeType?n.parentNode.removeChild(o):n.removeChild(o)):Wr.removeChild(o.stateNode));break;case 18:null!==Wr&&(Hr?(n=Wr,o=o.stateNode,8===n.nodeType?Kf2(n.parentNode,o):1===n.nodeType&&Kf2(n,o),bd2(n)):Kf2(Wr,o.stateNode));break;case 4:i=Wr;u=Hr;Wr=o.stateNode.containerInfo;Hr=!0;Yj(n,a,o);Wr=i;Hr=u;break;case 0:case 11:case 14:case 15:if(!Lr&&(i=o.updateQueue,null!==i&&(i=i.lastEffect,null!==i))){u=i=i.next;do{var d=u,m=d.destroy;d=d.tag;void 0!==m&&(2&d||4&d)&&Mj(o,a,m);u=u.next}while(u!==i)}Yj(n,a,o);break;case 1:if(!Lr&&(Lj(o,a),i=o.stateNode,"function"==typeof i.componentWillUnmount))try{i.props=o.memoizedProps,i.state=o.memoizedState,i.componentWillUnmount()}catch(g){W2(o,a,g)}Yj(n,a,o);break;case 21:Yj(n,a,o);break;case 22:1&o.mode?(Lr=(i=Lr)||null!==o.memoizedState,Yj(n,a,o),Lr=i):Yj(n,a,o);break;default:Yj(n,a,o)}}function ak(n){var a=n.updateQueue;if(null!==a){n.updateQueue=null;var o=n.stateNode;null===o&&(o=n.stateNode=new Dr);a.forEach(function(a){var i=bk.bind(null,n,a);o.has(a)||(o.add(a),a.then(i,i))})}}function ck(n,a){var o=a.deletions;if(null!==o)for(var i=0;i<o.length;i++){var u=o[i];try{var d=n,m=a,g=m;e:for(;null!==g;){switch(g.tag){case 5:Wr=g.stateNode;Hr=!1;break e;case 3:case 4:Wr=g.stateNode.containerInfo;Hr=!0;break e}g=g.return}if(null===Wr)throw Error(p2(160));Zj(d,m,u);Wr=null;Hr=!1;var y=u.alternate;null!==y&&(y.return=null);u.return=null}catch(v){W2(u,a,v)}}if(12854&a.subtreeFlags)for(a=a.child;null!==a;)dk(a,n),a=a.sibling}function dk(n,a){var o=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:ck(a,n);ek(n);if(4&i){try{Pj(3,n,n.return),Qj(3,n)}catch(A){W2(n,n.return,A)}try{Pj(5,n,n.return)}catch(A){W2(n,n.return,A)}}break;case 1:ck(a,n);ek(n);512&i&&null!==o&&Lj(o,o.return);break;case 5:ck(a,n);ek(n);512&i&&null!==o&&Lj(o,o.return);if(32&n.flags){var u=n.stateNode;try{ob2(u,"")}catch(A){W2(n,n.return,A)}}if(4&i&&(u=n.stateNode,null!=u)){var d=n.memoizedProps,m=null!==o?o.memoizedProps:d,g=n.type,y=n.updateQueue;n.updateQueue=null;if(null!==y)try{"input"===g&&"radio"===d.type&&null!=d.name&&ab2(u,d);vb2(g,m);var v=vb2(g,d);for(m=0;m<y.length;m+=2){var x=y[m],N=y[m+1];"style"===x?sb2(u,N):"dangerouslySetInnerHTML"===x?J(u,N):"children"===x?ob2(u,N):ta2(u,x,N,v)}switch(g){case"input":bb2(u,d);break;case"textarea":ib2(u,d);break;case"select":var k=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!d.multiple;var E=d.value;null!=E?fb2(u,!!d.multiple,E,!1):k!==!!d.multiple&&(null!=d.defaultValue?fb2(u,!!d.multiple,d.defaultValue,!0):fb2(u,!!d.multiple,d.multiple?[]:"",!1))}u[An]=d}catch(A){W2(n,n.return,A)}}break;case 6:ck(a,n);ek(n);if(4&i){if(null===n.stateNode)throw Error(p2(162));u=n.stateNode;d=n.memoizedProps;try{u.nodeValue=d}catch(A){W2(n,n.return,A)}}break;case 3:ck(a,n);ek(n);if(4&i&&null!==o&&o.memoizedState.isDehydrated)try{bd2(a.containerInfo)}catch(A){W2(n,n.return,A)}break;case 4:ck(a,n);ek(n);break;case 13:ck(a,n);ek(n);u=n.child;8192&u.flags&&(d=null!==u.memoizedState,u.stateNode.isHidden=d,!d||null!==u.alternate&&null!==u.alternate.memoizedState||(cs=be()));4&i&&ak(n);break;case 22:x=null!==o&&null!==o.memoizedState;1&n.mode?(Lr=(v=Lr)||x,ck(a,n),Lr=v):ck(a,n);ek(n);if(8192&i){v=null!==n.memoizedState;if((n.stateNode.isHidden=v)&&!x&&1&n.mode)for($r=n,x=n.child;null!==x;){for(N=$r=x;null!==$r;){k=$r;E=k.child;switch(k.tag){case 0:case 11:case 14:case 15:Pj(4,k,k.return);break;case 1:Lj(k,k.return);var S=k.stateNode;if("function"==typeof S.componentWillUnmount){i=k;o=k.return;try{a=i,S.props=a.memoizedProps,S.state=a.memoizedState,S.componentWillUnmount()}catch(A){W2(i,o,A)}}break;case 5:Lj(k,k.return);break;case 22:if(null!==k.memoizedState){gk(N);continue}}null!==E?(E.return=k,$r=E):gk(N)}x=x.sibling}e:for(x=null,N=n;;){if(5===N.tag){if(null===x){x=N;try{u=N.stateNode,v?(d=u.style,"function"==typeof d.setProperty?d.setProperty("display","none","important"):d.display="none"):(g=N.stateNode,y=N.memoizedProps.style,m=null!=y&&y.hasOwnProperty("display")?y.display:null,g.style.display=rb2("display",m))}catch(A){W2(n,n.return,A)}}}else if(6===N.tag){if(null===x)try{N.stateNode.nodeValue=v?"":N.memoizedProps}catch(A){W2(n,n.return,A)}}else if((22!==N.tag&&23!==N.tag||null===N.memoizedState||N===n)&&null!==N.child){N.child.return=N;N=N.child;continue}if(N===n)break e;for(;null===N.sibling;){if(null===N.return||N.return===n)break e;x===N&&(x=null);N=N.return}x===N&&(x=null);N.sibling.return=N.return;N=N.sibling}}break;case 19:ck(a,n);ek(n);4&i&&ak(n);break;case 21:break;default:ck(a,n),ek(n)}}function ek(n){var a=n.flags;if(2&a){try{e:{for(var o=n.return;null!==o;){if(Tj(o)){var i=o;break e}o=o.return}throw Error(p2(160))}switch(i.tag){case 5:var u=i.stateNode;32&i.flags&&(ob2(u,""),i.flags&=-33);var d=Uj(n);Wj(n,d,u);break;case 3:case 4:var m=i.stateNode.containerInfo,g=Uj(n);Vj(n,g,m);break;default:throw Error(p2(161))}}catch(y){W2(n,n.return,y)}n.flags&=-3}4096&a&&(n.flags&=-4097)}function hk(n,a,o){$r=n;ik(n)}function ik(n,a,o){for(var i=!!(1&n.mode);null!==$r;){var u=$r,d=u.child;if(22===u.tag&&i){var m=null!==u.memoizedState||Fr;if(!m){var g=u.alternate,y=null!==g&&null!==g.memoizedState||Lr;g=Fr;var v=Lr;Fr=m;if((Lr=y)&&!v)for($r=u;null!==$r;)m=$r,y=m.child,22===m.tag&&null!==m.memoizedState?jk(u):null!==y?(y.return=m,$r=y):jk(u);for(;null!==d;)$r=d,ik(d),d=d.sibling;$r=u;Fr=g;Lr=v}kk(n)}else 8772&u.subtreeFlags&&null!==d?(d.return=u,$r=d):kk(n)}}function kk(n){for(;null!==$r;){var a=$r;if(8772&a.flags){var o=a.alternate;try{if(8772&a.flags)switch(a.tag){case 0:case 11:case 15:Lr||Qj(5,a);break;case 1:var i=a.stateNode;if(4&a.flags&&!Lr)if(null===o)i.componentDidMount();else{var u=a.elementType===a.type?o.memoizedProps:Ci2(a.type,o.memoizedProps);i.componentDidUpdate(u,o.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var d=a.updateQueue;null!==d&&sh2(a,d,i);break;case 3:var m=a.updateQueue;if(null!==m){o=null;if(null!==a.child)switch(a.child.tag){case 5:case 1:o=a.child.stateNode}sh2(a,m,o)}break;case 5:var g=a.stateNode;if(null===o&&4&a.flags){o=g;var y=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":y.autoFocus&&o.focus();break;case"img":y.src&&(o.src=y.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===a.memoizedState){var v=a.alternate;if(null!==v){var x=v.memoizedState;if(null!==x){var N=x.dehydrated;null!==N&&bd2(N)}}}break;default:throw Error(p2(163))}Lr||512&a.flags&&Rj(a)}catch(k){W2(a,a.return,k)}}if(a===n){$r=null;break}o=a.sibling;if(null!==o){o.return=a.return;$r=o;break}$r=a.return}}function gk(n){for(;null!==$r;){var a=$r;if(a===n){$r=null;break}var o=a.sibling;if(null!==o){o.return=a.return;$r=o;break}$r=a.return}}function jk(n){for(;null!==$r;){var a=$r;try{switch(a.tag){case 0:case 11:case 15:var o=a.return;try{Qj(4,a)}catch(y){W2(a,o,y)}break;case 1:var i=a.stateNode;if("function"==typeof i.componentDidMount){var u=a.return;try{i.componentDidMount()}catch(y){W2(a,u,y)}}var d=a.return;try{Rj(a)}catch(y){W2(a,d,y)}break;case 5:var m=a.return;try{Rj(a)}catch(y){W2(a,m,y)}}}catch(y){W2(a,a.return,y)}if(a===n){$r=null;break}var g=a.sibling;if(null!==g){g.return=a.return;$r=g;break}$r=a.return}}var qr=Math.ceil,Gr=E.ReactCurrentDispatcher,Vr=E.ReactCurrentOwner,Kr=E.ReactCurrentBatchConfig,Zr=0,Yr=null,Jr=null,Qr=0,Xr=0,es=Uf2(0),ts=0,ns=null,rs=0,ss=0,as=0,os=null,is=null,cs=0,ls=1/0,us=null,ds=!1,hs=null,fs=null,ps=!1,ms=null,gs=0,ys=0,bs=null,vs=-1,ws=0;function R2(){return 6&Zr?be():-1!==vs?vs:vs=be()}function yi2(n){if(!(1&n.mode))return 1;if(2&Zr&&0!==Qr)return Qr&-Qr;if(null!==er.transition)return 0===ws&&(ws=yc2()),ws;n=Re;if(0!==n)return n;n=window.event;n=void 0===n?16:jd2(n.type);return n}function gi3(n,a,o,i){if(50<ys)throw ys=0,bs=null,Error(p2(185));Ac3(n,o,i);2&Zr&&n===Yr||(n===Yr&&(!(2&Zr)&&(ss|=o),4===ts&&Ck(n,Qr)),Dk(n,i),1===o&&0===Zr&&!(1&a.mode)&&(ls=be()+500,Ln&&jg2()))}function Dk(n,a){var o=n.callbackNode;wc3(n,a);var i=uc2(n,n===Yr?Qr:0);if(0===i)null!==o&&me(o),n.callbackNode=null,n.callbackPriority=0;else if(a=i&-i,n.callbackPriority!==a){null!=o&&me(o);if(1===a)0===n.tag?ig2(Ek.bind(null,n)):hg2(Ek.bind(null,n)),Cn(function(){!(6&Zr)&&jg2()}),o=null;else{switch(Dc2(i)){case 1:o=xe;break;case 4:o=Ne;break;case 16:default:o=ke;break;case 536870912:o=Se}o=Fk(o,Gk.bind(null,n))}n.callbackPriority=a;n.callbackNode=o}}function Gk(n,a){vs=-1;ws=0;if(6&Zr)throw Error(p2(327));var o=n.callbackNode;if(Hk()&&n.callbackNode!==o)return null;var i=uc2(n,n===Yr?Qr:0);if(0===i)return null;if(30&i||0!==(i&n.expiredLanes)||a)a=Ik(n,i);else{a=i;var u=Zr;Zr|=2;var d=Jk();Yr===n&&Qr===a||(us=null,ls=be()+500,Kk(n,a));for(;;)try{Lk();break}catch(g){Mk(n,g)}$g2();Gr.current=d;Zr=u;null!==Jr?a=0:(Yr=null,Qr=0,a=ts)}if(0!==a){2===a&&(u=xc2(n),0!==u&&(i=u,a=Nk(n,u)));if(1===a)throw o=ns,Kk(n,0),Ck(n,i),Dk(n,be()),o;if(6===a)Ck(n,i);else{u=n.current.alternate;if(!(30&i||Ok(u)||(a=Ik(n,i),2===a&&(d=xc2(n),0!==d&&(i=d,a=Nk(n,d))),1!==a)))throw o=ns,Kk(n,0),Ck(n,i),Dk(n,be()),o;n.finishedWork=u;n.finishedLanes=i;switch(a){case 0:case 1:throw Error(p2(345));case 2:case 5:Pk(n,is,us);break;case 3:Ck(n,i);if((130023424&i)===i&&(a=cs+500-be(),10<a)){if(0!==uc2(n,0))break;u=n.suspendedLanes;if((u&i)!==i){R2();n.pingedLanes|=n.suspendedLanes&u;break}n.timeoutHandle=xn(Pk.bind(null,n,is,us),a);break}Pk(n,is,us);break;case 4:Ck(n,i);if((4194240&i)===i)break;a=n.eventTimes;for(u=-1;0<i;){var m=31-Te(i);d=1<<m;m=a[m];m>u&&(u=m);i&=~d}i=u;i=be()-i;i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*qr(i/1960))-i;if(10<i){n.timeoutHandle=xn(Pk.bind(null,n,is,us),i);break}Pk(n,is,us);break;default:throw Error(p2(329))}}}Dk(n,be());return n.callbackNode===o?Gk.bind(null,n):null}function Nk(n,a){var o=os;n.current.memoizedState.isDehydrated&&(Kk(n,a).flags|=256);n=Ik(n,a);2!==n&&(a=is,is=o,null!==a&&Fj(a));return n}function Fj(n){null===is?is=n:is.push.apply(is,n)}function Ok(n){for(var a=n;;){if(16384&a.flags){var o=a.updateQueue;if(null!==o&&(o=o.stores,null!==o))for(var i=0;i<o.length;i++){var u=o[i],d=u.getSnapshot;u=u.value;try{if(!Kt(d(),u))return!1}catch(m){return!1}}}o=a.child;if(16384&a.subtreeFlags&&null!==o)o.return=a,a=o;else{if(a===n)break;for(;null===a.sibling;){if(null===a.return||a.return===n)return!0;a=a.return}a.sibling.return=a.return;a=a.sibling}}return!0}function Ck(n,a){a&=~as;a&=~ss;n.suspendedLanes|=a;n.pingedLanes&=~a;for(n=n.expirationTimes;0<a;){var o=31-Te(a),i=1<<o;n[o]=-1;a&=~i}}function Ek(n){if(6&Zr)throw Error(p2(327));Hk();var a=uc2(n,0);if(!(1&a))return Dk(n,be()),null;var o=Ik(n,a);if(0!==n.tag&&2===o){var i=xc2(n);0!==i&&(a=i,o=Nk(n,i))}if(1===o)throw o=ns,Kk(n,0),Ck(n,a),Dk(n,be()),o;if(6===o)throw Error(p2(345));n.finishedWork=n.current.alternate;n.finishedLanes=a;Pk(n,is,us);Dk(n,be());return null}function Qk(n,a){var o=Zr;Zr|=1;try{return n(a)}finally{Zr=o,0===Zr&&(ls=be()+500,Ln&&jg2())}}function Rk(n){null!==ms&&0===ms.tag&&!(6&Zr)&&Hk();var a=Zr;Zr|=1;var o=Kr.transition,i=Re;try{if(Kr.transition=null,Re=1,n)return n()}finally{Re=i,Kr.transition=o,Zr=a,!(6&Zr)&&jg2()}}function Hj(){Xr=es.current;E2(es)}function Kk(n,a){n.finishedWork=null;n.finishedLanes=0;var o=n.timeoutHandle;-1!==o&&(n.timeoutHandle=-1,Nn(o));if(null!==Jr)for(o=Jr.return;null!==o;){var i=o;wg2(i);switch(i.tag){case 1:i=i.type.childContextTypes;null!=i&&$f2();break;case 3:zh2();E2(Mn);E2(Bn);Eh2();break;case 5:Bh2(i);break;case 4:zh2();break;case 13:case 19:E2(fr);break;case 10:ah2(i.type._context);break;case 22:case 23:Hj()}o=o.return}Yr=n;Jr=n=Pg2(n.current,null);Qr=Xr=a;ts=0;ns=null;as=ss=rs=0;is=os=null;if(null!==ir){for(a=0;a<ir.length;a++)if(o=ir[a],i=o.interleaved,null!==i){o.interleaved=null;var u=i.next,d=o.pending;if(null!==d){var m=d.next;d.next=u;i.next=m}o.pending=i}ir=null}return n}function Mk(n,a){for(;;){var o=Jr;try{$g2();mr.current=Er;if(xr){for(var i=br.memoizedState;null!==i;){var u=i.queue;null!==u&&(u.pending=null);i=i.next}xr=!1}yr=0;wr=vr=br=null;Nr=!1;kr=0;Vr.current=null;if(null===o||null===o.return){ts=1;ns=a;Jr=null;break}e:{var d=n,m=o.return,g=o,y=a;a=Qr;g.flags|=32768;if(null!==y&&"object"==typeof y&&"function"==typeof y.then){var v=y,x=g,N=x.tag;if(!(1&x.mode||0!==N&&11!==N&&15!==N)){var k=x.alternate;k?(x.updateQueue=k.updateQueue,x.memoizedState=k.memoizedState,x.lanes=k.lanes):(x.updateQueue=null,x.memoizedState=null)}var E=Ui2(m);if(null!==E){E.flags&=-257;Vi2(E,m,g,d,a);1&E.mode&&Si3(d,v,a);a=E;y=v;var S=a.updateQueue;if(null===S){var A=new Set;A.add(y);a.updateQueue=A}else S.add(y);break e}if(!(1&a)){Si3(d,v,a);tj();break e}y=Error(p2(426))}else if(Qn&&1&g.mode){var _=Ui2(m);if(null!==_){!(65536&_.flags)&&(_.flags|=256);Vi2(_,m,g,d,a);Jg2(Ji2(y,g));break e}}d=y=Ji2(y,g);4!==ts&&(ts=2);null===os?os=[d]:os.push(d);d=m;do{switch(d.tag){case 3:d.flags|=65536;a&=-a;d.lanes|=a;var j=Ni2(d,y,a);ph2(d,j);break e;case 1:g=y;var I=d.type,O=d.stateNode;if(!(128&d.flags||"function"!=typeof I.getDerivedStateFromError&&(null===O||"function"!=typeof O.componentDidCatch||null!==fs&&fs.has(O)))){d.flags|=65536;a&=-a;d.lanes|=a;var R=Qi2(d,g,a);ph2(d,R);break e}}d=d.return}while(null!==d)}Sk(o)}catch(B){a=B;Jr===o&&null!==o&&(Jr=o=o.return);continue}break}}function Jk(){var n=Gr.current;Gr.current=Er;return null===n?Er:n}function tj(){0!==ts&&3!==ts&&2!==ts||(ts=4);null===Yr||!(268435455&rs)&&!(268435455&ss)||Ck(Yr,Qr)}function Ik(n,a){var o=Zr;Zr|=2;var i=Jk();Yr===n&&Qr===a||(us=null,Kk(n,a));for(;;)try{Tk();break}catch(u){Mk(n,u)}$g2();Zr=o;Gr.current=i;if(null!==Jr)throw Error(p2(261));Yr=null;Qr=0;return ts}function Tk(){for(;null!==Jr;)Uk(Jr)}function Lk(){for(;null!==Jr&&!ge();)Uk(Jr)}function Uk(n){var a=xs(n.alternate,n,Xr);n.memoizedProps=n.pendingProps;null===a?Sk(n):Jr=a;Vr.current=null}function Sk(n){var a=n;do{var o=a.alternate;n=a.return;if(32768&a.flags){o=Ij(o,a);if(null!==o){o.flags&=32767;Jr=o;return}if(null===n){ts=6;Jr=null;return}n.flags|=32768,n.subtreeFlags=0,n.deletions=null}else if(o=Ej(o,a,Xr),null!==o){Jr=o;return}a=a.sibling;if(null!==a){Jr=a;return}Jr=a=n}while(null!==a);0===ts&&(ts=5)}function Pk(n,a,o){var i=Re,u=Kr.transition;try{Kr.transition=null,Re=1,Wk(n,a,o,i)}finally{Kr.transition=u,Re=i}return null}function Wk(n,a,o,i){do{Hk()}while(null!==ms);if(6&Zr)throw Error(p2(327));o=n.finishedWork;var u=n.finishedLanes;if(null===o)return null;n.finishedWork=null;n.finishedLanes=0;if(o===n.current)throw Error(p2(177));n.callbackNode=null;n.callbackPriority=0;var d=o.lanes|o.childLanes;Bc2(n,d);n===Yr&&(Jr=Yr=null,Qr=0);!(2064&o.subtreeFlags)&&!(2064&o.flags)||ps||(ps=!0,Fk(ke,function(){Hk();return null}));d=!!(15990&o.flags);if(15990&o.subtreeFlags||d){d=Kr.transition;Kr.transition=null;var m=Re;Re=1;var g=Zr;Zr|=4;Vr.current=null;Oj(n,o);dk(o,n);Oe2(wn);Ye=!!vn;wn=vn=null;n.current=o;hk(o);ye();Zr=g;Re=m;Kr.transition=d}else n.current=o;ps&&(ps=!1,ms=n,gs=u);d=n.pendingLanes;0===d&&(fs=null);mc2(o.stateNode);Dk(n,be());if(null!==a)for(i=n.onRecoverableError,o=0;o<a.length;o++)u=a[o],i(u.value,{componentStack:u.stack,digest:u.digest});if(ds)throw ds=!1,n=hs,hs=null,n;1&gs&&0!==n.tag&&Hk();d=n.pendingLanes;1&d?n===bs?ys++:(ys=0,bs=n):ys=0;jg2();return null}function Hk(){if(null!==ms){var n=Dc2(gs),a=Kr.transition,o=Re;try{Kr.transition=null;Re=16>n?16:n;if(null===ms)var i=!1;else{n=ms;ms=null;gs=0;if(6&Zr)throw Error(p2(331));var u=Zr;Zr|=4;for($r=n.current;null!==$r;){var d=$r,m=d.child;if(16&$r.flags){var g=d.deletions;if(null!==g){for(var y=0;y<g.length;y++){var v=g[y];for($r=v;null!==$r;){var x=$r;switch(x.tag){case 0:case 11:case 15:Pj(8,x,d)}var N=x.child;if(null!==N)N.return=x,$r=N;else for(;null!==$r;){x=$r;var k=x.sibling,E=x.return;Sj(x);if(x===v){$r=null;break}if(null!==k){k.return=E;$r=k;break}$r=E}}}var S=d.alternate;if(null!==S){var A=S.child;if(null!==A){S.child=null;do{var _=A.sibling;A.sibling=null;A=_}while(null!==A)}}$r=d}}if(2064&d.subtreeFlags&&null!==m)m.return=d,$r=m;else e:for(;null!==$r;){d=$r;if(2048&d.flags)switch(d.tag){case 0:case 11:case 15:Pj(9,d,d.return)}var j=d.sibling;if(null!==j){j.return=d.return;$r=j;break e}$r=d.return}}var I=n.current;for($r=I;null!==$r;){m=$r;var O=m.child;if(2064&m.subtreeFlags&&null!==O)O.return=m,$r=O;else e:for(m=I;null!==$r;){g=$r;if(2048&g.flags)try{switch(g.tag){case 0:case 11:case 15:Qj(9,g)}}catch(B){W2(g,g.return,B)}if(g===m){$r=null;break e}var R=g.sibling;if(null!==R){R.return=g.return;$r=R;break e}$r=g.return}}Zr=u;jg2();if(_e&&"function"==typeof _e.onPostCommitFiberRoot)try{_e.onPostCommitFiberRoot(Ae,n)}catch(B){}i=!0}return i}finally{Re=o,Kr.transition=a}}return!1}function Xk(n,a,o){a=Ji2(o,a);a=Ni2(n,a,1);n=nh2(n,a,1);a=R2();null!==n&&(Ac3(n,1,a),Dk(n,a))}function W2(n,a,o){if(3===n.tag)Xk(n,n,o);else for(;null!==a;){if(3===a.tag){Xk(a,n,o);break}if(1===a.tag){var i=a.stateNode;if("function"==typeof a.type.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&(null===fs||!fs.has(i))){n=Ji2(o,n);n=Qi2(a,n,1);a=nh2(a,n,1);n=R2();null!==a&&(Ac3(a,1,n),Dk(a,n));break}}a=a.return}}function Ti2(n,a,o){var i=n.pingCache;null!==i&&i.delete(a);a=R2();n.pingedLanes|=n.suspendedLanes&o;Yr===n&&(Qr&o)===o&&(4===ts||3===ts&&(130023424&Qr)===Qr&&500>be()-cs?Kk(n,0):as|=o);Dk(n,a)}function Yk(n,a){0===a&&(1&n.mode?(a=Oe,Oe<<=1,!(130023424&Oe)&&(Oe=4194304)):a=1);var o=R2();n=ih2(n,a);null!==n&&(Ac3(n,a,o),Dk(n,o))}function uj(n){var a=n.memoizedState,o=0;null!==a&&(o=a.retryLane);Yk(n,o)}function bk(n,a){var o=0;switch(n.tag){case 13:var i=n.stateNode;var u=n.memoizedState;null!==u&&(o=u.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(p2(314))}null!==i&&i.delete(a);Yk(n,o)}var xs;xs=function(n,a,o){if(null!==n)if(n.memoizedProps!==a.pendingProps||Mn.current)Pr=!0;else{if(0===(n.lanes&o)&&!(128&a.flags))return Pr=!1,yj(n,a,o);Pr=!!(131072&n.flags)}else Pr=!1,Qn&&1048576&a.flags&&ug2(a,Hn,a.index);a.lanes=0;switch(a.tag){case 2:var i=a.type;ij(n,a);n=a.pendingProps;var u=Yf2(a,Bn.current);ch2(a,o);u=Nh2(null,a,i,n,u,o);var d=Sh2();a.flags|=1;"object"==typeof u&&null!==u&&"function"==typeof u.render&&void 0===u.$$typeof?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Zf2(i)?(d=!0,cg2(a)):d=!1,a.memoizedState=null!==u.state&&void 0!==u.state?u.state:null,kh2(a),u.updater=Tr,a.stateNode=u,u._reactInternals=a,Ii3(a,i,n,o),a=jj(null,a,i,!0,d,o)):(a.tag=0,Qn&&d&&vg2(a),Xi2(null,a,u,o),a=a.child);return a;case 16:i=a.elementType;e:{ij(n,a);n=a.pendingProps;u=i._init;i=u(i._payload);a.type=i;u=a.tag=Zk(i);n=Ci2(i,n);switch(u){case 0:a=cj(null,a,i,n,o);break e;case 1:a=hj(null,a,i,n,o);break e;case 11:a=Yi2(null,a,i,n,o);break e;case 14:a=$i2(null,a,i,Ci2(i.type,n),o);break e}throw Error(p2(306,i,""))}return a;case 0:return i=a.type,u=a.pendingProps,u=a.elementType===i?u:Ci2(i,u),cj(n,a,i,u,o);case 1:return i=a.type,u=a.pendingProps,u=a.elementType===i?u:Ci2(i,u),hj(n,a,i,u,o);case 3:e:{kj(a);if(null===n)throw Error(p2(387));i=a.pendingProps;d=a.memoizedState;u=d.element;lh2(n,a);qh(a,i,null,o);var m=a.memoizedState;i=m.element;if(d.isDehydrated){if(d={element:i,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},a.updateQueue.baseState=d,a.memoizedState=d,256&a.flags){u=Ji2(Error(p2(423)),a);a=lj(n,a,i,o,u);break e}if(i!==u){u=Ji2(Error(p2(424)),a);a=lj(n,a,i,o,u);break e}for(Jn=Lf2(a.stateNode.containerInfo.firstChild),Yn=a,Qn=!0,Xn=null,o=nr(a,null,i,o),a.child=o;o;)o.flags=-3&o.flags|4096,o=o.sibling}else{Ig2();if(i===u){a=Zi2(n,a,o);break e}Xi2(n,a,i,o)}a=a.child}return a;case 5:return Ah2(a),null===n&&Eg2(a),i=a.type,u=a.pendingProps,d=null!==n?n.memoizedProps:null,m=u.children,Ef2(i,u)?m=null:null!==d&&Ef2(i,d)&&(a.flags|=32),gj(n,a),Xi2(n,a,m,o),a.child;case 6:return null===n&&Eg2(a),null;case 13:return oj(n,a,o);case 4:return yh2(a,a.stateNode.containerInfo),i=a.pendingProps,null===n?a.child=tr(a,null,i,o):Xi2(n,a,i,o),a.child;case 11:return i=a.type,u=a.pendingProps,u=a.elementType===i?u:Ci2(i,u),Yi2(n,a,i,u,o);case 7:return Xi2(n,a,a.pendingProps,o),a.child;case 8:case 12:return Xi2(n,a,a.pendingProps.children,o),a.child;case 10:e:{i=a.type._context;u=a.pendingProps;d=a.memoizedProps;m=u.value;G2(rr,i._currentValue);i._currentValue=m;if(null!==d)if(Kt(d.value,m)){if(d.children===u.children&&!Mn.current){a=Zi2(n,a,o);break e}}else for(d=a.child,null!==d&&(d.return=a);null!==d;){var g=d.dependencies;if(null!==g){m=d.child;for(var y=g.firstContext;null!==y;){if(y.context===i){if(1===d.tag){y=mh2(-1,o&-o);y.tag=2;var v=d.updateQueue;if(null!==v){v=v.shared;var x=v.pending;null===x?y.next=y:(y.next=x.next,x.next=y);v.pending=y}}d.lanes|=o;y=d.alternate;null!==y&&(y.lanes|=o);bh2(d.return,o,a);g.lanes|=o;break}y=y.next}}else if(10===d.tag)m=d.type===a.type?null:d.child;else if(18===d.tag){m=d.return;if(null===m)throw Error(p2(341));m.lanes|=o;g=m.alternate;null!==g&&(g.lanes|=o);bh2(m,o,a);m=d.sibling}else m=d.child;if(null!==m)m.return=d;else for(m=d;null!==m;){if(m===a){m=null;break}d=m.sibling;if(null!==d){d.return=m.return;m=d;break}m=m.return}d=m}Xi2(n,a,u.children,o);a=a.child}return a;case 9:return u=a.type,i=a.pendingProps.children,ch2(a,o),u=eh2(u),i=i(u),a.flags|=1,Xi2(n,a,i,o),a.child;case 14:return i=a.type,u=Ci2(i,a.pendingProps),u=Ci2(i.type,u),$i2(n,a,i,u,o);case 15:return bj(n,a,a.type,a.pendingProps,o);case 17:return i=a.type,u=a.pendingProps,u=a.elementType===i?u:Ci2(i,u),ij(n,a),a.tag=1,Zf2(i)?(n=!0,cg2(a)):n=!1,ch2(a,o),Gi2(a,i,u),Ii3(a,i,u,o),jj(null,a,i,!0,n,o);case 19:return xj(n,a,o);case 22:return dj(n,a,o)}throw Error(p2(156,a.tag))};function Fk(n,a){return pe(n,a)}function $k(n,a,o,i){this.tag=n;this.key=o;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=a;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=i;this.subtreeFlags=this.flags=0;this.deletions=null;this.childLanes=this.lanes=0;this.alternate=null}function Bg2(n,a,o,i){return new $k(n,a,o,i)}function aj(n){n=n.prototype;return!(!n||!n.isReactComponent)}function Zk(n){if("function"==typeof n)return aj(n)?1:0;if(null!=n){n=n.$$typeof;if(n===B)return 11;if(n===L)return 14}return 2}function Pg2(n,a){var o=n.alternate;null===o?(o=Bg2(n.tag,a,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=a,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null);o.flags=14680064&n.flags;o.childLanes=n.childLanes;o.lanes=n.lanes;o.child=n.child;o.memoizedProps=n.memoizedProps;o.memoizedState=n.memoizedState;o.updateQueue=n.updateQueue;a=n.dependencies;o.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext};o.sibling=n.sibling;o.index=n.index;o.ref=n.ref;return o}function Rg2(n,a,o,i,u,d){var m=2;i=n;if("function"==typeof n)aj(n)&&(m=1);else if("string"==typeof n)m=5;else e:switch(n){case _:return Tg2(o.children,u,d,a);case j:m=8;u|=8;break;case I:return n=Bg2(12,o,a,2|u),n.elementType=I,n.lanes=d,n;case M:return n=Bg2(13,o,a,u),n.elementType=M,n.lanes=d,n;case z:return n=Bg2(19,o,a,u),n.elementType=z,n.lanes=d,n;case W:return pj(o,u,d,a);default:if("object"==typeof n&&null!==n)switch(n.$$typeof){case O:m=10;break e;case R:m=9;break e;case B:m=11;break e;case L:m=14;break e;case D:m=16;i=null;break e}throw Error(p2(130,null==n?n:typeof n,""))}a=Bg2(m,o,a,u);a.elementType=n;a.type=i;a.lanes=d;return a}function Tg2(n,a,o,i){n=Bg2(7,n,i,a);n.lanes=o;return n}function pj(n,a,o,i){n=Bg2(22,n,i,a);n.elementType=W;n.lanes=o;n.stateNode={isHidden:!1};return n}function Qg2(n,a,o){n=Bg2(6,n,null,a);n.lanes=o;return n}function Sg(n,a,o){a=Bg2(4,null!==n.children?n.children:[],n.key,a);a.lanes=o;a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation};return a}function al2(n,a,o,i,u){this.tag=a;this.containerInfo=n;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.callbackNode=this.pendingContext=this.context=null;this.callbackPriority=0;this.eventTimes=zc2(0);this.expirationTimes=zc2(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=zc2(0);this.identifierPrefix=i;this.onRecoverableError=u;this.mutableSourceEagerHydrationData=null}function bl2(n,a,o,i,u,d,m,g,y){n=new al2(n,a,o,g,y);1===a?(a=1,!0===d&&(a|=8)):a=0;d=Bg2(3,null,null,a);n.current=d;d.stateNode=n;d.memoizedState={element:i,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null};kh2(d);return n}function cl2(n,a,o){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:A,key:null==i?null:""+i,children:n,containerInfo:a,implementation:o}}function dl2(n){if(!n)return Rn;n=n._reactInternals;e:{if(Vb(n)!==n||1!==n.tag)throw Error(p2(170));var a=n;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Zf2(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(null!==a);throw Error(p2(171))}if(1===n.tag){var o=n.type;if(Zf2(o))return bg2(n,o,a)}return a}function el2(n,a,o,i,u,d,m,g,y){n=bl2(o,i,!0,n,u,d,m,g,y);n.context=dl2(null);o=n.current;i=R2();u=yi2(o);d=mh2(i,u);d.callback=null!=a?a:null;nh2(o,d,u);n.current.lanes=u;Ac3(n,u,i);Dk(n,i);return n}function fl2(n,a,o,i){var u=a.current,d=R2(),m=yi2(u);o=dl2(o);null===a.context?a.context=o:a.pendingContext=o;a=mh2(d,m);a.payload={element:n};i=void 0===i?null:i;null!==i&&(a.callback=i);n=nh2(u,a,m);null!==n&&(gi3(n,u,m,d),oh2(n,u,m));return m}function gl2(n){n=n.current;if(!n.child)return null;n.child.tag;return n.child.stateNode}function hl2(n,a){n=n.memoizedState;if(null!==n&&null!==n.dehydrated){var o=n.retryLane;n.retryLane=0!==o&&o<a?o:a}}function il2(n,a){hl2(n,a);(n=n.alternate)&&hl2(n,a)}function jl2(){return null}var Ns="function"==typeof reportError?reportError:function(n){console.error(n)};function ll2(n){this._internalRoot=n}ml2.prototype.render=ll2.prototype.render=function(n){var a=this._internalRoot;if(null===a)throw Error(p2(409));fl2(n,a,null,null)};ml2.prototype.unmount=ll2.prototype.unmount=function(){var n=this._internalRoot;if(null!==n){this._internalRoot=null;var a=n.containerInfo;Rk(function(){fl2(null,n,null,null)});a[_n]=null}};function ml2(n){this._internalRoot=n}ml2.prototype.unstable_scheduleHydration=function(n){if(n){var a=Fe();n={blockedOn:null,target:n,priority:a};for(var o=0;o<Ve.length&&0!==a&&a<Ve[o].priority;o++);Ve.splice(o,0,n);0===o&&Vc2(n)}};function nl2(n){return!(!n||1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType)}function ol2(n){return!(!n||1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType&&(8!==n.nodeType||" react-mount-point-unstable "!==n.nodeValue))}function pl2(){}function ql2(n,a,o,i,u){if(u){if("function"==typeof i){var d=i;i=function(){var n=gl2(m);d.call(n)}}var m=el2(a,i,n,0,null,!1,!1,"",pl2);n._reactRootContainer=m;n[_n]=m.current;sf2(8===n.nodeType?n.parentNode:n);Rk();return m}for(;u=n.lastChild;)n.removeChild(u);if("function"==typeof i){var g=i;i=function(){var n=gl2(y);g.call(n)}}var y=bl2(n,0,!1,null,null,!1,!1,"",pl2);n._reactRootContainer=y;n[_n]=y.current;sf2(8===n.nodeType?n.parentNode:n);Rk(function(){fl2(a,y,o,i)});return y}function rl2(n,a,o,i,u){var d=o._reactRootContainer;if(d){var m=d;if("function"==typeof u){var g=u;u=function(){var n=gl2(m);g.call(n)}}fl2(a,m,n,u)}else m=ql2(o,a,n,u,i);return gl2(m)}Be=function(n){switch(n.tag){case 3:var a=n.stateNode;if(a.current.memoizedState.isDehydrated){var o=tc3(a.pendingLanes);0!==o&&(Cc2(a,1|o),Dk(a,be()),!(6&Zr)&&(ls=be()+500,jg2()))}break;case 13:Rk(function(){var a=ih2(n,1);if(null!==a){var o=R2();gi3(a,n,1,o)}}),il2(n,1)}};Me=function(n){if(13===n.tag){var a=ih2(n,134217728);if(null!==a){var o=R2();gi3(a,n,134217728,o)}il2(n,134217728)}};ze=function(n){if(13===n.tag){var a=yi2(n),o=ih2(n,a);if(null!==o){var i=R2();gi3(o,n,a,i)}il2(n,a)}};Fe=function(){return Re};Le=function(n,a){var o=Re;try{return Re=n,a()}finally{Re=o}};re=function(n,a,o){switch(a){case"input":bb2(n,o);a=o.name;if("radio"===o.type&&null!=a){for(o=n;o.parentNode;)o=o.parentNode;o=o.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]');for(a=0;a<o.length;a++){var i=o[a];if(i!==n&&i.form===n.form){var u=Db2(i);if(!u)throw Error(p2(90));Wa3(i);bb2(i,u)}}}break;case"textarea":ib2(n,o);break;case"select":a=o.value,null!=a&&fb2(n,!!o.multiple,a,!1)}};Gb=Qk;Hb2=Rk;var ks={usingClientEntryPoint:!1,Events:[Cb2,ue2,Db2,Eb2,Fb2,Qk]},Cs={findFiberByHostInstance:Wc2,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"};var Es={bundleType:Cs.bundleType,version:Cs.version,rendererPackageName:Cs.rendererPackageName,rendererConfig:Cs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){n=Zb(n);return null===n?null:n.stateNode},findFiberByHostInstance:Cs.findFiberByHostInstance||jl2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Ss=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ss.isDisabled&&Ss.supportsFiber)try{Ae=Ss.inject(Es),_e=Ss}catch(As){}}m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ks;m.createPortal=function(n,a){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nl2(a))throw Error(p2(200));return cl2(n,a,null,o)};m.createRoot=function(n,a){if(!nl2(n))throw Error(p2(299));var o=!1,i="",u=Ns;null!=a&&(!0===a.unstable_strictMode&&(o=!0),void 0!==a.identifierPrefix&&(i=a.identifierPrefix),void 0!==a.onRecoverableError&&(u=a.onRecoverableError));a=bl2(n,1,!1,null,null,o,!1,i,u);n[_n]=a.current;sf2(8===n.nodeType?n.parentNode:n);return new ll2(a)};m.findDOMNode=function(n){if(null==n)return null;if(1===n.nodeType)return n;var a=n._reactInternals;if(void 0===a){if("function"==typeof n.render)throw Error(p2(188));n=Object.keys(n).join(",");throw Error(p2(268,n))}n=Zb(a);n=null===n?null:n.stateNode;return n};m.flushSync=function(n){return Rk(n)};m.hydrate=function(n,a,o){if(!ol2(a))throw Error(p2(200));return rl2(null,n,a,!0,o)};m.hydrateRoot=function(n,a,o){if(!nl2(n))throw Error(p2(405));var i=null!=o&&o.hydratedSources||null,u=!1,d="",m=Ns;null!=o&&(!0===o.unstable_strictMode&&(u=!0),void 0!==o.identifierPrefix&&(d=o.identifierPrefix),void 0!==o.onRecoverableError&&(m=o.onRecoverableError));a=el2(a,null,n,1,null!=o?o:null,u,!1,d,m);n[_n]=a.current;sf2(n);if(i)for(n=0;n<i.length;n++)o=i[n],u=o._getVersion,u=u(o._source),null==a.mutableSourceEagerHydrationData?a.mutableSourceEagerHydrationData=[o,u]:a.mutableSourceEagerHydrationData.push(o,u);return new ml2(a)};m.render=function(n,a,o){if(!ol2(a))throw Error(p2(200));return rl2(null,n,a,!1,o)};m.unmountComponentAtNode=function(n){if(!ol2(n))throw Error(p2(40));return!!n._reactRootContainer&&(Rk(function(){rl2(null,null,n,!1,function(){n._reactRootContainer=null;n[_n]=null})}),!0)};m.unstable_batchedUpdates=Qk;m.unstable_renderSubtreeIntoContainer=function(n,a,o,i){if(!ol2(o))throw Error(p2(200));if(null==n||void 0===n._reactInternals)throw Error(p2(38));return rl2(n,a,o,!1,i)};m.version="18.3.1-next-f1338f8080-20240426";return m}var k;function requireReactDom(){if(k)return d.exports;k=1;function checkDCE(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(n){console.error(n)}}checkDCE();d.exports=requireReactDom_production_min();return d.exports}var __typeError$1=n=>{throw TypeError(n)};var __accessCheck$1=(n,a,o)=>a.has(n)||__typeError$1("Cannot "+o);var __privateGet$1=(n,a,o)=>(__accessCheck$1(n,a,"read from private field"),o?o.call(n):a.get(n));var __privateAdd$1=(n,a,o)=>a.has(n)?__typeError$1("Cannot add the same private member more than once"):a instanceof WeakSet?a.add(n):a.set(n,o);var __privateSet$1=(n,a,o,i)=>(__accessCheck$1(n,a,"write to private field"),a.set(n,o),o);var __privateMethod$1=(n,a,o)=>(__accessCheck$1(n,a,"access private method"),o);var __privateWrapper$1=(n,a,o,i)=>({set _(o){__privateSet$1(n,a,o)},get _(){return __privateGet$1(n,a,i)}});var E,S,A,_,j,I,O,R,B,M,z,L,D,W,H,q,G,V,Z,Y,J,X,ee,te,ne,re,se,ae,oe,ie,ce,le,ue,de,he,fe,pe,me,ge,ye,be,we,xe,Ne,ke,Ee,Se,Ae,_e,Te,je,Ie,Pe,Oe,Re,Be,Me,ze,Fe,Le,De,$e,Ue,We,He,qe,Ge,Ve,Ke,Ze,Ye,Je,Qe,Xe,et;function _mergeNamespaces(n,a){for(var o=0;o<a.length;o++){const i=a[o];if("string"!=typeof i&&!Array.isArray(i))for(const a in i)if("default"!==a&&!(a in n)){const o=Object.getOwnPropertyDescriptor(i,a);o&&Object.defineProperty(n,a,o.get?o:{enumerable:!0,get:()=>i[a]})}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var tt={exports:{}};var nt={};
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rt;function requireReactJsxRuntime_production_min(){if(rt)return nt;rt=1;var n=requireReact(),a=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,u=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function q2(n,o,m){var g,y={},v=null,x=null;void 0!==m&&(v=""+m);void 0!==o.key&&(v=""+o.key);void 0!==o.ref&&(x=o.ref);for(g in o)i.call(o,g)&&!d.hasOwnProperty(g)&&(y[g]=o[g]);if(n&&n.defaultProps)for(g in o=n.defaultProps,o)void 0===y[g]&&(y[g]=o[g]);return{$$typeof:a,type:n,key:v,ref:x,props:y,_owner:u.current}}nt.Fragment=o;nt.jsx=q2;nt.jsxs=q2;return nt}var st;function requireJsxRuntime(){if(st)return tt.exports;st=1;tt.exports=requireReactJsxRuntime_production_min();return tt.exports}var at=requireJsxRuntime();var ot=requireReact();const it=getDefaultExportFromCjs(ot);const ct=_mergeNamespaces({__proto__:null,default:it},[ot]);const lt="2.33.3";let ut={getDocsUrl:({docsBaseUrl:n,docsPath:a="",docsSlug:o})=>a?`${n??"https://viem.sh"}${a}${o?`#${o}`:""}`:void 0,version:`viem@${lt}`};let dt=class n extends Error{constructor(a,o={}){const i=(()=>o.cause instanceof n?o.cause.details:o.cause?.message?o.cause.message:o.details)();const u=(()=>o.cause instanceof n&&o.cause.docsPath||o.docsPath)();const d=ut.getDocsUrl?.({...o,docsPath:u});const m=[a||"An error occurred.","",...o.metaMessages?[...o.metaMessages,""]:[],...d?[`Docs: ${d}`]:[],...i?[`Details: ${i}`]:[],...ut.version?[`Version: ${ut.version}`]:[]].join("\n");super(m,o.cause?{cause:o.cause}:void 0);Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"});this.details=i;this.docsPath=u;this.metaMessages=o.metaMessages;this.name=o.name??this.name;this.shortMessage=a;this.version=lt}walk(n){return walk$1(this,n)}};function walk$1(n,a){return a?.(n)?n:n&&"object"==typeof n&&"cause"in n&&void 0!==n.cause?walk$1(n.cause,a):a?null:n}let ht=class extends dt{constructor({max:n,min:a,signed:o,size:i,value:u}){super(`Number "${u}" is not in safe ${i?`${8*i}-bit ${o?"signed":"unsigned"} `:""}integer range ${n?`(${a} to ${n})`:`(above ${a})`}`,{name:"IntegerOutOfRangeError"})}};let ft=class extends dt{constructor(n){super(`Bytes value "${n}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}};let pt=class extends dt{constructor(n){super(`Hex value "${n}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}};let mt=class extends dt{constructor({givenSize:n,maxSize:a}){super(`Size cannot exceed ${a} bytes. Given size: ${n} bytes.`,{name:"SizeOverflowError"})}};let gt=class extends dt{constructor({offset:n,position:a,size:o}){super(`Slice ${"start"===a?"starting":"ending"} at offset "${n}" is out-of-bounds (size: ${o}).`,{name:"SliceOffsetOutOfBoundsError"})}};let yt=class extends dt{constructor({size:n,targetSize:a,type:o}){super(`${o.charAt(0).toUpperCase()}${o.slice(1).toLowerCase()} size (${n}) exceeds padding size (${a}).`,{name:"SizeExceedsPaddingSizeError"})}};let bt=class extends dt{constructor({size:n,targetSize:a,type:o}){super(`${o.charAt(0).toUpperCase()}${o.slice(1).toLowerCase()} is expected to be ${a} ${o} long, but is ${n} ${o} long.`,{name:"InvalidBytesLengthError"})}};function pad$2(n,{dir:a,size:o=32}={}){return"string"==typeof n?padHex(n,{dir:a,size:o}):padBytes(n,{dir:a,size:o})}function padHex(n,{dir:a,size:o=32}={}){if(null===o)return n;const i=n.replace("0x","");if(i.length>2*o)throw new yt({size:Math.ceil(i.length/2),targetSize:o,type:"hex"});return`0x${i["right"===a?"padEnd":"padStart"](2*o,"0")}`}function padBytes(n,{dir:a,size:o=32}={}){if(null===o)return n;if(n.length>o)throw new yt({size:n.length,targetSize:o,type:"bytes"});const i=new Uint8Array(o);for(let u=0;u<o;u++){const d="right"===a;i[d?u:o-u-1]=n[d?u:n.length-u-1]}return i}function isHex(n,{strict:a=!0}={}){return!!n&&"string"==typeof n&&(a?/^0x[0-9a-fA-F]*$/.test(n):n.startsWith("0x"))}function size$4(n){return isHex(n,{strict:!1})?Math.ceil((n.length-2)/2):n.length}function trim(n,{dir:a="left"}={}){let o="string"==typeof n?n.replace("0x",""):n;let i=0;for(let u=0;u<o.length-1&&"0"===o["left"===a?u:o.length-u-1].toString();u++)i++;o="left"===a?o.slice(i):o.slice(0,o.length-i);if("string"==typeof n){1===o.length&&"right"===a&&(o=`${o}0`);return`0x${o.length%2==1?`0${o}`:o}`}return o}const vt=new TextEncoder;function toBytes$2(n,a={}){return"number"==typeof n||"bigint"==typeof n?numberToBytes(n,a):"boolean"==typeof n?boolToBytes(n,a):isHex(n)?hexToBytes$1(n,a):stringToBytes(n,a)}function boolToBytes(n,a={}){const o=new Uint8Array(1);o[0]=Number(n);if("number"==typeof a.size){assertSize$2(o,{size:a.size});return pad$2(o,{size:a.size})}return o}const wt={zero:48,nine:57,A:65,F:70,a:97,f:102};function charCodeToBase16$1(n){return n>=wt.zero&&n<=wt.nine?n-wt.zero:n>=wt.A&&n<=wt.F?n-(wt.A-10):n>=wt.a&&n<=wt.f?n-(wt.a-10):void 0}function hexToBytes$1(n,a={}){let o=n;if(a.size){assertSize$2(o,{size:a.size});o=pad$2(o,{dir:"right",size:a.size})}let i=o.slice(2);i.length%2&&(i=`0${i}`);const u=i.length/2;const d=new Uint8Array(u);for(let m=0,g=0;m<u;m++){const n=charCodeToBase16$1(i.charCodeAt(g++));const a=charCodeToBase16$1(i.charCodeAt(g++));if(void 0===n||void 0===a)throw new dt(`Invalid byte sequence ("${i[g-2]}${i[g-1]}" in "${i}").`);d[m]=16*n+a}return d}function numberToBytes(n,a){const o=numberToHex(n,a);return hexToBytes$1(o)}function stringToBytes(n,a={}){const o=vt.encode(n);if("number"==typeof a.size){assertSize$2(o,{size:a.size});return pad$2(o,{dir:"right",size:a.size})}return o}function assertSize$2(n,{size:a}){if(size$4(n)>a)throw new mt({givenSize:size$4(n),maxSize:a})}function hexToBigInt(n,a={}){const{signed:o}=a;a.size&&assertSize$2(n,{size:a.size});const i=BigInt(n);if(!o)return i;const u=(n.length-2)/2;const d=(1n<<8n*BigInt(u)-1n)-1n;return i<=d?i:i-BigInt(`0x${"f".padStart(2*u,"f")}`)-1n}function hexToBool(n,a={}){let o=n;if(a.size){assertSize$2(o,{size:a.size});o=trim(o)}if("0x00"===trim(o))return!1;if("0x01"===trim(o))return!0;throw new pt(o)}function hexToNumber$1(n,a={}){return Number(hexToBigInt(n,a))}function hexToString(n,a={}){let o=hexToBytes$1(n);if(a.size){assertSize$2(o,{size:a.size});o=trim(o,{dir:"right"})}return(new TextDecoder).decode(o)}const xt=Array.from({length:256},(n,a)=>a.toString(16).padStart(2,"0"));function toHex(n,a={}){return"number"==typeof n||"bigint"==typeof n?numberToHex(n,a):"string"==typeof n?stringToHex(n,a):"boolean"==typeof n?boolToHex(n,a):bytesToHex$1(n,a)}function boolToHex(n,a={}){const o=`0x${Number(n)}`;if("number"==typeof a.size){assertSize$2(o,{size:a.size});return pad$2(o,{size:a.size})}return o}function bytesToHex$1(n,a={}){let o="";for(let u=0;u<n.length;u++)o+=xt[n[u]];const i=`0x${o}`;if("number"==typeof a.size){assertSize$2(i,{size:a.size});return pad$2(i,{dir:"right",size:a.size})}return i}function numberToHex(n,a={}){const{signed:o,size:i}=a;const u=BigInt(n);let d;i?d=o?(1n<<8n*BigInt(i)-1n)-1n:2n**(8n*BigInt(i))-1n:"number"==typeof n&&(d=BigInt(Number.MAX_SAFE_INTEGER));const m="bigint"==typeof d&&o?-d-1n:0;if(d&&u>d||u<m){const a="bigint"==typeof n?"n":"";throw new ht({max:d?`${d}${a}`:void 0,min:`${m}${a}`,signed:o,size:i,value:`${n}${a}`})}const g=`0x${(o&&u<0?(1n<<BigInt(8*i))+BigInt(u):u).toString(16)}`;return i?pad$2(g,{size:i}):g}const Nt=new TextEncoder;function stringToHex(n,a={}){const o=Nt.encode(n);return bytesToHex$1(o,a)}function formatAbiItem$1(n,{includeName:a=!1}={}){if("function"!==n.type&&"event"!==n.type&&"error"!==n.type)throw new Gt(n.type);return`${n.name}(${formatAbiParams(n.inputs,{includeName:a})})`}function formatAbiParams(n,{includeName:a=!1}={}){return n?n.map(n=>formatAbiParam(n,{includeName:a})).join(a?", ":","):""}function formatAbiParam(n,{includeName:a}){return n.type.startsWith("tuple")?`(${formatAbiParams(n.components,{includeName:a})})${n.type.slice(5)}`:n.type+(a&&n.name?` ${n.name}`:"")}let kt=class extends dt{constructor({docsPath:n}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join("\n"),{docsPath:n,name:"AbiConstructorNotFoundError"})}};let Ct=class extends dt{constructor({docsPath:n}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join("\n"),{docsPath:n,name:"AbiConstructorParamsNotFoundError"})}};let Et=class extends dt{constructor({data:n,params:a,size:o}){super([`Data size of ${o} bytes is too small for given parameters.`].join("\n"),{metaMessages:[`Params: (${formatAbiParams(a,{includeName:!0})})`,`Data:   ${n} (${o} bytes)`],name:"AbiDecodingDataSizeTooSmallError"});Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this.data=n;this.params=a;this.size=o}};let St=class extends dt{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}};let At=class extends dt{constructor({expectedLength:n,givenLength:a,type:o}){super([`ABI encoding array length mismatch for type ${o}.`,`Expected length: ${n}`,`Given length: ${a}`].join("\n"),{name:"AbiEncodingArrayLengthMismatchError"})}};let _t=class extends dt{constructor({expectedSize:n,value:a}){super(`Size of bytes "${a}" (bytes${size$4(a)}) does not match expected size (bytes${n}).`,{name:"AbiEncodingBytesSizeMismatchError"})}};let Tt=class extends dt{constructor({expectedLength:n,givenLength:a}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${n}`,`Given length (values): ${a}`].join("\n"),{name:"AbiEncodingLengthMismatchError"})}};let jt=class extends dt{constructor(n,{docsPath:a}){super([`Arguments (\`args\`) were provided to "${n}", but "${n}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join("\n"),{docsPath:a,name:"AbiErrorInputsNotFoundError"})}};let It=class extends dt{constructor(n,{docsPath:a}={}){super([`Error ${n?`"${n}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join("\n"),{docsPath:a,name:"AbiErrorNotFoundError"})}};let Pt=class extends dt{constructor(n,{docsPath:a}){super([`Encoded error signature "${n}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${n}.`].join("\n"),{docsPath:a,name:"AbiErrorSignatureNotFoundError"});Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this.signature=n}};let Ot=class extends dt{constructor({docsPath:n}){super("Cannot extract event signature from empty topics.",{docsPath:n,name:"AbiEventSignatureEmptyTopicsError"})}};let Rt=class extends dt{constructor(n,{docsPath:a}){super([`Encoded event signature "${n}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${n}.`].join("\n"),{docsPath:a,name:"AbiEventSignatureNotFoundError"})}};let Bt=class extends dt{constructor(n,{docsPath:a}={}){super([`Event ${n?`"${n}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join("\n"),{docsPath:a,name:"AbiEventNotFoundError"})}};let Mt=class extends dt{constructor(n,{docsPath:a}={}){super([`Function ${n?`"${n}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:a,name:"AbiFunctionNotFoundError"})}};let zt=class extends dt{constructor(n,{docsPath:a}){super([`Function "${n}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:a,name:"AbiFunctionOutputsNotFoundError"})}};let Ft=class extends dt{constructor(n,{docsPath:a}){super([`Encoded function signature "${n}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${n}.`].join("\n"),{docsPath:a,name:"AbiFunctionSignatureNotFoundError"})}};let Lt=class extends dt{constructor(n,a){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${n.type}\` in \`${formatAbiItem$1(n.abiItem)}\`, and`,`\`${a.type}\` in \`${formatAbiItem$1(a.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}};let Dt=class extends dt{constructor({expectedSize:n,givenSize:a}){super(`Expected bytes${n}, got bytes${a}.`,{name:"BytesSizeMismatchError"})}};let $t=class extends dt{constructor({abiItem:n,data:a,params:o,size:i}){super([`Data size of ${i} bytes is too small for non-indexed event parameters.`].join("\n"),{metaMessages:[`Params: (${formatAbiParams(o,{includeName:!0})})`,`Data:   ${a} (${i} bytes)`],name:"DecodeLogDataMismatch"});Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this.abiItem=n;this.data=a;this.params=o;this.size=i}};let Ut=class extends dt{constructor({abiItem:n,param:a}){super([`Expected a topic for indexed event parameter${a.name?` "${a.name}"`:""} on event "${formatAbiItem$1(n,{includeName:!0})}".`].join("\n"),{name:"DecodeLogTopicsMismatch"});Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this.abiItem=n}};let Wt=class extends dt{constructor(n,{docsPath:a}){super([`Type "${n}" is not a valid encoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:a,name:"InvalidAbiEncodingType"})}};let Ht=class extends dt{constructor(n,{docsPath:a}){super([`Type "${n}" is not a valid decoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:a,name:"InvalidAbiDecodingType"})}};let qt=class extends dt{constructor(n){super([`Value "${n}" is not a valid array.`].join("\n"),{name:"InvalidArrayError"})}};let Gt=class extends dt{constructor(n){super([`"${n}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join("\n"),{name:"InvalidDefinitionTypeError"})}};let Vt=class extends dt{constructor(n){super(`Type "${n}" is not supported for packed encoding.`,{name:"UnsupportedPackedAbiType"})}};function concat$1(n){return"string"==typeof n[0]?concatHex(n):concatBytes$1$1(n)}function concatBytes$1$1(n){let a=0;for(const u of n)a+=u.length;const o=new Uint8Array(a);let i=0;for(const u of n){o.set(u,i);i+=u.length}return o}function concatHex(n){return`0x${n.reduce((n,a)=>n+a.replace("0x",""),"")}`}let Kt=class extends dt{constructor({address:n}){super(`Address "${n}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}};let Zt=class extends Map{constructor(n){super();Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this.maxSize=n}get(n){const a=super.get(n);if(super.has(n)&&void 0!==a){this.delete(n);super.set(n,a)}return a}set(n,a){super.set(n,a);if(this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}};const Yt=BigInt(2**32-1);const Jt=BigInt(32);function fromBig$1(n,a=!1){return a?{h:Number(n&Yt),l:Number(n>>Jt&Yt)}:{h:0|Number(n>>Jt&Yt),l:0|Number(n&Yt)}}function split$1$1(n,a=!1){const o=n.length;let i=new Uint32Array(o);let u=new Uint32Array(o);for(let d=0;d<o;d++){const{h:o,l:m}=fromBig$1(n[d],a);[i[d],u[d]]=[o,m]}return[i,u]}const rotlSH$1=(n,a,o)=>n<<o|a>>>32-o;const rotlSL$1=(n,a,o)=>a<<o|n>>>32-o;const rotlBH$1=(n,a,o)=>a<<o-32|n>>>64-o;const rotlBL$1=(n,a,o)=>n<<o-32|a>>>64-o;const Qt="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function isBytes$1(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name}function anumber$1(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function abytes$1(n,...a){if(!isBytes$1(n))throw new Error("Uint8Array expected");if(a.length>0&&!a.includes(n.length))throw new Error("Uint8Array expected of length "+a+", got length="+n.length)}function ahash(n){if("function"!=typeof n||"function"!=typeof n.create)throw new Error("Hash should be wrapped by utils.createHasher");anumber$1(n.outputLen);anumber$1(n.blockLen)}function aexists$1(n,a=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(a&&n.finished)throw new Error("Hash#digest() has already been called")}function aoutput$1(n,a){abytes$1(n);const o=a.outputLen;if(n.length<o)throw new Error("digestInto() expects output buffer of length at least "+o)}function u32$1(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function clean$1(...n){for(let a=0;a<n.length;a++)n[a].fill(0)}function createView$1(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function rotr$1(n,a){return n<<32-a|n>>>a}const Xt=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])();function byteSwap$1(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function byteSwap32$1(n){for(let a=0;a<n.length;a++)n[a]=byteSwap$1(n[a]);return n}const en=Xt?n=>n:byteSwap32$1;const tn=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)();const nn=Array.from({length:256},(n,a)=>a.toString(16).padStart(2,"0"));function bytesToHex$2(n){abytes$1(n);if(tn)return n.toHex();let a="";for(let o=0;o<n.length;o++)a+=nn[n[o]];return a}const rn={_0:48,_9:57,A:65,F:70,a:97,f:102};function asciiToBase16(n){return n>=rn._0&&n<=rn._9?n-rn._0:n>=rn.A&&n<=rn.F?n-(rn.A-10):n>=rn.a&&n<=rn.f?n-(rn.a-10):void 0}function hexToBytes$2(n){if("string"!=typeof n)throw new Error("hex string expected, got "+typeof n);if(tn)return Uint8Array.fromHex(n);const a=n.length;const o=a/2;if(a%2)throw new Error("hex string expected, got unpadded hex of length "+a);const i=new Uint8Array(o);for(let u=0,d=0;u<o;u++,d+=2){const a=asciiToBase16(n.charCodeAt(d));const o=asciiToBase16(n.charCodeAt(d+1));if(void 0===a||void 0===o){const a=n[d]+n[d+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+d)}i[u]=16*a+o}return i}function utf8ToBytes$1$1(n){if("string"!=typeof n)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(n))}function toBytes$1(n){"string"==typeof n&&(n=utf8ToBytes$1$1(n));abytes$1(n);return n}function concatBytes$2(...n){let a=0;for(let i=0;i<n.length;i++){const o=n[i];abytes$1(o);a+=o.length}const o=new Uint8Array(a);for(let i=0,u=0;i<n.length;i++){const a=n[i];o.set(a,u);u+=a.length}return o}let sn=class{};function createHasher$1(n){const hashC=a=>n().update(toBytes$1(a)).digest();const a=n();hashC.outputLen=a.outputLen;hashC.blockLen=a.blockLen;hashC.create=()=>n();return hashC}function randomBytes$1(n=32){if(Qt&&"function"==typeof Qt.getRandomValues)return Qt.getRandomValues(new Uint8Array(n));if(Qt&&"function"==typeof Qt.randomBytes)return Uint8Array.from(Qt.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}const an=BigInt(0);const on=BigInt(1);const cn=BigInt(2);const ln=BigInt(7);const un=BigInt(256);const dn=BigInt(113);const hn=[];const fn=[];const pn=[];for(let sL=0,aL=on,oL=1,iL=0;sL<24;sL++){[oL,iL]=[iL,(2*oL+3*iL)%5];hn.push(2*(5*iL+oL));fn.push((sL+1)*(sL+2)/2%64);let n=an;for(let a=0;a<7;a++){aL=(aL<<on^(aL>>ln)*dn)%un;aL&cn&&(n^=on<<(on<<BigInt(a))-on)}pn.push(n)}const mn=split$1$1(pn,!0);const gn=mn[0];const yn=mn[1];const rotlH$1=(n,a,o)=>o>32?rotlBH$1(n,a,o):rotlSH$1(n,a,o);const rotlL$1=(n,a,o)=>o>32?rotlBL$1(n,a,o):rotlSL$1(n,a,o);function keccakP$1(n,a=24){const o=new Uint32Array(10);for(let i=24-a;i<24;i++){for(let i=0;i<10;i++)o[i]=n[i]^n[i+10]^n[i+20]^n[i+30]^n[i+40];for(let i=0;i<10;i+=2){const a=(i+8)%10;const u=(i+2)%10;const d=o[u];const m=o[u+1];const g=rotlH$1(d,m,1)^o[a];const y=rotlL$1(d,m,1)^o[a+1];for(let o=0;o<50;o+=10){n[i+o]^=g;n[i+o+1]^=y}}let a=n[2];let u=n[3];for(let o=0;o<24;o++){const i=fn[o];const d=rotlH$1(a,u,i);const m=rotlL$1(a,u,i);const g=hn[o];a=n[g];u=n[g+1];n[g]=d;n[g+1]=m}for(let i=0;i<50;i+=10){for(let a=0;a<10;a++)o[a]=n[i+a];for(let a=0;a<10;a++)n[i+a]^=~o[(a+2)%10]&o[(a+4)%10]}n[0]^=gn[i];n[1]^=yn[i]}clean$1(o)}let bn=class n extends sn{constructor(n,a,o,i=!1,u=24){super();this.pos=0;this.posOut=0;this.finished=!1;this.destroyed=!1;this.enableXOF=!1;this.blockLen=n;this.suffix=a;this.outputLen=o;this.enableXOF=i;this.rounds=u;anumber$1(o);if(!(0<n&&n<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200);this.state32=u32$1(this.state)}clone(){return this._cloneInto()}keccak(){en(this.state32);keccakP$1(this.state32,this.rounds);en(this.state32);this.posOut=0;this.pos=0}update(n){aexists$1(this);n=toBytes$1(n);abytes$1(n);const{blockLen:a,state:o}=this;const i=n.length;for(let u=0;u<i;){const d=Math.min(a-this.pos,i-u);for(let a=0;a<d;a++)o[this.pos++]^=n[u++];this.pos===a&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:n,suffix:a,pos:o,blockLen:i}=this;n[o]^=a;128&a&&o===i-1&&this.keccak();n[i-1]^=128;this.keccak()}writeInto(n){aexists$1(this,!1);abytes$1(n);this.finish();const a=this.state;const{blockLen:o}=this;for(let i=0,u=n.length;i<u;){this.posOut>=o&&this.keccak();const d=Math.min(o-this.posOut,u-i);n.set(a.subarray(this.posOut,this.posOut+d),i);this.posOut+=d;i+=d}return n}xofInto(n){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(n)}xof(n){anumber$1(n);return this.xofInto(new Uint8Array(n))}digestInto(n){aoutput$1(n,this);if(this.finished)throw new Error("digest() was already called");this.writeInto(n);this.destroy();return n}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0;clean$1(this.state)}_cloneInto(a){const{blockLen:o,suffix:i,outputLen:u,rounds:d,enableXOF:m}=this;a||(a=new n(o,i,u,m,d));a.state32.set(this.state32);a.pos=this.pos;a.posOut=this.posOut;a.finished=this.finished;a.rounds=d;a.suffix=i;a.outputLen=u;a.enableXOF=m;a.destroyed=this.destroyed;return a}};const gen$1=(n,a,o)=>createHasher$1(()=>new bn(a,n,o));const vn=(()=>gen$1(1,136,32))();function keccak256$1(n,a){const o=a||"hex";const i=vn(isHex(n,{strict:!1})?toBytes$2(n):n);return"bytes"===o?i:toHex(i)}const wn=new Zt(8192);function checksumAddress(n,a){if(wn.has(`${n}.${a}`))return wn.get(`${n}.${a}`);const o=a?`${a}${n.toLowerCase()}`:n.substring(2).toLowerCase();const i=keccak256$1(stringToBytes(o),"bytes");const u=(a?o.substring(`${a}0x`.length):o).split("");for(let m=0;m<40;m+=2){i[m>>1]>>4>=8&&u[m]&&(u[m]=u[m].toUpperCase());(15&i[m>>1])>=8&&u[m+1]&&(u[m+1]=u[m+1].toUpperCase())}const d=`0x${u.join("")}`;wn.set(`${n}.${a}`,d);return d}function getAddress$2(n,a){if(!isAddress$1(n,{strict:!1}))throw new Kt({address:n});return checksumAddress(n,a)}const xn=/^0x[a-fA-F0-9]{40}$/;const Nn=new Zt(8192);function isAddress$1(n,a){const{strict:o=!0}=a??{};const i=`${n}.${o}`;if(Nn.has(i))return Nn.get(i);const u=(()=>!(!xn.test(n)||n.toLowerCase()!==n&&o&&checksumAddress(n)!==n))();Nn.set(i,u);return u}function slice$1(n,a,o,{strict:i}={}){return isHex(n,{strict:!1})?sliceHex(n,a,o,{strict:i}):sliceBytes(n,a,o,{strict:i})}function assertStartOffset$1(n,a){if("number"==typeof a&&a>0&&a>size$4(n)-1)throw new gt({offset:a,position:"start",size:size$4(n)})}function assertEndOffset$1(n,a,o){if("number"==typeof a&&"number"==typeof o&&size$4(n)!==o-a)throw new gt({offset:o,position:"end",size:size$4(n)})}function sliceBytes(n,a,o,{strict:i}={}){assertStartOffset$1(n,a);const u=n.slice(a,o);i&&assertEndOffset$1(u,a,o);return u}function sliceHex(n,a,o,{strict:i}={}){assertStartOffset$1(n,a);const u=`0x${n.replace("0x","").slice(2*(a??0),2*(o??n.length))}`;i&&assertEndOffset$1(u,a,o);return u}const kn=/^(.*)\[([0-9]*)\]$/;const Cn=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/;const En=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function encodeAbiParameters(n,a){if(n.length!==a.length)throw new Tt({expectedLength:n.length,givenLength:a.length});const o=prepareParams({params:n,values:a});const i=encodeParams(o);return 0===i.length?"0x":i}function prepareParams({params:n,values:a}){const o=[];for(let i=0;i<n.length;i++)o.push(prepareParam({param:n[i],value:a[i]}));return o}function prepareParam({param:n,value:a}){const o=getArrayComponents$1(n.type);if(o){const[i,u]=o;return encodeArray$1(a,{length:i,param:{...n,type:u}})}if("tuple"===n.type)return encodeTuple$1(a,{param:n});if("address"===n.type)return encodeAddress$1(a);if("bool"===n.type)return encodeBool(a);if(n.type.startsWith("uint")||n.type.startsWith("int")){const o=n.type.startsWith("int");const[,,i="256"]=En.exec(n.type)??[];return encodeNumber$1(a,{signed:o,size:Number(i)})}if(n.type.startsWith("bytes"))return encodeBytes$1(a,{param:n});if("string"===n.type)return encodeString$1(a);throw new Wt(n.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function encodeParams(n){let a=0;for(let d=0;d<n.length;d++){const{dynamic:o,encoded:i}=n[d];a+=o?32:size$4(i)}const o=[];const i=[];let u=0;for(let d=0;d<n.length;d++){const{dynamic:m,encoded:g}=n[d];if(m){o.push(numberToHex(a+u,{size:32}));i.push(g);u+=size$4(g)}else o.push(g)}return concat$1([...o,...i])}function encodeAddress$1(n){if(!isAddress$1(n))throw new Kt({address:n});return{dynamic:!1,encoded:padHex(n.toLowerCase())}}function encodeArray$1(n,{length:a,param:o}){const i=null===a;if(!Array.isArray(n))throw new qt(n);if(!i&&n.length!==a)throw new At({expectedLength:a,givenLength:n.length,type:`${o.type}[${a}]`});let u=!1;const d=[];for(let m=0;m<n.length;m++){const a=prepareParam({param:o,value:n[m]});a.dynamic&&(u=!0);d.push(a)}if(i||u){const n=encodeParams(d);if(i){const a=numberToHex(d.length,{size:32});return{dynamic:!0,encoded:d.length>0?concat$1([a,n]):a}}if(u)return{dynamic:!0,encoded:n}}return{dynamic:!1,encoded:concat$1(d.map(({encoded:n})=>n))}}function encodeBytes$1(n,{param:a}){const[,o]=a.type.split("bytes");const i=size$4(n);if(!o){let a=n;i%32!=0&&(a=padHex(a,{dir:"right",size:32*Math.ceil((n.length-2)/2/32)}));return{dynamic:!0,encoded:concat$1([padHex(numberToHex(i,{size:32})),a])}}if(i!==Number.parseInt(o))throw new _t({expectedSize:Number.parseInt(o),value:n});return{dynamic:!1,encoded:padHex(n,{dir:"right"})}}function encodeBool(n){if("boolean"!=typeof n)throw new dt(`Invalid boolean value: "${n}" (type: ${typeof n}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:padHex(boolToHex(n))}}function encodeNumber$1(n,{signed:a,size:o=256}){if("number"==typeof o){const i=2n**(BigInt(o)-(a?1n:0n))-1n;const u=a?-i-1n:0n;if(n>i||n<u)throw new ht({max:i.toString(),min:u.toString(),signed:a,size:o/8,value:n.toString()})}return{dynamic:!1,encoded:numberToHex(n,{size:32,signed:a})}}function encodeString$1(n){const a=stringToHex(n);const o=Math.ceil(size$4(a)/32);const i=[];for(let u=0;u<o;u++)i.push(padHex(slice$1(a,32*u,32*(u+1)),{dir:"right"}));return{dynamic:!0,encoded:concat$1([padHex(numberToHex(size$4(a),{size:32})),...i])}}function encodeTuple$1(n,{param:a}){let o=!1;const i=[];for(let u=0;u<a.components.length;u++){const d=a.components[u];const m=Array.isArray(n)?u:d.name;const g=prepareParam({param:d,value:n[m]});i.push(g);g.dynamic&&(o=!0)}return{dynamic:o,encoded:o?encodeParams(i):concat$1(i.map(({encoded:n})=>n))}}function getArrayComponents$1(n){const a=n.match(/^(.*)\[(\d+)?\]$/);return a?[a[2]?Number(a[2]):null,a[1]]:void 0}const Sn="/docs/contract/encodeDeployData";function encodeDeployData(n){const{abi:a,args:o,bytecode:i}=n;if(!o||0===o.length)return i;const u=a.find(n=>"type"in n&&"constructor"===n.type);if(!u)throw new kt({docsPath:Sn});if(!("inputs"in u))throw new Ct({docsPath:Sn});if(!u.inputs||0===u.inputs.length)throw new Ct({docsPath:Sn});const d=encodeAbiParameters(u.inputs,o);return concatHex([i,d])}function parseAccount(n){return"string"==typeof n?{address:n,type:"json-rpc"}:n}let An=class extends dt{constructor({docsPath:n}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join("\n"),{docsPath:n,docsSlug:"account",name:"AccountNotFoundError"})}};let _n=class extends dt{constructor({docsPath:n,metaMessages:a,type:o}){super(`Account type "${o}" is not supported.`,{docsPath:n,metaMessages:a,name:"AccountTypeNotSupportedError"})}};function publicKeyToAddress(n){const a=keccak256$1(`0x${n.substring(4)}`).substring(26);return checksumAddress(`0x${a}`)}const Tn="modulepreload";const assetsURL=function(n){return"/"+n};const jn={};const __vitePreload=function(n,a,o){let i=Promise.resolve();if(a&&a.length>0){let allSettled2=function(n){return Promise.all(n.map(n=>Promise.resolve(n).then(n=>({status:"fulfilled",value:n}),n=>({status:"rejected",reason:n}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]");const o=n?.nonce||n?.getAttribute("nonce");i=allSettled2(a.map(n=>{n=assetsURL(n);if(n in jn)return;jn[n]=!0;const a=n.endsWith(".css");const i=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${i}`))return;const u=document.createElement("link");u.rel=a?"stylesheet":Tn;a||(u.as="script");u.crossOrigin="";u.href=n;o&&u.setAttribute("nonce",o);document.head.appendChild(u);return a?new Promise((a,o)=>{u.addEventListener("load",a);u.addEventListener("error",()=>o(new Error(`Unable to preload CSS for ${n}`)))}):void 0}))}function handlePreloadError(n){const a=new Event("vite:preloadError",{cancelable:!0});a.payload=n;window.dispatchEvent(a);if(!a.defaultPrevented)throw n}return i.then(a=>{for(const n of a||[])"rejected"===n.status&&handlePreloadError(n.reason);return n().catch(handlePreloadError)})};async function recoverPublicKey({hash:n,signature:a}){const o=isHex(n)?n:toHex(n);const{secp256k1:i}=await __vitePreload(async()=>{const{secp256k1:n}=await Promise.resolve().then(()=>Ri);return{secp256k1:n}},void 0);const u=(()=>{if("object"==typeof a&&"r"in a&&"s"in a){const{r:n,s:o,v:u,yParity:d}=a;const m=Number(d??u);const g=toRecoveryBit(m);return new i.Signature(hexToBigInt(n),hexToBigInt(o)).addRecoveryBit(g)}const n=isHex(a)?a:toHex(a);if(65!==size$4(n))throw new Error("invalid signature length");const o=hexToNumber$1(`0x${n.slice(130)}`);const u=toRecoveryBit(o);return i.Signature.fromCompact(n.substring(2,130)).addRecoveryBit(u)})();const d=u.recoverPublicKey(o.substring(2)).toHex(!1);return`0x${d}`}function toRecoveryBit(n){if(0===n||1===n)return n;if(27===n)return 0;if(28===n)return 1;throw new Error("Invalid yParityOrV value")}async function recoverAddress$1({hash:n,signature:a}){return publicKeyToAddress(await recoverPublicKey({hash:n,signature:a}))}let In=class extends dt{constructor({offset:n}){super(`Offset \`${n}\` cannot be negative.`,{name:"NegativeOffsetError"})}};let Pn=class extends dt{constructor({length:n,position:a}){super(`Position \`${a}\` is out of bounds (\`0 < position < ${n}\`).`,{name:"PositionOutOfBoundsError"})}};let On=class extends dt{constructor({count:n,limit:a}){super(`Recursive read limit of \`${a}\` exceeded (recursive read count: \`${n}\`).`,{name:"RecursiveReadLimitExceededError"})}};const Rn={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new On({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(n){if(n<0||n>this.bytes.length-1)throw new Pn({length:this.bytes.length,position:n})},decrementPosition(n){if(n<0)throw new In({offset:n});const a=this.position-n;this.assertPosition(a);this.position=a},getReadCount(n){return this.positionReadCount.get(n||this.position)||0},incrementPosition(n){if(n<0)throw new In({offset:n});const a=this.position+n;this.assertPosition(a);this.position=a},inspectByte(n){const a=n??this.position;this.assertPosition(a);return this.bytes[a]},inspectBytes(n,a){const o=a??this.position;this.assertPosition(o+n-1);return this.bytes.subarray(o,o+n)},inspectUint8(n){const a=n??this.position;this.assertPosition(a);return this.bytes[a]},inspectUint16(n){const a=n??this.position;this.assertPosition(a+1);return this.dataView.getUint16(a)},inspectUint24(n){const a=n??this.position;this.assertPosition(a+2);return(this.dataView.getUint16(a)<<8)+this.dataView.getUint8(a+2)},inspectUint32(n){const a=n??this.position;this.assertPosition(a+3);return this.dataView.getUint32(a)},pushByte(n){this.assertPosition(this.position);this.bytes[this.position]=n;this.position++},pushBytes(n){this.assertPosition(this.position+n.length-1);this.bytes.set(n,this.position);this.position+=n.length},pushUint8(n){this.assertPosition(this.position);this.bytes[this.position]=n;this.position++},pushUint16(n){this.assertPosition(this.position+1);this.dataView.setUint16(this.position,n);this.position+=2},pushUint24(n){this.assertPosition(this.position+2);this.dataView.setUint16(this.position,n>>8);this.dataView.setUint8(this.position+2,255&n);this.position+=3},pushUint32(n){this.assertPosition(this.position+3);this.dataView.setUint32(this.position,n);this.position+=4},readByte(){this.assertReadLimit();this._touch();const n=this.inspectByte();this.position++;return n},readBytes(n,a){this.assertReadLimit();this._touch();const o=this.inspectBytes(n);this.position+=a??n;return o},readUint8(){this.assertReadLimit();this._touch();const n=this.inspectUint8();this.position+=1;return n},readUint16(){this.assertReadLimit();this._touch();const n=this.inspectUint16();this.position+=2;return n},readUint24(){this.assertReadLimit();this._touch();const n=this.inspectUint24();this.position+=3;return n},readUint32(){this.assertReadLimit();this._touch();const n=this.inspectUint32();this.position+=4;return n},get remaining(){return this.bytes.length-this.position},setPosition(n){const a=this.position;this.assertPosition(n);this.position=n;return()=>this.position=a},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const n=this.getReadCount();this.positionReadCount.set(this.position,n+1);n>0&&this.recursiveReadCount++}};function createCursor(n,{recursiveReadLimit:a=8192}={}){const o=Object.create(Rn);o.bytes=n;o.dataView=new DataView(n.buffer,n.byteOffset,n.byteLength);o.positionReadCount=new Map;o.recursiveReadLimit=a;return o}function toRlp(n,a="hex"){const o=getEncodable(n);const i=createCursor(new Uint8Array(o.length));o.encode(i);return"hex"===a?bytesToHex$1(i.bytes):i.bytes}function getEncodable(n){return Array.isArray(n)?getEncodableList(n.map(n=>getEncodable(n))):getEncodableBytes(n)}function getEncodableList(n){const a=n.reduce((n,a)=>n+a.length,0);const o=getSizeOfLength(a);const i=(()=>a<=55?1+a:1+o+a)();return{length:i,encode(i){if(a<=55)i.pushByte(192+a);else{i.pushByte(247+o);1===o?i.pushUint8(a):2===o?i.pushUint16(a):3===o?i.pushUint24(a):i.pushUint32(a)}for(const{encode:a}of n)a(i)}}}function getEncodableBytes(n){const a="string"==typeof n?hexToBytes$1(n):n;const o=getSizeOfLength(a.length);const i=(()=>1===a.length&&a[0]<128?1:a.length<=55?1+a.length:1+o+a.length)();return{length:i,encode(n){if(1===a.length&&a[0]<128)n.pushBytes(a);else if(a.length<=55){n.pushByte(128+a.length);n.pushBytes(a)}else{n.pushByte(183+o);1===o?n.pushUint8(a.length):2===o?n.pushUint16(a.length):3===o?n.pushUint24(a.length):n.pushUint32(a.length);n.pushBytes(a)}}}}function getSizeOfLength(n){if(n<256)return 1;if(n<65536)return 2;if(n<2**24)return 3;if(n<2**32)return 4;throw new dt("Length is too large.")}function hashAuthorization(n){const{chainId:a,nonce:o,to:i}=n;const u=n.contractAddress??n.address;const d=keccak256$1(concatHex(["0x05",toRlp([a?numberToHex(a):"0x",u,o?numberToHex(o):"0x"])]));return"bytes"===i?hexToBytes$1(d):d}async function recoverAuthorizationAddress(n){const{authorization:a,signature:o}=n;return recoverAddress$1({hash:hashAuthorization(a),signature:o??a})}let Bn=class extends dt{constructor({blockNumber:n,chain:a,contract:o}){super(`Chain "${a.name}" does not support contract "${o.name}".`,{metaMessages:["This could be due to any of the following:",...n&&o.blockCreated&&o.blockCreated>n?[`- The contract "${o.name}" was not deployed until block ${o.blockCreated} (current block ${n}).`]:[`- The chain does not have the contract "${o.name}" configured.`]],name:"ChainDoesNotSupportContract"})}};let Mn=class extends dt{constructor({chain:n,currentChainId:a}){super(`The current chain of the wallet (id: ${a}) does not match the target chain for the transaction (id: ${n.id} – ${n.name}).`,{metaMessages:[`Current Chain ID:  ${a}`,`Expected Chain ID: ${n.id} – ${n.name}`],name:"ChainMismatchError"})}};let zn=class extends dt{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join("\n"),{name:"ChainNotFoundError"})}};let Fn=class extends dt{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}};function assertCurrentChain({chain:n,currentChainId:a}){if(!n)throw new zn;if(a!==n.id)throw new Mn({chain:n,currentChainId:a})}const Ln={gwei:9,wei:18};const Dn={ether:-9,wei:9};const $n={ether:-18,gwei:-9};function formatUnits$1(n,a){let o=n.toString();const i=o.startsWith("-");i&&(o=o.slice(1));o=o.padStart(a,"0");let[u,d]=[o.slice(0,o.length-a),o.slice(o.length-a)];d=d.replace(/(0+)$/,"");return`${i?"-":""}${u||"0"}${d?`.${d}`:""}`}function formatGwei(n,a="wei"){return formatUnits$1(n,Dn[a])}let Un=class extends dt{constructor({cause:n,message:a}={}){const o=a?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${o?`with reason: ${o}`:"for an unknown reason"}.`,{cause:n,name:"ExecutionRevertedError"})}};Object.defineProperty(Un,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Un,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});let Wn=class extends dt{constructor({cause:n,maxFeePerGas:a}={}){super(`The fee cap (\`maxFeePerGas\`${a?` = ${formatGwei(a)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:n,name:"FeeCapTooHighError"})}};Object.defineProperty(Wn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});let Hn=class extends dt{constructor({cause:n,maxFeePerGas:a}={}){super(`The fee cap (\`maxFeePerGas\`${a?` = ${formatGwei(a)}`:""} gwei) cannot be lower than the block base fee.`,{cause:n,name:"FeeCapTooLowError"})}};Object.defineProperty(Hn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});let qn=class extends dt{constructor({cause:n,nonce:a}={}){super(`Nonce provided for the transaction ${a?`(${a}) `:""}is higher than the next one expected.`,{cause:n,name:"NonceTooHighError"})}};Object.defineProperty(qn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});let Gn=class extends dt{constructor({cause:n,nonce:a}={}){super([`Nonce provided for the transaction ${a?`(${a}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join("\n"),{cause:n,name:"NonceTooLowError"})}};Object.defineProperty(Gn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});let Vn=class extends dt{constructor({cause:n,nonce:a}={}){super(`Nonce provided for the transaction ${a?`(${a}) `:""}exceeds the maximum allowed nonce.`,{cause:n,name:"NonceMaxValueError"})}};Object.defineProperty(Vn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});let Kn=class extends dt{constructor({cause:n}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join("\n"),{cause:n,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}};Object.defineProperty(Kn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});let Zn=class extends dt{constructor({cause:n,gas:a}={}){super(`The amount of gas ${a?`(${a}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:n,name:"IntrinsicGasTooHighError"})}};Object.defineProperty(Zn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});let Yn=class extends dt{constructor({cause:n,gas:a}={}){super(`The amount of gas ${a?`(${a}) `:""}provided for the transaction is too low.`,{cause:n,name:"IntrinsicGasTooLowError"})}};Object.defineProperty(Yn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});let Jn=class extends dt{constructor({cause:n}){super("The transaction type is not supported for this chain.",{cause:n,name:"TransactionTypeNotSupportedError"})}};Object.defineProperty(Jn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});let Qn=class extends dt{constructor({cause:n,maxPriorityFeePerGas:a,maxFeePerGas:o}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${a?` = ${formatGwei(a)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${o?` = ${formatGwei(o)} gwei`:""}).`].join("\n"),{cause:n,name:"TipAboveFeeCapError"})}};Object.defineProperty(Qn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});let Xn=class extends dt{constructor({cause:n}){super(`An error occurred while executing: ${n?.shortMessage}`,{cause:n,name:"UnknownNodeError"})}};function formatEther$1(n,a="wei"){return formatUnits$1(n,Ln[a])}function prettyPrint(n){const a=Object.entries(n).map(([n,a])=>void 0===a||!1===a?null:[n,a]).filter(Boolean);const o=a.reduce((n,[a])=>Math.max(n,a.length),0);return a.map(([n,a])=>`  ${`${n}:`.padEnd(o+1)}  ${a}`).join("\n")}let er=class extends dt{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join("\n"),{name:"FeeConflictError"})}};let tr=class extends dt{constructor({transaction:n}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",prettyPrint(n),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}};let nr=class extends dt{constructor(n,{account:a,docsPath:o,chain:i,data:u,gas:d,gasPrice:m,maxFeePerGas:g,maxPriorityFeePerGas:y,nonce:v,to:x,value:N}){const k=prettyPrint({chain:i&&`${i?.name} (id: ${i?.id})`,from:a?.address,to:x,value:"undefined"!=typeof N&&`${formatEther$1(N)} ${i?.nativeCurrency?.symbol||"ETH"}`,data:u,gas:d,gasPrice:"undefined"!=typeof m&&`${formatGwei(m)} gwei`,maxFeePerGas:"undefined"!=typeof g&&`${formatGwei(g)} gwei`,maxPriorityFeePerGas:"undefined"!=typeof y&&`${formatGwei(y)} gwei`,nonce:v});super(n.shortMessage,{cause:n,docsPath:o,metaMessages:[...n.metaMessages?[...n.metaMessages," "]:[],"Request Arguments:",k].filter(Boolean),name:"TransactionExecutionError"});Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this.cause=n}};let rr=class extends dt{constructor({blockHash:n,blockNumber:a,blockTag:o,hash:i,index:u}){let d="Transaction";o&&void 0!==u&&(d=`Transaction at block time "${o}" at index "${u}"`);n&&void 0!==u&&(d=`Transaction at block hash "${n}" at index "${u}"`);a&&void 0!==u&&(d=`Transaction at block number "${a}" at index "${u}"`);i&&(d=`Transaction with hash "${i}"`);super(`${d} could not be found.`,{name:"TransactionNotFoundError"})}};let sr=class extends dt{constructor({hash:n}){super(`Transaction receipt with hash "${n}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}};let ar=class extends dt{constructor({hash:n}){super(`Timed out while waiting for transaction with hash "${n}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}};const stringify$1$1=(n,a,o)=>JSON.stringify(n,(n,a)=>{const o="bigint"==typeof a?a.toString():a;return o},o);const getContractAddress=n=>n;const getUrl=n=>n;let or=class extends dt{constructor({body:n,cause:a,details:o,headers:i,status:u,url:d}){super("HTTP request failed.",{cause:a,details:o,metaMessages:[u&&`Status: ${u}`,`URL: ${getUrl(d)}`,n&&`Request body: ${stringify$1$1(n)}`].filter(Boolean),name:"HttpRequestError"});Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this.body=n;this.headers=i;this.status=u;this.url=d}};let ir=class extends dt{constructor({body:n,error:a,url:o}){super("RPC Request failed.",{cause:a,details:a.message,metaMessages:[`URL: ${getUrl(o)}`,`Request body: ${stringify$1$1(n)}`],name:"RpcRequestError"});Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this.code=a.code;this.data=a.data}};let cr=class extends dt{constructor({body:n,url:a}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${getUrl(a)}`,`Request body: ${stringify$1$1(n)}`],name:"TimeoutError"})}};const lr=-1;let ur=class extends dt{constructor(n,{code:a,docsPath:o,metaMessages:i,name:u,shortMessage:d}){super(d,{cause:n,docsPath:o,metaMessages:i||n?.metaMessages,name:u||"RpcError"});Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this.name=u||n.name;this.code=n instanceof ir?n.code:a??lr}};let dr=class extends ur{constructor(n,a){super(n,a);Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this.data=a.data}};let hr=class n extends ur{constructor(a){super(a,{code:n.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}};Object.defineProperty(hr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});let fr=class n extends ur{constructor(a){super(a,{code:n.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}};Object.defineProperty(fr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});let pr=class n extends ur{constructor(a,{method:o}={}){super(a,{code:n.code,name:"MethodNotFoundRpcError",shortMessage:`The method${o?` "${o}"`:""} does not exist / is not available.`})}};Object.defineProperty(pr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});let mr=class n extends ur{constructor(a){super(a,{code:n.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join("\n")})}};Object.defineProperty(mr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});let gr=class n extends ur{constructor(a){super(a,{code:n.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}};Object.defineProperty(gr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});let yr=class n extends ur{constructor(a){super(a,{code:n.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join("\n")})}};Object.defineProperty(yr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});let br=class n extends ur{constructor(a){super(a,{code:n.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}};Object.defineProperty(br,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});let vr=class n extends ur{constructor(a){super(a,{code:n.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}};Object.defineProperty(vr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});let wr=class n extends ur{constructor(a){super(a,{code:n.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}};Object.defineProperty(wr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});let xr=class n extends ur{constructor(a,{method:o}={}){super(a,{code:n.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${o?` "${o}"`:""} is not supported.`})}};Object.defineProperty(xr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});let Nr=class n extends ur{constructor(a){super(a,{code:n.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}};Object.defineProperty(Nr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});let kr=class n extends ur{constructor(a){super(a,{code:n.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}};Object.defineProperty(kr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});let Cr=class n extends dr{constructor(a){super(a,{code:n.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}};Object.defineProperty(Cr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});let Er=class n extends dr{constructor(a){super(a,{code:n.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}};Object.defineProperty(Er,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});let Sr=class n extends dr{constructor(a,{method:o}={}){super(a,{code:n.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${o?` " ${o}"`:""}.`})}};Object.defineProperty(Sr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});let Ar=class n extends dr{constructor(a){super(a,{code:n.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}};Object.defineProperty(Ar,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});let _r=class n extends dr{constructor(a){super(a,{code:n.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}};Object.defineProperty(_r,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});let Tr=class n extends dr{constructor(a){super(a,{code:n.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}};Object.defineProperty(Tr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});let jr=class n extends dr{constructor(a){super(a,{code:n.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}};Object.defineProperty(jr,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});let Ir=class n extends dr{constructor(a){super(a,{code:n.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}};Object.defineProperty(Ir,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});let Pr=class n extends dr{constructor(a){super(a,{code:n.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}};Object.defineProperty(Pr,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});let Or=class n extends dr{constructor(a){super(a,{code:n.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}};Object.defineProperty(Or,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});let Rr=class n extends dr{constructor(a){super(a,{code:n.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}};Object.defineProperty(Rr,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});let Br=class n extends dr{constructor(a){super(a,{code:n.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}};Object.defineProperty(Br,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});let Mr=class n extends dr{constructor(a){super(a,{code:n.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}};Object.defineProperty(Mr,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});let zr=class extends ur{constructor(n){super(n,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}};function getNodeError(n,a){const o=(n.details||"").toLowerCase();const i=n instanceof dt?n.walk(n=>n?.code===Un.code):n;return i instanceof dt?new Un({cause:n,message:i.details}):Un.nodeMessage.test(o)?new Un({cause:n,message:n.details}):Wn.nodeMessage.test(o)?new Wn({cause:n,maxFeePerGas:a?.maxFeePerGas}):Hn.nodeMessage.test(o)?new Hn({cause:n,maxFeePerGas:a?.maxFeePerGas}):qn.nodeMessage.test(o)?new qn({cause:n,nonce:a?.nonce}):Gn.nodeMessage.test(o)?new Gn({cause:n,nonce:a?.nonce}):Vn.nodeMessage.test(o)?new Vn({cause:n,nonce:a?.nonce}):Kn.nodeMessage.test(o)?new Kn({cause:n}):Zn.nodeMessage.test(o)?new Zn({cause:n,gas:a?.gas}):Yn.nodeMessage.test(o)?new Yn({cause:n,gas:a?.gas}):Jn.nodeMessage.test(o)?new Jn({cause:n}):Qn.nodeMessage.test(o)?new Qn({cause:n,maxFeePerGas:a?.maxFeePerGas,maxPriorityFeePerGas:a?.maxPriorityFeePerGas}):new Xn({cause:n})}function getTransactionError(n,{docsPath:a,...o}){const i=(()=>{const a=getNodeError(n,o);return a instanceof Xn?n:a})();return new nr(i,{docsPath:a,...o})}function extract(n,{format:a}){if(!a)return{};const o={};function extract_(a){const i=Object.keys(a);for(const u of i){u in n&&(o[u]=n[u]);a[u]&&"object"==typeof a[u]&&!Array.isArray(a[u])&&extract_(a[u])}}const i=a(n||{});extract_(i);return o}const Fr={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function formatTransactionRequest(n){const a={};"undefined"!=typeof n.authorizationList&&(a.authorizationList=formatAuthorizationList$1(n.authorizationList));"undefined"!=typeof n.accessList&&(a.accessList=n.accessList);"undefined"!=typeof n.blobVersionedHashes&&(a.blobVersionedHashes=n.blobVersionedHashes);"undefined"!=typeof n.blobs&&("string"!=typeof n.blobs[0]?a.blobs=n.blobs.map(n=>bytesToHex$1(n)):a.blobs=n.blobs);"undefined"!=typeof n.data&&(a.data=n.data);"undefined"!=typeof n.from&&(a.from=n.from);"undefined"!=typeof n.gas&&(a.gas=numberToHex(n.gas));"undefined"!=typeof n.gasPrice&&(a.gasPrice=numberToHex(n.gasPrice));"undefined"!=typeof n.maxFeePerBlobGas&&(a.maxFeePerBlobGas=numberToHex(n.maxFeePerBlobGas));"undefined"!=typeof n.maxFeePerGas&&(a.maxFeePerGas=numberToHex(n.maxFeePerGas));"undefined"!=typeof n.maxPriorityFeePerGas&&(a.maxPriorityFeePerGas=numberToHex(n.maxPriorityFeePerGas));"undefined"!=typeof n.nonce&&(a.nonce=numberToHex(n.nonce));"undefined"!=typeof n.to&&(a.to=n.to);"undefined"!=typeof n.type&&(a.type=Fr[n.type]);"undefined"!=typeof n.value&&(a.value=numberToHex(n.value));return a}function formatAuthorizationList$1(n){return n.map(n=>({address:n.address,r:n.r?numberToHex(BigInt(n.r)):n.r,s:n.s?numberToHex(BigInt(n.s)):n.s,chainId:numberToHex(n.chainId),nonce:numberToHex(n.nonce),..."undefined"!=typeof n.yParity?{yParity:numberToHex(n.yParity)}:{},..."undefined"!=typeof n.v&&"undefined"==typeof n.yParity?{v:numberToHex(n.v)}:{}}))}function getAction$1(n,a,o){const i=n[a.name];if("function"==typeof i)return i;const u=n[o];return"function"==typeof u?u:o=>a(n,o)}const Lr=2n**256n-1n;function assertRequest(n){const{account:a,gasPrice:o,maxFeePerGas:i,maxPriorityFeePerGas:u,to:d}=n;const m=a?parseAccount(a):void 0;if(m&&!isAddress$1(m.address))throw new Kt({address:m.address});if(d&&!isAddress$1(d))throw new Kt({address:d});if("undefined"!=typeof o&&("undefined"!=typeof i||"undefined"!=typeof u))throw new er;if(i&&i>Lr)throw new Wn({maxFeePerGas:i});if(u&&i&&u>i)throw new Qn({maxFeePerGas:i,maxPriorityFeePerGas:u})}async function getChainId$1(n){const a=await n.request({method:"eth_chainId"},{dedupe:!0});return hexToNumber$1(a)}let Dr=class extends dt{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}};let $r=class extends dt{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}};let Ur=class extends dt{constructor({maxPriorityFeePerGas:n}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${formatGwei(n)} gwei).`,{name:"MaxFeePerGasTooLowError"})}};let Wr=class extends dt{constructor({blockHash:n,blockNumber:a}){let o="Block";n&&(o=`Block at hash "${n}"`);a&&(o=`Block at number "${a}"`);super(`${o} could not be found.`,{name:"BlockNotFoundError"})}};const Hr={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function formatTransaction(n){const a={...n,blockHash:n.blockHash?n.blockHash:null,blockNumber:n.blockNumber?BigInt(n.blockNumber):null,chainId:n.chainId?hexToNumber$1(n.chainId):void 0,gas:n.gas?BigInt(n.gas):void 0,gasPrice:n.gasPrice?BigInt(n.gasPrice):void 0,maxFeePerBlobGas:n.maxFeePerBlobGas?BigInt(n.maxFeePerBlobGas):void 0,maxFeePerGas:n.maxFeePerGas?BigInt(n.maxFeePerGas):void 0,maxPriorityFeePerGas:n.maxPriorityFeePerGas?BigInt(n.maxPriorityFeePerGas):void 0,nonce:n.nonce?hexToNumber$1(n.nonce):void 0,to:n.to?n.to:null,transactionIndex:n.transactionIndex?Number(n.transactionIndex):null,type:n.type?Hr[n.type]:void 0,typeHex:n.type?n.type:void 0,value:n.value?BigInt(n.value):void 0,v:n.v?BigInt(n.v):void 0};n.authorizationList&&(a.authorizationList=formatAuthorizationList$2(n.authorizationList));a.yParity=(()=>{if(n.yParity)return Number(n.yParity);if("bigint"==typeof a.v){if(0n===a.v||27n===a.v)return 0;if(1n===a.v||28n===a.v)return 1;if(a.v>=35n)return a.v%2n==0n?1:0}})();if("legacy"===a.type){delete a.accessList;delete a.maxFeePerBlobGas;delete a.maxFeePerGas;delete a.maxPriorityFeePerGas;delete a.yParity}if("eip2930"===a.type){delete a.maxFeePerBlobGas;delete a.maxFeePerGas;delete a.maxPriorityFeePerGas}"eip1559"===a.type&&delete a.maxFeePerBlobGas;return a}function formatAuthorizationList$2(n){return n.map(n=>({address:n.address,chainId:Number(n.chainId),nonce:Number(n.nonce),r:n.r,s:n.s,yParity:Number(n.yParity)}))}function formatBlock$1(n){const a=(n.transactions??[]).map(n=>"string"==typeof n?n:formatTransaction(n));return{...n,baseFeePerGas:n.baseFeePerGas?BigInt(n.baseFeePerGas):null,blobGasUsed:n.blobGasUsed?BigInt(n.blobGasUsed):void 0,difficulty:n.difficulty?BigInt(n.difficulty):void 0,excessBlobGas:n.excessBlobGas?BigInt(n.excessBlobGas):void 0,gasLimit:n.gasLimit?BigInt(n.gasLimit):void 0,gasUsed:n.gasUsed?BigInt(n.gasUsed):void 0,hash:n.hash?n.hash:null,logsBloom:n.logsBloom?n.logsBloom:null,nonce:n.nonce?n.nonce:null,number:n.number?BigInt(n.number):null,size:n.size?BigInt(n.size):void 0,timestamp:n.timestamp?BigInt(n.timestamp):void 0,transactions:a,totalDifficulty:n.totalDifficulty?BigInt(n.totalDifficulty):null}}async function getBlock(n,{blockHash:a,blockNumber:o,blockTag:i=n.experimental_blockTag??"latest",includeTransactions:u}={}){const d=u??!1;const m=void 0!==o?numberToHex(o):void 0;let g=null;g=a?await n.request({method:"eth_getBlockByHash",params:[a,d]},{dedupe:!0}):await n.request({method:"eth_getBlockByNumber",params:[m||i,d]},{dedupe:Boolean(m)});if(!g)throw new Wr({blockHash:a,blockNumber:o});const y=n.chain?.formatters?.block?.format||formatBlock$1;return y(g)}async function getGasPrice(n){const a=await n.request({method:"eth_gasPrice"});return BigInt(a)}async function estimateMaxPriorityFeePerGas(n,a){return internal_estimateMaxPriorityFeePerGas(n,a)}async function internal_estimateMaxPriorityFeePerGas(n,a){const{block:o,chain:i=n.chain,request:u}=a||{};try{const a=i?.fees?.maxPriorityFeePerGas??i?.fees?.defaultPriorityFee;if("function"==typeof a){const i=o||await getAction$1(n,getBlock,"getBlock")({});const d=await a({block:i,client:n,request:u});if(null===d)throw new Error;return d}if("undefined"!=typeof a)return a;const d=await n.request({method:"eth_maxPriorityFeePerGas"});return hexToBigInt(d)}catch{const[a,i]=await Promise.all([o?Promise.resolve(o):getAction$1(n,getBlock,"getBlock")({}),getAction$1(n,getGasPrice,"getGasPrice")({})]);if("bigint"!=typeof a.baseFeePerGas)throw new $r;const u=i-a.baseFeePerGas;return u<0n?0n:u}}async function estimateFeesPerGas(n,a){return internal_estimateFeesPerGas(n,a)}async function internal_estimateFeesPerGas(n,a){const{block:o,chain:i=n.chain,request:u,type:d="eip1559"}=a||{};const m=await(async()=>"function"==typeof i?.fees?.baseFeeMultiplier?i.fees.baseFeeMultiplier({block:o,client:n,request:u}):i?.fees?.baseFeeMultiplier??1.2)();if(m<1)throw new Dr;const g=m.toString().split(".")[1]?.length??0;const y=10**g;const multiply=n=>n*BigInt(Math.ceil(m*y))/BigInt(y);const v=o||await getAction$1(n,getBlock,"getBlock")({});if("function"==typeof i?.fees?.estimateFeesPerGas){const a=await i.fees.estimateFeesPerGas({block:o,client:n,multiply:multiply,request:u,type:d});if(null!==a)return a}if("eip1559"===d){if("bigint"!=typeof v.baseFeePerGas)throw new $r;const a="bigint"==typeof u?.maxPriorityFeePerGas?u.maxPriorityFeePerGas:await internal_estimateMaxPriorityFeePerGas(n,{block:v,chain:i,request:u});const o=multiply(v.baseFeePerGas);const d=u?.maxFeePerGas??o+a;return{maxFeePerGas:d,maxPriorityFeePerGas:a}}const x=u?.gasPrice??multiply(await getAction$1(n,getGasPrice,"getGasPrice")({}));return{gasPrice:x}}let qr=class extends dt{constructor(n,{account:a,docsPath:o,chain:i,data:u,gas:d,gasPrice:m,maxFeePerGas:g,maxPriorityFeePerGas:y,nonce:v,to:x,value:N}){const k=prettyPrint({from:a?.address,to:x,value:"undefined"!=typeof N&&`${formatEther$1(N)} ${i?.nativeCurrency?.symbol||"ETH"}`,data:u,gas:d,gasPrice:"undefined"!=typeof m&&`${formatGwei(m)} gwei`,maxFeePerGas:"undefined"!=typeof g&&`${formatGwei(g)} gwei`,maxPriorityFeePerGas:"undefined"!=typeof y&&`${formatGwei(y)} gwei`,nonce:v});super(n.shortMessage,{cause:n,docsPath:o,metaMessages:[...n.metaMessages?[...n.metaMessages," "]:[],"Estimate Gas Arguments:",k].filter(Boolean),name:"EstimateGasExecutionError"});Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this.cause=n}};function getEstimateGasError(n,{docsPath:a,...o}){const i=(()=>{const a=getNodeError(n,o);return a instanceof Xn?n:a})();return new qr(i,{docsPath:a,...o})}let Gr=class extends dt{constructor({address:n}){super(`State for account "${n}" is set multiple times.`,{name:"AccountStateConflictError"})}};let Vr=class extends dt{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}};function prettyStateMapping(n){return n.reduce((n,{slot:a,value:o})=>`${n}        ${a}: ${o}\n`,"")}function prettyStateOverride(n){return n.reduce((n,{address:a,...o})=>{let i=`${n}    ${a}:\n`;o.nonce&&(i+=`      nonce: ${o.nonce}\n`);o.balance&&(i+=`      balance: ${o.balance}\n`);o.code&&(i+=`      code: ${o.code}\n`);if(o.state){i+="      state:\n";i+=prettyStateMapping(o.state)}if(o.stateDiff){i+="      stateDiff:\n";i+=prettyStateMapping(o.stateDiff)}return i},"  State Override:\n").slice(0,-1)}function serializeStateMapping(n){if(n&&0!==n.length)return n.reduce((n,{slot:a,value:o})=>{if(66!==a.length)throw new bt({size:a.length,targetSize:66,type:"hex"});if(66!==o.length)throw new bt({size:o.length,targetSize:66,type:"hex"});n[a]=o;return n},{})}function serializeAccountStateOverride(n){const{balance:a,nonce:o,state:i,stateDiff:u,code:d}=n;const m={};void 0!==d&&(m.code=d);void 0!==a&&(m.balance=numberToHex(a));void 0!==o&&(m.nonce=numberToHex(o));void 0!==i&&(m.state=serializeStateMapping(i));if(void 0!==u){if(m.state)throw new Vr;m.stateDiff=serializeStateMapping(u)}return m}function serializeStateOverride(n){if(!n)return;const a={};for(const{address:o,...i}of n){if(!isAddress$1(o,{strict:!1}))throw new Kt({address:o});if(a[o])throw new Gr({address:o});a[o]=serializeAccountStateOverride(i)}return a}async function getBalance$1(n,{address:a,blockNumber:o,blockTag:i=n.experimental_blockTag??"latest"}){const u="bigint"==typeof o?numberToHex(o):void 0;const d=await n.request({method:"eth_getBalance",params:[a,u||i]});return BigInt(d)}async function estimateGas$1(n,a){const{account:o=n.account}=a;const i=o?parseAccount(o):void 0;try{let estimateGas_rpc=function(a){const{block:o,request:i,rpcStateOverride:u}=a;return n.request({method:"eth_estimateGas",params:u?[i,o??n.experimental_blockTag??"latest",u]:o?[i,o]:[i]})};const{accessList:o,authorizationList:u,blobs:d,blobVersionedHashes:m,blockNumber:g,blockTag:y,data:v,gas:x,gasPrice:N,maxFeePerBlobGas:k,maxFeePerGas:E,maxPriorityFeePerGas:S,nonce:A,value:_,stateOverride:j,...I}=await prepareTransactionRequest$1(n,{...a,parameters:"local"===i?.type?void 0:["blobVersionedHashes"]});const O="bigint"==typeof g?numberToHex(g):void 0;const R=O||y;const B=serializeStateOverride(j);const M=await(async()=>I.to?I.to:u&&u.length>0?await recoverAuthorizationAddress({authorization:u[0]}).catch(()=>{throw new dt("`to` is required. Could not infer from `authorizationList`")}):void 0)();assertRequest(a);const z=n.chain?.formatters?.transactionRequest?.format;const L=z||formatTransactionRequest;const D=L({...extract(I,{format:z}),from:i?.address,accessList:o,authorizationList:u,blobs:d,blobVersionedHashes:m,data:v,gas:x,gasPrice:N,maxFeePerBlobGas:k,maxFeePerGas:E,maxPriorityFeePerGas:S,nonce:A,to:M,value:_});let W=BigInt(await estimateGas_rpc({block:R,request:D,rpcStateOverride:B}));if(u){const a=await getBalance$1(n,{address:D.from});const o=await Promise.all(u.map(async n=>{const{address:o}=n;const u=await estimateGas_rpc({block:R,request:{authorizationList:void 0,data:v,from:i?.address,to:o,value:numberToHex(a)},rpcStateOverride:B}).catch(()=>100000n);return 2n*BigInt(u)}));W+=o.reduce((n,a)=>n+a,0n)}return W}catch(u){throw getEstimateGasError(u,{...a,account:i,chain:n.chain})}}async function getTransactionCount(n,{address:a,blockTag:o="latest",blockNumber:i}){const u=await n.request({method:"eth_getTransactionCount",params:[a,"bigint"==typeof i?numberToHex(i):o]},{dedupe:Boolean(i)});return hexToNumber$1(u)}function blobsToCommitments(n){const{kzg:a}=n;const o=n.to??("string"==typeof n.blobs[0]?"hex":"bytes");const i="string"==typeof n.blobs[0]?n.blobs.map(n=>hexToBytes$1(n)):n.blobs;const u=[];for(const d of i)u.push(Uint8Array.from(a.blobToKzgCommitment(d)));return"bytes"===o?u:u.map(n=>bytesToHex$1(n))}function blobsToProofs(n){const{kzg:a}=n;const o=n.to??("string"==typeof n.blobs[0]?"hex":"bytes");const i="string"==typeof n.blobs[0]?n.blobs.map(n=>hexToBytes$1(n)):n.blobs;const u="string"==typeof n.commitments[0]?n.commitments.map(n=>hexToBytes$1(n)):n.commitments;const d=[];for(let m=0;m<i.length;m++){const n=i[m];const o=u[m];d.push(Uint8Array.from(a.computeBlobKzgProof(n,o)))}return"bytes"===o?d:d.map(n=>bytesToHex$1(n))}function setBigUint64$1(n,a,o,i){if("function"==typeof n.setBigUint64)return n.setBigUint64(a,o,i);const u=BigInt(32);const d=BigInt(4294967295);const m=Number(o>>u&d);const g=Number(o&d);const y=i?4:0;const v=i?0:4;n.setUint32(a+y,m,i);n.setUint32(a+v,g,i)}function Chi$1(n,a,o){return n&a^~n&o}function Maj$1(n,a,o){return n&a^n&o^a&o}let Kr=class extends sn{constructor(n,a,o,i){super();this.finished=!1;this.length=0;this.pos=0;this.destroyed=!1;this.blockLen=n;this.outputLen=a;this.padOffset=o;this.isLE=i;this.buffer=new Uint8Array(n);this.view=createView$1(this.buffer)}update(n){aexists$1(this);n=toBytes$1(n);abytes$1(n);const{view:a,buffer:o,blockLen:i}=this;const u=n.length;for(let d=0;d<u;){const m=Math.min(i-this.pos,u-d);if(m===i){const a=createView$1(n);for(;i<=u-d;d+=i)this.process(a,d);continue}o.set(n.subarray(d,d+m),this.pos);this.pos+=m;d+=m;if(this.pos===i){this.process(a,0);this.pos=0}}this.length+=n.length;this.roundClean();return this}digestInto(n){aexists$1(this);aoutput$1(n,this);this.finished=!0;const{buffer:a,view:o,blockLen:i,isLE:u}=this;let{pos:d}=this;a[d++]=128;clean$1(this.buffer.subarray(d));if(this.padOffset>i-d){this.process(o,0);d=0}for(let x=d;x<i;x++)a[x]=0;setBigUint64$1(o,i-8,BigInt(8*this.length),u);this.process(o,0);const m=createView$1(n);const g=this.outputLen;if(g%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const y=g/4;const v=this.get();if(y>v.length)throw new Error("_sha2: outputLen bigger than state");for(let x=0;x<y;x++)m.setUint32(4*x,v[x],u)}digest(){const{buffer:n,outputLen:a}=this;this.digestInto(n);const o=n.slice(0,a);this.destroy();return o}_cloneInto(n){n||(n=new this.constructor);n.set(...this.get());const{blockLen:a,buffer:o,length:i,finished:u,destroyed:d,pos:m}=this;n.destroyed=d;n.finished=u;n.length=i;n.pos=m;i%a&&n.buffer.set(o);return n}clone(){return this._cloneInto()}};const Zr=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);const Yr=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);const Jr=new Uint32Array(64);let Qr=class extends Kr{constructor(n=32){super(64,n,8,!1);this.A=0|Zr[0];this.B=0|Zr[1];this.C=0|Zr[2];this.D=0|Zr[3];this.E=0|Zr[4];this.F=0|Zr[5];this.G=0|Zr[6];this.H=0|Zr[7]}get(){const{A:n,B:a,C:o,D:i,E:u,F:d,G:m,H:g}=this;return[n,a,o,i,u,d,m,g]}set(n,a,o,i,u,d,m,g){this.A=0|n;this.B=0|a;this.C=0|o;this.D=0|i;this.E=0|u;this.F=0|d;this.G=0|m;this.H=0|g}process(n,a){for(let x=0;x<16;x++,a+=4)Jr[x]=n.getUint32(a,!1);for(let x=16;x<64;x++){const n=Jr[x-15];const a=Jr[x-2];const o=rotr$1(n,7)^rotr$1(n,18)^n>>>3;const i=rotr$1(a,17)^rotr$1(a,19)^a>>>10;Jr[x]=i+Jr[x-7]+o+Jr[x-16]|0}let{A:o,B:i,C:u,D:d,E:m,F:g,G:y,H:v}=this;for(let x=0;x<64;x++){const n=rotr$1(m,6)^rotr$1(m,11)^rotr$1(m,25);const a=v+n+Chi$1(m,g,y)+Yr[x]+Jr[x]|0;const N=rotr$1(o,2)^rotr$1(o,13)^rotr$1(o,22);const k=N+Maj$1(o,i,u)|0;v=y;y=g;g=m;m=d+a|0;d=u;u=i;i=o;o=a+k|0}o=o+this.A|0;i=i+this.B|0;u=u+this.C|0;d=d+this.D|0;m=m+this.E|0;g=g+this.F|0;y=y+this.G|0;v=v+this.H|0;this.set(o,i,u,d,m,g,y,v)}roundClean(){clean$1(Jr)}destroy(){this.set(0,0,0,0,0,0,0,0);clean$1(this.buffer)}};const Xr=createHasher$1(()=>new Qr);const es=Xr;function sha256$1(n,a){const o=es(isHex(n,{strict:!1})?toBytes$2(n):n);return o}function commitmentToVersionedHash(n){const{commitment:a,version:o=1}=n;const i=n.to;const u=sha256$1(a);u.set([o],0);return"bytes"===i?u:bytesToHex$1(u)}function commitmentsToVersionedHashes(n){const{commitments:a,version:o}=n;const i=n.to;const u=[];for(const d of a)u.push(commitmentToVersionedHash({commitment:d,to:i,version:o}));return u}const ts=6;const ns=32;const rs=4096;const ss=ns*rs;const as=ss*ts-1-1*rs*ts;let os=class extends dt{constructor({maxSize:n,size:a}){super("Blob size is too large.",{metaMessages:[`Max: ${n} bytes`,`Given: ${a} bytes`],name:"BlobSizeTooLargeError"})}};let is=class extends dt{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}};function toBlobs(n){const a="string"==typeof n.data?hexToBytes$1(n.data):n.data;const o=size$4(a);if(!o)throw new is;if(o>as)throw new os({maxSize:as,size:o});const i=[];let u=!0;let d=0;for(;u;){const n=createCursor(new Uint8Array(ss));let o=0;for(;o<rs;){const i=a.slice(d,d+(ns-1));n.pushByte(0);n.pushBytes(i);if(i.length<31){n.pushByte(128);u=!1;break}o++;d+=31}i.push(n)}return i.map(n=>bytesToHex$1(n.bytes))}function toBlobSidecars(n){const{data:a,kzg:o,to:i}=n;const u=n.blobs??toBlobs({data:a});const d=n.commitments??blobsToCommitments({blobs:u,kzg:o,to:i});const m=n.proofs??blobsToProofs({blobs:u,commitments:d,kzg:o,to:i});const g=[];for(let y=0;y<u.length;y++)g.push({blob:u[y],commitment:d[y],proof:m[y]});return g}function getTransactionType(n){if(n.type)return n.type;if("undefined"!=typeof n.authorizationList)return"eip7702";if("undefined"!=typeof n.blobs||"undefined"!=typeof n.blobVersionedHashes||"undefined"!=typeof n.maxFeePerBlobGas||"undefined"!=typeof n.sidecars)return"eip4844";if("undefined"!=typeof n.maxFeePerGas||"undefined"!=typeof n.maxPriorityFeePerGas)return"eip1559";if("undefined"!=typeof n.gasPrice)return"undefined"!=typeof n.accessList?"eip2930":"legacy";throw new tr({transaction:n})}const cs=["blobVersionedHashes","chainId","fees","gas","nonce","type"];const ls=new Map;async function prepareTransactionRequest$1(n,a){const{account:o=n.account,blobs:i,chain:u,gas:d,kzg:m,nonce:g,nonceManager:y,parameters:v=cs,type:x}=a;const N=o?parseAccount(o):o;const k={...a,...N?{from:N?.address}:{}};let E;async function getBlock$1(){if(E)return E;E=await getAction$1(n,getBlock,"getBlock")({blockTag:"latest"});return E}let S;async function getChainId2(){if(S)return S;if(u)return u.id;if("undefined"!=typeof a.chainId)return a.chainId;const o=await getAction$1(n,getChainId$1,"getChainId")({});S=o;return S}if(v.includes("nonce")&&"undefined"==typeof g&&N)if(y){const a=await getChainId2();k.nonce=await y.consume({address:N.address,chainId:a,client:n})}else k.nonce=await getAction$1(n,getTransactionCount,"getTransactionCount")({address:N.address,blockTag:"pending"});if((v.includes("blobVersionedHashes")||v.includes("sidecars"))&&i&&m){const n=blobsToCommitments({blobs:i,kzg:m});if(v.includes("blobVersionedHashes")){const a=commitmentsToVersionedHashes({commitments:n,to:"hex"});k.blobVersionedHashes=a}if(v.includes("sidecars")){const a=blobsToProofs({blobs:i,commitments:n,kzg:m});const o=toBlobSidecars({blobs:i,commitments:n,proofs:a,to:"hex"});k.sidecars=o}}v.includes("chainId")&&(k.chainId=await getChainId2());if((v.includes("fees")||v.includes("type"))&&"undefined"==typeof x)try{k.type=getTransactionType(k)}catch{let a=ls.get(n.uid);if("undefined"==typeof a){const o=await getBlock$1();a="bigint"==typeof o?.baseFeePerGas;ls.set(n.uid,a)}k.type=a?"eip1559":"legacy"}if(v.includes("fees"))if("legacy"!==k.type&&"eip2930"!==k.type){if("undefined"==typeof k.maxFeePerGas||"undefined"==typeof k.maxPriorityFeePerGas){const o=await getBlock$1();const{maxFeePerGas:i,maxPriorityFeePerGas:d}=await internal_estimateFeesPerGas(n,{block:o,chain:u,request:k});if("undefined"==typeof a.maxPriorityFeePerGas&&a.maxFeePerGas&&a.maxFeePerGas<d)throw new Ur({maxPriorityFeePerGas:d});k.maxPriorityFeePerGas=d;k.maxFeePerGas=i}}else{if("undefined"!=typeof a.maxFeePerGas||"undefined"!=typeof a.maxPriorityFeePerGas)throw new $r;if("undefined"==typeof a.gasPrice){const a=await getBlock$1();const{gasPrice:o}=await internal_estimateFeesPerGas(n,{block:a,chain:u,request:k,type:"legacy"});k.gasPrice=o}}v.includes("gas")&&"undefined"==typeof d&&(k.gas=await getAction$1(n,estimateGas$1,"estimateGas")({...k,account:N?{address:N.address,type:"json-rpc"}:N}));assertRequest(k);delete k.parameters;return k}async function sendRawTransaction(n,{serializedTransaction:a}){return n.request({method:"eth_sendRawTransaction",params:[a]},{retryCount:0})}const us=new Zt(128);async function sendTransaction$1(n,a){const{account:o=n.account,chain:i=n.chain,accessList:u,authorizationList:d,blobs:m,data:g,gas:y,gasPrice:v,maxFeePerBlobGas:x,maxFeePerGas:N,maxPriorityFeePerGas:k,nonce:E,type:S,value:A,..._}=a;if("undefined"==typeof o)throw new An({docsPath:"/docs/actions/wallet/sendTransaction"});const j=o?parseAccount(o):null;try{assertRequest(a);const o=await(async()=>a.to?a.to:null!==a.to&&d&&d.length>0?await recoverAuthorizationAddress({authorization:d[0]}).catch(()=>{throw new dt("`to` is required. Could not infer from `authorizationList`.")}):void 0)();if("json-rpc"===j?.type||null===j){let a;if(null!==i){a=await getAction$1(n,getChainId$1,"getChainId")({});assertCurrentChain({currentChainId:a,chain:i})}const O=n.chain?.formatters?.transactionRequest?.format;const R=O||formatTransactionRequest;const B=R({...extract(_,{format:O}),accessList:u,authorizationList:d,blobs:m,chainId:a,data:g,from:j?.address,gas:y,gasPrice:v,maxFeePerBlobGas:x,maxFeePerGas:N,maxPriorityFeePerGas:k,nonce:E,to:o,type:S,value:A});const M=us.get(n.uid);const z=M?"wallet_sendTransaction":"eth_sendTransaction";try{return await n.request({method:z,params:[B]},{retryCount:0})}catch(I){if(!1===M)throw I;const a=I;if("InvalidInputRpcError"===a.name||"InvalidParamsRpcError"===a.name||"MethodNotFoundRpcError"===a.name||"MethodNotSupportedRpcError"===a.name)return await n.request({method:"wallet_sendTransaction",params:[B]},{retryCount:0}).then(a=>{us.set(n.uid,!0);return a}).catch(o=>{const i=o;if("MethodNotFoundRpcError"===i.name||"MethodNotSupportedRpcError"===i.name){us.set(n.uid,!1);throw a}throw i});throw a}}if("local"===j?.type){const a=await getAction$1(n,prepareTransactionRequest$1,"prepareTransactionRequest")({account:j,accessList:u,authorizationList:d,blobs:m,chain:i,data:g,gas:y,gasPrice:v,maxFeePerBlobGas:x,maxFeePerGas:N,maxPriorityFeePerGas:k,nonce:E,nonceManager:j.nonceManager,parameters:[...cs,"sidecars"],type:S,value:A,..._,to:o});const I=i?.serializers?.transaction;const O=await j.signTransaction(a,{serializer:I});return await getAction$1(n,sendRawTransaction,"sendRawTransaction")({serializedTransaction:O})}if("smart"===j?.type)throw new _n({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"});throw new _n({docsPath:"/docs/actions/wallet/sendTransaction",type:j?.type})}catch(O){if(O instanceof _n)throw O;throw getTransactionError(O,{...a,account:j,chain:a.chain||void 0})}}const ds=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}];const hs=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}];const fs=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}];const ps=[...fs,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}];const ms=[...fs,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}];const gs=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}];const ys=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}];const bs=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];const vs=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}];function bytesToBigInt(n,a={}){"undefined"!=typeof a.size&&assertSize$2(n,{size:a.size});const o=bytesToHex$1(n,a);return hexToBigInt(o,a)}function bytesToBool(n,a={}){let o=n;if("undefined"!=typeof a.size){assertSize$2(o,{size:a.size});o=trim(o)}if(o.length>1||o[0]>1)throw new ft(o);return Boolean(o[0])}function bytesToNumber(n,a={}){"undefined"!=typeof a.size&&assertSize$2(n,{size:a.size});const o=bytesToHex$1(n,a);return hexToNumber$1(o,a)}function bytesToString(n,a={}){let o=n;if("undefined"!=typeof a.size){assertSize$2(o,{size:a.size});o=trim(o,{dir:"right"})}return(new TextDecoder).decode(o)}function decodeAbiParameters(n,a){const o="string"==typeof a?hexToBytes$1(a):a;const i=createCursor(o);if(0===size$4(o)&&n.length>0)throw new St;if(size$4(a)&&size$4(a)<32)throw new Et({data:"string"==typeof a?a:bytesToHex$1(a),params:n,size:size$4(a)});let u=0;const d=[];for(let m=0;m<n.length;++m){const a=n[m];i.setPosition(u);const[o,g]=decodeParameter(i,a,{staticPosition:0});u+=g;d.push(o)}return d}function decodeParameter(n,a,{staticPosition:o}){const i=getArrayComponents$1(a.type);if(i){const[u,d]=i;return decodeArray(n,{...a,type:d},{length:u,staticPosition:o})}if("tuple"===a.type)return decodeTuple(n,a,{staticPosition:o});if("address"===a.type)return decodeAddress(n);if("bool"===a.type)return decodeBool(n);if(a.type.startsWith("bytes"))return decodeBytes(n,a,{staticPosition:o});if(a.type.startsWith("uint")||a.type.startsWith("int"))return decodeNumber(n,a);if("string"===a.type)return decodeString(n,{staticPosition:o});throw new Ht(a.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const ws=32;const xs=32;function decodeAddress(n){const a=n.readBytes(32);return[checksumAddress(bytesToHex$1(sliceBytes(a,-20))),32]}function decodeArray(n,a,{length:o,staticPosition:i}){if(!o){const o=bytesToNumber(n.readBytes(xs));const u=i+o;const d=u+ws;n.setPosition(u);const m=bytesToNumber(n.readBytes(ws));const g=hasDynamicChild(a);let y=0;const v=[];for(let i=0;i<m;++i){n.setPosition(d+(g?32*i:y));const[o,u]=decodeParameter(n,a,{staticPosition:d});y+=u;v.push(o)}n.setPosition(i+32);return[v,32]}if(hasDynamicChild(a)){const u=bytesToNumber(n.readBytes(xs));const d=i+u;const m=[];for(let i=0;i<o;++i){n.setPosition(d+32*i);const[o]=decodeParameter(n,a,{staticPosition:d});m.push(o)}n.setPosition(i+32);return[m,32]}let u=0;const d=[];for(let m=0;m<o;++m){const[o,m]=decodeParameter(n,a,{staticPosition:i+u});u+=m;d.push(o)}return[d,u]}function decodeBool(n){return[bytesToBool(n.readBytes(32),{size:32}),32]}function decodeBytes(n,a,{staticPosition:o}){const[i,u]=a.type.split("bytes");if(!u){const a=bytesToNumber(n.readBytes(32));n.setPosition(o+a);const i=bytesToNumber(n.readBytes(32));if(0===i){n.setPosition(o+32);return["0x",32]}const u=n.readBytes(i);n.setPosition(o+32);return[bytesToHex$1(u),32]}const d=bytesToHex$1(n.readBytes(Number.parseInt(u),32));return[d,32]}function decodeNumber(n,a){const o=a.type.startsWith("int");const i=Number.parseInt(a.type.split("int")[1]||"256");const u=n.readBytes(32);return[i>48?bytesToBigInt(u,{signed:o}):bytesToNumber(u,{signed:o}),32]}function decodeTuple(n,a,{staticPosition:o}){const i=0===a.components.length||a.components.some(({name:n})=>!n);const u=i?[]:{};let d=0;if(hasDynamicChild(a)){const m=bytesToNumber(n.readBytes(xs));const g=o+m;for(let o=0;o<a.components.length;++o){const m=a.components[o];n.setPosition(g+d);const[y,v]=decodeParameter(n,m,{staticPosition:g});d+=v;u[i?o:m?.name]=y}n.setPosition(o+32);return[u,32]}for(let m=0;m<a.components.length;++m){const g=a.components[m];const[y,v]=decodeParameter(n,g,{staticPosition:o});u[i?m:g?.name]=y;d+=v}return[u,d]}function decodeString(n,{staticPosition:a}){const o=bytesToNumber(n.readBytes(32));const i=a+o;n.setPosition(i);const u=bytesToNumber(n.readBytes(32));if(0===u){n.setPosition(a+32);return["",32]}const d=n.readBytes(u,32);const m=bytesToString(trim(d));n.setPosition(a+32);return[m,32]}function hasDynamicChild(n){const{type:a}=n;if("string"===a)return!0;if("bytes"===a)return!0;if(a.endsWith("[]"))return!0;if("tuple"===a)return n.components?.some(hasDynamicChild);const o=getArrayComponents$1(n.type);return!(!o||!hasDynamicChild({...n,type:o[1]}))}const hash$1=n=>keccak256$1(toBytes$2(n));function hashSignature(n){return hash$1(n)}const Ns="1.0.8";let ks=class n extends Error{constructor(a,o={}){const i=o.cause instanceof n?o.cause.details:o.cause?.message?o.cause.message:o.details;const u=o.cause instanceof n&&o.cause.docsPath||o.docsPath;const d=[a||"An error occurred.","",...o.metaMessages?[...o.metaMessages,""]:[],...u?[`Docs: https://abitype.dev${u}`]:[],...i?[`Details: ${i}`]:[],`Version: abitype@${Ns}`].join("\n");super(d);Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"});o.cause&&(this.cause=o.cause);this.details=i;this.docsPath=u;this.metaMessages=o.metaMessages;this.shortMessage=a}};function execTyped(n,a){const o=n.exec(a);return o?.groups}const Cs=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/;const Es=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;const Ss=/^\(.+?\).*?$/;const As=/^tuple(?<array>(\[(\d*)\])*)$/;function formatAbiParameter(n){let a=n.type;if(As.test(n.type)&&"components"in n){a="(";const o=n.components.length;for(let u=0;u<o;u++){const i=n.components[u];a+=formatAbiParameter(i);u<o-1&&(a+=", ")}const i=execTyped(As,n.type);a+=`)${i?.array??""}`;return formatAbiParameter({...n,type:a})}"indexed"in n&&n.indexed&&(a=`${a} indexed`);return n.name?`${a} ${n.name}`:a}function formatAbiParameters(n){let a="";const o=n.length;for(let i=0;i<o;i++){const u=n[i];a+=formatAbiParameter(u);i!==o-1&&(a+=", ")}return a}function formatAbiItem(n){return"function"===n.type?`function ${n.name}(${formatAbiParameters(n.inputs)})${n.stateMutability&&"nonpayable"!==n.stateMutability?` ${n.stateMutability}`:""}${n.outputs?.length?` returns (${formatAbiParameters(n.outputs)})`:""}`:"event"===n.type?`event ${n.name}(${formatAbiParameters(n.inputs)})`:"error"===n.type?`error ${n.name}(${formatAbiParameters(n.inputs)})`:"constructor"===n.type?`constructor(${formatAbiParameters(n.inputs)})${"payable"===n.stateMutability?" payable":""}`:"fallback"===n.type?"fallback() external"+("payable"===n.stateMutability?" payable":""):"receive() external payable"}const _s=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function isErrorSignature(n){return _s.test(n)}function execErrorSignature(n){return execTyped(_s,n)}const Ts=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function isEventSignature(n){return Ts.test(n)}function execEventSignature(n){return execTyped(Ts,n)}const js=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function isFunctionSignature(n){return js.test(n)}function execFunctionSignature(n){return execTyped(js,n)}const Is=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function isStructSignature(n){return Is.test(n)}function execStructSignature(n){return execTyped(Is,n)}const Ps=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function isConstructorSignature(n){return Ps.test(n)}function execConstructorSignature(n){return execTyped(Ps,n)}const Os=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function isFallbackSignature(n){return Os.test(n)}function execFallbackSignature(n){return execTyped(Os,n)}const Rs=/^receive\(\) external payable$/;function isReceiveSignature(n){return Rs.test(n)}const Bs=new Set(["indexed"]);const Ms=new Set(["calldata","memory","storage"]);let zs=class extends ks{constructor({signature:n}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(n,null,2)})`,docsPath:"/api/human#parseabiitem-1"});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}};let Fs=class extends ks{constructor({type:n}){super("Unknown type.",{metaMessages:[`Type "${n}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}};let Ls=class extends ks{constructor({type:n}){super("Unknown type.",{metaMessages:[`Type "${n}" is not a valid ABI type.`]});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}};let Ds=class extends ks{constructor({param:n}){super("Invalid ABI parameter.",{details:n});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}};let $s=class extends ks{constructor({param:n,name:a}){super("Invalid ABI parameter.",{details:n,metaMessages:[`"${a}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}};let Us=class extends ks{constructor({param:n,type:a,modifier:o}){super("Invalid ABI parameter.",{details:n,metaMessages:[`Modifier "${o}" not allowed${a?` in "${a}" type`:""}.`]});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}};let Ws=class extends ks{constructor({param:n,type:a,modifier:o}){super("Invalid ABI parameter.",{details:n,metaMessages:[`Modifier "${o}" not allowed${a?` in "${a}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${o}" was given.`]});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}};let Hs=class extends ks{constructor({abiParameter:n}){super("Invalid ABI parameter.",{details:JSON.stringify(n,null,2),metaMessages:["ABI parameter type is invalid."]});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}};let qs=class extends ks{constructor({signature:n,type:a}){super(`Invalid ${a} signature.`,{details:n});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}};let Gs=class extends ks{constructor({signature:n}){super("Unknown signature.",{details:n});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}};let Vs=class extends ks{constructor({signature:n}){super("Invalid struct signature.",{details:n,metaMessages:["No properties exist."]});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}};let Ks=class extends ks{constructor({type:n}){super("Circular reference detected.",{metaMessages:[`Struct "${n}" is a circular reference.`]});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}};let Zs=class extends ks{constructor({current:n,depth:a}){super("Unbalanced parentheses.",{metaMessages:[`"${n.trim()}" has too many ${a>0?"opening":"closing"} parentheses.`],details:`Depth "${a}"`});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}};function getParameterCacheKey(n,a,o){let i="";if(o)for(const u of Object.entries(o)){if(!u)continue;let n="";for(const a of u[1])n+=`[${a.type}${a.name?`:${a.name}`:""}]`;i+=`(${u[0]}{${n}})`}return a?`${a}:${n}${i}`:n}const Ys=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function parseSignature$1(n,a={}){if(isFunctionSignature(n))return parseFunctionSignature(n,a);if(isEventSignature(n))return parseEventSignature(n,a);if(isErrorSignature(n))return parseErrorSignature(n,a);if(isConstructorSignature(n))return parseConstructorSignature(n,a);if(isFallbackSignature(n))return parseFallbackSignature(n);if(isReceiveSignature(n))return{type:"receive",stateMutability:"payable"};throw new Gs({signature:n})}function parseFunctionSignature(n,a={}){const o=execFunctionSignature(n);if(!o)throw new qs({signature:n,type:"function"});const i=splitParameters(o.parameters);const u=[];const d=i.length;for(let g=0;g<d;g++)u.push(parseAbiParameter(i[g],{modifiers:Ms,structs:a,type:"function"}));const m=[];if(o.returns){const n=splitParameters(o.returns);const i=n.length;for(let o=0;o<i;o++)m.push(parseAbiParameter(n[o],{modifiers:Ms,structs:a,type:"function"}))}return{name:o.name,type:"function",stateMutability:o.stateMutability??"nonpayable",inputs:u,outputs:m}}function parseEventSignature(n,a={}){const o=execEventSignature(n);if(!o)throw new qs({signature:n,type:"event"});const i=splitParameters(o.parameters);const u=[];const d=i.length;for(let m=0;m<d;m++)u.push(parseAbiParameter(i[m],{modifiers:Bs,structs:a,type:"event"}));return{name:o.name,type:"event",inputs:u}}function parseErrorSignature(n,a={}){const o=execErrorSignature(n);if(!o)throw new qs({signature:n,type:"error"});const i=splitParameters(o.parameters);const u=[];const d=i.length;for(let m=0;m<d;m++)u.push(parseAbiParameter(i[m],{structs:a,type:"error"}));return{name:o.name,type:"error",inputs:u}}function parseConstructorSignature(n,a={}){const o=execConstructorSignature(n);if(!o)throw new qs({signature:n,type:"constructor"});const i=splitParameters(o.parameters);const u=[];const d=i.length;for(let m=0;m<d;m++)u.push(parseAbiParameter(i[m],{structs:a,type:"constructor"}));return{type:"constructor",stateMutability:o.stateMutability??"nonpayable",inputs:u}}function parseFallbackSignature(n){const a=execFallbackSignature(n);if(!a)throw new qs({signature:n,type:"fallback"});return{type:"fallback",stateMutability:a.stateMutability??"nonpayable"}}const Js=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/;const Qs=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/;const Xs=/^u?int$/;function parseAbiParameter(n,a){const o=getParameterCacheKey(n,a?.type,a?.structs);if(Ys.has(o))return Ys.get(o);const i=Ss.test(n);const u=execTyped(i?Qs:Js,n);if(!u)throw new Ds({param:n});if(u.name&&isSolidityKeyword(u.name))throw new $s({param:n,name:u.name});const d=u.name?{name:u.name}:{};const m="indexed"===u.modifier?{indexed:!0}:{};const g=a?.structs??{};let y;let v={};if(i){y="tuple";const n=splitParameters(u.type);const a=[];const o=n.length;for(let i=0;i<o;i++)a.push(parseAbiParameter(n[i],{structs:g}));v={components:a}}else if(u.type in g){y="tuple";v={components:g[u.type]}}else if(Xs.test(u.type))y=`${u.type}256`;else{y=u.type;if("struct"!==a?.type&&!isSolidityType(y))throw new Ls({type:y})}if(u.modifier){if(!a?.modifiers?.has?.(u.modifier))throw new Us({param:n,type:a?.type,modifier:u.modifier});if(Ms.has(u.modifier)&&!isValidDataLocation(y,!!u.array))throw new Ws({param:n,type:a?.type,modifier:u.modifier})}const x={type:`${y}${u.array??""}`,...d,...m,...v};Ys.set(o,x);return x}function splitParameters(n,a=[],o="",i=0){const u=n.trim().length;for(let d=0;d<u;d++){const u=n[d];const m=n.slice(d+1);switch(u){case",":return 0===i?splitParameters(m,[...a,o.trim()]):splitParameters(m,a,`${o}${u}`,i);case"(":return splitParameters(m,a,`${o}${u}`,i+1);case")":return splitParameters(m,a,`${o}${u}`,i-1);default:return splitParameters(m,a,`${o}${u}`,i)}}if(""===o)return a;if(0!==i)throw new Zs({current:o,depth:i});a.push(o.trim());return a}function isSolidityType(n){return"address"===n||"bool"===n||"function"===n||"string"===n||Cs.test(n)||Es.test(n)}const ea=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function isSolidityKeyword(n){return"address"===n||"bool"===n||"function"===n||"string"===n||"tuple"===n||Cs.test(n)||Es.test(n)||ea.test(n)}function isValidDataLocation(n,a){return a||"bytes"===n||"string"===n||"tuple"===n}function parseStructs(n){const a={};const o=n.length;for(let m=0;m<o;m++){const o=n[m];if(!isStructSignature(o))continue;const i=execStructSignature(o);if(!i)throw new qs({signature:o,type:"struct"});const u=i.properties.split(";");const d=[];const g=u.length;for(let n=0;n<g;n++){const a=u[n];const o=a.trim();if(!o)continue;const i=parseAbiParameter(o,{type:"struct"});d.push(i)}if(!d.length)throw new Vs({signature:o});a[i.name]=d}const i={};const u=Object.entries(a);const d=u.length;for(let m=0;m<d;m++){const[n,o]=u[m];i[n]=resolveStructs(o,a)}return i}const ta=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function resolveStructs(n,a,o=new Set){const i=[];const u=n.length;for(let d=0;d<u;d++){const u=n[d];const m=Ss.test(u.type);if(m)i.push(u);else{const n=execTyped(ta,u.type);if(!n?.type)throw new Hs({abiParameter:u});const{array:d,type:m}=n;if(m in a){if(o.has(m))throw new Ks({type:m});i.push({...u,type:`tuple${d??""}`,components:resolveStructs(a[m]??[],a,new Set([...o,m]))})}else{if(!isSolidityType(m))throw new Fs({type:m});i.push(u)}}}return i}function parseAbi(n){const a=parseStructs(n);const o=[];const i=n.length;for(let u=0;u<i;u++){const i=n[u];isStructSignature(i)||o.push(parseSignature$1(i,a))}return o}function parseAbiItem(n){let a;if("string"==typeof n)a=parseSignature$1(n);else{const o=parseStructs(n);const i=n.length;for(let u=0;u<i;u++){const i=n[u];if(!isStructSignature(i)){a=parseSignature$1(i,o);break}}}if(!a)throw new zs({signature:n});return a}function normalizeSignature$1(n){let a=!0;let o="";let i=0;let u="";let d=!1;for(let m=0;m<n.length;m++){const g=n[m];["(",")",","].includes(g)&&(a=!0);"("===g&&i++;")"===g&&i--;if(a)if(0!==i){if(" "!==g){u+=g;o+=g}else if(","!==n[m-1]&&","!==o&&",("!==o){o="";a=!1}}else if(" "===g&&["event","function",""].includes(u))u="";else{u+=g;if(")"===g){d=!0;break}}}if(!d)throw new dt("Unable to normalize signature.");return u}const toSignature=n=>{const a=(()=>"string"==typeof n?n:formatAbiItem(n))();return normalizeSignature$1(a)};function toSignatureHash(n){return hashSignature(toSignature(n))}const na=toSignatureHash;const toFunctionSelector=n=>slice$1(toSignatureHash(n),0,4);function getAbiItem(n){const{abi:a,args:o=[],name:i}=n;const u=isHex(i,{strict:!1});const d=a.filter(n=>u?"function"===n.type?toFunctionSelector(n)===i:"event"===n.type&&na(n)===i:"name"in n&&n.name===i);if(0===d.length)return;if(1===d.length)return d[0];let m;for(const g of d){if(!("inputs"in g))continue;if(!o||0===o.length){if(!g.inputs||0===g.inputs.length)return g;continue}if(!g.inputs)continue;if(0===g.inputs.length)continue;if(g.inputs.length!==o.length)continue;const n=o.every((n,a)=>{const o="inputs"in g&&g.inputs[a];return!!o&&isArgOfType$1(n,o)});if(n){if(m&&"inputs"in m&&m.inputs){const n=getAmbiguousTypes$1(g.inputs,m.inputs,o);if(n)throw new Lt({abiItem:g,type:n[0]},{abiItem:m,type:n[1]})}m=g}}return m||d[0]}function isArgOfType$1(n,a){const o=typeof n;const i=a.type;switch(i){case"address":return isAddress$1(n,{strict:!1});case"bool":return"boolean"===o;case"function":case"string":return"string"===o;default:return"tuple"===i&&"components"in a?Object.values(a.components).every((a,o)=>isArgOfType$1(Object.values(n)[o],a)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(i)?"number"===o||"bigint"===o:/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(i)?"string"===o||n instanceof Uint8Array:!!/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(i)&&Array.isArray(n)&&n.every(n=>isArgOfType$1(n,{...a,type:i.replace(/(\[[0-9]{0,}\])$/,"")}))}}function getAmbiguousTypes$1(n,a,o){for(const i in n){const u=n[i];const d=a[i];if("tuple"===u.type&&"tuple"===d.type&&"components"in u&&"components"in d)return getAmbiguousTypes$1(u.components,d.components,o[i]);const m=[u.type,d.type];const g=(()=>!(!m.includes("address")||!m.includes("bytes20"))||(m.includes("address")&&m.includes("string")||!(!m.includes("address")||!m.includes("bytes")))&&isAddress$1(o[i],{strict:!1}))();if(g)return m}}const ra="/docs/contract/decodeFunctionResult";function decodeFunctionResult(n){const{abi:a,args:o,functionName:i,data:u}=n;let d=a[0];if(i){const n=getAbiItem({abi:a,args:o,name:i});if(!n)throw new Mt(i,{docsPath:ra});d=n}if("function"!==d.type)throw new Mt(void 0,{docsPath:ra});if(!d.outputs)throw new zt(d.name,{docsPath:ra});const m=decodeAbiParameters(d.outputs,u);return m&&m.length>1?m:m&&1===m.length?m[0]:void 0}const sa="/docs/contract/encodeFunctionData";function prepareEncodeFunctionData(n){const{abi:a,args:o,functionName:i}=n;let u=a[0];if(i){const n=getAbiItem({abi:a,args:o,name:i});if(!n)throw new Mt(i,{docsPath:sa});u=n}if("function"!==u.type)throw new Mt(void 0,{docsPath:sa});return{abi:[u],functionName:toFunctionSelector(formatAbiItem$1(u))}}function encodeFunctionData(n){const{args:a}=n;const{abi:o,functionName:i}=(()=>1===n.abi.length&&n.functionName?.startsWith("0x")?n:prepareEncodeFunctionData(n))();const u=o[0];const d=i;const m="inputs"in u&&u.inputs?encodeAbiParameters(u.inputs,a??[]):void 0;return concatHex([d,m??"0x"])}function getChainContractAddress({blockNumber:n,chain:a,contract:o}){const i=a?.contracts?.[o];if(!i)throw new Bn({chain:a,contract:{name:o}});if(n&&i.blockCreated&&i.blockCreated>n)throw new Bn({blockNumber:n,chain:a,contract:{name:o,blockCreated:i.blockCreated}});return i.address}const aa={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."};const oa={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"};const ia={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function decodeErrorResult(n){const{abi:a,data:o}=n;const i=slice$1(o,0,4);if("0x"===i)throw new St;const u=[...a||[],oa,ia];const d=u.find(n=>"error"===n.type&&i===toFunctionSelector(formatAbiItem$1(n)));if(!d)throw new Pt(i,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:d,args:"inputs"in d&&d.inputs&&d.inputs.length>0?decodeAbiParameters(d.inputs,slice$1(o,4)):void 0,errorName:d.name}}function formatAbiItemWithArgs({abiItem:n,args:a,includeFunctionName:o=!0,includeName:i=!1}){if("name"in n&&"inputs"in n&&n.inputs)return`${o?n.name:""}(${n.inputs.map((n,o)=>`${i&&n.name?`${n.name}: `:""}${"object"==typeof a[o]?stringify$1$1(a[o]):a[o]}`).join(", ")})`}let ca=class extends dt{constructor(n,{account:a,docsPath:o,chain:i,data:u,gas:d,gasPrice:m,maxFeePerGas:g,maxPriorityFeePerGas:y,nonce:v,to:x,value:N,stateOverride:k}){const E=a?parseAccount(a):void 0;let S=prettyPrint({from:E?.address,to:x,value:"undefined"!=typeof N&&`${formatEther$1(N)} ${i?.nativeCurrency?.symbol||"ETH"}`,data:u,gas:d,gasPrice:"undefined"!=typeof m&&`${formatGwei(m)} gwei`,maxFeePerGas:"undefined"!=typeof g&&`${formatGwei(g)} gwei`,maxPriorityFeePerGas:"undefined"!=typeof y&&`${formatGwei(y)} gwei`,nonce:v});k&&(S+=`\n${prettyStateOverride(k)}`);super(n.shortMessage,{cause:n,docsPath:o,metaMessages:[...n.metaMessages?[...n.metaMessages," "]:[],"Raw Call Arguments:",S].filter(Boolean),name:"CallExecutionError"});Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this.cause=n}};let la=class extends dt{constructor(n,{abi:a,args:o,contractAddress:i,docsPath:u,functionName:d,sender:m}){const g=getAbiItem({abi:a,args:o,name:d});const y=g?formatAbiItemWithArgs({abiItem:g,args:o,includeFunctionName:!1,includeName:!1}):void 0;const v=g?formatAbiItem$1(g,{includeName:!0}):void 0;const x=prettyPrint({address:i&&getContractAddress(i),function:v,args:y&&"()"!==y&&`${[...Array(d?.length??0).keys()].map(()=>" ").join("")}${y}`,sender:m});super(n.shortMessage||`An unknown error occurred while executing the contract function "${d}".`,{cause:n,docsPath:u,metaMessages:[...n.metaMessages?[...n.metaMessages," "]:[],x&&"Contract Call:",x].filter(Boolean),name:"ContractFunctionExecutionError"});Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this.abi=a;this.args=o;this.cause=n;this.contractAddress=i;this.functionName=d;this.sender=m}};let ua=class extends dt{constructor({abi:n,data:a,functionName:o,message:i}){let u;let d;let m;let g;if(a&&"0x"!==a)try{d=decodeErrorResult({abi:n,data:a});const{abiItem:o,errorName:i,args:u}=d;if("Error"===i)g=u[0];else if("Panic"===i){const[n]=u;g=aa[n]}else{const n=o?formatAbiItem$1(o,{includeName:!0}):void 0;const a=o&&u?formatAbiItemWithArgs({abiItem:o,args:u,includeFunctionName:!1,includeName:!1}):void 0;m=[n?`Error: ${n}`:"",a&&"()"!==a?`       ${[...Array(i?.length??0).keys()].map(()=>" ").join("")}${a}`:""]}}catch(v){u=v}else i&&(g=i);let y;if(u instanceof Pt){y=u.signature;m=[`Unable to decode signature "${y}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${y}.`]}super(g&&"execution reverted"!==g||y?[`The contract function "${o}" reverted with the following ${y?"signature":"reason"}:`,g||y].join("\n"):`The contract function "${o}" reverted.`,{cause:u,metaMessages:m,name:"ContractFunctionRevertedError"});Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this.data=d;this.raw=a;this.reason=g;this.signature=y}};let da=class extends dt{constructor({functionName:n}){super(`The contract function "${n}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${n}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}};let ha=class extends dt{constructor({factory:n}){super("Deployment for counterfactual contract call failed"+(n?` for factory "${n}".`:""),{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}};let fa=class extends dt{constructor({data:n,message:a}){super(a||"",{name:"RawContractError"});Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this.data=n}};function isNullUniversalResolverError(n,a){if(!(n instanceof dt))return!1;const o=n.walk(n=>n instanceof ua);return o instanceof ua&&("ResolverNotFound"===o.data?.errorName||"ResolverWildcardNotSupported"===o.data?.errorName||"ResolverNotContract"===o.data?.errorName||"ResolverError"===o.data?.errorName||"HttpError"===o.data?.errorName||!!o.reason?.includes("Wildcard on non-extended resolvers is not supported")||"reverse"===a&&o.reason===aa[50])}function decodeFunctionData(n){const{abi:a,data:o}=n;const i=slice$1(o,0,4);const u=a.find(n=>"function"===n.type&&i===toFunctionSelector(formatAbiItem$1(n)));if(!u)throw new Ft(i,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:u.name,args:"inputs"in u&&u.inputs&&u.inputs.length>0?decodeAbiParameters(u.inputs,slice$1(o,4)):void 0}}const pa="/docs/contract/encodeErrorResult";function encodeErrorResult(n){const{abi:a,errorName:o,args:i}=n;let u=a[0];if(o){const n=getAbiItem({abi:a,args:i,name:o});if(!n)throw new It(o,{docsPath:pa});u=n}if("error"!==u.type)throw new It(void 0,{docsPath:pa});const d=formatAbiItem$1(u);const m=toFunctionSelector(d);let g="0x";if(i&&i.length>0){if(!u.inputs)throw new jt(u.name,{docsPath:pa});g=encodeAbiParameters(u.inputs,i)}return concatHex([m,g])}const ma="/docs/contract/encodeFunctionResult";function encodeFunctionResult(n){const{abi:a,functionName:o,result:i}=n;let u=a[0];if(o){const n=getAbiItem({abi:a,name:o});if(!n)throw new Mt(o,{docsPath:ma});u=n}if("function"!==u.type)throw new Mt(void 0,{docsPath:ma});if(!u.outputs)throw new zt(u.name,{docsPath:ma});const d=(()=>{if(0===u.outputs.length)return[];if(1===u.outputs.length)return[i];if(Array.isArray(i))return i;throw new qt(i)})();return encodeAbiParameters(u.outputs,d)}const ga="x-batch-gateway:true";async function localBatchGatewayRequest(n){const{data:a,ccipRequest:o}=n;const{args:[i]}=decodeFunctionData({abi:hs,data:a});const u=[];const d=[];await Promise.all(i.map(async(n,a)=>{try{d[a]=n.urls.includes(ga)?await localBatchGatewayRequest({data:n.data,ccipRequest:o}):await o(n);u[a]=!1}catch(i){u[a]=!0;d[a]=encodeError(i)}}));return encodeFunctionResult({abi:hs,functionName:"query",result:[u,d]})}function encodeError(n){return"HttpRequestError"===n.name&&n.status?encodeErrorResult({abi:hs,errorName:"HttpError",args:[n.status,n.shortMessage]}):encodeErrorResult({abi:[oa],errorName:"Error",args:["shortMessage"in n?n.shortMessage:n.message]})}function encodedLabelToLabelhash(n){if(66!==n.length)return null;if(0!==n.indexOf("["))return null;if(65!==n.indexOf("]"))return null;const a=`0x${n.slice(1,65)}`;return isHex(a)?a:null}function namehash$1(n){let a=new Uint8Array(32).fill(0);if(!n)return bytesToHex$1(a);const o=n.split(".");for(let i=o.length-1;i>=0;i-=1){const n=encodedLabelToLabelhash(o[i]);const u=n?toBytes$2(n):keccak256$1(stringToBytes(o[i]),"bytes");a=keccak256$1(concat$1([a,u]),"bytes")}return bytesToHex$1(a)}function encodeLabelhash(n){return`[${n.slice(2)}]`}function labelhash(n){const a=new Uint8Array(32).fill(0);return n?encodedLabelToLabelhash(n)||keccak256$1(stringToBytes(n)):bytesToHex$1(a)}function packetToBytes(n){const a=n.replace(/^\.|\.$/gm,"");if(0===a.length)return new Uint8Array(1);const o=new Uint8Array(stringToBytes(a).byteLength+2);let i=0;const u=a.split(".");for(let d=0;d<u.length;d++){let n=stringToBytes(u[d]);n.byteLength>255&&(n=stringToBytes(encodeLabelhash(labelhash(u[d]))));o[i]=n.length;o.set(n,i+1);i+=n.length+1}return o.byteLength!==i+1?o.slice(0,i+1):o}const ya=3;function getContractError(n,{abi:a,address:o,args:i,docsPath:u,functionName:d,sender:m}){const g=n instanceof fa?n:n instanceof dt?n.walk(n=>"data"in n)||n.walk():{};const{code:y,data:v,details:x,message:N,shortMessage:k}=g;const E=(()=>n instanceof St?new da({functionName:d}):[ya,gr.code].includes(y)&&(v||x||N||k)?new ua({abi:a,data:"object"==typeof v?v.data:v,functionName:d,message:g instanceof ir?x:k??N}):n)();return new la(E,{abi:a,args:i,contractAddress:o,docsPath:u,functionName:d,sender:m})}
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function isBytes(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name}function anumber(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function abytes(n,...a){if(!isBytes(n))throw new Error("Uint8Array expected");if(a.length>0&&!a.includes(n.length))throw new Error("Uint8Array expected of length "+a+", got length="+n.length)}function aexists(n,a=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(a&&n.finished)throw new Error("Hash#digest() has already been called")}function aoutput(n,a){abytes(n);const o=a.outputLen;if(n.length<o)throw new Error("digestInto() expects output buffer of length at least "+o)}function u32$2(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function clean(...n){for(let a=0;a<n.length;a++)n[a].fill(0)}const ba=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])();function byteSwap(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function byteSwap32(n){for(let a=0;a<n.length;a++)n[a]=byteSwap(n[a]);return n}const va=ba?n=>n:byteSwap32;function utf8ToBytes$2(n){if("string"!=typeof n)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(n))}function toBytes$3(n){"string"==typeof n&&(n=utf8ToBytes$2(n));abytes(n);return n}let wa=class{};function createHasher(n){const hashC=a=>n().update(toBytes$3(a)).digest();const a=n();hashC.outputLen=a.outputLen;hashC.blockLen=a.blockLen;hashC.create=()=>n();return hashC}const xa="0.1.1";function getVersion$2(){return xa}let Na=class n extends Error{constructor(a,o={}){const i=(()=>{if(o.cause instanceof n){if(o.cause.details)return o.cause.details;if(o.cause.shortMessage)return o.cause.shortMessage}return o.cause&&"details"in o.cause&&"string"==typeof o.cause.details?o.cause.details:o.cause?.message?o.cause.message:o.details})();const u=(()=>o.cause instanceof n&&o.cause.docsPath||o.docsPath)();const d="https://oxlib.sh";const m=`${d}${u??""}`;const g=[a||"An error occurred.",...o.metaMessages?["",...o.metaMessages]:[],...i||u?["",i?`Details: ${i}`:void 0,u?`See: ${m}`:void 0]:[]].filter(n=>"string"==typeof n).join("\n");super(g,o.cause?{cause:o.cause}:void 0);Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"});Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${getVersion$2()}`});this.cause=o.cause;this.details=i;this.docs=m;this.docsPath=u;this.shortMessage=a}walk(n){return walk(this,n)}};function walk(n,a){return a?.(n)?n:n&&"object"==typeof n&&"cause"in n&&n.cause?walk(n.cause,a):a?null:n}const ka="#__bigint";function stringify$2(n,a,o){return JSON.stringify(n,(n,a)=>"bigint"==typeof a?a.toString()+ka:a,o)}function assertSize$1(n,a){if(size$3(n)>a)throw new Sa({givenSize:size$3(n),maxSize:a})}const Ca={zero:48,nine:57,A:65,F:70,a:97,f:102};function charCodeToBase16(n){return n>=Ca.zero&&n<=Ca.nine?n-Ca.zero:n>=Ca.A&&n<=Ca.F?n-(Ca.A-10):n>=Ca.a&&n<=Ca.f?n-(Ca.a-10):void 0}function pad$1(n,a={}){const{dir:o,size:i=32}=a;if(0===i)return n;if(n.length>i)throw new Aa({size:n.length,targetSize:i,type:"Bytes"});const u=new Uint8Array(i);for(let d=0;d<i;d++){const a="right"===o;u[a?d:i-d-1]=n[a?d:n.length-d-1]}return u}function assertSize(n,a){if(size$2$1(n)>a)throw new Oa({givenSize:size$2$1(n),maxSize:a})}function assertStartOffset(n,a){if("number"==typeof a&&a>0&&a>size$2$1(n)-1)throw new Ra({offset:a,position:"start",size:size$2$1(n)})}function assertEndOffset(n,a,o){if("number"==typeof a&&"number"==typeof o&&size$2$1(n)!==o-a)throw new Ra({offset:o,position:"end",size:size$2$1(n)})}function pad(n,a={}){const{dir:o,size:i=32}=a;if(0===i)return n;const u=n.replace("0x","");if(u.length>2*i)throw new Ba({size:Math.ceil(u.length/2),targetSize:i,type:"Hex"});return`0x${u["right"===o?"padEnd":"padStart"](2*i,"0")}`}const Ea=new TextEncoder;function from$3(n){return n instanceof Uint8Array?n:"string"==typeof n?fromHex(n):fromArray(n)}function fromArray(n){return n instanceof Uint8Array?n:new Uint8Array(n)}function fromHex(n,a={}){const{size:o}=a;let i=n;if(o){assertSize(n,o);i=padRight(n,o)}let u=i.slice(2);u.length%2&&(u=`0${u}`);const d=u.length/2;const m=new Uint8Array(d);for(let g=0,y=0;g<d;g++){const n=charCodeToBase16(u.charCodeAt(y++));const a=charCodeToBase16(u.charCodeAt(y++));if(void 0===n||void 0===a)throw new Na(`Invalid byte sequence ("${u[y-2]}${u[y-1]}" in "${u}").`);m[g]=16*n+a}return m}function fromString$1(n,a={}){const{size:o}=a;const i=Ea.encode(n);if("number"==typeof o){assertSize$1(i,o);return padRight$1(i,o)}return i}function padRight$1(n,a){return pad$1(n,{dir:"right",size:a})}function size$3(n){return n.length}let Sa=class extends Na{constructor({givenSize:n,maxSize:a}){super(`Size cannot exceed \`${a}\` bytes. Given size: \`${n}\` bytes.`);Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}};let Aa=class extends Na{constructor({size:n,targetSize:a,type:o}){super(`${o.charAt(0).toUpperCase()}${o.slice(1).toLowerCase()} size (\`${n}\`) exceeds padding size (\`${a}\`).`);Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const _a=new TextEncoder;const Ta=Array.from({length:256},(n,a)=>a.toString(16).padStart(2,"0"));function assert$1(n,a={}){const{strict:o=!1}=a;if(!n)throw new Ia(n);if("string"!=typeof n)throw new Ia(n);if(o&&!/^0x[0-9a-fA-F]*$/.test(n))throw new Pa(n);if(!n.startsWith("0x"))throw new Pa(n)}function concat$2(...n){return`0x${n.reduce((n,a)=>n+a.replace("0x",""),"")}`}function fromBoolean(n,a={}){const o=`0x${Number(n)}`;if("number"==typeof a.size){assertSize(o,a.size);return padLeft(o,a.size)}return o}function fromBytes(n,a={}){let o="";for(let u=0;u<n.length;u++)o+=Ta[n[u]];const i=`0x${o}`;if("number"==typeof a.size){assertSize(i,a.size);return padRight(i,a.size)}return i}function fromNumber(n,a={}){const{signed:o,size:i}=a;const u=BigInt(n);let d;i?d=o?(1n<<8n*BigInt(i)-1n)-1n:2n**(8n*BigInt(i))-1n:"number"==typeof n&&(d=BigInt(Number.MAX_SAFE_INTEGER));const m="bigint"==typeof d&&o?-d-1n:0;if(d&&u>d||u<m){const a="bigint"==typeof n?"n":"";throw new ja({max:d?`${d}${a}`:void 0,min:`${m}${a}`,signed:o,size:i,value:`${n}${a}`})}const g=(o&&u<0?(1n<<BigInt(8*i))+BigInt(u):u).toString(16);const y=`0x${g}`;return i?padLeft(y,i):y}function fromString(n,a={}){return fromBytes(_a.encode(n),a)}function padLeft(n,a){return pad(n,{dir:"left",size:a})}function padRight(n,a){return pad(n,{dir:"right",size:a})}function slice(n,a,o,i={}){const{strict:u}=i;assertStartOffset(n,a);const d=`0x${n.replace("0x","").slice(2*(a??0),2*(o??n.length))}`;u&&assertEndOffset(d,a,o);return d}function size$2$1(n){return Math.ceil((n.length-2)/2)}function validate$1(n,a={}){const{strict:o=!1}=a;try{assert$1(n,{strict:o});return!0}catch{return!1}}let ja=class extends Na{constructor({max:n,min:a,signed:o,size:i,value:u}){super(`Number \`${u}\` is not in safe${i?` ${8*i}-bit`:""}${o?" signed":" unsigned"} integer range ${n?`(\`${a}\` to \`${n}\`)`:`(above \`${a}\`)`}`);Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};let Ia=class extends Na{constructor(n){super(`Value \`${"object"==typeof n?stringify$2(n):n}\` of type \`${typeof n}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}};let Pa=class extends Na{constructor(n){super(`Value \`${n}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}};let Oa=class extends Na{constructor({givenSize:n,maxSize:a}){super(`Size cannot exceed \`${a}\` bytes. Given size: \`${n}\` bytes.`);Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};let Ra=class extends Na{constructor({offset:n,position:a,size:o}){super(`Slice ${"start"===a?"starting":"ending"} at offset \`${n}\` is out-of-bounds (size: \`${o}\`).`);Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}};let Ba=class extends Na{constructor({size:n,targetSize:a,type:o}){super(`${o.charAt(0).toUpperCase()}${o.slice(1).toLowerCase()} size (\`${n}\`) exceeds padding size (\`${a}\`).`);Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function toRpc$1(n){return{address:n.address,amount:fromNumber(n.amount),index:fromNumber(n.index),validatorIndex:fromNumber(n.validatorIndex)}}function toRpc(n){return{..."bigint"==typeof n.baseFeePerGas&&{baseFeePerGas:fromNumber(n.baseFeePerGas)},..."bigint"==typeof n.blobBaseFee&&{blobBaseFee:fromNumber(n.blobBaseFee)},..."string"==typeof n.feeRecipient&&{feeRecipient:n.feeRecipient},..."bigint"==typeof n.gasLimit&&{gasLimit:fromNumber(n.gasLimit)},..."bigint"==typeof n.number&&{number:fromNumber(n.number)},..."bigint"==typeof n.prevRandao&&{prevRandao:fromNumber(n.prevRandao)},..."bigint"==typeof n.time&&{time:fromNumber(n.time)},...n.withdrawals&&{withdrawals:n.withdrawals.map(toRpc$1)}}}const Ma="0x82ad56cb";const za="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe";const Fa="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe";const La="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";function getCallError(n,{docsPath:a,...o}){const i=(()=>{const a=getNodeError(n,o);return a instanceof Xn?n:a})();return new ca(i,{docsPath:a,...o})}function withResolvers(){let resolve=()=>{};let reject=()=>{};const n=new Promise((n,a)=>{resolve=n;reject=a});return{promise:n,resolve:resolve,reject:reject}}const Da=new Map;function createBatchScheduler({fn:n,id:a,shouldSplitBatch:o,wait:i=0,sort:u}){const exec=async()=>{const a=getScheduler();flush();const o=a.map(({args:n})=>n);0!==o.length&&n(o).then(n=>{u&&Array.isArray(n)&&n.sort(u);for(let o=0;o<a.length;o++){const{resolve:i}=a[o];i?.([n[o],n])}}).catch(n=>{for(let o=0;o<a.length;o++){const{reject:i}=a[o];i?.(n)}})};const flush=()=>Da.delete(a);const getBatchedArgs=()=>getScheduler().map(({args:n})=>n);const getScheduler=()=>Da.get(a)||[];const setScheduler=n=>Da.set(a,[...getScheduler(),n]);return{flush:flush,async schedule(n){const{promise:a,resolve:u,reject:d}=withResolvers();const m=o?.([...getBatchedArgs(),n]);m&&exec();const g=getScheduler().length>0;if(g){setScheduler({args:n,resolve:u,reject:d});return a}setScheduler({args:n,resolve:u,reject:d});setTimeout(exec,i);return a}}}async function call(n,a){const{account:o=n.account,authorizationList:i,batch:u=Boolean(n.batch?.multicall),blockNumber:d,blockTag:m=n.experimental_blockTag??"latest",accessList:g,blobs:y,blockOverrides:v,code:x,data:N,factory:k,factoryData:E,gas:S,gasPrice:A,maxFeePerBlobGas:_,maxFeePerGas:j,maxPriorityFeePerGas:I,nonce:O,to:R,value:B,stateOverride:M,...z}=a;const L=o?parseAccount(o):void 0;if(x&&(k||E))throw new dt("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(x&&R)throw new dt("Cannot provide both `code` & `to` as parameters.");const D=x&&N;const W=k&&E&&R&&N;const H=D||W;const q=(()=>D?toDeploylessCallViaBytecodeData({code:x,data:N}):W?toDeploylessCallViaFactoryData({data:N,factory:k,factoryData:E,to:R}):N)();try{assertRequest(a);const o="bigint"==typeof d?numberToHex(d):void 0;const x=o||m;const N=v?toRpc(v):void 0;const k=serializeStateOverride(M);const E=n.chain?.formatters?.transactionRequest?.format;const D=E||formatTransactionRequest;const W=D({...extract(z,{format:E}),from:L?.address,accessList:g,authorizationList:i,blobs:y,data:q,gas:S,gasPrice:A,maxFeePerBlobGas:_,maxFeePerGas:j,maxPriorityFeePerGas:I,nonce:O,to:H?void 0:R,value:B});if(u&&shouldPerformMulticall({request:W})&&!k&&!N)try{return await scheduleMulticall(n,{...W,blockNumber:d,blockTag:m})}catch(G){if(!(G instanceof Fn||G instanceof Bn))throw G}const V=(()=>{const n=[W,x];return k&&N?[...n,k,N]:k?[...n,k]:N?[...n,{},N]:n})();const Z=await n.request({method:"eth_call",params:V});return"0x"===Z?{data:void 0}:{data:Z}}catch(G){const o=getRevertErrorData(G);const{offchainLookup:i,offchainLookupSignature:u}=await __vitePreload(async()=>{const{offchainLookup:n,offchainLookupSignature:a}=await Promise.resolve().then(()=>qo);return{offchainLookup:n,offchainLookupSignature:a}},void 0);if(!1!==n.ccipRead&&o?.slice(0,10)===u&&R)return{data:await i(n,{data:o,to:R})};if(H&&"0x101bb98d"===o?.slice(0,10))throw new ha({factory:k});throw getCallError(G,{...a,account:L,chain:n.chain})}}function shouldPerformMulticall({request:n}){const{data:a,to:o,...i}=n;return!(!a||a.startsWith(Ma)||!o||Object.values(i).filter(n=>"undefined"!=typeof n).length>0)}async function scheduleMulticall(n,a){const{batchSize:o=1024,wait:i=0}="object"==typeof n.batch?.multicall?n.batch.multicall:{};const{blockNumber:u,blockTag:d=n.experimental_blockTag??"latest",data:m,multicallAddress:g,to:y}=a;let v=g;if(!v){if(!n.chain)throw new Fn;v=getChainContractAddress({blockNumber:u,chain:n.chain,contract:"multicall3"})}const x="bigint"==typeof u?numberToHex(u):void 0;const N=x||d;const{schedule:k}=createBatchScheduler({id:`${n.uid}.${N}`,wait:i,shouldSplitBatch(n){const a=n.reduce((n,{data:a})=>n+(a.length-2),0);return a>2*o},fn:async a=>{const o=a.map(n=>({allowFailure:!0,callData:n.data,target:n.to}));const i=encodeFunctionData({abi:ds,args:[o],functionName:"aggregate3"});const u=await n.request({method:"eth_call",params:[{data:i,to:v},N]});return decodeFunctionResult({abi:ds,args:[o],functionName:"aggregate3",data:u||"0x"})}});const[{returnData:E,success:S}]=await k({data:m,to:y});if(!S)throw new fa({data:E});return"0x"===E?{data:void 0}:{data:E}}function toDeploylessCallViaBytecodeData(n){const{code:a,data:o}=n;return encodeDeployData({abi:parseAbi(["constructor(bytes, bytes)"]),bytecode:za,args:[a,o]})}function toDeploylessCallViaFactoryData(n){const{data:a,factory:o,factoryData:i,to:u}=n;return encodeDeployData({abi:parseAbi(["constructor(address, bytes, address, bytes)"]),bytecode:Fa,args:[u,a,o,i]})}function getRevertErrorData(n){if(!(n instanceof dt))return;const a=n.walk();return"object"==typeof a?.data?a.data?.data:a.data}async function readContract$1(n,a){const{abi:o,address:i,args:u,functionName:d,...m}=a;const g=encodeFunctionData({abi:o,args:u,functionName:d});try{const{data:a}=await getAction$1(n,call,"call")({...m,data:g,to:i});return decodeFunctionResult({abi:o,args:u,functionName:d,data:a||"0x"})}catch(y){throw getContractError(y,{abi:o,address:i,args:u,docsPath:"/docs/contract/readContract",functionName:d})}}async function getEnsAddress(n,a){const{blockNumber:o,blockTag:i,coinType:u,name:d,gatewayUrls:m,strict:g}=a;const{chain:y}=n;const v=(()=>{if(a.universalResolverAddress)return a.universalResolverAddress;if(!y)throw new Error("client chain not configured. universalResolverAddress is required.");return getChainContractAddress({blockNumber:o,chain:y,contract:"ensUniversalResolver"})})();const x=y?.ensTlds;if(x&&!x.some(n=>d.endsWith(n)))return null;try{const a=encodeFunctionData({abi:ys,functionName:"addr",...null!=u?{args:[namehash$1(d),BigInt(u)]}:{args:[namehash$1(d)]}});const g={address:v,abi:ps,functionName:"resolve",args:[toHex(packetToBytes(d)),a,m??[ga]],blockNumber:o,blockTag:i};const y=getAction$1(n,readContract$1,"readContract");const x=await y(g);if("0x"===x[0])return null;const N=decodeFunctionResult({abi:ys,args:null!=u?[namehash$1(d),BigInt(u)]:void 0,functionName:"addr",data:x[0]});return"0x"===N||"0x00"===trim(N)?null:N}catch(N){if(g)throw N;if(isNullUniversalResolverError(N,"resolve"))return null;throw N}}let $a=class extends dt{constructor({data:n}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(n)}`],name:"EnsAvatarInvalidMetadataError"})}};let Ua=class extends dt{constructor({reason:n}){super(`ENS NFT avatar URI is invalid. ${n}`,{name:"EnsAvatarInvalidNftUriError"})}};let Wa=class extends dt{constructor({uri:n}){super(`Unable to resolve ENS avatar URI "${n}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}};let Ha=class extends dt{constructor({namespace:n}){super(`ENS NFT avatar namespace "${n}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}};const qa=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/;const Ga=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/;const Va=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/;const Ka=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function isImageUri(n){try{const a=await fetch(n,{method:"HEAD"});if(200===a.status){const n=a.headers.get("content-type");return n?.startsWith("image/")}return!1}catch(a){return("object"!=typeof a||"undefined"==typeof a.response)&&!!globalThis.hasOwnProperty("Image")&&new Promise(a=>{const o=new Image;o.onload=()=>{a(!0)};o.onerror=()=>{a(!1)};o.src=n})}}function getGateway(n,a){return n?n.endsWith("/")?n.slice(0,-1):n:a}function resolveAvatarUri({uri:n,gatewayUrls:a}){const o=Va.test(n);if(o)return{uri:n,isOnChain:!0,isEncoded:o};const i=getGateway(a?.ipfs,"https://ipfs.io");const u=getGateway(a?.arweave,"https://arweave.net");const d=n.match(qa);const{protocol:m,subpath:g,target:y,subtarget:v=""}=d?.groups||{};const x="ipns:/"===m||"ipns/"===g;const N="ipfs:/"===m||"ipfs/"===g||Ga.test(n);if(n.startsWith("http")&&!x&&!N){let o=n;a?.arweave&&(o=n.replace(/https:\/\/arweave.net/g,a?.arweave));return{uri:o,isOnChain:!1,isEncoded:!1}}if((x||N)&&y)return{uri:`${i}/${x?"ipns":"ipfs"}/${y}${v}`,isOnChain:!1,isEncoded:!1};if("ar:/"===m&&y)return{uri:`${u}/${y}${v||""}`,isOnChain:!1,isEncoded:!1};let k=n.replace(Ka,"");k.startsWith("<svg")&&(k=`data:image/svg+xml;base64,${btoa(k)}`);if(k.startsWith("data:")||k.startsWith("{"))return{uri:k,isOnChain:!0,isEncoded:!1};throw new Wa({uri:n})}function getJsonImage(n){if("object"!=typeof n||!("image"in n)&&!("image_url"in n)&&!("image_data"in n))throw new $a({data:n});return n.image||n.image_url||n.image_data}async function getMetadataAvatarUri({gatewayUrls:n,uri:a}){try{const o=await fetch(a).then(n=>n.json());const i=await parseAvatarUri({gatewayUrls:n,uri:getJsonImage(o)});return i}catch{throw new Wa({uri:a})}}async function parseAvatarUri({gatewayUrls:n,uri:a}){const{uri:o,isOnChain:i}=resolveAvatarUri({uri:a,gatewayUrls:n});if(i)return o;const u=await isImageUri(o);if(u)return o;throw new Wa({uri:a})}function parseNftUri(n){let a=n;a.startsWith("did:nft:")&&(a=a.replace("did:nft:","").replace(/_/g,"/"));const[o,i,u]=a.split("/");const[d,m]=o.split(":");const[g,y]=i.split(":");if(!d||"eip155"!==d.toLowerCase())throw new Ua({reason:"Only EIP-155 supported"});if(!m)throw new Ua({reason:"Chain ID not found"});if(!y)throw new Ua({reason:"Contract address not found"});if(!u)throw new Ua({reason:"Token ID not found"});if(!g)throw new Ua({reason:"ERC namespace not found"});return{chainID:Number.parseInt(m),namespace:g.toLowerCase(),contractAddress:y,tokenID:u}}async function getNftTokenUri(n,{nft:a}){if("erc721"===a.namespace)return readContract$1(n,{address:a.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(a.tokenID)]});if("erc1155"===a.namespace)return readContract$1(n,{address:a.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(a.tokenID)]});throw new Ha({namespace:a.namespace})}async function parseAvatarRecord(n,{gatewayUrls:a,record:o}){return/eip155:/i.test(o)?parseNftAvatarUri(n,{gatewayUrls:a,record:o}):parseAvatarUri({uri:o,gatewayUrls:a})}async function parseNftAvatarUri(n,{gatewayUrls:a,record:o}){const i=parseNftUri(o);const u=await getNftTokenUri(n,{nft:i});const{uri:d,isOnChain:m,isEncoded:g}=resolveAvatarUri({uri:u,gatewayUrls:a});if(m&&(d.includes("data:application/json;base64,")||d.startsWith("{"))){const n=g?atob(d.replace("data:application/json;base64,","")):d;const o=JSON.parse(n);return parseAvatarUri({uri:getJsonImage(o),gatewayUrls:a})}let y=i.tokenID;"erc1155"===i.namespace&&(y=y.replace("0x","").padStart(64,"0"));return getMetadataAvatarUri({gatewayUrls:a,uri:d.replace(/(?:0x)?{id}/,y)})}async function getEnsText(n,a){const{blockNumber:o,blockTag:i,key:u,name:d,gatewayUrls:m,strict:g}=a;const{chain:y}=n;const v=(()=>{if(a.universalResolverAddress)return a.universalResolverAddress;if(!y)throw new Error("client chain not configured. universalResolverAddress is required.");return getChainContractAddress({blockNumber:o,chain:y,contract:"ensUniversalResolver"})})();const x=y?.ensTlds;if(x&&!x.some(n=>d.endsWith(n)))return null;try{const a={address:v,abi:ps,functionName:"resolve",args:[toHex(packetToBytes(d)),encodeFunctionData({abi:gs,functionName:"text",args:[namehash$1(d),u]}),m??[ga]],blockNumber:o,blockTag:i};const g=getAction$1(n,readContract$1,"readContract");const y=await g(a);if("0x"===y[0])return null;const x=decodeFunctionResult({abi:gs,functionName:"text",data:y[0]});return""===x?null:x}catch(N){if(g)throw N;if(isNullUniversalResolverError(N,"resolve"))return null;throw N}}async function getEnsAvatar(n,{blockNumber:a,blockTag:o,assetGatewayUrls:i,name:u,gatewayUrls:d,strict:m,universalResolverAddress:g}){const y=await getAction$1(n,getEnsText,"getEnsText")({blockNumber:a,blockTag:o,key:"avatar",name:u,universalResolverAddress:g,gatewayUrls:d,strict:m});if(!y)return null;try{return await parseAvatarRecord(n,{record:y,gatewayUrls:i})}catch{return null}}async function getEnsName(n,{address:a,blockNumber:o,blockTag:i,gatewayUrls:u,strict:d,universalResolverAddress:m}){let g=m;if(!g){if(!n.chain)throw new Error("client chain not configured. universalResolverAddress is required.");g=getChainContractAddress({blockNumber:o,chain:n.chain,contract:"ensUniversalResolver"})}const y=`${a.toLowerCase().substring(2)}.addr.reverse`;try{const d={address:g,abi:ms,functionName:"reverse",args:[toHex(packetToBytes(y))],blockNumber:o,blockTag:i};const m=getAction$1(n,readContract$1,"readContract");const[v,x]=u?await m({...d,args:[...d.args,u]}):await m(d);return a.toLowerCase()!==x.toLowerCase()?null:v}catch(v){if(d)throw v;if(isNullUniversalResolverError(v,"reverse"))return null;throw v}}async function getEnsResolver(n,a){const{blockNumber:o,blockTag:i,name:u}=a;const{chain:d}=n;const m=(()=>{if(a.universalResolverAddress)return a.universalResolverAddress;if(!d)throw new Error("client chain not configured. universalResolverAddress is required.");return getChainContractAddress({blockNumber:o,chain:d,contract:"ensUniversalResolver"})})();const g=d?.ensTlds;if(g&&!g.some(n=>u.endsWith(n)))throw new Error(`${u} is not a valid ENS TLD (${g?.join(", ")}) for chain "${d.name}" (id: ${d.id}).`);const[y]=await getAction$1(n,readContract$1,"readContract")({address:m,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[toHex(packetToBytes(u))],blockNumber:o,blockTag:i});return y}async function createAccessList(n,a){const{account:o=n.account,blockNumber:i,blockTag:u="latest",blobs:d,data:m,gas:g,gasPrice:y,maxFeePerBlobGas:v,maxFeePerGas:x,maxPriorityFeePerGas:N,to:k,value:E,...S}=a;const A=o?parseAccount(o):void 0;try{assertRequest(a);const o="bigint"==typeof i?numberToHex(i):void 0;const _=o||u;const j=n.chain?.formatters?.transactionRequest?.format;const I=j||formatTransactionRequest;const O=I({...extract(S,{format:j}),from:A?.address,blobs:d,data:m,gas:g,gasPrice:y,maxFeePerBlobGas:v,maxFeePerGas:x,maxPriorityFeePerGas:N,to:k,value:E});const R=await n.request({method:"eth_createAccessList",params:[O,_]});return{accessList:R.accessList,gasUsed:BigInt(R.gasUsed)}}catch(_){throw getCallError(_,{...a,account:A,chain:n.chain})}}function createFilterRequestScope(n,{method:a}){const o={};"fallback"===n.transport.type&&n.transport.onResponse?.(({method:n,response:i,status:u,transport:d})=>{"success"===u&&a===n&&(o[i]=d.request)});return a=>o[a]||n.request}async function createBlockFilter(n){const a=createFilterRequestScope(n,{method:"eth_newBlockFilter"});const o=await n.request({method:"eth_newBlockFilter"});return{id:o,request:a(o),type:"block"}}let Za=class extends dt{constructor(n){super(`Filter type "${n}" is not supported.`,{name:"FilterTypeNotSupportedError"})}};const Ya="/docs/contract/encodeEventTopics";function encodeEventTopics(n){const{abi:a,eventName:o,args:i}=n;let u=a[0];if(o){const n=getAbiItem({abi:a,name:o});if(!n)throw new Bt(o,{docsPath:Ya});u=n}if("event"!==u.type)throw new Bt(void 0,{docsPath:Ya});const d=formatAbiItem$1(u);const m=na(d);let g=[];if(i&&"inputs"in u){const n=u.inputs?.filter(n=>"indexed"in n&&n.indexed);const a=Array.isArray(i)?i:Object.values(i).length>0?n?.map(n=>i[n.name])??[]:[];a.length>0&&(g=n?.map((n,o)=>Array.isArray(a[o])?a[o].map((i,u)=>encodeArg({param:n,value:a[o][u]})):"undefined"!=typeof a[o]&&null!==a[o]?encodeArg({param:n,value:a[o]}):null)??[])}return[m,...g]}function encodeArg({param:n,value:a}){if("string"===n.type||"bytes"===n.type)return keccak256$1(toBytes$2(a));if("tuple"===n.type||n.type.match(/^(.*)\[(\d+)?\]$/))throw new Za(n.type);return encodeAbiParameters([n],[a])}async function createContractEventFilter(n,a){const{address:o,abi:i,args:u,eventName:d,fromBlock:m,strict:g,toBlock:y}=a;const v=createFilterRequestScope(n,{method:"eth_newFilter"});const x=d?encodeEventTopics({abi:i,args:u,eventName:d}):void 0;const N=await n.request({method:"eth_newFilter",params:[{address:o,fromBlock:"bigint"==typeof m?numberToHex(m):m,toBlock:"bigint"==typeof y?numberToHex(y):y,topics:x}]});return{abi:i,args:u,eventName:d,id:N,request:v(N),strict:Boolean(g),type:"event"}}async function createEventFilter(n,{address:a,args:o,event:i,events:u,fromBlock:d,strict:m,toBlock:g}={}){const y=u??(i?[i]:void 0);const v=createFilterRequestScope(n,{method:"eth_newFilter"});let x=[];if(y){const n=y.flatMap(n=>encodeEventTopics({abi:[n],eventName:n.name,args:o}));x=[n];i&&(x=x[0])}const N=await n.request({method:"eth_newFilter",params:[{address:a,fromBlock:"bigint"==typeof d?numberToHex(d):d,toBlock:"bigint"==typeof g?numberToHex(g):g,...x.length?{topics:x}:{}}]});return{abi:y,args:o,eventName:i?i.name:void 0,fromBlock:d,id:N,request:v(N),strict:Boolean(m),toBlock:g,type:"event"}}async function createPendingTransactionFilter(n){const a=createFilterRequestScope(n,{method:"eth_newPendingTransactionFilter"});const o=await n.request({method:"eth_newPendingTransactionFilter"});return{id:o,request:a(o),type:"transaction"}}async function estimateContractGas(n,a){const{abi:o,address:i,args:u,functionName:d,dataSuffix:m,...g}=a;const y=encodeFunctionData({abi:o,args:u,functionName:d});try{const a=await getAction$1(n,estimateGas$1,"estimateGas")({data:`${y}${m?m.replace("0x",""):""}`,to:i,...g});return a}catch(v){const n=g.account?parseAccount(g.account):void 0;throw getContractError(v,{abi:o,address:i,args:u,docsPath:"/docs/contract/estimateContractGas",functionName:d,sender:n?.address})}}async function getBlobBaseFee(n){const a=await n.request({method:"eth_blobBaseFee"});return BigInt(a)}const Ja=new Map;const Qa=new Map;function getCache(n){const buildCache=(n,a)=>({clear:()=>a.delete(n),get:()=>a.get(n),set:o=>a.set(n,o)});const a=buildCache(n,Ja);const o=buildCache(n,Qa);return{clear:()=>{a.clear();o.clear()},promise:a,response:o}}async function withCache(n,{cacheKey:a,cacheTime:o=Number.POSITIVE_INFINITY}){const i=getCache(a);const u=i.response.get();if(u&&o>0){const n=(new Date).getTime()-u.created.getTime();if(n<o)return u.data}let d=i.promise.get();if(!d){d=n();i.promise.set(d)}try{const n=await d;i.response.set({created:new Date,data:n});return n}finally{i.promise.clear()}}const cacheKey=n=>`blockNumber.${n}`;async function getBlockNumber(n,{cacheTime:a=n.cacheTime}={}){const o=await withCache(()=>n.request({method:"eth_blockNumber"}),{cacheKey:cacheKey(n.uid),cacheTime:a});return BigInt(o)}async function getBlockTransactionCount(n,{blockHash:a,blockNumber:o,blockTag:i="latest"}={}){const u=void 0!==o?numberToHex(o):void 0;let d;d=a?await n.request({method:"eth_getBlockTransactionCountByHash",params:[a]},{dedupe:!0}):await n.request({method:"eth_getBlockTransactionCountByNumber",params:[u||i]},{dedupe:Boolean(u)});return hexToNumber$1(d)}async function getCode(n,{address:a,blockNumber:o,blockTag:i="latest"}){const u=void 0!==o?numberToHex(o):void 0;const d=await n.request({method:"eth_getCode",params:[a,u||i]},{dedupe:Boolean(u)});if("0x"!==d)return d}function isAddressEqual(n,a){if(!isAddress$1(n,{strict:!1}))throw new Kt({address:n});if(!isAddress$1(a,{strict:!1}))throw new Kt({address:a});return n.toLowerCase()===a.toLowerCase()}const Xa="/docs/contract/decodeEventLog";function decodeEventLog(n){const{abi:a,data:o,strict:i,topics:u}=n;const d=i??!0;const[m,...g]=u;if(!m)throw new Ot({docsPath:Xa});const y=a.find(n=>"event"===n.type&&m===na(formatAbiItem$1(n)));if(!y||!("name"in y)||"event"!==y.type)throw new Rt(m,{docsPath:Xa});const{name:v,inputs:x}=y;const N=x?.some(n=>!("name"in n&&n.name));const k=N?[]:{};const E=x.map((n,a)=>[n,a]).filter(([n])=>"indexed"in n&&n.indexed);for(let _=0;_<E.length;_++){const[n,a]=E[_];const o=g[_];if(!o)throw new Ut({abiItem:y,param:n});k[N?a:n.name||a]=decodeTopic({param:n,value:o})}const S=x.filter(n=>!("indexed"in n&&n.indexed));if(S.length>0)if(o&&"0x"!==o)try{const n=decodeAbiParameters(S,o);if(n)if(N)for(let a=0;a<x.length;a++)k[a]=k[a]??n.shift();else for(let a=0;a<S.length;a++)k[S[a].name]=n[a]}catch(A){if(d){if(A instanceof Et||A instanceof Pn)throw new $t({abiItem:y,data:o,params:S,size:size$4(o)});throw A}}else if(d)throw new $t({abiItem:y,data:"0x",params:S,size:0});return{eventName:v,args:Object.values(k).length>0?k:void 0}}function decodeTopic({param:n,value:a}){if("string"===n.type||"bytes"===n.type||"tuple"===n.type||n.type.match(/^(.*)\[(\d+)?\]$/))return a;const o=decodeAbiParameters([n],a)||[];return o[0]}function parseEventLogs(n){const{abi:a,args:o,logs:i,strict:u=!0}=n;const d=(()=>{if(n.eventName)return Array.isArray(n.eventName)?n.eventName:[n.eventName]})();return i.map(n=>{try{const i=a.find(a=>"event"===a.type&&n.topics[0]===na(a));if(!i)return null;const m=decodeEventLog({...n,abi:[i],strict:u});return d&&!d.includes(m.eventName)?null:includesArgs({args:m.args,inputs:i.inputs,matchArgs:o})?{...m,...n}:null}catch(i){let a;let o;if(i instanceof Rt)return null;if(i instanceof $t||i instanceof Ut){if(u)return null;a=i.abiItem.name;o=i.abiItem.inputs?.some(n=>!("name"in n&&n.name))}return{...n,args:o?[]:{},eventName:a}}}).filter(Boolean)}function includesArgs(n){const{args:a,inputs:o,matchArgs:i}=n;if(!i)return!0;if(!a)return!1;function isEqual(n,a,o){try{return"address"===n.type?isAddressEqual(a,o):"string"===n.type||"bytes"===n.type?keccak256$1(toBytes$2(a))===o:a===o}catch{return!1}}return Array.isArray(a)&&Array.isArray(i)?i.every((n,i)=>{if(null==n)return!0;const u=o[i];if(!u)return!1;const d=Array.isArray(n)?n:[n];return d.some(n=>isEqual(u,n,a[i]))}):"object"==typeof a&&!Array.isArray(a)&&"object"==typeof i&&!Array.isArray(i)&&Object.entries(i).every(([n,i])=>{if(null==i)return!0;const u=o.find(a=>a.name===n);if(!u)return!1;const d=Array.isArray(i)?i:[i];return d.some(o=>isEqual(u,o,a[n]))})}function formatLog$1(n,{args:a,eventName:o}={}){return{...n,blockHash:n.blockHash?n.blockHash:null,blockNumber:n.blockNumber?BigInt(n.blockNumber):null,logIndex:n.logIndex?Number(n.logIndex):null,transactionHash:n.transactionHash?n.transactionHash:null,transactionIndex:n.transactionIndex?Number(n.transactionIndex):null,...o?{args:a,eventName:o}:{}}}async function getLogs(n,{address:a,blockHash:o,fromBlock:i,toBlock:u,event:d,events:m,args:g,strict:y}={}){const v=y??!1;const x=m??(d?[d]:void 0);let N=[];if(x){const n=x.flatMap(n=>encodeEventTopics({abi:[n],eventName:n.name,args:m?void 0:g}));N=[n];d&&(N=N[0])}let k;k=o?await n.request({method:"eth_getLogs",params:[{address:a,topics:N,blockHash:o}]}):await n.request({method:"eth_getLogs",params:[{address:a,topics:N,fromBlock:"bigint"==typeof i?numberToHex(i):i,toBlock:"bigint"==typeof u?numberToHex(u):u}]});const E=k.map(n=>formatLog$1(n));return x?parseEventLogs({abi:x,args:g,logs:E,strict:v}):E}async function getContractEvents(n,a){const{abi:o,address:i,args:u,blockHash:d,eventName:m,fromBlock:g,toBlock:y,strict:v}=a;const x=m?getAbiItem({abi:o,name:m}):void 0;const N=x?void 0:o.filter(n=>"event"===n.type);return getAction$1(n,getLogs,"getLogs")({address:i,args:u,blockHash:d,event:x,events:N,fromBlock:g,toBlock:y,strict:v})}let eo=class extends dt{constructor({address:n}){super(`No EIP-712 domain found on contract "${n}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${n}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}};async function getEip712Domain(n,a){const{address:o,factory:i,factoryData:u}=a;try{const[a,d,m,g,y,v,x]=await getAction$1(n,readContract$1,"readContract")({abi:to,address:o,functionName:"eip712Domain",factory:i,factoryData:u});return{domain:{name:d,version:m,chainId:Number(g),verifyingContract:y,salt:v},extensions:x,fields:a}}catch(d){const n=d;if("ContractFunctionExecutionError"===n.name&&"ContractFunctionZeroDataError"===n.cause.name)throw new eo({address:o});throw n}}const to=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function formatFeeHistory(n){return{baseFeePerGas:n.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:n.gasUsedRatio,oldestBlock:BigInt(n.oldestBlock),reward:n.reward?.map(n=>n.map(n=>BigInt(n)))}}async function getFeeHistory(n,{blockCount:a,blockNumber:o,blockTag:i="latest",rewardPercentiles:u}){const d="bigint"==typeof o?numberToHex(o):void 0;const m=await n.request({method:"eth_feeHistory",params:[numberToHex(a),d||i,u]},{dedupe:Boolean(d)});return formatFeeHistory(m)}async function getFilterChanges(n,{filter:a}){const o="strict"in a&&a.strict;const i=await a.request({method:"eth_getFilterChanges",params:[a.id]});if("string"==typeof i[0])return i;const u=i.map(n=>formatLog$1(n));return"abi"in a&&a.abi?parseEventLogs({abi:a.abi,logs:u,strict:o}):u}async function getFilterLogs(n,{filter:a}){const o=a.strict??!1;const i=await a.request({method:"eth_getFilterLogs",params:[a.id]});const u=i.map(n=>formatLog$1(n));return a.abi?parseEventLogs({abi:a.abi,logs:u,strict:o}):u}async function getStorageAt(n,{address:a,blockNumber:o,blockTag:i="latest",slot:u}){const d=void 0!==o?numberToHex(o):void 0;const m=await n.request({method:"eth_getStorageAt",params:[a,u,d||i]});return m}async function getTransaction(n,{blockHash:a,blockNumber:o,blockTag:i,hash:u,index:d}){const m=i||"latest";const g=void 0!==o?numberToHex(o):void 0;let y=null;y=u?await n.request({method:"eth_getTransactionByHash",params:[u]},{dedupe:!0}):a?await n.request({method:"eth_getTransactionByBlockHashAndIndex",params:[a,numberToHex(d)]},{dedupe:!0}):await n.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[g||m,numberToHex(d)]},{dedupe:Boolean(g)});if(!y)throw new rr({blockHash:a,blockNumber:o,blockTag:m,hash:u,index:d});const v=n.chain?.formatters?.transaction?.format||formatTransaction;return v(y)}async function getTransactionConfirmations(n,{hash:a,transactionReceipt:o}){const[i,u]=await Promise.all([getAction$1(n,getBlockNumber,"getBlockNumber")({}),a?getAction$1(n,getTransaction,"getTransaction")({hash:a}):void 0]);const d=o?.blockNumber||u?.blockNumber;return d?i-d+1n:0n}const no={"0x0":"reverted","0x1":"success"};function formatTransactionReceipt$1(n){const a={...n,blockNumber:n.blockNumber?BigInt(n.blockNumber):null,contractAddress:n.contractAddress?n.contractAddress:null,cumulativeGasUsed:n.cumulativeGasUsed?BigInt(n.cumulativeGasUsed):null,effectiveGasPrice:n.effectiveGasPrice?BigInt(n.effectiveGasPrice):null,gasUsed:n.gasUsed?BigInt(n.gasUsed):null,logs:n.logs?n.logs.map(n=>formatLog$1(n)):null,to:n.to?n.to:null,transactionIndex:n.transactionIndex?hexToNumber$1(n.transactionIndex):null,status:n.status?no[n.status]:null,type:n.type?Hr[n.type]||n.type:null};n.blobGasPrice&&(a.blobGasPrice=BigInt(n.blobGasPrice));n.blobGasUsed&&(a.blobGasUsed=BigInt(n.blobGasUsed));return a}async function getTransactionReceipt(n,{hash:a}){const o=await n.request({method:"eth_getTransactionReceipt",params:[a]},{dedupe:!0});if(!o)throw new sr({hash:a});const i=n.chain?.formatters?.transactionReceipt?.format||formatTransactionReceipt$1;return i(o)}async function multicall$1(n,a){const{account:o,allowFailure:i=!0,batchSize:u,blockNumber:d,blockTag:m,multicallAddress:g,stateOverride:y}=a;const v=a.contracts;const x=u??("object"==typeof n.batch?.multicall&&n.batch.multicall.batchSize||1024);let N=g;if(!N){if(!n.chain)throw new Error("client chain not configured. multicallAddress is required.");N=getChainContractAddress({blockNumber:d,chain:n.chain,contract:"multicall3"})}const k=[[]];let E=0;let S=0;for(let I=0;I<v.length;I++){const{abi:n,address:a,args:u,functionName:d}=v[I];try{const o=encodeFunctionData({abi:n,args:u,functionName:d});S+=(o.length-2)/2;if(x>0&&S>x&&k[E].length>0){E++;S=(o.length-2)/2;k[E]=[]}k[E]=[...k[E],{allowFailure:!0,callData:o,target:a}]}catch(j){const m=getContractError(j,{abi:n,address:a,args:u,docsPath:"/docs/contract/multicall",functionName:d,sender:o});if(!i)throw m;k[E]=[...k[E],{allowFailure:!0,callData:"0x",target:a}]}}const A=await Promise.allSettled(k.map(a=>getAction$1(n,readContract$1,"readContract")({abi:ds,account:o,address:N,args:[a],blockNumber:d,blockTag:m,functionName:"aggregate3",stateOverride:y})));const _=[];for(let I=0;I<A.length;I++){const n=A[I];if("rejected"===n.status){if(!i)throw n.reason;for(let a=0;a<k[I].length;a++)_.push({status:"failure",error:n.reason,result:void 0});continue}const a=n.value;for(let o=0;o<a.length;o++){const{returnData:n,success:u}=a[o];const{callData:d}=k[I][o];const{abi:m,address:g,functionName:y,args:x}=v[_.length];try{if("0x"===d)throw new St;if(!u)throw new fa({data:n});const a=decodeFunctionResult({abi:m,args:x,data:n,functionName:y});_.push(i?{result:a,status:"success"}:a)}catch(j){const n=getContractError(j,{abi:m,address:g,args:x,docsPath:"/docs/contract/multicall",functionName:y});if(!i)throw n;_.push({error:n,result:void 0,status:"failure"})}}}if(_.length!==v.length)throw new dt("multicall results mismatch");return _}async function simulateBlocks(n,a){const{blockNumber:o,blockTag:i=n.experimental_blockTag??"latest",blocks:u,returnFullTransactions:d,traceTransfers:m,validation:g}=a;try{const a=[];for(const n of u){const o=n.blockOverrides?toRpc(n.blockOverrides):void 0;const i=n.calls.map(n=>{const a=n;const o=a.account?parseAccount(a.account):void 0;const i=a.abi?encodeFunctionData(a):a.data;const u={...a,data:a.dataSuffix?concat$1([i||"0x",a.dataSuffix]):i,from:a.from??o?.address};assertRequest(u);return formatTransactionRequest(u)});const u=n.stateOverrides?serializeStateOverride(n.stateOverrides):void 0;a.push({blockOverrides:o,calls:i,stateOverrides:u})}const y="bigint"==typeof o?numberToHex(o):void 0;const v=y||i;const x=await n.request({method:"eth_simulateV1",params:[{blockStateCalls:a,returnFullTransactions:d,traceTransfers:m,validation:g},v]});return x.map((n,a)=>({...formatBlock$1(n),calls:n.calls.map((n,o)=>{const{abi:i,args:d,functionName:m,to:g}=u[a].calls[o];const y=n.error?.data??n.returnData;const v=BigInt(n.gasUsed);const x=n.logs?.map(n=>formatLog$1(n));const N="0x1"===n.status?"success":"failure";const k=i&&"success"===N&&"0x"!==y?decodeFunctionResult({abi:i,data:y,functionName:m}):null;const E=(()=>{if("success"===N)return;let a;"0x"===n.error?.data?a=new St:n.error&&(a=new fa(n.error));return a?getContractError(a,{abi:i??[],address:g??"0x",args:d,functionName:m??"<unknown>"}):void 0})();return{data:y,gasUsed:v,logs:x,status:N,..."success"===N?{result:k}:{error:E}}})}))}catch(y){const n=y;const a=getNodeError(n,{});if(a instanceof Xn)throw n;throw a}}const ro=BigInt(2**32-1);const so=BigInt(32);function fromBig$2(n,a=!1){return a?{h:Number(n&ro),l:Number(n>>so&ro)}:{h:0|Number(n>>so&ro),l:0|Number(n&ro)}}function split$2(n,a=!1){const o=n.length;let i=new Uint32Array(o);let u=new Uint32Array(o);for(let d=0;d<o;d++){const{h:o,l:m}=fromBig$2(n[d],a);[i[d],u[d]]=[o,m]}return[i,u]}const rotlSH$2=(n,a,o)=>n<<o|a>>>32-o;const rotlSL$2=(n,a,o)=>a<<o|n>>>32-o;const rotlBH$2=(n,a,o)=>a<<o-32|n>>>64-o;const rotlBL$2=(n,a,o)=>n<<o-32|a>>>64-o;const ao=BigInt(0);const oo=BigInt(1);const io=BigInt(2);const co=BigInt(7);const lo=BigInt(256);const uo=BigInt(113);const ho=[];const fo=[];const po=[];for(let sL=0,aL=oo,oL=1,iL=0;sL<24;sL++){[oL,iL]=[iL,(2*oL+3*iL)%5];ho.push(2*(5*iL+oL));fo.push((sL+1)*(sL+2)/2%64);let n=ao;for(let a=0;a<7;a++){aL=(aL<<oo^(aL>>co)*uo)%lo;aL&io&&(n^=oo<<(oo<<BigInt(a))-oo)}po.push(n)}const mo=split$2(po,!0);const go=mo[0];const yo=mo[1];const rotlH$2=(n,a,o)=>o>32?rotlBH$2(n,a,o):rotlSH$2(n,a,o);const rotlL$2=(n,a,o)=>o>32?rotlBL$2(n,a,o):rotlSL$2(n,a,o);function keccakP$2(n,a=24){const o=new Uint32Array(10);for(let i=24-a;i<24;i++){for(let i=0;i<10;i++)o[i]=n[i]^n[i+10]^n[i+20]^n[i+30]^n[i+40];for(let i=0;i<10;i+=2){const a=(i+8)%10;const u=(i+2)%10;const d=o[u];const m=o[u+1];const g=rotlH$2(d,m,1)^o[a];const y=rotlL$2(d,m,1)^o[a+1];for(let o=0;o<50;o+=10){n[i+o]^=g;n[i+o+1]^=y}}let a=n[2];let u=n[3];for(let o=0;o<24;o++){const i=fo[o];const d=rotlH$2(a,u,i);const m=rotlL$2(a,u,i);const g=ho[o];a=n[g];u=n[g+1];n[g]=d;n[g+1]=m}for(let i=0;i<50;i+=10){for(let a=0;a<10;a++)o[a]=n[i+a];for(let a=0;a<10;a++)n[i+a]^=~o[(a+2)%10]&o[(a+4)%10]}n[0]^=go[i];n[1]^=yo[i]}clean(o)}let bo=class n extends wa{constructor(n,a,o,i=!1,u=24){super();this.pos=0;this.posOut=0;this.finished=!1;this.destroyed=!1;this.enableXOF=!1;this.blockLen=n;this.suffix=a;this.outputLen=o;this.enableXOF=i;this.rounds=u;anumber(o);if(!(0<n&&n<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200);this.state32=u32$2(this.state)}clone(){return this._cloneInto()}keccak(){va(this.state32);keccakP$2(this.state32,this.rounds);va(this.state32);this.posOut=0;this.pos=0}update(n){aexists(this);n=toBytes$3(n);abytes(n);const{blockLen:a,state:o}=this;const i=n.length;for(let u=0;u<i;){const d=Math.min(a-this.pos,i-u);for(let a=0;a<d;a++)o[this.pos++]^=n[u++];this.pos===a&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:n,suffix:a,pos:o,blockLen:i}=this;n[o]^=a;128&a&&o===i-1&&this.keccak();n[i-1]^=128;this.keccak()}writeInto(n){aexists(this,!1);abytes(n);this.finish();const a=this.state;const{blockLen:o}=this;for(let i=0,u=n.length;i<u;){this.posOut>=o&&this.keccak();const d=Math.min(o-this.posOut,u-i);n.set(a.subarray(this.posOut,this.posOut+d),i);this.posOut+=d;i+=d}return n}xofInto(n){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(n)}xof(n){anumber(n);return this.xofInto(new Uint8Array(n))}digestInto(n){aoutput(n,this);if(this.finished)throw new Error("digest() was already called");this.writeInto(n);this.destroy();return n}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0;clean(this.state)}_cloneInto(a){const{blockLen:o,suffix:i,outputLen:u,rounds:d,enableXOF:m}=this;a||(a=new n(o,i,u,m,d));a.state32.set(this.state32);a.pos=this.pos;a.posOut=this.posOut;a.finished=this.finished;a.rounds=d;a.suffix=i;a.outputLen=u;a.enableXOF=m;a.destroyed=this.destroyed;return a}};const gen$2=(n,a,o)=>createHasher(()=>new bo(a,n,o));const vo=(()=>gen$2(1,136,32))();function keccak256$2(n,a={}){const{as:o=("string"==typeof n?"Hex":"Bytes")}=a;const i=vo(from$3(n));return"Bytes"===o?i:fromBytes(i)}let wo=class extends Map{constructor(n){super();Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this.maxSize=n}get(n){const a=super.get(n);if(super.has(n)&&void 0!==a){this.delete(n);super.set(n,a)}return a}set(n,a){super.set(n,a);if(this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}};const xo={checksum:new wo(8192)};const No=xo.checksum;const ko=/^0x[a-fA-F0-9]{40}$/;function assert$2(n,a={}){const{strict:o=!0}=a;if(!ko.test(n))throw new Co({address:n,cause:new Eo});if(o){if(n.toLowerCase()===n)return;if(checksum(n)!==n)throw new Co({address:n,cause:new So})}}function checksum(n){if(No.has(n))return No.get(n);assert$2(n,{strict:!1});const a=n.substring(2).toLowerCase();const o=keccak256$2(fromString$1(a),{as:"Bytes"});const i=a.split("");for(let d=0;d<40;d+=2){o[d>>1]>>4>=8&&i[d]&&(i[d]=i[d].toUpperCase());(15&o[d>>1])>=8&&i[d+1]&&(i[d+1]=i[d+1].toUpperCase())}const u=`0x${i.join("")}`;No.set(n,u);return u}function validate(n,a={}){const{strict:o=!0}=a??{};try{assert$2(n,{strict:o});return!0}catch{return!1}}let Co=class extends Na{constructor({address:n,cause:a}){super(`Address "${n}" is invalid.`,{cause:a});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}};let Eo=class extends Na{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value.");Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}};let So=class extends Na{constructor(){super("Address does not match its checksum counterpart.");Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}};function normalizeSignature(n){let a=!0;let o="";let i=0;let u="";let d=!1;for(let m=0;m<n.length;m++){const g=n[m];["(",")",","].includes(g)&&(a=!0);"("===g&&i++;")"===g&&i--;if(a)if(0!==i){if(" "!==g){u+=g;o+=g}else if(","!==n[m-1]&&","!==o&&",("!==o){o="";a=!1}}else if(" "===g&&["event","function","error",""].includes(u))u="";else{u+=g;if(")"===g){d=!0;break}}}if(!d)throw new Na("Unable to normalize signature.");return u}function isArgOfType(n,a){const o=typeof n;const i=a.type;switch(i){case"address":return validate(n,{strict:!1});case"bool":return"boolean"===o;case"function":case"string":return"string"===o;default:return"tuple"===i&&"components"in a?Object.values(a.components).every((a,o)=>isArgOfType(Object.values(n)[o],a)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(i)?"number"===o||"bigint"===o:/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(i)?"string"===o||n instanceof Uint8Array:!!/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(i)&&Array.isArray(n)&&n.every(n=>isArgOfType(n,{...a,type:i.replace(/(\[[0-9]{0,}\])$/,"")}))}}function getAmbiguousTypes(n,a,o){for(const i in n){const u=n[i];const d=a[i];if("tuple"===u.type&&"tuple"===d.type&&"components"in u&&"components"in d)return getAmbiguousTypes(u.components,d.components,o[i]);const m=[u.type,d.type];const g=(()=>!(!m.includes("address")||!m.includes("bytes20"))||(m.includes("address")&&m.includes("string")||!(!m.includes("address")||!m.includes("bytes")))&&validate(o[i],{strict:!1}))();if(g)return m}}function from$2(n,a={}){const{prepare:o=!0}=a;const i=(()=>Array.isArray(n)||"string"==typeof n?parseAbiItem(n):n)();return{...i,...o?{hash:getSignatureHash(i)}:{}}}function fromAbi$1(n,a,o){const{args:i=[],prepare:u=!0}=o??{};const d=validate$1(a,{strict:!1});const m=n.filter(n=>d?"function"===n.type||"error"===n.type?getSelector$1(n)===slice(a,0,4):"event"===n.type&&getSignatureHash(n)===a:"name"in n&&n.name===a);if(0===m.length)throw new _o({name:a});if(1===m.length)return{...m[0],...u?{hash:getSignatureHash(m[0])}:{}};let g;for(const v of m){if(!("inputs"in v))continue;if(!i||0===i.length){if(!v.inputs||0===v.inputs.length)return{...v,...u?{hash:getSignatureHash(v)}:{}};continue}if(!v.inputs)continue;if(0===v.inputs.length)continue;if(v.inputs.length!==i.length)continue;const n=i.every((n,a)=>{const o="inputs"in v&&v.inputs[a];return!!o&&isArgOfType(n,o)});if(n){if(g&&"inputs"in g&&g.inputs){const n=getAmbiguousTypes(v.inputs,g.inputs,i);if(n)throw new Ao({abiItem:v,type:n[0]},{abiItem:g,type:n[1]})}g=v}}const y=(()=>{if(g)return g;const[n,...a]=m;return{...n,overloads:a}})();if(!y)throw new _o({name:a});return{...y,...u?{hash:getSignatureHash(y)}:{}}}function getSelector$1(n){return slice(getSignatureHash(n),0,4)}function getSignature(n){const a=(()=>"string"==typeof n?n:formatAbiItem(n))();return normalizeSignature(a)}function getSignatureHash(n){return"string"!=typeof n&&"hash"in n&&n.hash?n.hash:keccak256$2(fromString(getSignature(n)))}let Ao=class extends Na{constructor(n,a){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${n.type}\` in \`${normalizeSignature(formatAbiItem(n.abiItem))}\`, and`,`\`${a.type}\` in \`${normalizeSignature(formatAbiItem(a.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}};let _o=class extends Na{constructor({name:n,data:a,type:o="item"}){const i=(()=>n?` with name "${n}"`:a?` with data "${a}"`:"")();super(`ABI ${o}${i} not found.`);Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}};const To=/^(.*)\[([0-9]*)\]$/;const jo=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/;const Io=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function prepareParameters({checksumAddress:n,parameters:a,values:o}){const i=[];for(let u=0;u<a.length;u++)i.push(prepareParameter({checksumAddress:n,parameter:a[u],value:o[u]}));return i}function prepareParameter({checksumAddress:n=!1,parameter:a,value:o}){const i=a;const u=getArrayComponents(i.type);if(u){const[a,d]=u;return encodeArray(o,{checksumAddress:n,length:a,parameter:{...i,type:d}})}if("tuple"===i.type)return encodeTuple(o,{checksumAddress:n,parameter:i});if("address"===i.type)return encodeAddress(o,{checksum:n});if("bool"===i.type)return encodeBoolean(o);if(i.type.startsWith("uint")||i.type.startsWith("int")){const n=i.type.startsWith("int");const[,,a="256"]=Io.exec(i.type)??[];return encodeNumber(o,{signed:n,size:Number(a)})}if(i.type.startsWith("bytes"))return encodeBytes$2(o,{type:i.type});if("string"===i.type)return encodeString(o);throw new Mo(i.type)}function encode$3(n){let a=0;for(let d=0;d<n.length;d++){const{dynamic:o,encoded:i}=n[d];a+=o?32:size$2$1(i)}const o=[];const i=[];let u=0;for(let d=0;d<n.length;d++){const{dynamic:m,encoded:g}=n[d];if(m){o.push(fromNumber(a+u,{size:32}));i.push(g);u+=size$2$1(g)}else o.push(g)}return concat$2(...o,...i)}function encodeAddress(n,a){const{checksum:o=!1}=a;assert$2(n,{strict:o});return{dynamic:!1,encoded:padLeft(n.toLowerCase())}}function encodeArray(n,a){const{checksumAddress:o,length:i,parameter:u}=a;const d=null===i;if(!Array.isArray(n))throw new Bo(n);if(!d&&n.length!==i)throw new Po({expectedLength:i,givenLength:n.length,type:`${u.type}[${i}]`});let m=!1;const g=[];for(let y=0;y<n.length;y++){const a=prepareParameter({checksumAddress:o,parameter:u,value:n[y]});a.dynamic&&(m=!0);g.push(a)}if(d||m){const n=encode$3(g);if(d){const a=fromNumber(g.length,{size:32});return{dynamic:!0,encoded:g.length>0?concat$2(a,n):a}}if(m)return{dynamic:!0,encoded:n}}return{dynamic:!1,encoded:concat$2(...g.map(({encoded:n})=>n))}}function encodeBytes$2(n,{type:a}){const[,o]=a.split("bytes");const i=size$2$1(n);if(!o){let a=n;i%32!=0&&(a=padRight(a,32*Math.ceil((n.length-2)/2/32)));return{dynamic:!0,encoded:concat$2(padLeft(fromNumber(i,{size:32})),a)}}if(i!==Number.parseInt(o))throw new Oo({expectedSize:Number.parseInt(o),value:n});return{dynamic:!1,encoded:padRight(n)}}function encodeBoolean(n){if("boolean"!=typeof n)throw new Na(`Invalid boolean value: "${n}" (type: ${typeof n}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:padLeft(fromBoolean(n))}}function encodeNumber(n,{signed:a,size:o}){if("number"==typeof o){const i=2n**(BigInt(o)-(a?1n:0n))-1n;const u=a?-i-1n:0n;if(n>i||n<u)throw new ja({max:i.toString(),min:u.toString(),signed:a,size:o/8,value:n.toString()})}return{dynamic:!1,encoded:fromNumber(n,{size:32,signed:a})}}function encodeString(n){const a=fromString(n);const o=Math.ceil(size$2$1(a)/32);const i=[];for(let u=0;u<o;u++)i.push(padRight(slice(a,32*u,32*(u+1))));return{dynamic:!0,encoded:concat$2(padRight(fromNumber(size$2$1(a),{size:32})),...i)}}function encodeTuple(n,a){const{checksumAddress:o,parameter:i}=a;let u=!1;const d=[];for(let m=0;m<i.components.length;m++){const a=i.components[m];const g=Array.isArray(n)?m:a.name;const y=prepareParameter({checksumAddress:o,parameter:a,value:n[g]});d.push(y);y.dynamic&&(u=!0)}return{dynamic:u,encoded:u?encode$3(d):concat$2(...d.map(({encoded:n})=>n))}}function getArrayComponents(n){const a=n.match(/^(.*)\[(\d+)?\]$/);return a?[a[2]?Number(a[2]):null,a[1]]:void 0}function encode$2(n,a,o){const{checksumAddress:i=!1}={};if(n.length!==a.length)throw new Ro({expectedLength:n.length,givenLength:a.length});const u=prepareParameters({checksumAddress:i,parameters:n,values:a});const d=encode$3(u);return 0===d.length?"0x":d}function encodePacked$1(n,a){if(n.length!==a.length)throw new Ro({expectedLength:n.length,givenLength:a.length});const o=[];for(let i=0;i<n.length;i++){const u=n[i];const d=a[i];o.push(encodePacked$1.encode(u,d))}return concat$2(...o)}!function(n){function encode2(n,a,o=!1){if("address"===n){const n=a;assert$2(n);return padLeft(n.toLowerCase(),o?32:0)}if("string"===n)return fromString(a);if("bytes"===n)return a;if("bool"===n)return padLeft(fromBoolean(a),o?32:1);const i=n.match(Io);if(i){const[n,u,d="256"]=i;const m=Number.parseInt(d)/8;return fromNumber(a,{size:o?32:m,signed:"int"===u})}const u=n.match(jo);if(u){const[n,i]=u;if(Number.parseInt(i)!==(a.length-2)/2)throw new Oo({expectedSize:Number.parseInt(i),value:a});return padRight(a,o?32:0)}const d=n.match(To);if(d&&Array.isArray(a)){const[n,o]=d;const i=[];for(let u=0;u<a.length;u++)i.push(encode2(o,a[u],!0));return 0===i.length?"0x":concat$2(...i)}throw new Mo(n)}n.encode=encode2}(encodePacked$1||(encodePacked$1={}));let Po=class extends Na{constructor({expectedLength:n,givenLength:a,type:o}){super(`Array length mismatch for type \`${o}\`. Expected: \`${n}\`. Given: \`${a}\`.`);Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}};let Oo=class extends Na{constructor({expectedSize:n,value:a}){super(`Size of bytes "${a}" (bytes${size$2$1(a)}) does not match expected size (bytes${n}).`);Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}};let Ro=class extends Na{constructor({expectedLength:n,givenLength:a}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${n}`,`Given length (values): ${a}`].join("\n"));Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}};let Bo=class extends Na{constructor(n){super(`Value \`${n}\` is not a valid array.`);Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}};let Mo=class extends Na{constructor(n){super(`Type \`${n}\` is not a valid ABI Type.`);Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}};function encode$1(n,a){const{bytecode:o,args:i}=a;return concat$2(o,n.inputs?.length&&i?.length?encode$2(n.inputs,i):"0x")}function from$1(n){return from$2(n)}function encodeData$1(n,...a){const{overloads:o}=n;const i=o?fromAbi([n,...o],n.name,{args:a[0]}):n;const u=getSelector(i);const d=a.length>0?encode$2(i.inputs,a[0]):void 0;return d?concat$2(u,d):u}function from(n,a={}){return from$2(n,a)}function fromAbi(n,a,o){const i=fromAbi$1(n,a,o);if("function"!==i.type)throw new _o({name:a,type:"function"});return i}function getSelector(n){return getSelector$1(n)}const zo="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee";const Fo="0x0000000000000000000000000000000000000000";const Lo=new Zt(8192);function withDedupe(n,{enabled:a=!0,id:o}){if(!a||!o)return n();if(Lo.get(o))return Lo.get(o);const i=n().finally(()=>Lo.delete(o));Lo.set(o,i);return i}async function wait$1(n){return new Promise(a=>setTimeout(a,n))}function withRetry(n,{delay:a=100,retryCount:o=2,shouldRetry:i=()=>!0}={}){return new Promise((u,d)=>{const attemptRetry=async({count:m=0}={})=>{const retry=async({error:n})=>{const o="function"==typeof a?a({count:m,error:n}):a;o&&await wait$1(o);attemptRetry({count:m+1})};try{const a=await n();u(a)}catch(g){if(m<o&&await i({count:m,error:g}))return retry({error:g});d(g)}};attemptRetry()})}function buildRequest(n,a={}){return async(o,i={})=>{const{dedupe:u=!1,methods:d,retryDelay:m=150,retryCount:g=3,uid:y}={...a,...i};const{method:v}=o;if(d?.exclude?.includes(v))throw new xr(new Error("method not supported"),{method:v});if(d?.include&&!d.include.includes(v))throw new xr(new Error("method not supported"),{method:v});const x=u?stringToHex(`${y}.${stringify$1$1(o)}`):void 0;return withDedupe(()=>withRetry(async()=>{try{return await n(o)}catch(a){const n=a;switch(n.code){case hr.code:throw new hr(n);case fr.code:throw new fr(n);case pr.code:throw new pr(n,{method:o.method});case mr.code:throw new mr(n);case gr.code:throw new gr(n);case yr.code:throw new yr(n);case br.code:throw new br(n);case vr.code:throw new vr(n);case wr.code:throw new wr(n);case xr.code:throw new xr(n,{method:o.method});case Nr.code:throw new Nr(n);case kr.code:throw new kr(n);case Cr.code:throw new Cr(n);case Er.code:throw new Er(n);case Sr.code:throw new Sr(n);case Ar.code:throw new Ar(n);case _r.code:throw new _r(n);case Tr.code:throw new Tr(n);case jr.code:throw new jr(n);case Ir.code:throw new Ir(n);case Pr.code:throw new Pr(n);case Or.code:throw new Or(n);case Rr.code:throw new Rr(n);case Br.code:throw new Br(n);case Mr.code:throw new Mr(n);case 5e3:throw new Cr(n);default:if(a instanceof dt)throw a;throw new zr(n)}}},{delay:({count:n,error:a})=>{if(a&&a instanceof or){const n=a?.headers?.get("Retry-After");if(n?.match(/\d/))return 1e3*Number.parseInt(n)}return(1<<n)*m},retryCount:g,shouldRetry:({error:n})=>shouldRetry(n)}),{enabled:u,id:x})}}function shouldRetry(n){return"code"in n&&"number"==typeof n.code?-1===n.code||n.code===Nr.code||n.code===gr.code:!(n instanceof or&&n.status)||403===n.status||408===n.status||413===n.status||429===n.status||500===n.status||502===n.status||503===n.status||504===n.status}let Do=class extends dt{constructor({callbackSelector:n,cause:a,data:o,extraData:i,sender:u,urls:d}){super(a.shortMessage||"An error occurred while fetching for an offchain result.",{cause:a,metaMessages:[...a.metaMessages||[],a.metaMessages?.length?"":[],"Offchain Gateway Call:",d&&["  Gateway URL(s):",...d.map(n=>`    ${getUrl(n)}`)],`  Sender: ${u}`,`  Data: ${o}`,`  Callback selector: ${n}`,`  Extra data: ${i}`].flat(),name:"OffchainLookupError"})}};let $o=class extends dt{constructor({result:n,url:a}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${getUrl(a)}`,`Response: ${stringify$1$1(n)}`],name:"OffchainLookupResponseMalformedError"})}};let Uo=class extends dt{constructor({sender:n,to:a}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${a}`,`OffchainLookup sender address: ${n}`],name:"OffchainLookupSenderMismatchError"})}};const Wo="0x556f1830";const Ho={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function offchainLookup(n,{blockNumber:a,blockTag:o,data:i,to:u}){const{args:d}=decodeErrorResult({data:i,abi:[Ho]});const[m,g,y,v,x]=d;const{ccipRead:N}=n;const k=N&&"function"==typeof N?.request?N.request:ccipRequest;try{if(!isAddressEqual(u,m))throw new Uo({sender:m,to:u});const i=g.includes(ga)?await localBatchGatewayRequest({data:y,ccipRequest:k}):await k({data:y,sender:m,urls:g});const{data:d}=await call(n,{blockNumber:a,blockTag:o,data:concat$1([v,encodeAbiParameters([{type:"bytes"},{type:"bytes"}],[i,x])]),to:u});return d}catch(E){throw new Do({callbackSelector:v,cause:E,data:i,extraData:x,sender:m,urls:g})}}async function ccipRequest({data:n,sender:a,urls:o}){let i=new Error("An unknown error occurred.");for(let d=0;d<o.length;d++){const m=o[d];const g=m.includes("{data}")?"GET":"POST";const y="POST"===g?{data:n,sender:a}:void 0;const v="POST"===g?{"Content-Type":"application/json"}:{};try{const o=await fetch(m.replace("{sender}",a.toLowerCase()).replace("{data}",n),{body:JSON.stringify(y),headers:v,method:g});let u;u=o.headers.get("Content-Type")?.startsWith("application/json")?(await o.json()).data:await o.text();if(!o.ok){i=new or({body:y,details:u?.error?stringify$1$1(u.error):o.statusText,headers:o.headers,status:o.status,url:m});continue}if(!isHex(u)){i=new $o({result:u,url:m});continue}return u}catch(u){i=new or({body:y,details:u.message,url:m})}}throw i}const qo=Object.freeze(Object.defineProperty({__proto__:null,ccipRequest:ccipRequest,offchainLookup:offchainLookup,offchainLookupAbiItem:Ho,offchainLookupSignature:Wo},Symbol.toStringTag,{value:"Module"}));function defineChain$1(n){return{formatters:void 0,fees:void 0,serializers:void 0,...n}}function withTimeout$1(n,{errorInstance:a=new Error("timed out"),timeout:o,signal:i}){return new Promise((u,d)=>{(async()=>{let m;try{const g=new AbortController;o>0&&(m=setTimeout(()=>{i?g.abort():d(a)},o));u(await n({signal:g?.signal||null}))}catch(g){"AbortError"===g?.name&&d(a);d(g)}finally{clearTimeout(m)}})()})}function createIdStore(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const Go=createIdStore();function getHttpRpcClient(n,a={}){return{async request(o){const{body:i,onRequest:u=a.onRequest,onResponse:d=a.onResponse,timeout:m=a.timeout??1e4}=o;const g={...a.fetchOptions??{},...o.fetchOptions??{}};const{headers:y,method:v,signal:x}=g;try{const a=await withTimeout$1(async({signal:a})=>{const o={...g,body:Array.isArray(i)?stringify$1$1(i.map(n=>({jsonrpc:"2.0",id:n.id??Go.take(),...n}))):stringify$1$1({jsonrpc:"2.0",id:i.id??Go.take(),...i}),headers:{"Content-Type":"application/json",...y},method:v||"POST",signal:x||(m>0?a:null)};const d=new Request(n,o);const N=await(u?.(d,o))??{...o,url:n};const k=await fetch(N.url??n,N);return k},{errorInstance:new cr({body:i,url:n}),timeout:m,signal:!0});d&&await d(a);let o;if(a.headers.get("Content-Type")?.startsWith("application/json"))o=await a.json();else{o=await a.text();try{o=JSON.parse(o||"{}")}catch(N){if(a.ok)throw N;o={error:o}}}if(!a.ok)throw new or({body:i,details:stringify$1$1(o.error)||a.statusText,headers:a.headers,status:a.status,url:n});return o}catch(N){if(N instanceof or)throw N;if(N instanceof cr)throw N;throw new or({body:i,cause:N,url:n})}}}}let Vo=class extends dt{constructor({domain:n}){super(`Invalid domain "${stringify$1$1(n)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}};let Ko=class extends dt{constructor({primaryType:n,types:a}){super(`Invalid primary type \`${n}\` must be one of \`${JSON.stringify(Object.keys(a))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}};let Zo=class extends dt{constructor({type:n}){super(`Struct type "${n}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}};function hashTypedData(n){const{domain:a={},message:o,primaryType:i}=n;const u={EIP712Domain:getTypesForEIP712Domain({domain:a}),...n.types};validateTypedData({domain:a,message:o,primaryType:i,types:u});const d=["0x1901"];a&&d.push(hashDomain({domain:a,types:u}));"EIP712Domain"!==i&&d.push(hashStruct({data:o,primaryType:i,types:u}));return keccak256$1(concat$1(d))}function hashDomain({domain:n,types:a}){return hashStruct({data:n,primaryType:"EIP712Domain",types:a})}function hashStruct({data:n,primaryType:a,types:o}){const i=encodeData({data:n,primaryType:a,types:o});return keccak256$1(i)}function encodeData({data:n,primaryType:a,types:o}){const i=[{type:"bytes32"}];const u=[hashType({primaryType:a,types:o})];for(const d of o[a]){const[a,m]=encodeField({types:o,name:d.name,type:d.type,value:n[d.name]});i.push(a);u.push(m)}return encodeAbiParameters(i,u)}function hashType({primaryType:n,types:a}){const o=toHex(encodeType$1({primaryType:n,types:a}));return keccak256$1(o)}function encodeType$1({primaryType:n,types:a}){let o="";const i=findTypeDependencies({primaryType:n,types:a});i.delete(n);const u=[n,...Array.from(i).sort()];for(const d of u)o+=`${d}(${a[d].map(({name:n,type:a})=>`${a} ${n}`).join(",")})`;return o}function findTypeDependencies({primaryType:n,types:a},o=new Set){const i=n.match(/^\w*/u);const u=i?.[0];if(o.has(u)||void 0===a[u])return o;o.add(u);for(const d of a[u])findTypeDependencies({primaryType:d.type,types:a},o);return o}function encodeField({types:n,name:a,type:o,value:i}){if(void 0!==n[o])return[{type:"bytes32"},keccak256$1(encodeData({data:i,primaryType:o,types:n}))];if("bytes"===o){const n=i.length%2?"0":"";i=`0x${n+i.slice(2)}`;return[{type:"bytes32"},keccak256$1(i)]}if("string"===o)return[{type:"bytes32"},keccak256$1(toHex(i))];if(o.lastIndexOf("]")===o.length-1){const u=o.slice(0,o.lastIndexOf("["));const d=i.map(o=>encodeField({name:a,type:u,types:n,value:o}));return[{type:"bytes32"},keccak256$1(encodeAbiParameters(d.map(([n])=>n),d.map(([,n])=>n)))]}return[{type:o},i]}function validateTypedData(n){const{domain:a,message:o,primaryType:i,types:u}=n;const validateData=(n,a)=>{for(const o of n){const{name:n,type:i}=o;const d=a[n];const m=i.match(En);if(m&&("number"==typeof d||"bigint"==typeof d)){const[n,a,o]=m;numberToHex(d,{signed:"int"===a,size:Number.parseInt(o)/8})}if("address"===i&&"string"==typeof d&&!isAddress$1(d))throw new Kt({address:d});const g=i.match(Cn);if(g){const[n,a]=g;if(a&&size$4(d)!==Number.parseInt(a))throw new Dt({expectedSize:Number.parseInt(a),givenSize:size$4(d)})}const y=u[i];if(y){validateReference(i);validateData(y,d)}}};if(u.EIP712Domain&&a){if("object"!=typeof a)throw new Vo({domain:a});validateData(u.EIP712Domain,a)}if("EIP712Domain"!==i){if(!u[i])throw new Ko({primaryType:i,types:u});validateData(u[i],o)}}function getTypesForEIP712Domain({domain:n}){return["string"==typeof n?.name&&{name:"name",type:"string"},n?.version&&{name:"version",type:"string"},("number"==typeof n?.chainId||"bigint"==typeof n?.chainId)&&{name:"chainId",type:"uint256"},n?.verifyingContract&&{name:"verifyingContract",type:"address"},n?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function validateReference(n){if("address"===n||"bool"===n||"string"===n||n.startsWith("bytes")||n.startsWith("uint")||n.startsWith("int"))throw new Zo({type:n})}function encodePacked(n,a){if(n.length!==a.length)throw new Tt({expectedLength:n.length,givenLength:a.length});const o=[];for(let i=0;i<n.length;i++){const u=n[i];const d=a[i];o.push(encode(u,d))}return concatHex(o)}function encode(n,a,o=!1){if("address"===n){const n=a;if(!isAddress$1(n))throw new Kt({address:n});return pad$2(n.toLowerCase(),{size:o?32:null})}if("string"===n)return stringToHex(a);if("bytes"===n)return a;if("bool"===n)return pad$2(boolToHex(a),{size:o?32:1});const i=n.match(En);if(i){const[n,u,d="256"]=i;const m=Number.parseInt(d)/8;return numberToHex(a,{size:o?32:m,signed:"int"===u})}const u=n.match(Cn);if(u){const[n,i]=u;if(Number.parseInt(i)!==(a.length-2)/2)throw new Dt({expectedSize:Number.parseInt(i),givenSize:(a.length-2)/2});return pad$2(a,{dir:"right",size:o?32:null})}const d=n.match(kn);if(d&&Array.isArray(a)){const[n,o]=d;const i=[];for(let u=0;u<a.length;u++)i.push(encode(o,a[u],!0));return 0===i.length?"0x":concatHex(i)}throw new Vt(n)}const Yo="Ethereum Signed Message:\n";function toPrefixedMessage(n){const a=(()=>"string"==typeof n?stringToHex(n):"string"==typeof n.raw?n.raw:bytesToHex$1(n.raw))();const o=stringToHex(`${Yo}${size$4(a)}`);return concat$1([o,a])}function hashMessage(n,a){return keccak256$1(toPrefixedMessage(n),a)}const Jo="0x6492649264926492649264926492649264926492649264926492649264926492";function isErc6492Signature(n){return sliceHex(n,-32)===Jo}function serializeErc6492Signature(n){const{address:a,data:o,signature:i,to:u="hex"}=n;const d=concatHex([encodeAbiParameters([{type:"address"},{type:"bytes"},{type:"bytes"}],[a,o,i]),Jo]);return"hex"===u?d:hexToBytes$1(d)}let Qo=class extends dt{constructor({value:n}){super(`Number \`${n}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}};function parseUnits$2(n,a){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(n))throw new Qo({value:n});let[o,i="0"]=n.split(".");const u=o.startsWith("-");u&&(o=o.slice(1));i=i.replace(/(0+)$/,"");if(0===a){1===Math.round(Number(`.${i}`))&&(o=`${BigInt(o)+1n}`);i=""}else if(i.length>a){const[n,u,d]=[i.slice(0,a-1),i.slice(a-1,a),i.slice(a)];const m=Math.round(Number(`${u}.${d}`));i=m>9?`${BigInt(n)+BigInt(1)}0`.padStart(n.length+1,"0"):`${n}${m}`;if(i.length>a){i=i.slice(1);o=`${BigInt(o)+1n}`}i=i.slice(0,a)}else i=i.padEnd(a,"0");return BigInt(`${u?"-":""}${o}${i}`)}function createNonceManager(n){const{source:a}=n;const o=new Map;const i=new Zt(8192);const u=new Map;const getKey=({address:n,chainId:a})=>`${n}.${a}`;return{async consume({address:n,chainId:o,client:u}){const d=getKey({address:n,chainId:o});const m=this.get({address:n,chainId:o,client:u});this.increment({address:n,chainId:o});const g=await m;await a.set({address:n,chainId:o},g);i.set(d,g);return g},async increment({address:n,chainId:a}){const i=getKey({address:n,chainId:a});const u=o.get(i)??0;o.set(i,u+1)},async get({address:n,chainId:d,client:m}){const g=getKey({address:n,chainId:d});let y=u.get(g);if(!y){y=(async()=>{try{const o=await a.get({address:n,chainId:d,client:m});const u=i.get(g)??0;if(u>0&&o<=u)return u+1;i.delete(g);return o}finally{this.reset({address:n,chainId:d})}})();u.set(g,y)}const v=o.get(g)??0;return v+await y},reset({address:n,chainId:a}){const i=getKey({address:n,chainId:a});o.delete(i);u.delete(i)}}}const Xo="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function simulateCalls(n,a){const{blockNumber:o,blockTag:i,calls:u,stateOverrides:d,traceAssetChanges:m,traceTransfers:g,validation:y}=a;const v=a.account?parseAccount(a.account):void 0;if(m&&!v)throw new dt("`account` is required when `traceAssetChanges` is true");const x=v?encode$1(from$1("constructor(bytes, bytes)"),{bytecode:za,args:[Xo,encodeData$1(from("function getBalance(address)"),[v.address])]}):void 0;const N=m?await Promise.all(a.calls.map(async a=>{if(!a.data&&!a.abi)return;const{accessList:o}=await createAccessList(n,{account:v.address,...a,data:a.abi?encodeFunctionData(a):a.data});return o.map(({address:n,storageKeys:a})=>a.length>0?n:null)})).then(n=>n.flat().filter(Boolean)):[];const k=await simulateBlocks(n,{blockNumber:o,blockTag:i,blocks:[...m?[{calls:[{data:x}],stateOverrides:d},{calls:N.map((n,a)=>({abi:[from("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[v.address],to:n,from:Fo,nonce:a})),stateOverrides:[{address:Fo,nonce:0}]}]:[],{calls:[...u,{}].map(n=>({...n,from:v?.address})),stateOverrides:d},...m?[{calls:[{data:x}]},{calls:N.map((n,a)=>({abi:[from("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[v.address],to:n,from:Fo,nonce:a})),stateOverrides:[{address:Fo,nonce:0}]},{calls:N.map((n,a)=>({to:n,abi:[from("function decimals() returns (uint256)")],functionName:"decimals",from:Fo,nonce:a})),stateOverrides:[{address:Fo,nonce:0}]},{calls:N.map((n,a)=>({to:n,abi:[from("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:Fo,nonce:a})),stateOverrides:[{address:Fo,nonce:0}]},{calls:N.map((n,a)=>({to:n,abi:[from("function symbol() returns (string)")],functionName:"symbol",from:Fo,nonce:a})),stateOverrides:[{address:Fo,nonce:0}]}]:[]],traceTransfers:g,validation:y});const E=m?k[2]:k[0];const[S,A,,_,j,I,O,R]=m?k:[];const{calls:B,...M}=E;const z=B.slice(0,-1)??[];const L=S?.calls??[];const D=A?.calls??[];const W=[...L,...D].map(n=>"success"===n.status?hexToBigInt(n.data):null);const H=_?.calls??[];const q=j?.calls??[];const G=[...H,...q].map(n=>"success"===n.status?hexToBigInt(n.data):null);const V=(I?.calls??[]).map(n=>"success"===n.status?n.result:null);const Z=(R?.calls??[]).map(n=>"success"===n.status?n.result:null);const Y=(O?.calls??[]).map(n=>"success"===n.status?n.result:null);const J=[];for(const[X,ee]of G.entries()){const n=W[X];if("bigint"!=typeof ee)continue;if("bigint"!=typeof n)continue;const a=V[X-1];const o=Z[X-1];const i=Y[X-1];const u=(()=>0===X?{address:zo,decimals:18,symbol:"ETH"}:{address:N[X-1],decimals:i||a?Number(a??1):void 0,symbol:o??void 0})();J.some(n=>n.token.address===u.address)||J.push({token:u,value:{pre:n,post:ee,diff:ee-n}})}return{assetChanges:J,block:M,results:z}}const ei=new Map;const ti=new Map;let ni=0;function observe(n,a,o){const i=++ni;const getListeners=()=>ei.get(n)||[];const unsubscribe=()=>{const a=getListeners();ei.set(n,a.filter(n=>n.id!==i))};const unwatch=()=>{const a=getListeners();if(!a.some(n=>n.id===i))return;const o=ti.get(n);if(1===a.length&&o){const n=o();n instanceof Promise&&n.catch(()=>{})}unsubscribe()};const u=getListeners();ei.set(n,[...u,{id:i,fns:a}]);if(u&&u.length>0)return unwatch;const d={};for(const g in a)d[g]=(...n)=>{const a=getListeners();if(0!==a.length)for(const o of a)o.fns[g]?.(...n)};const m=o(d);"function"==typeof m&&ti.set(n,m);return unwatch}function poll(n,{emitOnBegin:a,initialWaitTime:o,interval:i}){let u=!0;const unwatch=()=>u=!1;const watch=async()=>{let d;a&&(d=await n({unpoll:unwatch}));const m=await(o?.(d))??i;await wait$1(m);const poll2=async()=>{if(u){await n({unpoll:unwatch});await wait$1(i);poll2()}};poll2()};watch();return unwatch}function watchBlocks(n,{blockTag:a=n.experimental_blockTag??"latest",emitMissed:o=!1,emitOnBegin:i=!1,onBlock:u,onError:d,includeTransactions:m,poll:g,pollingInterval:y=n.pollingInterval}){const v=(()=>"undefined"!=typeof g?g:"webSocket"!==n.transport.type&&"ipc"!==n.transport.type&&("fallback"!==n.transport.type||"webSocket"!==n.transport.transports[0].config.type&&"ipc"!==n.transport.transports[0].config.type))();const x=m??!1;let N;const pollBlocks=()=>{const m=stringify$1$1(["watchBlocks",n.uid,a,o,i,x,y]);return observe(m,{onBlock:u,onError:d},u=>poll(async()=>{try{const i=await getAction$1(n,getBlock,"getBlock")({blockTag:a,includeTransactions:x});if(null!==i.number&&null!=N?.number){if(i.number===N.number)return;if(i.number-N.number>1&&o)for(let a=N?.number+1n;a<i.number;a++){const o=await getAction$1(n,getBlock,"getBlock")({blockNumber:a,includeTransactions:x});u.onBlock(o,N);N=o}}if(null==N?.number||"pending"===a&&null==i?.number||null!==i.number&&i.number>N.number){u.onBlock(i,N);N=i}}catch(i){u.onError?.(i)}},{emitOnBegin:i,interval:y}))};const subscribeBlocks=()=>{let o=!0;let m=!0;let unsubscribe=()=>o=!1;(async()=>{try{i&&getAction$1(n,getBlock,"getBlock")({blockTag:a,includeTransactions:x}).then(n=>{if(o&&m){u(n,void 0);m=!1}}).catch(d);const g=(()=>{if("fallback"===n.transport.type){const a=n.transport.transports.find(n=>"webSocket"===n.config.type||"ipc"===n.config.type);return a?a.value:n.transport}return n.transport})();const{unsubscribe:y}=await g.subscribe({params:["newHeads"],async onData(a){if(!o)return;const i=await getAction$1(n,getBlock,"getBlock")({blockNumber:a.result?.number,includeTransactions:x}).catch(()=>{});if(o){u(i,N);m=!1;N=i}},onError(n){d?.(n)}});unsubscribe=y;o||unsubscribe()}catch(g){d?.(g)}})();return()=>unsubscribe()};return v?pollBlocks():subscribeBlocks()}function watchBlockNumber(n,{emitOnBegin:a=!1,emitMissed:o=!1,onBlockNumber:i,onError:u,poll:d,pollingInterval:m=n.pollingInterval}){const g=(()=>"undefined"!=typeof d?d:"webSocket"!==n.transport.type&&"ipc"!==n.transport.type&&("fallback"!==n.transport.type||"webSocket"!==n.transport.transports[0].config.type&&"ipc"!==n.transport.transports[0].config.type))();let y;const pollBlockNumber=()=>{const d=stringify$1$1(["watchBlockNumber",n.uid,a,o,m]);return observe(d,{onBlockNumber:i,onError:u},i=>poll(async()=>{try{const a=await getAction$1(n,getBlockNumber,"getBlockNumber")({cacheTime:0});if(y){if(a===y)return;if(a-y>1&&o)for(let n=y+1n;n<a;n++){i.onBlockNumber(n,y);y=n}}if(!y||a>y){i.onBlockNumber(a,y);y=a}}catch(a){i.onError?.(a)}},{emitOnBegin:a,interval:m}))};const subscribeBlockNumber=()=>{const d=stringify$1$1(["watchBlockNumber",n.uid,a,o]);return observe(d,{onBlockNumber:i,onError:u},a=>{let o=!0;let unsubscribe=()=>o=!1;(async()=>{try{const i=(()=>{if("fallback"===n.transport.type){const a=n.transport.transports.find(n=>"webSocket"===n.config.type||"ipc"===n.config.type);return a?a.value:n.transport}return n.transport})();const{unsubscribe:u}=await i.subscribe({params:["newHeads"],onData(n){if(!o)return;const i=hexToBigInt(n.result?.number);a.onBlockNumber(i,y);y=i},onError(n){a.onError?.(n)}});unsubscribe=u;o||unsubscribe()}catch(i){u?.(i)}})();return()=>unsubscribe()})};return g?pollBlockNumber():subscribeBlockNumber()}async function uninstallFilter(n,{filter:a}){return a.request({method:"eth_uninstallFilter",params:[a.id]})}function watchEvent(n,{address:a,args:o,batch:i=!0,event:u,events:d,fromBlock:m,onError:g,onLogs:y,poll:v,pollingInterval:x=n.pollingInterval,strict:N}){const k=(()=>"undefined"!=typeof v?v:"bigint"==typeof m||"webSocket"!==n.transport.type&&"ipc"!==n.transport.type&&("fallback"!==n.transport.type||"webSocket"!==n.transport.transports[0].config.type&&"ipc"!==n.transport.transports[0].config.type))();const E=N??!1;const pollEvent=()=>{const v=stringify$1$1(["watchEvent",a,o,i,n.uid,u,x,m]);return observe(v,{onLogs:y,onError:g},g=>{let y;void 0!==m&&(y=m-1n);let v;let N=!1;const k=poll(async()=>{if(N)try{let m;if(v)m=await getAction$1(n,getFilterChanges,"getFilterChanges")({filter:v});else{const i=await getAction$1(n,getBlockNumber,"getBlockNumber")({});m=y&&y!==i?await getAction$1(n,getLogs,"getLogs")({address:a,args:o,event:u,events:d,fromBlock:y+1n,toBlock:i}):[];y=i}if(0===m.length)return;if(i)g.onLogs(m);else for(const n of m)g.onLogs([n])}catch(x){v&&x instanceof yr&&(N=!1);g.onError?.(x)}else{try{v=await getAction$1(n,createEventFilter,"createEventFilter")({address:a,args:o,event:u,events:d,strict:E,fromBlock:m})}catch{}N=!0}},{emitOnBegin:!0,interval:x});return async()=>{v&&await getAction$1(n,uninstallFilter,"uninstallFilter")({filter:v});k()}})};const subscribeEvent=()=>{let i=!0;let unsubscribe=()=>i=!1;(async()=>{try{const m=(()=>{if("fallback"===n.transport.type){const a=n.transport.transports.find(n=>"webSocket"===n.config.type||"ipc"===n.config.type);return a?a.value:n.transport}return n.transport})();const v=d??(u?[u]:void 0);let x=[];if(v){const n=v.flatMap(n=>encodeEventTopics({abi:[n],eventName:n.name,args:o}));x=[n];u&&(x=x[0])}const{unsubscribe:k}=await m.subscribe({params:["logs",{address:a,topics:x}],onData(n){if(!i)return;const a=n.result;try{const{eventName:n,args:o}=decodeEventLog({abi:v??[],data:a.data,topics:a.topics,strict:E});const i=formatLog$1(a,{args:o,eventName:n});y([i])}catch(o){let n;let i;if(o instanceof $t||o instanceof Ut){if(N)return;n=o.abiItem.name;i=o.abiItem.inputs?.some(n=>!("name"in n&&n.name))}const u=formatLog$1(a,{args:i?[]:{},eventName:n});y([u])}},onError(n){g?.(n)}});unsubscribe=k;i||unsubscribe()}catch(m){g?.(m)}})();return()=>unsubscribe()};return k?pollEvent():subscribeEvent()}function watchPendingTransactions$1(n,{batch:a=!0,onError:o,onTransactions:i,poll:u,pollingInterval:d=n.pollingInterval}){const m="undefined"!=typeof u?u:"webSocket"!==n.transport.type&&"ipc"!==n.transport.type;const pollPendingTransactions=()=>{const u=stringify$1$1(["watchPendingTransactions",n.uid,a,d]);return observe(u,{onTransactions:i,onError:o},o=>{let i;const u=poll(async()=>{try{if(!i)try{i=await getAction$1(n,createPendingTransactionFilter,"createPendingTransactionFilter")({});return}catch(d){u();throw d}const m=await getAction$1(n,getFilterChanges,"getFilterChanges")({filter:i});if(0===m.length)return;if(a)o.onTransactions(m);else for(const n of m)o.onTransactions([n])}catch(d){o.onError?.(d)}},{emitOnBegin:!0,interval:d});return async()=>{i&&await getAction$1(n,uninstallFilter,"uninstallFilter")({filter:i});u()}})};const subscribePendingTransactions=()=>{let a=!0;let unsubscribe=()=>a=!1;(async()=>{try{const{unsubscribe:u}=await n.transport.subscribe({params:["newPendingTransactions"],onData(n){if(!a)return;const o=n.result;i([o])},onError(n){o?.(n)}});unsubscribe=u;a||unsubscribe()}catch(u){o?.(u)}})();return()=>unsubscribe()};return m?pollPendingTransactions():subscribePendingTransactions()}const ri="0x5792579257925792579257925792579257925792579257925792579257925792";const si=numberToHex(0,{size:32});async function getCallsStatus(n,a){async function getStatus(a){const o=a.endsWith(ri.slice(2));if(o){const o=trim(sliceHex(a,-64,-32));const i=sliceHex(a,0,-64).slice(2).match(/.{1,64}/g);const u=await Promise.all(i.map(a=>si.slice(2)!==a?n.request({method:"eth_getTransactionReceipt",params:[`0x${a}`]},{dedupe:!0}):void 0));const d=(()=>u.some(n=>null===n)?100:u.every(n=>"0x1"===n?.status)?200:u.every(n=>"0x0"===n?.status)?500:600)();return{atomic:!1,chainId:hexToNumber$1(o),receipts:u.filter(Boolean),status:d,version:"2.0.0"}}return n.request({method:"wallet_getCallsStatus",params:[a]})}const{atomic:o=!1,chainId:i,receipts:u,version:d="2.0.0",...m}=await getStatus(a.id);const[g,y]=(()=>{const n=m.status;return n>=100&&n<200?["pending",n]:n>=200&&n<300?["success",n]:n>=300&&n<700?["failure",n]:"CONFIRMED"===n?["success",200]:"PENDING"===n?["pending",100]:[void 0,n]})();return{...m,atomic:o,chainId:i?hexToNumber$1(i):void 0,receipts:u?.map(n=>({...n,blockNumber:hexToBigInt(n.blockNumber),gasUsed:hexToBigInt(n.gasUsed),status:no[n.status]}))??[],statusCode:y,status:g,version:d}}let ai=class extends dt{constructor(n){super(`Call bundle failed with status: ${n.statusCode}`,{name:"BundleFailedError"});Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0});this.result=n}};async function waitForCallsStatus(n,a){const{id:o,pollingInterval:i=n.pollingInterval,status:u=({statusCode:n})=>200===n||n>=300,retryCount:d=4,retryDelay:m=({count:n})=>200*(1<<n),timeout:g=6e4,throwOnFailure:y=!1}=a;const v=stringify$1$1(["waitForCallsStatus",n.uid,o]);const{promise:x,resolve:N,reject:k}=withResolvers();let E;const S=observe(v,{resolve:N,reject:k},a=>{const g=poll(async()=>{const done=n=>{clearTimeout(E);g();n();S()};try{const i=await withRetry(async()=>{const a=await getCallsStatus(n,{id:o});if(y&&"failure"===a.status)throw new ai(a);return a},{retryCount:d,delay:m});if(!u(i))return;done(()=>a.resolve(i))}catch(i){done(()=>a.reject(i))}},{interval:i,emitOnBegin:!0});return g});E=g?setTimeout(()=>{S();clearTimeout(E);k(new oi({id:o}))},g):void 0;return await x}let oi=class extends dt{constructor({id:n}){super(`Timed out while waiting for call bundle with id "${n}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}};function formatStorageProof(n){return n.map(n=>({...n,value:BigInt(n.value)}))}function formatProof(n){return{...n,balance:n.balance?BigInt(n.balance):void 0,nonce:n.nonce?hexToNumber$1(n.nonce):void 0,storageProof:n.storageProof?formatStorageProof(n.storageProof):void 0}}async function getProof(n,{address:a,blockNumber:o,blockTag:i,storageKeys:u}){const d=i??"latest";const m=void 0!==o?numberToHex(o):void 0;const g=await n.request({method:"eth_getProof",params:[a,u,m||d]});return formatProof(g)}async function waitForTransactionReceipt$1(n,a){const{checkReplacement:o=!0,confirmations:i=1,hash:u,onReplaced:d,retryCount:m=6,retryDelay:g=({count:n})=>200*(1<<n),timeout:y=18e4}=a;const v=stringify$1$1(["waitForTransactionReceipt",n.uid,u]);const x=(()=>a.pollingInterval?a.pollingInterval:n.chain?.experimental_preconfirmationTime?n.chain.experimental_preconfirmationTime:n.pollingInterval)();let N;let k;let E;let S=!1;let A;let _;const{promise:j,resolve:I,reject:O}=withResolvers();const R=y?setTimeout(()=>{_();A();O(new ar({hash:u}))},y):void 0;A=observe(v,{onReplaced:d,resolve:I,reject:O},async a=>{E=await getAction$1(n,getTransactionReceipt,"getTransactionReceipt")({hash:u}).catch(()=>{});if(E&&i<=1){clearTimeout(R);a.resolve(E);A()}else _=getAction$1(n,watchBlockNumber,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:x,async onBlockNumber(d){const done=n=>{clearTimeout(R);_();n();A()};let y=d;if(!S)try{if(E){if(i>1&&(!E.blockNumber||y-E.blockNumber+1n<i))return;done(()=>a.resolve(E));return}if(o&&!N){S=!0;await withRetry(async()=>{N=await getAction$1(n,getTransaction,"getTransaction")({hash:u});N.blockNumber&&(y=N.blockNumber)},{delay:g,retryCount:m});S=!1}E=await getAction$1(n,getTransactionReceipt,"getTransactionReceipt")({hash:u});if(i>1&&(!E.blockNumber||y-E.blockNumber+1n<i))return;done(()=>a.resolve(E))}catch(v){if(v instanceof rr||v instanceof sr){if(!N){S=!1;return}try{k=N;S=!0;const o=await withRetry(()=>getAction$1(n,getBlock,"getBlock")({blockNumber:y,includeTransactions:!0}),{delay:g,retryCount:m,shouldRetry:({error:n})=>n instanceof Wr});S=!1;const u=o.transactions.find(({from:n,nonce:a})=>n===k.from&&a===k.nonce);if(!u)return;E=await getAction$1(n,getTransactionReceipt,"getTransactionReceipt")({hash:u.hash});if(i>1&&(!E.blockNumber||y-E.blockNumber+1n<i))return;let d="replaced";u.to===k.to&&u.value===k.value&&u.input===k.input?d="repriced":u.from===u.to&&0n===u.value&&(d="cancelled");done(()=>{a.onReplaced?.({reason:d,replacedTransaction:k,transaction:u,transactionReceipt:E});a.resolve(E)})}catch(x){done(()=>a.reject(x))}}else done(()=>a.reject(v))}}})});return j}async function prepareAuthorization(n,a){const{account:o=n.account,chainId:i,nonce:u}=a;if(!o)throw new An({docsPath:"/docs/eip7702/prepareAuthorization"});const d=parseAccount(o);const m=(()=>{if(a.executor)return"self"===a.executor?a.executor:parseAccount(a.executor)})();const g={address:a.contractAddress??a.address,chainId:i,nonce:u};"undefined"==typeof g.chainId&&(g.chainId=n.chain?.id??await getAction$1(n,getChainId$1,"getChainId")({}));if("undefined"==typeof g.nonce){g.nonce=await getAction$1(n,getTransactionCount,"getTransactionCount")({address:d.address,blockTag:"pending"});("self"===m||m?.address&&isAddressEqual(m.address,d.address))&&(g.nonce+=1)}return g}async function signMessage$1(n,{account:a=n.account,message:o}){if(!a)throw new An({docsPath:"/docs/actions/wallet/signMessage"});const i=parseAccount(a);if(i.signMessage)return i.signMessage({message:o});const u=(()=>"string"==typeof o?stringToHex(o):o.raw instanceof Uint8Array?toHex(o.raw):o.raw)();return n.request({method:"personal_sign",params:[u,i.address]},{retryCount:0})}async function simulateContract(n,a){const{abi:o,address:i,args:u,dataSuffix:d,functionName:m,...g}=a;const y=g.account?parseAccount(g.account):n.account;const v=encodeFunctionData({abi:o,args:u,functionName:m});try{const{data:x}=await getAction$1(n,call,"call")({batch:!1,data:`${v}${d?d.replace("0x",""):""}`,to:i,...g,account:y});const N=decodeFunctionResult({abi:o,args:u,functionName:m,data:x||"0x"});const k=o.filter(n=>"name"in n&&n.name===a.functionName);return{result:N,request:{abi:k,address:i,args:u,dataSuffix:d,functionName:m,...g,account:y}}}catch(x){throw getContractError(x,{abi:o,address:i,args:u,docsPath:"/docs/contract/simulateContract",functionName:m,sender:y?.address})}}let ii=class extends sn{constructor(n,a){super();this.finished=!1;this.destroyed=!1;ahash(n);const o=toBytes$1(a);this.iHash=n.create();if("function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen;this.outputLen=this.iHash.outputLen;const i=this.blockLen;const u=new Uint8Array(i);u.set(o.length>i?n.create().update(o).digest():o);for(let d=0;d<u.length;d++)u[d]^=54;this.iHash.update(u);this.oHash=n.create();for(let d=0;d<u.length;d++)u[d]^=106;this.oHash.update(u);clean$1(u)}update(n){aexists$1(this);this.iHash.update(n);return this}digestInto(n){aexists$1(this);abytes$1(n,this.outputLen);this.finished=!0;this.iHash.digestInto(n);this.oHash.update(n);this.oHash.digestInto(n);this.destroy()}digest(){const n=new Uint8Array(this.oHash.outputLen);this.digestInto(n);return n}_cloneInto(n){n||(n=Object.create(Object.getPrototypeOf(this),{}));const{oHash:a,iHash:o,finished:i,destroyed:u,blockLen:d,outputLen:m}=this;n.finished=i;n.destroyed=u;n.blockLen=d;n.outputLen=m;n.oHash=a._cloneInto(n.oHash);n.iHash=o._cloneInto(n.iHash);return n}clone(){return this._cloneInto()}destroy(){this.destroyed=!0;this.oHash.destroy();this.iHash.destroy()}};const hmac$1=(n,a,o)=>new ii(n,a).update(o).digest();hmac$1.create=(n,a)=>new ii(n,a);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ci=BigInt(0);const li=BigInt(1);function abool(n,a){if("boolean"!=typeof a)throw new Error(n+" boolean expected, got "+a)}function numberToHexUnpadded$1(n){const a=n.toString(16);return 1&a.length?"0"+a:a}function hexToNumber$2(n){if("string"!=typeof n)throw new Error("hex string expected, got "+typeof n);return""===n?ci:BigInt("0x"+n)}function bytesToNumberBE$1(n){return hexToNumber$2(bytesToHex$2(n))}function bytesToNumberLE$1(n){abytes$1(n);return hexToNumber$2(bytesToHex$2(Uint8Array.from(n).reverse()))}function numberToBytesBE$1(n,a){return hexToBytes$2(n.toString(16).padStart(2*a,"0"))}function numberToBytesLE$1(n,a){return numberToBytesBE$1(n,a).reverse()}function ensureBytes$1(n,a,o){let i;if("string"==typeof a)try{i=hexToBytes$2(a)}catch(d){throw new Error(n+" must be hex string or Uint8Array, cause: "+d)}else{if(!isBytes$1(a))throw new Error(n+" must be hex string or Uint8Array");i=Uint8Array.from(a)}const u=i.length;if("number"==typeof o&&u!==o)throw new Error(n+" of length "+o+" expected, got "+u);return i}const isPosBig=n=>"bigint"==typeof n&&ci<=n;function inRange(n,a,o){return isPosBig(n)&&isPosBig(a)&&isPosBig(o)&&a<=n&&n<o}function aInRange(n,a,o,i){if(!inRange(a,o,i))throw new Error("expected valid "+n+": "+o+" <= n < "+i+", got "+a)}function bitLen$1(n){let a;for(a=0;n>ci;n>>=li,a+=1);return a}const bitMask$1=n=>(li<<BigInt(n))-li;function createHmacDrbg$1(n,a,o){if("number"!=typeof n||n<2)throw new Error("hashLen must be a number");if("number"!=typeof a||a<2)throw new Error("qByteLen must be a number");if("function"!=typeof o)throw new Error("hmacFn must be a function");const u8n2=n=>new Uint8Array(n);const u8of=n=>Uint8Array.of(n);let i=u8n2(n);let u=u8n2(n);let d=0;const reset=()=>{i.fill(1);u.fill(0);d=0};const h2=(...n)=>o(u,i,...n);const reseed=(n=u8n2(0))=>{u=h2(u8of(0),n);i=h2();if(0!==n.length){u=h2(u8of(1),n);i=h2()}};const gen2=()=>{if(d++>=1e3)throw new Error("drbg: tried 1000 values");let n=0;const o=[];for(;n<a;){i=h2();const a=i.slice();o.push(a);n+=i.length}return concatBytes$2(...o)};const genUntil=(n,a)=>{reset();reseed(n);let o;for(;!(o=a(gen2()));)reseed();reset();return o};return genUntil}function _validateObject(n,a,o={}){if(!n||"object"!=typeof n)throw new Error("expected valid options object");function checkField(a,o,i){const u=n[a];if(i&&void 0===u)return;const d=typeof u;if(d!==o||null===u)throw new Error(`param "${a}" is invalid: expected ${o}, got ${d}`)}Object.entries(a).forEach(([n,a])=>checkField(n,a,!1));Object.entries(o).forEach(([n,a])=>checkField(n,a,!0))}function memoized(n){const a=new WeakMap;return(o,...i)=>{const u=a.get(o);if(void 0!==u)return u;const d=n(o,...i);a.set(o,d);return d}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ui=BigInt(0),di=BigInt(1),hi=BigInt(2),fi=BigInt(3);const pi=BigInt(4),mi=BigInt(5);const gi=BigInt(8);function mod$1(n,a){const o=n%a;return o>=ui?o:a+o}function pow2$1(n,a,o){let i=n;for(;a-- >ui;){i*=i;i%=o}return i}function invert$1(n,a){if(n===ui)throw new Error("invert: expected non-zero number");if(a<=ui)throw new Error("invert: expected positive modulus, got "+a);let o=mod$1(n,a);let i=a;let u=ui,d=di;for(;o!==ui;){const n=i/o;const a=i%o;const m=u-d*n;i=o,o=a,u=d,d=m}const m=i;if(m!==di)throw new Error("invert: does not exist");return mod$1(u,a)}function sqrt3mod4(n,a){const o=(n.ORDER+di)/pi;const i=n.pow(a,o);if(!n.eql(n.sqr(i),a))throw new Error("Cannot find square root");return i}function sqrt5mod8(n,a){const o=(n.ORDER-mi)/gi;const i=n.mul(a,hi);const u=n.pow(i,o);const d=n.mul(a,u);const m=n.mul(n.mul(d,hi),u);const g=n.mul(d,n.sub(m,n.ONE));if(!n.eql(n.sqr(g),a))throw new Error("Cannot find square root");return g}function tonelliShanks$1(n){if(n<BigInt(3))throw new Error("sqrt is not defined for small field");let a=n-di;let o=0;for(;a%hi===ui;){a/=hi;o++}let i=hi;const u=Field$1(n);for(;1===FpLegendre(u,i);)if(i++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(1===o)return sqrt3mod4;let d=u.pow(i,a);const m=(a+di)/hi;return function(n,i){if(n.is0(i))return i;if(1!==FpLegendre(n,i))throw new Error("Cannot find square root");let u=o;let g=n.mul(n.ONE,d);let y=n.pow(i,a);let v=n.pow(i,m);for(;!n.eql(y,n.ONE);){if(n.is0(y))return n.ZERO;let a=1;let o=n.sqr(y);for(;!n.eql(o,n.ONE);){a++;o=n.sqr(o);if(a===u)throw new Error("Cannot find square root")}const i=di<<BigInt(u-a-1);const d=n.pow(g,i);u=a;g=n.sqr(d);y=n.mul(y,g);v=n.mul(v,d)}return v}}function FpSqrt$1(n){return n%pi===fi?sqrt3mod4:n%gi===mi?sqrt5mod8:tonelliShanks$1(n)}const yi=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField$1(n){const a={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"};const o=yi.reduce((n,a)=>{n[a]="function";return n},a);_validateObject(n,o);return n}function FpPow$1(n,a,o){if(o<ui)throw new Error("invalid exponent, negatives unsupported");if(o===ui)return n.ONE;if(o===di)return a;let i=n.ONE;let u=a;for(;o>ui;){o&di&&(i=n.mul(i,u));u=n.sqr(u);o>>=di}return i}function FpInvertBatch$1(n,a,o=!1){const i=new Array(a.length).fill(o?n.ZERO:void 0);const u=a.reduce((a,o,u)=>{if(n.is0(o))return a;i[u]=a;return n.mul(a,o)},n.ONE);const d=n.inv(u);a.reduceRight((a,o,u)=>{if(n.is0(o))return a;i[u]=n.mul(a,i[u]);return n.mul(a,o)},d);return i}function FpLegendre(n,a){const o=(n.ORDER-di)/hi;const i=n.pow(a,o);const u=n.eql(i,n.ONE);const d=n.eql(i,n.ZERO);const m=n.eql(i,n.neg(n.ONE));if(!u&&!d&&!m)throw new Error("invalid Legendre symbol result");return u?1:d?0:-1}function nLength$1(n,a){void 0!==a&&anumber$1(a);const o=void 0!==a?a:n.toString(2).length;const i=Math.ceil(o/8);return{nBitLength:o,nByteLength:i}}function Field$1(n,a,o=!1,i={}){if(n<=ui)throw new Error("invalid field: expected ORDER > 0, got "+n);let u;let d;if("object"==typeof a&&null!=a){if(i.sqrt||o)throw new Error("cannot specify opts in two arguments");const n=a;n.BITS&&(u=n.BITS);n.sqrt&&(d=n.sqrt);"boolean"==typeof n.isLE&&(o=n.isLE)}else{"number"==typeof a&&(u=a);i.sqrt&&(d=i.sqrt)}const{nBitLength:m,nByteLength:g}=nLength$1(n,u);if(g>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let y;const v=Object.freeze({ORDER:n,isLE:o,BITS:m,BYTES:g,MASK:bitMask$1(m),ZERO:ui,ONE:di,create:a=>mod$1(a,n),isValid:a=>{if("bigint"!=typeof a)throw new Error("invalid field element: expected bigint, got "+typeof a);return ui<=a&&a<n},is0:n=>n===ui,isValidNot0:n=>!v.is0(n)&&v.isValid(n),isOdd:n=>(n&di)===di,neg:a=>mod$1(-a,n),eql:(n,a)=>n===a,sqr:a=>mod$1(a*a,n),add:(a,o)=>mod$1(a+o,n),sub:(a,o)=>mod$1(a-o,n),mul:(a,o)=>mod$1(a*o,n),pow:(n,a)=>FpPow$1(v,n,a),div:(a,o)=>mod$1(a*invert$1(o,n),n),sqrN:n=>n*n,addN:(n,a)=>n+a,subN:(n,a)=>n-a,mulN:(n,a)=>n*a,inv:a=>invert$1(a,n),sqrt:d||(a=>{y||(y=FpSqrt$1(n));return y(v,a)}),toBytes:n=>o?numberToBytesLE$1(n,g):numberToBytesBE$1(n,g),fromBytes:n=>{if(n.length!==g)throw new Error("Field.fromBytes: expected "+g+" bytes, got "+n.length);return o?bytesToNumberLE$1(n):bytesToNumberBE$1(n)},invertBatch:n=>FpInvertBatch$1(v,n),cmov:(n,a,o)=>o?a:n});return Object.freeze(v)}function getFieldBytesLength$1(n){if("bigint"!=typeof n)throw new Error("field order must be bigint");const a=n.toString(2).length;return Math.ceil(a/8)}function getMinHashLength$1(n){const a=getFieldBytesLength$1(n);return a+Math.ceil(a/2)}function mapHashToField$1(n,a,o=!1){const i=n.length;const u=getFieldBytesLength$1(a);const d=getMinHashLength$1(a);if(i<16||i<d||i>1024)throw new Error("expected "+d+"-1024 bytes of input, got "+i);const m=o?bytesToNumberLE$1(n):bytesToNumberBE$1(n);const g=mod$1(m,a-di)+di;return o?numberToBytesLE$1(g,u):numberToBytesBE$1(g,u)}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bi=BigInt(0);const vi=BigInt(1);function negateCt(n,a){const o=a.negate();return n?o:a}function normalizeZ(n,a,o){const getz=n=>n.pz;const i=FpInvertBatch$1(n.Fp,o.map(getz));const u=o.map((n,a)=>n.toAffine(i[a]));return u.map(n.fromAffine)}function validateW(n,a){if(!Number.isSafeInteger(n)||n<=0||n>a)throw new Error("invalid window size, expected [1.."+a+"], got W="+n)}function calcWOpts(n,a){validateW(n,a);const o=Math.ceil(a/n)+1;const i=2**(n-1);const u=2**n;const d=bitMask$1(n);const m=BigInt(n);return{windows:o,windowSize:i,mask:d,maxNumber:u,shiftBy:m}}function calcOffsets(n,a,o){const{windowSize:i,mask:u,maxNumber:d,shiftBy:m}=o;let g=Number(n&u);let y=n>>m;if(g>i){g-=d;y+=vi}const v=a*i;const x=v+Math.abs(g)-1;const N=0===g;const k=g<0;const E=a%2!=0;const S=v;return{nextN:y,offset:x,isZero:N,isNeg:k,isNegF:E,offsetF:S}}function validateMSMPoints(n,a){if(!Array.isArray(n))throw new Error("array expected");n.forEach((n,o)=>{if(!(n instanceof a))throw new Error("invalid point at index "+o)})}function validateMSMScalars(n,a){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((n,o)=>{if(!a.isValid(n))throw new Error("invalid scalar at index "+o)})}const wi=new WeakMap;const xi=new WeakMap;function getW(n){return xi.get(n)||1}function assert0(n){if(n!==bi)throw new Error("invalid wNAF")}function wNAF$1(n,a){return{constTimeNegate:negateCt,hasPrecomputes:n=>1!==getW(n),unsafeLadder(a,o,i=n.ZERO){let u=a;for(;o>bi;){o&vi&&(i=i.add(u));u=u.double();o>>=vi}return i},precomputeWindow(n,o){const{windows:i,windowSize:u}=calcWOpts(o,a);const d=[];let m=n;let g=m;for(let a=0;a<i;a++){g=m;d.push(g);for(let n=1;n<u;n++){g=g.add(m);d.push(g)}m=g.double()}return d},wNAF(o,i,u){let d=n.ZERO;let m=n.BASE;const g=calcWOpts(o,a);for(let n=0;n<g.windows;n++){const{nextN:a,offset:o,isZero:y,isNeg:v,isNegF:x,offsetF:N}=calcOffsets(u,n,g);u=a;y?m=m.add(negateCt(x,i[N])):d=d.add(negateCt(v,i[o]))}assert0(u);return{p:d,f:m}},wNAFUnsafe(o,i,u,d=n.ZERO){const m=calcWOpts(o,a);for(let n=0;n<m.windows&&u!==bi;n++){const{nextN:a,offset:o,isZero:g,isNeg:y}=calcOffsets(u,n,m);u=a;if(!g){const n=i[o];d=d.add(y?n.negate():n)}}assert0(u);return d},getPrecomputes(n,a,o){let i=wi.get(a);if(!i){i=this.precomputeWindow(a,n);if(1!==n){"function"==typeof o&&(i=o(i));wi.set(a,i)}}return i},wNAFCached(n,a,o){const i=getW(n);return this.wNAF(i,this.getPrecomputes(i,n,o),a)},wNAFCachedUnsafe(n,a,o,i){const u=getW(n);return 1===u?this.unsafeLadder(n,a,i):this.wNAFUnsafe(u,this.getPrecomputes(u,n,o),a,i)},setWindowSize(n,o){validateW(o,a);xi.set(n,o);wi.delete(n)}}}function mulEndoUnsafe(n,a,o,i){let u=a;let d=n.ZERO;let m=n.ZERO;for(;o>bi||i>bi;){o&vi&&(d=d.add(u));i&vi&&(m=m.add(u));u=u.double();o>>=vi;i>>=vi}return{p1:d,p2:m}}function pippenger(n,a,o,i){validateMSMPoints(o,n);validateMSMScalars(i,a);const u=o.length;const d=i.length;if(u!==d)throw new Error("arrays of points and scalars must have equal length");const m=n.ZERO;const g=bitLen$1(BigInt(u));let y=1;g>12?y=g-3:g>4?y=g-2:g>0&&(y=2);const v=bitMask$1(y);const x=new Array(Number(v)+1).fill(m);const N=Math.floor((a.BITS-1)/y)*y;let k=m;for(let E=N;E>=0;E-=y){x.fill(m);for(let a=0;a<d;a++){const n=i[a];const u=Number(n>>BigInt(E)&v);x[u]=x[u].add(o[a])}let n=m;for(let a=x.length-1,o=m;a>0;a--){o=o.add(x[a]);n=n.add(o)}k=k.add(n);if(0!==E)for(let a=0;a<y;a++)k=k.double()}return k}function createField(n,a){if(a){if(a.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");validateField$1(a);return a}return Field$1(n)}function _createCurveFields(n,a,o={}){if(!a||"object"!=typeof a)throw new Error(`expected valid ${n} CURVE object`);for(const g of["p","n","h"]){const n=a[g];if(!("bigint"==typeof n&&n>bi))throw new Error(`CURVE.${g} must be positive bigint`)}const i=createField(a.p,o.Fp);const u=createField(a.n,o.Fn);const d="b";const m=["Gx","Gy","a",d];for(const g of m)if(!i.isValid(a[g]))throw new Error(`CURVE.${g} must be valid field element of CURVE.Fp`);return{Fp:i,Fn:u}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function validateSigVerOpts(n){void 0!==n.lowS&&abool("lowS",n.lowS);void 0!==n.prehash&&abool("prehash",n.prehash)}let Ni=class extends Error{constructor(n=""){super(n)}};const ki={Err:Ni,_tlv:{encode:(n,a)=>{const{Err:o}=ki;if(n<0||n>256)throw new o("tlv.encode: wrong tag");if(1&a.length)throw new o("tlv.encode: unpadded data");const i=a.length/2;const u=numberToHexUnpadded$1(i);if(u.length/2&128)throw new o("tlv.encode: long form length too big");const d=i>127?numberToHexUnpadded$1(u.length/2|128):"";const m=numberToHexUnpadded$1(n);return m+d+u+a},decode(n,a){const{Err:o}=ki;let i=0;if(n<0||n>256)throw new o("tlv.encode: wrong tag");if(a.length<2||a[i++]!==n)throw new o("tlv.decode: wrong tlv");const u=a[i++];const d=!!(128&u);let m=0;if(d){const n=127&u;if(!n)throw new o("tlv.decode(long): indefinite length not supported");if(n>4)throw new o("tlv.decode(long): byte length is too big");const d=a.subarray(i,i+n);if(d.length!==n)throw new o("tlv.decode: length bytes not complete");if(0===d[0])throw new o("tlv.decode(long): zero leftmost byte");for(const a of d)m=m<<8|a;i+=n;if(m<128)throw new o("tlv.decode(long): not minimal encoding")}else m=u;const g=a.subarray(i,i+m);if(g.length!==m)throw new o("tlv.decode: wrong value length");return{v:g,l:a.subarray(i+m)}}},_int:{encode(n){const{Err:a}=ki;if(n<Ci)throw new a("integer: negative integers are not allowed");let o=numberToHexUnpadded$1(n);8&Number.parseInt(o[0],16)&&(o="00"+o);if(1&o.length)throw new a("unexpected DER parsing assertion: unpadded hex");return o},decode(n){const{Err:a}=ki;if(128&n[0])throw new a("invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new a("invalid signature integer: unnecessary leading zero");return bytesToNumberBE$1(n)}},toSig(n){const{Err:a,_int:o,_tlv:i}=ki;const u=ensureBytes$1("signature",n);const{v:d,l:m}=i.decode(48,u);if(m.length)throw new a("invalid signature: left bytes after parsing");const{v:g,l:y}=i.decode(2,d);const{v:v,l:x}=i.decode(2,y);if(x.length)throw new a("invalid signature: left bytes after parsing");return{r:o.decode(g),s:o.decode(v)}},hexFromSig(n){const{_tlv:a,_int:o}=ki;const i=a.encode(2,o.encode(n.r));const u=a.encode(2,o.encode(n.s));const d=i+u;return a.encode(48,d)}};const Ci=BigInt(0),Ei=BigInt(1),Si=BigInt(2),Ai=BigInt(3),_i=BigInt(4);function _legacyHelperEquat(n,a,o){function weierstrassEquation(i){const u=n.sqr(i);const d=n.mul(u,i);return n.add(n.add(d,n.mul(i,a)),o)}return weierstrassEquation}function _legacyHelperNormPriv(n,a,o){const{BYTES:i}=n;function normPrivateKeyToScalar(u){let d;if("bigint"==typeof u)d=u;else{let o=ensureBytes$1("private key",u);if(a){if(!a.includes(2*o.length))throw new Error("invalid private key");const n=new Uint8Array(i);n.set(o,n.length-o.length);o=n}try{d=n.fromBytes(o)}catch(m){throw new Error(`invalid private key: expected ui8a of size ${i}, got ${typeof u}`)}}o&&(d=n.create(d));if(!n.isValidNot0(d))throw new Error("invalid private key: out of range [1..N-1]");return d}return normPrivateKeyToScalar}function weierstrassN(n,a={}){const{Fp:o,Fn:i}=_createCurveFields("weierstrass",n,a);const{h:u,n:d}=n;_validateObject(a,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:m}=a;if(m&&(!o.is0(n.a)||"bigint"!=typeof m.beta||"function"!=typeof m.splitScalar))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function assertCompressionIsSupported(){if(!o.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function pointToBytes(n,a,i){const{x:u,y:d}=a.toAffine();const m=o.toBytes(u);abool("isCompressed",i);if(i){assertCompressionIsSupported();const n=!o.isOdd(d);return concatBytes$2(pprefix(n),m)}return concatBytes$2(Uint8Array.of(4),m,o.toBytes(d))}function pointFromBytes(n){abytes$1(n);const a=o.BYTES;const i=a+1;const u=2*a+1;const d=n.length;const m=n[0];const g=n.subarray(1);if(d!==i||2!==m&&3!==m){if(d===u&&4===m){const n=o.fromBytes(g.subarray(0*a,1*a));const i=o.fromBytes(g.subarray(1*a,2*a));if(!isValidXY(n,i))throw new Error("bad point: is not on curve");return{x:n,y:i}}throw new Error(`bad point: got length ${d}, expected compressed=${i} or uncompressed=${u}`)}{const n=o.fromBytes(g);if(!o.isValid(n))throw new Error("bad point: is not on curve, wrong x");const a=v(n);let i;try{i=o.sqrt(a)}catch(y){const n=y instanceof Error?": "+y.message:"";throw new Error("bad point: is not on curve, sqrt error"+n)}assertCompressionIsSupported();const u=o.isOdd(i);const d=!(1&~m);d!==u&&(i=o.neg(i));return{x:n,y:i}}}const g=a.toBytes||pointToBytes;const y=a.fromBytes||pointFromBytes;const v=_legacyHelperEquat(o,n.a,n.b);function isValidXY(n,a){const i=o.sqr(a);const u=v(n);return o.eql(i,u)}if(!isValidXY(n.Gx,n.Gy))throw new Error("bad curve params: generator point");const x=o.mul(o.pow(n.a,Ai),_i);const N=o.mul(o.sqr(n.b),BigInt(27));if(o.is0(o.add(x,N)))throw new Error("bad curve params: a or b");function acoord(n,a,i=!1){if(!o.isValid(a)||i&&o.is0(a))throw new Error(`bad point coordinate ${n}`);return a}function aprjpoint(n){if(!(n instanceof S))throw new Error("ProjectivePoint expected")}const k=memoized((n,a)=>{const{px:i,py:u,pz:d}=n;if(o.eql(d,o.ONE))return{x:i,y:u};const m=n.is0();null==a&&(a=m?o.ONE:o.inv(d));const g=o.mul(i,a);const y=o.mul(u,a);const v=o.mul(d,a);if(m)return{x:o.ZERO,y:o.ZERO};if(!o.eql(v,o.ONE))throw new Error("invZ was invalid");return{x:g,y:y}});const E=memoized(n=>{if(n.is0()){if(a.allowInfinityPoint&&!o.is0(n.py))return;throw new Error("bad point: ZERO")}const{x:i,y:u}=n.toAffine();if(!o.isValid(i)||!o.isValid(u))throw new Error("bad point: x or y not field elements");if(!isValidXY(i,u))throw new Error("bad point: equation left != right");if(!n.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function finishEndo(n,a,i,u,d){i=new S(o.mul(i.px,n),i.py,i.pz);a=negateCt(u,a);i=negateCt(d,i);return a.add(i)}class S{constructor(n,a,o){this.px=acoord("x",n);this.py=acoord("y",a,!0);this.pz=acoord("z",o);Object.freeze(this)}static fromAffine(n){const{x:a,y:i}=n||{};if(!n||!o.isValid(a)||!o.isValid(i))throw new Error("invalid affine point");if(n instanceof S)throw new Error("projective point not allowed");return o.is0(a)&&o.is0(i)?S.ZERO:new S(a,i,o.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(n){return normalizeZ(S,"pz",n)}static fromBytes(n){abytes$1(n);return S.fromHex(n)}static fromHex(n){const a=S.fromAffine(y(ensureBytes$1("pointHex",n)));a.assertValidity();return a}static fromPrivateKey(n){const o=_legacyHelperNormPriv(i,a.allowedPrivateKeyLengths,a.wrapPrivateKey);return S.BASE.multiply(o(n))}static msm(n,a){return pippenger(S,i,n,a)}precompute(n=8,a=!0){_.setWindowSize(this,n);a||this.multiply(Ai);return this}_setWindowSize(n){this.precompute(n)}assertValidity(){E(this)}hasEvenY(){const{y:n}=this.toAffine();if(!o.isOdd)throw new Error("Field doesn't support isOdd");return!o.isOdd(n)}equals(n){aprjpoint(n);const{px:a,py:i,pz:u}=this;const{px:d,py:m,pz:g}=n;const y=o.eql(o.mul(a,g),o.mul(d,u));const v=o.eql(o.mul(i,g),o.mul(m,u));return y&&v}negate(){return new S(this.px,o.neg(this.py),this.pz)}double(){const{a:a,b:i}=n;const u=o.mul(i,Ai);const{px:d,py:m,pz:g}=this;let y=o.ZERO,v=o.ZERO,x=o.ZERO;let N=o.mul(d,d);let k=o.mul(m,m);let E=o.mul(g,g);let A=o.mul(d,m);A=o.add(A,A);x=o.mul(d,g);x=o.add(x,x);y=o.mul(a,x);v=o.mul(u,E);v=o.add(y,v);y=o.sub(k,v);v=o.add(k,v);v=o.mul(y,v);y=o.mul(A,y);x=o.mul(u,x);E=o.mul(a,E);A=o.sub(N,E);A=o.mul(a,A);A=o.add(A,x);x=o.add(N,N);N=o.add(x,N);N=o.add(N,E);N=o.mul(N,A);v=o.add(v,N);E=o.mul(m,g);E=o.add(E,E);N=o.mul(E,A);y=o.sub(y,N);x=o.mul(E,k);x=o.add(x,x);x=o.add(x,x);return new S(y,v,x)}add(a){aprjpoint(a);const{px:i,py:u,pz:d}=this;const{px:m,py:g,pz:y}=a;let v=o.ZERO,x=o.ZERO,N=o.ZERO;const k=n.a;const E=o.mul(n.b,Ai);let A=o.mul(i,m);let _=o.mul(u,g);let j=o.mul(d,y);let I=o.add(i,u);let O=o.add(m,g);I=o.mul(I,O);O=o.add(A,_);I=o.sub(I,O);O=o.add(i,d);let R=o.add(m,y);O=o.mul(O,R);R=o.add(A,j);O=o.sub(O,R);R=o.add(u,d);v=o.add(g,y);R=o.mul(R,v);v=o.add(_,j);R=o.sub(R,v);N=o.mul(k,O);v=o.mul(E,j);N=o.add(v,N);v=o.sub(_,N);N=o.add(_,N);x=o.mul(v,N);_=o.add(A,A);_=o.add(_,A);j=o.mul(k,j);O=o.mul(E,O);_=o.add(_,j);j=o.sub(A,j);j=o.mul(k,j);O=o.add(O,j);A=o.mul(_,O);x=o.add(x,A);A=o.mul(R,O);v=o.mul(I,v);v=o.sub(v,A);A=o.mul(I,_);N=o.mul(R,N);N=o.add(N,A);return new S(v,x,N)}subtract(n){return this.add(n.negate())}is0(){return this.equals(S.ZERO)}multiply(n){const{endo:o}=a;if(!i.isValidNot0(n))throw new Error("invalid scalar: out of range");let u,d;const mul=n=>_.wNAFCached(this,n,S.normalizeZ);if(o){const{k1neg:a,k1:i,k2neg:m,k2:g}=o.splitScalar(n);const{p:y,f:v}=mul(i);const{p:x,f:N}=mul(g);d=v.add(N);u=finishEndo(o.beta,y,x,a,m)}else{const{p:a,f:o}=mul(n);u=a;d=o}return S.normalizeZ([u,d])[0]}multiplyUnsafe(n){const{endo:o}=a;const u=this;if(!i.isValid(n))throw new Error("invalid scalar: out of range");if(n===Ci||u.is0())return S.ZERO;if(n===Ei)return u;if(_.hasPrecomputes(this))return this.multiply(n);if(o){const{k1neg:a,k1:i,k2neg:d,k2:m}=o.splitScalar(n);const{p1:g,p2:y}=mulEndoUnsafe(S,u,i,m);return finishEndo(o.beta,g,y,a,d)}return _.wNAFCachedUnsafe(u,n)}multiplyAndAddUnsafe(n,a,o){const i=this.multiplyUnsafe(a).add(n.multiplyUnsafe(o));return i.is0()?void 0:i}toAffine(n){return k(this,n)}isTorsionFree(){const{isTorsionFree:n}=a;return u===Ei||(n?n(S,this):_.wNAFCachedUnsafe(this,d).is0())}clearCofactor(){const{clearCofactor:n}=a;return u===Ei?this:n?n(S,this):this.multiplyUnsafe(u)}toBytes(n=!0){abool("isCompressed",n);this.assertValidity();return g(S,this,n)}toRawBytes(n=!0){return this.toBytes(n)}toHex(n=!0){return bytesToHex$2(this.toBytes(n))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}S.BASE=new S(n.Gx,n.Gy,o.ONE);S.ZERO=new S(o.ZERO,o.ONE,o.ZERO);S.Fp=o;S.Fn=i;const A=i.BITS;const _=wNAF$1(S,a.endo?Math.ceil(A/2):A);return S}function pprefix(n){return Uint8Array.of(n?2:3)}function ecdsa(n,a,o={}){_validateObject(a,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const i=a.randomBytes||randomBytes$1;const u=a.hmac||((n,...o)=>hmac$1(a.hash,n,concatBytes$2(...o)));const{Fp:d,Fn:m}=n;const{ORDER:g,BITS:y}=m;function isBiggerThanHalfOrder(n){const a=g>>Ei;return n>a}function normalizeS(n){return isBiggerThanHalfOrder(n)?m.neg(n):n}function aValidRS(n,a){if(!m.isValidNot0(a))throw new Error(`invalid signature ${n}: out of range 1..CURVE.n`)}class v{constructor(n,a,o){aValidRS("r",n);aValidRS("s",a);this.r=n;this.s=a;null!=o&&(this.recovery=o);Object.freeze(this)}static fromCompact(n){const a=m.BYTES;const o=ensureBytes$1("compactSignature",n,2*a);return new v(m.fromBytes(o.subarray(0,a)),m.fromBytes(o.subarray(a,2*a)))}static fromDER(n){const{r:a,s:o}=ki.toSig(ensureBytes$1("DER",n));return new v(a,o)}assertValidity(){}addRecoveryBit(n){return new v(this.r,this.s,n)}recoverPublicKey(a){const o=d.ORDER;const{r:i,s:u,recovery:y}=this;if(null==y||![0,1,2,3].includes(y))throw new Error("recovery id invalid");const v=g*Si<o;if(v&&y>1)throw new Error("recovery id is ambiguous for h>1 curve");const x=2===y||3===y?i+g:i;if(!d.isValid(x))throw new Error("recovery id 2 or 3 invalid");const N=d.toBytes(x);const k=n.fromHex(concatBytes$2(pprefix(!(1&y)),N));const S=m.inv(x);const A=E(ensureBytes$1("msgHash",a));const _=m.create(-A*S);const j=m.create(u*S);const I=n.BASE.multiplyUnsafe(_).add(k.multiplyUnsafe(j));if(I.is0())throw new Error("point at infinify");I.assertValidity();return I}hasHighS(){return isBiggerThanHalfOrder(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,m.neg(this.s),this.recovery):this}toBytes(n){if("compact"===n)return concatBytes$2(m.toBytes(this.r),m.toBytes(this.s));if("der"===n)return hexToBytes$2(ki.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return bytesToHex$2(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return bytesToHex$2(this.toBytes("compact"))}}const x=_legacyHelperNormPriv(m,o.allowedPrivateKeyLengths,o.wrapPrivateKey);const N={isValidPrivateKey(n){try{x(n);return!0}catch(a){return!1}},normPrivateKeyToScalar:x,randomPrivateKey:()=>{const n=g;return mapHashToField$1(i(getMinHashLength$1(n)),n)},precompute:(a=8,o=n.BASE)=>o.precompute(a,!1)};function getPublicKey(a,o=!0){return n.fromPrivateKey(a).toBytes(o)}function isProbPub(a){if("bigint"==typeof a)return!1;if(a instanceof n)return!0;const i=ensureBytes$1("key",a);const u=i.length;const g=d.BYTES;const y=g+1;const v=2*g+1;return o.allowedPrivateKeyLengths||m.BYTES===y?void 0:u===y||u===v}function getSharedSecret(a,o,i=!0){if(!0===isProbPub(a))throw new Error("first arg must be private key");if(!1===isProbPub(o))throw new Error("second arg must be public key");const u=n.fromHex(o);return u.multiply(x(a)).toBytes(i)}const k=a.bits2int||function(n){if(n.length>8192)throw new Error("input is too large");const a=bytesToNumberBE$1(n);const o=8*n.length-y;return o>0?a>>BigInt(o):a};const E=a.bits2int_modN||function(n){return m.create(k(n))};const S=bitMask$1(y);function int2octets(n){aInRange("num < 2^"+y,n,Ci,S);return m.toBytes(n)}function prepSig(o,u,g=A){if(["recovered","canonical"].some(n=>n in g))throw new Error("sign() legacy options not supported");const{hash:y}=a;let{lowS:N,prehash:S,extraEntropy:_}=g;null==N&&(N=!0);o=ensureBytes$1("msgHash",o);validateSigVerOpts(g);S&&(o=ensureBytes$1("prehashed msgHash",y(o)));const j=E(o);const I=x(u);const O=[int2octets(I),int2octets(j)];if(null!=_&&!1!==_){const n=!0===_?i(d.BYTES):_;O.push(ensureBytes$1("extraEntropy",n))}const R=concatBytes$2(...O);const B=j;function k2sig(a){const o=k(a);if(!m.isValidNot0(o))return;const i=m.inv(o);const u=n.BASE.multiply(o).toAffine();const d=m.create(u.x);if(d===Ci)return;const g=m.create(i*m.create(B+d*I));if(g===Ci)return;let y=(u.x===d?0:2)|Number(u.y&Ei);let x=g;if(N&&isBiggerThanHalfOrder(g)){x=normalizeS(g);y^=1}return new v(d,x,y)}return{seed:R,k2sig:k2sig}}const A={lowS:a.lowS,prehash:!1};const _={lowS:a.lowS,prehash:!1};function sign(n,o,i=A){const{seed:d,k2sig:g}=prepSig(n,o,i);const y=createHmacDrbg$1(a.hash.outputLen,m.BYTES,u);return y(d,g)}n.BASE.precompute(8);function verify(o,i,u,d=_){const g=o;i=ensureBytes$1("msgHash",i);u=ensureBytes$1("publicKey",u);validateSigVerOpts(d);const{lowS:y,prehash:x,format:N}=d;if("strict"in d)throw new Error("options.strict was renamed to lowS");if(void 0!==N&&!["compact","der","js"].includes(N))throw new Error('format must be "compact", "der" or "js"');const k="string"==typeof g||isBytes$1(g);const S=!k&&!N&&"object"==typeof g&&null!==g&&"bigint"==typeof g.r&&"bigint"==typeof g.s;if(!k&&!S)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let A;let j;try{if(S){if(void 0!==N&&"js"!==N)throw new Error("invalid format");A=new v(g.r,g.s)}if(k){try{"compact"!==N&&(A=v.fromDER(g))}catch(W){if(!(W instanceof ki.Err))throw W}A||"der"===N||(A=v.fromCompact(g))}j=n.fromHex(u)}catch(H){return!1}if(!A)return!1;if(y&&A.hasHighS())return!1;x&&(i=a.hash(i));const{r:I,s:O}=A;const R=E(i);const B=m.inv(O);const M=m.create(R*B);const z=m.create(I*B);const L=n.BASE.multiplyUnsafe(M).add(j.multiplyUnsafe(z));if(L.is0())return!1;const D=m.create(L.x);return D===I}return Object.freeze({getPublicKey:getPublicKey,getSharedSecret:getSharedSecret,sign:sign,verify:verify,utils:N,Point:n,Signature:v})}function _weierstrass_legacy_opts_to_new(n){const a={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy};const o=n.Fp;const i=Field$1(a.n,n.nBitLength);const u={Fp:o,Fn:i,allowedPrivateKeyLengths:n.allowedPrivateKeyLengths,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,wrapPrivateKey:n.wrapPrivateKey,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:a,curveOpts:u}}function _ecdsa_legacy_opts_to_new(n){const{CURVE:a,curveOpts:o}=_weierstrass_legacy_opts_to_new(n);const i={hash:n.hash,hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:a,curveOpts:o,ecdsaOpts:i}}function _ecdsa_new_output_to_legacy(n,a){return Object.assign({},a,{ProjectivePoint:a.Point,CURVE:n})}function weierstrass$1(n){const{CURVE:a,curveOpts:o,ecdsaOpts:i}=_ecdsa_legacy_opts_to_new(n);const u=weierstrassN(a,o);const d=ecdsa(u,i,o);return _ecdsa_new_output_to_legacy(n,d)}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function createCurve$1(n,a){const create=a=>weierstrass$1({...n,hash:a});return{...create(a),create:create}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ti={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const ji=BigInt(1);const Ii=BigInt(2);const divNearest$1=(n,a)=>(n+a/Ii)/a;function sqrtMod$1(n){const a=Ti.p;const o=BigInt(3),i=BigInt(6),u=BigInt(11),d=BigInt(22);const m=BigInt(23),g=BigInt(44),y=BigInt(88);const v=n*n*n%a;const x=v*v*n%a;const N=pow2$1(x,o,a)*x%a;const k=pow2$1(N,o,a)*x%a;const E=pow2$1(k,Ii,a)*v%a;const S=pow2$1(E,u,a)*E%a;const A=pow2$1(S,d,a)*S%a;const _=pow2$1(A,g,a)*A%a;const j=pow2$1(_,y,a)*_%a;const I=pow2$1(j,g,a)*A%a;const O=pow2$1(I,o,a)*x%a;const R=pow2$1(O,m,a)*S%a;const B=pow2$1(R,i,a)*v%a;const M=pow2$1(B,Ii,a);if(!Pi.eql(Pi.sqr(M),n))throw new Error("Cannot find square root");return M}const Pi=Field$1(Ti.p,void 0,void 0,{sqrt:sqrtMod$1});const Oi=createCurve$1({...Ti,Fp:Pi,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const a=Ti.n;const o=BigInt("0x3086d221a7d46bcde86c90e49284eb15");const i=-ji*BigInt("0xe4437ed6010e88286f547fa90abfe4c3");const u=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8");const d=o;const m=BigInt("0x100000000000000000000000000000000");const g=divNearest$1(d*n,a);const y=divNearest$1(-i*n,a);let v=mod$1(n-g*o-y*u,a);let x=mod$1(-g*i-y*d,a);const N=v>m;const k=x>m;N&&(v=a-v);k&&(x=a-x);if(v>m||x>m)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:N,k1:v,k2neg:k,k2:x}}}},Xr);const Ri=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:Oi},Symbol.toStringTag,{value:"Module"}));function serializeSignature({r:n,s:a,to:o="hex",v:i,yParity:u}){const d=(()=>{if(0===u||1===u)return u;if(i&&(27n===i||28n===i||i>=35n))return i%2n==0n?1:0;throw new Error("Invalid `v` or `yParity` value")})();const m=`0x${new Oi.Signature(hexToBigInt(n),hexToBigInt(a)).toCompactHex()}${0===d?"1b":"1c"}`;return"hex"===o?m:hexToBytes$1(m)}async function verifyHash(n,a){const{address:o,factory:i,factoryData:u,hash:d,signature:m,universalSignatureVerifierAddress:g=n.chain?.contracts?.universalSignatureVerifier?.address,...y}=a;const v=(()=>isHex(m)?m:"object"==typeof m&&"r"in m&&"s"in m?serializeSignature(m):bytesToHex$1(m))();const x=await(async()=>i||u?isErc6492Signature(v)?v:serializeErc6492Signature({address:i,data:u,signature:v}):v)();try{const a=g?{to:g,data:encodeFunctionData({abi:bs,functionName:"isValidSig",args:[o,d,x]}),...y}:{data:encodeDeployData({abi:bs,args:[o,d,x],bytecode:La}),...y};const{data:i}=await getAction$1(n,call,"call")(a);return hexToBool(i??"0x0")}catch(N){try{const n=isAddressEqual(getAddress$2(o),await recoverAddress$1({hash:d,signature:m}));if(n)return!0}catch{}if(N instanceof ca)return!1;throw N}}async function verifyMessage(n,{address:a,message:o,factory:i,factoryData:u,signature:d,...m}){const g=hashMessage(o);return verifyHash(n,{address:a,factory:i,factoryData:u,hash:g,signature:d,...m})}async function verifyTypedData(n,a){const{address:o,factory:i,factoryData:u,signature:d,message:m,primaryType:g,types:y,domain:v,...x}=a;const N=hashTypedData({message:m,primaryType:g,types:y,domain:v});return verifyHash(n,{address:o,factory:i,factoryData:u,hash:N,signature:d,...x})}function watchContractEvent(n,a){const{abi:o,address:i,args:u,batch:d=!0,eventName:m,fromBlock:g,onError:y,onLogs:v,poll:x,pollingInterval:N=n.pollingInterval,strict:k}=a;const E=(()=>"undefined"!=typeof x?x:"bigint"==typeof g||"webSocket"!==n.transport.type&&"ipc"!==n.transport.type&&("fallback"!==n.transport.type||"webSocket"!==n.transport.transports[0].config.type&&"ipc"!==n.transport.transports[0].config.type))();const pollContractEvent=()=>{const a=k??!1;const x=stringify$1$1(["watchContractEvent",i,u,d,n.uid,m,N,a,g]);return observe(x,{onLogs:v,onError:y},y=>{let v;void 0!==g&&(v=g-1n);let x;let k=!1;const E=poll(async()=>{if(k)try{let g;if(x)g=await getAction$1(n,getFilterChanges,"getFilterChanges")({filter:x});else{const d=await getAction$1(n,getBlockNumber,"getBlockNumber")({});g=v&&v<d?await getAction$1(n,getContractEvents,"getContractEvents")({abi:o,address:i,args:u,eventName:m,fromBlock:v+1n,toBlock:d,strict:a}):[];v=d}if(0===g.length)return;if(d)y.onLogs(g);else for(const n of g)y.onLogs([n])}catch(N){x&&N instanceof yr&&(k=!1);y.onError?.(N)}else{try{x=await getAction$1(n,createContractEventFilter,"createContractEventFilter")({abi:o,address:i,args:u,eventName:m,strict:a,fromBlock:g})}catch{}k=!0}},{emitOnBegin:!0,interval:N});return async()=>{x&&await getAction$1(n,uninstallFilter,"uninstallFilter")({filter:x});E()}})};const subscribeContractEvent=()=>{const a=k??!1;const g=stringify$1$1(["watchContractEvent",i,u,d,n.uid,m,N,a]);let x=!0;let unsubscribe=()=>x=!1;return observe(g,{onLogs:v,onError:y},a=>{(async()=>{try{const d=(()=>{if("fallback"===n.transport.type){const a=n.transport.transports.find(n=>"webSocket"===n.config.type||"ipc"===n.config.type);return a?a.value:n.transport}return n.transport})();const g=m?encodeEventTopics({abi:o,eventName:m,args:u}):[];const{unsubscribe:y}=await d.subscribe({params:["logs",{address:i,topics:g}],onData(n){if(!x)return;const i=n.result;try{const{eventName:n,args:u}=decodeEventLog({abi:o,data:i.data,topics:i.topics,strict:k});const d=formatLog$1(i,{args:u,eventName:n});a.onLogs([d])}catch(u){let n;let o;if(u instanceof $t||u instanceof Ut){if(k)return;n=u.abiItem.name;o=u.abiItem.inputs?.some(n=>!("name"in n&&n.name))}const d=formatLog$1(i,{args:o?[]:{},eventName:n});a.onLogs([d])}},onError(n){a.onError?.(n)}});unsubscribe=y;x||unsubscribe()}catch(d){y?.(d)}})();return()=>unsubscribe()})};return E?pollContractEvent():subscribeContractEvent()}async function writeContract$1(n,a){const{abi:o,account:i=n.account,address:u,args:d,dataSuffix:m,functionName:g,...y}=a;if("undefined"==typeof i)throw new An({docsPath:"/docs/contract/writeContract"});const v=i?parseAccount(i):null;const x=encodeFunctionData({abi:o,args:d,functionName:g});try{return await getAction$1(n,sendTransaction$1,"sendTransaction")({data:`${x}${m?m.replace("0x",""):""}`,to:u,account:v,...y})}catch(N){throw getContractError(N,{abi:o,address:u,args:d,docsPath:"/docs/contract/writeContract",functionName:g,sender:v?.address})}}function getAction(n,a,o){const i=n[a.name];if("function"==typeof i)return i;const u=n[o];return"function"==typeof u?u:o=>a(n,o)}const Bi="2.19.0";const getVersion$1=()=>`@wagmi/core@${Bi}`;var __classPrivateFieldGet$2=function(n,a,o,i){if("function"==typeof a?n!==a||!i:!a.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===o?i:"a"===o?i.call(n):i?i.value:a.get(n)};var Mi,zi;let Fi=class n extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return getVersion$1()}constructor(a,o={}){super();Mi.add(this);Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const i=o.cause instanceof n?o.cause.details:o.cause?.message?o.cause.message:o.details;const u=o.cause instanceof n&&o.cause.docsPath||o.docsPath;this.message=[a||"An error occurred.","",...o.metaMessages?[...o.metaMessages,""]:[],...u?[`Docs: ${this.docsBaseUrl}${u}.html${o.docsSlug?`#${o.docsSlug}`:""}`]:[],...i?[`Details: ${i}`]:[],`Version: ${this.version}`].join("\n");o.cause&&(this.cause=o.cause);this.details=i;this.docsPath=u;this.metaMessages=o.metaMessages;this.shortMessage=a}walk(n){return __classPrivateFieldGet$2(this,Mi,"m",zi).call(this,this,n)}};Mi=new WeakSet,zi=function _BaseError_walk2(n,a){return a?.(n)?n:n.cause?__classPrivateFieldGet$2(this,Mi,"m",_BaseError_walk2).call(this,n.cause,a):n};let Li=class extends Fi{constructor(){super("Chain not configured.");Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}};let Di=class extends Fi{constructor(){super("Connector already connected.");Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}};let $i=class extends Fi{constructor(){super("Connector not connected.");Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}};let Ui=class extends Fi{constructor({address:n,connector:a}){super(`Account "${n}" not found for connector "${a.name}".`);Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}};let Wi=class extends Fi{constructor({connectionChainId:n,connectorChainId:a}){super(`The current chain of the connector (id: ${a}) does not match the connection's chain (id: ${n}).`,{metaMessages:[`Current Chain ID:  ${a}`,`Expected Chain ID: ${n}`]});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}};let Hi=class extends Fi{constructor({connector:n}){super(`Connector "${n.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}};async function connect(n,a){let o;o="function"==typeof a.connector?n._internal.connectors.setup(a.connector):a.connector;if(o.uid===n.state.current)throw new Di;try{n.setState(n=>({...n,status:"connecting"}));o.emitter.emit("message",{type:"connecting"});const{connector:i,...u}=a;const d=await o.connect(u);const m=d.accounts;o.emitter.off("connect",n._internal.events.connect);o.emitter.on("change",n._internal.events.change);o.emitter.on("disconnect",n._internal.events.disconnect);await(n.storage?.setItem("recentConnectorId",o.id));n.setState(n=>({...n,connections:new Map(n.connections).set(o.uid,{accounts:m,chainId:d.chainId,connector:o}),current:o.uid,status:"connected"}));return{accounts:m,chainId:d.chainId}}catch(i){n.setState(n=>({...n,status:n.current?"connected":"disconnected"}));throw i}}const qi=256;let Gi=qi;let Vi;function uid$1(n=11){if(!Vi||Gi+n>2*qi){Vi="";Gi=0;for(let n=0;n<qi;n++)Vi+=(256+256*Math.random()|0).toString(16).substring(1)}return Vi.substring(Gi,Gi+++n)}function createClient(n){const{batch:a,chain:o,ccipRead:i,key:u="base",name:d="Base Client",type:m="base"}=n;const g=n.experimental_blockTag??("number"==typeof o?.experimental_preconfirmationTime?"pending":void 0);const y=o?.blockTime??12e3;const v=Math.min(Math.max(Math.floor(y/2),500),4e3);const x=n.pollingInterval??v;const N=n.cacheTime??x;const k=n.account?parseAccount(n.account):void 0;const{config:E,request:S,value:A}=n.transport({chain:o,pollingInterval:x});const _={...E,...A};const j={account:k,batch:a,cacheTime:N,ccipRead:i,chain:o,key:u,name:d,pollingInterval:x,request:S,transport:_,type:m,uid:uid$1(),...g?{experimental_blockTag:g}:{}};function extend(n){return a=>{const o=a(n);for(const n in j)delete o[n];const i={...n,...o};return Object.assign(i,{extend:extend(i)})}}return Object.assign(j,{extend:extend(j)})}function createTransport({key:n,methods:a,name:o,request:i,retryCount:u=3,retryDelay:d=150,timeout:m,type:g},y){const v=uid$1();return{config:{key:n,methods:a,name:o,request:i,retryCount:u,retryDelay:d,timeout:m,type:g},request:buildRequest(i,{methods:a,retryCount:u,retryDelay:d,uid:v}),value:y}}function custom$1(n,a={}){const{key:o="custom",methods:i,name:u="Custom Provider",retryDelay:d}=a;return({retryCount:m})=>createTransport({key:o,methods:i,name:u,request:n.request.bind(n),retryCount:a.retryCount??m,retryDelay:d,type:"custom"})}function fallback(n,a={}){const{key:o="fallback",name:i="Fallback",rank:u=!1,shouldThrow:d=shouldThrow,retryCount:m,retryDelay:g}=a;return({chain:a,pollingInterval:y=4e3,timeout:v,...x})=>{let N=n;let onResponse=()=>{};const k=createTransport({key:o,name:i,async request({method:n,params:o}){let i;const fetch2=async(u=0)=>{const m=N[u]({...x,chain:a,retryCount:0,timeout:v});try{const a=await m.request({method:n,params:o});onResponse({method:n,params:o,response:a,transport:m,status:"success"});return a}catch(g){onResponse({error:g,method:n,params:o,transport:m,status:"error"});if(d(g))throw g;if(u===N.length-1)throw g;i??(i=N.slice(u+1).some(o=>{const{include:i,exclude:u}=o({chain:a}).config.methods||{};return i?i.includes(n):!u||!u.includes(n)}));if(!i)throw g;return fetch2(u+1)}};return fetch2()},retryCount:m,retryDelay:g,type:"fallback"},{onResponse:n=>onResponse=n,transports:N.map(n=>n({chain:a,retryCount:0}))});if(u){const n="object"==typeof u?u:{};rankTransports({chain:a,interval:n.interval??y,onTransports:n=>N=n,ping:n.ping,sampleCount:n.sampleCount,timeout:n.timeout,transports:N,weights:n.weights})}return k}}function shouldThrow(n){return!(!("code"in n)||"number"!=typeof n.code||n.code!==wr.code&&n.code!==Cr.code&&!Un.nodeMessage.test(n.message)&&5e3!==n.code)}function rankTransports({chain:n,interval:a=4e3,onTransports:o,ping:i,sampleCount:u=10,timeout:d=1e3,transports:m,weights:g={}}){const{stability:y=.7,latency:v=.3}=g;const x=[];const rankTransports_=async()=>{const g=await Promise.all(m.map(async a=>{const o=a({chain:n,retryCount:0,timeout:d});const u=Date.now();let m;let g;try{await(i?i({transport:o}):o.request({method:"net_listening"}));g=1}catch{g=0}finally{m=Date.now()}const y=m-u;return{latency:y,success:g}}));x.push(g);x.length>u&&x.shift();const N=Math.max(...x.map(n=>Math.max(...n.map(({latency:n})=>n))));const k=m.map((n,a)=>{const o=x.map(n=>n[a].latency);const i=o.reduce((n,a)=>n+a,0)/o.length;const u=1-i/N;const d=x.map(n=>n[a].success);const m=d.reduce((n,a)=>n+a,0)/d.length;return 0===m?[0,a]:[v*u+y*m,a]}).sort((n,a)=>a[0]-n[0]);o(k.map(([,n])=>m[n]));await wait$1(a);rankTransports_()};rankTransports_()}let Ki=class extends dt{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}};function http(n,a={}){const{batch:o,fetchOptions:i,key:u="http",methods:d,name:m="HTTP JSON-RPC",onFetchRequest:g,onFetchResponse:y,retryDelay:v,raw:x}=a;return({chain:N,retryCount:k,timeout:E})=>{const{batchSize:S=1e3,wait:A=0}="object"==typeof o?o:{};const _=a.retryCount??k;const j=E??a.timeout??1e4;const I=n||N?.rpcUrls.default.http[0];if(!I)throw new Ki;const O=getHttpRpcClient(I,{fetchOptions:i,onRequest:g,onResponse:y,timeout:j});return createTransport({key:u,methods:d,name:m,async request({method:n,params:a}){const i={method:n,params:a};const{schedule:u}=createBatchScheduler({id:I,wait:A,shouldSplitBatch:n=>n.length>S,fn:n=>O.request({body:n}),sort:(n,a)=>n.id-a.id});const fn2=async n=>o?u(n):[await O.request({body:n})];const[{error:d,result:m}]=await fn2(i);if(x)return{error:d,result:m};if(d)throw new ir({body:i,error:d,url:I});return m},retryCount:_,retryDelay:v,timeout:j,type:"http"},{fetchOptions:i,url:I})}}function parseSiweMessage(n){const{scheme:a,statement:o,...i}=n.match(Zi)?.groups??{};const{chainId:u,expirationTime:d,issuedAt:m,notBefore:g,requestId:y,...v}=n.match(Yi)?.groups??{};const x=n.split("Resources:")[1]?.split("\n- ").slice(1);return{...i,...v,...u?{chainId:Number(u)}:{},...d?{expirationTime:new Date(d)}:{},...m?{issuedAt:new Date(m)}:{},...g?{notBefore:new Date(g)}:{},...y?{requestId:y}:{},...x?{resources:x}:{},...a?{scheme:a}:{},...o?{statement:o}:{}}}const Zi=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/;const Yi=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function validateSiweMessage(n){const{address:a,domain:o,message:i,nonce:u,scheme:d,time:m=new Date}=n;if(o&&i.domain!==o)return!1;if(u&&i.nonce!==u)return!1;if(d&&i.scheme!==d)return!1;if(i.expirationTime&&m>=i.expirationTime)return!1;if(i.notBefore&&m<i.notBefore)return!1;try{if(!i.address)return!1;if(!isAddress$1(i.address,{strict:!1}))return!1;if(a&&!isAddressEqual(i.address,a))return!1}catch{return!1}return!0}async function verifySiweMessage(n,a){const{address:o,domain:i,message:u,nonce:d,scheme:m,signature:g,time:y=new Date,...v}=a;const x=parseSiweMessage(u);if(!x.address)return!1;const N=validateSiweMessage({address:o,domain:i,message:x,nonce:d,scheme:m,time:y});if(!N)return!1;const k=hashMessage(u);return verifyHash(n,{address:x.address,hash:k,signature:g,...v})}function publicActions(n){return{call:a=>call(n,a),createAccessList:a=>createAccessList(n,a),createBlockFilter:()=>createBlockFilter(n),createContractEventFilter:a=>createContractEventFilter(n,a),createEventFilter:a=>createEventFilter(n,a),createPendingTransactionFilter:()=>createPendingTransactionFilter(n),estimateContractGas:a=>estimateContractGas(n,a),estimateGas:a=>estimateGas$1(n,a),getBalance:a=>getBalance$1(n,a),getBlobBaseFee:()=>getBlobBaseFee(n),getBlock:a=>getBlock(n,a),getBlockNumber:a=>getBlockNumber(n,a),getBlockTransactionCount:a=>getBlockTransactionCount(n,a),getBytecode:a=>getCode(n,a),getChainId:()=>getChainId$1(n),getCode:a=>getCode(n,a),getContractEvents:a=>getContractEvents(n,a),getEip712Domain:a=>getEip712Domain(n,a),getEnsAddress:a=>getEnsAddress(n,a),getEnsAvatar:a=>getEnsAvatar(n,a),getEnsName:a=>getEnsName(n,a),getEnsResolver:a=>getEnsResolver(n,a),getEnsText:a=>getEnsText(n,a),getFeeHistory:a=>getFeeHistory(n,a),estimateFeesPerGas:a=>estimateFeesPerGas(n,a),getFilterChanges:a=>getFilterChanges(n,a),getFilterLogs:a=>getFilterLogs(n,a),getGasPrice:()=>getGasPrice(n),getLogs:a=>getLogs(n,a),getProof:a=>getProof(n,a),estimateMaxPriorityFeePerGas:a=>estimateMaxPriorityFeePerGas(n,a),getStorageAt:a=>getStorageAt(n,a),getTransaction:a=>getTransaction(n,a),getTransactionConfirmations:a=>getTransactionConfirmations(n,a),getTransactionCount:a=>getTransactionCount(n,a),getTransactionReceipt:a=>getTransactionReceipt(n,a),multicall:a=>multicall$1(n,a),prepareTransactionRequest:a=>prepareTransactionRequest$1(n,a),readContract:a=>readContract$1(n,a),sendRawTransaction:a=>sendRawTransaction(n,a),simulate:a=>simulateBlocks(n,a),simulateBlocks:a=>simulateBlocks(n,a),simulateCalls:a=>simulateCalls(n,a),simulateContract:a=>simulateContract(n,a),verifyMessage:a=>verifyMessage(n,a),verifySiweMessage:a=>verifySiweMessage(n,a),verifyTypedData:a=>verifyTypedData(n,a),uninstallFilter:a=>uninstallFilter(n,a),waitForTransactionReceipt:a=>waitForTransactionReceipt$1(n,a),watchBlocks:a=>watchBlocks(n,a),watchBlockNumber:a=>watchBlockNumber(n,a),watchContractEvent:a=>watchContractEvent(n,a),watchEvent:a=>watchEvent(n,a),watchPendingTransactions:a=>watchPendingTransactions$1(n,a)}}function createPublicClient(n){const{key:a="public",name:o="Public Client"}=n;const i=createClient({...n,key:a,name:o,type:"publicClient"});return i.extend(publicActions)}function parseSignature(n){const{r:a,s:o}=Oi.Signature.fromCompact(n.slice(2,130));const i=Number(`0x${n.slice(130)}`);const[u,d]=(()=>{if(0===i||1===i)return[void 0,i];if(27===i)return[BigInt(i),0];if(28===i)return[BigInt(i),1];throw new Error("Invalid yParityOrV value")})();return"undefined"!=typeof u?{r:numberToHex(a,{size:32}),s:numberToHex(o,{size:32}),v:u,yParity:d}:{r:numberToHex(a,{size:32}),s:numberToHex(o,{size:32}),yParity:d}}async function getConnectorClient(n,a={}){let o;if(a.connector){const{connector:i}=a;if("reconnecting"===n.state.status&&!i.getAccounts&&!i.getChainId)throw new Hi({connector:i});const[u,d]=await Promise.all([i.getAccounts().catch(n=>{if(null===a.account)return[];throw n}),i.getChainId()]);o={accounts:u,chainId:d,connector:i}}else o=n.state.connections.get(n.state.current);if(!o)throw new $i;const i=a.chainId??o.chainId;const u=await o.connector.getChainId();if(u!==o.chainId)throw new Wi({connectionChainId:o.chainId,connectorChainId:u});const d=o.connector;if(d.getClient)return d.getClient({chainId:i});const m=parseAccount(a.account??o.accounts[0]);m&&(m.address=getAddress$2(m.address));if(a.account&&!o.accounts.some(n=>n.toLowerCase()===m.address.toLowerCase()))throw new Ui({address:m.address,connector:d});const g=n.chains.find(n=>n.id===i);const y=await o.connector.getProvider({chainId:i});return createClient({account:m,chain:g,name:"Connector Client",transport:n=>custom$1(y)({...n,retryCount:0})})}async function disconnect(n,a={}){let o;if(a.connector)o=a.connector;else{const{connections:a,current:i}=n.state;const u=a.get(i);o=u?.connector}const i=n.state.connections;if(o){await o.disconnect();o.emitter.off("change",n._internal.events.change);o.emitter.off("disconnect",n._internal.events.disconnect);o.emitter.on("connect",n._internal.events.connect);i.delete(o.uid)}n.setState(n=>{if(0===i.size)return{...n,connections:new Map,current:null,status:"disconnected"};const a=i.values().next().value;return{...n,connections:new Map(i),current:a.connector.uid}});{const a=n.state.current;if(!a)return;const o=n.state.connections.get(a)?.connector;if(!o)return;await(n.storage?.setItem("recentConnectorId",o.id))}}function getUnit(n){return"number"==typeof n?n:"wei"===n?0:Math.abs($n[n])}async function estimateGas(n,a){const{chainId:o,connector:i,...u}=a;let d;if(a.account)d=a.account;else{const u=await getConnectorClient(n,{account:a.account,chainId:o,connector:i});d=u.account}const m=n.getClient({chainId:o});const g=getAction(m,estimateGas$1,"estimateGas");return g({...u,account:d})}function getAccount(n){const a=n.state.current;const o=n.state.connections.get(a);const i=o?.accounts;const u=i?.[0];const d=n.chains.find(n=>n.id===o?.chainId);const m=n.state.status;switch(m){case"connected":return{address:u,addresses:i,chain:d,chainId:o?.chainId,connector:o?.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:m};case"reconnecting":return{address:u,addresses:i,chain:d,chainId:o?.chainId,connector:o?.connector,isConnected:!!u,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:m};case"connecting":return{address:u,addresses:i,chain:d,chainId:o?.chainId,connector:o?.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:m};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:m}}}async function multicall(n,a){const{allowFailure:o=!0,chainId:i,contracts:u,...d}=a;const m=n.getClient({chainId:i});const g=getAction(m,multicall$1,"multicall");return g({allowFailure:o,contracts:u,...d})}function readContract(n,a){const{chainId:o,...i}=a;const u=n.getClient({chainId:o});const d=getAction(u,readContract$1,"readContract");return d(i)}async function readContracts(n,a){const{allowFailure:o=!0,blockNumber:i,blockTag:u,...d}=a;const m=a.contracts;try{const a={};for(const[o,i]of m.entries()){const u=i.chainId??n.state.chainId;a[u]||(a[u]=[]);a[u]?.push({contract:i,index:o})}const promises=()=>Object.entries(a).map(([a,m])=>multicall(n,{...d,allowFailure:o,blockNumber:i,blockTag:u,chainId:Number.parseInt(a),contracts:m.map(({contract:n})=>n)}));const g=(await Promise.all(promises())).flat();const y=Object.values(a).flatMap(n=>n.map(({index:n})=>n));return g.reduce((n,a,o)=>{n&&(n[y[o]]=a);return n},[])}catch(g){if(g instanceof la)throw g;const promises=()=>m.map(a=>readContract(n,{...a,blockNumber:i,blockTag:u}));return o?(await Promise.allSettled(promises())).map(n=>"fulfilled"===n.status?{result:n.value,status:"success"}:{error:n.reason,result:void 0,status:"failure"}):await Promise.all(promises())}}async function getBalance(n,a){const{address:o,blockNumber:i,blockTag:u,chainId:d,token:m,unit:g="ether"}=a;if(m)try{return await getTokenBalance(n,{balanceAddress:o,chainId:d,symbolType:"string",tokenAddress:m})}catch(k){if("ContractFunctionExecutionError"===k.name){const a=await getTokenBalance(n,{balanceAddress:o,chainId:d,symbolType:"bytes32",tokenAddress:m});const i=hexToString(trim(a.symbol,{dir:"right"}));return{...a,symbol:i}}throw k}const y=n.getClient({chainId:d});const v=getAction(y,getBalance$1,"getBalance");const x=await v(i?{address:o,blockNumber:i}:{address:o,blockTag:u});const N=n.chains.find(n=>n.id===d)??y.chain;return{decimals:N.nativeCurrency.decimals,formatted:formatUnits$1(x,getUnit(g)),symbol:N.nativeCurrency.symbol,value:x}}async function getTokenBalance(n,a){const{balanceAddress:o,chainId:i,symbolType:u,tokenAddress:d,unit:m}=a;const g={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:u}]}],address:d};const[y,v,x]=await readContracts(n,{allowFailure:!1,contracts:[{...g,functionName:"balanceOf",args:[o],chainId:i},{...g,functionName:"decimals",chainId:i},{...g,functionName:"symbol",chainId:i}]});const N=formatUnits$1(y??"0",getUnit(m??v));return{decimals:v,formatted:N,symbol:x,value:y}}function getChainId(n){return n.state.chainId}function deepEqual$1(n,a){if(n===a)return!0;if(n&&a&&"object"==typeof n&&"object"==typeof a){if(n.constructor!==a.constructor)return!1;let o;let i;if(Array.isArray(n)&&Array.isArray(a)){o=n.length;if(o!==a.length)return!1;for(i=o;0!==i--;)if(!deepEqual$1(n[i],a[i]))return!1;return!0}if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===a.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===a.toString();const u=Object.keys(n);o=u.length;if(o!==Object.keys(a).length)return!1;for(i=o;0!==i--;)if(!Object.hasOwn(a,u[i]))return!1;for(i=o;0!==i--;){const o=u[i];if(o&&!deepEqual$1(n[o],a[o]))return!1}return!0}return n!=n&&a!=a}let Ji=[];function getChains(n){const a=n.chains;if(deepEqual$1(Ji,a))return Ji;Ji=a;return a}let Qi=[];function getConnections(n){const a=[...n.state.connections.values()];if("reconnecting"===n.state.status)return Qi;if(deepEqual$1(Qi,a))return Qi;Qi=a;return a}let Xi=[];function getConnectors(n){const a=n.connectors;if(deepEqual$1(Xi,a))return Xi;Xi=a;return a}async function prepareTransactionRequest(n,a){const{account:o,chainId:i,...u}=a;const d=o??getAccount(n).address;const m=n.getClient({chainId:i});const g=getAction(m,prepareTransactionRequest$1,"prepareTransactionRequest");return g({...u,...d?{account:d}:{}})}let ec=!1;async function reconnect(n,a={}){if(ec)return[];ec=!0;n.setState(n=>({...n,status:n.current?"reconnecting":"connecting"}));const o=[];if(a.connectors?.length)for(const v of a.connectors){let a;a="function"==typeof v?n._internal.connectors.setup(v):v;o.push(a)}else o.push(...n.connectors);let i;try{i=await(n.storage?.getItem("recentConnectorId"))}catch{}const u={};for(const[,v]of n.state.connections)u[v.connector.id]=1;i&&(u[i]=0);const d=Object.keys(u).length>0?[...o].sort((n,a)=>(u[n.id]??10)-(u[a.id]??10)):o;let m=!1;const g=[];const y=[];for(const v of d){const a=await v.getProvider().catch(()=>{});if(!a)continue;if(y.some(n=>n===a))continue;const o=await v.isAuthorized();if(!o)continue;const i=await v.connect({isReconnecting:!0}).catch(()=>null);if(i){v.emitter.off("connect",n._internal.events.connect);v.emitter.on("change",n._internal.events.change);v.emitter.on("disconnect",n._internal.events.disconnect);n.setState(n=>{const a=new Map(m?n.connections:new Map).set(v.uid,{accounts:i.accounts,chainId:i.chainId,connector:v});return{...n,current:m?n.current:v.uid,connections:a}});g.push({accounts:i.accounts,chainId:i.chainId,connector:v});y.push(a);m=!0}}"reconnecting"!==n.state.status&&"connecting"!==n.state.status||(m?n.setState(n=>({...n,status:"connected"})):n.setState(n=>({...n,connections:new Map,current:null,status:"disconnected"})));ec=!1;return g}async function sendTransaction(n,a){const{account:o,chainId:i,connector:u,...d}=a;let m;m="object"==typeof o&&"local"===o?.type?n.getClient({chainId:i}):await getConnectorClient(n,{account:o??void 0,chainId:i,connector:u});const g=getAction(m,sendTransaction$1,"sendTransaction");const y=await g({...d,...o?{account:o}:{},chain:i?{id:i}:null,gas:d.gas??void 0});return y}async function signMessage(n,a){const{account:o,connector:i,...u}=a;let d;d="object"==typeof o&&"local"===o.type?n.getClient():await getConnectorClient(n,{account:o,connector:i});const m=getAction(d,signMessage$1,"signMessage");return m({...u,...o?{account:o}:{}})}let tc=class extends Fi{constructor(){super("Provider not found.");Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}};let nc=class extends Fi{constructor({connector:n}){super(`"${n.name}" does not support programmatic chain switching.`);Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}};async function switchChain(n,a){const{addEthereumChainParameter:o,chainId:i}=a;const u=n.state.connections.get(a.connector?.uid??n.state.current);if(u){const n=u.connector;if(!n.switchChain)throw new nc({connector:n});const a=await n.switchChain({addEthereumChainParameter:o,chainId:i});return a}const d=n.chains.find(n=>n.id===i);if(!d)throw new Li;n.setState(n=>({...n,chainId:i}));return d}async function waitForTransactionReceipt(n,a){const{chainId:o,timeout:i=0,...u}=a;const d=n.getClient({chainId:o});const m=getAction(d,waitForTransactionReceipt$1,"waitForTransactionReceipt");const g=await m({...u,timeout:i});if("reverted"===g.status){const n=getAction(d,getTransaction,"getTransaction");const a=await n({hash:g.transactionHash});const o=getAction(d,call,"call");const i=await o({...a,data:a.input,gasPrice:"eip1559"!==a.type?a.gasPrice:void 0,maxFeePerGas:"eip1559"===a.type?a.maxFeePerGas:void 0,maxPriorityFeePerGas:"eip1559"===a.type?a.maxPriorityFeePerGas:void 0});const u=i?.data?hexToString(`0x${i.data.substring(138)}`):"unknown reason";throw new Error(u)}return{...g,chainId:d.chain.id}}function watchAccount(n,a){const{onChange:o}=a;return n.subscribe(()=>getAccount(n),o,{equalityFn(n,a){const{connector:o,...i}=n;const{connector:u,...d}=a;return deepEqual$1(i,d)&&o?.id===u?.id&&o?.uid===u?.uid}})}function watchChainId(n,a){const{onChange:o}=a;return n.subscribe(n=>n.chainId,o)}function watchConnections(n,a){const{onChange:o}=a;return n.subscribe(()=>getConnections(n),o,{equalityFn:deepEqual$1})}function watchConnectors(n,a){const{onChange:o}=a;return n._internal.connectors.subscribe((n,a)=>{o(Object.values(n),a)})}function watchPendingTransactions(n,a){const{syncConnectedChain:o=n._internal.syncConnectedChain,...i}=a;let u;const listener=a=>{u&&u();const o=n.getClient({chainId:a});const d=getAction(o,watchPendingTransactions$1,"watchPendingTransactions");u=d(i);return u};const d=listener(a.chainId);let m;o&&!a.chainId&&(m=n.subscribe(({chainId:n})=>n,async n=>listener(n)));return()=>{d?.();m?.()}}async function writeContract(n,a){const{account:o,chainId:i,connector:u,...d}=a;let m;m="object"==typeof o&&"local"===o?.type?n.getClient({chainId:i}):await getConnectorClient(n,{account:o??void 0,chainId:i,connector:u});const g=getAction(m,writeContract$1,"writeContract");const y=await g({...d,...o?{account:o}:{},chain:i?{id:i}:null});return y}function createConnector(n){return n}injected.type="injected";function injected(n={}){const{shimDisconnect:a=!0,unstable_shimAsyncInject:o}=n;function getTarget(){const a=n.target;if("function"==typeof a){const n=a();if(n)return n}return"object"==typeof a?a:"string"==typeof a?{...rc[a]??{id:a,name:`${a[0].toUpperCase()}${a.slice(1)}`,provider:`is${a[0].toUpperCase()}${a.slice(1)}`}}:{id:"injected",name:"Injected",provider:n=>n?.ethereum}}let i;let u;let d;let m;return createConnector(g=>({get icon(){return getTarget().icon},get id(){return getTarget().id},get name(){return getTarget().name},get supportsSimulation(){return!0},type:injected.type,async setup(){const a=await this.getProvider();if(a?.on&&n.target){if(!d){d=this.onConnect.bind(this);a.on("connect",d)}if(!i){i=this.onAccountsChanged.bind(this);a.on("accountsChanged",i)}}},async connect({chainId:o,isReconnecting:y}={}){const v=await this.getProvider();if(!v)throw new tc;let x=[];if(y)x=await this.getAccounts().catch(()=>[]);else if(a)try{const n=await v.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]});x=n[0]?.caveats?.[0]?.value?.map(n=>getAddress$2(n));if(x.length>0){const n=await this.getAccounts();x=n}}catch(N){const n=N;if(n.code===Cr.code)throw new Cr(n);if(n.code===vr.code)throw n}try{if(!x?.length&&!y){const n=await v.request({method:"eth_requestAccounts"});x=n.map(n=>getAddress$2(n))}if(d){v.removeListener("connect",d);d=void 0}if(!i){i=this.onAccountsChanged.bind(this);v.on("accountsChanged",i)}if(!u){u=this.onChainChanged.bind(this);v.on("chainChanged",u)}if(!m){m=this.onDisconnect.bind(this);v.on("disconnect",m)}let N=await this.getChainId();if(o&&N!==o){const n=await this.switchChain({chainId:o}).catch(n=>{if(n.code===Cr.code)throw n;return{id:N}});N=n?.id??N}a&&await(g.storage?.removeItem(`${this.id}.disconnected`));n.target||await(g.storage?.setItem("injected.connected",!0));return{accounts:x,chainId:N}}catch(N){const n=N;if(n.code===Cr.code)throw new Cr(n);if(n.code===vr.code)throw new vr(n);throw n}},async disconnect(){const o=await this.getProvider();if(!o)throw new tc;if(u){o.removeListener("chainChanged",u);u=void 0}if(m){o.removeListener("disconnect",m);m=void 0}if(!d){d=this.onConnect.bind(this);o.on("connect",d)}try{await withTimeout$1(()=>o.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}a&&await(g.storage?.setItem(`${this.id}.disconnected`,!0));n.target||await(g.storage?.removeItem("injected.connected"))},async getAccounts(){const n=await this.getProvider();if(!n)throw new tc;const a=await n.request({method:"eth_accounts"});return a.map(n=>getAddress$2(n))},async getChainId(){const n=await this.getProvider();if(!n)throw new tc;const a=await n.request({method:"eth_chainId"});return Number(a)},async getProvider(){if("undefined"==typeof window)return;let n;const a=getTarget();n="function"==typeof a.provider?a.provider(window):"string"==typeof a.provider?findProvider(window,a.provider):a.provider;n&&!n.removeListener&&("off"in n&&"function"==typeof n.off?n.removeListener=n.off:n.removeListener=()=>{});return n},async isAuthorized(){try{const i=a&&await(g.storage?.getItem(`${this.id}.disconnected`));if(i)return!1;if(!n.target){const n=await(g.storage?.getItem("injected.connected"));if(!n)return!1}const u=await this.getProvider();if(!u){if(void 0!==o&&!1!==o){const handleEthereum=async()=>{"undefined"!=typeof window&&window.removeEventListener("ethereum#initialized",handleEthereum);const n=await this.getProvider();return!!n};const n="number"==typeof o?o:1e3;const a=await Promise.race([..."undefined"!=typeof window?[new Promise(n=>window.addEventListener("ethereum#initialized",()=>n(handleEthereum()),{once:!0}))]:[],new Promise(a=>setTimeout(()=>a(handleEthereum()),n))]);if(a)return!0}throw new tc}const d=await withRetry(()=>this.getAccounts());return!!d.length}catch{return!1}},async switchChain({addEthereumChainParameter:n,chainId:a}){const o=await this.getProvider();if(!o)throw new tc;const i=g.chains.find(n=>n.id===a);if(!i)throw new Tr(new Li);const u=new Promise(n=>{const listener=o=>{if("chainId"in o&&o.chainId===a){g.emitter.off("change",listener);n()}};g.emitter.on("change",listener)});try{await Promise.all([o.request({method:"wallet_switchEthereumChain",params:[{chainId:numberToHex(a)}]}).then(async()=>{const n=await this.getChainId();n===a&&g.emitter.emit("change",{chainId:a})}),u]);return i}catch(d){const y=d;if(4902===y.code||4902===y?.data?.originalError?.code)try{const{default:d,...m}=i.blockExplorers??{};let y;n?.blockExplorerUrls?y=n.blockExplorerUrls:d&&(y=[d.url,...Object.values(m).map(n=>n.url)]);let v;v=n?.rpcUrls?.length?n.rpcUrls:[i.rpcUrls.default?.http[0]??""];const x={blockExplorerUrls:y,chainId:numberToHex(a),chainName:n?.chainName??i.name,iconUrls:n?.iconUrls,nativeCurrency:n?.nativeCurrency??i.nativeCurrency,rpcUrls:v};await Promise.all([o.request({method:"wallet_addEthereumChain",params:[x]}).then(async()=>{const n=await this.getChainId();if(n!==a)throw new Cr(new Error("User rejected switch after adding network."));g.emitter.emit("change",{chainId:a})}),u]);return i}catch(m){throw new Cr(m)}if(y.code===Cr.code)throw new Cr(y);throw new Tr(y)}},async onAccountsChanged(n){if(0===n.length)this.onDisconnect();else if(g.emitter.listenerCount("connect")){const n=(await this.getChainId()).toString();this.onConnect({chainId:n});a&&await(g.storage?.removeItem(`${this.id}.disconnected`))}else g.emitter.emit("change",{accounts:n.map(n=>getAddress$2(n))})},onChainChanged(n){const a=Number(n);g.emitter.emit("change",{chainId:a})},async onConnect(n){const a=await this.getAccounts();if(0===a.length)return;const o=Number(n.chainId);g.emitter.emit("connect",{accounts:a,chainId:o});const y=await this.getProvider();if(y){if(d){y.removeListener("connect",d);d=void 0}if(!i){i=this.onAccountsChanged.bind(this);y.on("accountsChanged",i)}if(!u){u=this.onChainChanged.bind(this);y.on("chainChanged",u)}if(!m){m=this.onDisconnect.bind(this);y.on("disconnect",m)}}},async onDisconnect(n){const a=await this.getProvider();if(!(n&&1013===n.code&&a&&(await this.getAccounts()).length)){g.emitter.emit("disconnect");if(a){if(u){a.removeListener("chainChanged",u);u=void 0}if(m){a.removeListener("disconnect",m);m=void 0}if(!d){d=this.onConnect.bind(this);a.on("connect",d)}}}}}))}const rc={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider:n=>n?.coinbaseWalletExtension?n.coinbaseWalletExtension:findProvider(n,"isCoinbaseWallet")},metaMask:{id:"metaMask",name:"MetaMask",provider:n=>findProvider(n,n=>{if(!n.isMetaMask)return!1;if(n.isBraveWallet&&!n._events&&!n._state)return!1;const a=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const o of a)if(n[o])return!1;return!0})},phantom:{id:"phantom",name:"Phantom",provider:n=>n?.phantom?.ethereum?n.phantom?.ethereum:findProvider(n,"isPhantom")}};function findProvider(n,a){function isProvider(n){return"function"==typeof a?a(n):"string"!=typeof a||n[a]}const ethereum=n.ethereum;return ethereum?.providers?ethereum.providers.find(n=>isProvider(n)):ethereum&&isProvider(ethereum)?ethereum:void 0}function requestProviders(n){if("undefined"==typeof window)return;const handler=a=>n(a.detail);window.addEventListener("eip6963:announceProvider",handler);window.dispatchEvent(new CustomEvent("eip6963:requestProvider"));return()=>window.removeEventListener("eip6963:announceProvider",handler)}function createStore$1(){const n=new Set;let a=[];const request=()=>requestProviders(o=>{if(!a.some(({info:n})=>n.uuid===o.info.uuid)){a=[...a,o];n.forEach(n=>n(a,{added:[o]}))}});let o=request();return{_listeners:()=>n,clear(){n.forEach(n=>n([],{removed:[...a]}));a=[]},destroy(){this.clear();n.clear();o?.()},findProvider:({rdns:n})=>a.find(a=>a.info.rdns===n),getProviders:()=>a,reset(){this.clear();o?.();o=request()},subscribe(o,{emitImmediately:i}={}){n.add(o);i&&o(a,{added:a});return()=>n.delete(o)}}}const subscribeWithSelectorImpl=n=>(a,o,i)=>{const u=i.subscribe;i.subscribe=(n,a,o)=>{let d=n;if(a){const u=(null==o?void 0:o.equalityFn)||Object.is;let m=n(i.getState());d=o=>{const i=n(o);if(!u(m,i)){const n=m;a(m=i,n)}};(null==o?void 0:o.fireImmediately)&&a(m,m)}return u(d)};const d=n(a,o,i);return d};const sc=subscribeWithSelectorImpl;function createJSONStorage(n,a){let o;try{o=n()}catch(u){return}const i={getItem:n=>{var a;const parse2=n=>null===n?null:JSON.parse(n,void 0);const i=null!=(a=o.getItem(n))?a:null;return i instanceof Promise?i.then(parse2):parse2(i)},setItem:(n,a)=>o.setItem(n,JSON.stringify(a,void 0)),removeItem:n=>o.removeItem(n)};return i}const toThenable=n=>a=>{try{const o=n(a);return o instanceof Promise?o:{then:n=>toThenable(n)(o),catch(n){return this}}}catch(o){return{then(n){return this},catch:n=>toThenable(n)(o)}}};const persistImpl=(n,a)=>(o,i,u)=>{let d={storage:createJSONStorage(()=>localStorage),partialize:n=>n,version:0,merge:(n,a)=>({...a,...n}),...a};let m=!1;const g=new Set;const y=new Set;let v=d.storage;if(!v)return n((...n)=>{console.warn(`[zustand persist middleware] Unable to update item '${d.name}', the given storage is currently unavailable.`);o(...n)},i,u);const setItem=()=>{const n=d.partialize({...i()});return v.setItem(d.name,{state:n,version:d.version})};const x=u.setState;u.setState=(n,a)=>{x(n,a);void setItem()};const N=n((...n)=>{o(...n);void setItem()},i,u);u.getInitialState=()=>N;let k;const hydrate2=()=>{var n,a;if(!v)return;m=!1;g.forEach(n=>{var a;return n(null!=(a=i())?a:N)});const u=(null==(a=d.onRehydrateStorage)?void 0:a.call(d,null!=(n=i())?n:N))||void 0;return toThenable(v.getItem.bind(v))(d.name).then(n=>{if(n){if("number"!=typeof n.version||n.version===d.version)return[!1,n.state];if(d.migrate)return[!0,d.migrate(n.state,n.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(n=>{var a;const[u,m]=n;k=d.merge(m,null!=(a=i())?a:N);o(k,!0);if(u)return setItem()}).then(()=>{null==u?void 0:u(k,void 0);k=i();m=!0;y.forEach(n=>n(k))}).catch(n=>{null==u?void 0:u(void 0,n)})};u.persist={setOptions:n=>{d={...d,...n};n.storage&&(v=n.storage)},clearStorage:()=>{null==v?void 0:v.removeItem(d.name)},getOptions:()=>d,rehydrate:()=>hydrate2(),hasHydrated:()=>m,onHydrate:n=>{g.add(n);return()=>{g.delete(n)}},onFinishHydration:n=>{y.add(n);return()=>{y.delete(n)}}};d.skipHydration||hydrate2();return k||N};const ac=persistImpl;const createStoreImpl=n=>{let a;const o=new Set;const setState=(n,i)=>{const u="function"==typeof n?n(a):n;if(!Object.is(u,a)){const n=a;a=(null!=i?i:"object"!=typeof u||null===u)?u:Object.assign({},a,u);o.forEach(o=>o(a,n))}};const getState2=()=>a;const getInitialState=()=>u;const subscribe2=n=>{o.add(n);return()=>o.delete(n)};const i={setState:setState,getState:getState2,getInitialState:getInitialState,subscribe:subscribe2};const u=a=n(setState,getState2,i);return i};const createStore=n=>n?createStoreImpl(n):createStoreImpl;var oc={exports:{}};var ic;function requireEventemitter3(){if(ic)return oc.exports;ic=1;!function(n){var a=Object.prototype.hasOwnProperty,o="~";function Events(){}if(Object.create){Events.prototype=Object.create(null);(new Events).__proto__||(o=!1)}function EE(n,a,o){this.fn=n;this.context=a;this.once=o||!1}function addListener(n,a,i,u,d){if("function"!=typeof i)throw new TypeError("The listener must be a function");var m=new EE(i,u||n,d),g=o?o+a:a;n._events[g]?n._events[g].fn?n._events[g]=[n._events[g],m]:n._events[g].push(m):(n._events[g]=m,n._eventsCount++);return n}function clearEvent(n,a){0===--n._eventsCount?n._events=new Events:delete n._events[a]}function EventEmitter2(){this._events=new Events;this._eventsCount=0}EventEmitter2.prototype.eventNames=function(){var n,i,u=[];if(0===this._eventsCount)return u;for(i in n=this._events)a.call(n,i)&&u.push(o?i.slice(1):i);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(n)):u};EventEmitter2.prototype.listeners=function(n){var a=o?o+n:n,i=this._events[a];if(!i)return[];if(i.fn)return[i.fn];for(var u=0,d=i.length,m=new Array(d);u<d;u++)m[u]=i[u].fn;return m};EventEmitter2.prototype.listenerCount=function(n){var a=o?o+n:n,i=this._events[a];return i?i.fn?1:i.length:0};EventEmitter2.prototype.emit=function(n,a,i,u,d,m){var g=o?o+n:n;if(!this._events[g])return!1;var y,v,x=this._events[g],N=arguments.length;if(x.fn){x.once&&this.removeListener(n,x.fn,void 0,!0);switch(N){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,a),!0;case 3:return x.fn.call(x.context,a,i),!0;case 4:return x.fn.call(x.context,a,i,u),!0;case 5:return x.fn.call(x.context,a,i,u,d),!0;case 6:return x.fn.call(x.context,a,i,u,d,m),!0}for(v=1,y=new Array(N-1);v<N;v++)y[v-1]=arguments[v];x.fn.apply(x.context,y)}else{var k,E=x.length;for(v=0;v<E;v++){x[v].once&&this.removeListener(n,x[v].fn,void 0,!0);switch(N){case 1:x[v].fn.call(x[v].context);break;case 2:x[v].fn.call(x[v].context,a);break;case 3:x[v].fn.call(x[v].context,a,i);break;case 4:x[v].fn.call(x[v].context,a,i,u);break;default:if(!y)for(k=1,y=new Array(N-1);k<N;k++)y[k-1]=arguments[k];x[v].fn.apply(x[v].context,y)}}}return!0};EventEmitter2.prototype.on=function(n,a,o){return addListener(this,n,a,o,!1)};EventEmitter2.prototype.once=function(n,a,o){return addListener(this,n,a,o,!0)};EventEmitter2.prototype.removeListener=function(n,a,i,u){var d=o?o+n:n;if(!this._events[d])return this;if(!a){clearEvent(this,d);return this}var m=this._events[d];if(m.fn)m.fn!==a||u&&!m.once||i&&m.context!==i||clearEvent(this,d);else{for(var g=0,y=[],v=m.length;g<v;g++)(m[g].fn!==a||u&&!m[g].once||i&&m[g].context!==i)&&y.push(m[g]);y.length?this._events[d]=1===y.length?y[0]:y:clearEvent(this,d)}return this};EventEmitter2.prototype.removeAllListeners=function(n){var a;if(n){a=o?o+n:n;this._events[a]&&clearEvent(this,a)}else{this._events=new Events;this._eventsCount=0}return this};EventEmitter2.prototype.off=EventEmitter2.prototype.removeListener;EventEmitter2.prototype.addListener=EventEmitter2.prototype.on;EventEmitter2.prefixed=o;EventEmitter2.EventEmitter=EventEmitter2;n.exports=EventEmitter2}(oc);return oc.exports}var cc=requireEventemitter3();const lc=getDefaultExportFromCjs(cc);let uc=class{constructor(n){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:n});Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new lc})}on(n,a){this._emitter.on(n,a)}once(n,a){this._emitter.once(n,a)}off(n,a){this._emitter.off(n,a)}emit(n,...a){const o=a[0];this._emitter.emit(n,{uid:this.uid,...o})}listenerCount(n){return this._emitter.listenerCount(n)}};function createEmitter(n){return new uc(n)}function deserialize(n,a){return JSON.parse(n,(n,o)=>{let i=o;"bigint"===i?.__type&&(i=BigInt(i.value));"Map"===i?.__type&&(i=new Map(i.value));return a?.(n,i)??i})}function getReferenceKey(n,a){return n.slice(0,a).join(".")||"."}function getCutoff(n,a){const{length:o}=n;for(let i=0;i<o;++i)if(n[i]===a)return i+1;return 0}function createReplacer(n,a){const o="function"==typeof n;const i="function"==typeof a;const u=[];const d=[];return function(m,g){if("object"==typeof g)if(u.length){const n=getCutoff(u,this);if(0===n)u[u.length]=this;else{u.splice(n);d.splice(n)}d[d.length]=m;const o=getCutoff(u,g);if(0!==o)return i?a.call(this,m,g,getReferenceKey(d,o)):`[ref=${getReferenceKey(d,o)}]`}else{u[0]=g;d[0]=m}return o?n.call(this,m,g):g}}function serialize(n,a,o,i){return JSON.stringify(n,createReplacer((n,o)=>{let i=o;"bigint"==typeof i&&(i={__type:"bigint",value:o.toString()});i instanceof Map&&(i={__type:"Map",value:Array.from(o.entries())});return a?.(n,i)??i},i),o??void 0)}function createStorage(n){const{deserialize:a=deserialize,key:o="wagmi",serialize:i=serialize,storage:u=dc}=n;function unwrap(n){return n instanceof Promise?n.then(n=>n).catch(()=>null):n}return{...u,key:o,async getItem(n,i){const d=u.getItem(`${o}.${n}`);const m=await unwrap(d);return m?a(m)??null:i??null},async setItem(n,a){const d=`${o}.${n}`;null===a?await unwrap(u.removeItem(d)):await unwrap(u.setItem(d,i(a)))},async removeItem(n){await unwrap(u.removeItem(`${o}.${n}`))}}}const dc={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function getDefaultStorage(){const n=(()=>"undefined"!=typeof window&&window.localStorage?window.localStorage:dc)();return{getItem:a=>n.getItem(a),removeItem(a){n.removeItem(a)},setItem(a,o){try{n.setItem(a,o)}catch{}}}}const hc=256;let fc=hc;let pc;function uid(n=11){if(!pc||fc+n>2*hc){pc="";fc=0;for(let n=0;n<hc;n++)pc+=(256+256*Math.random()|0).toString(16).substring(1)}return pc.substring(fc,fc+++n)}function createConfig(n){const{multiInjectedProviderDiscovery:a=!0,storage:o=createStorage({storage:getDefaultStorage()}),syncConnectedChain:i=!0,ssr:u=!1,...d}=n;const m="undefined"!=typeof window&&a?createStore$1():void 0;const g=createStore(()=>d.chains);const y=createStore(()=>{const n=[];const a=new Set;for(const o of d.connectors??[]){const i=setup(o);n.push(i);if(!u&&i.rdns){const n="string"==typeof i.rdns?[i.rdns]:i.rdns;for(const o of n)a.add(o)}}if(!u&&m){const o=m.getProviders();for(const i of o)a.has(i.info.rdns)||n.push(setup(providerDetailToConnector(i)))}return n});function setup(n){const a=createEmitter(uid());const i={...n({emitter:a,chains:g.getState(),storage:o,transports:d.transports}),emitter:a,uid:a.uid};a.on("connect",connect2);i.setup?.();return i}function providerDetailToConnector(n){const{info:a}=n;const o=n.provider;return injected({target:{...a,id:a.rdns,provider:o}})}const v=new Map;function getClient(n={}){const a=n.chainId??k.getState().chainId;const o=g.getState().find(n=>n.id===a);if(n.chainId&&!o)throw new Li;{const n=v.get(k.getState().chainId);if(n&&!o)return n;if(!o)throw new Li}{const n=v.get(a);if(n)return n}let i;if(d.client)i=d.client({chain:o});else{const n=o.id;const a=g.getState().map(n=>n.id);const u={};const m=Object.entries(d);for(const[o,i]of m)if("chains"!==o&&"client"!==o&&"connectors"!==o&&"transports"!==o)if("object"==typeof i)if(n in i)u[o]=i[n];else{const n=a.some(n=>n in i);if(n)continue;u[o]=i}else u[o]=i;i=createClient({...u,chain:o,batch:u.batch??{multicall:!0},transport:a=>d.transports[n]({...a,connectors:y})})}v.set(a,i);return i}function getInitialState(){return{chainId:g.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let x;const N="0.0.0-canary-";x=Bi.startsWith(N)?Number.parseInt(Bi.replace(N,"")):Number.parseInt(Bi.split(".")[0]??"0");const k=createStore(sc(o?ac(getInitialState,{migrate(n,a){if(a===x)return n;const o=getInitialState();const i=validatePersistedChainId(n,o.chainId);return{...o,chainId:i}},name:"store",partialize:n=>({connections:{__type:"Map",value:Array.from(n.connections.entries()).map(([n,a])=>{const{id:o,name:i,type:u,uid:d}=a.connector;const m={id:o,name:i,type:u,uid:d};return[n,{...a,connector:m}]})},chainId:n.chainId,current:n.current}),merge(n,a){"object"==typeof n&&n&&"status"in n&&delete n.status;const o=validatePersistedChainId(n,a.chainId);return{...a,...n,chainId:o}},skipHydration:u,storage:o,version:x}):getInitialState));k.setState(getInitialState());function validatePersistedChainId(n,a){return n&&"object"==typeof n&&"chainId"in n&&"number"==typeof n.chainId&&g.getState().some(a=>a.id===n.chainId)?n.chainId:a}i&&k.subscribe(({connections:n,current:a})=>a?n.get(a)?.chainId:void 0,n=>{const a=g.getState().some(a=>a.id===n);if(a)return k.setState(a=>({...a,chainId:n??a.chainId}))});m?.subscribe(n=>{const a=new Set;const i=new Set;for(const o of y.getState()){a.add(o.id);if(o.rdns){const n="string"==typeof o.rdns?[o.rdns]:o.rdns;for(const a of n)i.add(a)}}const u=[];for(const o of n){if(i.has(o.info.rdns))continue;const n=setup(providerDetailToConnector(o));a.has(n.id)||u.push(n)}o&&!k.persist.hasHydrated()||y.setState(n=>[...n,...u],!0)});function change(n){k.setState(a=>{const o=a.connections.get(n.uid);return o?{...a,connections:new Map(a.connections).set(n.uid,{accounts:n.accounts??o.accounts,chainId:n.chainId??o.chainId,connector:o.connector})}:a})}function connect2(n){"connecting"!==k.getState().status&&"reconnecting"!==k.getState().status&&k.setState(a=>{const o=y.getState().find(a=>a.uid===n.uid);if(!o)return a;o.emitter.listenerCount("connect")&&o.emitter.off("connect",change);o.emitter.listenerCount("change")||o.emitter.on("change",change);o.emitter.listenerCount("disconnect")||o.emitter.on("disconnect",disconnect2);return{...a,connections:new Map(a.connections).set(n.uid,{accounts:n.accounts,chainId:n.chainId,connector:o}),current:n.uid,status:"connected"}})}function disconnect2(n){k.setState(a=>{const o=a.connections.get(n.uid);if(o){const n=o.connector;n.emitter.listenerCount("change")&&o.connector.emitter.off("change",change);n.emitter.listenerCount("disconnect")&&o.connector.emitter.off("disconnect",disconnect2);n.emitter.listenerCount("connect")||o.connector.emitter.on("connect",connect2)}a.connections.delete(n.uid);if(0===a.connections.size)return{...a,connections:new Map,current:null,status:"disconnected"};const i=a.connections.values().next().value;return{...a,connections:new Map(a.connections),current:i.connector.uid}})}return{get chains(){return g.getState()},get connectors(){return y.getState()},storage:o,getClient:getClient,get state(){return k.getState()},setState(n){let a;a="function"==typeof n?n(k.getState()):n;const o=getInitialState();"object"!=typeof a&&(a=o);const i=Object.keys(o).some(n=>!(n in a));i&&(a=o);k.setState(a,!0)},subscribe:(n,a,o)=>k.subscribe(n,a,o?{...o,fireImmediately:o.emitImmediately}:void 0),_internal:{mipd:m,store:k,ssr:Boolean(u),syncConnectedChain:i,transports:d.transports,chains:{setState(n){const a="function"==typeof n?n(g.getState()):n;if(0!==a.length)return g.setState(a,!0)},subscribe:n=>g.subscribe(n)},connectors:{providerDetailToConnector:providerDetailToConnector,setup:setup,setState:n=>y.setState("function"==typeof n?n(y.getState()):n,!0),subscribe:n=>y.subscribe(n)},events:{change:change,connect:connect2,disconnect:disconnect2}}}}function hydrate(n,a){const{initialState:o,reconnectOnMount:i}=a;o&&!n._internal.store.persist.hasHydrated()&&n.setState({...o,chainId:n.chains.some(n=>n.id===o.chainId)?o.chainId:n.chains[0].id,connections:i?o.connections:new Map,status:i?"reconnecting":"disconnected"});return{async onMount(){if(n._internal.ssr){await n._internal.store.persist.rehydrate();n._internal.mipd&&n._internal.connectors.setState(a=>{const o=new Set;for(const n of a??[])if(n.rdns){const a=Array.isArray(n.rdns)?n.rdns:[n.rdns];for(const n of a)o.add(n)}const i=[];const u=n._internal.mipd?.getProviders()??[];for(const d of u){if(o.has(d.info.rdns))continue;const a=n._internal.connectors.providerDetailToConnector(d);const u=n._internal.connectors.setup(a);i.push(u)}return[...a,...i]})}i?reconnect(n):n.storage&&n.setState(n=>({...n,connections:new Map}))}}}function Hydrate(n){const{children:a,config:o,initialState:i,reconnectOnMount:u=!0}=n;const{onMount:d}=hydrate(o,{initialState:i,reconnectOnMount:u});o._internal.ssr||d();const m=ot.useRef(!0);ot.useEffect(()=>{if(m.current&&o._internal.ssr){d();return()=>{m.current=!1}}},[]);return a}const mc=ot.createContext(void 0);function WagmiProvider(n){const{children:a,config:o}=n;const i={value:o};return ot.createElement(Hydrate,n,ot.createElement(mc.Provider,i,a))}const gc="2.16.2";const getVersion=()=>`wagmi@${gc}`;let yc=class extends Fi{constructor(){super(...arguments);Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return getVersion()}};let bc=class extends yc{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"});Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}};function useConfig(n={}){const a=n.config??ot.useContext(mc);if(!a)throw new bc;return a}function watchChains(n,a){const{onChange:o}=a;return n._internal.chains.subscribe((n,a)=>{o(n,a)})}var vc={exports:{}};var wc={};var xc={exports:{}};var Nc={};
/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kc;function requireUseSyncExternalStoreShim_production(){if(kc)return Nc;kc=1;var n=requireReact();function is2(n,a){return n===a&&(0!==n||1/n==1/a)||n!=n&&a!=a}var a="function"==typeof Object.is?Object.is:is2,o=n.useState,i=n.useEffect,u=n.useLayoutEffect,d=n.useDebugValue;function useSyncExternalStore$2(n,a){var m=a(),g=o({inst:{value:m,getSnapshot:a}}),y=g[0].inst,v=g[1];u(function(){y.value=m;y.getSnapshot=a;checkIfSnapshotChanged(y)&&v({inst:y})},[n,m,a]);i(function(){checkIfSnapshotChanged(y)&&v({inst:y});return n(function(){checkIfSnapshotChanged(y)&&v({inst:y})})},[n]);d(m);return m}function checkIfSnapshotChanged(n){var o=n.getSnapshot;n=n.value;try{var i=o();return!a(n,i)}catch(u){return!0}}function useSyncExternalStore$1(n,a){return a()}var m="undefined"==typeof window||"undefined"==typeof window.document||"undefined"==typeof window.document.createElement?useSyncExternalStore$1:useSyncExternalStore$2;Nc.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:m;return Nc}var Cc;function requireShim(){if(Cc)return xc.exports;Cc=1;xc.exports=requireUseSyncExternalStoreShim_production();return xc.exports}
/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ec;function requireWithSelector_production(){if(Ec)return wc;Ec=1;var n=requireReact(),a=requireShim();function is2(n,a){return n===a&&(0!==n||1/n==1/a)||n!=n&&a!=a}var o="function"==typeof Object.is?Object.is:is2,i=a.useSyncExternalStore,u=n.useRef,d=n.useEffect,m=n.useMemo,g=n.useDebugValue;wc.useSyncExternalStoreWithSelector=function(n,a,y,v,x){var N=u(null);if(null===N.current){var k={hasValue:!1,value:null};N.current=k}else k=N.current;N=m(function(){function memoizedSelector(a){if(!u){u=!0;n=a;a=v(a);if(void 0!==x&&k.hasValue){var d=k.value;if(x(d,a))return i=d}return i=a}d=i;if(o(n,a))return d;var m=v(a);if(void 0!==x&&x(d,m))return n=a,d;n=a;return i=m}var n,i,u=!1,d=void 0===y?null:y;return[function(){return memoizedSelector(a())},null===d?void 0:function(){return memoizedSelector(d())}]},[a,y,v,x]);var E=i(n,N[0],N[1]);d(function(){k.hasValue=!0;k.value=E},[E]);g(E);return E};return wc}var Sc;function requireWithSelector(){if(Sc)return vc.exports;Sc=1;vc.exports=requireWithSelector_production();return vc.exports}var Ac=requireWithSelector();const isPlainObject$2=n=>"object"==typeof n&&!Array.isArray(n);function useSyncExternalStoreWithTracked(n,a,o=a,i=deepEqual$1){const u=ot.useRef([]);const d=Ac.useSyncExternalStoreWithSelector(n,a,o,n=>n,(n,a)=>{if(isPlainObject$2(n)&&isPlainObject$2(a)&&u.current.length){for(const o of u.current){const u=i(n[o],a[o]);if(!u)return!1}return!0}return i(n,a)});return ot.useMemo(()=>{if(isPlainObject$2(d)){const n={...d};let a={};for(const[o,i]of Object.entries(n))a={...a,[o]:{configurable:!1,enumerable:!0,get:()=>{u.current.includes(o)||u.current.push(o);return i}}};Object.defineProperties(n,a);return n}return d},[d])}function useAccount(n={}){const a=useConfig(n);return useSyncExternalStoreWithTracked(n=>watchAccount(a,{onChange:n}),()=>getAccount(a))}var _c=class{constructor(){this.listeners=new Set;this.subscribe=this.subscribe.bind(this)}subscribe(n){this.listeners.add(n);this.onSubscribe();return()=>{this.listeners.delete(n);this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}};var Tc="undefined"==typeof window||"Deno"in globalThis;function noop$1(){}function functionalUpdate(n,a){return"function"==typeof n?n(a):n}function isValidTimeout(n){return"number"==typeof n&&n>=0&&n!==1/0}function timeUntilStale(n,a){return Math.max(n+(a||0)-Date.now(),0)}function resolveStaleTime(n,a){return"function"==typeof n?n(a):n}function resolveEnabled(n,a){return"function"==typeof n?n(a):n}function matchQuery(n,a){const{type:o="all",exact:i,fetchStatus:u,predicate:d,queryKey:m,stale:g}=n;if(m)if(i){if(a.queryHash!==hashQueryKeyByOptions(m,a.options))return!1}else if(!partialMatchKey(a.queryKey,m))return!1;if("all"!==o){const n=a.isActive();if("active"===o&&!n)return!1;if("inactive"===o&&n)return!1}return!("boolean"==typeof g&&a.isStale()!==g||u&&u!==a.state.fetchStatus||d&&!d(a))}function matchMutation(n,a){const{exact:o,status:i,predicate:u,mutationKey:d}=n;if(d){if(!a.options.mutationKey)return!1;if(o){if(hashKey(a.options.mutationKey)!==hashKey(d))return!1}else if(!partialMatchKey(a.options.mutationKey,d))return!1}return!(i&&a.state.status!==i||u&&!u(a))}function hashQueryKeyByOptions(n,a){const o=a?.queryKeyHashFn||hashKey;return o(n)}function hashKey(n){return JSON.stringify(n,(n,a)=>isPlainObject$1(a)?Object.keys(a).sort().reduce((n,o)=>{n[o]=a[o];return n},{}):a)}function partialMatchKey(n,a){return n===a||typeof n==typeof a&&!(!n||!a||"object"!=typeof n||"object"!=typeof a)&&Object.keys(a).every(o=>partialMatchKey(n[o],a[o]))}function replaceEqualDeep(n,a){if(n===a)return n;const o=isPlainArray(n)&&isPlainArray(a);if(o||isPlainObject$1(n)&&isPlainObject$1(a)){const i=o?n:Object.keys(n);const u=i.length;const d=o?a:Object.keys(a);const m=d.length;const g=o?[]:{};const y=new Set(i);let v=0;for(let x=0;x<m;x++){const i=o?x:d[x];if((!o&&y.has(i)||o)&&void 0===n[i]&&void 0===a[i]){g[i]=void 0;v++}else{g[i]=replaceEqualDeep(n[i],a[i]);g[i]===n[i]&&void 0!==n[i]&&v++}}return u===m&&v===u?n:g}return a}function shallowEqualObjects(n,a){if(!a||Object.keys(n).length!==Object.keys(a).length)return!1;for(const o in n)if(n[o]!==a[o])return!1;return!0}function isPlainArray(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function isPlainObject$1(n){if(!hasObjectPrototype$1(n))return!1;const a=n.constructor;if(void 0===a)return!0;const o=a.prototype;return!!hasObjectPrototype$1(o)&&!!o.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(n)===Object.prototype}function hasObjectPrototype$1(n){return"[object Object]"===Object.prototype.toString.call(n)}function sleep(n){return new Promise(a=>{setTimeout(a,n)})}function replaceData(n,a,o){return"function"==typeof o.structuralSharing?o.structuralSharing(n,a):!1!==o.structuralSharing?replaceEqualDeep(n,a):a}function addToEnd(n,a,o=0){const i=[...n,a];return o&&i.length>o?i.slice(1):i}function addToStart(n,a,o=0){const i=[a,...n];return o&&i.length>o?i.slice(0,-1):i}var jc=Symbol();function ensureQueryFn(n,a){return!n.queryFn&&a?.initialPromise?()=>a.initialPromise:n.queryFn&&n.queryFn!==jc?n.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`))}function shouldThrowError(n,a){return"function"==typeof n?n(...a):!!n}var Ic=(_=class extends _c{constructor(){super();__privateAdd$1(this,E);__privateAdd$1(this,S);__privateAdd$1(this,A);__privateSet$1(this,A,n=>{if(!Tc&&window.addEventListener){const listener=()=>n();window.addEventListener("visibilitychange",listener,!1);return()=>{window.removeEventListener("visibilitychange",listener)}}})}onSubscribe(){__privateGet$1(this,S)||this.setEventListener(__privateGet$1(this,A))}onUnsubscribe(){var n;if(!this.hasListeners()){null==(n=__privateGet$1(this,S))?void 0:n.call(this);__privateSet$1(this,S,void 0)}}setEventListener(n){var a;__privateSet$1(this,A,n);null==(a=__privateGet$1(this,S))?void 0:a.call(this);__privateSet$1(this,S,n(n=>{"boolean"==typeof n?this.setFocused(n):this.onFocus()}))}setFocused(n){const a=__privateGet$1(this,E)!==n;if(a){__privateSet$1(this,E,n);this.onFocus()}}onFocus(){const n=this.isFocused();this.listeners.forEach(a=>{a(n)})}isFocused(){return"boolean"==typeof __privateGet$1(this,E)?__privateGet$1(this,E):"hidden"!==globalThis.document?.visibilityState}},E=new WeakMap,S=new WeakMap,A=new WeakMap,_);var Pc=new Ic;var Oc=(R=class extends _c{constructor(){super();__privateAdd$1(this,j,!0);__privateAdd$1(this,I);__privateAdd$1(this,O);__privateSet$1(this,O,n=>{if(!Tc&&window.addEventListener){const onlineListener=()=>n(!0);const offlineListener=()=>n(!1);window.addEventListener("online",onlineListener,!1);window.addEventListener("offline",offlineListener,!1);return()=>{window.removeEventListener("online",onlineListener);window.removeEventListener("offline",offlineListener)}}})}onSubscribe(){__privateGet$1(this,I)||this.setEventListener(__privateGet$1(this,O))}onUnsubscribe(){var n;if(!this.hasListeners()){null==(n=__privateGet$1(this,I))?void 0:n.call(this);__privateSet$1(this,I,void 0)}}setEventListener(n){var a;__privateSet$1(this,O,n);null==(a=__privateGet$1(this,I))?void 0:a.call(this);__privateSet$1(this,I,n(this.setOnline.bind(this)))}setOnline(n){const a=__privateGet$1(this,j)!==n;if(a){__privateSet$1(this,j,n);this.listeners.forEach(a=>{a(n)})}}isOnline(){return __privateGet$1(this,j)}},j=new WeakMap,I=new WeakMap,O=new WeakMap,R);var Rc=new Oc;function pendingThenable(){let n;let a;const o=new Promise((o,i)=>{n=o;a=i});o.status="pending";o.catch(()=>{});function finalize(n){Object.assign(o,n);delete o.resolve;delete o.reject}o.resolve=a=>{finalize({status:"fulfilled",value:a});n(a)};o.reject=n=>{finalize({status:"rejected",reason:n});a(n)};return o}function defaultRetryDelay(n){return Math.min(1e3*2**n,3e4)}function canFetch(n){return"online"!==(n??"online")||Rc.isOnline()}var Bc=class extends Error{constructor(n){super("CancelledError");this.revert=n?.revert;this.silent=n?.silent}};function isCancelledError(n){return n instanceof Bc}function createRetryer(n){let a=!1;let o=0;let i=!1;let u;const d=pendingThenable();const cancel=a=>{if(!i){reject(new Bc(a));n.abort?.()}};const cancelRetry=()=>{a=!0};const continueRetry=()=>{a=!1};const canContinue=()=>Pc.isFocused()&&("always"===n.networkMode||Rc.isOnline())&&n.canRun();const canStart=()=>canFetch(n.networkMode)&&n.canRun();const resolve=a=>{if(!i){i=!0;n.onSuccess?.(a);u?.();d.resolve(a)}};const reject=a=>{if(!i){i=!0;n.onError?.(a);u?.();d.reject(a)}};const pause=()=>new Promise(a=>{u=n=>{(i||canContinue())&&a(n)};n.onPause?.()}).then(()=>{u=void 0;i||n.onContinue?.()});const run=()=>{if(i)return;let u;const d=0===o?n.initialPromise:void 0;try{u=d??n.fn()}catch(m){u=Promise.reject(m)}Promise.resolve(u).then(resolve).catch(u=>{if(i)return;const d=n.retry??(Tc?0:3);const m=n.retryDelay??defaultRetryDelay;const g="function"==typeof m?m(o,u):m;const y=!0===d||"number"==typeof d&&o<d||"function"==typeof d&&d(o,u);if(!a&&y){o++;n.onFail?.(o,u);sleep(g).then(()=>canContinue()?void 0:pause()).then(()=>{a?reject(u):run()})}else reject(u)})};return{promise:d,cancel:cancel,continue:()=>{u?.();return d},cancelRetry:cancelRetry,continueRetry:continueRetry,canStart:canStart,start:()=>{canStart()?run():pause().then(run);return d}}}var defaultScheduler=n=>setTimeout(n,0);function createNotifyManager(){let n=[];let a=0;let notifyFn=n=>{n()};let batchNotifyFn=n=>{n()};let o=defaultScheduler;const schedule=i=>{a?n.push(i):o(()=>{notifyFn(i)})};const flush=()=>{const a=n;n=[];a.length&&o(()=>{batchNotifyFn(()=>{a.forEach(n=>{notifyFn(n)})})})};return{batch:n=>{let o;a++;try{o=n()}finally{a--;a||flush()}return o},batchCalls:n=>(...a)=>{schedule(()=>{n(...a)})},schedule:schedule,setNotifyFunction:n=>{notifyFn=n},setBatchNotifyFunction:n=>{batchNotifyFn=n},setScheduler:n=>{o=n}}}var Mc=createNotifyManager();var zc=(M=class{constructor(){__privateAdd$1(this,B)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout();isValidTimeout(this.gcTime)&&__privateSet$1(this,B,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Tc?1/0:3e5))}clearGcTimeout(){if(__privateGet$1(this,B)){clearTimeout(__privateGet$1(this,B));__privateSet$1(this,B,void 0)}}},B=new WeakMap,M);var Fc=(Y=class extends zc{constructor(n){super();__privateAdd$1(this,V);__privateAdd$1(this,z);__privateAdd$1(this,L);__privateAdd$1(this,D);__privateAdd$1(this,W);__privateAdd$1(this,H);__privateAdd$1(this,q);__privateAdd$1(this,G);__privateSet$1(this,G,!1);__privateSet$1(this,q,n.defaultOptions);this.setOptions(n.options);this.observers=[];__privateSet$1(this,W,n.client);__privateSet$1(this,D,__privateGet$1(this,W).getQueryCache());this.queryKey=n.queryKey;this.queryHash=n.queryHash;__privateSet$1(this,z,getDefaultState$1(this.options));this.state=n.state??__privateGet$1(this,z);this.scheduleGc()}get meta(){return this.options.meta}get promise(){return __privateGet$1(this,H)?.promise}setOptions(n){this.options={...__privateGet$1(this,q),...n};this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||__privateGet$1(this,D).remove(this)}setData(n,a){const o=replaceData(this.state.data,n,this.options);__privateMethod$1(this,V,Z).call(this,{data:o,type:"success",dataUpdatedAt:a?.updatedAt,manual:a?.manual});return o}setState(n,a){__privateMethod$1(this,V,Z).call(this,{type:"setState",state:n,setStateOptions:a})}cancel(n){const a=__privateGet$1(this,H)?.promise;__privateGet$1(this,H)?.cancel(n);return a?a.then(noop$1).catch(noop$1):Promise.resolve()}destroy(){super.destroy();this.cancel({silent:!0})}reset(){this.destroy();this.setState(__privateGet$1(this,z))}isActive(){return this.observers.some(n=>!1!==resolveEnabled(n.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===jc||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(n=>"static"===resolveStaleTime(n.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(n=0){return void 0===this.state.data||"static"!==n&&(!!this.state.isInvalidated||!timeUntilStale(this.state.dataUpdatedAt,n))}onFocus(){const n=this.observers.find(n=>n.shouldFetchOnWindowFocus());n?.refetch({cancelRefetch:!1});__privateGet$1(this,H)?.continue()}onOnline(){const n=this.observers.find(n=>n.shouldFetchOnReconnect());n?.refetch({cancelRefetch:!1});__privateGet$1(this,H)?.continue()}addObserver(n){if(!this.observers.includes(n)){this.observers.push(n);this.clearGcTimeout();__privateGet$1(this,D).notify({type:"observerAdded",query:this,observer:n})}}removeObserver(n){if(this.observers.includes(n)){this.observers=this.observers.filter(a=>a!==n);if(!this.observers.length){__privateGet$1(this,H)&&(__privateGet$1(this,G)?__privateGet$1(this,H).cancel({revert:!0}):__privateGet$1(this,H).cancelRetry());this.scheduleGc()}__privateGet$1(this,D).notify({type:"observerRemoved",query:this,observer:n})}}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||__privateMethod$1(this,V,Z).call(this,{type:"invalidate"})}fetch(n,a){if("idle"!==this.state.fetchStatus)if(void 0!==this.state.data&&a?.cancelRefetch)this.cancel({silent:!0});else if(__privateGet$1(this,H)){__privateGet$1(this,H).continueRetry();return __privateGet$1(this,H).promise}n&&this.setOptions(n);if(!this.options.queryFn){const n=this.observers.find(n=>n.options.queryFn);n&&this.setOptions(n.options)}const o=new AbortController;const addSignalProperty=n=>{Object.defineProperty(n,"signal",{enumerable:!0,get:()=>{__privateSet$1(this,G,!0);return o.signal}})};const fetchFn=()=>{const n=ensureQueryFn(this.options,a);const createQueryFnContext=()=>{const n={client:__privateGet$1(this,W),queryKey:this.queryKey,meta:this.meta};addSignalProperty(n);return n};const o=createQueryFnContext();__privateSet$1(this,G,!1);return this.options.persister?this.options.persister(n,o,this):n(o)};const createFetchContext=()=>{const n={fetchOptions:a,options:this.options,queryKey:this.queryKey,client:__privateGet$1(this,W),state:this.state,fetchFn:fetchFn};addSignalProperty(n);return n};const i=createFetchContext();this.options.behavior?.onFetch(i,this);__privateSet$1(this,L,this.state);"idle"!==this.state.fetchStatus&&this.state.fetchMeta===i.fetchOptions?.meta||__privateMethod$1(this,V,Z).call(this,{type:"fetch",meta:i.fetchOptions?.meta});const onError=n=>{isCancelledError(n)&&n.silent||__privateMethod$1(this,V,Z).call(this,{type:"error",error:n});if(!isCancelledError(n)){__privateGet$1(this,D).config.onError?.(n,this);__privateGet$1(this,D).config.onSettled?.(this.state.data,n,this)}this.scheduleGc()};__privateSet$1(this,H,createRetryer({initialPromise:a?.initialPromise,fn:i.fetchFn,abort:o.abort.bind(o),onSuccess:n=>{if(void 0!==n){try{this.setData(n)}catch(a){onError(a);return}__privateGet$1(this,D).config.onSuccess?.(n,this);__privateGet$1(this,D).config.onSettled?.(n,this.state.error,this);this.scheduleGc()}else onError(new Error(`${this.queryHash} data is undefined`))},onError:onError,onFail:(n,a)=>{__privateMethod$1(this,V,Z).call(this,{type:"failed",failureCount:n,error:a})},onPause:()=>{__privateMethod$1(this,V,Z).call(this,{type:"pause"})},onContinue:()=>{__privateMethod$1(this,V,Z).call(this,{type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0}));return __privateGet$1(this,H).start()}},z=new WeakMap,L=new WeakMap,D=new WeakMap,W=new WeakMap,H=new WeakMap,q=new WeakMap,G=new WeakMap,V=new WeakSet,Z=function(n){const reducer=a=>{switch(n.type){case"failed":return{...a,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...fetchState(a.data,this.options),fetchMeta:n.meta??null};case"success":__privateSet$1(this,L,void 0);return{...a,data:n.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=n.error;return isCancelledError(o)&&o.revert&&__privateGet$1(this,L)?{...__privateGet$1(this,L),fetchStatus:"idle"}:{...a,error:o,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...n.state}}};this.state=reducer(this.state);Mc.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()});__privateGet$1(this,D).notify({query:this,type:"updated",action:n})})},Y);function fetchState(n,a){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch(a.networkMode)?"fetching":"paused",...void 0===n&&{error:null,status:"pending"}}}function getDefaultState$1(n){const a="function"==typeof n.initialData?n.initialData():n.initialData;const o=void 0!==a;const i=o?"function"==typeof n.initialDataUpdatedAt?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:a,dataUpdateCount:0,dataUpdatedAt:o?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:o?"success":"pending",fetchStatus:"idle"}}var Lc=(X=class extends _c{constructor(n={}){super();__privateAdd$1(this,J);this.config=n;__privateSet$1(this,J,new Map)}build(n,a,o){const i=a.queryKey;const u=a.queryHash??hashQueryKeyByOptions(i,a);let d=this.get(u);if(!d){d=new Fc({client:n,queryKey:i,queryHash:u,options:n.defaultQueryOptions(a),state:o,defaultOptions:n.getQueryDefaults(i)});this.add(d)}return d}add(n){if(!__privateGet$1(this,J).has(n.queryHash)){__privateGet$1(this,J).set(n.queryHash,n);this.notify({type:"added",query:n})}}remove(n){const a=__privateGet$1(this,J).get(n.queryHash);if(a){n.destroy();a===n&&__privateGet$1(this,J).delete(n.queryHash);this.notify({type:"removed",query:n})}}clear(){Mc.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}get(n){return __privateGet$1(this,J).get(n)}getAll(){return[...__privateGet$1(this,J).values()]}find(n){const a={exact:!0,...n};return this.getAll().find(n=>matchQuery(a,n))}findAll(n={}){const a=this.getAll();return Object.keys(n).length>0?a.filter(a=>matchQuery(n,a)):a}notify(n){Mc.batch(()=>{this.listeners.forEach(a=>{a(n)})})}onFocus(){Mc.batch(()=>{this.getAll().forEach(n=>{n.onFocus()})})}onOnline(){Mc.batch(()=>{this.getAll().forEach(n=>{n.onOnline()})})}},J=new WeakMap,X);var Dc=(ae=class extends zc{constructor(n){super();__privateAdd$1(this,re);__privateAdd$1(this,ee);__privateAdd$1(this,te);__privateAdd$1(this,ne);this.mutationId=n.mutationId;__privateSet$1(this,te,n.mutationCache);__privateSet$1(this,ee,[]);this.state=n.state||getDefaultState();this.setOptions(n.options);this.scheduleGc()}setOptions(n){this.options=n;this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){if(!__privateGet$1(this,ee).includes(n)){__privateGet$1(this,ee).push(n);this.clearGcTimeout();__privateGet$1(this,te).notify({type:"observerAdded",mutation:this,observer:n})}}removeObserver(n){__privateSet$1(this,ee,__privateGet$1(this,ee).filter(a=>a!==n));this.scheduleGc();__privateGet$1(this,te).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){__privateGet$1(this,ee).length||("pending"===this.state.status?this.scheduleGc():__privateGet$1(this,te).remove(this))}continue(){return __privateGet$1(this,ne)?.continue()??this.execute(this.state.variables)}async execute(n){const onContinue=()=>{__privateMethod$1(this,re,se).call(this,{type:"continue"})};__privateSet$1(this,ne,createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(n,a)=>{__privateMethod$1(this,re,se).call(this,{type:"failed",failureCount:n,error:a})},onPause:()=>{__privateMethod$1(this,re,se).call(this,{type:"pause"})},onContinue:onContinue,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>__privateGet$1(this,te).canRun(this)}));const a="pending"===this.state.status;const o=!__privateGet$1(this,ne).canStart();try{if(a)onContinue();else{__privateMethod$1(this,re,se).call(this,{type:"pending",variables:n,isPaused:o});await(__privateGet$1(this,te).config.onMutate?.(n,this));const a=await(this.options.onMutate?.(n));a!==this.state.context&&__privateMethod$1(this,re,se).call(this,{type:"pending",context:a,variables:n,isPaused:o})}const i=await __privateGet$1(this,ne).start();await(__privateGet$1(this,te).config.onSuccess?.(i,n,this.state.context,this));await(this.options.onSuccess?.(i,n,this.state.context));await(__privateGet$1(this,te).config.onSettled?.(i,null,this.state.variables,this.state.context,this));await(this.options.onSettled?.(i,null,n,this.state.context));__privateMethod$1(this,re,se).call(this,{type:"success",data:i});return i}catch(i){try{await(__privateGet$1(this,te).config.onError?.(i,n,this.state.context,this));await(this.options.onError?.(i,n,this.state.context));await(__privateGet$1(this,te).config.onSettled?.(void 0,i,this.state.variables,this.state.context,this));await(this.options.onSettled?.(void 0,i,n,this.state.context));throw i}finally{__privateMethod$1(this,re,se).call(this,{type:"error",error:i})}}finally{__privateGet$1(this,te).runNext(this)}}},ee=new WeakMap,te=new WeakMap,ne=new WeakMap,re=new WeakSet,se=function(n){const reducer=a=>{switch(n.type){case"failed":return{...a,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...a,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:n.error,failureCount:a.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=reducer(this.state);Mc.batch(()=>{__privateGet$1(this,ee).forEach(a=>{a.onMutationUpdate(n)});__privateGet$1(this,te).notify({mutation:this,type:"updated",action:n})})},ae);function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var $c=(le=class extends _c{constructor(n={}){super();__privateAdd$1(this,oe);__privateAdd$1(this,ie);__privateAdd$1(this,ce);this.config=n;__privateSet$1(this,oe,new Set);__privateSet$1(this,ie,new Map);__privateSet$1(this,ce,0)}build(n,a,o){const i=new Dc({mutationCache:this,mutationId:++__privateWrapper$1(this,ce)._,options:n.defaultMutationOptions(a),state:o});this.add(i);return i}add(n){__privateGet$1(this,oe).add(n);const a=scopeFor(n);if("string"==typeof a){const o=__privateGet$1(this,ie).get(a);o?o.push(n):__privateGet$1(this,ie).set(a,[n])}this.notify({type:"added",mutation:n})}remove(n){if(__privateGet$1(this,oe).delete(n)){const a=scopeFor(n);if("string"==typeof a){const o=__privateGet$1(this,ie).get(a);if(o)if(o.length>1){const a=o.indexOf(n);-1!==a&&o.splice(a,1)}else o[0]===n&&__privateGet$1(this,ie).delete(a)}}this.notify({type:"removed",mutation:n})}canRun(n){const a=scopeFor(n);if("string"==typeof a){const o=__privateGet$1(this,ie).get(a);const i=o?.find(n=>"pending"===n.state.status);return!i||i===n}return!0}runNext(n){const a=scopeFor(n);if("string"==typeof a){const o=__privateGet$1(this,ie).get(a)?.find(a=>a!==n&&a.state.isPaused);return o?.continue()??Promise.resolve()}return Promise.resolve()}clear(){Mc.batch(()=>{__privateGet$1(this,oe).forEach(n=>{this.notify({type:"removed",mutation:n})});__privateGet$1(this,oe).clear();__privateGet$1(this,ie).clear()})}getAll(){return Array.from(__privateGet$1(this,oe))}find(n){const a={exact:!0,...n};return this.getAll().find(n=>matchMutation(a,n))}findAll(n={}){return this.getAll().filter(a=>matchMutation(n,a))}notify(n){Mc.batch(()=>{this.listeners.forEach(a=>{a(n)})})}resumePausedMutations(){const n=this.getAll().filter(n=>n.state.isPaused);return Mc.batch(()=>Promise.all(n.map(n=>n.continue().catch(noop$1))))}},oe=new WeakMap,ie=new WeakMap,ce=new WeakMap,le);function scopeFor(n){return n.options.scope?.id}function infiniteQueryBehavior(n){return{onFetch:(a,o)=>{const i=a.options;const u=a.fetchOptions?.meta?.fetchMore?.direction;const d=a.state.data?.pages||[];const m=a.state.data?.pageParams||[];let g={pages:[],pageParams:[]};let y=0;const fetchFn=async()=>{let o=!1;const addSignalProperty=n=>{Object.defineProperty(n,"signal",{enumerable:!0,get:()=>{a.signal.aborted?o=!0:a.signal.addEventListener("abort",()=>{o=!0});return a.signal}})};const v=ensureQueryFn(a.options,a.fetchOptions);const fetchPage=async(n,i,u)=>{if(o)return Promise.reject();if(null==i&&n.pages.length)return Promise.resolve(n);const createQueryFnContext=()=>{const n={client:a.client,queryKey:a.queryKey,pageParam:i,direction:u?"backward":"forward",meta:a.options.meta};addSignalProperty(n);return n};const d=createQueryFnContext();const m=await v(d);const{maxPages:g}=a.options;const y=u?addToStart:addToEnd;return{pages:y(n.pages,m,g),pageParams:y(n.pageParams,i,g)}};if(u&&d.length){const n="backward"===u;const a=n?getPreviousPageParam:getNextPageParam;const o={pages:d,pageParams:m};const y=a(i,o);g=await fetchPage(o,y,n)}else{const a=n??d.length;do{const n=0===y?m[0]??i.initialPageParam:getNextPageParam(i,g);if(y>0&&null==n)break;g=await fetchPage(g,n);y++}while(y<a)}return g};a.options.persister?a.fetchFn=()=>a.options.persister?.(fetchFn,{client:a.client,queryKey:a.queryKey,meta:a.options.meta,signal:a.signal},o):a.fetchFn=fetchFn}}}function getNextPageParam(n,{pages:a,pageParams:o}){const i=a.length-1;return a.length>0?n.getNextPageParam(a[i],a,o[i],o):void 0}function getPreviousPageParam(n,{pages:a,pageParams:o}){return a.length>0?n.getPreviousPageParam?.(a[0],a,o[0],o):void 0}var Uc=(be=class{constructor(n={}){__privateAdd$1(this,ue);__privateAdd$1(this,de);__privateAdd$1(this,he);__privateAdd$1(this,fe);__privateAdd$1(this,pe);__privateAdd$1(this,me);__privateAdd$1(this,ge);__privateAdd$1(this,ye);__privateSet$1(this,ue,n.queryCache||new Lc);__privateSet$1(this,de,n.mutationCache||new $c);__privateSet$1(this,he,n.defaultOptions||{});__privateSet$1(this,fe,new Map);__privateSet$1(this,pe,new Map);__privateSet$1(this,me,0)}mount(){__privateWrapper$1(this,me)._++;if(1===__privateGet$1(this,me)){__privateSet$1(this,ge,Pc.subscribe(async n=>{if(n){await this.resumePausedMutations();__privateGet$1(this,ue).onFocus()}}));__privateSet$1(this,ye,Rc.subscribe(async n=>{if(n){await this.resumePausedMutations();__privateGet$1(this,ue).onOnline()}}))}}unmount(){var n,a;__privateWrapper$1(this,me)._--;if(0===__privateGet$1(this,me)){null==(n=__privateGet$1(this,ge))?void 0:n.call(this);__privateSet$1(this,ge,void 0);null==(a=__privateGet$1(this,ye))?void 0:a.call(this);__privateSet$1(this,ye,void 0)}}isFetching(n){return __privateGet$1(this,ue).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return __privateGet$1(this,de).findAll({...n,status:"pending"}).length}getQueryData(n){const a=this.defaultQueryOptions({queryKey:n});return __privateGet$1(this,ue).get(a.queryHash)?.state.data}ensureQueryData(n){const a=this.defaultQueryOptions(n);const o=__privateGet$1(this,ue).build(this,a);const i=o.state.data;if(void 0===i)return this.fetchQuery(n);n.revalidateIfStale&&o.isStaleByTime(resolveStaleTime(a.staleTime,o))&&void this.prefetchQuery(a);return Promise.resolve(i)}getQueriesData(n){return __privateGet$1(this,ue).findAll(n).map(({queryKey:n,state:a})=>{const o=a.data;return[n,o]})}setQueryData(n,a,o){const i=this.defaultQueryOptions({queryKey:n});const u=__privateGet$1(this,ue).get(i.queryHash);const d=u?.state.data;const m=functionalUpdate(a,d);if(void 0!==m)return __privateGet$1(this,ue).build(this,i).setData(m,{...o,manual:!0})}setQueriesData(n,a,o){return Mc.batch(()=>__privateGet$1(this,ue).findAll(n).map(({queryKey:n})=>[n,this.setQueryData(n,a,o)]))}getQueryState(n){const a=this.defaultQueryOptions({queryKey:n});return __privateGet$1(this,ue).get(a.queryHash)?.state}removeQueries(n){const a=__privateGet$1(this,ue);Mc.batch(()=>{a.findAll(n).forEach(n=>{a.remove(n)})})}resetQueries(n,a){const o=__privateGet$1(this,ue);return Mc.batch(()=>{o.findAll(n).forEach(n=>{n.reset()});return this.refetchQueries({type:"active",...n},a)})}cancelQueries(n,a={}){const o={revert:!0,...a};const i=Mc.batch(()=>__privateGet$1(this,ue).findAll(n).map(n=>n.cancel(o)));return Promise.all(i).then(noop$1).catch(noop$1)}invalidateQueries(n,a={}){return Mc.batch(()=>{__privateGet$1(this,ue).findAll(n).forEach(n=>{n.invalidate()});return"none"===n?.refetchType?Promise.resolve():this.refetchQueries({...n,type:n?.refetchType??n?.type??"active"},a)})}refetchQueries(n,a={}){const o={...a,cancelRefetch:a.cancelRefetch??!0};const i=Mc.batch(()=>__privateGet$1(this,ue).findAll(n).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let a=n.fetch(void 0,o);o.throwOnError||(a=a.catch(noop$1));return"paused"===n.state.fetchStatus?Promise.resolve():a}));return Promise.all(i).then(noop$1)}fetchQuery(n){const a=this.defaultQueryOptions(n);void 0===a.retry&&(a.retry=!1);const o=__privateGet$1(this,ue).build(this,a);return o.isStaleByTime(resolveStaleTime(a.staleTime,o))?o.fetch(a):Promise.resolve(o.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(noop$1).catch(noop$1)}fetchInfiniteQuery(n){n.behavior=infiniteQueryBehavior(n.pages);return this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(noop$1).catch(noop$1)}ensureInfiniteQueryData(n){n.behavior=infiniteQueryBehavior(n.pages);return this.ensureQueryData(n)}resumePausedMutations(){return Rc.isOnline()?__privateGet$1(this,de).resumePausedMutations():Promise.resolve()}getQueryCache(){return __privateGet$1(this,ue)}getMutationCache(){return __privateGet$1(this,de)}getDefaultOptions(){return __privateGet$1(this,he)}setDefaultOptions(n){__privateSet$1(this,he,n)}setQueryDefaults(n,a){__privateGet$1(this,fe).set(hashKey(n),{queryKey:n,defaultOptions:a})}getQueryDefaults(n){const a=[...__privateGet$1(this,fe).values()];const o={};a.forEach(a=>{partialMatchKey(n,a.queryKey)&&Object.assign(o,a.defaultOptions)});return o}setMutationDefaults(n,a){__privateGet$1(this,pe).set(hashKey(n),{mutationKey:n,defaultOptions:a})}getMutationDefaults(n){const a=[...__privateGet$1(this,pe).values()];const o={};a.forEach(a=>{partialMatchKey(n,a.mutationKey)&&Object.assign(o,a.defaultOptions)});return o}defaultQueryOptions(n){if(n._defaulted)return n;const a={...__privateGet$1(this,he).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};a.queryHash||(a.queryHash=hashQueryKeyByOptions(a.queryKey,a));void 0===a.refetchOnReconnect&&(a.refetchOnReconnect="always"!==a.networkMode);void 0===a.throwOnError&&(a.throwOnError=!!a.suspense);!a.networkMode&&a.persister&&(a.networkMode="offlineFirst");a.queryFn===jc&&(a.enabled=!1);return a}defaultMutationOptions(n){return n?._defaulted?n:{...__privateGet$1(this,he).mutations,...n?.mutationKey&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){__privateGet$1(this,ue).clear();__privateGet$1(this,de).clear()}},ue=new WeakMap,de=new WeakMap,he=new WeakMap,fe=new WeakMap,pe=new WeakMap,me=new WeakMap,ge=new WeakMap,ye=new WeakMap,be);var Wc=(Ge=class extends _c{constructor(n,a){super();__privateAdd$1(this,Me);__privateAdd$1(this,we);__privateAdd$1(this,xe);__privateAdd$1(this,Ne);__privateAdd$1(this,ke);__privateAdd$1(this,Ee);__privateAdd$1(this,Se);__privateAdd$1(this,Ae);__privateAdd$1(this,_e);__privateAdd$1(this,Te);__privateAdd$1(this,je);__privateAdd$1(this,Ie);__privateAdd$1(this,Pe);__privateAdd$1(this,Oe);__privateAdd$1(this,Re);__privateAdd$1(this,Be,new Set);this.options=a;__privateSet$1(this,we,n);__privateSet$1(this,_e,null);__privateSet$1(this,Ae,pendingThenable());this.options.experimental_prefetchInRender||__privateGet$1(this,Ae).reject(new Error("experimental_prefetchInRender feature flag is not enabled"));this.bindMethods();this.setOptions(a)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){if(1===this.listeners.size){__privateGet$1(this,xe).addObserver(this);shouldFetchOnMount(__privateGet$1(this,xe),this.options)?__privateMethod$1(this,Me,ze).call(this):this.updateResult();__privateMethod$1(this,Me,$e).call(this)}}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return shouldFetchOn(__privateGet$1(this,xe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return shouldFetchOn(__privateGet$1(this,xe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set;__privateMethod$1(this,Me,Ue).call(this);__privateMethod$1(this,Me,We).call(this);__privateGet$1(this,xe).removeObserver(this)}setOptions(n){const a=this.options;const o=__privateGet$1(this,xe);this.options=__privateGet$1(this,we).defaultQueryOptions(n);if(void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof resolveEnabled(this.options.enabled,__privateGet$1(this,xe)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");__privateMethod$1(this,Me,He).call(this);__privateGet$1(this,xe).setOptions(this.options);a._defaulted&&!shallowEqualObjects(this.options,a)&&__privateGet$1(this,we).getQueryCache().notify({type:"observerOptionsUpdated",query:__privateGet$1(this,xe),observer:this});const i=this.hasListeners();i&&shouldFetchOptionally(__privateGet$1(this,xe),o,this.options,a)&&__privateMethod$1(this,Me,ze).call(this);this.updateResult();!i||__privateGet$1(this,xe)===o&&resolveEnabled(this.options.enabled,__privateGet$1(this,xe))===resolveEnabled(a.enabled,__privateGet$1(this,xe))&&resolveStaleTime(this.options.staleTime,__privateGet$1(this,xe))===resolveStaleTime(a.staleTime,__privateGet$1(this,xe))||__privateMethod$1(this,Me,Fe).call(this);const u=__privateMethod$1(this,Me,Le).call(this);!i||__privateGet$1(this,xe)===o&&resolveEnabled(this.options.enabled,__privateGet$1(this,xe))===resolveEnabled(a.enabled,__privateGet$1(this,xe))&&u===__privateGet$1(this,Re)||__privateMethod$1(this,Me,De).call(this,u)}getOptimisticResult(n){const a=__privateGet$1(this,we).getQueryCache().build(__privateGet$1(this,we),n);const o=this.createResult(a,n);if(shouldAssignObserverCurrentProperties(this,o)){__privateSet$1(this,ke,o);__privateSet$1(this,Se,this.options);__privateSet$1(this,Ee,__privateGet$1(this,xe).state)}return o}getCurrentResult(){return __privateGet$1(this,ke)}trackResult(n,a){return new Proxy(n,{get:(n,o)=>{this.trackProp(o);a?.(o);return Reflect.get(n,o)}})}trackProp(n){__privateGet$1(this,Be).add(n)}getCurrentQuery(){return __privateGet$1(this,xe)}refetch({...n}={}){return this.fetch({...n})}fetchOptimistic(n){const a=__privateGet$1(this,we).defaultQueryOptions(n);const o=__privateGet$1(this,we).getQueryCache().build(__privateGet$1(this,we),a);return o.fetch().then(()=>this.createResult(o,a))}fetch(n){return __privateMethod$1(this,Me,ze).call(this,{...n,cancelRefetch:n.cancelRefetch??!0}).then(()=>{this.updateResult();return __privateGet$1(this,ke)})}createResult(n,a){const o=__privateGet$1(this,xe);const i=this.options;const u=__privateGet$1(this,ke);const d=__privateGet$1(this,Ee);const m=__privateGet$1(this,Se);const g=n!==o;const y=g?n.state:__privateGet$1(this,Ne);const{state:v}=n;let x={...v};let N=!1;let k;if(a._optimisticResults){const u=this.hasListeners();const d=!u&&shouldFetchOnMount(n,a);const m=u&&shouldFetchOptionally(n,o,a,i);(d||m)&&(x={...x,...fetchState(v.data,n.options)});"isRestoring"===a._optimisticResults&&(x.fetchStatus="idle")}let{error:E,errorUpdatedAt:S,status:A}=x;k=x.data;let _=!1;if(void 0!==a.placeholderData&&void 0===k&&"pending"===A){let n;if(u?.isPlaceholderData&&a.placeholderData===m?.placeholderData){n=u.data;_=!0}else n="function"==typeof a.placeholderData?a.placeholderData(__privateGet$1(this,Ie)?.state.data,__privateGet$1(this,Ie)):a.placeholderData;if(void 0!==n){A="success";k=replaceData(u?.data,n,a);N=!0}}if(a.select&&void 0!==k&&!_)if(u&&k===d?.data&&a.select===__privateGet$1(this,Te))k=__privateGet$1(this,je);else try{__privateSet$1(this,Te,a.select);k=a.select(k);k=replaceData(u?.data,k,a);__privateSet$1(this,je,k);__privateSet$1(this,_e,null)}catch(L){__privateSet$1(this,_e,L)}if(__privateGet$1(this,_e)){E=__privateGet$1(this,_e);k=__privateGet$1(this,je);S=Date.now();A="error"}const j="fetching"===x.fetchStatus;const I="pending"===A;const O="error"===A;const R=I&&j;const B=void 0!==k;const M={status:A,fetchStatus:x.fetchStatus,isPending:I,isSuccess:"success"===A,isError:O,isInitialLoading:R,isLoading:R,data:k,dataUpdatedAt:x.dataUpdatedAt,error:E,errorUpdatedAt:S,failureCount:x.fetchFailureCount,failureReason:x.fetchFailureReason,errorUpdateCount:x.errorUpdateCount,isFetched:x.dataUpdateCount>0||x.errorUpdateCount>0,isFetchedAfterMount:x.dataUpdateCount>y.dataUpdateCount||x.errorUpdateCount>y.errorUpdateCount,isFetching:j,isRefetching:j&&!I,isLoadingError:O&&!B,isPaused:"paused"===x.fetchStatus,isPlaceholderData:N,isRefetchError:O&&B,isStale:isStale(n,a),refetch:this.refetch,promise:__privateGet$1(this,Ae),isEnabled:!1!==resolveEnabled(a.enabled,n)};const z=M;if(this.options.experimental_prefetchInRender){const finalizeThenableIfPossible=n=>{"error"===z.status?n.reject(z.error):void 0!==z.data&&n.resolve(z.data)};const recreateThenable=()=>{const n=__privateSet$1(this,Ae,z.promise=pendingThenable());finalizeThenableIfPossible(n)};const a=__privateGet$1(this,Ae);switch(a.status){case"pending":n.queryHash===o.queryHash&&finalizeThenableIfPossible(a);break;case"fulfilled":"error"!==z.status&&z.data===a.value||recreateThenable();break;case"rejected":"error"===z.status&&z.error===a.reason||recreateThenable()}}return z}updateResult(){const n=__privateGet$1(this,ke);const a=this.createResult(__privateGet$1(this,xe),this.options);__privateSet$1(this,Ee,__privateGet$1(this,xe).state);__privateSet$1(this,Se,this.options);void 0!==__privateGet$1(this,Ee).data&&__privateSet$1(this,Ie,__privateGet$1(this,xe));if(shallowEqualObjects(a,n))return;__privateSet$1(this,ke,a);const shouldNotifyListeners=()=>{if(!n)return!0;const{notifyOnChangeProps:a}=this.options;const o="function"==typeof a?a():a;if("all"===o||!o&&!__privateGet$1(this,Be).size)return!0;const i=new Set(o??__privateGet$1(this,Be));this.options.throwOnError&&i.add("error");return Object.keys(__privateGet$1(this,ke)).some(a=>{const o=a;const u=__privateGet$1(this,ke)[o]!==n[o];return u&&i.has(o)})};__privateMethod$1(this,Me,qe).call(this,{listeners:shouldNotifyListeners()})}onQueryUpdate(){this.updateResult();this.hasListeners()&&__privateMethod$1(this,Me,$e).call(this)}},we=new WeakMap,xe=new WeakMap,Ne=new WeakMap,ke=new WeakMap,Ee=new WeakMap,Se=new WeakMap,Ae=new WeakMap,_e=new WeakMap,Te=new WeakMap,je=new WeakMap,Ie=new WeakMap,Pe=new WeakMap,Oe=new WeakMap,Re=new WeakMap,Be=new WeakMap,Me=new WeakSet,ze=function(n){__privateMethod$1(this,Me,He).call(this);let a=__privateGet$1(this,xe).fetch(this.options,n);n?.throwOnError||(a=a.catch(noop$1));return a},Fe=function(){__privateMethod$1(this,Me,Ue).call(this);const n=resolveStaleTime(this.options.staleTime,__privateGet$1(this,xe));if(Tc||__privateGet$1(this,ke).isStale||!isValidTimeout(n))return;const a=timeUntilStale(__privateGet$1(this,ke).dataUpdatedAt,n);const o=a+1;__privateSet$1(this,Pe,setTimeout(()=>{__privateGet$1(this,ke).isStale||this.updateResult()},o))},Le=function(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(__privateGet$1(this,xe)):this.options.refetchInterval)??!1},De=function(n){__privateMethod$1(this,Me,We).call(this);__privateSet$1(this,Re,n);!Tc&&!1!==resolveEnabled(this.options.enabled,__privateGet$1(this,xe))&&isValidTimeout(__privateGet$1(this,Re))&&0!==__privateGet$1(this,Re)&&__privateSet$1(this,Oe,setInterval(()=>{(this.options.refetchIntervalInBackground||Pc.isFocused())&&__privateMethod$1(this,Me,ze).call(this)},__privateGet$1(this,Re)))},$e=function(){__privateMethod$1(this,Me,Fe).call(this);__privateMethod$1(this,Me,De).call(this,__privateMethod$1(this,Me,Le).call(this))},Ue=function(){if(__privateGet$1(this,Pe)){clearTimeout(__privateGet$1(this,Pe));__privateSet$1(this,Pe,void 0)}},We=function(){if(__privateGet$1(this,Oe)){clearInterval(__privateGet$1(this,Oe));__privateSet$1(this,Oe,void 0)}},He=function(){const n=__privateGet$1(this,we).getQueryCache().build(__privateGet$1(this,we),this.options);if(n===__privateGet$1(this,xe))return;const a=__privateGet$1(this,xe);__privateSet$1(this,xe,n);__privateSet$1(this,Ne,n.state);if(this.hasListeners()){a?.removeObserver(this);n.addObserver(this)}},qe=function(n){Mc.batch(()=>{n.listeners&&this.listeners.forEach(n=>{n(__privateGet$1(this,ke))});__privateGet$1(this,we).getQueryCache().notify({query:__privateGet$1(this,xe),type:"observerResultsUpdated"})})},Ge);function shouldLoadOnMount(n,a){return!1!==resolveEnabled(a.enabled,n)&&void 0===n.state.data&&!("error"===n.state.status&&!1===a.retryOnMount)}function shouldFetchOnMount(n,a){return shouldLoadOnMount(n,a)||void 0!==n.state.data&&shouldFetchOn(n,a,a.refetchOnMount)}function shouldFetchOn(n,a,o){if(!1!==resolveEnabled(a.enabled,n)&&"static"!==resolveStaleTime(a.staleTime,n)){const i="function"==typeof o?o(n):o;return"always"===i||!1!==i&&isStale(n,a)}return!1}function shouldFetchOptionally(n,a,o,i){return(n!==a||!1===resolveEnabled(i.enabled,n))&&(!o.suspense||"error"!==n.state.status)&&isStale(n,o)}function isStale(n,a){return!1!==resolveEnabled(a.enabled,n)&&n.isStaleByTime(resolveStaleTime(a.staleTime,n))}function shouldAssignObserverCurrentProperties(n,a){return!shallowEqualObjects(n.getCurrentResult(),a)}var Hc=(et=class extends _c{constructor(n,a){super();__privateAdd$1(this,Je);__privateAdd$1(this,Ve);__privateAdd$1(this,Ke);__privateAdd$1(this,Ze);__privateAdd$1(this,Ye);__privateSet$1(this,Ve,n);this.setOptions(a);this.bindMethods();__privateMethod$1(this,Je,Qe).call(this)}bindMethods(){this.mutate=this.mutate.bind(this);this.reset=this.reset.bind(this)}setOptions(n){const a=this.options;this.options=__privateGet$1(this,Ve).defaultMutationOptions(n);shallowEqualObjects(this.options,a)||__privateGet$1(this,Ve).getMutationCache().notify({type:"observerOptionsUpdated",mutation:__privateGet$1(this,Ze),observer:this});a?.mutationKey&&this.options.mutationKey&&hashKey(a.mutationKey)!==hashKey(this.options.mutationKey)?this.reset():"pending"===__privateGet$1(this,Ze)?.state.status&&__privateGet$1(this,Ze).setOptions(this.options)}onUnsubscribe(){this.hasListeners()||__privateGet$1(this,Ze)?.removeObserver(this)}onMutationUpdate(n){__privateMethod$1(this,Je,Qe).call(this);__privateMethod$1(this,Je,Xe).call(this,n)}getCurrentResult(){return __privateGet$1(this,Ke)}reset(){__privateGet$1(this,Ze)?.removeObserver(this);__privateSet$1(this,Ze,void 0);__privateMethod$1(this,Je,Qe).call(this);__privateMethod$1(this,Je,Xe).call(this)}mutate(n,a){__privateSet$1(this,Ye,a);__privateGet$1(this,Ze)?.removeObserver(this);__privateSet$1(this,Ze,__privateGet$1(this,Ve).getMutationCache().build(__privateGet$1(this,Ve),this.options));__privateGet$1(this,Ze).addObserver(this);return __privateGet$1(this,Ze).execute(n)}},Ve=new WeakMap,Ke=new WeakMap,Ze=new WeakMap,Ye=new WeakMap,Je=new WeakSet,Qe=function(){const n=__privateGet$1(this,Ze)?.state??getDefaultState();__privateSet$1(this,Ke,{...n,isPending:"pending"===n.status,isSuccess:"success"===n.status,isError:"error"===n.status,isIdle:"idle"===n.status,mutate:this.mutate,reset:this.reset})},Xe=function(n){Mc.batch(()=>{if(__privateGet$1(this,Ye)&&this.hasListeners()){const a=__privateGet$1(this,Ke).variables;const o=__privateGet$1(this,Ke).context;if("success"===n?.type){__privateGet$1(this,Ye).onSuccess?.(n.data,a,o);__privateGet$1(this,Ye).onSettled?.(n.data,null,a,o)}else if("error"===n?.type){__privateGet$1(this,Ye).onError?.(n.error,a,o);__privateGet$1(this,Ye).onSettled?.(void 0,n.error,a,o)}}this.listeners.forEach(n=>{n(__privateGet$1(this,Ke))})})},et);function hashFn(n){return JSON.stringify(n,(n,a)=>isPlainObject(a)?Object.keys(a).sort().reduce((n,o)=>{n[o]=a[o];return n},{}):"bigint"==typeof a?a.toString():a)}function isPlainObject(n){if(!hasObjectPrototype(n))return!1;const a=n.constructor;if("undefined"==typeof a)return!0;const o=a.prototype;return!!hasObjectPrototype(o)&&!!o.hasOwnProperty("isPrototypeOf")}function hasObjectPrototype(n){return"[object Object]"===Object.prototype.toString.call(n)}function filterQueryOptions(n){const{_defaulted:a,behavior:o,gcTime:i,initialData:u,initialDataUpdatedAt:d,maxPages:m,meta:g,networkMode:y,queryFn:v,queryHash:x,queryKey:N,queryKeyHashFn:k,retry:E,retryDelay:S,structuralSharing:A,getPreviousPageParam:_,getNextPageParam:j,initialPageParam:I,_optimisticResults:O,enabled:R,notifyOnChangeProps:B,placeholderData:M,refetchInterval:z,refetchIntervalInBackground:L,refetchOnMount:D,refetchOnReconnect:W,refetchOnWindowFocus:H,retryOnMount:q,select:G,staleTime:V,suspense:Z,throwOnError:Y,config:J,connector:X,query:ee,...te}=n;return te}function connectMutationOptions(n){return{mutationFn:a=>connect(n,a),mutationKey:["connect"]}}function disconnectMutationOptions(n){return{mutationFn:a=>disconnect(n,a),mutationKey:["disconnect"]}}function getBalanceQueryOptions(n,a={}){return{async queryFn({queryKey:a}){const{address:o,scopeKey:i,...u}=a[1];if(!o)throw new Error("address is required");const d=await getBalance(n,{...u,address:o});return d??null},queryKey:getBalanceQueryKey(a)}}function getBalanceQueryKey(n={}){return["balance",filterQueryOptions(n)]}function switchChainMutationOptions(n){return{mutationFn:a=>switchChain(n,a),mutationKey:["switchChain"]}}var qc=ot.createContext(void 0);var useQueryClient=n=>{const a=ot.useContext(qc);if(!a)throw new Error("No QueryClient set, use QueryClientProvider to set one");return a};var QueryClientProvider=({client:n,children:a})=>{ot.useEffect(()=>{n.mount();return()=>{n.unmount()}},[n]);return at.jsx(qc.Provider,{value:n,children:a})};var Gc=ot.createContext(!1);var useIsRestoring=()=>ot.useContext(Gc);Gc.Provider;function createValue(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var Vc=ot.createContext(createValue());var useQueryErrorResetBoundary=()=>ot.useContext(Vc);var ensurePreventErrorBoundaryRetry=(n,a)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(a.isReset()||(n.retryOnMount=!1))};var useClearResetErrorBoundary=n=>{ot.useEffect(()=>{n.clearReset()},[n])};var getHasError=({result:n,errorResetBoundary:a,throwOnError:o,query:i,suspense:u})=>n.isError&&!a.isReset()&&!n.isFetching&&i&&(u&&void 0===n.data||shouldThrowError(o,[n.error,i]));var ensureSuspenseTimers=n=>{if(n.suspense){const clamp2=n=>"static"===n?n:Math.max(n??1e3,1e3);const a=n.staleTime;n.staleTime="function"==typeof a?(...n)=>clamp2(a(...n)):clamp2(a);"number"==typeof n.gcTime&&(n.gcTime=Math.max(n.gcTime,1e3))}};var willFetch=(n,a)=>n.isLoading&&n.isFetching&&!a;var shouldSuspend=(n,a)=>n?.suspense&&a.isPending;var fetchOptimistic=(n,a,o)=>a.fetchOptimistic(n).catch(()=>{o.clearReset()});function useBaseQuery(n,a,o){const i=useIsRestoring();const u=useQueryErrorResetBoundary();const d=useQueryClient();const m=d.defaultQueryOptions(n);d.getDefaultOptions().queries?._experimental_beforeQuery?.(m);m._optimisticResults=i?"isRestoring":"optimistic";ensureSuspenseTimers(m);ensurePreventErrorBoundaryRetry(m,u);useClearResetErrorBoundary(u);const g=!d.getQueryCache().get(m.queryHash);const[y]=ot.useState(()=>new a(d,m));const v=y.getOptimisticResult(m);const x=!i&&!1!==n.subscribed;ot.useSyncExternalStore(ot.useCallback(n=>{const a=x?y.subscribe(Mc.batchCalls(n)):noop$1;y.updateResult();return a},[y,x]),()=>y.getCurrentResult(),()=>y.getCurrentResult());ot.useEffect(()=>{y.setOptions(m)},[m,y]);if(shouldSuspend(m,v))throw fetchOptimistic(m,y,u);if(getHasError({result:v,errorResetBoundary:u,throwOnError:m.throwOnError,query:d.getQueryCache().get(m.queryHash),suspense:m.suspense}))throw v.error;d.getDefaultOptions().queries?._experimental_afterQuery?.(m,v);if(m.experimental_prefetchInRender&&!Tc&&willFetch(v,i)){const n=g?fetchOptimistic(m,y,u):d.getQueryCache().get(m.queryHash)?.promise;n?.catch(noop$1).finally(()=>{y.updateResult()})}return m.notifyOnChangeProps?v:y.trackResult(v)}function useQuery$1(n,a){return useBaseQuery(n,Wc)}function useMutation(n,a){const o=useQueryClient();const[i]=ot.useState(()=>new Hc(o,n));ot.useEffect(()=>{i.setOptions(n)},[i,n]);const u=ot.useSyncExternalStore(ot.useCallback(n=>i.subscribe(Mc.batchCalls(n)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult());const d=ot.useCallback((n,a)=>{i.mutate(n,a).catch(noop$1)},[i]);if(u.error&&shouldThrowError(i.options.throwOnError,[u.error]))throw u.error;return{...u,mutate:d,mutateAsync:u.mutate}}function useQuery(n){const a=useQuery$1({...n,queryKeyHashFn:hashFn});a.queryKey=n.queryKey;return a}function useChainId(n={}){const a=useConfig(n);return ot.useSyncExternalStore(n=>watchChainId(a,{onChange:n}),()=>getChainId(a),()=>getChainId(a))}function useBalance(n={}){const{address:a,query:o={}}=n;const i=useConfig(n);const u=useChainId({config:i});const d=getBalanceQueryOptions(i,{...n,chainId:n.chainId??u});const m=Boolean(a&&(o.enabled??!0));return useQuery({...o,...d,enabled:m})}function useChains(n={}){const a=useConfig(n);return ot.useSyncExternalStore(n=>watchChains(a,{onChange:n}),()=>getChains(a),()=>getChains(a))}function useConnectors(n={}){const a=useConfig(n);return ot.useSyncExternalStore(n=>watchConnectors(a,{onChange:n}),()=>getConnectors(a),()=>getConnectors(a))}function useConnect(n={}){const{mutation:a}=n;const o=useConfig(n);const i=connectMutationOptions(o);const{mutate:u,mutateAsync:d,...m}=useMutation({...a,...i});ot.useEffect(()=>o.subscribe(({status:n})=>n,(n,a)=>{"connected"===a&&"disconnected"===n&&m.reset()}),[o,m.reset]);return{...m,connect:u,connectAsync:d,connectors:useConnectors({config:o})}}function useConnections(n={}){const a=useConfig(n);return ot.useSyncExternalStore(n=>watchConnections(a,{onChange:n}),()=>getConnections(a),()=>getConnections(a))}function useDisconnect(n={}){const{mutation:a}=n;const o=useConfig(n);const i=disconnectMutationOptions(o);const{mutate:u,mutateAsync:d,...m}=useMutation({...a,...i});return{...m,connectors:useConnections({config:o}).map(n=>n.connector),disconnect:u,disconnectAsync:d}}function useSwitchChain(n={}){const{mutation:a}=n;const o=useConfig(n);const i=switchChainMutationOptions(o);const{mutate:u,mutateAsync:d,...m}=useMutation({...a,...i});return{...m,chains:useChains({config:o}),switchChain:u,switchChainAsync:d}}var Kc=Object.defineProperty;var __typeError=n=>{throw TypeError(n)};var __defNormalProp$1=(n,a,o)=>a in n?Kc(n,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[a]=o;var __publicField$1=(n,a,o)=>__defNormalProp$1(n,"symbol"!=typeof a?a+"":a,o);var __accessCheck=(n,a,o)=>a.has(n)||__typeError("Cannot "+o);var __privateGet=(n,a,o)=>(__accessCheck(n,a,"read from private field"),o?o.call(n):a.get(n));var __privateAdd=(n,a,o)=>a.has(n)?__typeError("Cannot add the same private member more than once"):a instanceof WeakSet?a.add(n):a.set(n,o);var __privateSet=(n,a,o,i)=>(__accessCheck(n,a,"write to private field"),a.set(n,o),o);var __privateMethod=(n,a,o)=>(__accessCheck(n,a,"access private method"),o);var __privateWrapper=(n,a,o,i)=>({set _(o){__privateSet(n,a,o)},get _(){return __privateGet(n,a,i)}});var Zc,Yc,Jc,Qc,Xc,el,tl,nl,rl,sl,al,ol,il,cl,ll,ul,dl,hl,fl,pl,ml,gl,yl,bl,vl,wl,xl,Nl,kl,Cl,El,Sl,Al,_l,Tl,jl,Il,Pl,Ol,Rl,Bl,Ml,zl,Fl,Ll,Dl,$l,Ul,Wl,Hl,ql,Gl,Vl,Kl,Zl,Yl,Jl,Ql,Xl,eu,tu,nu,ru,su,au,ou,iu,cu,lu,uu,du,hu,fu,pu,mu,gu,yu,bu,vu,wu,xu,Nu,ku,Cu,Eu,Su,Au,_u,Tu,ju,Iu,Pu,Ou,Ru,Bu,Mu,zu,Fu,Lu,Du,$u,Uu,Wu,Hu,qu,Gu,Vu,Ku,Zu,Yu,Ju,Qu,Xu,ed,td,nd,rd,sd,ad,od,id,cd,ld,ud,dd,hd,fd,pd,md,gd,yd,bd,vd,wd,xd,Nd,kd,Cd,Ed,Sd,Ad,_d,Td,jd,Id,Pd,Od,Rd,Bd,Md,zd,Fd,Ld,Dd,$d,Ud,Wd,Hd,qd,Gd,Vd,Kd,Zd,Yd,Jd,Qd,Xd,eh,th,nh,rh,sh,ah,oh,ih;const ch="6.15.0";function checkType(n,a,o){const i=a.split("|").map(n=>n.trim());for(let d=0;d<i.length;d++)switch(a){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof n===a)return}const u=new Error(`invalid value for type ${a}`);u.code="INVALID_ARGUMENT";u.argument=`value.${o}`;u.value=n;throw u}async function resolveProperties(n){const a=Object.keys(n);const o=await Promise.all(a.map(a=>Promise.resolve(n[a])));return o.reduce((n,o,i)=>{n[a[i]]=o;return n},{})}function defineProperties(n,a,o){for(let i in a){let u=a[i];const d=o?o[i]:null;d&&checkType(u,d,i);Object.defineProperty(n,i,{enumerable:!0,value:u,writable:!1})}}function stringify$1(n,a){if(null==n)return"null";null==a&&(a=new Set);if("object"==typeof n){if(a.has(n))return"[Circular]";a.add(n)}if(Array.isArray(n))return"[ "+n.map(n=>stringify$1(n,a)).join(", ")+" ]";if(n instanceof Uint8Array){const a="0123456789abcdef";let o="0x";for(let i=0;i<n.length;i++){o+=a[n[i]>>4];o+=a[15&n[i]]}return o}if("object"==typeof n&&"function"==typeof n.toJSON)return stringify$1(n.toJSON(),a);switch(typeof n){case"boolean":case"number":case"symbol":return n.toString();case"bigint":return BigInt(n).toString();case"string":return JSON.stringify(n);case"object":{const o=Object.keys(n);o.sort();return"{ "+o.map(o=>`${stringify$1(o,a)}: ${stringify$1(n[o],a)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function isError(n,a){return n&&n.code===a}function isCallException(n){return isError(n,"CALL_EXCEPTION")}function makeError(n,a,o){let i=n;{const i=[];if(o){if("message"in o||"code"in o||"name"in o)throw new Error(`value will overwrite populated values: ${stringify$1(o)}`);for(const n in o){if("shortMessage"===n)continue;const a=o[n];i.push(n+"="+stringify$1(a))}}i.push(`code=${a}`);i.push(`version=${ch}`);i.length&&(n+=" ("+i.join(", ")+")")}let u;switch(a){case"INVALID_ARGUMENT":u=new TypeError(n);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":u=new RangeError(n);break;default:u=new Error(n)}defineProperties(u,{code:a});o&&Object.assign(u,o);null==u.shortMessage&&defineProperties(u,{shortMessage:i});return u}function assert(n,a,o,i){if(!n)throw makeError(a,o,i)}function assertArgument(n,a,o,i){assert(n,a,"INVALID_ARGUMENT",{argument:o,value:i})}function assertArgumentCount(n,a,o){null==o&&(o="");o&&(o=": "+o);assert(n>=a,"missing argument"+o,"MISSING_ARGUMENT",{count:n,expectedCount:a});assert(n<=a,"too many arguments"+o,"UNEXPECTED_ARGUMENT",{count:n,expectedCount:a})}["NFD","NFC","NFKD","NFKC"].reduce((n,a)=>{try{if("test"!=="test".normalize(a))throw new Error("bad");if("NFD"===a){const n=String.fromCharCode(233).normalize("NFD");const a=String.fromCharCode(101,769);if(n!==a)throw new Error("broken")}n.push(a)}catch(o){}return n},[]);function assertPrivate(n,a,o){null==o&&(o="");if(n!==a){let n=o,a="new";if(o){n+=".";a+=" "+o}assert(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:a})}}function _getBytes(n,a,o){if(n instanceof Uint8Array)return o?new Uint8Array(n):n;if("string"==typeof n&&n.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const a=new Uint8Array((n.length-2)/2);let o=2;for(let i=0;i<a.length;i++){a[i]=parseInt(n.substring(o,o+2),16);o+=2}return a}assertArgument(!1,"invalid BytesLike value",a||"value",n)}function getBytes(n,a){return _getBytes(n,a,!1)}function getBytesCopy(n,a){return _getBytes(n,a,!0)}function isHexString(n,a){return!("string"!=typeof n||!n.match(/^0x[0-9A-Fa-f]*$/)||"number"==typeof a&&n.length!==2+2*a||!0===a&&n.length%2!=0)}function isBytesLike(n){return isHexString(n,!0)||n instanceof Uint8Array}const lh="0123456789abcdef";function hexlify(n){const a=getBytes(n);let o="0x";for(let i=0;i<a.length;i++){const n=a[i];o+=lh[(240&n)>>4]+lh[15&n]}return o}function concat(n){return"0x"+n.map(n=>hexlify(n).substring(2)).join("")}function dataLength(n){return isHexString(n,!0)?(n.length-2)/2:getBytes(n).length}function dataSlice(n,a,o){const i=getBytes(n);null!=o&&o>i.length&&assert(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:i,length:i.length,offset:o});return hexlify(i.slice(null==a?0:a,null==o?i.length:o))}function zeroPad$1(n,a,o){const i=getBytes(n);assert(a>=i.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(i),length:a,offset:a+1});const u=new Uint8Array(a);u.fill(0);o?u.set(i,a-i.length):u.set(i,0);return hexlify(u)}function zeroPadValue(n,a){return zeroPad$1(n,a,!0)}function zeroPadBytes(n,a){return zeroPad$1(n,a,!1)}const uh=BigInt(0);const dh=BigInt(1);const hh=9007199254740991;function fromTwos(n,a){const o=getUint(n,"value");const i=BigInt(getNumber(a,"width"));assert(o>>i===uh,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:n});if(o>>i-dh){const n=(dh<<i)-dh;return-((~o&n)+dh)}return o}function toTwos(n,a){let o=getBigInt(n,"value");const i=BigInt(getNumber(a,"width"));const u=dh<<i-dh;if(o<uh){o=-o;assert(o<=u,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});const a=(dh<<i)-dh;return(~o&a)+dh}assert(o<u,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:n});return o}function mask(n,a){const o=getUint(n,"value");const i=BigInt(getNumber(a,"bits"));return o&(dh<<i)-dh}function getBigInt(n,a){switch(typeof n){case"bigint":return n;case"number":assertArgument(Number.isInteger(n),"underflow",a||"value",n);assertArgument(n>=-hh&&n<=hh,"overflow",a||"value",n);return BigInt(n);case"string":try{if(""===n)throw new Error("empty string");return"-"===n[0]&&"-"!==n[1]?-BigInt(n.substring(1)):BigInt(n)}catch(o){assertArgument(!1,`invalid BigNumberish string: ${o.message}`,a||"value",n)}}assertArgument(!1,"invalid BigNumberish value",a||"value",n)}function getUint(n,a){const o=getBigInt(n,a);assert(o>=uh,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:n});return o}const fh="0123456789abcdef";function toBigInt(n){if(n instanceof Uint8Array){let a="0x0";for(const o of n){a+=fh[o>>4];a+=fh[15&o]}return BigInt(a)}return getBigInt(n)}function getNumber(n,a){switch(typeof n){case"bigint":assertArgument(n>=-hh&&n<=hh,"overflow",a||"value",n);return Number(n);case"number":assertArgument(Number.isInteger(n),"underflow",a||"value",n);assertArgument(n>=-hh&&n<=hh,"overflow",a||"value",n);return n;case"string":try{if(""===n)throw new Error("empty string");return getNumber(BigInt(n),a)}catch(o){assertArgument(!1,`invalid numeric string: ${o.message}`,a||"value",n)}}assertArgument(!1,"invalid numeric value",a||"value",n)}function toNumber(n){return getNumber(toBigInt(n))}function toBeHex(n,a){const o=getUint(n,"value");let i=o.toString(16);if(null==a)i.length%2&&(i="0"+i);else{const o=getNumber(a,"width");assert(2*o>=i.length,`value exceeds width (${o} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:n});for(;i.length<2*o;)i="0"+i}return"0x"+i}function toBeArray(n){const a=getUint(n,"value");if(a===uh)return new Uint8Array([]);let o=a.toString(16);o.length%2&&(o="0"+o);const i=new Uint8Array(o.length/2);for(let u=0;u<i.length;u++){const n=2*u;i[u]=parseInt(o.substring(n,n+2),16)}return i}function toQuantity(n){let a=hexlify(isBytesLike(n)?n:toBeArray(n)).substring(2);for(;a.startsWith("0");)a=a.substring(1);""===a&&(a="0");return"0x"+a}const ph="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const mh=BigInt(58);function encodeBase58(n){const a=getBytes(n);let o=toBigInt(a);let i="";for(;o;){i=ph[Number(o%mh)]+i;o/=mh}for(let u=0;u<a.length&&!a[u];u++)i=ph[0]+i;return i}function decodeBase64(n){n=atob(n);const a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return getBytes(a)}function encodeBase64(n){const a=getBytes(n);let o="";for(let i=0;i<a.length;i++)o+=String.fromCharCode(a[i]);return btoa(o)}let gh=class{constructor(n,a,o){__publicField$1(this,"filter");__publicField$1(this,"emitter");__privateAdd(this,Zc);__privateSet(this,Zc,a);defineProperties(this,{emitter:n,filter:o})}async removeListener(){null!=__privateGet(this,Zc)&&await this.emitter.off(this.filter,__privateGet(this,Zc))}};Zc=new WeakMap;function errorFunc(n,a,o,i,u){assertArgument(!1,`invalid codepoint at offset ${a}; ${n}`,"bytes",o)}function ignoreFunc(n,a,o,i,u){if("BAD_PREFIX"===n||"UNEXPECTED_CONTINUE"===n){let n=0;for(let i=a+1;i<o.length&&o[i]>>6==2;i++)n++;return n}return"OVERRUN"===n?o.length-a-1:0}function replaceFunc(n,a,o,i,u){if("OVERLONG"===n){assertArgument("number"==typeof u,"invalid bad code point for replacement","badCodepoint",u);i.push(u);return 0}i.push(65533);return ignoreFunc(n,a,o)}const yh=Object.freeze({error:errorFunc,ignore:ignoreFunc,replace:replaceFunc});function getUtf8CodePoints(n,a){null==a&&(a=yh.error);const o=getBytes(n,"bytes");const i=[];let u=0;for(;u<o.length;){const n=o[u++];if(!(n>>7)){i.push(n);continue}let d=null;let m=null;if(192==(224&n)){d=1;m=127}else if(224==(240&n)){d=2;m=2047}else{if(240!=(248&n)){u+=a(128==(192&n)?"UNEXPECTED_CONTINUE":"BAD_PREFIX",u-1,o,i);continue}d=3;m=65535}if(u-1+d>=o.length){u+=a("OVERRUN",u-1,o,i);continue}let g=n&(1<<8-d-1)-1;for(let y=0;y<d;y++){let n=o[u];if(128!=(192&n)){u+=a("MISSING_CONTINUE",u,o,i);g=null;break}g=g<<6|63&n;u++}null!==g&&(g>1114111?u+=a("OUT_OF_RANGE",u-1-d,o,i,g):g>=55296&&g<=57343?u+=a("UTF16_SURROGATE",u-1-d,o,i,g):g<=m?u+=a("OVERLONG",u-1-d,o,i,g):i.push(g))}return i}function toUtf8Bytes(n,a){assertArgument("string"==typeof n,"invalid string value","str",n);let o=[];for(let i=0;i<n.length;i++){const a=n.charCodeAt(i);if(a<128)o.push(a);else if(a<2048){o.push(a>>6|192);o.push(63&a|128)}else if(55296==(64512&a)){i++;const u=n.charCodeAt(i);assertArgument(i<n.length&&56320==(64512&u),"invalid surrogate pair","str",n);const d=65536+((1023&a)<<10)+(1023&u);o.push(d>>18|240);o.push(d>>12&63|128);o.push(d>>6&63|128);o.push(63&d|128)}else{o.push(a>>12|224);o.push(a>>6&63|128);o.push(63&a|128)}}return new Uint8Array(o)}function _toUtf8String(n){return n.map(n=>{if(n<=65535)return String.fromCharCode(n);n-=65536;return String.fromCharCode(55296+(n>>10&1023),56320+(1023&n))}).join("")}function toUtf8String(n,a){return _toUtf8String(getUtf8CodePoints(n,a))}function createGetUrl(n){async function getUrl2(a,o){assert(null==o||!o.cancelled,"request cancelled before sending","CANCELLED");const i=a.url.split(":")[0].toLowerCase();assert("http"===i||"https"===i,`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"});assert("https"===i||!a.credentials||a.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let u=null;const d=new AbortController;const m=setTimeout(()=>{u=makeError("request timeout","TIMEOUT");d.abort()},a.timeout);o&&o.addListener(()=>{u=makeError("request cancelled","CANCELLED");d.abort()});const g=Object.assign({},n,{method:a.method,headers:new Headers(Array.from(a)),body:a.body||void 0,signal:d.signal});let y;try{y=await fetch(a.url,g)}catch(k){clearTimeout(m);if(u)throw u;throw k}clearTimeout(m);const v={};y.headers.forEach((n,a)=>{v[a.toLowerCase()]=n});const x=await y.arrayBuffer();const N=null==x?null:new Uint8Array(x);return{statusCode:y.status,statusMessage:y.statusText,headers:v,body:N}}return getUrl2}const bh=12;const vh=250;let wh=createGetUrl();const xh=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i");const Nh=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let kh=!1;async function dataGatewayFunc(n,a){try{const a=n.match(xh);if(!a)throw new Error("invalid data");return new jh(200,"OK",{"content-type":a[1]||"text/plain"},a[2]?decodeBase64(a[3]):unpercent(a[3]))}catch(o){return new jh(599,"BAD REQUEST (invalid data: URI)",{},null,new _h(n))}}function getIpfsGatewayFunc(n){async function gatewayIpfs(a,o){try{const o=a.match(Nh);if(!o)throw new Error("invalid link");return new _h(`${n}${o[2]}`)}catch(i){return new jh(599,"BAD REQUEST (invalid IPFS URI)",{},null,new _h(a))}}return gatewayIpfs}const Ch={data:dataGatewayFunc,ipfs:getIpfsGatewayFunc("https://gateway.ipfs.io/ipfs/")};const Eh=new WeakMap;let Sh=class{constructor(n){__privateAdd(this,Yc);__privateAdd(this,Jc);__privateSet(this,Yc,[]);__privateSet(this,Jc,!1);Eh.set(n,()=>{if(!__privateGet(this,Jc)){__privateSet(this,Jc,!0);for(const n of __privateGet(this,Yc))setTimeout(()=>{n()},0);__privateSet(this,Yc,[])}})}addListener(n){assert(!__privateGet(this,Jc),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"});__privateGet(this,Yc).push(n)}get cancelled(){return __privateGet(this,Jc)}checkSignal(){assert(!this.cancelled,"cancelled","CANCELLED",{})}};Yc=new WeakMap;Jc=new WeakMap;function checkSignal(n){if(null==n)throw new Error("missing signal; should not happen");n.checkSignal();return n}const Ah=class n{constructor(n){__privateAdd(this,fl);__privateAdd(this,Qc);__privateAdd(this,Xc);__privateAdd(this,el);__privateAdd(this,tl);__privateAdd(this,nl);__privateAdd(this,rl);__privateAdd(this,sl);__privateAdd(this,al);__privateAdd(this,ol);__privateAdd(this,il);__privateAdd(this,cl);__privateAdd(this,ll);__privateAdd(this,ul);__privateAdd(this,dl);__privateAdd(this,hl);__privateSet(this,rl,String(n));__privateSet(this,Qc,!1);__privateSet(this,Xc,!0);__privateSet(this,el,{});__privateSet(this,tl,"");__privateSet(this,nl,3e5);__privateSet(this,dl,{slotInterval:vh,maxAttempts:bh});__privateSet(this,hl,null)}get url(){return __privateGet(this,rl)}set url(n){__privateSet(this,rl,String(n))}get body(){return null==__privateGet(this,sl)?null:new Uint8Array(__privateGet(this,sl))}set body(n){if(null==n){__privateSet(this,sl,void 0);__privateSet(this,al,void 0)}else if("string"==typeof n){__privateSet(this,sl,toUtf8Bytes(n));__privateSet(this,al,"text/plain")}else if(n instanceof Uint8Array){__privateSet(this,sl,n);__privateSet(this,al,"application/octet-stream")}else{if("object"!=typeof n)throw new Error("invalid body");__privateSet(this,sl,toUtf8Bytes(JSON.stringify(n)));__privateSet(this,al,"application/json")}}hasBody(){return null!=__privateGet(this,sl)}get method(){return __privateGet(this,tl)?__privateGet(this,tl):this.hasBody()?"POST":"GET"}set method(n){null==n&&(n="");__privateSet(this,tl,String(n).toUpperCase())}get headers(){const n=Object.assign({},__privateGet(this,el));__privateGet(this,ol)&&(n.authorization=`Basic ${encodeBase64(toUtf8Bytes(__privateGet(this,ol)))}`);this.allowGzip&&(n["accept-encoding"]="gzip");null==n["content-type"]&&__privateGet(this,al)&&(n["content-type"]=__privateGet(this,al));this.body&&(n["content-length"]=String(this.body.length));return n}getHeader(n){return this.headers[n.toLowerCase()]}setHeader(n,a){__privateGet(this,el)[String(n).toLowerCase()]=String(a)}clearHeaders(){__privateSet(this,el,{})}[Symbol.iterator](){const n=this.headers;const a=Object.keys(n);let o=0;return{next:()=>{if(o<a.length){const i=a[o++];return{value:[i,n[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return __privateGet(this,ol)||null}setCredentials(n,a){assertArgument(!n.match(/:/),"invalid basic authentication username","username","[REDACTED]");__privateSet(this,ol,`${n}:${a}`)}get allowGzip(){return __privateGet(this,Xc)}set allowGzip(n){__privateSet(this,Xc,!!n)}get allowInsecureAuthentication(){return!!__privateGet(this,Qc)}set allowInsecureAuthentication(n){__privateSet(this,Qc,!!n)}get timeout(){return __privateGet(this,nl)}set timeout(n){assertArgument(n>=0,"timeout must be non-zero","timeout",n);__privateSet(this,nl,n)}get preflightFunc(){return __privateGet(this,il)||null}set preflightFunc(n){__privateSet(this,il,n)}get processFunc(){return __privateGet(this,cl)||null}set processFunc(n){__privateSet(this,cl,n)}get retryFunc(){return __privateGet(this,ll)||null}set retryFunc(n){__privateSet(this,ll,n)}get getUrlFunc(){return __privateGet(this,hl)||wh}set getUrlFunc(n){__privateSet(this,hl,n)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${__privateGet(this,sl)?hexlify(__privateGet(this,sl)):"null"}>`}setThrottleParams(n){null!=n.slotInterval&&(__privateGet(this,dl).slotInterval=n.slotInterval);null!=n.maxAttempts&&(__privateGet(this,dl).maxAttempts=n.maxAttempts)}send(){assert(null==__privateGet(this,ul),"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"});__privateSet(this,ul,new Sh(this));return __privateMethod(this,fl,pl).call(this,0,getTime$1()+this.timeout,0,this,new jh(0,"",{},null,this))}cancel(){assert(null!=__privateGet(this,ul),"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const n=Eh.get(this);if(!n)throw new Error("missing signal; should not happen");n()}redirect(a){const o=this.url.split(":")[0].toLowerCase();const i=a.split(":")[0].toLowerCase();assert("GET"===this.method&&("https"!==o||"http"!==i)&&a.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(a)})`});const u=new n(a);u.method="GET";u.allowGzip=this.allowGzip;u.timeout=this.timeout;__privateSet(u,el,Object.assign({},__privateGet(this,el)));__privateGet(this,sl)&&__privateSet(u,sl,new Uint8Array(__privateGet(this,sl)));__privateSet(u,al,__privateGet(this,al));return u}clone(){const a=new n(this.url);__privateSet(a,tl,__privateGet(this,tl));__privateGet(this,sl)&&__privateSet(a,sl,__privateGet(this,sl));__privateSet(a,al,__privateGet(this,al));__privateSet(a,el,Object.assign({},__privateGet(this,el)));__privateSet(a,ol,__privateGet(this,ol));this.allowGzip&&(a.allowGzip=!0);a.timeout=this.timeout;this.allowInsecureAuthentication&&(a.allowInsecureAuthentication=!0);__privateSet(a,il,__privateGet(this,il));__privateSet(a,cl,__privateGet(this,cl));__privateSet(a,ll,__privateGet(this,ll));__privateSet(a,dl,Object.assign({},__privateGet(this,dl)));__privateSet(a,hl,__privateGet(this,hl));return a}static lockConfig(){kh=!0}static getGateway(n){return Ch[n.toLowerCase()]||null}static registerGateway(n,a){n=n.toLowerCase();if("http"===n||"https"===n)throw new Error(`cannot intercept ${n}; use registerGetUrl`);if(kh)throw new Error("gateways locked");Ch[n]=a}static registerGetUrl(n){if(kh)throw new Error("gateways locked");wh=n}static createGetUrlFunc(n){return createGetUrl(n)}static createDataGateway(){return dataGatewayFunc}static createIpfsGatewayFunc(n){return getIpfsGatewayFunc(n)}};Qc=new WeakMap;Xc=new WeakMap;el=new WeakMap;tl=new WeakMap;nl=new WeakMap;rl=new WeakMap;sl=new WeakMap;al=new WeakMap;ol=new WeakMap;il=new WeakMap;cl=new WeakMap;ll=new WeakMap;ul=new WeakMap;dl=new WeakMap;hl=new WeakMap;fl=new WeakSet;pl=async function(n,a,o,i,u){var d,m,g;if(n>=__privateGet(this,dl).maxAttempts)return u.makeServerError("exceeded maximum retry limit");assert(getTime$1()<=a,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i});o>0&&await wait(o);let y=this.clone();const v=(y.url.split(":")[0]||"").toLowerCase();if(v in Ch){const n=await Ch[v](y.url,checkSignal(__privateGet(i,ul)));if(n instanceof jh){let a=n;if(this.processFunc){checkSignal(__privateGet(i,ul));try{a=await this.processFunc(y,a)}catch(k){null!=k.throttle&&"number"==typeof k.stall||a.makeServerError("error in post-processing function",k).assertOk()}}return a}y=n}this.preflightFunc&&(y=await this.preflightFunc(y));const x=await this.getUrlFunc(y,checkSignal(__privateGet(i,ul)));let N=new jh(x.statusCode,x.statusMessage,x.headers,x.body,i);if(301===N.statusCode||302===N.statusCode){try{const o=N.headers.location||"";return __privateMethod(d=y.redirect(o),fl,pl).call(d,n+1,a,0,i,N)}catch(k){}return N}if(429===N.statusCode&&(null==this.retryFunc||await this.retryFunc(y,N,n))){const o=N.headers["retry-after"];let u=__privateGet(this,dl).slotInterval*Math.trunc(Math.random()*Math.pow(2,n));"string"==typeof o&&o.match(/^[1-9][0-9]*$/)&&(u=parseInt(o));return __privateMethod(m=y.clone(),fl,pl).call(m,n+1,a,u,i,N)}if(this.processFunc){checkSignal(__privateGet(i,ul));try{N=await this.processFunc(y,N)}catch(k){null!=k.throttle&&"number"==typeof k.stall||N.makeServerError("error in post-processing function",k).assertOk();let o=__privateGet(this,dl).slotInterval*Math.trunc(Math.random()*Math.pow(2,n));k.stall>=0&&(o=k.stall);return __privateMethod(g=y.clone(),fl,pl).call(g,n+1,a,o,i,N)}}return N};let _h=Ah;const Th=class n{constructor(n,a,o,i,u){__privateAdd(this,ml);__privateAdd(this,gl);__privateAdd(this,yl);__privateAdd(this,bl);__privateAdd(this,vl);__privateAdd(this,wl);__privateSet(this,ml,n);__privateSet(this,gl,a);__privateSet(this,yl,Object.keys(o).reduce((n,a)=>{n[a.toLowerCase()]=String(o[a]);return n},{}));__privateSet(this,bl,null==i?null:new Uint8Array(i));__privateSet(this,vl,u||null);__privateSet(this,wl,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${__privateGet(this,bl)?hexlify(__privateGet(this,bl)):"null"}>`}get statusCode(){return __privateGet(this,ml)}get statusMessage(){return __privateGet(this,gl)}get headers(){return Object.assign({},__privateGet(this,yl))}get body(){return null==__privateGet(this,bl)?null:new Uint8Array(__privateGet(this,bl))}get bodyText(){try{return null==__privateGet(this,bl)?"":toUtf8String(__privateGet(this,bl))}catch(n){assert(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(n){assert(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const n=this.headers;const a=Object.keys(n);let o=0;return{next:()=>{if(o<a.length){const i=a[o++];return{value:[i,n[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(a,o){let i;if(a)i=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${a})`;else{a=`${this.statusCode} ${this.statusMessage}`;i=`CLIENT ESCALATED SERVER ERROR (${a})`}const u=new n(599,i,this.headers,this.body,__privateGet(this,vl)||void 0);__privateSet(u,wl,{message:a,error:o});return u}throwThrottleError(n,a){null==a?a=-1:assertArgument(Number.isInteger(a)&&a>=0,"invalid stall timeout","stall",a);const o=new Error(n||"throttling requests");defineProperties(o,{stall:a,throttle:!0});throw o}getHeader(n){return this.headers[n.toLowerCase()]}hasBody(){return null!=__privateGet(this,bl)}get request(){return __privateGet(this,vl)}ok(){return""===__privateGet(this,wl).message&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:n,error:a}=__privateGet(this,wl);""===n&&(n=`server response ${this.statusCode} ${this.statusMessage}`);let o=null;this.request&&(o=this.request.url);let i=null;try{__privateGet(this,bl)&&(i=toUtf8String(__privateGet(this,bl)))}catch(u){}assert(!1,n,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:a,info:{requestUrl:o,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};ml=new WeakMap;gl=new WeakMap;yl=new WeakMap;bl=new WeakMap;vl=new WeakMap;wl=new WeakMap;let jh=Th;function getTime$1(){return(new Date).getTime()}function unpercent(n){return toUtf8Bytes(n.replace(/%([0-9a-f][0-9a-f])/gi,(n,a)=>String.fromCharCode(parseInt(a,16))))}function wait(n){return new Promise(a=>setTimeout(a,n))}const Ih=BigInt(-1);const Ph=BigInt(0);const Oh=BigInt(1);const Rh=BigInt(5);const Bh={};let Mh="0000";for(;Mh.length<80;)Mh+=Mh;function getTens(n){let a=Mh;for(;a.length<n;)a+=a;return BigInt("1"+a.substring(0,n))}function checkValue(n,a,o){const i=BigInt(a.width);if(a.signed){const a=Oh<<i-Oh;assert(null==o||n>=-a&&n<a,"overflow","NUMERIC_FAULT",{operation:o,fault:"overflow",value:n});n=n>Ph?fromTwos(mask(n,i),i):-fromTwos(mask(-n,i),i)}else{const a=Oh<<i;assert(null==o||n>=0&&n<a,"overflow","NUMERIC_FAULT",{operation:o,fault:"overflow",value:n});n=(n%a+a)%a&a-Oh}return n}function getFormat(n){"number"==typeof n&&(n=`fixed128x${n}`);let a=!0;let o=128;let i=18;if("string"==typeof n)if("fixed"===n);else if("ufixed"===n)a=!1;else{const u=n.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);assertArgument(u,"invalid fixed format","format",n);a="u"!==u[1];o=parseInt(u[2]);i=parseInt(u[3])}else if(n){const u=n;const check=(n,a,o)=>{if(null==u[n])return o;assertArgument(typeof u[n]===a,"invalid fixed format ("+n+" not "+a+")","format."+n,u[n]);return u[n]};a=check("signed","boolean",a);o=check("width","number",o);i=check("decimals","number",i)}assertArgument(o%8==0,"invalid FixedNumber width (not byte aligned)","format.width",o);assertArgument(i<=80,"invalid FixedNumber decimals (too large)","format.decimals",i);const u=(a?"":"u")+"fixed"+String(o)+"x"+String(i);return{signed:a,width:o,decimals:i,name:u}}function toString(n,a){let o="";if(n<Ph){o="-";n*=Ih}let i=n.toString();if(0===a)return o+i;for(;i.length<=a;)i=Mh+i;const u=i.length-a;i=i.substring(0,u)+"."+i.substring(u);for(;"0"===i[0]&&"."!==i[1];)i=i.substring(1);for(;"0"===i[i.length-1]&&"."!==i[i.length-2];)i=i.substring(0,i.length-1);return o+i}const zh=class n{constructor(n,a,o){__privateAdd(this,Cl);__publicField$1(this,"format");__privateAdd(this,xl);__privateAdd(this,Nl);__privateAdd(this,kl);__publicField$1(this,"_value");assertPrivate(n,Bh,"FixedNumber");__privateSet(this,Nl,a);__privateSet(this,xl,o);const i=toString(a,o.decimals);defineProperties(this,{format:o.name,_value:i});__privateSet(this,kl,getTens(o.decimals))}get signed(){return __privateGet(this,xl).signed}get width(){return __privateGet(this,xl).width}get decimals(){return __privateGet(this,xl).decimals}get value(){return __privateGet(this,Nl)}addUnsafe(n){return __privateMethod(this,Cl,Al).call(this,n)}add(n){return __privateMethod(this,Cl,Al).call(this,n,"add")}subUnsafe(n){return __privateMethod(this,Cl,_l).call(this,n)}sub(n){return __privateMethod(this,Cl,_l).call(this,n,"sub")}mulUnsafe(n){return __privateMethod(this,Cl,Tl).call(this,n)}mul(n){return __privateMethod(this,Cl,Tl).call(this,n,"mul")}mulSignal(n){__privateMethod(this,Cl,El).call(this,n);const a=__privateGet(this,Nl)*__privateGet(n,Nl);assert(a%__privateGet(this,kl)===Ph,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this});return __privateMethod(this,Cl,Sl).call(this,a/__privateGet(this,kl),"mulSignal")}divUnsafe(n){return __privateMethod(this,Cl,jl).call(this,n)}div(n){return __privateMethod(this,Cl,jl).call(this,n,"div")}divSignal(n){assert(__privateGet(n,Nl)!==Ph,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this});__privateMethod(this,Cl,El).call(this,n);const a=__privateGet(this,Nl)*__privateGet(this,kl);assert(a%__privateGet(n,Nl)===Ph,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this});return __privateMethod(this,Cl,Sl).call(this,a/__privateGet(n,Nl),"divSignal")}cmp(n){let a=this.value,o=n.value;const i=this.decimals-n.decimals;i>0?o*=getTens(i):i<0&&(a*=getTens(-i));return a<o?-1:a>o?1:0}eq(n){return 0===this.cmp(n)}lt(n){return this.cmp(n)<0}lte(n){return this.cmp(n)<=0}gt(n){return this.cmp(n)>0}gte(n){return this.cmp(n)>=0}floor(){let n=__privateGet(this,Nl);__privateGet(this,Nl)<Ph&&(n-=__privateGet(this,kl)-Oh);n=__privateGet(this,Nl)/__privateGet(this,kl)*__privateGet(this,kl);return __privateMethod(this,Cl,Sl).call(this,n,"floor")}ceiling(){let n=__privateGet(this,Nl);__privateGet(this,Nl)>Ph&&(n+=__privateGet(this,kl)-Oh);n=__privateGet(this,Nl)/__privateGet(this,kl)*__privateGet(this,kl);return __privateMethod(this,Cl,Sl).call(this,n,"ceiling")}round(a){null==a&&(a=0);if(a>=this.decimals)return this;const o=this.decimals-a;const i=Rh*getTens(o-1);let u=this.value+i;const d=getTens(o);u=u/d*d;checkValue(u,__privateGet(this,xl),"round");return new n(Bh,u,__privateGet(this,xl))}isZero(){return __privateGet(this,Nl)===Ph}isNegative(){return __privateGet(this,Nl)<Ph}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(a){return n.fromString(this.toString(),a)}static fromValue(a,o,i){const u=null==o?0:getNumber(o);const d=getFormat(i);let m=getBigInt(a,"value");const g=u-d.decimals;if(g>0){const n=getTens(g);assert(m%n===Ph,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:a});m/=n}else g<0&&(m*=getTens(-g));checkValue(m,d,"fromValue");return new n(Bh,m,d)}static fromString(a,o){const i=a.match(/^(-?)([0-9]*)\.?([0-9]*)$/);assertArgument(i&&i[2].length+i[3].length>0,"invalid FixedNumber string value","value",a);const u=getFormat(o);let d=i[2]||"0",m=i[3]||"";for(;m.length<u.decimals;)m+=Mh;assert(m.substring(u.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:a});m=m.substring(0,u.decimals);const g=BigInt(i[1]+d+m);checkValue(g,u,"fromString");return new n(Bh,g,u)}static fromBytes(a,o){let i=toBigInt(getBytes(a,"value"));const u=getFormat(o);u.signed&&(i=fromTwos(i,u.width));checkValue(i,u,"fromBytes");return new n(Bh,i,u)}};xl=new WeakMap;Nl=new WeakMap;kl=new WeakMap;Cl=new WeakSet;El=function(n){assertArgument(this.format===n.format,"incompatible format; use fixedNumber.toFormat","other",n)};Sl=function(n,a){n=checkValue(n,__privateGet(this,xl),a);return new zh(Bh,n,__privateGet(this,xl))};Al=function(n,a){__privateMethod(this,Cl,El).call(this,n);return __privateMethod(this,Cl,Sl).call(this,__privateGet(this,Nl)+__privateGet(n,Nl),a)};_l=function(n,a){__privateMethod(this,Cl,El).call(this,n);return __privateMethod(this,Cl,Sl).call(this,__privateGet(this,Nl)-__privateGet(n,Nl),a)};Tl=function(n,a){__privateMethod(this,Cl,El).call(this,n);return __privateMethod(this,Cl,Sl).call(this,__privateGet(this,Nl)*__privateGet(n,Nl)/__privateGet(this,kl),a)};jl=function(n,a){assert(__privateGet(n,Nl)!==Ph,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this});__privateMethod(this,Cl,El).call(this,n);return __privateMethod(this,Cl,Sl).call(this,__privateGet(this,Nl)*__privateGet(this,kl)/__privateGet(n,Nl),a)};let Fh=zh;function hexlifyByte(n){let a=n.toString(16);for(;a.length<2;)a="0"+a;return"0x"+a}function unarrayifyInteger(n,a,o){let i=0;for(let u=0;u<o;u++)i=256*i+n[a+u];return i}function _decodeChildren(n,a,o,i){const u=[];for(;o<a+1+i;){const d=_decode(n,o);u.push(d.result);o+=d.consumed;assert(o<=a+1+i,"child data too short","BUFFER_OVERRUN",{buffer:n,length:i,offset:a})}return{consumed:1+i,result:u}}function _decode(n,a){assert(0!==n.length,"data too short","BUFFER_OVERRUN",{buffer:n,length:0,offset:1});const checkOffset=a=>{assert(a<=n.length,"data short segment too short","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:a})};if(n[a]>=248){const o=n[a]-247;checkOffset(a+1+o);const i=unarrayifyInteger(n,a+1,o);checkOffset(a+1+o+i);return _decodeChildren(n,a,a+1+o,o+i)}if(n[a]>=192){const o=n[a]-192;checkOffset(a+1+o);return _decodeChildren(n,a,a+1,o)}if(n[a]>=184){const o=n[a]-183;checkOffset(a+1+o);const i=unarrayifyInteger(n,a+1,o);checkOffset(a+1+o+i);const u=hexlify(n.slice(a+1+o,a+1+o+i));return{consumed:1+o+i,result:u}}if(n[a]>=128){const o=n[a]-128;checkOffset(a+1+o);const i=hexlify(n.slice(a+1,a+1+o));return{consumed:1+o,result:i}}return{consumed:1,result:hexlifyByte(n[a])}}function decodeRlp(n){const a=getBytes(n,"data");const o=_decode(a,0);assertArgument(o.consumed===a.length,"unexpected junk after rlp payload","data",n);return o.result}function arrayifyInteger(n){const a=[];for(;n;){a.unshift(255&n);n>>=8}return a}function _encode(n){if(Array.isArray(n)){let a=[];n.forEach(function(n){a=a.concat(_encode(n))});if(a.length<=55){a.unshift(192+a.length);return a}const o=arrayifyInteger(a.length);o.unshift(247+o.length);return o.concat(a)}const a=Array.prototype.slice.call(getBytes(n,"object"));if(1===a.length&&a[0]<=127)return a;if(a.length<=55){a.unshift(128+a.length);return a}const o=arrayifyInteger(a.length);o.unshift(183+o.length);return o.concat(a)}const Lh="0123456789abcdef";function encodeRlp(n){let a="0x";for(const o of _encode(n)){a+=Lh[o>>4];a+=Lh[15&o]}return a}const Dh=["wei","kwei","mwei","gwei","szabo","finney","ether"];function formatUnits(n,a){let o=18;o=getNumber(a,"unit");return Fh.fromValue(n,o,{decimals:o,width:512}).toString()}function parseUnits$1(n,a){assertArgument("string"==typeof n,"value must be a string","value",n);let o=18;if("string"==typeof a){const n=Dh.indexOf(a);assertArgument(n>=0,"invalid unit","unit",a);o=3*n}else null!=a&&(o=getNumber(a,"unit"));return Fh.fromString(n,{decimals:o,width:512}).value}function formatEther(n){return formatUnits(n,18)}function parseEther(n){return parseUnits$1(n,18)}const Uh=32;const Wh=new Uint8Array(Uh);const Hh=["then"];const Gh={};const Vh=new WeakMap;function getNames(n){return Vh.get(n)}function setNames(n,a){Vh.set(n,a)}function throwError(n,a){const o=new Error(`deferred error during ABI decoding triggered accessing ${n}`);o.error=a;throw o}function toObject(n,a,o){return n.indexOf(null)>=0?a.map((n,a)=>n instanceof Zh?toObject(getNames(n),n,o):n):n.reduce((n,i,u)=>{let d=a.getValue(i);if(!(i in n)){o&&d instanceof Zh&&(d=toObject(getNames(d),d,o));n[i]=d}return n},{})}const Kh=class n extends Array{constructor(...n){const a=n[0];let o=n[1];let i=(n[2]||[]).slice();let u=!0;if(a!==Gh){o=n;i=[];u=!1}super(o.length);__privateAdd(this,Il);o.forEach((n,a)=>{this[a]=n});const d=i.reduce((n,a)=>{"string"==typeof a&&n.set(a,(n.get(a)||0)+1);return n},new Map);setNames(this,Object.freeze(o.map((n,a)=>{const o=i[a];return null!=o&&1===d.get(o)?o:null})));__privateSet(this,Il,[]);null==__privateGet(this,Il)&&void __privateGet(this,Il);if(!u)return;Object.freeze(this);const m=new Proxy(this,{get:(n,a,o)=>{if("string"==typeof a){if(a.match(/^[0-9]+$/)){const o=getNumber(a,"%index");if(o<0||o>=this.length)throw new RangeError("out of result range");const i=n[o];i instanceof Error&&throwError(`index ${o}`,i);return i}if(Hh.indexOf(a)>=0)return Reflect.get(n,a,o);const i=n[a];if(i instanceof Function)return function(...a){return i.apply(this===o?n:this,a)};if(!(a in n))return n.getValue.apply(this===o?n:this,[a])}return Reflect.get(n,a,o)}});setNames(m,getNames(this));return m}toArray(a){const o=[];this.forEach((i,u)=>{i instanceof Error&&throwError(`index ${u}`,i);a&&i instanceof n&&(i=i.toArray(a));o.push(i)});return o}toObject(n){const a=getNames(this);return a.reduce((o,i,u)=>{assert(null!=i,`value at index ${u} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"});return toObject(a,this,n)},{})}slice(a,o){null==a&&(a=0);if(a<0){a+=this.length;a<0&&(a=0)}null==o&&(o=this.length);if(o<0){o+=this.length;o<0&&(o=0)}o>this.length&&(o=this.length);const i=getNames(this);const u=[],d=[];for(let n=a;n<o;n++){u.push(this[n]);d.push(i[n])}return new n(Gh,u,d)}filter(a,o){const i=getNames(this);const u=[],d=[];for(let n=0;n<this.length;n++){const m=this[n];m instanceof Error&&throwError(`index ${n}`,m);if(a.call(o,m,n,this)){u.push(m);d.push(i[n])}}return new n(Gh,u,d)}map(n,a){const o=[];for(let i=0;i<this.length;i++){const u=this[i];u instanceof Error&&throwError(`index ${i}`,u);o.push(n.call(a,u,i,this))}return o}getValue(n){const a=getNames(this).indexOf(n);if(-1===a)return;const o=this[a];o instanceof Error&&throwError(`property ${JSON.stringify(n)}`,o.error);return o}static fromItems(a,o){return new n(Gh,a,o)}};Il=new WeakMap;let Zh=Kh;function getValue$1(n){let a=toBeArray(n);assert(a.length<=Uh,"value out-of-bounds","BUFFER_OVERRUN",{buffer:a,length:Uh,offset:a.length});a.length!==Uh&&(a=getBytesCopy(concat([Wh.slice(a.length%Uh),a])));return a}let Yh=class{constructor(n,a,o,i){__publicField$1(this,"name");__publicField$1(this,"type");__publicField$1(this,"localName");__publicField$1(this,"dynamic");defineProperties(this,{name:n,type:a,localName:o,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(n,a){assertArgument(!1,n,this.localName,a)}};let Jh=class{constructor(){__privateAdd(this,Rl);__privateAdd(this,Pl);__privateAdd(this,Ol);__privateSet(this,Pl,[]);__privateSet(this,Ol,0)}get data(){return concat(__privateGet(this,Pl))}get length(){return __privateGet(this,Ol)}appendWriter(n){return __privateMethod(this,Rl,Bl).call(this,getBytesCopy(n.data))}writeBytes(n){let a=getBytesCopy(n);const o=a.length%Uh;o&&(a=getBytesCopy(concat([a,Wh.slice(o)])));return __privateMethod(this,Rl,Bl).call(this,a)}writeValue(n){return __privateMethod(this,Rl,Bl).call(this,getValue$1(n))}writeUpdatableValue(){const n=__privateGet(this,Pl).length;__privateGet(this,Pl).push(Wh);__privateSet(this,Ol,__privateGet(this,Ol)+Uh);return a=>{__privateGet(this,Pl)[n]=getValue$1(a)}}};Pl=new WeakMap;Ol=new WeakMap;Rl=new WeakSet;Bl=function(n){__privateGet(this,Pl).push(n);__privateSet(this,Ol,__privateGet(this,Ol)+n.length);return n.length};const Qh=class n{constructor(n,a,o){__privateAdd(this,$l);__publicField$1(this,"allowLoose");__privateAdd(this,Ml);__privateAdd(this,zl);__privateAdd(this,Fl);__privateAdd(this,Ll);__privateAdd(this,Dl);defineProperties(this,{allowLoose:!!a});__privateSet(this,Ml,getBytesCopy(n));__privateSet(this,Fl,0);__privateSet(this,Ll,null);__privateSet(this,Dl,null!=o?o:1024);__privateSet(this,zl,0)}get data(){return hexlify(__privateGet(this,Ml))}get dataLength(){return __privateGet(this,Ml).length}get consumed(){return __privateGet(this,zl)}get bytes(){return new Uint8Array(__privateGet(this,Ml))}subReader(a){const o=new n(__privateGet(this,Ml).slice(__privateGet(this,zl)+a),this.allowLoose,__privateGet(this,Dl));__privateSet(o,Ll,this);return o}readBytes(n,a){let o=__privateMethod(this,$l,Wl).call(this,0,n,!!a);__privateMethod(this,$l,Ul).call(this,n);__privateSet(this,zl,__privateGet(this,zl)+o.length);return o.slice(0,n)}readValue(){return toBigInt(this.readBytes(Uh))}readIndex(){return toNumber(this.readBytes(Uh))}};Ml=new WeakMap;zl=new WeakMap;Fl=new WeakMap;Ll=new WeakMap;Dl=new WeakMap;$l=new WeakSet;Ul=function(n){var a;if(__privateGet(this,Ll))return __privateMethod(a=__privateGet(this,Ll),$l,Ul).call(a,n);__privateSet(this,Fl,__privateGet(this,Fl)+n);assert(__privateGet(this,Dl)<1||__privateGet(this,Fl)<=__privateGet(this,Dl)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${__privateGet(this,Dl)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:getBytesCopy(__privateGet(this,Ml)),offset:__privateGet(this,zl),length:n,info:{bytesRead:__privateGet(this,Fl),dataLength:this.dataLength}})};Wl=function(n,a,o){let i=Math.ceil(a/Uh)*Uh;__privateGet(this,zl)+i>__privateGet(this,Ml).length&&(this.allowLoose&&o&&__privateGet(this,zl)+a<=__privateGet(this,Ml).length?i=a:assert(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:getBytesCopy(__privateGet(this,Ml)),length:__privateGet(this,Ml).length,offset:__privateGet(this,zl)+i}));return __privateGet(this,Ml).slice(__privateGet(this,zl),__privateGet(this,zl)+i)};let Xh=Qh;function number(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function bytes(n,...a){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(a.length>0&&!a.includes(n.length))throw new Error(`Expected Uint8Array of length ${a}, not of length=${n.length}`)}function hash(n){if("function"!=typeof n||"function"!=typeof n.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");number(n.outputLen);number(n.blockLen)}function exists(n,a=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(a&&n.finished)throw new Error("Hash#digest() has already been called")}function output(n,a){bytes(n);const o=a.outputLen;if(n.length<o)throw new Error(`digestInto() expects output buffer of length at least ${o}`)}const ef="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const u8a$1=n=>n instanceof Uint8Array;const u32=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4));const createView=n=>new DataView(n.buffer,n.byteOffset,n.byteLength);const rotr=(n,a)=>n<<32-a|n>>>a;const tf=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];if(!tf)throw new Error("Non little-endian hardware is not supported");function utf8ToBytes$1(n){if("string"!=typeof n)throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array((new TextEncoder).encode(n))}function toBytes(n){"string"==typeof n&&(n=utf8ToBytes$1(n));if(!u8a$1(n))throw new Error("expected Uint8Array, got "+typeof n);return n}function concatBytes$1(...n){const a=new Uint8Array(n.reduce((n,a)=>n+a.length,0));let o=0;n.forEach(n=>{if(!u8a$1(n))throw new Error("Uint8Array expected");a.set(n,o);o+=n.length});return a}let nf=class{clone(){return this._cloneInto()}};function wrapConstructor(n){const hashC=a=>n().update(toBytes(a)).digest();const a=n();hashC.outputLen=a.outputLen;hashC.blockLen=a.blockLen;hashC.create=()=>n();return hashC}function randomBytes(n=32){if(ef&&"function"==typeof ef.getRandomValues)return ef.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}let rf=class extends nf{constructor(n,a){super();this.finished=!1;this.destroyed=!1;hash(n);const o=toBytes(a);this.iHash=n.create();if("function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen;this.outputLen=this.iHash.outputLen;const i=this.blockLen;const u=new Uint8Array(i);u.set(o.length>i?n.create().update(o).digest():o);for(let d=0;d<u.length;d++)u[d]^=54;this.iHash.update(u);this.oHash=n.create();for(let d=0;d<u.length;d++)u[d]^=106;this.oHash.update(u);u.fill(0)}update(n){exists(this);this.iHash.update(n);return this}digestInto(n){exists(this);bytes(n,this.outputLen);this.finished=!0;this.iHash.digestInto(n);this.oHash.update(n);this.oHash.digestInto(n);this.destroy()}digest(){const n=new Uint8Array(this.oHash.outputLen);this.digestInto(n);return n}_cloneInto(n){n||(n=Object.create(Object.getPrototypeOf(this),{}));const{oHash:a,iHash:o,finished:i,destroyed:u,blockLen:d,outputLen:m}=this;n.finished=i;n.destroyed=u;n.blockLen=d;n.outputLen=m;n.oHash=a._cloneInto(n.oHash);n.iHash=o._cloneInto(n.iHash);return n}destroy(){this.destroyed=!0;this.oHash.destroy();this.iHash.destroy()}};const hmac=(n,a,o)=>new rf(n,a).update(o).digest();hmac.create=(n,a)=>new rf(n,a);function setBigUint64(n,a,o,i){if("function"==typeof n.setBigUint64)return n.setBigUint64(a,o,i);const u=BigInt(32);const d=BigInt(4294967295);const m=Number(o>>u&d);const g=Number(o&d);const y=i?4:0;const v=i?0:4;n.setUint32(a+y,m,i);n.setUint32(a+v,g,i)}let sf=class extends nf{constructor(n,a,o,i){super();this.blockLen=n;this.outputLen=a;this.padOffset=o;this.isLE=i;this.finished=!1;this.length=0;this.pos=0;this.destroyed=!1;this.buffer=new Uint8Array(n);this.view=createView(this.buffer)}update(n){exists(this);const{view:a,buffer:o,blockLen:i}=this;n=toBytes(n);const u=n.length;for(let d=0;d<u;){const m=Math.min(i-this.pos,u-d);if(m===i){const a=createView(n);for(;i<=u-d;d+=i)this.process(a,d);continue}o.set(n.subarray(d,d+m),this.pos);this.pos+=m;d+=m;if(this.pos===i){this.process(a,0);this.pos=0}}this.length+=n.length;this.roundClean();return this}digestInto(n){exists(this);output(n,this);this.finished=!0;const{buffer:a,view:o,blockLen:i,isLE:u}=this;let{pos:d}=this;a[d++]=128;this.buffer.subarray(d).fill(0);if(this.padOffset>i-d){this.process(o,0);d=0}for(let x=d;x<i;x++)a[x]=0;setBigUint64(o,i-8,BigInt(8*this.length),u);this.process(o,0);const m=createView(n);const g=this.outputLen;if(g%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const y=g/4;const v=this.get();if(y>v.length)throw new Error("_sha2: outputLen bigger than state");for(let x=0;x<y;x++)m.setUint32(4*x,v[x],u)}digest(){const{buffer:n,outputLen:a}=this;this.digestInto(n);const o=n.slice(0,a);this.destroy();return o}_cloneInto(n){n||(n=new this.constructor);n.set(...this.get());const{blockLen:a,buffer:o,length:i,finished:u,destroyed:d,pos:m}=this;n.length=i;n.pos=m;n.finished=u;n.destroyed=d;i%a&&n.buffer.set(o);return n}};const Chi=(n,a,o)=>n&a^~n&o;const Maj=(n,a,o)=>n&a^n&o^a&o;const af=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);const of=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);const cf=new Uint32Array(64);let lf=class extends sf{constructor(){super(64,32,8,!1);this.A=0|of[0];this.B=0|of[1];this.C=0|of[2];this.D=0|of[3];this.E=0|of[4];this.F=0|of[5];this.G=0|of[6];this.H=0|of[7]}get(){const{A:n,B:a,C:o,D:i,E:u,F:d,G:m,H:g}=this;return[n,a,o,i,u,d,m,g]}set(n,a,o,i,u,d,m,g){this.A=0|n;this.B=0|a;this.C=0|o;this.D=0|i;this.E=0|u;this.F=0|d;this.G=0|m;this.H=0|g}process(n,a){for(let x=0;x<16;x++,a+=4)cf[x]=n.getUint32(a,!1);for(let x=16;x<64;x++){const n=cf[x-15];const a=cf[x-2];const o=rotr(n,7)^rotr(n,18)^n>>>3;const i=rotr(a,17)^rotr(a,19)^a>>>10;cf[x]=i+cf[x-7]+o+cf[x-16]|0}let{A:o,B:i,C:u,D:d,E:m,F:g,G:y,H:v}=this;for(let x=0;x<64;x++){const n=rotr(m,6)^rotr(m,11)^rotr(m,25);const a=v+n+Chi(m,g,y)+af[x]+cf[x]|0;const N=rotr(o,2)^rotr(o,13)^rotr(o,22);const k=N+Maj(o,i,u)|0;v=y;y=g;g=m;m=d+a|0;d=u;u=i;i=o;o=a+k|0}o=o+this.A|0;i=i+this.B|0;u=u+this.C|0;d=d+this.D|0;m=m+this.E|0;g=g+this.F|0;y=y+this.G|0;v=v+this.H|0;this.set(o,i,u,d,m,g,y,v)}roundClean(){cf.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0);this.buffer.fill(0)}};const uf=wrapConstructor(()=>new lf);const df=BigInt(2**32-1);const hf=BigInt(32);function fromBig(n,a=!1){return a?{h:Number(n&df),l:Number(n>>hf&df)}:{h:0|Number(n>>hf&df),l:0|Number(n&df)}}function split$1(n,a=!1){let o=new Uint32Array(n.length);let i=new Uint32Array(n.length);for(let u=0;u<n.length;u++){const{h:d,l:m}=fromBig(n[u],a);[o[u],i[u]]=[d,m]}return[o,i]}const toBig=(n,a)=>BigInt(n>>>0)<<hf|BigInt(a>>>0);const shrSH=(n,a,o)=>n>>>o;const shrSL=(n,a,o)=>n<<32-o|a>>>o;const rotrSH=(n,a,o)=>n>>>o|a<<32-o;const rotrSL=(n,a,o)=>n<<32-o|a>>>o;const rotrBH=(n,a,o)=>n<<64-o|a>>>o-32;const rotrBL=(n,a,o)=>n>>>o-32|a<<64-o;const rotr32H=(n,a)=>a;const rotr32L=(n,a)=>n;const rotlSH=(n,a,o)=>n<<o|a>>>32-o;const rotlSL=(n,a,o)=>a<<o|n>>>32-o;const rotlBH=(n,a,o)=>a<<o-32|n>>>64-o;const rotlBL=(n,a,o)=>n<<o-32|a>>>64-o;function add(n,a,o,i){const u=(a>>>0)+(i>>>0);return{h:n+o+(u/2**32|0)|0,l:0|u}}const add3L=(n,a,o)=>(n>>>0)+(a>>>0)+(o>>>0);const add3H=(n,a,o,i)=>a+o+i+(n/2**32|0)|0;const add4L=(n,a,o,i)=>(n>>>0)+(a>>>0)+(o>>>0)+(i>>>0);const add4H=(n,a,o,i,u)=>a+o+i+u+(n/2**32|0)|0;const add5L=(n,a,o,i,u)=>(n>>>0)+(a>>>0)+(o>>>0)+(i>>>0)+(u>>>0);const add5H=(n,a,o,i,u,d)=>a+o+i+u+d+(n/2**32|0)|0;const ff={fromBig:fromBig,split:split$1,toBig:toBig,shrSH:shrSH,shrSL:shrSL,rotrSH:rotrSH,rotrSL:rotrSL,rotrBH:rotrBH,rotrBL:rotrBL,rotr32H:rotr32H,rotr32L:rotr32L,rotlSH:rotlSH,rotlSL:rotlSL,rotlBH:rotlBH,rotlBL:rotlBL,add:add,add3L:add3L,add3H:add3H,add4L:add4L,add4H:add4H,add5H:add5H,add5L:add5L};const[pf,mf]=(()=>ff.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))))();const gf=new Uint32Array(80);const yf=new Uint32Array(80);let bf=class extends sf{constructor(){super(128,64,16,!1);this.Ah=1779033703;this.Al=-205731576;this.Bh=-1150833019;this.Bl=-2067093701;this.Ch=1013904242;this.Cl=-23791573;this.Dh=-1521486534;this.Dl=1595750129;this.Eh=1359893119;this.El=-1377402159;this.Fh=-1694144372;this.Fl=725511199;this.Gh=528734635;this.Gl=-79577749;this.Hh=1541459225;this.Hl=327033209}get(){const{Ah:n,Al:a,Bh:o,Bl:i,Ch:u,Cl:d,Dh:m,Dl:g,Eh:y,El:v,Fh:x,Fl:N,Gh:k,Gl:E,Hh:S,Hl:A}=this;return[n,a,o,i,u,d,m,g,y,v,x,N,k,E,S,A]}set(n,a,o,i,u,d,m,g,y,v,x,N,k,E,S,A){this.Ah=0|n;this.Al=0|a;this.Bh=0|o;this.Bl=0|i;this.Ch=0|u;this.Cl=0|d;this.Dh=0|m;this.Dl=0|g;this.Eh=0|y;this.El=0|v;this.Fh=0|x;this.Fl=0|N;this.Gh=0|k;this.Gl=0|E;this.Hh=0|S;this.Hl=0|A}process(n,a){for(let I=0;I<16;I++,a+=4){gf[I]=n.getUint32(a);yf[I]=n.getUint32(a+=4)}for(let I=16;I<80;I++){const n=0|gf[I-15];const a=0|yf[I-15];const o=ff.rotrSH(n,a,1)^ff.rotrSH(n,a,8)^ff.shrSH(n,a,7);const i=ff.rotrSL(n,a,1)^ff.rotrSL(n,a,8)^ff.shrSL(n,a,7);const u=0|gf[I-2];const d=0|yf[I-2];const m=ff.rotrSH(u,d,19)^ff.rotrBH(u,d,61)^ff.shrSH(u,d,6);const g=ff.rotrSL(u,d,19)^ff.rotrBL(u,d,61)^ff.shrSL(u,d,6);const y=ff.add4L(i,g,yf[I-7],yf[I-16]);const v=ff.add4H(y,o,m,gf[I-7],gf[I-16]);gf[I]=0|v;yf[I]=0|y}let{Ah:o,Al:i,Bh:u,Bl:d,Ch:m,Cl:g,Dh:y,Dl:v,Eh:x,El:N,Fh:k,Fl:E,Gh:S,Gl:A,Hh:_,Hl:j}=this;for(let I=0;I<80;I++){const n=ff.rotrSH(x,N,14)^ff.rotrSH(x,N,18)^ff.rotrBH(x,N,41);const a=ff.rotrSL(x,N,14)^ff.rotrSL(x,N,18)^ff.rotrBL(x,N,41);const O=x&k^~x&S;const R=N&E^~N&A;const B=ff.add5L(j,a,R,mf[I],yf[I]);const M=ff.add5H(B,_,n,O,pf[I],gf[I]);const z=0|B;const L=ff.rotrSH(o,i,28)^ff.rotrBH(o,i,34)^ff.rotrBH(o,i,39);const D=ff.rotrSL(o,i,28)^ff.rotrBL(o,i,34)^ff.rotrBL(o,i,39);const W=o&u^o&m^u&m;const H=i&d^i&g^d&g;_=0|S;j=0|A;S=0|k;A=0|E;k=0|x;E=0|N;({h:x,l:N}=ff.add(0|y,0|v,0|M,0|z));y=0|m;v=0|g;m=0|u;g=0|d;u=0|o;d=0|i;const q=ff.add3L(z,D,H);o=ff.add3H(q,M,L,W);i=0|q}({h:o,l:i}=ff.add(0|this.Ah,0|this.Al,0|o,0|i));({h:u,l:d}=ff.add(0|this.Bh,0|this.Bl,0|u,0|d));({h:m,l:g}=ff.add(0|this.Ch,0|this.Cl,0|m,0|g));({h:y,l:v}=ff.add(0|this.Dh,0|this.Dl,0|y,0|v));({h:x,l:N}=ff.add(0|this.Eh,0|this.El,0|x,0|N));({h:k,l:E}=ff.add(0|this.Fh,0|this.Fl,0|k,0|E));({h:S,l:A}=ff.add(0|this.Gh,0|this.Gl,0|S,0|A));({h:_,l:j}=ff.add(0|this.Hh,0|this.Hl,0|_,0|j));this.set(o,i,u,d,m,g,y,v,x,N,k,E,S,A,_,j)}roundClean(){gf.fill(0);yf.fill(0)}destroy(){this.buffer.fill(0);this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const vf=wrapConstructor(()=>new bf);function getGlobal(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof globalThis)return globalThis;throw new Error("unable to locate global object")}const wf=getGlobal();wf.crypto||wf.msCrypto;function createHash(n){switch(n){case"sha256":return uf.create();case"sha512":return vf.create()}assertArgument(!1,"invalid hashing algorithm name","algorithm",n)}const[xf,Nf,kf]=[[],[],[]];const Cf=BigInt(0);const Ef=BigInt(1);const Sf=BigInt(2);const Af=BigInt(7);const _f=BigInt(256);const Tf=BigInt(113);for(let sL=0,aL=Ef,oL=1,iL=0;sL<24;sL++){[oL,iL]=[iL,(2*oL+3*iL)%5];xf.push(2*(5*iL+oL));Nf.push((sL+1)*(sL+2)/2%64);let n=Cf;for(let a=0;a<7;a++){aL=(aL<<Ef^(aL>>Af)*Tf)%_f;aL&Sf&&(n^=Ef<<(Ef<<BigInt(a))-Ef)}kf.push(n)}const[jf,If]=split$1(kf,!0);const rotlH=(n,a,o)=>o>32?rotlBH(n,a,o):rotlSH(n,a,o);const rotlL=(n,a,o)=>o>32?rotlBL(n,a,o):rotlSL(n,a,o);function keccakP(n,a=24){const o=new Uint32Array(10);for(let i=24-a;i<24;i++){for(let i=0;i<10;i++)o[i]=n[i]^n[i+10]^n[i+20]^n[i+30]^n[i+40];for(let i=0;i<10;i+=2){const a=(i+8)%10;const u=(i+2)%10;const d=o[u];const m=o[u+1];const g=rotlH(d,m,1)^o[a];const y=rotlL(d,m,1)^o[a+1];for(let o=0;o<50;o+=10){n[i+o]^=g;n[i+o+1]^=y}}let a=n[2];let u=n[3];for(let o=0;o<24;o++){const i=Nf[o];const d=rotlH(a,u,i);const m=rotlL(a,u,i);const g=xf[o];a=n[g];u=n[g+1];n[g]=d;n[g+1]=m}for(let i=0;i<50;i+=10){for(let a=0;a<10;a++)o[a]=n[i+a];for(let a=0;a<10;a++)n[i+a]^=~o[(a+2)%10]&o[(a+4)%10]}n[0]^=jf[i];n[1]^=If[i]}o.fill(0)}let Pf=class n extends nf{constructor(n,a,o,i=!1,u=24){super();this.blockLen=n;this.suffix=a;this.outputLen=o;this.enableXOF=i;this.rounds=u;this.pos=0;this.posOut=0;this.finished=!1;this.destroyed=!1;number(o);if(0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200);this.state32=u32(this.state)}keccak(){keccakP(this.state32,this.rounds);this.posOut=0;this.pos=0}update(n){exists(this);const{blockLen:a,state:o}=this;n=toBytes(n);const i=n.length;for(let u=0;u<i;){const d=Math.min(a-this.pos,i-u);for(let a=0;a<d;a++)o[this.pos++]^=n[u++];this.pos===a&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:n,suffix:a,pos:o,blockLen:i}=this;n[o]^=a;128&a&&o===i-1&&this.keccak();n[i-1]^=128;this.keccak()}writeInto(n){exists(this,!1);bytes(n);this.finish();const a=this.state;const{blockLen:o}=this;for(let i=0,u=n.length;i<u;){this.posOut>=o&&this.keccak();const d=Math.min(o-this.posOut,u-i);n.set(a.subarray(this.posOut,this.posOut+d),i);this.posOut+=d;i+=d}return n}xofInto(n){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(n)}xof(n){number(n);return this.xofInto(new Uint8Array(n))}digestInto(n){output(n,this);if(this.finished)throw new Error("digest() was already called");this.writeInto(n);this.destroy();return n}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0;this.state.fill(0)}_cloneInto(a){const{blockLen:o,suffix:i,outputLen:u,rounds:d,enableXOF:m}=this;a||(a=new n(o,i,u,m,d));a.state32.set(this.state32);a.pos=this.pos;a.posOut=this.posOut;a.finished=this.finished;a.rounds=d;a.suffix=i;a.outputLen=u;a.enableXOF=m;a.destroyed=this.destroyed;return a}};const gen=(n,a,o)=>wrapConstructor(()=>new Pf(a,n,o));const Of=gen(1,136,32);let Rf=!1;const _keccak256=function(n){return Of(n)};let Bf=_keccak256;function keccak256(n){const a=getBytes(n,"data");return hexlify(Bf(a))}keccak256._=_keccak256;keccak256.lock=function(){Rf=!0};keccak256.register=function(n){if(Rf)throw new TypeError("keccak256 is locked");Bf=n};Object.freeze(keccak256);const _sha256=function(n){return createHash("sha256").update(n).digest()};let Mf=_sha256;let zf=!1;function sha256(n){const a=getBytes(n,"data");return hexlify(Mf(a))}sha256._=_sha256;sha256.lock=function(){zf=!0};sha256.register=function(n){if(zf)throw new Error("sha256 is locked");Mf=n};Object.freeze(sha256);Object.freeze(sha256);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ff=BigInt(0);const Lf=BigInt(1);const Df=BigInt(2);const u8a=n=>n instanceof Uint8Array;const $f=Array.from({length:256},(n,a)=>a.toString(16).padStart(2,"0"));function bytesToHex(n){if(!u8a(n))throw new Error("Uint8Array expected");let a="";for(let o=0;o<n.length;o++)a+=$f[n[o]];return a}function numberToHexUnpadded(n){const a=n.toString(16);return 1&a.length?`0${a}`:a}function hexToNumber(n){if("string"!=typeof n)throw new Error("hex string expected, got "+typeof n);return BigInt(""===n?"0":`0x${n}`)}function hexToBytes(n){if("string"!=typeof n)throw new Error("hex string expected, got "+typeof n);const a=n.length;if(a%2)throw new Error("padded hex string expected, got unpadded hex of length "+a);const o=new Uint8Array(a/2);for(let i=0;i<o.length;i++){const a=2*i;const u=n.slice(a,a+2);const d=Number.parseInt(u,16);if(Number.isNaN(d)||d<0)throw new Error("Invalid byte sequence");o[i]=d}return o}function bytesToNumberBE(n){return hexToNumber(bytesToHex(n))}function bytesToNumberLE(n){if(!u8a(n))throw new Error("Uint8Array expected");return hexToNumber(bytesToHex(Uint8Array.from(n).reverse()))}function numberToBytesBE(n,a){return hexToBytes(n.toString(16).padStart(2*a,"0"))}function numberToBytesLE(n,a){return numberToBytesBE(n,a).reverse()}function numberToVarBytesBE(n){return hexToBytes(numberToHexUnpadded(n))}function ensureBytes(n,a,o){let i;if("string"==typeof a)try{i=hexToBytes(a)}catch(d){throw new Error(`${n} must be valid hex string, got "${a}". Cause: ${d}`)}else{if(!u8a(a))throw new Error(`${n} must be hex string or Uint8Array`);i=Uint8Array.from(a)}const u=i.length;if("number"==typeof o&&u!==o)throw new Error(`${n} expected ${o} bytes, got ${u}`);return i}function concatBytes(...n){const a=new Uint8Array(n.reduce((n,a)=>n+a.length,0));let o=0;n.forEach(n=>{if(!u8a(n))throw new Error("Uint8Array expected");a.set(n,o);o+=n.length});return a}function equalBytes(n,a){if(n.length!==a.length)return!1;for(let o=0;o<n.length;o++)if(n[o]!==a[o])return!1;return!0}function utf8ToBytes(n){if("string"!=typeof n)throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array((new TextEncoder).encode(n))}function bitLen(n){let a;for(a=0;n>Ff;n>>=Lf,a+=1);return a}function bitGet(n,a){return n>>BigInt(a)&Lf}const bitSet=(n,a,o)=>n|(o?Lf:Ff)<<BigInt(a);const bitMask=n=>(Df<<BigInt(n-1))-Lf;const u8n=n=>new Uint8Array(n);const u8fr=n=>Uint8Array.from(n);function createHmacDrbg(n,a,o){if("number"!=typeof n||n<2)throw new Error("hashLen must be a number");if("number"!=typeof a||a<2)throw new Error("qByteLen must be a number");if("function"!=typeof o)throw new Error("hmacFn must be a function");let i=u8n(n);let u=u8n(n);let d=0;const reset=()=>{i.fill(1);u.fill(0);d=0};const h2=(...n)=>o(u,i,...n);const reseed=(n=u8n())=>{u=h2(u8fr([0]),n);i=h2();if(0!==n.length){u=h2(u8fr([1]),n);i=h2()}};const gen2=()=>{if(d++>=1e3)throw new Error("drbg: tried 1000 values");let n=0;const o=[];for(;n<a;){i=h2();const a=i.slice();o.push(a);n+=i.length}return concatBytes(...o)};const genUntil=(n,a)=>{reset();reseed(n);let o;for(;!(o=a(gen2()));)reseed();reset();return o};return genUntil}const Uf={bigint:n=>"bigint"==typeof n,function:n=>"function"==typeof n,boolean:n=>"boolean"==typeof n,string:n=>"string"==typeof n,stringOrUint8Array:n=>"string"==typeof n||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,a)=>a.Fp.isValid(n),hash:n=>"function"==typeof n&&Number.isSafeInteger(n.outputLen)};function validateObject(n,a,o={}){const checkField=(a,o,i)=>{const u=Uf[o];if("function"!=typeof u)throw new Error(`Invalid validator "${o}", expected function`);const d=n[a];if(!(i&&void 0===d||u(d,n)))throw new Error(`Invalid param ${String(a)}=${d} (${typeof d}), expected ${o}`)};for(const[i,u]of Object.entries(a))checkField(i,u,!1);for(const[i,u]of Object.entries(o))checkField(i,u,!0);return n}const Wf=Object.freeze(Object.defineProperty({__proto__:null,bitGet:bitGet,bitLen:bitLen,bitMask:bitMask,bitSet:bitSet,bytesToHex:bytesToHex,bytesToNumberBE:bytesToNumberBE,bytesToNumberLE:bytesToNumberLE,concatBytes:concatBytes,createHmacDrbg:createHmacDrbg,ensureBytes:ensureBytes,equalBytes:equalBytes,hexToBytes:hexToBytes,hexToNumber:hexToNumber,numberToBytesBE:numberToBytesBE,numberToBytesLE:numberToBytesLE,numberToHexUnpadded:numberToHexUnpadded,numberToVarBytesBE:numberToVarBytesBE,utf8ToBytes:utf8ToBytes,validateObject:validateObject},Symbol.toStringTag,{value:"Module"}));
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hf=BigInt(0),qf=BigInt(1),Gf=BigInt(2),Vf=BigInt(3);const Kf=BigInt(4),Zf=BigInt(5),Yf=BigInt(8);BigInt(9);BigInt(16);function mod(n,a){const o=n%a;return o>=Hf?o:a+o}function pow(n,a,o){if(o<=Hf||a<Hf)throw new Error("Expected power/modulo > 0");if(o===qf)return Hf;let i=qf;for(;a>Hf;){a&qf&&(i=i*n%o);n=n*n%o;a>>=qf}return i}function pow2(n,a,o){let i=n;for(;a-- >Hf;){i*=i;i%=o}return i}function invert(n,a){if(n===Hf||a<=Hf)throw new Error(`invert: expected positive integers, got n=${n} mod=${a}`);let o=mod(n,a);let i=a;let u=Hf,d=qf;for(;o!==Hf;){const n=i/o;const a=i%o;const m=u-d*n;i=o,o=a,u=d,d=m}const m=i;if(m!==qf)throw new Error("invert: does not exist");return mod(u,a)}function tonelliShanks(n){const a=(n-qf)/Gf;let o,i,u;for(o=n-qf,i=0;o%Gf===Hf;o/=Gf,i++);for(u=Gf;u<n&&pow(u,a,n)!==n-qf;u++);if(1===i){const a=(n+qf)/Kf;return function(n,o){const i=n.pow(o,a);if(!n.eql(n.sqr(i),o))throw new Error("Cannot find square root");return i}}const d=(o+qf)/Gf;return function(n,m){if(n.pow(m,a)===n.neg(n.ONE))throw new Error("Cannot find square root");let g=i;let y=n.pow(n.mul(n.ONE,u),o);let v=n.pow(m,d);let x=n.pow(m,o);for(;!n.eql(x,n.ONE);){if(n.eql(x,n.ZERO))return n.ZERO;let a=1;for(let i=n.sqr(x);a<g&&!n.eql(i,n.ONE);a++)i=n.sqr(i);const o=n.pow(y,qf<<BigInt(g-a-1));y=n.sqr(o);v=n.mul(v,o);x=n.mul(x,y);g=a}return v}}function FpSqrt(n){if(n%Kf===Vf){const a=(n+qf)/Kf;return function(n,o){const i=n.pow(o,a);if(!n.eql(n.sqr(i),o))throw new Error("Cannot find square root");return i}}if(n%Yf===Zf){const a=(n-Zf)/Yf;return function(n,o){const i=n.mul(o,Gf);const u=n.pow(i,a);const d=n.mul(o,u);const m=n.mul(n.mul(d,Gf),u);const g=n.mul(d,n.sub(m,n.ONE));if(!n.eql(n.sqr(g),o))throw new Error("Cannot find square root");return g}}return tonelliShanks(n)}const Jf=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField(n){const a={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"};const o=Jf.reduce((n,a)=>{n[a]="function";return n},a);return validateObject(n,o)}function FpPow(n,a,o){if(o<Hf)throw new Error("Expected power > 0");if(o===Hf)return n.ONE;if(o===qf)return a;let i=n.ONE;let u=a;for(;o>Hf;){o&qf&&(i=n.mul(i,u));u=n.sqr(u);o>>=qf}return i}function FpInvertBatch(n,a){const o=new Array(a.length);const i=a.reduce((a,i,u)=>{if(n.is0(i))return a;o[u]=a;return n.mul(a,i)},n.ONE);const u=n.inv(i);a.reduceRight((a,i,u)=>{if(n.is0(i))return a;o[u]=n.mul(a,o[u]);return n.mul(a,i)},u);return o}function nLength(n,a){const o=void 0!==a?a:n.toString(2).length;const i=Math.ceil(o/8);return{nBitLength:o,nByteLength:i}}function Field(n,a,o=!1,i={}){if(n<=Hf)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:u,nByteLength:d}=nLength(n,a);if(d>2048)throw new Error("Field lengths over 2048 bytes are not supported");const m=FpSqrt(n);const g=Object.freeze({ORDER:n,BITS:u,BYTES:d,MASK:bitMask(u),ZERO:Hf,ONE:qf,create:a=>mod(a,n),isValid:a=>{if("bigint"!=typeof a)throw new Error("Invalid field element: expected bigint, got "+typeof a);return Hf<=a&&a<n},is0:n=>n===Hf,isOdd:n=>(n&qf)===qf,neg:a=>mod(-a,n),eql:(n,a)=>n===a,sqr:a=>mod(a*a,n),add:(a,o)=>mod(a+o,n),sub:(a,o)=>mod(a-o,n),mul:(a,o)=>mod(a*o,n),pow:(n,a)=>FpPow(g,n,a),div:(a,o)=>mod(a*invert(o,n),n),sqrN:n=>n*n,addN:(n,a)=>n+a,subN:(n,a)=>n-a,mulN:(n,a)=>n*a,inv:a=>invert(a,n),sqrt:i.sqrt||(n=>m(g,n)),invertBatch:n=>FpInvertBatch(g,n),cmov:(n,a,o)=>o?a:n,toBytes:n=>o?numberToBytesLE(n,d):numberToBytesBE(n,d),fromBytes:n=>{if(n.length!==d)throw new Error(`Fp.fromBytes: expected ${d}, got ${n.length}`);return o?bytesToNumberLE(n):bytesToNumberBE(n)}});return Object.freeze(g)}function getFieldBytesLength(n){if("bigint"!=typeof n)throw new Error("field order must be bigint");const a=n.toString(2).length;return Math.ceil(a/8)}function getMinHashLength(n){const a=getFieldBytesLength(n);return a+Math.ceil(a/2)}function mapHashToField(n,a,o=!1){const i=n.length;const u=getFieldBytesLength(a);const d=getMinHashLength(a);if(i<16||i<d||i>1024)throw new Error(`expected ${d}-1024 bytes of input, got ${i}`);const m=o?bytesToNumberBE(n):bytesToNumberLE(n);const g=mod(m,a-qf)+qf;return o?numberToBytesLE(g,u):numberToBytesBE(g,u)}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qf=BigInt(0);const Xf=BigInt(1);function wNAF(n,a){const constTimeNegate=(n,a)=>{const o=a.negate();return n?o:a};const opts=n=>{const o=Math.ceil(a/n)+1;const i=2**(n-1);return{windows:o,windowSize:i}};return{constTimeNegate:constTimeNegate,unsafeLadder(a,o){let i=n.ZERO;let u=a;for(;o>Qf;){o&Xf&&(i=i.add(u));u=u.double();o>>=Xf}return i},precomputeWindow(n,a){const{windows:o,windowSize:i}=opts(a);const u=[];let d=n;let m=d;for(let g=0;g<o;g++){m=d;u.push(m);for(let n=1;n<i;n++){m=m.add(d);u.push(m)}d=m.double()}return u},wNAF(a,o,i){const{windows:u,windowSize:d}=opts(a);let m=n.ZERO;let g=n.BASE;const y=BigInt(2**a-1);const v=2**a;const x=BigInt(a);for(let n=0;n<u;n++){const a=n*d;let u=Number(i&y);i>>=x;if(u>d){u-=v;i+=Xf}const N=a;const k=a+Math.abs(u)-1;const E=n%2!=0;const S=u<0;0===u?g=g.add(constTimeNegate(E,o[N])):m=m.add(constTimeNegate(S,o[k]))}return{p:m,f:g}},wNAFCached(n,a,o,i){const u=n._WINDOW_SIZE||1;let d=a.get(n);if(!d){d=this.precomputeWindow(n,u);1!==u&&a.set(n,i(d))}return this.wNAF(u,d,o)}}}function validateBasic(n){validateField(n.Fp);validateObject(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"});return Object.freeze({...nLength(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function validatePointOpts(n){const a=validateBasic(n);validateObject(a,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:o,Fp:i,a:u}=a;if(o){if(!i.eql(u,i.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof o||"bigint"!=typeof o.beta||"function"!=typeof o.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...a})}const{bytesToNumberBE:ep,hexToBytes:tp}=Wf;const np={Err:class extends Error{constructor(n=""){super(n)}},_parseInt(n){const{Err:a}=np;if(n.length<2||2!==n[0])throw new a("Invalid signature integer tag");const o=n[1];const i=n.subarray(2,o+2);if(!o||i.length!==o)throw new a("Invalid signature integer: wrong length");if(128&i[0])throw new a("Invalid signature integer: negative");if(0===i[0]&&!(128&i[1]))throw new a("Invalid signature integer: unnecessary leading zero");return{d:ep(i),l:n.subarray(o+2)}},toSig(n){const{Err:a}=np;const o="string"==typeof n?tp(n):n;if(!(o instanceof Uint8Array))throw new Error("ui8a expected");let i=o.length;if(i<2||48!=o[0])throw new a("Invalid signature tag");if(o[1]!==i-2)throw new a("Invalid signature: incorrect length");const{d:u,l:d}=np._parseInt(o.subarray(2));const{d:m,l:g}=np._parseInt(d);if(g.length)throw new a("Invalid signature: left bytes after parsing");return{r:u,s:m}},hexFromSig(n){const slice2=n=>8&Number.parseInt(n[0],16)?"00"+n:n;const h2=n=>{const a=n.toString(16);return 1&a.length?`0${a}`:a};const a=slice2(h2(n.s));const o=slice2(h2(n.r));const i=a.length/2;const u=o.length/2;const d=h2(i);const m=h2(u);return`30${h2(u+i+4)}02${m}${o}02${d}${a}`}};const rp=BigInt(0),sp=BigInt(1);BigInt(2);const ap=BigInt(3);BigInt(4);function weierstrassPoints(n){const a=validatePointOpts(n);const{Fp:o}=a;const i=a.toBytes||((n,a,i)=>{const u=a.toAffine();return concatBytes(Uint8Array.from([4]),o.toBytes(u.x),o.toBytes(u.y))});const u=a.fromBytes||(n=>{const a=n.subarray(1);const i=o.fromBytes(a.subarray(0,o.BYTES));const u=o.fromBytes(a.subarray(o.BYTES,2*o.BYTES));return{x:i,y:u}});function weierstrassEquation(n){const{a:i,b:u}=a;const d=o.sqr(n);const m=o.mul(d,n);return o.add(o.add(m,o.mul(n,i)),u)}if(!o.eql(o.sqr(a.Gy),weierstrassEquation(a.Gx)))throw new Error("bad generator point: equation left != right");function isWithinCurveOrder(n){return"bigint"==typeof n&&rp<n&&n<a.n}function assertGE(n){if(!isWithinCurveOrder(n))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function normPrivateKeyToScalar(n){const{allowedPrivateKeyLengths:o,nByteLength:i,wrapPrivateKey:u,n:d}=a;if(o&&"bigint"!=typeof n){n instanceof Uint8Array&&(n=bytesToHex(n));if("string"!=typeof n||!o.includes(n.length))throw new Error("Invalid key");n=n.padStart(2*i,"0")}let m;try{m="bigint"==typeof n?n:bytesToNumberBE(ensureBytes("private key",n,i))}catch(g){throw new Error(`private key must be ${i} bytes, hex or bigint, not ${typeof n}`)}u&&(m=mod(m,d));assertGE(m);return m}const d=new Map;function assertPrjPoint(n){if(!(n instanceof m))throw new Error("ProjectivePoint expected")}class m{constructor(n,a,i){this.px=n;this.py=a;this.pz=i;if(null==n||!o.isValid(n))throw new Error("x required");if(null==a||!o.isValid(a))throw new Error("y required");if(null==i||!o.isValid(i))throw new Error("z required")}static fromAffine(n){const{x:a,y:i}=n||{};if(!n||!o.isValid(a)||!o.isValid(i))throw new Error("invalid affine point");if(n instanceof m)throw new Error("projective point not allowed");const is0=n=>o.eql(n,o.ZERO);return is0(a)&&is0(i)?m.ZERO:new m(a,i,o.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(n){const a=o.invertBatch(n.map(n=>n.pz));return n.map((n,o)=>n.toAffine(a[o])).map(m.fromAffine)}static fromHex(n){const a=m.fromAffine(u(ensureBytes("pointHex",n)));a.assertValidity();return a}static fromPrivateKey(n){return m.BASE.multiply(normPrivateKeyToScalar(n))}_setWindowSize(n){this._WINDOW_SIZE=n;d.delete(this)}assertValidity(){if(this.is0()){if(a.allowInfinityPoint&&!o.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:n,y:i}=this.toAffine();if(!o.isValid(n)||!o.isValid(i))throw new Error("bad point: x or y not FE");const u=o.sqr(i);const d=weierstrassEquation(n);if(!o.eql(u,d))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:n}=this.toAffine();if(o.isOdd)return!o.isOdd(n);throw new Error("Field doesn't support isOdd")}equals(n){assertPrjPoint(n);const{px:a,py:i,pz:u}=this;const{px:d,py:m,pz:g}=n;const y=o.eql(o.mul(a,g),o.mul(d,u));const v=o.eql(o.mul(i,g),o.mul(m,u));return y&&v}negate(){return new m(this.px,o.neg(this.py),this.pz)}double(){const{a:n,b:i}=a;const u=o.mul(i,ap);const{px:d,py:g,pz:y}=this;let v=o.ZERO,x=o.ZERO,N=o.ZERO;let k=o.mul(d,d);let E=o.mul(g,g);let S=o.mul(y,y);let A=o.mul(d,g);A=o.add(A,A);N=o.mul(d,y);N=o.add(N,N);v=o.mul(n,N);x=o.mul(u,S);x=o.add(v,x);v=o.sub(E,x);x=o.add(E,x);x=o.mul(v,x);v=o.mul(A,v);N=o.mul(u,N);S=o.mul(n,S);A=o.sub(k,S);A=o.mul(n,A);A=o.add(A,N);N=o.add(k,k);k=o.add(N,k);k=o.add(k,S);k=o.mul(k,A);x=o.add(x,k);S=o.mul(g,y);S=o.add(S,S);k=o.mul(S,A);v=o.sub(v,k);N=o.mul(S,E);N=o.add(N,N);N=o.add(N,N);return new m(v,x,N)}add(n){assertPrjPoint(n);const{px:i,py:u,pz:d}=this;const{px:g,py:y,pz:v}=n;let x=o.ZERO,N=o.ZERO,k=o.ZERO;const E=a.a;const S=o.mul(a.b,ap);let A=o.mul(i,g);let _=o.mul(u,y);let j=o.mul(d,v);let I=o.add(i,u);let O=o.add(g,y);I=o.mul(I,O);O=o.add(A,_);I=o.sub(I,O);O=o.add(i,d);let R=o.add(g,v);O=o.mul(O,R);R=o.add(A,j);O=o.sub(O,R);R=o.add(u,d);x=o.add(y,v);R=o.mul(R,x);x=o.add(_,j);R=o.sub(R,x);k=o.mul(E,O);x=o.mul(S,j);k=o.add(x,k);x=o.sub(_,k);k=o.add(_,k);N=o.mul(x,k);_=o.add(A,A);_=o.add(_,A);j=o.mul(E,j);O=o.mul(S,O);_=o.add(_,j);j=o.sub(A,j);j=o.mul(E,j);O=o.add(O,j);A=o.mul(_,O);N=o.add(N,A);A=o.mul(R,O);x=o.mul(I,x);x=o.sub(x,A);A=o.mul(I,_);k=o.mul(R,k);k=o.add(k,A);return new m(x,N,k)}subtract(n){return this.add(n.negate())}is0(){return this.equals(m.ZERO)}wNAF(n){return y.wNAFCached(this,d,n,n=>{const a=o.invertBatch(n.map(n=>n.pz));return n.map((n,o)=>n.toAffine(a[o])).map(m.fromAffine)})}multiplyUnsafe(n){const i=m.ZERO;if(n===rp)return i;assertGE(n);if(n===sp)return this;const{endo:u}=a;if(!u)return y.unsafeLadder(this,n);let{k1neg:d,k1:g,k2neg:v,k2:x}=u.splitScalar(n);let N=i;let k=i;let E=this;for(;g>rp||x>rp;){g&sp&&(N=N.add(E));x&sp&&(k=k.add(E));E=E.double();g>>=sp;x>>=sp}d&&(N=N.negate());v&&(k=k.negate());k=new m(o.mul(k.px,u.beta),k.py,k.pz);return N.add(k)}multiply(n){assertGE(n);let i=n;let u,d;const{endo:g}=a;if(g){const{k1neg:n,k1:a,k2neg:v,k2:x}=g.splitScalar(i);let{p:N,f:k}=this.wNAF(a);let{p:E,f:S}=this.wNAF(x);N=y.constTimeNegate(n,N);E=y.constTimeNegate(v,E);E=new m(o.mul(E.px,g.beta),E.py,E.pz);u=N.add(E);d=k.add(S)}else{const{p:n,f:a}=this.wNAF(i);u=n;d=a}return m.normalizeZ([u,d])[0]}multiplyAndAddUnsafe(n,a,o){const i=m.BASE;const mul=(n,a)=>a!==rp&&a!==sp&&n.equals(i)?n.multiply(a):n.multiplyUnsafe(a);const u=mul(this,a).add(mul(n,o));return u.is0()?void 0:u}toAffine(n){const{px:a,py:i,pz:u}=this;const d=this.is0();null==n&&(n=d?o.ONE:o.inv(u));const m=o.mul(a,n);const g=o.mul(i,n);const y=o.mul(u,n);if(d)return{x:o.ZERO,y:o.ZERO};if(!o.eql(y,o.ONE))throw new Error("invZ was invalid");return{x:m,y:g}}isTorsionFree(){const{h:n,isTorsionFree:o}=a;if(n===sp)return!0;if(o)return o(m,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:n,clearCofactor:o}=a;return n===sp?this:o?o(m,this):this.multiplyUnsafe(a.h)}toRawBytes(n=!0){this.assertValidity();return i(m,this,n)}toHex(n=!0){return bytesToHex(this.toRawBytes(n))}}m.BASE=new m(a.Gx,a.Gy,o.ONE);m.ZERO=new m(o.ZERO,o.ONE,o.ZERO);const g=a.nBitLength;const y=wNAF(m,a.endo?Math.ceil(g/2):g);return{CURVE:a,ProjectivePoint:m,normPrivateKeyToScalar:normPrivateKeyToScalar,weierstrassEquation:weierstrassEquation,isWithinCurveOrder:isWithinCurveOrder}}function validateOpts(n){const a=validateBasic(n);validateObject(a,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"});return Object.freeze({lowS:!0,...a})}function weierstrass(n){const a=validateOpts(n);const{Fp:o,n:i}=a;const u=o.BYTES+1;const d=2*o.BYTES+1;function isValidFieldElement(n){return rp<n&&n<o.ORDER}function modN(n){return mod(n,i)}function invN(n){return invert(n,i)}const{ProjectivePoint:m,normPrivateKeyToScalar:g,weierstrassEquation:y,isWithinCurveOrder:v}=weierstrassPoints({...a,toBytes(n,a,i){const u=a.toAffine();const d=o.toBytes(u.x);const m=concatBytes;return i?m(Uint8Array.from([a.hasEvenY()?2:3]),d):m(Uint8Array.from([4]),d,o.toBytes(u.y))},fromBytes(n){const a=n.length;const i=n[0];const m=n.subarray(1);if(a!==u||2!==i&&3!==i){if(a===d&&4===i){const n=o.fromBytes(m.subarray(0,o.BYTES));const a=o.fromBytes(m.subarray(o.BYTES,2*o.BYTES));return{x:n,y:a}}throw new Error(`Point of length ${a} was invalid. Expected ${u} compressed bytes or ${d} uncompressed bytes`)}{const n=bytesToNumberBE(m);if(!isValidFieldElement(n))throw new Error("Point is not on curve");const a=y(n);let u=o.sqrt(a);const d=(u&sp)===sp;const g=!(1&~i);g!==d&&(u=o.neg(u));return{x:n,y:u}}}});const numToNByteStr=n=>bytesToHex(numberToBytesBE(n,a.nByteLength));function isBiggerThanHalfOrder(n){const a=i>>sp;return n>a}function normalizeS(n){return isBiggerThanHalfOrder(n)?modN(-n):n}const slcNum=(n,a,o)=>bytesToNumberBE(n.slice(a,o));class x{constructor(n,a,o){this.r=n;this.s=a;this.recovery=o;this.assertValidity()}static fromCompact(n){const o=a.nByteLength;n=ensureBytes("compactSignature",n,2*o);return new x(slcNum(n,0,o),slcNum(n,o,2*o))}static fromDER(n){const{r:a,s:o}=np.toSig(ensureBytes("DER",n));return new x(a,o)}assertValidity(){if(!v(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!v(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(n){return new x(this.r,this.s,n)}recoverPublicKey(n){const{r:i,s:u,recovery:d}=this;const g=E(ensureBytes("msgHash",n));if(null==d||![0,1,2,3].includes(d))throw new Error("recovery id invalid");const y=2===d||3===d?i+a.n:i;if(y>=o.ORDER)throw new Error("recovery id 2 or 3 invalid");const v=1&d?"03":"02";const x=m.fromHex(v+numToNByteStr(y));const N=invN(y);const k=modN(-g*N);const S=modN(u*N);const A=m.BASE.multiplyAndAddUnsafe(x,k,S);if(!A)throw new Error("point at infinify");A.assertValidity();return A}hasHighS(){return isBiggerThanHalfOrder(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,modN(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes(this.toDERHex())}toDERHex(){return np.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hexToBytes(this.toCompactHex())}toCompactHex(){return numToNByteStr(this.r)+numToNByteStr(this.s)}}const N={isValidPrivateKey(n){try{g(n);return!0}catch(a){return!1}},normPrivateKeyToScalar:g,randomPrivateKey:()=>{const n=getMinHashLength(a.n);return mapHashToField(a.randomBytes(n),a.n)},precompute(n=8,a=m.BASE){a._setWindowSize(n);a.multiply(BigInt(3));return a}};function getPublicKey(n,a=!0){return m.fromPrivateKey(n).toRawBytes(a)}function isProbPub(n){const a=n instanceof Uint8Array;const o="string"==typeof n;const i=(a||o)&&n.length;return a?i===u||i===d:o?i===2*u||i===2*d:n instanceof m}function getSharedSecret(n,a,o=!0){if(isProbPub(n))throw new Error("first arg must be private key");if(!isProbPub(a))throw new Error("second arg must be public key");const i=m.fromHex(a);return i.multiply(g(n)).toRawBytes(o)}const k=a.bits2int||function(n){const o=bytesToNumberBE(n);const i=8*n.length-a.nBitLength;return i>0?o>>BigInt(i):o};const E=a.bits2int_modN||function(n){return modN(k(n))};const S=bitMask(a.nBitLength);function int2octets(n){if("bigint"!=typeof n)throw new Error("bigint expected");if(!(rp<=n&&n<S))throw new Error(`bigint expected < 2^${a.nBitLength}`);return numberToBytesBE(n,a.nByteLength)}function prepSig(n,i,u=A){if(["recovered","canonical"].some(n=>n in u))throw new Error("sign() legacy options not supported");const{hash:d,randomBytes:y}=a;let{lowS:N,prehash:S,extraEntropy:_}=u;null==N&&(N=!0);n=ensureBytes("msgHash",n);S&&(n=ensureBytes("prehashed msgHash",d(n)));const j=E(n);const I=g(i);const O=[int2octets(I),int2octets(j)];if(null!=_){const n=!0===_?y(o.BYTES):_;O.push(ensureBytes("extraEntropy",n))}const R=concatBytes(...O);const B=j;function k2sig(n){const a=k(n);if(!v(a))return;const o=invN(a);const i=m.BASE.multiply(a).toAffine();const u=modN(i.x);if(u===rp)return;const d=modN(o*modN(B+u*I));if(d===rp)return;let g=(i.x===u?0:2)|Number(i.y&sp);let y=d;if(N&&isBiggerThanHalfOrder(d)){y=normalizeS(d);g^=1}return new x(u,y,g)}return{seed:R,k2sig:k2sig}}const A={lowS:a.lowS,prehash:!1};const _={lowS:a.lowS,prehash:!1};function sign(n,o,i=A){const{seed:u,k2sig:d}=prepSig(n,o,i);const m=a;const g=createHmacDrbg(m.hash.outputLen,m.nByteLength,m.hmac);return g(u,d)}m.BASE._setWindowSize(8);function verify(n,o,i,u=_){const d=n;o=ensureBytes("msgHash",o);i=ensureBytes("publicKey",i);if("strict"in u)throw new Error("options.strict was renamed to lowS");const{lowS:g,prehash:y}=u;let v;let N;try{if("string"==typeof d||d instanceof Uint8Array)try{v=x.fromDER(d)}catch(M){if(!(M instanceof np.Err))throw M;v=x.fromCompact(d)}else{if("object"!=typeof d||"bigint"!=typeof d.r||"bigint"!=typeof d.s)throw new Error("PARSE");{const{r:n,s:a}=d;v=new x(n,a)}}N=m.fromHex(i)}catch(z){if("PARSE"===z.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(g&&v.hasHighS())return!1;y&&(o=a.hash(o));const{r:k,s:S}=v;const A=E(o);const j=invN(S);const I=modN(A*j);const O=modN(k*j);const R=m.BASE.multiplyAndAddUnsafe(N,I,O)?.toAffine();if(!R)return!1;const B=modN(R.x);return B===k}return{CURVE:a,getPublicKey:getPublicKey,getSharedSecret:getSharedSecret,sign:sign,verify:verify,ProjectivePoint:m,Signature:x,utils:N}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function getHash(n){return{hash:n,hmac:(a,...o)=>hmac(n,a,concatBytes$1(...o)),randomBytes:randomBytes}}function createCurve(n,a){const create=a=>weierstrass({...n,...getHash(a)});return Object.freeze({...create(a),create:create})}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const op=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f");const ip=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");const cp=BigInt(1);const lp=BigInt(2);const divNearest=(n,a)=>(n+a/lp)/a;function sqrtMod(n){const a=op;const o=BigInt(3),i=BigInt(6),u=BigInt(11),d=BigInt(22);const m=BigInt(23),g=BigInt(44),y=BigInt(88);const v=n*n*n%a;const x=v*v*n%a;const N=pow2(x,o,a)*x%a;const k=pow2(N,o,a)*x%a;const E=pow2(k,lp,a)*v%a;const S=pow2(E,u,a)*E%a;const A=pow2(S,d,a)*S%a;const _=pow2(A,g,a)*A%a;const j=pow2(_,y,a)*_%a;const I=pow2(j,g,a)*A%a;const O=pow2(I,o,a)*x%a;const R=pow2(O,m,a)*S%a;const B=pow2(R,i,a)*v%a;const M=pow2(B,lp,a);if(!up.eql(up.sqr(M),n))throw new Error("Cannot find square root");return M}const up=Field(op,void 0,void 0,{sqrt:sqrtMod});const dp=createCurve({a:BigInt(0),b:BigInt(7),Fp:up,n:ip,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const a=ip;const o=BigInt("0x3086d221a7d46bcde86c90e49284eb15");const i=-cp*BigInt("0xe4437ed6010e88286f547fa90abfe4c3");const u=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8");const d=o;const m=BigInt("0x100000000000000000000000000000000");const g=divNearest(d*n,a);const y=divNearest(-i*n,a);let v=mod(n-g*o-y*u,a);let x=mod(-g*i-y*d,a);const N=v>m;const k=x>m;N&&(v=a-v);k&&(x=a-x);if(v>m||x>m)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:N,k1:v,k2neg:k,k2:x}}}},uf);BigInt(0);dp.ProjectivePoint;const hp="0x0000000000000000000000000000000000000000";const fp="0x0000000000000000000000000000000000000000000000000000000000000000";const pp=BigInt(0);const mp=BigInt(1);const gp=BigInt(2);const yp=BigInt(27);const bp=BigInt(28);const vp=BigInt(35);const wp={};function toUint256(n){return zeroPadValue(toBeArray(n),32)}const xp=class n{constructor(n,a,o,i){__privateAdd(this,Hl);__privateAdd(this,ql);__privateAdd(this,Gl);__privateAdd(this,Vl);assertPrivate(n,wp,"Signature");__privateSet(this,Hl,a);__privateSet(this,ql,o);__privateSet(this,Gl,i);__privateSet(this,Vl,null)}get r(){return __privateGet(this,Hl)}set r(n){assertArgument(32===dataLength(n),"invalid r","value",n);__privateSet(this,Hl,hexlify(n))}get s(){assertArgument(parseInt(__privateGet(this,ql).substring(0,3))<8,"non-canonical s; use ._s","s",__privateGet(this,ql));return __privateGet(this,ql)}set s(n){assertArgument(32===dataLength(n),"invalid s","value",n);__privateSet(this,ql,hexlify(n))}get _s(){return __privateGet(this,ql)}isValid(){return parseInt(__privateGet(this,ql).substring(0,3))<8}get v(){return __privateGet(this,Gl)}set v(n){const a=getNumber(n,"value");assertArgument(27===a||28===a,"invalid v","v",n);__privateSet(this,Gl,a)}get networkV(){return __privateGet(this,Vl)}get legacyChainId(){const a=this.networkV;return null==a?null:n.getChainId(a)}get yParity(){return 27===this.v?0:1}get yParityAndS(){const n=getBytes(this.s);this.yParity&&(n[0]|=128);return hexlify(n)}get compactSerialized(){return concat([this.r,this.yParityAndS])}get serialized(){return concat([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const a=new n(wp,this.r,this._s,this.v);this.networkV&&__privateSet(a,Vl,this.networkV);return a}toJSON(){const n=this.networkV;return{_type:"signature",networkV:null!=n?n.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(n){const a=getBigInt(n,"v");if(a==yp||a==bp)return pp;assertArgument(a>=vp,"invalid EIP-155 v","v",n);return(a-vp)/gp}static getChainIdV(n,a){return getBigInt(n)*gp+BigInt(35+a-27)}static getNormalizedV(n){const a=getBigInt(n);if(a===pp||a===yp)return 27;if(a===mp||a===bp)return 28;assertArgument(a>=vp,"invalid v","v",n);return a&mp?27:28}static from(a){function assertError(n,o){assertArgument(n,o,"signature",a)}if(null==a)return new n(wp,fp,fp,27);if("string"==typeof a){const o=getBytes(a,"signature");if(64===o.length){const a=hexlify(o.slice(0,32));const i=o.slice(32,64);const u=128&i[0]?28:27;i[0]&=127;return new n(wp,a,hexlify(i),u)}if(65===o.length){const a=hexlify(o.slice(0,32));const i=hexlify(o.slice(32,64));const u=n.getNormalizedV(o[64]);return new n(wp,a,i,u)}assertError(!1,"invalid raw signature length")}if(a instanceof n)return a.clone();const o=a.r;assertError(null!=o,"missing r");const i=toUint256(o);const u=function(n,a){if(null!=n)return toUint256(n);if(null!=a){assertError(isHexString(a,32),"invalid yParityAndS");const n=getBytes(a);n[0]&=127;return hexlify(n)}assertError(!1,"missing s")}(a.s,a.yParityAndS);const{networkV:d,v:m}=function(a,o,i){if(null!=a){const o=getBigInt(a);return{networkV:o>=vp?o:void 0,v:n.getNormalizedV(o)}}if(null!=o){assertError(isHexString(o,32),"invalid yParityAndS");return{v:128&getBytes(o)[0]?28:27}}if(null!=i){switch(getNumber(i,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}assertError(!1,"invalid yParity")}assertError(!1,"missing v")}(a.v,a.yParityAndS,a.yParity);const g=new n(wp,i,u,m);d&&__privateSet(g,Vl,d);assertError(null==a.yParity||getNumber(a.yParity,"sig.yParity")===g.yParity,"yParity mismatch");assertError(null==a.yParityAndS||a.yParityAndS===g.yParityAndS,"yParityAndS mismatch");return g}};Hl=new WeakMap;ql=new WeakMap;Gl=new WeakMap;Vl=new WeakMap;let Np=xp;const kp=class n{constructor(n){__privateAdd(this,Kl);assertArgument(32===dataLength(n),"invalid private key","privateKey","[REDACTED]");__privateSet(this,Kl,hexlify(n))}get privateKey(){return __privateGet(this,Kl)}get publicKey(){return n.computePublicKey(__privateGet(this,Kl))}get compressedPublicKey(){return n.computePublicKey(__privateGet(this,Kl),!0)}sign(n){assertArgument(32===dataLength(n),"invalid digest length","digest",n);const a=dp.sign(getBytesCopy(n),getBytesCopy(__privateGet(this,Kl)),{lowS:!0});return Np.from({r:toBeHex(a.r,32),s:toBeHex(a.s,32),v:a.recovery?28:27})}computeSharedSecret(a){const o=n.computePublicKey(a);return hexlify(dp.getSharedSecret(getBytesCopy(__privateGet(this,Kl)),getBytes(o),!1))}static computePublicKey(n,a){let o=getBytes(n,"key");if(32===o.length){const n=dp.getPublicKey(o,!!a);return hexlify(n)}if(64===o.length){const n=new Uint8Array(65);n[0]=4;n.set(o,1);o=n}const i=dp.ProjectivePoint.fromHex(o);return hexlify(i.toRawBytes(a))}static recoverPublicKey(n,a){assertArgument(32===dataLength(n),"invalid digest length","digest",n);const o=Np.from(a);let i=dp.Signature.fromCompact(getBytesCopy(concat([o.r,o.s])));i=i.addRecoveryBit(o.yParity);const u=i.recoverPublicKey(getBytesCopy(n));assertArgument(null!=u,"invalid signature for digest","signature",a);return"0x"+u.toHex(!1)}static addPoints(a,o,i){const u=dp.ProjectivePoint.fromHex(n.computePublicKey(a).substring(2));const d=dp.ProjectivePoint.fromHex(n.computePublicKey(o).substring(2));return"0x"+u.add(d).toHex(!!i)}};Kl=new WeakMap;let Cp=kp;const Ep=BigInt(0);const Sp=BigInt(36);function getChecksumAddress(n){n=n.toLowerCase();const a=n.substring(2).split("");const o=new Uint8Array(40);for(let u=0;u<40;u++)o[u]=a[u].charCodeAt(0);const i=getBytes(keccak256(o));for(let u=0;u<40;u+=2){i[u>>1]>>4>=8&&(a[u]=a[u].toUpperCase());(15&i[u>>1])>=8&&(a[u+1]=a[u+1].toUpperCase())}return"0x"+a.join("")}const Ap={};for(let sL=0;sL<10;sL++)Ap[String(sL)]=String(sL);for(let sL=0;sL<26;sL++)Ap[String.fromCharCode(65+sL)]=String(10+sL);const _p=15;function ibanChecksum(n){n=n.toUpperCase();n=n.substring(4)+n.substring(0,2)+"00";let a=n.split("").map(n=>Ap[n]).join("");for(;a.length>=_p;){let n=a.substring(0,_p);a=parseInt(n,10)%97+a.substring(n.length)}let o=String(98-parseInt(a,10)%97);for(;o.length<2;)o="0"+o;return o}const Tp=function(){const n={};for(let a=0;a<36;a++){const o="0123456789abcdefghijklmnopqrstuvwxyz"[a];n[o]=BigInt(a)}return n}();function fromBase36(n){n=n.toLowerCase();let a=Ep;for(let o=0;o<n.length;o++)a=a*Sp+Tp[n[o]];return a}function getAddress$1(n){assertArgument("string"==typeof n,"invalid address","address",n);if(n.match(/^(0x)?[0-9a-fA-F]{40}$/)){n.startsWith("0x")||(n="0x"+n);const a=getChecksumAddress(n);assertArgument(!n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||a===n,"bad address checksum","address",n);return a}if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){assertArgument(n.substring(2,4)===ibanChecksum(n),"bad icap checksum","address",n);let a=fromBase36(n.substring(4)).toString(16);for(;a.length<40;)a="0"+a;return getChecksumAddress("0x"+a)}assertArgument(!1,"invalid address","address",n)}function getCreateAddress(n){const a=getAddress$1(n.from);const o=getBigInt(n.nonce,"tx.nonce");let i=o.toString(16);i="0"===i?"0x":i.length%2?"0x0"+i:"0x"+i;return getAddress$1(dataSlice(keccak256(encodeRlp([a,i])),12))}function isAddressable(n){return n&&"function"==typeof n.getAddress}function isAddress(n){try{getAddress$1(n);return!0}catch(a){}return!1}async function checkAddress(n,a){const o=await a;if(null==o||"0x0000000000000000000000000000000000000000"===o){assert("string"!=typeof n,"unconfigured name","UNCONFIGURED_NAME",{value:n});assertArgument(!1,"invalid AddressLike value; did not resolve to a value address","target",n)}return getAddress$1(o)}function resolveAddress(n,a){if("string"==typeof n){if(n.match(/^0x[0-9a-f]{40}$/i))return getAddress$1(n);assert(null!=a,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"});return checkAddress(n,a.resolveName(n))}if(isAddressable(n))return checkAddress(n,n.getAddress());if(n&&"function"==typeof n.then)return checkAddress(n,n);assertArgument(!1,"unsupported addressable value","target",n)}const jp={};function n$2(n,a){let o=!1;if(a<0){o=!0;a*=-1}return new Op(jp,`${o?"":"u"}int${a}`,n,{signed:o,width:a})}function b(n,a){return new Op(jp,`bytes${a||""}`,n,{size:a})}const Ip=Symbol.for("_ethers_typed");const Pp=class n{constructor(n,a,o,i){__publicField$1(this,"type");__publicField$1(this,"value");__privateAdd(this,Zl);__publicField$1(this,"_typedSymbol");null==i&&(i=null);assertPrivate(jp,n,"Typed");defineProperties(this,{_typedSymbol:Ip,type:a,value:o});__privateSet(this,Zl,i);this.format()}format(){if("array"===this.type)throw new Error("");if("dynamicArray"===this.type)throw new Error("");return"tuple"===this.type?`tuple(${this.value.map(n=>n.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return __privateGet(this,Zl)}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===__privateGet(this,Zl)?-1:!1===__privateGet(this,Zl)?this.value.length:null}static from(a,o){return new n(jp,a,o)}static uint8(n){return n$2(n,8)}static uint16(n){return n$2(n,16)}static uint24(n){return n$2(n,24)}static uint32(n){return n$2(n,32)}static uint40(n){return n$2(n,40)}static uint48(n){return n$2(n,48)}static uint56(n){return n$2(n,56)}static uint64(n){return n$2(n,64)}static uint72(n){return n$2(n,72)}static uint80(n){return n$2(n,80)}static uint88(n){return n$2(n,88)}static uint96(n){return n$2(n,96)}static uint104(n){return n$2(n,104)}static uint112(n){return n$2(n,112)}static uint120(n){return n$2(n,120)}static uint128(n){return n$2(n,128)}static uint136(n){return n$2(n,136)}static uint144(n){return n$2(n,144)}static uint152(n){return n$2(n,152)}static uint160(n){return n$2(n,160)}static uint168(n){return n$2(n,168)}static uint176(n){return n$2(n,176)}static uint184(n){return n$2(n,184)}static uint192(n){return n$2(n,192)}static uint200(n){return n$2(n,200)}static uint208(n){return n$2(n,208)}static uint216(n){return n$2(n,216)}static uint224(n){return n$2(n,224)}static uint232(n){return n$2(n,232)}static uint240(n){return n$2(n,240)}static uint248(n){return n$2(n,248)}static uint256(n){return n$2(n,256)}static uint(n){return n$2(n,256)}static int8(n){return n$2(n,-8)}static int16(n){return n$2(n,-16)}static int24(n){return n$2(n,-24)}static int32(n){return n$2(n,-32)}static int40(n){return n$2(n,-40)}static int48(n){return n$2(n,-48)}static int56(n){return n$2(n,-56)}static int64(n){return n$2(n,-64)}static int72(n){return n$2(n,-72)}static int80(n){return n$2(n,-80)}static int88(n){return n$2(n,-88)}static int96(n){return n$2(n,-96)}static int104(n){return n$2(n,-104)}static int112(n){return n$2(n,-112)}static int120(n){return n$2(n,-120)}static int128(n){return n$2(n,-128)}static int136(n){return n$2(n,-136)}static int144(n){return n$2(n,-144)}static int152(n){return n$2(n,-152)}static int160(n){return n$2(n,-160)}static int168(n){return n$2(n,-168)}static int176(n){return n$2(n,-176)}static int184(n){return n$2(n,-184)}static int192(n){return n$2(n,-192)}static int200(n){return n$2(n,-200)}static int208(n){return n$2(n,-208)}static int216(n){return n$2(n,-216)}static int224(n){return n$2(n,-224)}static int232(n){return n$2(n,-232)}static int240(n){return n$2(n,-240)}static int248(n){return n$2(n,-248)}static int256(n){return n$2(n,-256)}static int(n){return n$2(n,-256)}static bytes1(n){return b(n,1)}static bytes2(n){return b(n,2)}static bytes3(n){return b(n,3)}static bytes4(n){return b(n,4)}static bytes5(n){return b(n,5)}static bytes6(n){return b(n,6)}static bytes7(n){return b(n,7)}static bytes8(n){return b(n,8)}static bytes9(n){return b(n,9)}static bytes10(n){return b(n,10)}static bytes11(n){return b(n,11)}static bytes12(n){return b(n,12)}static bytes13(n){return b(n,13)}static bytes14(n){return b(n,14)}static bytes15(n){return b(n,15)}static bytes16(n){return b(n,16)}static bytes17(n){return b(n,17)}static bytes18(n){return b(n,18)}static bytes19(n){return b(n,19)}static bytes20(n){return b(n,20)}static bytes21(n){return b(n,21)}static bytes22(n){return b(n,22)}static bytes23(n){return b(n,23)}static bytes24(n){return b(n,24)}static bytes25(n){return b(n,25)}static bytes26(n){return b(n,26)}static bytes27(n){return b(n,27)}static bytes28(n){return b(n,28)}static bytes29(n){return b(n,29)}static bytes30(n){return b(n,30)}static bytes31(n){return b(n,31)}static bytes32(n){return b(n,32)}static address(a){return new n(jp,"address",a)}static bool(a){return new n(jp,"bool",!!a)}static bytes(a){return new n(jp,"bytes",a)}static string(a){return new n(jp,"string",a)}static array(n,a){throw new Error("not implemented yet")}static tuple(n,a){throw new Error("not implemented yet")}static overrides(a){return new n(jp,"overrides",Object.assign({},a))}static isTyped(n){return n&&"object"==typeof n&&"_typedSymbol"in n&&n._typedSymbol===Ip}static dereference(a,o){if(n.isTyped(a)){if(a.type!==o)throw new Error(`invalid type: expecetd ${o}, got ${a.type}`);return a.value}return a}};Zl=new WeakMap;let Op=Pp;let Rp=class extends Yh{constructor(n){super("address","address",n,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(n,a){let o=Op.dereference(a,"string");try{o=getAddress$1(o)}catch(i){return this._throwError(i.message,a)}return n.writeValue(o)}decode(n){return getAddress$1(toBeHex(n.readValue(),20))}};let Bp=class extends Yh{constructor(n){super(n.name,n.type,"_",n.dynamic);__publicField$1(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,a){return this.coder.encode(n,a)}decode(n){return this.coder.decode(n)}};function pack(n,a,o){let i=[];if(Array.isArray(o))i=o;else if(o&&"object"==typeof o){let n={};i=a.map(a=>{const i=a.localName;assert(i,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:a},value:o});assert(!n[i],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:a},value:o});n[i]=!0;return o[i]})}else assertArgument(!1,"invalid tuple value","tuple",o);assertArgument(a.length===i.length,"types/value length mismatch","tuple",o);let u=new Jh;let d=new Jh;let m=[];a.forEach((n,a)=>{let o=i[a];if(n.dynamic){let a=d.length;n.encode(d,o);let i=u.writeUpdatableValue();m.push(n=>{i(n+a)})}else n.encode(u,o)});m.forEach(n=>{n(u.length)});let g=n.appendWriter(u);g+=n.appendWriter(d);return g}function unpack(n,a){let o=[];let i=[];let u=n.subReader(0);a.forEach(a=>{let d=null;if(a.dynamic){let o=n.readIndex();let i=u.subReader(o);try{d=a.decode(i)}catch(m){if(isError(m,"BUFFER_OVERRUN"))throw m;d=m;d.baseType=a.name;d.name=a.localName;d.type=a.type}}else try{d=a.decode(n)}catch(m){if(isError(m,"BUFFER_OVERRUN"))throw m;d=m;d.baseType=a.name;d.name=a.localName;d.type=a.type}if(null==d)throw new Error("investigate");o.push(d);i.push(a.localName||null)});return Zh.fromItems(o,i)}let Mp=class extends Yh{constructor(n,a,o){const i=n.type+"["+(a>=0?a:"")+"]";const u=-1===a||n.dynamic;super("array",i,o,u);__publicField$1(this,"coder");__publicField$1(this,"length");defineProperties(this,{coder:n,length:a})}defaultValue(){const n=this.coder.defaultValue();const a=[];for(let o=0;o<this.length;o++)a.push(n);return a}encode(n,a){const o=Op.dereference(a,"array");Array.isArray(o)||this._throwError("expected array value",o);let i=this.length;if(-1===i){i=o.length;n.writeValue(o.length)}assertArgumentCount(o.length,i,"coder array"+(this.localName?" "+this.localName:""));let u=[];for(let d=0;d<o.length;d++)u.push(this.coder);return pack(n,u,o)}decode(n){let a=this.length;if(-1===a){a=n.readIndex();assert(a*Uh<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:a*Uh,length:n.dataLength})}let o=[];for(let i=0;i<a;i++)o.push(new Bp(this.coder));return unpack(n,o)}};let zp=class extends Yh{constructor(n){super("bool","bool",n,!1)}defaultValue(){return!1}encode(n,a){const o=Op.dereference(a,"bool");return n.writeValue(o?1:0)}decode(n){return!!n.readValue()}};let Fp=class extends Yh{constructor(n,a){super(n,n,a,!0)}defaultValue(){return"0x"}encode(n,a){a=getBytesCopy(a);let o=n.writeValue(a.length);o+=n.writeBytes(a);return o}decode(n){return n.readBytes(n.readIndex(),!0)}};let Lp=class extends Fp{constructor(n){super("bytes",n)}decode(n){return hexlify(super.decode(n))}};let Dp=class extends Yh{constructor(n,a){let o="bytes"+String(n);super(o,o,a,!1);__publicField$1(this,"size");defineProperties(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(n,a){let o=getBytesCopy(Op.dereference(a,this.type));o.length!==this.size&&this._throwError("incorrect data length",a);return n.writeBytes(o)}decode(n){return hexlify(n.readBytes(this.size))}};const $p=new Uint8Array([]);let Up=class extends Yh{constructor(n){super("null","",n,!1)}defaultValue(){return null}encode(n,a){null!=a&&this._throwError("not null",a);return n.writeBytes($p)}decode(n){n.readBytes(0);return null}};const Wp=BigInt(0);const Hp=BigInt(1);const qp=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");let Gp=class extends Yh{constructor(n,a,o){const i=(a?"int":"uint")+8*n;super(i,i,o,!1);__publicField$1(this,"size");__publicField$1(this,"signed");defineProperties(this,{size:n,signed:a},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,a){let o=getBigInt(Op.dereference(a,this.type));let i=mask(qp,8*Uh);if(this.signed){let n=mask(i,8*this.size-1);(o>n||o<-(n+Hp))&&this._throwError("value out-of-bounds",a);o=toTwos(o,8*Uh)}else(o<Wp||o>mask(i,8*this.size))&&this._throwError("value out-of-bounds",a);return n.writeValue(o)}decode(n){let a=mask(n.readValue(),8*this.size);this.signed&&(a=fromTwos(a,8*this.size));return a}};let Vp=class extends Fp{constructor(n){super("string",n)}defaultValue(){return""}encode(n,a){return super.encode(n,toUtf8Bytes(Op.dereference(a,"string")))}decode(n){return toUtf8String(super.decode(n))}};let Kp=class extends Yh{constructor(n,a){let o=!1;const i=[];n.forEach(n=>{n.dynamic&&(o=!0);i.push(n.type)});const u="tuple("+i.join(",")+")";super("tuple",u,a,o);__publicField$1(this,"coders");defineProperties(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(a=>{n.push(a.defaultValue())});const a=this.coders.reduce((n,a)=>{const o=a.localName;if(o){n[o]||(n[o]=0);n[o]++}return n},{});this.coders.forEach((o,i)=>{let u=o.localName;if(u&&1===a[u]){"length"===u&&(u="_length");null==n[u]&&(n[u]=n[i])}});return Object.freeze(n)}encode(n,a){const o=Op.dereference(a,"tuple");return pack(n,this.coders,o)}decode(n){return unpack(n,this.coders)}};function accessSetify(n,a){return{address:getAddress$1(n),storageKeys:a.map((n,a)=>{assertArgument(isHexString(n,32),"invalid slot",`storageKeys[${a}]`,n);return n.toLowerCase()})}}function accessListify(n){if(Array.isArray(n))return n.map((a,o)=>{if(Array.isArray(a)){assertArgument(2===a.length,"invalid slot set",`value[${o}]`,a);return accessSetify(a[0],a[1])}assertArgument(null!=a&&"object"==typeof a,"invalid address-slot set","value",n);return accessSetify(a.address,a.storageKeys)});assertArgument(null!=n&&"object"==typeof n,"invalid access list","value",n);const a=Object.keys(n).map(a=>{const o=n[a].reduce((n,a)=>{n[a]=!0;return n},{});return accessSetify(a,Object.keys(o).sort())});a.sort((n,a)=>n.address.localeCompare(a.address));return a}function authorizationify(n){return{address:getAddress$1(n.address),nonce:getBigInt(null!=n.nonce?n.nonce:0),chainId:getBigInt(null!=n.chainId?n.chainId:0),signature:Np.from(n.signature)}}function computeAddress(n){let a;a="string"==typeof n?Cp.computePublicKey(n,!1):n.publicKey;return getAddress$1(keccak256("0x"+a.substring(4)).substring(26))}function recoverAddress(n,a){return computeAddress(Cp.recoverPublicKey(n,a))}const Zp=BigInt(0);const Yp=BigInt(2);const Jp=BigInt(27);const Qp=BigInt(28);const Xp=BigInt(35);const em=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const tm=131072;function getKzgLibrary(n){const blobToKzgCommitment=a=>{if("computeBlobProof"in n){if("blobToKzgCommitment"in n&&"function"==typeof n.blobToKzgCommitment)return getBytes(n.blobToKzgCommitment(hexlify(a)))}else if("blobToKzgCommitment"in n&&"function"==typeof n.blobToKzgCommitment)return getBytes(n.blobToKzgCommitment(a));if("blobToKZGCommitment"in n&&"function"==typeof n.blobToKZGCommitment)return getBytes(n.blobToKZGCommitment(hexlify(a)));assertArgument(!1,"unsupported KZG library","kzg",n)};const computeBlobKzgProof=(a,o)=>{if("computeBlobProof"in n&&"function"==typeof n.computeBlobProof)return getBytes(n.computeBlobProof(hexlify(a),hexlify(o)));if("computeBlobKzgProof"in n&&"function"==typeof n.computeBlobKzgProof)return n.computeBlobKzgProof(a,o);if("computeBlobKZGProof"in n&&"function"==typeof n.computeBlobKZGProof)return getBytes(n.computeBlobKZGProof(hexlify(a),hexlify(o)));assertArgument(!1,"unsupported KZG library","kzg",n)};return{blobToKzgCommitment:blobToKzgCommitment,computeBlobKzgProof:computeBlobKzgProof}}function getVersionedHash(n,a){let o=n.toString(16);for(;o.length<2;)o="0"+o;o+=sha256(a).substring(4);return"0x"+o}function handleAddress(n){return"0x"===n?null:getAddress$1(n)}function handleAccessList(n,a){try{return accessListify(n)}catch(o){assertArgument(!1,o.message,a,n)}}function handleAuthorizationList(n,a){try{if(!Array.isArray(n))throw new Error("authorizationList: invalid array");const a=[];for(let o=0;o<n.length;o++){const i=n[o];if(!Array.isArray(i))throw new Error(`authorization[${o}]: invalid array`);if(6!==i.length)throw new Error(`authorization[${o}]: wrong length`);if(!i[1])throw new Error(`authorization[${o}]: null address`);a.push({address:handleAddress(i[1]),nonce:handleUint(i[2],"nonce"),chainId:handleUint(i[0],"chainId"),signature:Np.from({yParity:handleNumber(i[3],"yParity"),r:zeroPadValue(i[4],32),s:zeroPadValue(i[5],32)})})}return a}catch(o){assertArgument(!1,o.message,a,n)}}function handleNumber(n,a){return"0x"===n?0:getNumber(n,a)}function handleUint(n,a){if("0x"===n)return Zp;const o=getBigInt(n,a);assertArgument(o<=em,"value exceeds uint size",a,o);return o}function formatNumber(n,a){const o=getBigInt(n,"value");const i=toBeArray(o);assertArgument(i.length<=32,"value too large",`tx.${a}`,o);return i}function formatAccessList(n){return accessListify(n).map(n=>[n.address,n.storageKeys])}function formatAuthorizationList(n){return n.map(n=>[formatNumber(n.chainId,"chainId"),n.address,formatNumber(n.nonce,"nonce"),formatNumber(n.signature.yParity,"yParity"),toBeArray(n.signature.r),toBeArray(n.signature.s)])}function formatHashes(n,a){assertArgument(Array.isArray(n),`invalid ${a}`,"value",n);for(let o=0;o<n.length;o++)assertArgument(isHexString(n[o],32),"invalid ${ param } hash",`value[${o}]`,n[o]);return n}function _parseLegacy(n){const a=decodeRlp(n);assertArgument(Array.isArray(a)&&(9===a.length||6===a.length),"invalid field count for legacy transaction","data",n);const o={type:0,nonce:handleNumber(a[0],"nonce"),gasPrice:handleUint(a[1],"gasPrice"),gasLimit:handleUint(a[2],"gasLimit"),to:handleAddress(a[3]),value:handleUint(a[4],"value"),data:hexlify(a[5]),chainId:Zp};if(6===a.length)return o;const i=handleUint(a[6],"v");const u=handleUint(a[7],"r");const d=handleUint(a[8],"s");if(u===Zp&&d===Zp)o.chainId=i;else{let n=(i-Xp)/Yp;n<Zp&&(n=Zp);o.chainId=n;assertArgument(n!==Zp||i===Jp||i===Qp,"non-canonical legacy v","v",a[6]);o.signature=Np.from({r:zeroPadValue(a[7],32),s:zeroPadValue(a[8],32),v:i})}return o}function _serializeLegacy(n,a){const o=[formatNumber(n.nonce,"nonce"),formatNumber(n.gasPrice||0,"gasPrice"),formatNumber(n.gasLimit,"gasLimit"),n.to||"0x",formatNumber(n.value,"value"),n.data];let i=Zp;if(n.chainId!=Zp){i=getBigInt(n.chainId,"tx.chainId");assertArgument(!a||null==a.networkV||a.legacyChainId===i,"tx.chainId/sig.v mismatch","sig",a)}else if(n.signature){const a=n.signature.legacyChainId;null!=a&&(i=a)}if(!a){if(i!==Zp){o.push(toBeArray(i));o.push("0x");o.push("0x")}return encodeRlp(o)}let u=BigInt(27+a.yParity);i!==Zp?u=Np.getChainIdV(i,a.v):BigInt(a.v)!==u&&assertArgument(!1,"tx.chainId/sig.v mismatch","sig",a);o.push(toBeArray(u));o.push(toBeArray(a.r));o.push(toBeArray(a.s));return encodeRlp(o)}function _parseEipSignature(n,a){let o;try{o=handleNumber(a[0],"yParity");if(0!==o&&1!==o)throw new Error("bad yParity")}catch(m){assertArgument(!1,"invalid yParity","yParity",a[0])}const i=zeroPadValue(a[1],32);const u=zeroPadValue(a[2],32);const d=Np.from({r:i,s:u,yParity:o});n.signature=d}function _parseEip1559(n){const a=decodeRlp(getBytes(n).slice(1));assertArgument(Array.isArray(a)&&(9===a.length||12===a.length),"invalid field count for transaction type: 2","data",hexlify(n));const o={type:2,chainId:handleUint(a[0],"chainId"),nonce:handleNumber(a[1],"nonce"),maxPriorityFeePerGas:handleUint(a[2],"maxPriorityFeePerGas"),maxFeePerGas:handleUint(a[3],"maxFeePerGas"),gasPrice:null,gasLimit:handleUint(a[4],"gasLimit"),to:handleAddress(a[5]),value:handleUint(a[6],"value"),data:hexlify(a[7]),accessList:handleAccessList(a[8],"accessList")};if(9===a.length)return o;_parseEipSignature(o,a.slice(9));return o}function _serializeEip1559(n,a){const o=[formatNumber(n.chainId,"chainId"),formatNumber(n.nonce,"nonce"),formatNumber(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(n.maxFeePerGas||0,"maxFeePerGas"),formatNumber(n.gasLimit,"gasLimit"),n.to||"0x",formatNumber(n.value,"value"),n.data,formatAccessList(n.accessList||[])];if(a){o.push(formatNumber(a.yParity,"yParity"));o.push(toBeArray(a.r));o.push(toBeArray(a.s))}return concat(["0x02",encodeRlp(o)])}function _parseEip2930(n){const a=decodeRlp(getBytes(n).slice(1));assertArgument(Array.isArray(a)&&(8===a.length||11===a.length),"invalid field count for transaction type: 1","data",hexlify(n));const o={type:1,chainId:handleUint(a[0],"chainId"),nonce:handleNumber(a[1],"nonce"),gasPrice:handleUint(a[2],"gasPrice"),gasLimit:handleUint(a[3],"gasLimit"),to:handleAddress(a[4]),value:handleUint(a[5],"value"),data:hexlify(a[6]),accessList:handleAccessList(a[7],"accessList")};if(8===a.length)return o;_parseEipSignature(o,a.slice(8));return o}function _serializeEip2930(n,a){const o=[formatNumber(n.chainId,"chainId"),formatNumber(n.nonce,"nonce"),formatNumber(n.gasPrice||0,"gasPrice"),formatNumber(n.gasLimit,"gasLimit"),n.to||"0x",formatNumber(n.value,"value"),n.data,formatAccessList(n.accessList||[])];if(a){o.push(formatNumber(a.yParity,"recoveryParam"));o.push(toBeArray(a.r));o.push(toBeArray(a.s))}return concat(["0x01",encodeRlp(o)])}function _parseEip4844(n){let a=decodeRlp(getBytes(n).slice(1));let o="3";let i=null;if(4===a.length&&Array.isArray(a[0])){o="3 (network format)";const n=a[1],u=a[2],d=a[3];assertArgument(Array.isArray(n),"invalid network format: blobs not an array","fields[1]",n);assertArgument(Array.isArray(u),"invalid network format: commitments not an array","fields[2]",u);assertArgument(Array.isArray(d),"invalid network format: proofs not an array","fields[3]",d);assertArgument(n.length===u.length,"invalid network format: blobs/commitments length mismatch","fields",a);assertArgument(n.length===d.length,"invalid network format: blobs/proofs length mismatch","fields",a);i=[];for(let o=0;o<a[1].length;o++)i.push({data:n[o],commitment:u[o],proof:d[o]});a=a[0]}assertArgument(Array.isArray(a)&&(11===a.length||14===a.length),`invalid field count for transaction type: ${o}`,"data",hexlify(n));const u={type:3,chainId:handleUint(a[0],"chainId"),nonce:handleNumber(a[1],"nonce"),maxPriorityFeePerGas:handleUint(a[2],"maxPriorityFeePerGas"),maxFeePerGas:handleUint(a[3],"maxFeePerGas"),gasPrice:null,gasLimit:handleUint(a[4],"gasLimit"),to:handleAddress(a[5]),value:handleUint(a[6],"value"),data:hexlify(a[7]),accessList:handleAccessList(a[8],"accessList"),maxFeePerBlobGas:handleUint(a[9],"maxFeePerBlobGas"),blobVersionedHashes:a[10]};i&&(u.blobs=i);assertArgument(null!=u.to,`invalid address for transaction type: ${o}`,"data",n);assertArgument(Array.isArray(u.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",n);for(let d=0;d<u.blobVersionedHashes.length;d++)assertArgument(isHexString(u.blobVersionedHashes[d],32),`invalid blobVersionedHash at index ${d}: must be length 32`,"data",n);if(11===a.length)return u;_parseEipSignature(u,a.slice(11));return u}function _serializeEip4844(n,a,o){const i=[formatNumber(n.chainId,"chainId"),formatNumber(n.nonce,"nonce"),formatNumber(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(n.maxFeePerGas||0,"maxFeePerGas"),formatNumber(n.gasLimit,"gasLimit"),n.to||hp,formatNumber(n.value,"value"),n.data,formatAccessList(n.accessList||[]),formatNumber(n.maxFeePerBlobGas||0,"maxFeePerBlobGas"),formatHashes(n.blobVersionedHashes||[],"blobVersionedHashes")];if(a){i.push(formatNumber(a.yParity,"yParity"));i.push(toBeArray(a.r));i.push(toBeArray(a.s));if(o)return concat(["0x03",encodeRlp([i,o.map(n=>n.data),o.map(n=>n.commitment),o.map(n=>n.proof)])])}return concat(["0x03",encodeRlp(i)])}function _parseEip7702(n){const a=decodeRlp(getBytes(n).slice(1));assertArgument(Array.isArray(a)&&(10===a.length||13===a.length),"invalid field count for transaction type: 4","data",hexlify(n));const o={type:4,chainId:handleUint(a[0],"chainId"),nonce:handleNumber(a[1],"nonce"),maxPriorityFeePerGas:handleUint(a[2],"maxPriorityFeePerGas"),maxFeePerGas:handleUint(a[3],"maxFeePerGas"),gasPrice:null,gasLimit:handleUint(a[4],"gasLimit"),to:handleAddress(a[5]),value:handleUint(a[6],"value"),data:hexlify(a[7]),accessList:handleAccessList(a[8],"accessList"),authorizationList:handleAuthorizationList(a[9],"authorizationList")};if(10===a.length)return o;_parseEipSignature(o,a.slice(10));return o}function _serializeEip7702(n,a){const o=[formatNumber(n.chainId,"chainId"),formatNumber(n.nonce,"nonce"),formatNumber(n.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(n.maxFeePerGas||0,"maxFeePerGas"),formatNumber(n.gasLimit,"gasLimit"),n.to||"0x",formatNumber(n.value,"value"),n.data,formatAccessList(n.accessList||[]),formatAuthorizationList(n.authorizationList||[])];if(a){o.push(formatNumber(a.yParity,"yParity"));o.push(toBeArray(a.r));o.push(toBeArray(a.s))}return concat(["0x04",encodeRlp(o)])}const nm=class n{constructor(){__privateAdd(this,fu);__privateAdd(this,Yl);__privateAdd(this,Jl);__privateAdd(this,Ql);__privateAdd(this,Xl);__privateAdd(this,eu);__privateAdd(this,tu);__privateAdd(this,nu);__privateAdd(this,ru);__privateAdd(this,su);__privateAdd(this,au);__privateAdd(this,ou);__privateAdd(this,iu);__privateAdd(this,cu);__privateAdd(this,lu);__privateAdd(this,uu);__privateAdd(this,du);__privateAdd(this,hu);__privateSet(this,Yl,null);__privateSet(this,Jl,null);__privateSet(this,Xl,0);__privateSet(this,eu,Zp);__privateSet(this,tu,null);__privateSet(this,nu,null);__privateSet(this,ru,null);__privateSet(this,Ql,"0x");__privateSet(this,su,Zp);__privateSet(this,au,Zp);__privateSet(this,ou,null);__privateSet(this,iu,null);__privateSet(this,cu,null);__privateSet(this,lu,null);__privateSet(this,uu,null);__privateSet(this,du,null);__privateSet(this,hu,null)}get type(){return __privateGet(this,Yl)}set type(n){switch(n){case null:__privateSet(this,Yl,null);break;case 0:case"legacy":__privateSet(this,Yl,0);break;case 1:case"berlin":case"eip-2930":__privateSet(this,Yl,1);break;case 2:case"london":case"eip-1559":__privateSet(this,Yl,2);break;case 3:case"cancun":case"eip-4844":__privateSet(this,Yl,3);break;case 4:case"pectra":case"eip-7702":__privateSet(this,Yl,4);break;default:assertArgument(!1,"unsupported transaction type","type",n)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const n=__privateGet(this,Jl);return null==n&&3===this.type?hp:n}set to(n){__privateSet(this,Jl,null==n?null:getAddress$1(n))}get nonce(){return __privateGet(this,Xl)}set nonce(n){__privateSet(this,Xl,getNumber(n,"value"))}get gasLimit(){return __privateGet(this,eu)}set gasLimit(n){__privateSet(this,eu,getBigInt(n))}get gasPrice(){const n=__privateGet(this,tu);return null!=n||0!==this.type&&1!==this.type?n:Zp}set gasPrice(n){__privateSet(this,tu,null==n?null:getBigInt(n,"gasPrice"))}get maxPriorityFeePerGas(){const n=__privateGet(this,nu);return null==n?2===this.type||3===this.type?Zp:null:n}set maxPriorityFeePerGas(n){__privateSet(this,nu,null==n?null:getBigInt(n,"maxPriorityFeePerGas"))}get maxFeePerGas(){const n=__privateGet(this,ru);return null==n?2===this.type||3===this.type?Zp:null:n}set maxFeePerGas(n){__privateSet(this,ru,null==n?null:getBigInt(n,"maxFeePerGas"))}get data(){return __privateGet(this,Ql)}set data(n){__privateSet(this,Ql,hexlify(n))}get value(){return __privateGet(this,su)}set value(n){__privateSet(this,su,getBigInt(n,"value"))}get chainId(){return __privateGet(this,au)}set chainId(n){__privateSet(this,au,getBigInt(n))}get signature(){return __privateGet(this,ou)||null}set signature(n){__privateSet(this,ou,null==n?null:Np.from(n))}get accessList(){const n=__privateGet(this,iu)||null;return null==n?1===this.type||2===this.type||3===this.type?[]:null:n}set accessList(n){__privateSet(this,iu,null==n?null:accessListify(n))}get authorizationList(){const n=__privateGet(this,hu)||null;return null==n&&4===this.type?[]:n}set authorizationList(n){__privateSet(this,hu,null==n?null:n.map(n=>authorizationify(n)))}get maxFeePerBlobGas(){const n=__privateGet(this,cu);return null==n&&3===this.type?Zp:n}set maxFeePerBlobGas(n){__privateSet(this,cu,null==n?null:getBigInt(n,"maxFeePerBlobGas"))}get blobVersionedHashes(){let n=__privateGet(this,lu);return null==n&&3===this.type?[]:n}set blobVersionedHashes(n){if(null!=n){assertArgument(Array.isArray(n),"blobVersionedHashes must be an Array","value",n);n=n.slice();for(let a=0;a<n.length;a++)assertArgument(isHexString(n[a],32),"invalid blobVersionedHash",`value[${a}]`,n[a])}__privateSet(this,lu,n)}get blobs(){return null==__privateGet(this,du)?null:__privateGet(this,du).map(n=>Object.assign({},n))}set blobs(n){if(null==n){__privateSet(this,du,null);return}const a=[];const o=[];for(let i=0;i<n.length;i++){const u=n[i];if(isBytesLike(u)){assert(__privateGet(this,uu),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let n=getBytes(u);assertArgument(n.length<=tm,"blob is too large",`blobs[${i}]`,u);if(n.length!==tm){const a=new Uint8Array(tm);a.set(n);n=a}const d=__privateGet(this,uu).blobToKzgCommitment(n);const m=hexlify(__privateGet(this,uu).computeBlobKzgProof(n,d));a.push({data:hexlify(n),commitment:hexlify(d),proof:m});o.push(getVersionedHash(1,d))}else{const n=hexlify(u.commitment);a.push({data:hexlify(u.data),commitment:n,proof:hexlify(u.proof)});o.push(getVersionedHash(1,n))}}__privateSet(this,du,a);__privateSet(this,lu,o)}get kzg(){return __privateGet(this,uu)}set kzg(n){__privateSet(this,uu,null==n?null:getKzgLibrary(n))}get hash(){return null==this.signature?null:keccak256(__privateMethod(this,fu,pu).call(this,!0,!1))}get unsignedHash(){return keccak256(this.unsignedSerialized)}get from(){return null==this.signature?null:recoverAddress(this.unsignedHash,this.signature)}get fromPublicKey(){return null==this.signature?null:Cp.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}get serialized(){return __privateMethod(this,fu,pu).call(this,!0,!0)}get unsignedSerialized(){return __privateMethod(this,fu,pu).call(this,!1,!1)}inferType(){const n=this.inferTypes();return n.indexOf(2)>=0?2:n.pop()}inferTypes(){const n=null!=this.gasPrice;const a=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas;const o=null!=this.accessList;const i=null!=__privateGet(this,cu)||__privateGet(this,lu);null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&assert(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this});assert(!a||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this});assert(0!==this.type||!o,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const u=[];if(null!=this.type)u.push(this.type);else if(this.authorizationList&&this.authorizationList.length)u.push(4);else if(a)u.push(2);else if(n){u.push(1);o||u.push(0)}else if(o){u.push(1);u.push(2)}else if(i&&this.to)u.push(3);else{u.push(0);u.push(1);u.push(2);u.push(3)}u.sort();return u}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}clone(){return n.from(this)}toJSON(){const s2=n=>null==n?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:s2(this.gasLimit),gasPrice:s2(this.gasPrice),maxPriorityFeePerGas:s2(this.maxPriorityFeePerGas),maxFeePerGas:s2(this.maxFeePerGas),value:s2(this.value),chainId:s2(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(a){if(null==a)return new n;if("string"==typeof a){const o=getBytes(a);if(o[0]>=127)return n.from(_parseLegacy(o));switch(o[0]){case 1:return n.from(_parseEip2930(o));case 2:return n.from(_parseEip1559(o));case 3:return n.from(_parseEip4844(o));case 4:return n.from(_parseEip7702(o))}assert(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const o=new n;null!=a.type&&(o.type=a.type);null!=a.to&&(o.to=a.to);null!=a.nonce&&(o.nonce=a.nonce);null!=a.gasLimit&&(o.gasLimit=a.gasLimit);null!=a.gasPrice&&(o.gasPrice=a.gasPrice);null!=a.maxPriorityFeePerGas&&(o.maxPriorityFeePerGas=a.maxPriorityFeePerGas);null!=a.maxFeePerGas&&(o.maxFeePerGas=a.maxFeePerGas);null!=a.maxFeePerBlobGas&&(o.maxFeePerBlobGas=a.maxFeePerBlobGas);null!=a.data&&(o.data=a.data);null!=a.value&&(o.value=a.value);null!=a.chainId&&(o.chainId=a.chainId);null!=a.signature&&(o.signature=Np.from(a.signature));null!=a.accessList&&(o.accessList=a.accessList);null!=a.authorizationList&&(o.authorizationList=a.authorizationList);null!=a.blobVersionedHashes&&(o.blobVersionedHashes=a.blobVersionedHashes);null!=a.kzg&&(o.kzg=a.kzg);null!=a.blobs&&(o.blobs=a.blobs);if(null!=a.hash){assertArgument(o.isSigned(),"unsigned transaction cannot define '.hash'","tx",a);assertArgument(o.hash===a.hash,"hash mismatch","tx",a)}if(null!=a.from){assertArgument(o.isSigned(),"unsigned transaction cannot define '.from'","tx",a);assertArgument(o.from.toLowerCase()===(a.from||"").toLowerCase(),"from mismatch","tx",a)}return o}};Yl=new WeakMap;Jl=new WeakMap;Ql=new WeakMap;Xl=new WeakMap;eu=new WeakMap;tu=new WeakMap;nu=new WeakMap;ru=new WeakMap;su=new WeakMap;au=new WeakMap;ou=new WeakMap;iu=new WeakMap;cu=new WeakMap;lu=new WeakMap;uu=new WeakMap;du=new WeakMap;hu=new WeakMap;fu=new WeakSet;pu=function(n,a){assert(!n||null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const o=n?this.signature:null;switch(this.inferType()){case 0:return _serializeLegacy(this,o);case 1:return _serializeEip2930(this,o);case 2:return _serializeEip1559(this,o);case 3:return _serializeEip4844(this,o,a?this.blobs:null);case 4:return _serializeEip7702(this,o)}assert(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let rm=nm;function id$1(n){return keccak256(toUtf8Bytes(n))}var sm="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const am=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]);const om=4;function decode_arithmetic(n){let a=0;function u16(){return n[a++]<<8|n[a++]}let o=u16();let i=1;let u=[0,1];for(let O=1;O<o;O++)u.push(i+=u16());let d=u16();let m=a;a+=d;let g=0;let y=0;function read_bit(){if(0==g){y=y<<8|n[a++];g=8}return y>>--g&1}const v=31;const x=2**v;const N=x>>>1;const k=N>>1;const E=x-1;let S=0;for(let O=0;O<v;O++)S=S<<1|read_bit();let A=[];let _=0;let j=x;for(;;){let n=Math.floor(((S-_+1)*i-1)/j);let a=0;let d=o;for(;d-a>1;){let o=a+d>>>1;n<u[o]?d=o:a=o}if(0==a)break;A.push(a);let m=_+Math.floor(j*u[a]/i);let g=_+Math.floor(j*u[a+1]/i)-1;for(;0==((m^g)&N);){S=S<<1&E|read_bit();m=m<<1&E;g=g<<1&E|1}for(;m&~g&k;){S=S&N|S<<1&E>>>1|read_bit();m=m<<1^N;g=(g^N)<<1|N|1}_=m;j=1+g-m}let I=o-4;return A.map(a=>{switch(a-I){case 3:return I+65792+(n[m++]<<16|n[m++]<<8|n[m++]);case 2:return I+256+(n[m++]<<8|n[m++]);case 1:return I+n[m++];default:return a-1}})}function read_payload(n){let a=0;return()=>n[a++]}function read_compressed_payload(n){return read_payload(decode_arithmetic(unsafe_atob(n)))}function unsafe_atob(n){let a=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((n,o)=>a[n.charCodeAt(0)]=o);let o=n.length;let i=new Uint8Array(6*o>>3);for(let u=0,d=0,m=0,g=0;u<o;u++){g=g<<6|a[n.charCodeAt(u)];m+=6;m>=8&&(i[d++]=g>>(m-=8))}return i}function signed(n){return 1&n?~n>>1:n>>1}function read_deltas(n,a){let o=Array(n);for(let i=0,u=0;i<n;i++)o[i]=u+=signed(a());return o}function read_sorted(n,a=0){let o=[];for(;;){let i=n();let u=n();if(!u)break;a+=i;for(let n=0;n<u;n++)o.push(a+n);a+=u+1}return o}function read_sorted_arrays(n){return read_array_while(()=>{let a=read_sorted(n);if(a.length)return a})}function read_mapped(n){let a=[];for(;;){let o=n();if(0==o)break;a.push(read_linear_table(o,n))}for(;;){let o=n()-1;if(o<0)break;a.push(read_replacement_table(o,n))}return a.flat()}function read_array_while(n){let a=[];for(;;){let o=n(a.length);if(!o)break;a.push(o)}return a}function read_transposed(n,a,o){let i=Array(n).fill().map(()=>[]);for(let u=0;u<a;u++)read_deltas(n,o).forEach((n,a)=>i[a].push(n));return i}function read_linear_table(n,a){let o=1+a();let i=a();let u=read_array_while(a);let d=read_transposed(u.length,1+n,a);return d.flatMap((n,a)=>{let[d,...m]=n;return Array(u[a]).fill().map((n,a)=>{let u=a*i;return[d+a*o,m.map(n=>n+u)]})})}function read_replacement_table(n,a){let o=1+a();let i=read_transposed(o,1+n,a);return i.map(n=>[n[0],n.slice(1)])}function read_trie(n){let a=[];let o=read_sorted(n);expand(decode([]),[]);return a;function decode(a){let i=n();let u=read_array_while(()=>{let a=read_sorted(n).map(n=>o[n]);if(a.length)return decode(a)});return{S:i,B:u,Q:a}}function expand({S:n,B:o},i,u){if(!(4&n&&u===i[i.length-1])){2&n&&(u=i[i.length-1]);1&n&&a.push(i);for(let n of o)for(let a of n.Q)expand(n,[...i,a],u)}}}function hex_cp(n){return n.toString(16).toUpperCase().padStart(2,"0")}function quote_cp(n){return`{${hex_cp(n)}}`}function explode_cp(n){let a=[];for(let o=0,i=n.length;o<i;){let i=n.codePointAt(o);o+=i<65536?1:2;a.push(i)}return a}function str_from_cps(n){const a=4096;let o=n.length;if(o<a)return String.fromCodePoint(...n);let i=[];for(let u=0;u<o;)i.push(String.fromCodePoint(...n.slice(u,u+=a)));return i.join("")}function compare_arrays(n,a){let o=n.length;let i=o-a.length;for(let u=0;0==i&&u<o;u++)i=n[u]-a[u];return i}var im="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const cm=44032;const lm=4352;const um=4449;const dm=4519;const hm=19;const fm=21;const pm=28;const mm=fm*pm;const gm=hm*mm;const ym=cm+gm;const bm=lm+hm;const vm=um+fm;const wm=dm+pm;function unpack_cc(n){return n>>24&255}function unpack_cp(n){return 16777215&n}let xm,Nm,km,Cm;function init$1(){let n=read_compressed_payload(im);xm=new Map(read_sorted_arrays(n).flatMap((n,a)=>n.map(n=>[n,a+1<<24])));Nm=new Set(read_sorted(n));km=new Map;Cm=new Map;for(let[a,o]of read_mapped(n)){if(!Nm.has(a)&&2==o.length){let[n,i]=o;let u=Cm.get(n);if(!u){u=new Map;Cm.set(n,u)}u.set(i,a)}km.set(a,o.reverse())}}function is_hangul(n){return n>=cm&&n<ym}function compose_pair(n,a){if(n>=lm&&n<bm&&a>=um&&a<vm)return cm+(n-lm)*mm+(a-um)*pm;if(is_hangul(n)&&a>dm&&a<wm&&(n-cm)%pm==0)return n+(a-dm);{let o=Cm.get(n);if(o){o=o.get(a);if(o)return o}return-1}}function decomposed(n){xm||init$1();let a=[];let o=[];let i=!1;function add2(n){let o=xm.get(n);if(o){i=!0;n|=o}a.push(n)}for(let u of n)for(;;){if(u<128)a.push(u);else if(is_hangul(u)){let n=u-cm;let a=n/mm|0;let o=n%mm/pm|0;let i=n%pm;add2(lm+a);add2(um+o);i>0&&add2(dm+i)}else{let n=km.get(u);n?o.push(...n):add2(u)}if(!o.length)break;u=o.pop()}if(i&&a.length>1){let n=unpack_cc(a[0]);for(let o=1;o<a.length;o++){let i=unpack_cc(a[o]);if(0==i||n<=i){n=i;continue}let u=o-1;for(;;){let o=a[u+1];a[u+1]=a[u];a[u]=o;if(!u)break;n=unpack_cc(a[--u]);if(n<=i)break}n=unpack_cc(a[o])}}return a}function composed_from_decomposed(n){let a=[];let o=[];let i=-1;let u=0;for(let d of n){let n=unpack_cc(d);let m=unpack_cp(d);if(-1==i)0==n?i=m:a.push(m);else if(u>0&&u>=n){if(0==n){a.push(i,...o);o.length=0;i=m}else o.push(m);u=n}else{let d=compose_pair(i,m);if(d>=0)i=d;else if(0==u&&0==n){a.push(i);i=m}else{o.push(m);u=n}}}i>=0&&a.push(i,...o);return a}function nfd(n){return decomposed(n).map(unpack_cp)}function nfc(n){return composed_from_decomposed(decomposed(n))}const Em=45;const Sm=".";const Am=65039;const _m=1;const Array_from=n=>Array.from(n);function group_has_cp(n,a){return n.P.has(a)||n.Q.has(a)}let Tm=class extends Array{get is_emoji(){return!0}};let jm,Im,Pm,Om,Rm,Bm,Mm,zm,Fm,Lm,Dm;function init(){if(jm)return;let n=read_compressed_payload(sm);const read_sorted_array=()=>read_sorted(n);const read_sorted_set=()=>new Set(read_sorted_array());const set_add_many=(n,a)=>a.forEach(a=>n.add(a));jm=new Map(read_mapped(n));Im=read_sorted_set();Pm=read_sorted_array();Om=new Set(read_sorted_array().map(n=>Pm[n]));Pm=new Set(Pm);Rm=read_sorted_set();read_sorted_set();let a=read_sorted_arrays(n);let o=n();const read_chunked=()=>{let n=new Set;read_sorted_array().forEach(o=>set_add_many(n,a[o]));set_add_many(n,read_sorted_array());return n};Bm=read_array_while(a=>{let i=read_array_while(n).map(n=>n+96);if(i.length){let u=a>=o;i[0]-=32;i=str_from_cps(i);u&&(i=`Restricted[${i}]`);let d=read_chunked();let m=read_chunked();let g=!n();return{N:i,P:d,Q:m,M:g,R:u}}});Mm=read_sorted_set();zm=new Map;let i=read_sorted_array().concat(Array_from(Mm)).sort((n,a)=>n-a);i.forEach((a,o)=>{let u=n();let d=i[o]=u?i[o-u]:{V:[],M:new Map};d.V.push(a);Mm.has(a)||zm.set(a,d)});for(let{V:d,M:m}of new Set(zm.values())){let n=[];for(let o of d){let a=Bm.filter(n=>group_has_cp(n,o));let i=n.find(({G:n})=>a.some(a=>n.has(a)));if(!i){i={G:new Set,V:[]};n.push(i)}i.V.push(o);set_add_many(i.G,a)}let a=n.flatMap(n=>Array_from(n.G));for(let{G:o,V:i}of n){let n=new Set(a.filter(n=>!o.has(n)));for(let a of i)m.set(a,n)}}Fm=new Set;let u=new Set;const add_to_union=n=>Fm.has(n)?u.add(n):Fm.add(n);for(let d of Bm){for(let n of d.P)add_to_union(n);for(let n of d.Q)add_to_union(n)}for(let d of Fm)zm.has(d)||u.has(d)||zm.set(d,_m);set_add_many(Fm,nfd(Fm));Lm=read_trie(n).map(n=>Tm.from(n)).sort(compare_arrays);Dm=new Map;for(let d of Lm){let n=[Dm];for(let a of d){let o=n.map(n=>{let o=n.get(a);if(!o){o=new Map;n.set(a,o)}return o});a===Am?n.push(...o):n=o}for(let a of n)a.V=d}}function quoted_cp(n){return(should_escape(n)?"":`${bidi_qq(safe_str_from_cps([n]))} `)+quote_cp(n)}function bidi_qq(n){return`"${n}"‎`}function check_label_extension(n){if(n.length>=4&&n[2]==Em&&n[3]==Em)throw new Error(`invalid label extension: "${str_from_cps(n.slice(0,4))}"`)}function check_leading_underscore(n){const a=95;for(let o=n.lastIndexOf(a);o>0;)if(n[--o]!==a)throw new Error("underscore allowed only at start")}function check_fenced(n){let a=n[0];let o=am.get(a);if(o)throw error_placement(`leading ${o}`);let i=n.length;let u=-1;for(let d=1;d<i;d++){a=n[d];let i=am.get(a);if(i){if(u==d)throw error_placement(`${o} + ${i}`);u=d+1;o=i}}if(u==i)throw error_placement(`trailing ${o}`)}function safe_str_from_cps(n,a=1/0,o=quote_cp){let i=[];is_combining_mark(n[0])&&i.push("◌");if(n.length>a){a>>=1;n=[...n.slice(0,a),8230,...n.slice(-a)]}let u=0;let d=n.length;for(let m=0;m<d;m++){let a=n[m];if(should_escape(a)){i.push(str_from_cps(n.slice(u,m)));i.push(o(a));u=m+1}}i.push(str_from_cps(n.slice(u,d)));return i.join("")}function is_combining_mark(n){init();return Pm.has(n)}function should_escape(n){init();return Rm.has(n)}function ens_normalize(n){return flatten(split(n,nfc,filter_fe0f))}function split(n,a,o){if(!n)return[];init();let i=0;return n.split(Sm).map(n=>{let u=explode_cp(n);let d={input:u,offset:i};i+=u.length+1;try{let n=d.tokens=tokens_from_str(u,a,o);let i=n.length;let m;if(!i)throw new Error("empty label");let g=d.output=n.flat();check_leading_underscore(g);let y=d.emoji=i>1||n[0].is_emoji;if(!y&&g.every(n=>n<128)){check_label_extension(g);m="ASCII"}else{let a=n.flatMap(n=>n.is_emoji?[]:n);if(a.length){if(Pm.has(g[0]))throw error_placement("leading combining mark");for(let a=1;a<i;a++){let o=n[a];if(!o.is_emoji&&Pm.has(o[0]))throw error_placement(`emoji + combining mark: "${str_from_cps(n[a-1])} + ${safe_str_from_cps([o[0]])}"`)}check_fenced(g);let o=Array_from(new Set(a));let[u]=determine_group(o);check_group(u,a);check_whole(u,o);m=u.N}else m="Emoji"}d.type=m}catch(m){d.error=m}return d})}function check_whole(n,a){let o;let i=[];for(let u of a){let n=zm.get(u);if(n===_m)return;if(n){let a=n.M.get(u);o=o?o.filter(n=>a.has(n)):Array_from(a);if(!o.length)return}else i.push(u)}if(o)for(let u of o)if(i.every(n=>group_has_cp(u,n)))throw new Error(`whole-script confusable: ${n.N}/${u.N}`)}function determine_group(n){let a=Bm;for(let o of n){let n=a.filter(n=>group_has_cp(n,o));if(!n.length)throw Bm.some(n=>group_has_cp(n,o))?error_group_member(a[0],o):error_disallowed(o);a=n;if(1==n.length)break}return a}function flatten(n){return n.map(({input:a,error:o,output:i})=>{if(o){let i=o.message;throw new Error(1==n.length?i:`Invalid label ${bidi_qq(safe_str_from_cps(a,63))}: ${i}`)}return str_from_cps(i)}).join(Sm)}function error_disallowed(n){return new Error(`disallowed character: ${quoted_cp(n)}`)}function error_group_member(n,a){let o=quoted_cp(a);let i=Bm.find(n=>n.P.has(a));i&&(o=`${i.N} ${o}`);return new Error(`illegal mixture: ${n.N} + ${o}`)}function error_placement(n){return new Error(`illegal placement: ${n}`)}function check_group(n,a){for(let o of a)if(!group_has_cp(n,o))throw error_group_member(n,o);if(n.M){let n=nfd(a);for(let a=1,o=n.length;a<o;a++)if(Om.has(n[a])){let i=a+1;for(let u;i<o&&Om.has(u=n[i]);i++)for(let o=a;o<i;o++)if(n[o]==u)throw new Error(`duplicate non-spacing marks: ${quoted_cp(u)}`);if(i-a>om)throw new Error(`excessive non-spacing marks: ${bidi_qq(safe_str_from_cps(n.slice(a-1,i)))} (${i-a}/${om})`);a=i}}}function tokens_from_str(n,a,o){let i=[];let u=[];n=n.slice().reverse();for(;n.length;){let d=consume_emoji_reversed(n);if(d){if(u.length){i.push(a(u));u=[]}i.push(o(d))}else{let a=n.pop();if(Fm.has(a))u.push(a);else{let n=jm.get(a);if(n)u.push(...n);else if(!Im.has(a))throw error_disallowed(a)}}}u.length&&i.push(a(u));return i}function filter_fe0f(n){return n.filter(n=>n!=Am)}function consume_emoji_reversed(n,a){let o=Dm;let i;let u=n.length;for(;u;){o=o.get(n[--u]);if(!o)break;let{V:a}=o;if(a){i=a;n.length=u}}return i}const $m=new Uint8Array(32);$m.fill(0);function checkComponent(n){assertArgument(0!==n.length,"invalid ENS name; empty component","comp",n);return n}function ensNameSplit(n){const a=toUtf8Bytes(ensNormalize(n));const o=[];if(0===n.length)return o;let i=0;for(let u=0;u<a.length;u++){const n=a[u];if(46===n){o.push(checkComponent(a.slice(i,u)));i=u+1}}assertArgument(i<a.length,"invalid ENS name; empty component","name",n);o.push(checkComponent(a.slice(i)));return o}function ensNormalize(n){try{if(0===n.length)throw new Error("empty label");return ens_normalize(n)}catch(a){assertArgument(!1,`invalid ENS name (${a.message})`,"name",n)}}function namehash(n){assertArgument("string"==typeof n,"invalid ENS name; not a string","name",n);assertArgument(n.length,"invalid ENS name (empty label)","name",n);let a=$m;const o=ensNameSplit(n);for(;o.length;)a=keccak256(concat([a,keccak256(o.pop())]));return hexlify(a)}function dnsEncode(n,a){const o=a;assertArgument(o<=255,"DNS encoded label cannot exceed 255","length",o);return hexlify(concat(ensNameSplit(n).map(a=>{assertArgument(a.length<=o,`label ${JSON.stringify(n)} exceeds ${o} bytes`,"name",n);const i=new Uint8Array(a.length+1);i.set(a,1);i[0]=i.length-1;return i})))+"00"}const Um=new RegExp("^bytes([0-9]+)$");const Wm=new RegExp("^(u?int)([0-9]*)$");const Hm=new RegExp("^(.*)\\[([0-9]*)\\]$");function _pack(n,a,o){switch(n){case"address":return getBytes(o?zeroPadValue(a,32):getAddress$1(a));case"string":return toUtf8Bytes(a);case"bytes":return getBytes(a);case"bool":a=a?"0x01":"0x00";return getBytes(o?zeroPadValue(a,32):a)}let i=n.match(Wm);if(i){let u="int"===i[1];let d=parseInt(i[2]||"256");assertArgument((!i[2]||i[2]===String(d))&&d%8==0&&0!==d&&d<=256,"invalid number type","type",n);o&&(d=256);u&&(a=toTwos(a,d));return getBytes(zeroPadValue(toBeArray(a),d/8))}i=n.match(Um);if(i){const u=parseInt(i[1]);assertArgument(String(u)===i[1]&&0!==u&&u<=32,"invalid bytes type","type",n);assertArgument(dataLength(a)===u,`invalid value for ${n}`,"value",a);return o?getBytes(zeroPadBytes(a,32)):a}i=n.match(Hm);if(i&&Array.isArray(a)){const o=i[1];const u=parseInt(i[2]||String(a.length));assertArgument(u===a.length,`invalid array length for ${n}`,"value",a);const d=[];a.forEach(function(n){d.push(_pack(o,n,!0))});return getBytes(concat(d))}assertArgument(!1,"invalid type","type",n)}function solidityPacked(n,a){assertArgument(n.length===a.length,"wrong number of values; expected ${ types.length }","values",a);const o=[];n.forEach(function(n,i){o.push(_pack(n,a[i]))});return hexlify(concat(o))}const qm=new Uint8Array(32);qm.fill(0);const Gm=BigInt(-1);const Vm=BigInt(0);const Km=BigInt(1);const Zm=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function hexPadRight(n){const a=getBytes(n);const o=a.length%32;return o?concat([a,qm.slice(o)]):hexlify(a)}const Ym=toBeHex(Km,32);const Jm=toBeHex(Vm,32);const Qm={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"};const Xm=["name","version","chainId","verifyingContract","salt"];function checkString(n){return function(a){assertArgument("string"==typeof a,`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,a);return a}}const eg={name:checkString("name"),version:checkString("version"),chainId:function(n){const a=getBigInt(n,"domain.chainId");assertArgument(a>=0,"invalid chain ID","domain.chainId",n);return Number.isSafeInteger(a)?Number(a):toQuantity(a)},verifyingContract:function(n){try{return getAddress$1(n).toLowerCase()}catch(a){}assertArgument(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){const a=getBytes(n,"domain.salt");assertArgument(32===a.length,'invalid domain value "salt"',"domain.salt",n);return hexlify(a)}};function getBaseEncoder(n){{const a=n.match(/^(u?)int(\d+)$/);if(a){const o=""===a[1];const i=parseInt(a[2]);assertArgument(i%8==0&&0!==i&&i<=256&&a[2]===String(i),"invalid numeric width","type",n);const u=mask(Zm,o?i-1:i);const d=o?(u+Km)*Gm:Vm;return function(a){const i=getBigInt(a,"value");assertArgument(i>=d&&i<=u,`value out-of-bounds for ${n}`,"value",i);return toBeHex(o?toTwos(i,256):i,32)}}}{const a=n.match(/^bytes(\d+)$/);if(a){const o=parseInt(a[1]);assertArgument(0!==o&&o<=32&&a[1]===String(o),"invalid bytes width","type",n);return function(a){const i=getBytes(a);assertArgument(i.length===o,`invalid length for ${n}`,"value",a);return hexPadRight(a)}}}switch(n){case"address":return function(n){return zeroPadValue(getAddress$1(n),32)};case"bool":return function(n){return n?Ym:Jm};case"bytes":return function(n){return keccak256(n)};case"string":return function(n){return id$1(n)}}return null}function encodeType(n,a){return`${n}(${a.map(({name:n,type:a})=>a+" "+n).join(",")})`}function splitArray(n){const a=n.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return a?{base:a[1],index:a[2]+a[4],array:{base:a[1],prefix:a[1]+a[2],count:a[5]?parseInt(a[5]):-1}}:{base:n}}const tg=class n{constructor(n){__privateAdd(this,bu);__publicField$1(this,"primaryType");__privateAdd(this,mu);__privateAdd(this,gu);__privateAdd(this,yu);__privateSet(this,gu,new Map);__privateSet(this,yu,new Map);const a=new Map;const o=new Map;const i=new Map;const u={};Object.keys(n).forEach(d=>{u[d]=n[d].map(({name:a,type:o})=>{let{base:i,index:u}=splitArray(o);"int"!==i||n.int||(i="int256");"uint"!==i||n.uint||(i="uint256");return{name:a,type:i+(u||"")}});a.set(d,new Set);o.set(d,[]);i.set(d,new Set)});__privateSet(this,mu,JSON.stringify(u));for(const m in u){const i=new Set;for(const d of u[m]){assertArgument(!i.has(d.name),`duplicate variable name ${JSON.stringify(d.name)} in ${JSON.stringify(m)}`,"types",n);i.add(d.name);const u=splitArray(d.type).base;assertArgument(u!==m,`circular type reference to ${JSON.stringify(u)}`,"types",n);const g=getBaseEncoder(u);if(!g){assertArgument(o.has(u),`unknown type ${JSON.stringify(u)}`,"types",n);o.get(u).push(m);a.get(m).add(u)}}}const d=Array.from(o.keys()).filter(n=>0===o.get(n).length);assertArgument(0!==d.length,"missing primary type","types",n);assertArgument(1===d.length,`ambiguous primary types or unused types: ${d.map(n=>JSON.stringify(n)).join(", ")}`,"types",n);defineProperties(this,{primaryType:d[0]});function checkCircular(u,d){assertArgument(!d.has(u),`circular type reference to ${JSON.stringify(u)}`,"types",n);d.add(u);for(const n of a.get(u))if(o.has(n)){checkCircular(n,d);for(const a of d)i.get(a).add(n)}d.delete(u)}checkCircular(this.primaryType,new Set);for(const[m,g]of i){const n=Array.from(g);n.sort();__privateGet(this,gu).set(m,encodeType(m,u[m])+n.map(n=>encodeType(n,u[n])).join(""))}}get types(){return JSON.parse(__privateGet(this,mu))}getEncoder(n){let a=__privateGet(this,yu).get(n);if(!a){a=__privateMethod(this,bu,vu).call(this,n);__privateGet(this,yu).set(n,a)}return a}encodeType(n){const a=__privateGet(this,gu).get(n);assertArgument(a,`unknown type: ${JSON.stringify(n)}`,"name",n);return a}encodeData(n,a){return this.getEncoder(n)(a)}hashStruct(n,a){return keccak256(this.encodeData(n,a))}encode(n){return this.encodeData(this.primaryType,n)}hash(n){return this.hashStruct(this.primaryType,n)}_visit(n,a,o){{const i=getBaseEncoder(n);if(i)return o(n,a)}const i=splitArray(n).array;if(i){assertArgument(-1===i.count||i.count===a.length,`array length mismatch; expected length ${i.count}`,"value",a);return a.map(n=>this._visit(i.prefix,n,o))}const u=this.types[n];if(u)return u.reduce((n,{name:i,type:u})=>{n[i]=this._visit(u,a[i],o);return n},{});assertArgument(!1,`unknown type: ${n}`,"type",n)}visit(n,a){return this._visit(this.primaryType,n,a)}static from(a){return new n(a)}static getPrimaryType(a){return n.from(a).primaryType}static hashStruct(a,o,i){return n.from(o).hashStruct(a,i)}static hashDomain(a){const o=[];for(const n in a){if(null==a[n])continue;const i=Qm[n];assertArgument(i,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",a);o.push({name:n,type:i})}o.sort((n,a)=>Xm.indexOf(n.name)-Xm.indexOf(a.name));return n.hashStruct("EIP712Domain",{EIP712Domain:o},a)}static encode(a,o,i){return concat(["0x1901",n.hashDomain(a),n.from(o).hash(i)])}static hash(a,o,i){return keccak256(n.encode(a,o,i))}static async resolveNames(a,o,i,u){a=Object.assign({},a);for(const n in a)null==a[n]&&delete a[n];const d={};a.verifyingContract&&!isHexString(a.verifyingContract,20)&&(d[a.verifyingContract]="0x");const m=n.from(o);m.visit(i,(n,a)=>{"address"!==n||isHexString(a,20)||(d[a]="0x");return a});for(const n in d)d[n]=await u(n);a.verifyingContract&&d[a.verifyingContract]&&(a.verifyingContract=d[a.verifyingContract]);i=m.visit(i,(n,a)=>"address"===n&&d[a]?d[a]:a);return{domain:a,value:i}}static getPayload(a,o,i){n.hashDomain(a);const u={};const d=[];Xm.forEach(n=>{const o=a[n];if(null!=o){u[n]=eg[n](o);d.push({name:n,type:Qm[n]})}});const m=n.from(o);o=m.types;const g=Object.assign({},o);assertArgument(null==g.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",o);g.EIP712Domain=d;m.encode(i);return{types:g,domain:u,primaryType:m.primaryType,message:m.visit(i,(n,a)=>{if(n.match(/^bytes(\d*)/))return hexlify(getBytes(a));if(n.match(/^u?int/))return getBigInt(a).toString();switch(n){case"address":return a.toLowerCase();case"bool":return!!a;case"string":assertArgument("string"==typeof a,"invalid string","value",a);return a}assertArgument(!1,"unsupported type","type",n)})}}};mu=new WeakMap;gu=new WeakMap;yu=new WeakMap;bu=new WeakSet;vu=function(n){{const a=getBaseEncoder(n);if(a)return a}const a=splitArray(n).array;if(a){const n=a.prefix;const o=this.getEncoder(n);return i=>{assertArgument(-1===a.count||a.count===i.length,`array length mismatch; expected length ${a.count}`,"value",i);let u=i.map(o);__privateGet(this,gu).has(n)&&(u=u.map(keccak256));return keccak256(concat(u))}}const o=this.types[n];if(o){const a=id$1(__privateGet(this,gu).get(n));return n=>{const i=o.map(({name:a,type:o})=>{const i=this.getEncoder(o)(n[a]);return __privateGet(this,gu).has(o)?keccak256(i):i});i.unshift(a);return concat(i)}}assertArgument(!1,`unknown type: ${n}`,"type",n)};let ng=tg;function setify(n){const a=new Set;n.forEach(n=>a.add(n));return Object.freeze(a)}const rg="external public payable override";const sg=setify(rg.split(" "));const ag="constant external internal payable private public pure view override";const og=setify(ag.split(" "));const ig="constructor error event fallback function receive struct";const cg=setify(ig.split(" "));const lg="calldata memory storage payable indexed";const ug=setify(lg.split(" "));const dg="tuple returns";const hg=[ig,lg,dg,ag].join(" ");const fg=setify(hg.split(" "));const pg={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"};const mg=new RegExp("^(\\s*)");const gg=new RegExp("^([0-9]+)");const yg=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)");const bg=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$");const vg=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");const wg=class n{constructor(n){__privateAdd(this,Nu);__privateAdd(this,wu);__privateAdd(this,xu);__privateSet(this,wu,0);__privateSet(this,xu,n.slice())}get offset(){return __privateGet(this,wu)}get length(){return __privateGet(this,xu).length-__privateGet(this,wu)}clone(){return new n(__privateGet(this,xu))}reset(){__privateSet(this,wu,0)}popKeyword(n){const a=this.peek();if("KEYWORD"!==a.type||!n.has(a.text))throw new Error(`expected keyword ${a.text}`);return this.pop().text}popType(n){if(this.peek().type!==n){const a=this.peek();throw new Error(`expected ${n}; got ${a.type} ${JSON.stringify(a.text)}`)}return this.pop().text}popParen(){const n=this.peek();if("OPEN_PAREN"!==n.type)throw new Error("bad start");const a=__privateMethod(this,Nu,ku).call(this,__privateGet(this,wu)+1,n.match+1);__privateSet(this,wu,n.match+1);return a}popParams(){const n=this.peek();if("OPEN_PAREN"!==n.type)throw new Error("bad start");const a=[];for(;__privateGet(this,wu)<n.match-1;){const n=this.peek().linkNext;a.push(__privateMethod(this,Nu,ku).call(this,__privateGet(this,wu)+1,n));__privateSet(this,wu,n)}__privateSet(this,wu,n.match+1);return a}peek(){if(__privateGet(this,wu)>=__privateGet(this,xu).length)throw new Error("out-of-bounds");return __privateGet(this,xu)[__privateGet(this,wu)]}peekKeyword(n){const a=this.peekType("KEYWORD");return null!=a&&n.has(a)?a:null}peekType(n){if(0===this.length)return null;const a=this.peek();return a.type===n?a.text:null}pop(){const n=this.peek();__privateWrapper(this,wu)._++;return n}toString(){const n=[];for(let a=__privateGet(this,wu);a<__privateGet(this,xu).length;a++){const o=__privateGet(this,xu)[a];n.push(`${o.type}:${o.text}`)}return`<TokenString ${n.join(" ")}>`}};wu=new WeakMap;xu=new WeakMap;Nu=new WeakSet;ku=function(n=0,a=0){return new wg(__privateGet(this,xu).slice(n,a).map(a=>Object.freeze(Object.assign({},a,{match:a.match-n,linkBack:a.linkBack-n,linkNext:a.linkNext-n}))))};let xg=wg;function lex(n){const a=[];const throwError2=a=>{const o=u<n.length?JSON.stringify(n[u]):"$EOI";throw new Error(`invalid token ${o} at ${u}: ${a}`)};let o=[];let i=[];let u=0;for(;u<n.length;){let d=n.substring(u);let m=d.match(mg);if(m){u+=m[1].length;d=n.substring(u)}const g={depth:o.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:u,value:-1};a.push(g);let y=pg[d[0]]||"";if(y){g.type=y;g.text=d[0];u++;if("OPEN_PAREN"===y){o.push(a.length-1);i.push(a.length-1)}else if("CLOSE_PAREN"==y){0===o.length&&throwError2("no matching open bracket");g.match=o.pop();a[g.match].match=a.length-1;g.depth--;g.linkBack=i.pop();a[g.linkBack].linkNext=a.length-1}else if("COMMA"===y){g.linkBack=i.pop();a[g.linkBack].linkNext=a.length-1;i.push(a.length-1)}else if("OPEN_BRACKET"===y)g.type="BRACKET";else if("CLOSE_BRACKET"===y){let n=a.pop().text;if(a.length>0&&"NUMBER"===a[a.length-1].type){const o=a.pop().text;n=o+n;a[a.length-1].value=getNumber(o)}if(0===a.length||"BRACKET"!==a[a.length-1].type)throw new Error("missing opening bracket");a[a.length-1].text+=n}}else{m=d.match(yg);if(m){g.text=m[1];u+=g.text.length;if(fg.has(g.text)){g.type="KEYWORD";continue}if(g.text.match(vg)){g.type="TYPE";continue}g.type="ID"}else{m=d.match(gg);if(!m)throw new Error(`unexpected token ${JSON.stringify(d[0])} at position ${u}`);g.text=m[1];g.type="NUMBER";u+=g.text.length}}}return new xg(a.map(n=>Object.freeze(n)))}function allowSingle(n,a){let o=[];for(const i in a.keys())n.has(i)&&o.push(i);if(o.length>1)throw new Error(`conflicting types: ${o.join(", ")}`)}function consumeName(n,a){if(a.peekKeyword(cg)){const o=a.pop().text;if(o!==n)throw new Error(`expected ${n}, got ${o}`)}return a.popType("ID")}function consumeKeywords(n,a){const o=new Set;for(;;){const i=n.peekType("KEYWORD");if(null==i||a&&!a.has(i))break;n.pop();if(o.has(i))throw new Error(`duplicate keywords: ${JSON.stringify(i)}`);o.add(i)}return Object.freeze(o)}function consumeMutability(n){let a=consumeKeywords(n,og);allowSingle(a,setify("constant payable nonpayable".split(" ")));allowSingle(a,setify("pure view payable nonpayable".split(" ")));return a.has("view")?"view":a.has("pure")?"pure":a.has("payable")?"payable":a.has("nonpayable")?"nonpayable":a.has("constant")?"view":"nonpayable"}function consumeParams(n,a){return n.popParams().map(n=>Rg.from(n,a))}function consumeGas(n){if(n.peekType("AT")){n.pop();if(n.peekType("NUMBER"))return getBigInt(n.pop().text);throw new Error("invalid gas")}return null}function consumeEoi(n){if(n.length)throw new Error(`unexpected tokens at offset ${n.offset}: ${n.toString()}`)}const Ng=new RegExp(/^(.*)\[([0-9]*)\]$/);function verifyBasicType(n){const a=n.match(vg);assertArgument(a,"invalid type","type",n);if("uint"===n)return"uint256";if("int"===n)return"int256";if(a[2]){const o=parseInt(a[2]);assertArgument(0!==o&&o<=32,"invalid bytes length","type",n)}else if(a[3]){const o=parseInt(a[3]);assertArgument(0!==o&&o<=256&&o%8==0,"invalid numeric width","type",n)}return n}const kg={};const Cg=Symbol.for("_ethers_internal");const Eg="_ParamTypeInternal";const Ag="_ErrorInternal";const _g="_EventInternal";const Tg="_ConstructorInternal";const jg="_FallbackInternal";const Ig="_FunctionInternal";const Pg="_StructInternal";const Og=class n{constructor(n,a,o,i,u,d,m,g){__privateAdd(this,Cu);__publicField$1(this,"name");__publicField$1(this,"type");__publicField$1(this,"baseType");__publicField$1(this,"indexed");__publicField$1(this,"components");__publicField$1(this,"arrayLength");__publicField$1(this,"arrayChildren");assertPrivate(n,kg,"ParamType");Object.defineProperty(this,Cg,{value:Eg});d&&(d=Object.freeze(d.slice()));if("array"===i){if(null==m||null==g)throw new Error("")}else if(null!=m||null!=g)throw new Error("");if("tuple"===i){if(null==d)throw new Error("")}else if(null!=d)throw new Error("");defineProperties(this,{name:a,type:o,baseType:i,indexed:u,components:d,arrayLength:m,arrayChildren:g})}format(n){null==n&&(n="sighash");if("json"===n){const a=this.name||"";if(this.isArray()){const n=JSON.parse(this.arrayChildren.format("json"));n.name=a;n.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`;return JSON.stringify(n)}const o={type:"tuple"===this.baseType?"tuple":this.type,name:a};"boolean"==typeof this.indexed&&(o.indexed=this.indexed);this.isTuple()&&(o.components=this.components.map(a=>JSON.parse(a.format(n))));return JSON.stringify(o)}let a="";if(this.isArray()){a+=this.arrayChildren.format(n);a+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`}else this.isTuple()?a+="("+this.components.map(a=>a.format(n)).join("full"===n?", ":",")+")":a+=this.type;if("sighash"!==n){!0===this.indexed&&(a+=" indexed");"full"===n&&this.name&&(a+=" "+this.name)}return a}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(n,a){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(-1!==this.arrayLength&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this;return n.map(n=>o.arrayChildren.walk(n,a))}if(this.isTuple()){if(!Array.isArray(n))throw new Error("invalid tuple value");if(n.length!==this.components.length)throw new Error("array is wrong length");const o=this;return n.map((n,i)=>o.components[i].walk(n,a))}return a(this.type,n)}async walkAsync(n,a){const o=[];const i=[n];__privateMethod(this,Cu,Eu).call(this,o,n,a,n=>{i[0]=n});o.length&&await Promise.all(o);return i[0]}static from(a,o){if(n.isParamType(a))return a;if("string"==typeof a)try{return n.from(lex(a),o)}catch(g){assertArgument(!1,"invalid param type","obj",a)}else if(a instanceof xg){let i="",u="";let d=null;if(consumeKeywords(a,setify(["tuple"])).has("tuple")||a.peekType("OPEN_PAREN")){u="tuple";d=a.popParams().map(a=>n.from(a));i=`tuple(${d.map(n=>n.format()).join(",")})`}else{i=verifyBasicType(a.popType("TYPE"));u=i}let m=null;let g=null;for(;a.length&&a.peekType("BRACKET");){const o=a.pop();m=new n(kg,"",i,u,null,d,g,m);g=o.value;i+=o.text;u="array";d=null}let y=null;const v=consumeKeywords(a,ug);if(v.has("indexed")){if(!o)throw new Error("");y=!0}const x=a.peekType("ID")?a.pop().text:"";if(a.length)throw new Error("leftover tokens");return new n(kg,x,i,u,y,d,g,m)}const i=a.name;assertArgument(!i||"string"==typeof i&&i.match(bg),"invalid name","obj.name",i);let u=a.indexed;if(null!=u){assertArgument(o,"parameter cannot be indexed","obj.indexed",a.indexed);u=!!u}let d=a.type;let m=d.match(Ng);if(m){const o=parseInt(m[2]||"-1");const g=n.from({type:m[1],components:a.components});return new n(kg,i||"",d,"array",u,null,o,g)}if("tuple"===d||d.startsWith("tuple(")||d.startsWith("(")){const o=null!=a.components?a.components.map(a=>n.from(a)):null;const m=new n(kg,i||"",d,"tuple",u,o,null,null);return m}d=verifyBasicType(a.type);return new n(kg,i||"",d,d,u,null,null,null)}static isParamType(n){return n&&n[Cg]===Eg}};Cu=new WeakSet;Eu=function(n,a,o,i){if(this.isArray()){if(!Array.isArray(a))throw new Error("invalid array value");if(-1!==this.arrayLength&&a.length!==this.arrayLength)throw new Error("array is wrong length");const u=this.arrayChildren;const d=a.slice();d.forEach((a,i)=>{var m;__privateMethod(m=u,Cu,Eu).call(m,n,a,o,n=>{d[i]=n})});i(d);return}if(this.isTuple()){const u=this.components;let d;if(Array.isArray(a))d=a.slice();else{if(null==a||"object"!=typeof a)throw new Error("invalid tuple value");d=u.map(n=>{if(!n.name)throw new Error("cannot use object value with unnamed components");if(!(n.name in a))throw new Error(`missing value for component ${n.name}`);return a[n.name]})}if(d.length!==this.components.length)throw new Error("array is wrong length");d.forEach((a,i)=>{var m;__privateMethod(m=u[i],Cu,Eu).call(m,n,a,o,n=>{d[i]=n})});i(d);return}const u=o(this.type,a);u.then?n.push(async function(){i(await u)}()):i(u)};let Rg=Og;let Bg=class n{constructor(n,a,o){__publicField$1(this,"type");__publicField$1(this,"inputs");assertPrivate(n,kg,"Fragment");o=Object.freeze(o.slice());defineProperties(this,{type:a,inputs:o})}static from(a){if("string"==typeof a){try{n.from(JSON.parse(a))}catch(o){}return n.from(lex(a))}if(a instanceof xg){const n=a.peekKeyword(cg);switch(n){case"constructor":return Lg.from(a);case"error":return zg.from(a);case"event":return Fg.from(a);case"fallback":case"receive":return Dg.from(a);case"function":return $g.from(a);case"struct":return Ug.from(a)}}else if("object"==typeof a){switch(a.type){case"constructor":return Lg.from(a);case"error":return zg.from(a);case"event":return Fg.from(a);case"fallback":case"receive":return Dg.from(a);case"function":return $g.from(a);case"struct":return Ug.from(a)}assert(!1,`unsupported type: ${a.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}assertArgument(!1,"unsupported frgament object","obj",a)}static isConstructor(n){return Lg.isFragment(n)}static isError(n){return zg.isFragment(n)}static isEvent(n){return Fg.isFragment(n)}static isFunction(n){return $g.isFragment(n)}static isStruct(n){return Ug.isFragment(n)}};let Mg=class extends Bg{constructor(n,a,o,i){super(n,a,i);__publicField$1(this,"name");assertArgument("string"==typeof o&&o.match(bg),"invalid identifier","name",o);i=Object.freeze(i.slice());defineProperties(this,{name:o})}};function joinParams(n,a){return"("+a.map(a=>a.format(n)).join("full"===n?", ":",")+")"}let zg=class n extends Mg{constructor(n,a,o){super(n,"error",a,o);Object.defineProperty(this,Cg,{value:Ag})}get selector(){return id$1(this.format("sighash")).substring(0,10)}format(n){null==n&&(n="sighash");if("json"===n)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(a=>JSON.parse(a.format(n)))});const a=[];"sighash"!==n&&a.push("error");a.push(this.name+joinParams(n,this.inputs));return a.join(" ")}static from(a){if(n.isFragment(a))return a;if("string"==typeof a)return n.from(lex(a));if(a instanceof xg){const o=consumeName("error",a);const i=consumeParams(a);consumeEoi(a);return new n(kg,o,i)}return new n(kg,a.name,a.inputs?a.inputs.map(Rg.from):[])}static isFragment(n){return n&&n[Cg]===Ag}};let Fg=class n extends Mg{constructor(n,a,o,i){super(n,"event",a,o);__publicField$1(this,"anonymous");Object.defineProperty(this,Cg,{value:_g});defineProperties(this,{anonymous:i})}get topicHash(){return id$1(this.format("sighash"))}format(n){null==n&&(n="sighash");if("json"===n)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(a=>JSON.parse(a.format(n)))});const a=[];"sighash"!==n&&a.push("event");a.push(this.name+joinParams(n,this.inputs));"sighash"!==n&&this.anonymous&&a.push("anonymous");return a.join(" ")}static getTopicHash(a,o){o=(o||[]).map(n=>Rg.from(n));const i=new n(kg,a,o,!1);return i.topicHash}static from(a){if(n.isFragment(a))return a;if("string"==typeof a)try{return n.from(lex(a))}catch(o){assertArgument(!1,"invalid event fragment","obj",a)}else if(a instanceof xg){const o=consumeName("event",a);const i=consumeParams(a,!0);const u=!!consumeKeywords(a,setify(["anonymous"])).has("anonymous");consumeEoi(a);return new n(kg,o,i,u)}return new n(kg,a.name,a.inputs?a.inputs.map(n=>Rg.from(n,!0)):[],!!a.anonymous)}static isFragment(n){return n&&n[Cg]===_g}};let Lg=class n extends Bg{constructor(n,a,o,i,u){super(n,a,o);__publicField$1(this,"payable");__publicField$1(this,"gas");Object.defineProperty(this,Cg,{value:Tg});defineProperties(this,{payable:i,gas:u})}format(n){assert(null!=n&&"sighash"!==n,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"});if("json"===n)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(a=>JSON.parse(a.format(n)))});const a=[`constructor${joinParams(n,this.inputs)}`];this.payable&&a.push("payable");null!=this.gas&&a.push(`@${this.gas.toString()}`);return a.join(" ")}static from(a){if(n.isFragment(a))return a;if("string"==typeof a)try{return n.from(lex(a))}catch(o){assertArgument(!1,"invalid constuctor fragment","obj",a)}else if(a instanceof xg){consumeKeywords(a,setify(["constructor"]));const o=consumeParams(a);const i=!!consumeKeywords(a,sg).has("payable");const u=consumeGas(a);consumeEoi(a);return new n(kg,"constructor",o,i,u)}return new n(kg,"constructor",a.inputs?a.inputs.map(Rg.from):[],!!a.payable,null!=a.gas?a.gas:null)}static isFragment(n){return n&&n[Cg]===Tg}};let Dg=class n extends Bg{constructor(n,a,o){super(n,"fallback",a);__publicField$1(this,"payable");Object.defineProperty(this,Cg,{value:jg});defineProperties(this,{payable:o})}format(n){const a=0===this.inputs.length?"receive":"fallback";if("json"===n){const n=this.payable?"payable":"nonpayable";return JSON.stringify({type:a,stateMutability:n})}return`${a}()${this.payable?" payable":""}`}static from(a){if(n.isFragment(a))return a;if("string"==typeof a)try{return n.from(lex(a))}catch(o){assertArgument(!1,"invalid fallback fragment","obj",a)}else if(a instanceof xg){const o=a.toString();const i=a.peekKeyword(setify(["fallback","receive"]));assertArgument(i,"type must be fallback or receive","obj",o);const u=a.popKeyword(setify(["fallback","receive"]));if("receive"===u){const o=consumeParams(a);assertArgument(0===o.length,"receive cannot have arguments","obj.inputs",o);consumeKeywords(a,setify(["payable"]));consumeEoi(a);return new n(kg,[],!0)}let d=consumeParams(a);d.length?assertArgument(1===d.length&&"bytes"===d[0].type,"invalid fallback inputs","obj.inputs",d.map(n=>n.format("minimal")).join(", ")):d=[Rg.from("bytes")];const m=consumeMutability(a);assertArgument("nonpayable"===m||"payable"===m,"fallback cannot be constants","obj.stateMutability",m);if(consumeKeywords(a,setify(["returns"])).has("returns")){const n=consumeParams(a);assertArgument(1===n.length&&"bytes"===n[0].type,"invalid fallback outputs","obj.outputs",n.map(n=>n.format("minimal")).join(", "))}consumeEoi(a);return new n(kg,d,"payable"===m)}if("receive"===a.type)return new n(kg,[],!0);if("fallback"===a.type){const o=[Rg.from("bytes")];const i="payable"===a.stateMutability;return new n(kg,o,i)}assertArgument(!1,"invalid fallback description","obj",a)}static isFragment(n){return n&&n[Cg]===jg}};let $g=class n extends Mg{constructor(n,a,o,i,u,d){super(n,"function",a,i);__publicField$1(this,"constant");__publicField$1(this,"outputs");__publicField$1(this,"stateMutability");__publicField$1(this,"payable");__publicField$1(this,"gas");Object.defineProperty(this,Cg,{value:Ig});u=Object.freeze(u.slice());const m="view"===o||"pure"===o;const g="payable"===o;defineProperties(this,{constant:m,gas:d,outputs:u,payable:g,stateMutability:o})}get selector(){return id$1(this.format("sighash")).substring(0,10)}format(n){null==n&&(n="sighash");if("json"===n)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(a=>JSON.parse(a.format(n))),outputs:this.outputs.map(a=>JSON.parse(a.format(n)))});const a=[];"sighash"!==n&&a.push("function");a.push(this.name+joinParams(n,this.inputs));if("sighash"!==n){"nonpayable"!==this.stateMutability&&a.push(this.stateMutability);if(this.outputs&&this.outputs.length){a.push("returns");a.push(joinParams(n,this.outputs))}null!=this.gas&&a.push(`@${this.gas.toString()}`)}return a.join(" ")}static getSelector(a,o){o=(o||[]).map(n=>Rg.from(n));const i=new n(kg,a,"view",o,[],null);return i.selector}static from(a){if(n.isFragment(a))return a;if("string"==typeof a)try{return n.from(lex(a))}catch(i){assertArgument(!1,"invalid function fragment","obj",a)}else if(a instanceof xg){const o=consumeName("function",a);const i=consumeParams(a);const u=consumeMutability(a);let d=[];consumeKeywords(a,setify(["returns"])).has("returns")&&(d=consumeParams(a));const m=consumeGas(a);consumeEoi(a);return new n(kg,o,u,i,d,m)}let o=a.stateMutability;if(null==o){o="payable";if("boolean"==typeof a.constant){o="view";if(!a.constant){o="payable";"boolean"!=typeof a.payable||a.payable||(o="nonpayable")}}else"boolean"!=typeof a.payable||a.payable||(o="nonpayable")}return new n(kg,a.name,o,a.inputs?a.inputs.map(Rg.from):[],a.outputs?a.outputs.map(Rg.from):[],null!=a.gas?a.gas:null)}static isFragment(n){return n&&n[Cg]===Ig}};let Ug=class n extends Mg{constructor(n,a,o){super(n,"struct",a,o);Object.defineProperty(this,Cg,{value:Pg})}format(){throw new Error("@TODO")}static from(a){if("string"==typeof a)try{return n.from(lex(a))}catch(o){assertArgument(!1,"invalid struct fragment","obj",a)}else if(a instanceof xg){const o=consumeName("struct",a);const i=consumeParams(a);consumeEoi(a);return new n(kg,o,i)}return new n(kg,a.name,a.inputs?a.inputs.map(Rg.from):[])}static isFragment(n){return n&&n[Cg]===Pg}};const Wg=new Map;Wg.set(0,"GENERIC_PANIC");Wg.set(1,"ASSERT_FALSE");Wg.set(17,"OVERFLOW");Wg.set(18,"DIVIDE_BY_ZERO");Wg.set(33,"ENUM_RANGE_ERROR");Wg.set(34,"BAD_STORAGE_DATA");Wg.set(49,"STACK_UNDERFLOW");Wg.set(50,"ARRAY_RANGE_ERROR");Wg.set(65,"OUT_OF_MEMORY");Wg.set(81,"UNINITIALIZED_FUNCTION_CALL");const Hg=new RegExp(/^bytes([0-9]*)$/);const qg=new RegExp(/^(u?int)([0-9]*)$/);let Gg=null;let Vg=1024;function getBuiltinCallException(n,a,o,i){let u="missing revert data";let d=null;const m=null;let g=null;if(o){u="execution reverted";const n=getBytes(o);o=hexlify(o);if(0===n.length){u+=" (no data present; likely require(false) occurred";d="require(false)"}else if(n.length%32!=4)u+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===hexlify(n.slice(0,4)))try{d=i.decode(["string"],n.slice(4))[0];g={signature:"Error(string)",name:"Error",args:[d]};u+=`: ${JSON.stringify(d)}`}catch(v){u+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===hexlify(n.slice(0,4)))try{const a=Number(i.decode(["uint256"],n.slice(4))[0]);g={signature:"Panic(uint256)",name:"Panic",args:[a]};d=`Panic due to ${Wg.get(a)||"UNKNOWN"}(${a})`;u+=`: ${d}`}catch(v){u+=" (could not decode panic code)"}else u+=" (unknown custom error)"}const y={to:a.to?getAddress$1(a.to):null,data:a.data||"0x"};a.from&&(y.from=getAddress$1(a.from));return makeError(u,"CALL_EXCEPTION",{action:n,data:o,reason:d,transaction:y,invocation:m,revert:g})}const Kg=class n{constructor(){__privateAdd(this,Su)}getDefaultValue(n){const a=n.map(n=>__privateMethod(this,Su,Au).call(this,Rg.from(n)));const o=new Kp(a,"_");return o.defaultValue()}encode(n,a){assertArgumentCount(a.length,n.length,"types/values length mismatch");const o=n.map(n=>__privateMethod(this,Su,Au).call(this,Rg.from(n)));const i=new Kp(o,"_");const u=new Jh;i.encode(u,a);return u.data}decode(n,a,o){const i=n.map(n=>__privateMethod(this,Su,Au).call(this,Rg.from(n)));const u=new Kp(i,"_");return u.decode(new Xh(a,o,Vg))}static _setDefaultMaxInflation(n){assertArgument("number"==typeof n&&Number.isInteger(n),"invalid defaultMaxInflation factor","value",n);Vg=n}static defaultAbiCoder(){null==Gg&&(Gg=new n);return Gg}static getBuiltinCallException(a,o,i){return getBuiltinCallException(a,o,i,n.defaultAbiCoder())}};Su=new WeakSet;Au=function(n){if(n.isArray())return new Mp(__privateMethod(this,Su,Au).call(this,n.arrayChildren),n.arrayLength,n.name);if(n.isTuple())return new Kp(n.components.map(n=>__privateMethod(this,Su,Au).call(this,n)),n.name);switch(n.baseType){case"address":return new Rp(n.name);case"bool":return new zp(n.name);case"string":return new Vp(n.name);case"bytes":return new Lp(n.name);case"":return new Up(n.name)}let a=n.type.match(qg);if(a){let o=parseInt(a[2]||"256");assertArgument(0!==o&&o<=256&&o%8==0,"invalid "+a[1]+" bit length","param",n);return new Gp(o/8,"int"===a[1],n.name)}a=n.type.match(Hg);if(a){let o=parseInt(a[1]);assertArgument(0!==o&&o<=32,"invalid bytes length","param",n);return new Dp(o,n.name)}assertArgument(!1,"invalid type","type",n.type)};let Zg=Kg;let Yg=class{constructor(n,a,o){__publicField$1(this,"fragment");__publicField$1(this,"name");__publicField$1(this,"signature");__publicField$1(this,"topic");__publicField$1(this,"args");const i=n.name,u=n.format();defineProperties(this,{fragment:n,name:i,signature:u,topic:a,args:o})}};let Jg=class{constructor(n,a,o,i){__publicField$1(this,"fragment");__publicField$1(this,"name");__publicField$1(this,"args");__publicField$1(this,"signature");__publicField$1(this,"selector");__publicField$1(this,"value");const u=n.name,d=n.format();defineProperties(this,{fragment:n,name:u,args:o,signature:d,selector:a,value:i})}};let Qg=class{constructor(n,a,o){__publicField$1(this,"fragment");__publicField$1(this,"name");__publicField$1(this,"args");__publicField$1(this,"signature");__publicField$1(this,"selector");const i=n.name,u=n.format();defineProperties(this,{fragment:n,name:i,args:o,signature:u,selector:a})}};let Xg=class{constructor(n){__publicField$1(this,"hash");__publicField$1(this,"_isIndexed");defineProperties(this,{hash:n,_isIndexed:!0})}static isIndexed(n){return!(!n||!n._isIndexed)}};const ey={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"};const ty={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:n=>`reverted with reason string ${JSON.stringify(n)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:n=>{let a="unknown panic code";n>=0&&n<=255&&ey[n.toString()]&&(a=ey[n.toString()]);return`reverted with panic code 0x${n.toString(16)} (${a})`}}};const ny=class n{constructor(n){__privateAdd(this,Pu);__publicField$1(this,"fragments");__publicField$1(this,"deploy");__publicField$1(this,"fallback");__publicField$1(this,"receive");__privateAdd(this,_u);__privateAdd(this,Tu);__privateAdd(this,ju);__privateAdd(this,Iu);let a=[];a="string"==typeof n?JSON.parse(n):n;__privateSet(this,ju,new Map);__privateSet(this,_u,new Map);__privateSet(this,Tu,new Map);const o=[];for(const m of a)try{o.push(Bg.from(m))}catch(d){console.log(`[Warning] Invalid Fragment ${JSON.stringify(m)}:`,d.message)}defineProperties(this,{fragments:Object.freeze(o)});let i=null;let u=!1;__privateSet(this,Iu,this.getAbiCoder());this.fragments.forEach((n,a)=>{let o;switch(n.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}defineProperties(this,{deploy:n});return;case"fallback":if(0===n.inputs.length)u=!0;else{assertArgument(!i||n.payable!==i.payable,"conflicting fallback fragments",`fragments[${a}]`,n);i=n;u=i.payable}return;case"function":o=__privateGet(this,ju);break;case"event":o=__privateGet(this,Tu);break;case"error":o=__privateGet(this,_u);break;default:return}const d=n.format();o.has(d)||o.set(d,n)});this.deploy||defineProperties(this,{deploy:Lg.from("constructor()")});defineProperties(this,{fallback:i,receive:u})}format(n){const a=n?"minimal":"full";const o=this.fragments.map(n=>n.format(a));return o}formatJson(){const n=this.fragments.map(n=>n.format("json"));return JSON.stringify(n.map(n=>JSON.parse(n)))}getAbiCoder(){return Zg.defaultAbiCoder()}getFunctionName(n){const a=__privateMethod(this,Pu,Ou).call(this,n,null,!1);assertArgument(a,"no matching function","key",n);return a.name}hasFunction(n){return!!__privateMethod(this,Pu,Ou).call(this,n,null,!1)}getFunction(n,a){return __privateMethod(this,Pu,Ou).call(this,n,a||null,!0)}forEachFunction(n){const a=Array.from(__privateGet(this,ju).keys());a.sort((n,a)=>n.localeCompare(a));for(let o=0;o<a.length;o++){const i=a[o];n(__privateGet(this,ju).get(i),o)}}getEventName(n){const a=__privateMethod(this,Pu,Ru).call(this,n,null,!1);assertArgument(a,"no matching event","key",n);return a.name}hasEvent(n){return!!__privateMethod(this,Pu,Ru).call(this,n,null,!1)}getEvent(n,a){return __privateMethod(this,Pu,Ru).call(this,n,a||null,!0)}forEachEvent(n){const a=Array.from(__privateGet(this,Tu).keys());a.sort((n,a)=>n.localeCompare(a));for(let o=0;o<a.length;o++){const i=a[o];n(__privateGet(this,Tu).get(i),o)}}getError(n,a){if(isHexString(n)){const a=n.toLowerCase();if(ty[a])return zg.from(ty[a].signature);for(const n of __privateGet(this,_u).values())if(a===n.selector)return n;return null}if(-1===n.indexOf("(")){const a=[];for(const[o,i]of __privateGet(this,_u))o.split("(")[0]===n&&a.push(i);if(0===a.length)return"Error"===n?zg.from("error Error(string)"):"Panic"===n?zg.from("error Panic(uint256)"):null;if(a.length>1){const o=a.map(n=>JSON.stringify(n.format())).join(", ");assertArgument(!1,`ambiguous error description (i.e. ${o})`,"name",n)}return a[0]}n=zg.from(n).format();if("Error(string)"===n)return zg.from("error Error(string)");if("Panic(uint256)"===n)return zg.from("error Panic(uint256)");const o=__privateGet(this,_u).get(n);return o||null}forEachError(n){const a=Array.from(__privateGet(this,_u).keys());a.sort((n,a)=>n.localeCompare(a));for(let o=0;o<a.length;o++){const i=a[o];n(__privateGet(this,_u).get(i),o)}}_decodeParams(n,a){return __privateGet(this,Iu).decode(n,a)}_encodeParams(n,a){return __privateGet(this,Iu).encode(n,a)}encodeDeploy(n){return this._encodeParams(this.deploy.inputs,n||[])}decodeErrorResult(n,a){if("string"==typeof n){const a=this.getError(n);assertArgument(a,"unknown error","fragment",n);n=a}assertArgument(dataSlice(a,0,4)===n.selector,`data signature does not match error ${n.name}.`,"data",a);return this._decodeParams(n.inputs,dataSlice(a,4))}encodeErrorResult(n,a){if("string"==typeof n){const a=this.getError(n);assertArgument(a,"unknown error","fragment",n);n=a}return concat([n.selector,this._encodeParams(n.inputs,a||[])])}decodeFunctionData(n,a){if("string"==typeof n){const a=this.getFunction(n);assertArgument(a,"unknown function","fragment",n);n=a}assertArgument(dataSlice(a,0,4)===n.selector,`data signature does not match function ${n.name}.`,"data",a);return this._decodeParams(n.inputs,dataSlice(a,4))}encodeFunctionData(n,a){if("string"==typeof n){const a=this.getFunction(n);assertArgument(a,"unknown function","fragment",n);n=a}return concat([n.selector,this._encodeParams(n.inputs,a||[])])}decodeFunctionResult(n,a){if("string"==typeof n){const a=this.getFunction(n);assertArgument(a,"unknown function","fragment",n);n=a}let o="invalid length for result data";const i=getBytesCopy(a);if(i.length%32==0)try{return __privateGet(this,Iu).decode(n.outputs,i)}catch(u){o="could not decode result data"}assert(!1,o,"BAD_DATA",{value:hexlify(i),info:{method:n.name,signature:n.format()}})}makeError(n,a){const o=getBytes(n,"data");const i=Zg.getBuiltinCallException("call",a,o);const u="execution reverted (unknown custom error)";if(i.message.startsWith(u)){const n=hexlify(o.slice(0,4));const a=this.getError(n);if(a)try{const n=__privateGet(this,Iu).decode(a.inputs,o.slice(4));i.revert={name:a.name,signature:a.format(),args:n};i.reason=i.revert.signature;i.message=`execution reverted: ${i.reason}`}catch(m){i.message="execution reverted (coult not decode custom error)"}}const d=this.parseTransaction(a);d&&(i.invocation={method:d.name,signature:d.signature,args:d.args});return i}encodeFunctionResult(n,a){if("string"==typeof n){const a=this.getFunction(n);assertArgument(a,"unknown function","fragment",n);n=a}return hexlify(__privateGet(this,Iu).encode(n.outputs,a||[]))}encodeFilterTopics(n,a){if("string"==typeof n){const a=this.getEvent(n);assertArgument(a,"unknown event","eventFragment",n);n=a}assert(a.length<=n.inputs.length,`too many arguments for ${n.format()}`,"UNEXPECTED_ARGUMENT",{count:a.length,expectedCount:n.inputs.length});const o=[];n.anonymous||o.push(n.topicHash);const encodeTopic=(n,a)=>{if("string"===n.type)return id$1(a);if("bytes"===n.type)return keccak256(hexlify(a));"bool"===n.type&&"boolean"==typeof a?a=a?"0x01":"0x00":n.type.match(/^u?int/)?a=toBeHex(a):n.type.match(/^bytes/)?a=zeroPadBytes(a,32):"address"===n.type&&__privateGet(this,Iu).encode(["address"],[a]);return zeroPadValue(hexlify(a),32)};a.forEach((a,i)=>{const u=n.inputs[i];u.indexed?null==a?o.push(null):"array"===u.baseType||"tuple"===u.baseType?assertArgument(!1,"filtering with tuples or arrays not supported","contract."+u.name,a):Array.isArray(a)?o.push(a.map(n=>encodeTopic(u,n))):o.push(encodeTopic(u,a)):assertArgument(null==a,"cannot filter non-indexed parameters; must be null","contract."+u.name,a)});for(;o.length&&null===o[o.length-1];)o.pop();return o}encodeEventLog(n,a){if("string"==typeof n){const a=this.getEvent(n);assertArgument(a,"unknown event","eventFragment",n);n=a}const o=[];const i=[];const u=[];n.anonymous||o.push(n.topicHash);assertArgument(a.length===n.inputs.length,"event arguments/values mismatch","values",a);n.inputs.forEach((n,d)=>{const m=a[d];if(n.indexed)if("string"===n.type)o.push(id$1(m));else if("bytes"===n.type)o.push(keccak256(m));else{if("tuple"===n.baseType||"array"===n.baseType)throw new Error("not implemented");o.push(__privateGet(this,Iu).encode([n.type],[m]))}else{i.push(n);u.push(m)}});return{data:__privateGet(this,Iu).encode(i,u),topics:o}}decodeEventLog(n,a,o){if("string"==typeof n){const a=this.getEvent(n);assertArgument(a,"unknown event","eventFragment",n);n=a}if(null!=o&&!n.anonymous){const a=n.topicHash;assertArgument(isHexString(o[0],32)&&o[0].toLowerCase()===a,"fragment/topic mismatch","topics[0]",o[0]);o=o.slice(1)}const i=[];const u=[];const d=[];n.inputs.forEach((n,a)=>{if(n.indexed)if("string"===n.type||"bytes"===n.type||"tuple"===n.baseType||"array"===n.baseType){i.push(Rg.from({type:"bytes32",name:n.name}));d.push(!0)}else{i.push(n);d.push(!1)}else{u.push(n);d.push(!1)}});const m=null!=o?__privateGet(this,Iu).decode(i,concat(o)):null;const g=__privateGet(this,Iu).decode(u,a,!0);const y=[];const v=[];let x=0,N=0;n.inputs.forEach((n,a)=>{let o=null;if(n.indexed)if(null==m)o=new Xg(null);else if(d[a])o=new Xg(m[N++]);else try{o=m[N++]}catch(i){o=i}else try{o=g[x++]}catch(i){o=i}y.push(o);v.push(n.name||null)});return Zh.fromItems(y,v)}parseTransaction(n){const a=getBytes(n.data,"tx.data");const o=getBigInt(null!=n.value?n.value:0,"tx.value");const i=this.getFunction(hexlify(a.slice(0,4)));if(!i)return null;const u=__privateGet(this,Iu).decode(i.inputs,a.slice(4));return new Jg(i,i.selector,u,o)}parseCallResult(n){throw new Error("@TODO")}parseLog(n){const a=this.getEvent(n.topics[0]);return!a||a.anonymous?null:new Yg(a,a.topicHash,this.decodeEventLog(a,n.data,n.topics))}parseError(n){const a=hexlify(n);const o=this.getError(dataSlice(a,0,4));if(!o)return null;const i=__privateGet(this,Iu).decode(o.inputs,dataSlice(a,4));return new Qg(o,o.selector,i)}static from(a){return a instanceof n?a:"string"==typeof a?new n(JSON.parse(a)):"function"==typeof a.formatJson?new n(a.formatJson()):"function"==typeof a.format?new n(a.format("json")):new n(a)}};_u=new WeakMap;Tu=new WeakMap;ju=new WeakMap;Iu=new WeakMap;Pu=new WeakSet;Ou=function(n,a,o){if(isHexString(n)){const a=n.toLowerCase();for(const n of __privateGet(this,ju).values())if(a===n.selector)return n;return null}if(-1===n.indexOf("(")){const i=[];for(const[a,o]of __privateGet(this,ju))a.split("(")[0]===n&&i.push(o);if(a){const n=a.length>0?a[a.length-1]:null;let o=a.length;let u=!0;if(Op.isTyped(n)&&"overrides"===n.type){u=!1;o--}for(let a=i.length-1;a>=0;a--){const n=i[a].inputs.length;n===o||u&&n===o-1||i.splice(a,1)}for(let d=i.length-1;d>=0;d--){const n=i[d].inputs;for(let o=0;o<a.length;o++)if(Op.isTyped(a[o])){if(o>=n.length){if("overrides"===a[o].type)continue;i.splice(d,1);break}if(a[o].type!==n[o].baseType){i.splice(d,1);break}}}}if(1===i.length&&a&&a.length!==i[0].inputs.length){const n=a[a.length-1];(null==n||Array.isArray(n)||"object"!=typeof n)&&i.splice(0,1)}if(0===i.length)return null;if(i.length>1&&o){const a=i.map(n=>JSON.stringify(n.format())).join(", ");assertArgument(!1,`ambiguous function description (i.e. matches ${a})`,"key",n)}return i[0]}const i=__privateGet(this,ju).get($g.from(n).format());return i||null};Ru=function(n,a,o){if(isHexString(n)){const a=n.toLowerCase();for(const n of __privateGet(this,Tu).values())if(a===n.topicHash)return n;return null}if(-1===n.indexOf("(")){const i=[];for(const[a,o]of __privateGet(this,Tu))a.split("(")[0]===n&&i.push(o);if(a){for(let n=i.length-1;n>=0;n--)i[n].inputs.length<a.length&&i.splice(n,1);for(let n=i.length-1;n>=0;n--){const o=i[n].inputs;for(let u=0;u<a.length;u++)if(Op.isTyped(a[u])&&a[u].type!==o[u].baseType){i.splice(n,1);break}}}if(0===i.length)return null;if(i.length>1&&o){const a=i.map(n=>JSON.stringify(n.format())).join(", ");assertArgument(!1,`ambiguous event description (i.e. matches ${a})`,"key",n)}return i[0]}const i=__privateGet(this,Tu).get(Fg.from(n).format());return i||null};let ry=ny;const sy=BigInt(0);function getValue(n){return null==n?null:n}function toJson(n){return null==n?null:n.toString()}let ay=class{constructor(n,a,o){__publicField$1(this,"gasPrice");__publicField$1(this,"maxFeePerGas");__publicField$1(this,"maxPriorityFeePerGas");defineProperties(this,{gasPrice:getValue(n),maxFeePerGas:getValue(a),maxPriorityFeePerGas:getValue(o)})}toJSON(){const{gasPrice:n,maxFeePerGas:a,maxPriorityFeePerGas:o}=this;return{_type:"FeeData",gasPrice:toJson(n),maxFeePerGas:toJson(a),maxPriorityFeePerGas:toJson(o)}}};function copyRequest(n){const a={};n.to&&(a.to=n.to);n.from&&(a.from=n.from);n.data&&(a.data=hexlify(n.data));const o="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const u of o)u in n&&null!=n[u]&&(a[u]=getBigInt(n[u],`request.${u}`));const i="type,nonce".split(/,/);for(const u of i)u in n&&null!=n[u]&&(a[u]=getNumber(n[u],`request.${u}`));n.accessList&&(a.accessList=accessListify(n.accessList));n.authorizationList&&(a.authorizationList=n.authorizationList.slice());"blockTag"in n&&(a.blockTag=n.blockTag);"enableCcipRead"in n&&(a.enableCcipRead=!!n.enableCcipRead);"customData"in n&&(a.customData=n.customData);"blobVersionedHashes"in n&&n.blobVersionedHashes&&(a.blobVersionedHashes=n.blobVersionedHashes.slice());"kzg"in n&&(a.kzg=n.kzg);"blobs"in n&&n.blobs&&(a.blobs=n.blobs.map(n=>isBytesLike(n)?hexlify(n):Object.assign({},n)));return a}let oy=class{constructor(n,a){__publicField$1(this,"provider");__publicField$1(this,"number");__publicField$1(this,"hash");__publicField$1(this,"timestamp");__publicField$1(this,"parentHash");__publicField$1(this,"parentBeaconBlockRoot");__publicField$1(this,"nonce");__publicField$1(this,"difficulty");__publicField$1(this,"gasLimit");__publicField$1(this,"gasUsed");__publicField$1(this,"stateRoot");__publicField$1(this,"receiptsRoot");__publicField$1(this,"blobGasUsed");__publicField$1(this,"excessBlobGas");__publicField$1(this,"miner");__publicField$1(this,"prevRandao");__publicField$1(this,"extraData");__publicField$1(this,"baseFeePerGas");__privateAdd(this,Bu);__privateSet(this,Bu,n.transactions.map(n=>"string"!=typeof n?new uy(n,a):n));defineProperties(this,{provider:a,hash:getValue(n.hash),number:n.number,timestamp:n.timestamp,parentHash:n.parentHash,parentBeaconBlockRoot:n.parentBeaconBlockRoot,nonce:n.nonce,difficulty:n.difficulty,gasLimit:n.gasLimit,gasUsed:n.gasUsed,blobGasUsed:n.blobGasUsed,excessBlobGas:n.excessBlobGas,miner:n.miner,prevRandao:getValue(n.prevRandao),extraData:n.extraData,baseFeePerGas:getValue(n.baseFeePerGas),stateRoot:n.stateRoot,receiptsRoot:n.receiptsRoot})}get transactions(){return __privateGet(this,Bu).map(n=>"string"==typeof n?n:n.hash)}get prefetchedTransactions(){const n=__privateGet(this,Bu).slice();if(0===n.length)return[];assert("object"==typeof n[0],"transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"});return n}toJSON(){const{baseFeePerGas:n,difficulty:a,extraData:o,gasLimit:i,gasUsed:u,hash:d,miner:m,prevRandao:g,nonce:y,number:v,parentHash:x,parentBeaconBlockRoot:N,stateRoot:k,receiptsRoot:E,timestamp:S,transactions:A}=this;return{_type:"Block",baseFeePerGas:toJson(n),difficulty:toJson(a),extraData:o,gasLimit:toJson(i),gasUsed:toJson(u),blobGasUsed:toJson(this.blobGasUsed),excessBlobGas:toJson(this.excessBlobGas),hash:d,miner:m,prevRandao:g,nonce:y,number:v,parentHash:x,timestamp:S,parentBeaconBlockRoot:N,stateRoot:k,receiptsRoot:E,transactions:A}}[Symbol.iterator](){let n=0;const a=this.transactions;return{next:()=>n<this.length?{value:a[n++],done:!1}:{value:void 0,done:!0}}}get length(){return __privateGet(this,Bu).length}get date(){return null==this.timestamp?null:new Date(1e3*this.timestamp)}async getTransaction(n){let a;if("number"==typeof n)a=__privateGet(this,Bu)[n];else{const o=n.toLowerCase();for(const n of __privateGet(this,Bu)){if("string"==typeof n){if(n!==o)continue;a=n;break}if(n.hash===o){a=n;break}}}if(null==a)throw new Error("no such tx");return"string"==typeof a?await this.provider.getTransaction(a):a}getPrefetchedTransaction(n){const a=this.prefetchedTransactions;if("number"==typeof n)return a[n];n=n.toLowerCase();for(const o of a)if(o.hash===n)return o;assertArgument(!1,"no matching transaction","indexOrHash",n)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return createOrphanedBlockFilter(this)}};Bu=new WeakMap;let iy=class{constructor(n,a){__publicField$1(this,"provider");__publicField$1(this,"transactionHash");__publicField$1(this,"blockHash");__publicField$1(this,"blockNumber");__publicField$1(this,"removed");__publicField$1(this,"address");__publicField$1(this,"data");__publicField$1(this,"topics");__publicField$1(this,"index");__publicField$1(this,"transactionIndex");this.provider=a;const o=Object.freeze(n.topics.slice());defineProperties(this,{transactionHash:n.transactionHash,blockHash:n.blockHash,blockNumber:n.blockNumber,removed:n.removed,address:n.address,data:n.data,topics:o,index:n.index,transactionIndex:n.transactionIndex})}toJSON(){const{address:n,blockHash:a,blockNumber:o,data:i,index:u,removed:d,topics:m,transactionHash:g,transactionIndex:y}=this;return{_type:"log",address:n,blockHash:a,blockNumber:o,data:i,index:u,removed:d,topics:m,transactionHash:g,transactionIndex:y}}async getBlock(){const n=await this.provider.getBlock(this.blockHash);assert(!!n,"failed to find transaction","UNKNOWN_ERROR",{});return n}async getTransaction(){const n=await this.provider.getTransaction(this.transactionHash);assert(!!n,"failed to find transaction","UNKNOWN_ERROR",{});return n}async getTransactionReceipt(){const n=await this.provider.getTransactionReceipt(this.transactionHash);assert(!!n,"failed to find transaction receipt","UNKNOWN_ERROR",{});return n}removedEvent(){return createRemovedLogFilter(this)}};let cy=class{constructor(n,a){__publicField$1(this,"provider");__publicField$1(this,"to");__publicField$1(this,"from");__publicField$1(this,"contractAddress");__publicField$1(this,"hash");__publicField$1(this,"index");__publicField$1(this,"blockHash");__publicField$1(this,"blockNumber");__publicField$1(this,"logsBloom");__publicField$1(this,"gasUsed");__publicField$1(this,"blobGasUsed");__publicField$1(this,"cumulativeGasUsed");__publicField$1(this,"gasPrice");__publicField$1(this,"blobGasPrice");__publicField$1(this,"type");__publicField$1(this,"status");__publicField$1(this,"root");__privateAdd(this,Mu);__privateSet(this,Mu,Object.freeze(n.logs.map(n=>new iy(n,a))));let o=sy;null!=n.effectiveGasPrice?o=n.effectiveGasPrice:null!=n.gasPrice&&(o=n.gasPrice);defineProperties(this,{provider:a,to:n.to,from:n.from,contractAddress:n.contractAddress,hash:n.hash,index:n.index,blockHash:n.blockHash,blockNumber:n.blockNumber,logsBloom:n.logsBloom,gasUsed:n.gasUsed,cumulativeGasUsed:n.cumulativeGasUsed,blobGasUsed:n.blobGasUsed,gasPrice:o,blobGasPrice:n.blobGasPrice,type:n.type,status:n.status,root:n.root})}get logs(){return __privateGet(this,Mu)}toJSON(){const{to:n,from:a,contractAddress:o,hash:i,index:u,blockHash:d,blockNumber:m,logsBloom:g,logs:y,status:v,root:x}=this;return{_type:"TransactionReceipt",blockHash:d,blockNumber:m,contractAddress:o,cumulativeGasUsed:toJson(this.cumulativeGasUsed),from:a,gasPrice:toJson(this.gasPrice),blobGasUsed:toJson(this.blobGasUsed),blobGasPrice:toJson(this.blobGasPrice),gasUsed:toJson(this.gasUsed),hash:i,index:u,logs:y,logsBloom:g,root:x,status:v,to:n}}get length(){return this.logs.length}[Symbol.iterator](){let n=0;return{next:()=>n<this.length?{value:this.logs[n++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const n=await this.provider.getBlock(this.blockHash);if(null==n)throw new Error("TODO");return n}async getTransaction(){const n=await this.provider.getTransaction(this.hash);if(null==n)throw new Error("TODO");return n}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return createRemovedTransactionFilter(this)}reorderedEvent(n){assert(!n||n.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"});return createReorderedTransactionFilter(this,n)}};Mu=new WeakMap;const ly=class n{constructor(n,a){__publicField$1(this,"provider");__publicField$1(this,"blockNumber");__publicField$1(this,"blockHash");__publicField$1(this,"index");__publicField$1(this,"hash");__publicField$1(this,"type");__publicField$1(this,"to");__publicField$1(this,"from");__publicField$1(this,"nonce");__publicField$1(this,"gasLimit");__publicField$1(this,"gasPrice");__publicField$1(this,"maxPriorityFeePerGas");__publicField$1(this,"maxFeePerGas");__publicField$1(this,"maxFeePerBlobGas");__publicField$1(this,"data");__publicField$1(this,"value");__publicField$1(this,"chainId");__publicField$1(this,"signature");__publicField$1(this,"accessList");__publicField$1(this,"blobVersionedHashes");__publicField$1(this,"authorizationList");__privateAdd(this,zu);this.provider=a;this.blockNumber=null!=n.blockNumber?n.blockNumber:null;this.blockHash=null!=n.blockHash?n.blockHash:null;this.hash=n.hash;this.index=n.index;this.type=n.type;this.from=n.from;this.to=n.to||null;this.gasLimit=n.gasLimit;this.nonce=n.nonce;this.data=n.data;this.value=n.value;this.gasPrice=n.gasPrice;this.maxPriorityFeePerGas=null!=n.maxPriorityFeePerGas?n.maxPriorityFeePerGas:null;this.maxFeePerGas=null!=n.maxFeePerGas?n.maxFeePerGas:null;this.maxFeePerBlobGas=null!=n.maxFeePerBlobGas?n.maxFeePerBlobGas:null;this.chainId=n.chainId;this.signature=n.signature;this.accessList=null!=n.accessList?n.accessList:null;this.blobVersionedHashes=null!=n.blobVersionedHashes?n.blobVersionedHashes:null;this.authorizationList=null!=n.authorizationList?n.authorizationList:null;__privateSet(this,zu,-1)}toJSON(){const{blockNumber:n,blockHash:a,index:o,hash:i,type:u,to:d,from:m,nonce:g,data:y,signature:v,accessList:x,blobVersionedHashes:N}=this;return{_type:"TransactionResponse",accessList:x,blockNumber:n,blockHash:a,blobVersionedHashes:N,chainId:toJson(this.chainId),data:y,from:m,gasLimit:toJson(this.gasLimit),gasPrice:toJson(this.gasPrice),hash:i,maxFeePerGas:toJson(this.maxFeePerGas),maxPriorityFeePerGas:toJson(this.maxPriorityFeePerGas),maxFeePerBlobGas:toJson(this.maxFeePerBlobGas),nonce:g,signature:v,to:d,index:o,type:u,value:toJson(this.value)}}async getBlock(){let n=this.blockNumber;if(null==n){const a=await this.getTransaction();a&&(n=a.blockNumber)}if(null==n)return null;const a=this.provider.getBlock(n);if(null==a)throw new Error("TODO");return a}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(null==this.blockNumber){const{tx:n,blockNumber:a}=await resolveProperties({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return null==n||null==n.blockNumber?0:a-n.blockNumber+1}const n=await this.provider.getBlockNumber();return n-this.blockNumber+1}async wait(n,a){const o=null==n?1:n;const i=null==a?0:a;let u=__privateGet(this,zu);let d=-1;let m=-1===u;const checkReplacement=async()=>{if(m)return null;const{blockNumber:n,nonce:a}=await resolveProperties({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(a<this.nonce){u=n;return}if(m)return null;const i=await this.getTransaction();if(!i||null==i.blockNumber){if(-1===d){d=u-3;d<__privateGet(this,zu)&&(d=__privateGet(this,zu))}for(;d<=n;){if(m)return null;const a=await this.provider.getBlock(d,!0);if(null==a)return;for(const n of a)if(n===this.hash)return;for(let i=0;i<a.length;i++){const d=await a.getTransaction(i);if(d.from===this.from&&d.nonce===this.nonce){if(m)return null;const a=await this.provider.getTransactionReceipt(d.hash);if(null==a)return;if(n-a.blockNumber+1<o)return;let i="replaced";d.data===this.data&&d.to===this.to&&d.value===this.value?i="repriced":"0x"===d.data&&d.from===d.to&&d.value===sy&&(i="cancelled");assert(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===i||"cancelled"===i,reason:i,replacement:d.replaceableTransaction(u),hash:d.hash,receipt:a})}}d++}}};const checkReceipt=n=>{if(null==n||0!==n.status)return n;assert(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:n.to,from:n.from,data:""},receipt:n})};const g=await this.provider.getTransactionReceipt(this.hash);if(0===o)return checkReceipt(g);if(g){if(1===o||await g.confirmations()>=o)return checkReceipt(g)}else{await checkReplacement();if(0===o)return null}const y=new Promise((n,a)=>{const d=[];const cancel=()=>{d.forEach(n=>n())};d.push(()=>{m=!0});if(i>0){const n=setTimeout(()=>{cancel();a(makeError("wait for transaction timeout","TIMEOUT"))},i);d.push(()=>{clearTimeout(n)})}const txListener=async i=>{if(await i.confirmations()>=o){cancel();try{n(checkReceipt(i))}catch(u){a(u)}}};d.push(()=>{this.provider.off(this.hash,txListener)});this.provider.on(this.hash,txListener);if(u>=0){const replaceListener=async()=>{try{await checkReplacement()}catch(n){if(isError(n,"TRANSACTION_REPLACED")){cancel();a(n);return}}m||this.provider.once("block",replaceListener)};d.push(()=>{this.provider.off("block",replaceListener)});this.provider.once("block",replaceListener)}});return await y}isMined(){return null!=this.blockHash}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}removedEvent(){assert(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"});return createRemovedTransactionFilter(this)}reorderedEvent(n){assert(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"});assert(!n||n.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"});return createReorderedTransactionFilter(this,n)}replaceableTransaction(a){assertArgument(Number.isInteger(a)&&a>=0,"invalid startBlock","startBlock",a);const o=new n(this,this.provider);__privateSet(o,zu,a);return o}};zu=new WeakMap;let uy=ly;function createOrphanedBlockFilter(n){return{orphan:"drop-block",hash:n.hash,number:n.number}}function createReorderedTransactionFilter(n,a){return{orphan:"reorder-transaction",tx:n,other:a}}function createRemovedTransactionFilter(n){return{orphan:"drop-transaction",tx:n}}function createRemovedLogFilter(n){return{orphan:"drop-log",log:{transactionHash:n.transactionHash,blockHash:n.blockHash,blockNumber:n.blockNumber,address:n.address,data:n.data,topics:Object.freeze(n.topics.slice()),index:n.index}}}let dy=class extends iy{constructor(n,a,o){super(n,n.provider);__publicField$1(this,"interface");__publicField$1(this,"fragment");__publicField$1(this,"args");const i=a.decodeEventLog(o,n.data,n.topics);defineProperties(this,{args:i,fragment:o,interface:a})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}};let hy=class extends iy{constructor(n,a){super(n,n.provider);__publicField$1(this,"error");defineProperties(this,{error:a})}};let fy=class extends cy{constructor(n,a,o){super(o,a);__privateAdd(this,Fu);__privateSet(this,Fu,n)}get logs(){return super.logs.map(n=>{const a=n.topics.length?__privateGet(this,Fu).getEvent(n.topics[0]):null;if(a)try{return new dy(n,__privateGet(this,Fu),a)}catch(o){return new hy(n,o)}return n})}};Fu=new WeakMap;let py=class extends uy{constructor(n,a,o){super(o,a);__privateAdd(this,Lu);__privateSet(this,Lu,n)}async wait(n,a){const o=await super.wait(n,a);return null==o?null:new fy(__privateGet(this,Lu),this.provider,o)}};Lu=new WeakMap;let my=class extends gh{constructor(n,a,o,i){super(n,a,o);__publicField$1(this,"log");defineProperties(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}};let gy=class extends my{constructor(n,a,o,i,u){super(n,a,o,new dy(u,n.interface,i));const d=n.interface.decodeEventLog(i,this.log.data,this.log.topics);defineProperties(this,{args:d,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}};const yy=BigInt(0);function canCall(n){return n&&"function"==typeof n.call}function canEstimate(n){return n&&"function"==typeof n.estimateGas}function canResolve(n){return n&&"function"==typeof n.resolveName}function canSend(n){return n&&"function"==typeof n.sendTransaction}function getResolver(n){if(null!=n){if(canResolve(n))return n;if(n.provider)return n.provider}}let by=class{constructor(n,a,o){__privateAdd(this,Du);__publicField$1(this,"fragment");defineProperties(this,{fragment:a});if(a.inputs.length<o.length)throw new Error("too many arguments");const i=getRunner(n.runner,"resolveName");const u=canResolve(i)?i:null;__privateSet(this,Du,async function(){const i=await Promise.all(a.inputs.map((n,a)=>{const i=o[a];return null==i?null:n.walkAsync(o[a],(n,a)=>"address"===n?Array.isArray(a)?Promise.all(a.map(n=>resolveAddress(n,u))):resolveAddress(a,u):a)}));return n.interface.encodeFilterTopics(a,i)}())}getTopicFilter(){return __privateGet(this,Du)}};Du=new WeakMap;function getRunner(n,a){return null==n?null:"function"==typeof n[a]?n:n.provider&&"function"==typeof n.provider[a]?n.provider:null}function getProvider(n){return null==n?null:n.provider||null}async function copyOverrides(n,a){const o=Op.dereference(n,"overrides");assertArgument("object"==typeof o,"invalid overrides parameter","overrides",n);const i=copyRequest(o);assertArgument(null==i.to||(a||[]).indexOf("to")>=0,"cannot override to","overrides.to",i.to);assertArgument(null==i.data||(a||[]).indexOf("data")>=0,"cannot override data","overrides.data",i.data);i.from&&(i.from=i.from);return i}async function resolveArgs(n,a,o){const i=getRunner(n,"resolveName");const u=canResolve(i)?i:null;return await Promise.all(a.map((n,a)=>n.walkAsync(o[a],(n,a)=>{a=Op.dereference(a,n);return"address"===n?resolveAddress(a,u):a})))}function buildWrappedFallback(n){const populateTransaction=async function(a){const o=await copyOverrides(a,["data"]);o.to=await n.getAddress();o.from&&(o.from=await resolveAddress(o.from,getResolver(n.runner)));const i=n.interface;const u=getBigInt(o.value||yy,"overrides.value")===yy;const d="0x"===(o.data||"0x");!i.fallback||i.fallback.payable||!i.receive||d||u||assertArgument(!1,"cannot send data to receive or send value to non-payable fallback","overrides",a);assertArgument(i.fallback||d,"cannot send data to receive-only contract","overrides.data",o.data);const m=i.receive||i.fallback&&i.fallback.payable;assertArgument(m||u,"cannot send value to non-payable fallback","overrides.value",o.value);assertArgument(i.fallback||d,"cannot send data to receive-only contract","overrides.data",o.data);return o};const staticCall=async function(a){const o=getRunner(n.runner,"call");assert(canCall(o),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const i=await populateTransaction(a);try{return await o.call(i)}catch(u){if(isCallException(u)&&u.data)throw n.interface.makeError(u.data,i);throw u}};const send=async function(a){const o=n.runner;assert(canSend(o),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const i=await o.sendTransaction(await populateTransaction(a));const u=getProvider(n.runner);return new py(n.interface,u,i)};const estimateGas2=async function(a){const o=getRunner(n.runner,"estimateGas");assert(canEstimate(o),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"});return await o.estimateGas(await populateTransaction(a))};const method=async n=>await send(n);defineProperties(method,{_contract:n,estimateGas:estimateGas2,populateTransaction:populateTransaction,send:send,staticCall:staticCall});return method}function buildWrappedMethod(n,a){const getFragment=function(...o){const i=n.interface.getFunction(a,o);assert(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:a,args:o}});return i};const populateTransaction=async function(...a){const o=getFragment(...a);let i={};if(o.inputs.length+1===a.length){i=await copyOverrides(a.pop());i.from&&(i.from=await resolveAddress(i.from,getResolver(n.runner)))}if(o.inputs.length!==a.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const u=await resolveArgs(n.runner,o.inputs,a);return Object.assign({},i,await resolveProperties({to:n.getAddress(),data:n.interface.encodeFunctionData(o,u)}))};const staticCall=async function(...n){const a=await staticCallResult(...n);return 1===a.length?a[0]:a};const send=async function(...a){const o=n.runner;assert(canSend(o),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const i=await o.sendTransaction(await populateTransaction(...a));const u=getProvider(n.runner);return new py(n.interface,u,i)};const estimateGas2=async function(...a){const o=getRunner(n.runner,"estimateGas");assert(canEstimate(o),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"});return await o.estimateGas(await populateTransaction(...a))};const staticCallResult=async function(...a){const o=getRunner(n.runner,"call");assert(canCall(o),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const i=await populateTransaction(...a);let u="0x";try{u=await o.call(i)}catch(m){if(isCallException(m)&&m.data)throw n.interface.makeError(m.data,i);throw m}const d=getFragment(...a);return n.interface.decodeFunctionResult(d,u)};const method=async(...n)=>{const a=getFragment(...n);return a.constant?await staticCall(...n):await send(...n)};defineProperties(method,{name:n.interface.getFunctionName(a),_contract:n,_key:a,getFragment:getFragment,estimateGas:estimateGas2,populateTransaction:populateTransaction,send:send,staticCall:staticCall,staticCallResult:staticCallResult});Object.defineProperty(method,"fragment",{configurable:!1,enumerable:!0,get:()=>{const o=n.interface.getFunction(a);assert(o,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:a}});return o}});return method}function buildWrappedEvent(n,a){const getFragment=function(...o){const i=n.interface.getEvent(a,o);assert(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:a,args:o}});return i};const method=function(...a){return new by(n,getFragment(...a),a)};defineProperties(method,{name:n.interface.getEventName(a),_contract:n,_key:a,getFragment:getFragment});Object.defineProperty(method,"fragment",{configurable:!1,enumerable:!0,get:()=>{const o=n.interface.getEvent(a);assert(o,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:a}});return o}});return method}const vy=Symbol.for("_ethersInternal_contract");const wy=new WeakMap;function setInternal(n,a){wy.set(n[vy],a)}function getInternal(n){return wy.get(n[vy])}function isDeferred(n){return n&&"object"==typeof n&&"getTopicFilter"in n&&"function"==typeof n.getTopicFilter&&n.fragment}async function getSubInfo(n,a){let o;let i=null;if(Array.isArray(a)){const topicHashify=function(a){if(isHexString(a,32))return a;const o=n.interface.getEvent(a);assertArgument(o,"unknown fragment","name",a);return o.topicHash};o=a.map(n=>null==n?null:Array.isArray(n)?n.map(topicHashify):topicHashify(n))}else if("*"===a)o=[null];else if("string"==typeof a)if(isHexString(a,32))o=[a];else{i=n.interface.getEvent(a);assertArgument(i,"unknown fragment","event",a);o=[i.topicHash]}else if(isDeferred(a))o=await a.getTopicFilter();else if("fragment"in a){i=a.fragment;o=[i.topicHash]}else assertArgument(!1,"unknown event name","event",a);o=o.map(n=>{if(null==n)return null;if(Array.isArray(n)){const a=Array.from(new Set(n.map(n=>n.toLowerCase())).values());if(1===a.length)return a[0];a.sort();return a}return n.toLowerCase()});const u=o.map(n=>null==n?"null":Array.isArray(n)?n.join("|"):n).join("&");return{fragment:i,tag:u,topics:o}}async function hasSub(n,a){const{subs:o}=getInternal(n);return o.get((await getSubInfo(n,a)).tag)||null}async function getSub(n,a,o){const i=getProvider(n.runner);assert(i,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:a});const{fragment:u,tag:d,topics:m}=await getSubInfo(n,o);const{addr:g,subs:y}=getInternal(n);let v=y.get(d);if(!v){const a=g||n;const x={address:a,topics:m};const listener=a=>{let i=u;if(null==i)try{i=n.interface.getEvent(a.topics[0])}catch(d){}if(i){const d=i;const m=u?n.interface.decodeEventLog(u,a.data,a.topics):[];emit(n,o,m,i=>new gy(n,i,o,d,a))}else emit(n,o,[],i=>new my(n,i,o,a))};let N=[];const start=()=>{N.length||N.push(i.on(x,listener))};const stop=async()=>{if(0==N.length)return;let n=N;N=[];await Promise.all(n);i.off(x,listener)};v={tag:d,listeners:[],start:start,stop:stop};y.set(d,v)}return v}let xy=Promise.resolve();async function _emit(n,a,o,i){await xy;const u=await hasSub(n,a);if(!u)return!1;const d=u.listeners.length;u.listeners=u.listeners.filter(({listener:a,once:u})=>{const d=Array.from(o);i&&d.push(i(u?null:a));try{a.call(n,...d)}catch(m){}return!u});if(0===u.listeners.length){u.stop();getInternal(n).subs.delete(u.tag)}return d>0}async function emit(n,a,o,i){try{await xy}catch(d){}const u=_emit(n,a,o,i);xy=u;return await u}const Ny=["then"];$u=vy;const ky=class n{constructor(n,a,o,i){__publicField$1(this,"target");__publicField$1(this,"interface");__publicField$1(this,"runner");__publicField$1(this,"filters");__publicField$1(this,$u);__publicField$1(this,"fallback");assertArgument("string"==typeof n||isAddressable(n),"invalid value for Contract target","target",n);null==o&&(o=null);const u=ry.from(a);defineProperties(this,{target:n,runner:o,interface:u});Object.defineProperty(this,vy,{value:{}});let d;let m=null;let g=null;if(i){const n=getProvider(o);g=new py(this.interface,n,i)}let y=new Map;if("string"==typeof n)if(isHexString(n)){m=n;d=Promise.resolve(n)}else{const a=getRunner(o,"resolveName");if(!canResolve(a))throw makeError("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});d=a.resolveName(n).then(a=>{if(null==a)throw makeError("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:n});getInternal(this).addr=a;return a})}else d=n.getAddress().then(n=>{if(null==n)throw new Error("TODO");getInternal(this).addr=n;return n});setInternal(this,{addrPromise:d,addr:m,deployTx:g,subs:y});const v=new Proxy({},{get:(n,a,o)=>{if("symbol"==typeof a||Ny.indexOf(a)>=0)return Reflect.get(n,a,o);try{return this.getEvent(a)}catch(i){if(!isError(i,"INVALID_ARGUMENT")||"key"!==i.argument)throw i}},has:(n,a)=>Ny.indexOf(a)>=0?Reflect.has(n,a):Reflect.has(n,a)||this.interface.hasEvent(String(a))});defineProperties(this,{filters:v});defineProperties(this,{fallback:u.receive||u.fallback?buildWrappedFallback(this):null});return new Proxy(this,{get:(n,a,o)=>{if("symbol"==typeof a||a in n||Ny.indexOf(a)>=0)return Reflect.get(n,a,o);try{return n.getFunction(a)}catch(i){if(!isError(i,"INVALID_ARGUMENT")||"key"!==i.argument)throw i}},has:(n,a)=>"symbol"==typeof a||a in n||Ny.indexOf(a)>=0?Reflect.has(n,a):n.interface.hasFunction(a)})}connect(a){return new n(this.target,this.interface,a)}attach(a){return new n(a,this.interface,this.runner)}async getAddress(){return await getInternal(this).addrPromise}async getDeployedCode(){const n=getProvider(this.runner);assert(n,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const a=await n.getCode(await this.getAddress());return"0x"===a?null:a}async waitForDeployment(){const n=this.deploymentTransaction();if(n){await n.wait();return this}const a=await this.getDeployedCode();if(null!=a)return this;const o=getProvider(this.runner);assert(null!=o,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"});return new Promise((n,a)=>{const checkCode=async()=>{try{const a=await this.getDeployedCode();if(null!=a)return n(this);o.once("block",checkCode)}catch(i){a(i)}};checkCode()})}deploymentTransaction(){return getInternal(this).deployTx}getFunction(n){"string"!=typeof n&&(n=n.format());const a=buildWrappedMethod(this,n);return a}getEvent(n){"string"!=typeof n&&(n=n.format());return buildWrappedEvent(this,n)}async queryTransaction(n){throw new Error("@TODO")}async queryFilter(n,a,o){null==a&&(a=0);null==o&&(o="latest");const{addr:i,addrPromise:u}=getInternal(this);const d=i||await u;const{fragment:m,topics:g}=await getSubInfo(this,n);const y={address:d,topics:g,fromBlock:a,toBlock:o};const v=getProvider(this.runner);assert(v,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"});return(await v.getLogs(y)).map(n=>{let a=m;if(null==a)try{a=this.interface.getEvent(n.topics[0])}catch(o){}if(a)try{return new dy(n,this.interface,a)}catch(o){return new hy(n,o)}return new iy(n,v)})}async on(n,a){const o=await getSub(this,"on",n);o.listeners.push({listener:a,once:!1});o.start();return this}async once(n,a){const o=await getSub(this,"once",n);o.listeners.push({listener:a,once:!0});o.start();return this}async emit(n,...a){return await emit(this,n,a,null)}async listenerCount(n){if(n){const a=await hasSub(this,n);return a?a.listeners.length:0}const{subs:a}=getInternal(this);let o=0;for(const{listeners:i}of a.values())o+=i.length;return o}async listeners(n){if(n){const a=await hasSub(this,n);return a?a.listeners.map(({listener:n})=>n):[]}const{subs:a}=getInternal(this);let o=[];for(const{listeners:i}of a.values())o=o.concat(i.map(({listener:n})=>n));return o}async off(n,a){const o=await hasSub(this,n);if(!o)return this;if(a){const n=o.listeners.map(({listener:n})=>n).indexOf(a);n>=0&&o.listeners.splice(n,1)}if(null==a||0===o.listeners.length){o.stop();getInternal(this).subs.delete(o.tag)}return this}async removeAllListeners(n){if(n){const a=await hasSub(this,n);if(!a)return this;a.stop();getInternal(this).subs.delete(a.tag)}else{const{subs:n}=getInternal(this);for(const{tag:a,stop:o}of n.values()){o();n.delete(a)}}return this}async addListener(n,a){return await this.on(n,a)}async removeListener(n,a){return await this.off(n,a)}static buildClass(a){class o extends n{constructor(n,o=null){super(n,a,o)}}return o}static from(n,a,o){null==o&&(o=null);const i=new this(n,a,o);return i}};let Cy=ky;function _ContractBase(){return Cy}let Ey=class extends(_ContractBase()){};function getIpfsLink(n){n.match(/^ipfs:\/\/ipfs\//i)?n=n.substring(12):n.match(/^ipfs:\/\//i)?n=n.substring(7):assertArgument(!1,"unsupported IPFS format","link",n);return`https://gateway.ipfs.io/ipfs/${n}`}let Sy=class{constructor(n){__publicField$1(this,"name");defineProperties(this,{name:n})}connect(n){return this}supportsCoinType(n){return!1}async encodeAddress(n,a){throw new Error("unsupported coin")}async decodeAddress(n,a){throw new Error("unsupported coin")}};const Ay=new RegExp("^(ipfs)://(.*)$","i");const _y=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Ay,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];const Ty=class n{constructor(n,a,o){__privateAdd(this,Hu);__publicField$1(this,"provider");__publicField$1(this,"address");__publicField$1(this,"name");__privateAdd(this,Uu);__privateAdd(this,Wu);defineProperties(this,{provider:n,address:a,name:o});__privateSet(this,Uu,null);__privateSet(this,Wu,new Ey(a,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],n))}async supportsWildcard(){null==__privateGet(this,Uu)&&__privateSet(this,Uu,(async()=>{try{return await __privateGet(this,Wu).supportsInterface("0x9061b923")}catch(n){if(isError(n,"CALL_EXCEPTION"))return!1;__privateSet(this,Uu,null);throw n}})());return await __privateGet(this,Uu)}async getAddress(n){null==n&&(n=60);if(60===n)try{const n=await __privateMethod(this,Hu,qu).call(this,"addr(bytes32)");return null==n||n===hp?null:n}catch(u){if(isError(u,"CALL_EXCEPTION"))return null;throw u}if(n>=0&&n<2147483648){let a=n+2147483648;const o=await __privateMethod(this,Hu,qu).call(this,"addr(bytes32,uint)",[a]);if(isHexString(o,20))return getAddress$1(o)}let a=null;for(const d of this.provider.plugins)if(d instanceof Sy&&d.supportsCoinType(n)){a=d;break}if(null==a)return null;const o=await __privateMethod(this,Hu,qu).call(this,"addr(bytes32,uint)",[n]);if(null==o||"0x"===o)return null;const i=await a.decodeAddress(n,o);if(null!=i)return i;assert(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${n})`,info:{coinType:n,data:o}})}async getText(n){const a=await __privateMethod(this,Hu,qu).call(this,"text(bytes32,string)",[n]);return null==a||"0x"===a?null:a}async getContentHash(){const n=await __privateMethod(this,Hu,qu).call(this,"contenthash(bytes32)");if(null==n||"0x"===n)return null;const a=n.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(a){const n="e3010170"===a[1]?"ipfs":"ipns";const o=parseInt(a[4],16);if(a[5].length===2*o)return`${n}://${encodeBase58("0x"+a[2])}`}const o=n.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(o&&64===o[1].length)return`bzz://${o[1]}`;assert(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:n}})}async getAvatar(){const n=await this._getAvatar();return n.url}async _getAvatar(){const n=[{type:"name",value:this.name}];try{const i=await this.getText("avatar");if(null==i){n.push({type:"!avatar",value:""});return{url:null,linkage:n}}n.push({type:"avatar",value:i});for(let u=0;u<_y.length;u++){const d=i.match(_y[u]);if(null==d)continue;const m=d[1].toLowerCase();switch(m){case"https":case"data":n.push({type:"url",value:i});return{linkage:n,url:i};case"ipfs":{const a=getIpfsLink(i);n.push({type:"ipfs",value:i});n.push({type:"url",value:a});return{linkage:n,url:a}}case"erc721":case"erc1155":{const u="erc721"===m?"tokenURI(uint256)":"uri(uint256)";n.push({type:m,value:i});const g=await this.getAddress();if(null==g){n.push({type:"!owner",value:""});return{url:null,linkage:n}}const y=(d[2]||"").split("/");if(2!==y.length){n.push({type:`!${m}caip`,value:d[2]||""});return{url:null,linkage:n}}const v=y[1];const x=new Ey(y[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if("erc721"===m){const a=await x.ownerOf(v);if(g!==a){n.push({type:"!owner",value:a});return{url:null,linkage:n}}n.push({type:"owner",value:a})}else if("erc1155"===m){const a=await x.balanceOf(g,v);if(!a){n.push({type:"!balance",value:"0"});return{url:null,linkage:n}}n.push({type:"balance",value:a.toString()})}let N=await x[u](v);if(null==N||"0x"===N){n.push({type:"!metadata-url",value:""});return{url:null,linkage:n}}n.push({type:"metadata-url-base",value:N});if("erc1155"===m){N=N.replace("{id}",toBeHex(v,32).substring(2));n.push({type:"metadata-url-expanded",value:N})}N.match(/^ipfs:/i)&&(N=getIpfsLink(N));n.push({type:"metadata-url",value:N});let k={};const E=await new _h(N).send();E.assertOk();try{k=E.bodyJson}catch(a){try{n.push({type:"!metadata",value:E.bodyText})}catch(o){const a=E.body;a&&n.push({type:"!metadata",value:hexlify(a)});return{url:null,linkage:n}}return{url:null,linkage:n}}if(!k){n.push({type:"!metadata",value:""});return{url:null,linkage:n}}n.push({type:"metadata",value:JSON.stringify(k)});let S=k.image;if("string"!=typeof S){n.push({type:"!imageUrl",value:""});return{url:null,linkage:n}}if(S.match(/^(https:\/\/|data:)/i));else{const a=S.match(Ay);if(null==a){n.push({type:"!imageUrl-ipfs",value:S});return{url:null,linkage:n}}n.push({type:"imageUrl-ipfs",value:S});S=getIpfsLink(S)}n.push({type:"url",value:S});return{linkage:n,url:S}}}}}catch(a){}return{linkage:n,url:null}}static async getEnsAddress(n){const a=await n.getNetwork();const o=a.getPlugin("org.ethers.plugins.network.Ens");assert(o,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:a}});return o.address}static async fromName(a,o){var i;let u=o;for(;;){if(""===u||"."===u)return null;if("eth"!==o&&"eth"===u)return null;const d=await __privateMethod(i=n,Gu,Vu).call(i,a,u);if(null!=d){const i=new n(a,d,o);return u===o||await i.supportsWildcard()?i:null}u=u.split(".").slice(1).join(".")}}};Uu=new WeakMap;Wu=new WeakMap;Hu=new WeakSet;qu=async function(n,a){a=(a||[]).slice();const o=__privateGet(this,Wu).interface;a.unshift(namehash(this.name));let i=null;if(await this.supportsWildcard()){i=o.getFunction(n);assert(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:n}});a=[dnsEncode(this.name,255),o.encodeFunctionData(i,a)];n="resolve(bytes,bytes)"}a.push({enableCcipRead:!0});try{const u=await __privateGet(this,Wu)[n](...a);return i?o.decodeFunctionResult(i,u)[0]:u}catch(u){if(!isError(u,"CALL_EXCEPTION"))throw u}return null};Gu=new WeakSet;Vu=async function(n,a){const o=await Ty.getEnsAddress(n);try{const i=new Ey(o,["function resolver(bytes32) view returns (address)"],n);const u=await i.resolver(namehash(a),{enableCcipRead:!0});return u===hp?null:u}catch(i){throw i}return null};__privateAdd(Ty,Gu);let jy=Ty;const Iy=BigInt(0);function allowNull(n,a){return function(o){return null==o?a:n(o)}}function arrayOf(n,a){return o=>{if(a&&null==o)return null;if(!Array.isArray(o))throw new Error("not an array");return o.map(a=>n(a))}}function object(n,a){return o=>{const i={};for(const d in n){let m=d;if(a&&d in a&&!(m in o))for(const n of a[d])if(n in o){m=n;break}try{const a=n[d](o[m]);void 0!==a&&(i[d]=a)}catch(u){const n=u instanceof Error?u.message:"not-an-error";assert(!1,`invalid value for value.${d} (${n})`,"BAD_DATA",{value:o})}}return i}}function formatBoolean(n){switch(n){case!0:case"true":return!0;case!1:case"false":return!1}assertArgument(!1,`invalid boolean; ${JSON.stringify(n)}`,"value",n)}function formatData(n){assertArgument(isHexString(n,!0),"invalid data","value",n);return n}function formatHash(n){assertArgument(isHexString(n,32),"invalid hash","value",n);return n}const Py=object({address:getAddress$1,blockHash:formatHash,blockNumber:getNumber,data:formatData,index:getNumber,removed:allowNull(formatBoolean,!1),topics:arrayOf(formatHash),transactionHash:formatHash,transactionIndex:getNumber},{index:["logIndex"]});function formatLog(n){return Py(n)}const Oy=object({hash:allowNull(formatHash),parentHash:formatHash,parentBeaconBlockRoot:allowNull(formatHash,null),number:getNumber,timestamp:getNumber,nonce:allowNull(formatData),difficulty:getBigInt,gasLimit:getBigInt,gasUsed:getBigInt,stateRoot:allowNull(formatHash,null),receiptsRoot:allowNull(formatHash,null),blobGasUsed:allowNull(getBigInt,null),excessBlobGas:allowNull(getBigInt,null),miner:allowNull(getAddress$1),prevRandao:allowNull(formatHash,null),extraData:formatData,baseFeePerGas:allowNull(getBigInt)},{prevRandao:["mixHash"]});function formatBlock(n){const a=Oy(n);a.transactions=n.transactions.map(n=>"string"==typeof n?n:formatTransactionResponse(n));return a}const Ry=object({transactionIndex:getNumber,blockNumber:getNumber,transactionHash:formatHash,address:getAddress$1,topics:arrayOf(formatHash),data:formatData,index:getNumber,blockHash:formatHash},{index:["logIndex"]});function formatReceiptLog(n){return Ry(n)}const By=object({to:allowNull(getAddress$1,null),from:allowNull(getAddress$1,null),contractAddress:allowNull(getAddress$1,null),index:getNumber,root:allowNull(hexlify),gasUsed:getBigInt,blobGasUsed:allowNull(getBigInt,null),logsBloom:allowNull(formatData),blockHash:formatHash,hash:formatHash,logs:arrayOf(formatReceiptLog),blockNumber:getNumber,cumulativeGasUsed:getBigInt,effectiveGasPrice:allowNull(getBigInt),blobGasPrice:allowNull(getBigInt,null),status:allowNull(getNumber),type:allowNull(getNumber,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function formatTransactionReceipt(n){return By(n)}function formatTransactionResponse(n){n.to&&getBigInt(n.to)===Iy&&(n.to="0x0000000000000000000000000000000000000000");const a=object({hash:formatHash,index:allowNull(getNumber,void 0),type:n=>"0x"===n||null==n?0:getNumber(n),accessList:allowNull(accessListify,null),blobVersionedHashes:allowNull(arrayOf(formatHash,!0),null),authorizationList:allowNull(arrayOf(n=>{let a;if(n.signature)a=n.signature;else{let o=n.yParity;"0x1b"===o?o=0:"0x1c"===o&&(o=1);a=Object.assign({},n,{yParity:o})}return{address:getAddress$1(n.address),chainId:getBigInt(n.chainId),nonce:getBigInt(n.nonce),signature:Np.from(a)}},!1),null),blockHash:allowNull(formatHash,null),blockNumber:allowNull(getNumber,null),transactionIndex:allowNull(getNumber,null),from:getAddress$1,gasPrice:allowNull(getBigInt),maxPriorityFeePerGas:allowNull(getBigInt),maxFeePerGas:allowNull(getBigInt),maxFeePerBlobGas:allowNull(getBigInt,null),gasLimit:getBigInt,to:allowNull(getAddress$1,null),value:getBigInt,nonce:getNumber,data:formatData,creates:allowNull(getAddress$1,null),chainId:allowNull(getBigInt,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(n);null==a.to&&null==a.creates&&(a.creates=getCreateAddress(a));1!==n.type&&2!==n.type||null!=n.accessList||(a.accessList=[]);n.signature?a.signature=Np.from(n.signature):a.signature=Np.from(n);if(null==a.chainId){const n=a.signature.legacyChainId;null!=n&&(a.chainId=n)}a.blockHash&&getBigInt(a.blockHash)===Iy&&(a.blockHash=null);return a}const My="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";let zy=class n{constructor(n){__publicField$1(this,"name");defineProperties(this,{name:n})}clone(){return new n(this.name)}};let Fy=class n extends zy{constructor(n,a){null==n&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);__publicField$1(this,"effectiveBlock");__publicField$1(this,"txBase");__publicField$1(this,"txCreate");__publicField$1(this,"txDataZero");__publicField$1(this,"txDataNonzero");__publicField$1(this,"txAccessListStorageKey");__publicField$1(this,"txAccessListAddress");const o={effectiveBlock:n};function set(n,i){let u=(a||{})[n];null==u&&(u=i);assertArgument("number"==typeof u,`invalud value for ${n}`,"costs",a);o[n]=u}set("txBase",21e3);set("txCreate",32e3);set("txDataZero",4);set("txDataNonzero",16);set("txAccessListStorageKey",1900);set("txAccessListAddress",2400);defineProperties(this,o)}clone(){return new n(this.effectiveBlock,this)}};let Ly=class n extends zy{constructor(n,a){super("org.ethers.plugins.network.Ens");__publicField$1(this,"address");__publicField$1(this,"targetNetwork");defineProperties(this,{address:n||My,targetNetwork:null==a?1:a})}clone(){return new n(this.address,this.targetNetwork)}};let Dy=class extends zy{constructor(n,a){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");__privateAdd(this,Ku);__privateAdd(this,Zu);__privateSet(this,Ku,n);__privateSet(this,Zu,a)}get url(){return __privateGet(this,Ku)}get processFunc(){return __privateGet(this,Zu)}clone(){return this}};Ku=new WeakMap;Zu=new WeakMap;const $y=new Map;const Uy=class n{constructor(n,a){__privateAdd(this,Yu);__privateAdd(this,Ju);__privateAdd(this,Qu);__privateSet(this,Yu,n);__privateSet(this,Ju,getBigInt(a));__privateSet(this,Qu,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return __privateGet(this,Yu)}set name(n){__privateSet(this,Yu,n)}get chainId(){return __privateGet(this,Ju)}set chainId(n){__privateSet(this,Ju,getBigInt(n,"chainId"))}matches(n){if(null==n)return!1;if("string"==typeof n){try{return this.chainId===getBigInt(n)}catch(a){}return this.name===n}if("number"==typeof n||"bigint"==typeof n){try{return this.chainId===getBigInt(n)}catch(a){}return!1}if("object"==typeof n){if(null!=n.chainId){try{return this.chainId===getBigInt(n.chainId)}catch(a){}return!1}return null!=n.name&&this.name===n.name}return!1}get plugins(){return Array.from(__privateGet(this,Qu).values())}attachPlugin(n){if(__privateGet(this,Qu).get(n.name))throw new Error(`cannot replace existing plugin: ${n.name} `);__privateGet(this,Qu).set(n.name,n.clone());return this}getPlugin(n){return __privateGet(this,Qu).get(n)||null}getPlugins(n){return this.plugins.filter(a=>a.name.split("#")[0]===n)}clone(){const a=new n(this.name,this.chainId);this.plugins.forEach(n=>{a.attachPlugin(n.clone())});return a}computeIntrinsicGas(n){const a=this.getPlugin("org.ethers.plugins.network.GasCost")||new Fy;let o=a.txBase;null==n.to&&(o+=a.txCreate);if(n.data)for(let i=2;i<n.data.length;i+=2)"00"===n.data.substring(i,i+2)?o+=a.txDataZero:o+=a.txDataNonzero;if(n.accessList){const i=accessListify(n.accessList);for(const n in i)o+=a.txAccessListAddress+a.txAccessListStorageKey*i[n].storageKeys.length}return o}static from(a){injectCommonNetworks();if(null==a)return n.from("mainnet");"number"==typeof a&&(a=BigInt(a));if("string"==typeof a||"bigint"==typeof a){const o=$y.get(a);if(o)return o();if("bigint"==typeof a)return new n("unknown",a);assertArgument(!1,"unknown network","network",a)}if("function"==typeof a.clone){const n=a.clone();return n}if("object"==typeof a){assertArgument("string"==typeof a.name&&"number"==typeof a.chainId,"invalid network object name or chainId","network",a);const o=new n(a.name,a.chainId);(a.ensAddress||null!=a.ensNetwork)&&o.attachPlugin(new Ly(a.ensAddress,a.ensNetwork));return o}assertArgument(!1,"invalid network","network",a)}static register(n,a){"number"==typeof n&&(n=BigInt(n));const o=$y.get(n);o&&assertArgument(!1,`conflicting network for ${JSON.stringify(o.name)}`,"nameOrChainId",n);$y.set(n,a)}};Yu=new WeakMap;Ju=new WeakMap;Qu=new WeakMap;let Wy=Uy;function parseUnits(n,a){const o=String(n);if(!o.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${n}`);const i=o.split(".");1===i.length&&i.push("");if(2!==i.length)throw new Error(`invalid gwei value: ${n}`);for(;i[1].length<a;)i[1]+="0";if(i[1].length>9){let n=BigInt(i[1].substring(0,9));i[1].substring(9).match(/^0+$/)||n++;i[1]=n.toString()}return BigInt(i[0]+i[1])}function getGasStationPlugin(n){return new Dy(n,async(n,a,o)=>{o.setHeader("User-Agent","ethers");let i;try{const[a,u]=await Promise.all([o.send(),n()]);i=a;const d=i.bodyJson.standard;const m={gasPrice:u.gasPrice,maxFeePerGas:parseUnits(d.maxFee,9),maxPriorityFeePerGas:parseUnits(d.maxPriorityFee,9)};return m}catch(u){assert(!1,`error encountered with polygon gas station (${JSON.stringify(o.url)})`,"SERVER_ERROR",{request:o,response:i,error:u})}})}let Hy=!1;function injectCommonNetworks(){if(!Hy){Hy=!0;registerEth("mainnet",1,{ensNetwork:1,altNames:["homestead"]});registerEth("ropsten",3,{ensNetwork:3});registerEth("rinkeby",4,{ensNetwork:4});registerEth("goerli",5,{ensNetwork:5});registerEth("kovan",42,{ensNetwork:42});registerEth("sepolia",11155111,{ensNetwork:11155111});registerEth("holesky",17e3,{ensNetwork:17e3});registerEth("classic",61,{});registerEth("classicKotti",6,{});registerEth("arbitrum",42161,{ensNetwork:1});registerEth("arbitrum-goerli",421613,{});registerEth("arbitrum-sepolia",421614,{});registerEth("base",8453,{ensNetwork:1});registerEth("base-goerli",84531,{});registerEth("base-sepolia",84532,{});registerEth("bnb",56,{ensNetwork:1});registerEth("bnbt",97,{});registerEth("linea",59144,{ensNetwork:1});registerEth("linea-goerli",59140,{});registerEth("linea-sepolia",59141,{});registerEth("matic",137,{ensNetwork:1,plugins:[getGasStationPlugin("https://gasstation.polygon.technology/v2")]});registerEth("matic-amoy",80002,{});registerEth("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[getGasStationPlugin("https://gasstation-testnet.polygon.technology/v2")]});registerEth("optimism",10,{ensNetwork:1,plugins:[]});registerEth("optimism-goerli",420,{});registerEth("optimism-sepolia",11155420,{});registerEth("xdai",100,{ensNetwork:1})}function registerEth(n,a,o){const func=function(){const i=new Wy(n,a);null!=o.ensNetwork&&i.attachPlugin(new Ly(null,o.ensNetwork));i.attachPlugin(new Fy);(o.plugins||[]).forEach(n=>{i.attachPlugin(n)});return i};Wy.register(n,func);Wy.register(a,func);o.altNames&&o.altNames.forEach(n=>{Wy.register(n,func)})}}function copy$2(n){return JSON.parse(JSON.stringify(n))}let qy=class{constructor(n){__privateAdd(this,rd);__privateAdd(this,Xu);__privateAdd(this,ed);__privateAdd(this,td);__privateAdd(this,nd);__privateSet(this,Xu,n);__privateSet(this,ed,null);__privateSet(this,td,4e3);__privateSet(this,nd,-2)}get pollingInterval(){return __privateGet(this,td)}set pollingInterval(n){__privateSet(this,td,n)}start(){if(!__privateGet(this,ed)){__privateSet(this,ed,__privateGet(this,Xu)._setTimeout(__privateMethod(this,rd,sd).bind(this),__privateGet(this,td)));__privateMethod(this,rd,sd).call(this)}}stop(){if(__privateGet(this,ed)){__privateGet(this,Xu)._clearTimeout(__privateGet(this,ed));__privateSet(this,ed,null)}}pause(n){this.stop();n&&__privateSet(this,nd,-2)}resume(){this.start()}};Xu=new WeakMap;ed=new WeakMap;td=new WeakMap;nd=new WeakMap;rd=new WeakSet;sd=async function(){try{const n=await __privateGet(this,Xu).getBlockNumber();if(-2===__privateGet(this,nd)){__privateSet(this,nd,n);return}if(n!==__privateGet(this,nd)){for(let a=__privateGet(this,nd)+1;a<=n;a++){if(null==__privateGet(this,ed))return;await __privateGet(this,Xu).emit("block",a)}__privateSet(this,nd,n)}}catch(n){}null!=__privateGet(this,ed)&&__privateSet(this,ed,__privateGet(this,Xu)._setTimeout(__privateMethod(this,rd,sd).bind(this),__privateGet(this,td)))};let Gy=class{constructor(n){__privateAdd(this,ad);__privateAdd(this,od);__privateAdd(this,id);__privateSet(this,ad,n);__privateSet(this,id,!1);__privateSet(this,od,n=>{this._poll(n,__privateGet(this,ad))})}async _poll(n,a){throw new Error("sub-classes must override this")}start(){if(!__privateGet(this,id)){__privateSet(this,id,!0);__privateGet(this,od).call(this,-2);__privateGet(this,ad).on("block",__privateGet(this,od))}}stop(){if(__privateGet(this,id)){__privateSet(this,id,!1);__privateGet(this,ad).off("block",__privateGet(this,od))}}pause(n){this.stop()}resume(){this.start()}};ad=new WeakMap;od=new WeakMap;id=new WeakMap;let Vy=class extends Gy{constructor(n,a){super(n);__privateAdd(this,cd);__privateAdd(this,ld);__privateSet(this,cd,a);__privateSet(this,ld,-2)}pause(n){n&&__privateSet(this,ld,-2);super.pause(n)}async _poll(n,a){const o=await a.getBlock(__privateGet(this,cd));if(null!=o)if(-2===__privateGet(this,ld))__privateSet(this,ld,o.number);else if(o.number>__privateGet(this,ld)){a.emit(__privateGet(this,cd),o.number);__privateSet(this,ld,o.number)}}};cd=new WeakMap;ld=new WeakMap;let Ky=class extends Gy{constructor(n,a){super(n);__privateAdd(this,ud);__privateSet(this,ud,copy$2(a))}async _poll(n,a){throw new Error("@TODO")}};ud=new WeakMap;let Zy=class extends Gy{constructor(n,a){super(n);__privateAdd(this,dd);__privateSet(this,dd,a)}async _poll(n,a){const o=await a.getTransactionReceipt(__privateGet(this,dd));o&&a.emit(__privateGet(this,dd),o)}};dd=new WeakMap;let Yy=class{constructor(n,a){__privateAdd(this,yd);__privateAdd(this,hd);__privateAdd(this,fd);__privateAdd(this,pd);__privateAdd(this,md);__privateAdd(this,gd);__privateSet(this,hd,n);__privateSet(this,fd,copy$2(a));__privateSet(this,pd,__privateMethod(this,yd,bd).bind(this));__privateSet(this,md,!1);__privateSet(this,gd,-2)}start(){if(!__privateGet(this,md)){__privateSet(this,md,!0);-2===__privateGet(this,gd)&&__privateGet(this,hd).getBlockNumber().then(n=>{__privateSet(this,gd,n)});__privateGet(this,hd).on("block",__privateGet(this,pd))}}stop(){if(__privateGet(this,md)){__privateSet(this,md,!1);__privateGet(this,hd).off("block",__privateGet(this,pd))}}pause(n){this.stop();n&&__privateSet(this,gd,-2)}resume(){this.start()}};hd=new WeakMap;fd=new WeakMap;pd=new WeakMap;md=new WeakMap;gd=new WeakMap;yd=new WeakSet;bd=async function(n){if(-2===__privateGet(this,gd))return;const a=copy$2(__privateGet(this,fd));a.fromBlock=__privateGet(this,gd)+1;a.toBlock=n;const o=await __privateGet(this,hd).getLogs(a);if(0!==o.length)for(const i of o){__privateGet(this,hd).emit(__privateGet(this,fd),i);__privateSet(this,gd,i.blockNumber)}else __privateGet(this,gd)<n-60&&__privateSet(this,gd,n-60)};const Jy=BigInt(2);const Qy=10;function isPromise(n){return n&&"function"==typeof n.then}function getTag(n,a){return n+":"+JSON.stringify(a,(n,a)=>{if(null==a)return"null";if("bigint"==typeof a)return`bigint:${a.toString()}`;if("string"==typeof a)return a.toLowerCase();if("object"==typeof a&&!Array.isArray(a)){const n=Object.keys(a);n.sort();return n.reduce((n,o)=>{n[o]=a[o];return n},{})}return a})}let Xy=class{constructor(n){__publicField$1(this,"name");defineProperties(this,{name:n})}start(){}stop(){}pause(n){}resume(){}};function copy$1(n){return JSON.parse(JSON.stringify(n))}function concisify(n){n=Array.from(new Set(n).values());n.sort();return n}async function getSubscription(n,a){if(null==n)throw new Error("invalid event");Array.isArray(n)&&(n={topics:n});if("string"==typeof n)switch(n){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:n,tag:n}}if(isHexString(n,32)){const a=n.toLowerCase();return{type:"transaction",tag:getTag("tx",{hash:a}),hash:a}}if(n.orphan){const a=n;return{type:"orphan",tag:getTag("orphan",a),filter:copy$1(a)}}if(n.address||n.topics){const o=n;const i={topics:(o.topics||[]).map(n=>null==n?null:Array.isArray(n)?concisify(n.map(n=>n.toLowerCase())):n.toLowerCase())};if(o.address){const n=[];const u=[];const addAddress=o=>{isHexString(o)?n.push(o):u.push((async()=>{n.push(await resolveAddress(o,a))})())};Array.isArray(o.address)?o.address.forEach(addAddress):addAddress(o.address);u.length&&await Promise.all(u);i.address=concisify(n.map(n=>n.toLowerCase()))}return{filter:i,tag:getTag("event",i),type:"event"}}assertArgument(!1,"unknown ProviderEvent","event",n)}function getTime(){return(new Date).getTime()}const eb={cacheTimeout:250,pollingInterval:4e3};let tb=class{constructor(n,a){__privateAdd(this,Id);__privateAdd(this,vd);__privateAdd(this,wd);__privateAdd(this,xd);__privateAdd(this,Nd);__privateAdd(this,kd);__privateAdd(this,Cd);__privateAdd(this,Ed);__privateAdd(this,Sd);__privateAdd(this,Ad);__privateAdd(this,_d);__privateAdd(this,Td);__privateAdd(this,jd);__privateSet(this,jd,Object.assign({},eb,a||{}));if("any"===n){__privateSet(this,Cd,!0);__privateSet(this,kd,null)}else if(n){const a=Wy.from(n);__privateSet(this,Cd,!1);__privateSet(this,kd,Promise.resolve(a));setTimeout(()=>{this.emit("network",a,null)},0)}else{__privateSet(this,Cd,!1);__privateSet(this,kd,null)}__privateSet(this,Sd,-1);__privateSet(this,Ed,new Map);__privateSet(this,vd,new Map);__privateSet(this,wd,new Map);__privateSet(this,xd,null);__privateSet(this,Nd,!1);__privateSet(this,Ad,1);__privateSet(this,_d,new Map);__privateSet(this,Td,!1)}get pollingInterval(){return __privateGet(this,jd).pollingInterval}get provider(){return this}get plugins(){return Array.from(__privateGet(this,wd).values())}attachPlugin(n){if(__privateGet(this,wd).get(n.name))throw new Error(`cannot replace existing plugin: ${n.name} `);__privateGet(this,wd).set(n.name,n.connect(this));return this}getPlugin(n){return __privateGet(this,wd).get(n)||null}get disableCcipRead(){return __privateGet(this,Td)}set disableCcipRead(n){__privateSet(this,Td,!!n)}async ccipReadFetch(n,a,o){if(this.disableCcipRead||0===o.length||null==n.to)return null;const i=n.to.toLowerCase();const u=a.toLowerCase();const d=[];for(let g=0;g<o.length;g++){const a=o[g];const y=a.replace("{sender}",i).replace("{data}",u);const v=new _h(y);-1===a.indexOf("{data}")&&(v.body={data:u,sender:i});this.emit("debug",{action:"sendCcipReadFetchRequest",request:v,index:g,urls:o});let x="unknown error";let N;try{N=await v.send()}catch(m){d.push(m.message);this.emit("debug",{action:"receiveCcipReadFetchError",request:v,result:{error:m}});continue}try{const n=N.bodyJson;if(n.data){this.emit("debug",{action:"receiveCcipReadFetchResult",request:v,result:n});return n.data}n.message&&(x=n.message);this.emit("debug",{action:"receiveCcipReadFetchError",request:v,result:n})}catch(m){}assert(N.statusCode<400||N.statusCode>=500,`response not found during CCIP fetch: ${x}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:n,info:{url:a,errorMessage:x}});d.push(x)}assert(!1,`error encountered during CCIP fetch: ${d.map(n=>JSON.stringify(n)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:n,info:{urls:o,errorMessages:d}})}_wrapBlock(n,a){return new oy(formatBlock(n),this)}_wrapLog(n,a){return new iy(formatLog(n),this)}_wrapTransactionReceipt(n,a){return new cy(formatTransactionReceipt(n),this)}_wrapTransactionResponse(n,a){return new uy(formatTransactionResponse(n),this)}_detectNetwork(){assert(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(n){assert(!1,`unsupported method: ${n.method}`,"UNSUPPORTED_OPERATION",{operation:n.method,info:n})}async getBlockNumber(){const n=getNumber(await __privateMethod(this,Id,Pd).call(this,{method:"getBlockNumber"}),"%response");__privateGet(this,Sd)>=0&&__privateSet(this,Sd,n);return n}_getAddress(n){return resolveAddress(n,this)}_getBlockTag(n){if(null==n)return"latest";switch(n){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return n}if(isHexString(n))return isHexString(n,32)?n:toQuantity(n);"bigint"==typeof n&&(n=getNumber(n,"blockTag"));if("number"==typeof n)return n>=0?toQuantity(n):__privateGet(this,Sd)>=0?toQuantity(__privateGet(this,Sd)+n):this.getBlockNumber().then(a=>toQuantity(a+n));assertArgument(!1,"invalid blockTag","blockTag",n)}_getFilter(n){const a=(n.topics||[]).map(n=>null==n?null:Array.isArray(n)?concisify(n.map(n=>n.toLowerCase())):n.toLowerCase());const o="blockHash"in n?n.blockHash:void 0;const resolve=(n,i,u)=>{let d;switch(n.length){case 0:break;case 1:d=n[0];break;default:n.sort();d=n}if(o&&(null!=i||null!=u))throw new Error("invalid filter");const m={};d&&(m.address=d);a.length&&(m.topics=a);i&&(m.fromBlock=i);u&&(m.toBlock=u);o&&(m.blockHash=o);return m};let i=[];if(n.address)if(Array.isArray(n.address))for(const m of n.address)i.push(this._getAddress(m));else i.push(this._getAddress(n.address));let u;"fromBlock"in n&&(u=this._getBlockTag(n.fromBlock));let d;"toBlock"in n&&(d=this._getBlockTag(n.toBlock));return i.filter(n=>"string"!=typeof n).length||null!=u&&"string"!=typeof u||null!=d&&"string"!=typeof d?Promise.all([Promise.all(i),u,d]).then(n=>resolve(n[0],n[1],n[2])):resolve(i,u,d)}_getTransactionRequest(n){const a=copyRequest(n);const o=[];["to","from"].forEach(n=>{if(null==a[n])return;const i=resolveAddress(a[n],this);isPromise(i)?o.push(async function(){a[n]=await i}()):a[n]=i});if(null!=a.blockTag){const n=this._getBlockTag(a.blockTag);isPromise(n)?o.push(async function(){a.blockTag=await n}()):a.blockTag=n}return o.length?async function(){await Promise.all(o);return a}():a}async getNetwork(){if(null==__privateGet(this,kd)){const n=(async()=>{try{const n=await this._detectNetwork();this.emit("network",n,null);return n}catch(a){__privateGet(this,kd)===n&&__privateSet(this,kd,null);throw a}})();__privateSet(this,kd,n);return(await n).clone()}const n=__privateGet(this,kd);const[a,o]=await Promise.all([n,this._detectNetwork()]);if(a.chainId!==o.chainId)if(__privateGet(this,Cd)){this.emit("network",o,a);__privateGet(this,kd)===n&&__privateSet(this,kd,Promise.resolve(o))}else assert(!1,`network changed: ${a.chainId} => ${o.chainId} `,"NETWORK_ERROR",{event:"changed"});return a.clone()}async getFeeData(){const n=await this.getNetwork();const getFeeDataFunc=async()=>{const{_block:a,gasPrice:o,priorityFee:i}=await resolveProperties({_block:__privateMethod(this,Id,Md).call(this,"latest",!1),gasPrice:(async()=>{try{const n=await __privateMethod(this,Id,Pd).call(this,{method:"getGasPrice"});return getBigInt(n,"%response")}catch(n){}return null})(),priorityFee:(async()=>{try{const n=await __privateMethod(this,Id,Pd).call(this,{method:"getPriorityFee"});return getBigInt(n,"%response")}catch(n){}return null})()});let u=null;let d=null;const m=this._wrapBlock(a,n);if(m&&m.baseFeePerGas){d=null!=i?i:BigInt("1000000000");u=m.baseFeePerGas*Jy+d}return new ay(o,u,d)};const a=n.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(a){const n=new _h(a.url);const o=await a.processFunc(getFeeDataFunc,this,n);return new ay(o.gasPrice,o.maxFeePerGas,o.maxPriorityFeePerGas)}return await getFeeDataFunc()}async estimateGas(n){let a=this._getTransactionRequest(n);isPromise(a)&&(a=await a);return getBigInt(await __privateMethod(this,Id,Pd).call(this,{method:"estimateGas",transaction:a}),"%response")}async call(n){const{tx:a,blockTag:o}=await resolveProperties({tx:this._getTransactionRequest(n),blockTag:this._getBlockTag(n.blockTag)});return await __privateMethod(this,Id,Rd).call(this,__privateMethod(this,Id,Od).call(this,a,o,n.enableCcipRead?0:-1))}async getBalance(n,a){return getBigInt(await __privateMethod(this,Id,Bd).call(this,{method:"getBalance"},n,a),"%response")}async getTransactionCount(n,a){return getNumber(await __privateMethod(this,Id,Bd).call(this,{method:"getTransactionCount"},n,a),"%response")}async getCode(n,a){return hexlify(await __privateMethod(this,Id,Bd).call(this,{method:"getCode"},n,a))}async getStorage(n,a,o){const i=getBigInt(a,"position");return hexlify(await __privateMethod(this,Id,Bd).call(this,{method:"getStorage",position:i},n,o))}async broadcastTransaction(n){const{blockNumber:a,hash:o,network:i}=await resolveProperties({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:n}),network:this.getNetwork()});const u=rm.from(n);if(u.hash!==o)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(u,i).replaceableTransaction(a)}async getBlock(n,a){const{network:o,params:i}=await resolveProperties({network:this.getNetwork(),params:__privateMethod(this,Id,Md).call(this,n,!!a)});return null==i?null:this._wrapBlock(i,o)}async getTransaction(n){const{network:a,params:o}=await resolveProperties({network:this.getNetwork(),params:__privateMethod(this,Id,Pd).call(this,{method:"getTransaction",hash:n})});return null==o?null:this._wrapTransactionResponse(o,a)}async getTransactionReceipt(n){const{network:a,params:o}=await resolveProperties({network:this.getNetwork(),params:__privateMethod(this,Id,Pd).call(this,{method:"getTransactionReceipt",hash:n})});if(null==o)return null;if(null==o.gasPrice&&null==o.effectiveGasPrice){const a=await __privateMethod(this,Id,Pd).call(this,{method:"getTransaction",hash:n});if(null==a)throw new Error("report this; could not find tx or effectiveGasPrice");o.effectiveGasPrice=a.gasPrice}return this._wrapTransactionReceipt(o,a)}async getTransactionResult(n){const{result:a}=await resolveProperties({network:this.getNetwork(),result:__privateMethod(this,Id,Pd).call(this,{method:"getTransactionResult",hash:n})});return null==a?null:hexlify(a)}async getLogs(n){let a=this._getFilter(n);isPromise(a)&&(a=await a);const{network:o,params:i}=await resolveProperties({network:this.getNetwork(),params:__privateMethod(this,Id,Pd).call(this,{method:"getLogs",filter:a})});return i.map(n=>this._wrapLog(n,o))}_getProvider(n){assert(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(n){return await jy.fromName(this,n)}async getAvatar(n){const a=await this.getResolver(n);return a?await a.getAvatar():null}async resolveName(n){const a=await this.getResolver(n);return a?await a.getAddress():null}async lookupAddress(n){n=getAddress$1(n);const a=namehash(n.substring(2).toLowerCase()+".addr.reverse");try{const o=await jy.getEnsAddress(this);const i=new Ey(o,["function resolver(bytes32) view returns (address)"],this);const u=await i.resolver(a);if(null==u||u===hp)return null;const d=new Ey(u,["function name(bytes32) view returns (string)"],this);const m=await d.name(a);const g=await this.resolveName(m);return g!==n?null:m}catch(o){if(isError(o,"BAD_DATA")&&"0x"===o.value)return null;if(isError(o,"CALL_EXCEPTION"))return null;throw o}return null}async waitForTransaction(n,a,o){const i=null!=a?a:1;return 0===i?this.getTransactionReceipt(n):new Promise(async(a,u)=>{let d=null;const listener=async o=>{try{const u=await this.getTransactionReceipt(n);if(null!=u&&o-u.blockNumber+1>=i){a(u);if(d){clearTimeout(d);d=null}return}}catch(u){console.log("EEE",u)}this.once("block",listener)};null!=o&&(d=setTimeout(()=>{if(null!=d){d=null;this.off("block",listener);u(makeError("timeout","TIMEOUT",{reason:"timeout"}))}},o));listener(await this.getBlockNumber())})}async waitForBlock(n){assert(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(n){const a=__privateGet(this,_d).get(n);if(a){a.timer&&clearTimeout(a.timer);__privateGet(this,_d).delete(n)}}_setTimeout(n,a){null==a&&(a=0);const o=__privateWrapper(this,Ad)._++;const func=()=>{__privateGet(this,_d).delete(o);n()};if(this.paused)__privateGet(this,_d).set(o,{timer:null,func:func,time:a});else{const n=setTimeout(func,a);__privateGet(this,_d).set(o,{timer:n,func:func,time:getTime()})}return o}_forEachSubscriber(n){for(const a of __privateGet(this,vd).values())n(a.subscriber)}_getSubscriber(n){switch(n.type){case"debug":case"error":case"network":return new Xy(n.type);case"block":{const n=new qy(this);n.pollingInterval=this.pollingInterval;return n}case"safe":case"finalized":return new Vy(this,n.type);case"event":return new Yy(this,n.filter);case"transaction":return new Zy(this,n.hash);case"orphan":return new Ky(this,n.filter)}throw new Error(`unsupported event: ${n.type}`)}_recoverSubscriber(n,a){for(const o of __privateGet(this,vd).values())if(o.subscriber===n){o.started&&o.subscriber.stop();o.subscriber=a;o.started&&a.start();null!=__privateGet(this,xd)&&a.pause(__privateGet(this,xd));break}}async on(n,a){const o=await __privateMethod(this,Id,Fd).call(this,n);o.listeners.push({listener:a,once:!1});if(!o.started){o.subscriber.start();o.started=!0;null!=__privateGet(this,xd)&&o.subscriber.pause(__privateGet(this,xd))}return this}async once(n,a){const o=await __privateMethod(this,Id,Fd).call(this,n);o.listeners.push({listener:a,once:!0});if(!o.started){o.subscriber.start();o.started=!0;null!=__privateGet(this,xd)&&o.subscriber.pause(__privateGet(this,xd))}return this}async emit(n,...a){const o=await __privateMethod(this,Id,zd).call(this,n,a);if(!o||0===o.listeners.length)return!1;const i=o.listeners.length;o.listeners=o.listeners.filter(({listener:o,once:i})=>{const u=new gh(this,i?null:o,n);try{o.call(this,...a,u)}catch(d){}return!i});if(0===o.listeners.length){o.started&&o.subscriber.stop();__privateGet(this,vd).delete(o.tag)}return i>0}async listenerCount(n){if(n){const a=await __privateMethod(this,Id,zd).call(this,n);return a?a.listeners.length:0}let a=0;for(const{listeners:o}of __privateGet(this,vd).values())a+=o.length;return a}async listeners(n){if(n){const a=await __privateMethod(this,Id,zd).call(this,n);return a?a.listeners.map(({listener:n})=>n):[]}let a=[];for(const{listeners:o}of __privateGet(this,vd).values())a=a.concat(o.map(({listener:n})=>n));return a}async off(n,a){const o=await __privateMethod(this,Id,zd).call(this,n);if(!o)return this;if(a){const n=o.listeners.map(({listener:n})=>n).indexOf(a);n>=0&&o.listeners.splice(n,1)}if(!a||0===o.listeners.length){o.started&&o.subscriber.stop();__privateGet(this,vd).delete(o.tag)}return this}async removeAllListeners(n){if(n){const{tag:a,started:o,subscriber:i}=await __privateMethod(this,Id,Fd).call(this,n);o&&i.stop();__privateGet(this,vd).delete(a)}else for(const[a,{started:o,subscriber:i}]of __privateGet(this,vd)){o&&i.stop();__privateGet(this,vd).delete(a)}return this}async addListener(n,a){return await this.on(n,a)}async removeListener(n,a){return this.off(n,a)}get destroyed(){return __privateGet(this,Nd)}destroy(){this.removeAllListeners();for(const n of __privateGet(this,_d).keys())this._clearTimeout(n);__privateSet(this,Nd,!0)}get paused(){return null!=__privateGet(this,xd)}set paused(n){!!n!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(n){__privateSet(this,Sd,-1);if(null!=__privateGet(this,xd)){if(__privateGet(this,xd)==!!n)return;assert(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(a=>a.pause(n));__privateSet(this,xd,!!n);for(const a of __privateGet(this,_d).values()){a.timer&&clearTimeout(a.timer);a.time=getTime()-a.time}}resume(){if(null!=__privateGet(this,xd)){this._forEachSubscriber(n=>n.resume());__privateSet(this,xd,null);for(const n of __privateGet(this,_d).values()){let a=n.time;a<0&&(a=0);n.time=getTime();setTimeout(n.func,a)}}}};vd=new WeakMap;wd=new WeakMap;xd=new WeakMap;Nd=new WeakMap;kd=new WeakMap;Cd=new WeakMap;Ed=new WeakMap;Sd=new WeakMap;Ad=new WeakMap;_d=new WeakMap;Td=new WeakMap;jd=new WeakMap;Id=new WeakSet;Pd=async function(n){const a=__privateGet(this,jd).cacheTimeout;if(a<0)return await this._perform(n);const o=getTag(n.method,n);let i=__privateGet(this,Ed).get(o);if(!i){i=this._perform(n);__privateGet(this,Ed).set(o,i);setTimeout(()=>{__privateGet(this,Ed).get(o)===i&&__privateGet(this,Ed).delete(o)},a)}return await i};Od=async function(n,a,o){assert(o<Qy,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},n,{blockTag:a,enableCcipRead:!0})});const i=copyRequest(n);try{return hexlify(await this._perform({method:"call",transaction:i,blockTag:a}))}catch(u){if(!this.disableCcipRead&&isCallException(u)&&u.data&&o>=0&&"latest"===a&&null!=i.to&&"0x556f1830"===dataSlice(u.data,0,4)){const n=u.data;const m=await resolveAddress(i.to,this);let g;try{g=parseOffchainLookup(dataSlice(u.data,4))}catch(d){assert(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:n}})}assert(g.sender.toLowerCase()===m.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:n,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:g.errorArgs}});const y=await this.ccipReadFetch(i,g.calldata,g.urls);assert(null!=y,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:u.data,errorArgs:g.errorArgs}});const v={to:m,data:concat([g.selector,encodeBytes([y,g.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:v});try{const n=await __privateMethod(this,Id,Od).call(this,v,a,o+1);this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},v),result:n});return n}catch(d){this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},v),error:d});throw d}}throw u}};Rd=async function(n){const{value:a}=await resolveProperties({network:this.getNetwork(),value:n});return a};Bd=async function(n,a,o){let i=this._getAddress(a);let u=this._getBlockTag(o);"string"==typeof i&&"string"==typeof u||([i,u]=await Promise.all([i,u]));return await __privateMethod(this,Id,Rd).call(this,__privateMethod(this,Id,Pd).call(this,Object.assign(n,{address:i,blockTag:u})))};Md=async function(n,a){if(isHexString(n,32))return await __privateMethod(this,Id,Pd).call(this,{method:"getBlock",blockHash:n,includeTransactions:a});let o=this._getBlockTag(n);"string"!=typeof o&&(o=await o);return await __privateMethod(this,Id,Pd).call(this,{method:"getBlock",blockTag:o,includeTransactions:a})};zd=async function(n,a){let o=await getSubscription(n,this);"event"===o.type&&a&&a.length>0&&!0===a[0].removed&&(o=await getSubscription({orphan:"drop-log",log:a[0]},this));return __privateGet(this,vd).get(o.tag)||null};Fd=async function(n){const a=await getSubscription(n,this);const o=a.tag;let i=__privateGet(this,vd).get(o);if(!i){const n=this._getSubscriber(a);const u=new WeakMap;const d=new Map;i={subscriber:n,tag:o,addressableMap:u,nameMap:d,started:!1,listeners:[]};__privateGet(this,vd).set(o,i)}return i};function _parseString(n,a){try{const o=_parseBytes(n,a);if(o)return toUtf8String(o)}catch(o){}return null}function _parseBytes(n,a){if("0x"===n)return null;try{const o=getNumber(dataSlice(n,a,a+32));const i=getNumber(dataSlice(n,o,o+32));return dataSlice(n,o+32,o+32+i)}catch(o){}return null}function numPad(n){const a=toBeArray(n);if(a.length>32)throw new Error("internal; should not happen");const o=new Uint8Array(32);o.set(a,32-a.length);return o}function bytesPad(n){if(n.length%32==0)return n;const a=new Uint8Array(32*Math.ceil(n.length/32));a.set(n);return a}const nb=new Uint8Array([]);function encodeBytes(n){const a=[];let o=0;for(let i=0;i<n.length;i++){a.push(nb);o+=32}for(let i=0;i<n.length;i++){const u=getBytes(n[i]);a[i]=numPad(o);a.push(numPad(u.length));a.push(bytesPad(u));o+=32+32*Math.ceil(u.length/32)}return concat(a)}const rb="0x0000000000000000000000000000000000000000000000000000000000000000";function parseOffchainLookup(n){const a={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};assert(dataLength(n)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const o=dataSlice(n,0,32);assert(dataSlice(o,0,12)===dataSlice(rb,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"});a.sender=dataSlice(o,12);try{const o=[];const i=getNumber(dataSlice(n,32,64));const u=getNumber(dataSlice(n,i,i+32));const d=dataSlice(n,i+32);for(let n=0;n<u;n++){const a=_parseString(d,32*n);if(null==a)throw new Error("abort");o.push(a)}a.urls=o}catch(i){assert(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const o=_parseBytes(n,64);if(null==o)throw new Error("abort");a.calldata=o}catch(i){assert(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}assert(dataSlice(n,100,128)===dataSlice(rb,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"});a.selector=dataSlice(n,96,100);try{const o=_parseBytes(n,128);if(null==o)throw new Error("abort");a.extraData=o}catch(i){assert(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}a.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(n=>a[n]);return a}function checkProvider(n,a){if(n.provider)return n.provider;assert(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:a})}async function populate(n,a){let o=copyRequest(a);null!=o.to&&(o.to=resolveAddress(o.to,n));if(null!=o.from){const a=o.from;o.from=Promise.all([n.getAddress(),resolveAddress(a,n)]).then(([n,a])=>{assertArgument(n.toLowerCase()===a.toLowerCase(),"transaction from mismatch","tx.from",a);return n})}else o.from=n.getAddress();return await resolveProperties(o)}let sb=class{constructor(n){__publicField$1(this,"provider");defineProperties(this,{provider:n||null})}async getNonce(n){return checkProvider(this,"getTransactionCount").getTransactionCount(await this.getAddress(),n)}async populateCall(n){const a=await populate(this,n);return a}async populateTransaction(n){const a=checkProvider(this,"populateTransaction");const o=await populate(this,n);null==o.nonce&&(o.nonce=await this.getNonce("pending"));null==o.gasLimit&&(o.gasLimit=await this.estimateGas(o));const i=await this.provider.getNetwork();if(null!=o.chainId){const a=getBigInt(o.chainId);assertArgument(a===i.chainId,"transaction chainId mismatch","tx.chainId",n.chainId)}else o.chainId=i.chainId;const u=null!=o.maxFeePerGas||null!=o.maxPriorityFeePerGas;null==o.gasPrice||2!==o.type&&!u?0!==o.type&&1!==o.type||!u||assertArgument(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",n):assertArgument(!1,"eip-1559 transaction do not support gasPrice","tx",n);if(2!==o.type&&null!=o.type||null==o.maxFeePerGas||null==o.maxPriorityFeePerGas)if(0===o.type||1===o.type){const n=await a.getFeeData();assert(null!=n.gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"});null==o.gasPrice&&(o.gasPrice=n.gasPrice)}else{const n=await a.getFeeData();if(null==o.type)if(null!=n.maxFeePerGas&&null!=n.maxPriorityFeePerGas){o.authorizationList&&o.authorizationList.length?o.type=4:o.type=2;if(null!=o.gasPrice){const n=o.gasPrice;delete o.gasPrice;o.maxFeePerGas=n;o.maxPriorityFeePerGas=n}else{null==o.maxFeePerGas&&(o.maxFeePerGas=n.maxFeePerGas);null==o.maxPriorityFeePerGas&&(o.maxPriorityFeePerGas=n.maxPriorityFeePerGas)}}else if(null!=n.gasPrice){assert(!u,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"});null==o.gasPrice&&(o.gasPrice=n.gasPrice);o.type=0}else assert(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else if(2===o.type||3===o.type||4===o.type){null==o.maxFeePerGas&&(o.maxFeePerGas=n.maxFeePerGas);null==o.maxPriorityFeePerGas&&(o.maxPriorityFeePerGas=n.maxPriorityFeePerGas)}}else o.type=2;return await resolveProperties(o)}async populateAuthorization(n){const a=Object.assign({},n);null==a.chainId&&(a.chainId=(await checkProvider(this,"getNetwork").getNetwork()).chainId);null==a.nonce&&(a.nonce=await this.getNonce());return a}async estimateGas(n){return checkProvider(this,"estimateGas").estimateGas(await this.populateCall(n))}async call(n){return checkProvider(this,"call").call(await this.populateCall(n))}async resolveName(n){const a=checkProvider(this,"resolveName");return await a.resolveName(n)}async sendTransaction(n){const a=checkProvider(this,"sendTransaction");const o=await this.populateTransaction(n);delete o.from;const i=rm.from(o);return await a.broadcastTransaction(await this.signTransaction(i))}authorize(n){assert(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}};function copy(n){return JSON.parse(JSON.stringify(n))}let ab=class{constructor(n){__privateAdd(this,qd);__privateAdd(this,Ld);__privateAdd(this,Dd);__privateAdd(this,$d);__privateAdd(this,Ud);__privateAdd(this,Wd);__privateAdd(this,Hd);__privateSet(this,Ld,n);__privateSet(this,Dd,null);__privateSet(this,$d,__privateMethod(this,qd,Gd).bind(this));__privateSet(this,Ud,!1);__privateSet(this,Wd,null);__privateSet(this,Hd,!1)}_subscribe(n){throw new Error("subclasses must override this")}_emitResults(n,a){throw new Error("subclasses must override this")}_recover(n){throw new Error("subclasses must override this")}start(){if(!__privateGet(this,Ud)){__privateSet(this,Ud,!0);__privateMethod(this,qd,Gd).call(this,-2)}}stop(){if(__privateGet(this,Ud)){__privateSet(this,Ud,!1);__privateSet(this,Hd,!0);__privateMethod(this,qd,Vd).call(this);__privateGet(this,Ld).off("block",__privateGet(this,$d))}}pause(n){n&&__privateMethod(this,qd,Vd).call(this);__privateGet(this,Ld).off("block",__privateGet(this,$d))}resume(){this.start()}};Ld=new WeakMap;Dd=new WeakMap;$d=new WeakMap;Ud=new WeakMap;Wd=new WeakMap;Hd=new WeakMap;qd=new WeakSet;Gd=async function(n){try{null==__privateGet(this,Dd)&&__privateSet(this,Dd,this._subscribe(__privateGet(this,Ld)));let n=null;try{n=await __privateGet(this,Dd)}catch(a){if(!isError(a,"UNSUPPORTED_OPERATION")||"eth_newFilter"!==a.operation)throw a}if(null==n){__privateSet(this,Dd,null);__privateGet(this,Ld)._recoverSubscriber(this,this._recover(__privateGet(this,Ld)));return}const o=await __privateGet(this,Ld).getNetwork();__privateGet(this,Wd)||__privateSet(this,Wd,o);if(__privateGet(this,Wd).chainId!==o.chainId)throw new Error("chaid changed");if(__privateGet(this,Hd))return;const i=await __privateGet(this,Ld).send("eth_getFilterChanges",[n]);await this._emitResults(__privateGet(this,Ld),i)}catch(a){console.log("@TODO",a)}__privateGet(this,Ld).once("block",__privateGet(this,$d))};Vd=function(){const n=__privateGet(this,Dd);if(n){__privateSet(this,Dd,null);n.then(n=>{__privateGet(this,Ld).destroyed||__privateGet(this,Ld).send("eth_uninstallFilter",[n])})}};let ob=class extends ab{constructor(n,a){super(n);__privateAdd(this,Kd);__privateSet(this,Kd,copy(a))}_recover(n){return new Yy(n,__privateGet(this,Kd))}async _subscribe(n){const a=await n.send("eth_newFilter",[__privateGet(this,Kd)]);return a}async _emitResults(n,a){for(const o of a)n.emit(__privateGet(this,Kd),n._wrapLog(o,n._network))}};Kd=new WeakMap;let ib=class extends ab{async _subscribe(n){return await n.send("eth_newPendingTransactionFilter",[])}async _emitResults(n,a){for(const o of a)n.emit("pending",o)}};const cb="bigint,boolean,function,number,string,symbol".split(/,/g);function deepCopy(n){if(null==n||cb.indexOf(typeof n)>=0)return n;if("function"==typeof n.getAddress)return n;if(Array.isArray(n))return n.map(deepCopy);if("object"==typeof n)return Object.keys(n).reduce((a,o)=>{a[o]=n[o];return a},{});throw new Error(`should not happen: ${n} (${typeof n})`)}function stall(n){return new Promise(a=>{setTimeout(a,n)})}function getLowerCase(n){return n?n.toLowerCase():n}function isPollable(n){return n&&"number"==typeof n.pollingInterval}const lb={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};let ub=class extends sb{constructor(n,a){super(n);__publicField$1(this,"address");a=getAddress$1(a);defineProperties(this,{address:a})}connect(n){assert(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const a=deepCopy(n);const o=[];if(a.from){const i=a.from;o.push((async()=>{const o=await resolveAddress(i,this.provider);assertArgument(null!=o&&o.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n);a.from=o})())}else a.from=this.address;null==a.gasLimit&&o.push((async()=>{a.gasLimit=await this.provider.estimateGas({...a,from:this.address})})());if(null!=a.to){const n=a.to;o.push((async()=>{a.to=await resolveAddress(n,this.provider)})())}o.length&&await Promise.all(o);const i=this.provider.getRpcTransaction(a);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(n){const a=await this.provider.getBlockNumber();const o=await this.sendUncheckedTransaction(n);return await new Promise((n,i)=>{const u=[1e3,100];let d=0;const checkTx=async()=>{try{const i=await this.provider.getTransaction(o);if(null!=i){n(i.replaceableTransaction(a));return}}catch(m){if(isError(m,"CANCELLED")||isError(m,"BAD_DATA")||isError(m,"NETWORK_ERROR")||isError(m,"UNSUPPORTED_OPERATION")){null==m.info&&(m.info={});m.info.sendTransactionHash=o;i(m);return}if(isError(m,"INVALID_ARGUMENT")){d++;null==m.info&&(m.info={});m.info.sendTransactionHash=o;if(d>10){i(m);return}}this.provider.emit("error",makeError("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:m}))}this.provider._setTimeout(()=>{checkTx()},u.pop()||4e3)};checkTx()})}async signTransaction(n){const a=deepCopy(n);if(a.from){const o=await resolveAddress(a.from,this.provider);assertArgument(null!=o&&o.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n);a.from=o}else a.from=this.address;const o=this.provider.getRpcTransaction(a);return await this.provider.send("eth_signTransaction",[o])}async signMessage(n){const a="string"==typeof n?toUtf8Bytes(n):n;return await this.provider.send("personal_sign",[hexlify(a),this.address.toLowerCase()])}async signTypedData(n,a,o){const i=deepCopy(o);const u=await ng.resolveNames(n,a,i,async n=>{const a=await resolveAddress(n);assertArgument(null!=a,"TypedData does not support null address","value",n);return a});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(ng.getPayload(u.domain,a,u.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const a="string"==typeof n?toUtf8Bytes(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),hexlify(a)])}};let db=class extends tb{constructor(n,a){super(n,a);__privateAdd(this,nh);__privateAdd(this,Zd);__privateAdd(this,Yd);__privateAdd(this,Jd);__privateAdd(this,Qd);__privateAdd(this,Xd);__privateAdd(this,eh);__privateAdd(this,th);__privateSet(this,Yd,1);__privateSet(this,Zd,Object.assign({},lb,a||{}));__privateSet(this,Jd,[]);__privateSet(this,Qd,null);__privateSet(this,eh,null);__privateSet(this,th,null);{let n=null;const a=new Promise(a=>{n=a});__privateSet(this,Xd,{promise:a,resolve:n})}const o=this._getOption("staticNetwork");if("boolean"==typeof o){assertArgument(!o||"any"!==n,"staticNetwork cannot be used on special network 'any'","options",a);o&&null!=n&&__privateSet(this,eh,Wy.from(n))}else if(o){assertArgument(null==n||o.matches(n),"staticNetwork MUST match network object","options",a);__privateSet(this,eh,o)}}_getOption(n){return __privateGet(this,Zd)[n]}get _network(){assert(__privateGet(this,eh),"network is not available yet","NETWORK_ERROR");return __privateGet(this,eh)}async _perform(n){if("call"===n.method||"estimateGas"===n.method){let a=n.transaction;if(a&&null!=a.type&&getBigInt(a.type)&&null==a.maxFeePerGas&&null==a.maxPriorityFeePerGas){const o=await this.getFeeData();null==o.maxFeePerGas&&null==o.maxPriorityFeePerGas&&(n=Object.assign({},n,{transaction:Object.assign({},a,{type:void 0})}))}}const a=this.getRpcRequest(n);return null!=a?await this.send(a.method,a.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n){if(!0!==n)return n;if(__privateGet(this,eh))return __privateGet(this,eh)}if(__privateGet(this,th))return await __privateGet(this,th);if(this.ready){__privateSet(this,th,(async()=>{try{const n=Wy.from(getBigInt(await this.send("eth_chainId",[])));__privateSet(this,th,null);return n}catch(n){__privateSet(this,th,null);throw n}})());return await __privateGet(this,th)}__privateSet(this,th,(async()=>{const n={id:__privateWrapper(this,Yd)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:n});let a;try{a=(await this._send(n))[0];__privateSet(this,th,null)}catch(o){__privateSet(this,th,null);this.emit("debug",{action:"receiveRpcError",error:o});throw o}this.emit("debug",{action:"receiveRpcResult",result:a});if("result"in a)return Wy.from(getBigInt(a.result));throw this.getRpcError(n,a)})());return await __privateGet(this,th)}_start(){if(null!=__privateGet(this,Xd)&&null!=__privateGet(this,Xd).resolve){__privateGet(this,Xd).resolve();__privateSet(this,Xd,null);(async()=>{for(;null==__privateGet(this,eh)&&!this.destroyed;)try{__privateSet(this,eh,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)");this.emit("error",makeError("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}}));await stall(1e3)}__privateMethod(this,nh,rh).call(this)})()}}async _waitUntilReady(){if(null!=__privateGet(this,Xd))return await __privateGet(this,Xd).promise}_getSubscriber(n){return"pending"===n.type?new ib(this):"event"===n.type?this._getOption("polling")?new Yy(this,n.filter):new ob(this,n.filter):"orphan"===n.type&&"drop-log"===n.filter.orphan?new Xy("orphan"):super._getSubscriber(n)}get ready(){return null==__privateGet(this,Xd)}getRpcTransaction(n){const a={};["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(o=>{if(null==n[o])return;let i=o;"gasLimit"===o&&(i="gas");a[i]=toQuantity(getBigInt(n[o],`tx.${o}`))});["from","to","data"].forEach(o=>{null!=n[o]&&(a[o]=hexlify(n[o]))});n.accessList&&(a.accessList=accessListify(n.accessList));n.blobVersionedHashes&&(a.blobVersionedHashes=n.blobVersionedHashes.map(n=>n.toLowerCase()));n.authorizationList&&(a.authorizationList=n.authorizationList.map(n=>{const a=authorizationify(n);return{address:a.address,nonce:toQuantity(a.nonce),chainId:toQuantity(a.chainId),yParity:toQuantity(a.signature.yParity),r:toQuantity(a.signature.r),s:toQuantity(a.signature.s)}}));return a}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[getLowerCase(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[getLowerCase(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[getLowerCase(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[getLowerCase(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":n.filter&&null!=n.filter.address&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(getLowerCase):n.filter.address=getLowerCase(n.filter.address));return{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,a){const{method:o}=n;const{error:i}=a;if("eth_estimateGas"===o&&i.message){const a=i.message;if(!a.match(/revert/i)&&a.match(/insufficient funds/i))return makeError("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:i}});if(a.match(/nonce/i)&&a.match(/too low/i))return makeError("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:i}})}if("eth_call"===o||"eth_estimateGas"===o){const a=spelunkData(i);const u=Zg.getBuiltinCallException("eth_call"===o?"call":"estimateGas",n.params[0],a?a.data:null);u.info={error:i,payload:n};return u}const u=JSON.stringify(spelunkMessage(i));if("string"==typeof i.message&&i.message.match(/user denied|ethers-user-denied/i)){const a={eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"};return makeError("user rejected action","ACTION_REJECTED",{action:a[o]||"unknown",reason:"rejected",info:{payload:n,error:i}})}if("eth_sendRawTransaction"===o||"eth_sendTransaction"===o){const a=n.params[0];if(u.match(/insufficient funds|base fee exceeds gas limit/i))return makeError("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:a,info:{error:i}});if(u.match(/nonce/i)&&u.match(/too low/i))return makeError("nonce has already been used","NONCE_EXPIRED",{transaction:a,info:{error:i}});if(u.match(/replacement transaction/i)&&u.match(/underpriced/i))return makeError("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:a,info:{error:i}});if(u.match(/only replay-protected/i))return makeError("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:o,info:{transaction:a,info:{error:i}}})}let d=!!u.match(/the method .* does not exist/i);d||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(d=!0);return d?makeError("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:i,payload:n}}):makeError("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:n})}send(n,a){if(this.destroyed)return Promise.reject(makeError("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const o=__privateWrapper(this,Yd)._++;const i=new Promise((i,u)=>{__privateGet(this,Jd).push({resolve:i,reject:u,payload:{method:n,params:a,id:o,jsonrpc:"2.0"}})});__privateMethod(this,nh,rh).call(this);return i}async getSigner(n){null==n&&(n=0);const a=this.send("eth_accounts",[]);if("number"==typeof n){const o=await a;if(n>=o.length)throw new Error("no such account");return new ub(this,o[n])}const{accounts:o}=await resolveProperties({network:this.getNetwork(),accounts:a});n=getAddress$1(n);for(const i of o)if(getAddress$1(i)===n)return new ub(this,n);throw new Error("invalid account")}async listAccounts(){const n=await this.send("eth_accounts",[]);return n.map(n=>new ub(this,n))}destroy(){if(__privateGet(this,Qd)){clearTimeout(__privateGet(this,Qd));__privateSet(this,Qd,null)}for(const{payload:n,reject:a}of __privateGet(this,Jd))a(makeError("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));__privateSet(this,Jd,[]);super.destroy()}};Zd=new WeakMap;Yd=new WeakMap;Jd=new WeakMap;Qd=new WeakMap;Xd=new WeakMap;eh=new WeakMap;th=new WeakMap;nh=new WeakSet;rh=function(){if(__privateGet(this,Qd))return;const n=1===this._getOption("batchMaxCount")?0:this._getOption("batchStallTime");__privateSet(this,Qd,setTimeout(()=>{__privateSet(this,Qd,null);const n=__privateGet(this,Jd);__privateSet(this,Jd,[]);for(;n.length;){const a=[n.shift()];for(;n.length&&a.length!==__privateGet(this,Zd).batchMaxCount;){a.push(n.shift());const o=JSON.stringify(a.map(n=>n.payload));if(o.length>__privateGet(this,Zd).batchMaxSize){n.unshift(a.pop());break}}(async()=>{const n=1===a.length?a[0].payload:a.map(n=>n.payload);this.emit("debug",{action:"sendRpcPayload",payload:n});try{const o=await this._send(n);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:n,reject:i,payload:u}of a){if(this.destroyed){i(makeError("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:u.method}));continue}const a=o.filter(n=>n.id===u.id)[0];if(null==a){const n=makeError("missing response for request","BAD_DATA",{value:o,info:{payload:u}});this.emit("error",n);i(n);continue}"error"in a?i(this.getRpcError(u,a)):n(a.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:n}of a)n(o)}})()}},n))};let hb=class extends db{constructor(n,a){super(n,a);__privateAdd(this,sh);let o=this._getOption("pollingInterval");null==o&&(o=lb.pollingInterval);__privateSet(this,sh,o)}_getSubscriber(n){const a=super._getSubscriber(n);isPollable(a)&&(a.pollingInterval=__privateGet(this,sh));return a}get pollingInterval(){return __privateGet(this,sh)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");__privateSet(this,sh,n);this._forEachSubscriber(n=>{isPollable(n)&&(n.pollingInterval=__privateGet(this,sh))})}};sh=new WeakMap;let fb=class extends hb{constructor(n,a,o){null==n&&(n="http://localhost:8545");super(a,o);__privateAdd(this,ah);__privateSet(this,ah,"string"==typeof n?new _h(n):n.clone())}_getConnection(){return __privateGet(this,ah).clone()}async send(n,a){await this._start();return await super.send(n,a)}async _send(n){const a=this._getConnection();a.body=JSON.stringify(n);a.setHeader("content-type","application/json");const o=await a.send();o.assertOk();let i=o.bodyJson;Array.isArray(i)||(i=[i]);return i}};ah=new WeakMap;function spelunkData(n){if(null==n)return null;if("string"==typeof n.message&&n.message.match(/revert/i)&&isHexString(n.data))return{message:n.message,data:n.data};if("object"==typeof n){for(const a in n){const o=spelunkData(n[a]);if(o)return o}return null}if("string"==typeof n)try{return spelunkData(JSON.parse(n))}catch(a){}return null}function _spelunkMessage(n,a){if(null!=n){"string"==typeof n.message&&a.push(n.message);if("object"==typeof n)for(const o in n)_spelunkMessage(n[o],a);if("string"==typeof n)try{return _spelunkMessage(JSON.parse(n),a)}catch(o){}}}function spelunkMessage(n){const a=[];_spelunkMessage(n,a);return a}const pb=class n extends hb{constructor(ethereum,n,a){const o=Object.assign({},null!=a?a:{},{batchMaxCount:1});assertArgument(ethereum&&ethereum.request,"invalid EIP-1193 provider","ethereum",ethereum);super(n,o);__privateAdd(this,oh);__privateAdd(this,ih);__privateSet(this,ih,null);a&&a.providerInfo&&__privateSet(this,ih,a.providerInfo);__privateSet(this,oh,async(n,a)=>{const o={method:n,params:a};this.emit("debug",{action:"sendEip1193Request",payload:o});try{const n=await ethereum.request(o);this.emit("debug",{action:"receiveEip1193Result",result:n});return n}catch(i){const n=new Error(i.message);n.code=i.code;n.data=i.data;n.payload=o;this.emit("debug",{action:"receiveEip1193Error",error:n});throw n}})}get providerInfo(){return __privateGet(this,ih)}async send(n,a){await this._start();return await super.send(n,a)}async _send(n){assertArgument(!Array.isArray(n),"EIP-1193 does not support batch request","payload",n);try{const a=await __privateGet(this,oh).call(this,n.method,n.params||[]);return[{id:n.id,result:a}]}catch(a){return[{id:n.id,error:{code:a.code,data:a.data,message:a.message}}]}}getRpcError(n,a){a=JSON.parse(JSON.stringify(a));switch(a.error.code||-1){case 4001:a.error.message=`ethers-user-denied: ${a.error.message}`;break;case 4200:a.error.message=`ethers-unsupported: ${a.error.message}`}return super.getRpcError(n,a)}async hasSigner(n){null==n&&(n=0);const a=await this.send("eth_accounts",[]);if("number"==typeof n)return a.length>n;n=n.toLowerCase();return 0!==a.filter(a=>a.toLowerCase()===n).length}async getSigner(n){null==n&&(n=0);if(!(await this.hasSigner(n)))try{await __privateGet(this,oh).call(this,"eth_requestAccounts",[])}catch(a){const n=a.payload;throw this.getRpcError(n,{id:n.id,error:a})}return await super.getSigner(n)}static async discover(a){null==a&&(a={});if(a.provider)return new n(a.provider);const o=a.window?a.window:"undefined"!=typeof window?window:null;if(null==o)return null;const i=a.anyProvider;if(i&&o.ethereum)return new n(o.ethereum);if(!("addEventListener"in o&&"dispatchEvent"in o&&"removeEventListener"in o))return null;const u=a.timeout?a.timeout:300;return 0===u?null:await new Promise((d,m)=>{let g=[];const addProvider=n=>{g.push(n.detail);i&&finalize()};const finalize=()=>{clearTimeout(y);if(g.length)if(a&&a.filter){const o=a.filter(g.map(n=>Object.assign({},n.info)));if(null==o)d(null);else if(o instanceof n)d(o);else{let a=null;if(o.uuid){const n=g.filter(n=>o.uuid===n.info.uuid);a=n[0]}if(a){const{provider:o,info:i}=a;d(new n(o,void 0,{providerInfo:i}))}else m(makeError("filter returned unknown info","UNSUPPORTED_OPERATION",{value:o}))}}else{const{provider:a,info:o}=g[0];d(new n(a,void 0,{providerInfo:o}))}else d(null);o.removeEventListener("eip6963:announceProvider",addProvider)};const y=setTimeout(()=>{finalize()},u);o.addEventListener("eip6963:announceProvider",addProvider);o.dispatchEvent(new Event("eip6963:requestProvider"))})}};oh=new WeakMap;ih=new WeakMap;let mb=pb;const __vite__mapDeps=(n,a=__vite__mapDeps,o=a.f||(a.f=["assets/index-C48FUAJh.js","assets/wagmi-MLQ1qm62.js","assets/vendor-BkkZ95pQ.js","assets/VirtualList-yZ8rWXJ5.js"]))=>n.map(n=>o[n]);var gb=Object.defineProperty;var __defNormalProp=(n,a,o)=>a in n?gb(n,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[a]=o;var __publicField=(n,a,o)=>__defNormalProp(n,a+"",o);!function(){const n=document.createElement("link").relList;if(!(n&&n.supports&&n.supports("modulepreload"))){for(const n of document.querySelectorAll('link[rel="modulepreload"]'))processPreload(n);new MutationObserver(n=>{for(const a of n)if("childList"===a.type)for(const n of a.addedNodes)"LINK"===n.tagName&&"modulepreload"===n.rel&&processPreload(n)}).observe(document,{childList:!0,subtree:!0})}function getFetchOpts(n){const a={};n.integrity&&(a.integrity=n.integrity);n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy);"use-credentials"===n.crossOrigin?a.credentials="include":"anonymous"===n.crossOrigin?a.credentials="omit":a.credentials="same-origin";return a}function processPreload(n){if(n.ep)return;n.ep=!0;const a=getFetchOpts(n);fetch(n.href,a)}}();var yb={};var bb;function requireClient(){if(bb)return yb;bb=1;var n=requireReactDom();yb.createRoot=n.createRoot;yb.hydrateRoot=n.hydrateRoot;return yb}var vb=requireClient();const wb=getDefaultExportFromCjs(vb);var xb=requireReactDom();const Nb=getDefaultExportFromCjs(xb);
/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){_extends$3=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n};return _extends$3.apply(this,arguments)}var kb;!function(n){n.Pop="POP";n.Push="PUSH";n.Replace="REPLACE"}(kb||(kb={}));const Cb="popstate";function createBrowserHistory(n){void 0===n&&(n={});function createBrowserLocation(n,a){let{pathname:o,search:i,hash:u}=n.location;return createLocation("",{pathname:o,search:i,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function createBrowserHref(n,a){return"string"==typeof a?a:createPath(a)}return getUrlBasedHistory(createBrowserLocation,createBrowserHref,null,n)}function invariant(n,a){if(!1===n||null===n||"undefined"==typeof n)throw new Error(a)}function warning(n,a){if(!n){"undefined"!=typeof console&&console.warn(a);try{throw new Error(a)}catch(o){}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(n,a){return{usr:n.state,key:n.key,idx:a}}function createLocation(n,a,o,i){void 0===o&&(o=null);let u=_extends$3({pathname:"string"==typeof n?n:n.pathname,search:"",hash:""},"string"==typeof a?parsePath(a):a,{state:o,key:a&&a.key||i||createKey()});return u}function createPath(n){let{pathname:a="/",search:o="",hash:i=""}=n;o&&"?"!==o&&(a+="?"===o.charAt(0)?o:"?"+o);i&&"#"!==i&&(a+="#"===i.charAt(0)?i:"#"+i);return a}function parsePath(n){let a={};if(n){let o=n.indexOf("#");if(o>=0){a.hash=n.substr(o);n=n.substr(0,o)}let i=n.indexOf("?");if(i>=0){a.search=n.substr(i);n=n.substr(0,i)}n&&(a.pathname=n)}return a}function getUrlBasedHistory(n,a,o,i){void 0===i&&(i={});let{window:u=document.defaultView,v5Compat:d=!1}=i;let m=u.history;let g=kb.Pop;let y=null;let v=getIndex();if(null==v){v=0;m.replaceState(_extends$3({},m.state,{idx:v}),"")}function getIndex(){let n=m.state||{idx:null};return n.idx}function handlePop(){g=kb.Pop;let n=getIndex();let a=null==n?null:n-v;v=n;y&&y({action:g,location:x.location,delta:a})}function push(n,a){g=kb.Push;let o=createLocation(x.location,n,a);v=getIndex()+1;let i=getHistoryState(o,v);let N=x.createHref(o);try{m.pushState(i,"",N)}catch(k){if(k instanceof DOMException&&"DataCloneError"===k.name)throw k;u.location.assign(N)}d&&y&&y({action:g,location:x.location,delta:1})}function replace(n,a){g=kb.Replace;let o=createLocation(x.location,n,a);v=getIndex();let i=getHistoryState(o,v);let u=x.createHref(o);m.replaceState(i,"",u);d&&y&&y({action:g,location:x.location,delta:0})}function createURL(n){let a="null"!==u.location.origin?u.location.origin:u.location.href;let o="string"==typeof n?n:createPath(n);o=o.replace(/ $/,"%20");invariant(a,"No window.location.(origin|href) available to create URL for href: "+o);return new URL(o,a)}let x={get action(){return g},get location(){return n(u,m)},listen(n){if(y)throw new Error("A history only accepts one active listener");u.addEventListener(Cb,handlePop);y=n;return()=>{u.removeEventListener(Cb,handlePop);y=null}},createHref:n=>a(u,n),createURL:createURL,encodeLocation(n){let a=createURL(n);return{pathname:a.pathname,search:a.search,hash:a.hash}},push:push,replace:replace,go:n=>m.go(n)};return x}var Eb;!function(n){n.data="data";n.deferred="deferred";n.redirect="redirect";n.error="error"}(Eb||(Eb={}));function matchRoutes(n,a,o){void 0===o&&(o="/");let i="string"==typeof a?parsePath(a):a;let u=stripBasename(i.pathname||"/",o);if(null==u)return null;let d=flattenRoutes(n);rankRouteBranches(d);let m=null;for(let g=0;null==m&&g<d.length;++g){let n=decodePath(u);m=matchRouteBranch(d[g],n)}return m}function flattenRoutes(n,a,o,i){void 0===a&&(a=[]);void 0===o&&(o=[]);void 0===i&&(i="");let flattenRoute=(n,u,d)=>{let m={relativePath:void 0===d?n.path||"":d,caseSensitive:!0===n.caseSensitive,childrenIndex:u,route:n};if(m.relativePath.startsWith("/")){invariant(m.relativePath.startsWith(i),'Absolute route path "'+m.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.');m.relativePath=m.relativePath.slice(i.length)}let g=joinPaths([i,m.relativePath]);let y=o.concat(m);if(n.children&&n.children.length>0){invariant(!0!==n.index,'Index routes must not have child routes. Please remove all child routes from route path "'+g+'".');flattenRoutes(n.children,a,y,g)}(null!=n.path||n.index)&&a.push({path:g,score:computeScore(g,n.index),routesMeta:y})};n.forEach((n,a)=>{var o;if(""!==n.path&&null!=(o=n.path)&&o.includes("?"))for(let i of explodeOptionalSegments(n.path))flattenRoute(n,a,i);else flattenRoute(n,a)});return a}function explodeOptionalSegments(n){let a=n.split("/");if(0===a.length)return[];let[o,...i]=a;let u=o.endsWith("?");let d=o.replace(/\?$/,"");if(0===i.length)return u?[d,""]:[d];let m=explodeOptionalSegments(i.join("/"));let g=[];g.push(...m.map(n=>""===n?d:[d,n].join("/")));u&&g.push(...m);return g.map(a=>n.startsWith("/")&&""===a?"/":a)}function rankRouteBranches(n){n.sort((n,a)=>n.score!==a.score?a.score-n.score:compareIndexes(n.routesMeta.map(n=>n.childrenIndex),a.routesMeta.map(n=>n.childrenIndex)))}const Sb=/^:[\w-]+$/;const Ab=3;const _b=2;const Tb=1;const jb=10;const Ib=-2;const isSplat=n=>"*"===n;function computeScore(n,a){let o=n.split("/");let i=o.length;o.some(isSplat)&&(i+=Ib);a&&(i+=_b);return o.filter(n=>!isSplat(n)).reduce((n,a)=>n+(Sb.test(a)?Ab:""===a?Tb:jb),i)}function compareIndexes(n,a){let o=n.length===a.length&&n.slice(0,-1).every((n,o)=>n===a[o]);return o?n[n.length-1]-a[a.length-1]:0}function matchRouteBranch(n,a){let{routesMeta:o}=n;let i={};let u="/";let d=[];for(let m=0;m<o.length;++m){let n=o[m];let g=m===o.length-1;let y="/"===u?a:a.slice(u.length)||"/";let v=matchPath({path:n.relativePath,caseSensitive:n.caseSensitive,end:g},y);if(!v)return null;Object.assign(i,v.params);let x=n.route;d.push({params:i,pathname:joinPaths([u,v.pathname]),pathnameBase:normalizePathname(joinPaths([u,v.pathnameBase])),route:x});"/"!==v.pathnameBase&&(u=joinPaths([u,v.pathnameBase]))}return d}function matchPath(n,a){"string"==typeof n&&(n={path:n,caseSensitive:!1,end:!0});let[o,i]=compilePath(n.path,n.caseSensitive,n.end);let u=a.match(o);if(!u)return null;let d=u[0];let m=d.replace(/(.)\/+$/,"$1");let g=u.slice(1);let y=i.reduce((n,a,o)=>{let{paramName:i,isOptional:u}=a;if("*"===i){let n=g[o]||"";m=d.slice(0,d.length-n.length).replace(/(.)\/+$/,"$1")}const y=g[o];n[i]=u&&!y?void 0:(y||"").replace(/%2F/g,"/");return n},{});return{params:y,pathname:d,pathnameBase:m,pattern:n}}function compilePath(n,a,o){void 0===a&&(a=!1);void 0===o&&(o=!0);warning("*"===n||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were "'+n.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+n.replace(/\*$/,"/*")+'".');let i=[];let u="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(n,a,o)=>{i.push({paramName:a,isOptional:null!=o});return o?"/?([^\\/]+)?":"/([^\\/]+)"});if(n.endsWith("*")){i.push({paramName:"*"});u+="*"===n||"/*"===n?"(.*)$":"(?:\\/(.+)|\\/*)$"}else o?u+="\\/*$":""!==n&&"/"!==n&&(u+="(?:(?=\\/|$))");let d=new RegExp(u,a?void 0:"i");return[d,i]}function decodePath(n){try{return n.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(a){warning(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+a+").");return n}}function stripBasename(n,a){if("/"===a)return n;if(!n.toLowerCase().startsWith(a.toLowerCase()))return null;let o=a.endsWith("/")?a.length-1:a.length;let i=n.charAt(o);return i&&"/"!==i?null:n.slice(o)||"/"}function resolvePath(n,a){void 0===a&&(a="/");let{pathname:o,search:i="",hash:u=""}="string"==typeof n?parsePath(n):n;let d=o?o.startsWith("/")?o:resolvePathname(o,a):a;return{pathname:d,search:normalizeSearch(i),hash:normalizeHash(u)}}function resolvePathname(n,a){let o=a.replace(/\/+$/,"").split("/");let i=n.split("/");i.forEach(n=>{".."===n?o.length>1&&o.pop():"."!==n&&o.push(n)});return o.length>1?o.join("/"):"/"}function getInvalidPathError(n,a,o,i){return"Cannot include a '"+n+"' character in a manually specified `to."+a+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+o+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(n){return n.filter((n,a)=>0===a||n.route.path&&n.route.path.length>0)}function getResolveToMatches(n,a){let o=getPathContributingMatches(n);return a?o.map((a,o)=>o===n.length-1?a.pathname:a.pathnameBase):o.map(n=>n.pathnameBase)}function resolveTo(n,a,o,i){void 0===i&&(i=!1);let u;if("string"==typeof n)u=parsePath(n);else{u=_extends$3({},n);invariant(!u.pathname||!u.pathname.includes("?"),getInvalidPathError("?","pathname","search",u));invariant(!u.pathname||!u.pathname.includes("#"),getInvalidPathError("#","pathname","hash",u));invariant(!u.search||!u.search.includes("#"),getInvalidPathError("#","search","hash",u))}let d=""===n||""===u.pathname;let m=d?"/":u.pathname;let g;if(null==m)g=o;else{let n=a.length-1;if(!i&&m.startsWith("..")){let a=m.split("/");for(;".."===a[0];){a.shift();n-=1}u.pathname=a.join("/")}g=n>=0?a[n]:"/"}let y=resolvePath(u,g);let v=m&&"/"!==m&&m.endsWith("/");let x=(d||"."===m)&&o.endsWith("/");y.pathname.endsWith("/")||!v&&!x||(y.pathname+="/");return y}const joinPaths=n=>n.join("/").replace(/\/\/+/g,"/");const normalizePathname=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/");const normalizeSearch=n=>n&&"?"!==n?n.startsWith("?")?n:"?"+n:"";const normalizeHash=n=>n&&"#"!==n?n.startsWith("#")?n:"#"+n:"";function isRouteErrorResponse(n){return null!=n&&"number"==typeof n.status&&"string"==typeof n.statusText&&"boolean"==typeof n.internal&&"data"in n}const Pb=["post","put","patch","delete"];new Set(Pb);const Ob=["get",...Pb];new Set(Ob);
/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){_extends$2=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n};return _extends$2.apply(this,arguments)}const Rb=ot.createContext(null);const Bb=ot.createContext(null);const Mb=ot.createContext(null);const zb=ot.createContext(null);const Fb=ot.createContext({outlet:null,matches:[],isDataRoute:!1});const Lb=ot.createContext(null);function useHref(n,a){let{relative:o}=void 0===a?{}:a;useInRouterContext()?void 0:invariant(!1);let{basename:i,navigator:u}=ot.useContext(Mb);let{hash:d,pathname:m,search:g}=useResolvedPath(n,{relative:o});let y=m;"/"!==i&&(y="/"===m?i:joinPaths([i,m]));return u.createHref({pathname:y,search:g,hash:d})}function useInRouterContext(){return null!=ot.useContext(zb)}function useLocation(){useInRouterContext()?void 0:invariant(!1);return ot.useContext(zb).location}function useIsomorphicLayoutEffect$1(n){let a=ot.useContext(Mb).static;a||ot.useLayoutEffect(n)}function useNavigate(){let{isDataRoute:n}=ot.useContext(Fb);return n?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()?void 0:invariant(!1);let n=ot.useContext(Rb);let{basename:a,future:o,navigator:i}=ot.useContext(Mb);let{matches:u}=ot.useContext(Fb);let{pathname:d}=useLocation();let m=JSON.stringify(getResolveToMatches(u,o.v7_relativeSplatPath));let g=ot.useRef(!1);useIsomorphicLayoutEffect$1(()=>{g.current=!0});let y=ot.useCallback(function(o,u){void 0===u&&(u={});if(!g.current)return;if("number"==typeof o){i.go(o);return}let y=resolveTo(o,JSON.parse(m),d,"path"===u.relative);null==n&&"/"!==a&&(y.pathname="/"===y.pathname?a:joinPaths([a,y.pathname]));(u.replace?i.replace:i.push)(y,u.state,u)},[a,i,m,d,n]);return y}function useParams(){let{matches:n}=ot.useContext(Fb);let a=n[n.length-1];return a?a.params:{}}function useResolvedPath(n,a){let{relative:o}=void 0===a?{}:a;let{future:i}=ot.useContext(Mb);let{matches:u}=ot.useContext(Fb);let{pathname:d}=useLocation();let m=JSON.stringify(getResolveToMatches(u,i.v7_relativeSplatPath));return ot.useMemo(()=>resolveTo(n,JSON.parse(m),d,"path"===o),[n,m,d,o])}function useRoutes(n,a){return useRoutesImpl(n,a)}function useRoutesImpl(n,a,o,i){useInRouterContext()?void 0:invariant(!1);let{navigator:u}=ot.useContext(Mb);let{matches:d}=ot.useContext(Fb);let m=d[d.length-1];let g=m?m.params:{};!m||m.pathname;let y=m?m.pathnameBase:"/";m&&m.route;let v=useLocation();let x;if(a){var N;let n="string"==typeof a?parsePath(a):a;"/"===y||(null==(N=n.pathname)?void 0:N.startsWith(y))?void 0:invariant(!1);x=n}else x=v;let k=x.pathname||"/";let E=k;if("/"!==y){let n=y.replace(/^\//,"").split("/");let a=k.replace(/^\//,"").split("/");E="/"+a.slice(n.length).join("/")}let S=matchRoutes(n,{pathname:E});let A=_renderMatches(S&&S.map(n=>Object.assign({},n,{params:Object.assign({},g,n.params),pathname:joinPaths([y,u.encodeLocation?u.encodeLocation(n.pathname).pathname:n.pathname]),pathnameBase:"/"===n.pathnameBase?y:joinPaths([y,u.encodeLocation?u.encodeLocation(n.pathnameBase).pathname:n.pathnameBase])})),d,o,i);return a&&A?ot.createElement(zb.Provider,{value:{location:_extends$2({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:kb.Pop}},A):A}function DefaultErrorComponent(){let n=useRouteError();let a=isRouteErrorResponse(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n);let o=n instanceof Error?n.stack:null;let i="rgba(200,200,200, 0.5)";let u={padding:"0.5rem",backgroundColor:i};let d=null;return ot.createElement(ot.Fragment,null,ot.createElement("h2",null,"Unexpected Application Error!"),ot.createElement("h3",{style:{fontStyle:"italic"}},a),o?ot.createElement("pre",{style:u},o):null,d)}const Db=ot.createElement(DefaultErrorComponent,null);class $b extends ot.Component{constructor(n){super(n);this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,a){return a.location!==n.location||"idle"!==a.revalidation&&"idle"===n.revalidation?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:void 0!==n.error?n.error:a.error,location:a.location,revalidation:n.revalidation||a.revalidation}}componentDidCatch(n,a){console.error("React Router caught the following error during render",n,a)}render(){return void 0!==this.state.error?ot.createElement(Fb.Provider,{value:this.props.routeContext},ot.createElement(Lb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(n){let{routeContext:a,match:o,children:i}=n;let u=ot.useContext(Rb);u&&u.static&&u.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=o.route.id);return ot.createElement(Fb.Provider,{value:a},i)}function _renderMatches(n,a,o,i){var u;void 0===a&&(a=[]);void 0===o&&(o=null);void 0===i&&(i=null);if(null==n){var d;if(null==(d=o)||!d.errors)return null;n=o.matches}let m=n;let g=null==(u=o)?void 0:u.errors;if(null!=g){let n=m.findIndex(n=>n.route.id&&(null==g?void 0:g[n.route.id]));n>=0?void 0:invariant(!1);m=m.slice(0,Math.min(m.length,n+1))}let y=!1;let v=-1;if(o&&i&&i.v7_partialHydration)for(let x=0;x<m.length;x++){let n=m[x];(n.route.HydrateFallback||n.route.hydrateFallbackElement)&&(v=x);if(n.route.id){let{loaderData:a,errors:i}=o;let u=n.route.loader&&void 0===a[n.route.id]&&(!i||void 0===i[n.route.id]);if(n.route.lazy||u){y=!0;m=v>=0?m.slice(0,v+1):[m[0]];break}}}return m.reduceRight((n,i,u)=>{let d;let x=!1;let N=null;let k=null;if(o){d=g&&i.route.id?g[i.route.id]:void 0;N=i.route.errorElement||Db;if(y)if(v<0&&0===u){warningOnce("route-fallback");x=!0;k=null}else if(v===u){x=!0;k=i.route.hydrateFallbackElement||null}}let E=a.concat(m.slice(0,u+1));let getChildren=()=>{let a;a=d?N:x?k:i.route.Component?ot.createElement(i.route.Component,null):i.route.element?i.route.element:n;return ot.createElement(RenderedRoute,{match:i,routeContext:{outlet:n,matches:E,isDataRoute:null!=o},children:a})};return o&&(i.route.ErrorBoundary||i.route.errorElement||0===u)?ot.createElement($b,{location:o.location,revalidation:o.revalidation,component:N,error:d,children:getChildren(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):getChildren()},null)}var Ub=function(n){n.UseBlocker="useBlocker";n.UseRevalidator="useRevalidator";n.UseNavigateStable="useNavigate";return n}(Ub||{});var Wb=function(n){n.UseBlocker="useBlocker";n.UseLoaderData="useLoaderData";n.UseActionData="useActionData";n.UseRouteError="useRouteError";n.UseNavigation="useNavigation";n.UseRouteLoaderData="useRouteLoaderData";n.UseMatches="useMatches";n.UseRevalidator="useRevalidator";n.UseNavigateStable="useNavigate";n.UseRouteId="useRouteId";return n}(Wb||{});function useDataRouterContext(n){let a=ot.useContext(Rb);a?void 0:invariant(!1);return a}function useDataRouterState(n){let a=ot.useContext(Bb);a?void 0:invariant(!1);return a}function useRouteContext(n){let a=ot.useContext(Fb);a?void 0:invariant(!1);return a}function useCurrentRouteId(n){let a=useRouteContext();let o=a.matches[a.matches.length-1];o.route.id?void 0:invariant(!1);return o.route.id}function useRouteError(){var n;let a=ot.useContext(Lb);let o=useDataRouterState();let i=useCurrentRouteId();return void 0!==a?a:null==(n=o.errors)?void 0:n[i]}function useNavigateStable(){let{router:n}=useDataRouterContext(Ub.UseNavigateStable);let a=useCurrentRouteId(Wb.UseNavigateStable);let o=ot.useRef(!1);useIsomorphicLayoutEffect$1(()=>{o.current=!0});let i=ot.useCallback(function(i,u){void 0===u&&(u={});o.current&&("number"==typeof i?n.navigate(i):n.navigate(i,_extends$2({fromRouteId:a},u)))},[n,a]);return i}const Hb={};function warningOnce(n,a,o){Hb[n]||(Hb[n]=!0)}function Route(n){invariant(!1)}function Router(n){let{basename:a="/",children:o=null,location:i,navigationType:u=kb.Pop,navigator:d,static:m=!1,future:g}=n;useInRouterContext()?invariant(!1):void 0;let y=a.replace(/^\/*/,"/");let v=ot.useMemo(()=>({basename:y,navigator:d,static:m,future:_extends$2({v7_relativeSplatPath:!1},g)}),[y,g,d,m]);"string"==typeof i&&(i=parsePath(i));let{pathname:x="/",search:N="",hash:k="",state:E=null,key:S="default"}=i;let A=ot.useMemo(()=>{let n=stripBasename(x,y);return null==n?null:{location:{pathname:n,search:N,hash:k,state:E,key:S},navigationType:u}},[y,x,N,k,E,S,u]);return null==A?null:ot.createElement(Mb.Provider,{value:v},ot.createElement(zb.Provider,{children:o,value:A}))}function Routes(n){let{children:a,location:o}=n;return useRoutes(createRoutesFromChildren(a),o)}new Promise(()=>{});function createRoutesFromChildren(n,a){void 0===a&&(a=[]);let o=[];ot.Children.forEach(n,(n,i)=>{if(!ot.isValidElement(n))return;let u=[...a,i];if(n.type===ot.Fragment){o.push.apply(o,createRoutesFromChildren(n.props.children,u));return}n.type!==Route?invariant(!1):void 0;n.props.index&&n.props.children?invariant(!1):void 0;let d={id:n.props.id||u.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:null!=n.props.ErrorBoundary||null!=n.props.errorElement,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(d.children=createRoutesFromChildren(n.props.children,u));o.push(d)});return o}
/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){_extends$1=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n};return _extends$1.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(n,a){if(null==n)return{};var o={};var i=Object.keys(n);var u,d;for(d=0;d<i.length;d++){u=i[d];a.indexOf(u)>=0||(o[u]=n[u])}return o}function isModifiedEvent(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function shouldProcessLinkClick(n,a){return!(0!==n.button||a&&"_self"!==a||isModifiedEvent(n))}const qb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];const Qb="6";try{window.__reactRouterVersion=Qb}catch(nL){}const ev="startTransition";const tv=ct[ev];function BrowserRouter(n){let{basename:a,children:o,future:i,window:u}=n;let d=ot.useRef();null==d.current&&(d.current=createBrowserHistory({window:u,v5Compat:!0}));let m=d.current;let[g,y]=ot.useState({action:m.action,location:m.location});let{v7_startTransition:v}=i||{};let x=ot.useCallback(n=>{v&&tv?tv(()=>y(n)):y(n)},[y,v]);ot.useLayoutEffect(()=>m.listen(x),[m,x]);return ot.createElement(Router,{basename:a,children:o,location:g.location,navigationType:g.action,navigator:m,future:i})}const nv="undefined"!=typeof window&&"undefined"!=typeof window.document&&"undefined"!=typeof window.document.createElement;const rv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;const sv=ot.forwardRef(function(n,a){let{onClick:o,relative:i,reloadDocument:u,replace:d,state:m,target:g,to:y,preventScrollReset:v,unstable_viewTransition:x}=n,N=_objectWithoutPropertiesLoose$1(n,qb);let{basename:k}=ot.useContext(Mb);let E;let S=!1;if("string"==typeof y&&rv.test(y)){E=y;if(nv)try{let n=new URL(window.location.href);let a=y.startsWith("//")?new URL(n.protocol+y):new URL(y);let o=stripBasename(a.pathname,k);a.origin===n.origin&&null!=o?y=o+a.search+a.hash:S=!0}catch(nL){}}let A=useHref(y,{relative:i});let _=useLinkClickHandler(y,{replace:d,state:m,target:g,preventScrollReset:v,relative:i,unstable_viewTransition:x});function handleClick(n){o&&o(n);n.defaultPrevented||_(n)}return ot.createElement("a",_extends$1({},N,{href:E||A,onClick:S||u?o:handleClick,ref:a,target:g}))});var av;!function(n){n.UseScrollRestoration="useScrollRestoration";n.UseSubmit="useSubmit";n.UseSubmitFetcher="useSubmitFetcher";n.UseFetcher="useFetcher";n.useViewTransitionState="useViewTransitionState"}(av||(av={}));var ov;!function(n){n.UseFetcher="useFetcher";n.UseFetchers="useFetchers";n.UseScrollRestoration="useScrollRestoration"}(ov||(ov={}));function useLinkClickHandler(n,a){let{target:o,replace:i,state:u,preventScrollReset:d,relative:m,unstable_viewTransition:g}=void 0===a?{}:a;let y=useNavigate();let v=useLocation();let x=useResolvedPath(n,{relative:m});return ot.useCallback(a=>{if(shouldProcessLinkClick(a,o)){a.preventDefault();let o=void 0!==i?i:createPath(v)===createPath(x);y(n,{replace:o,state:u,preventScrollReset:d,relative:m,unstable_viewTransition:g})}},[v,y,x,i,u,o,n,d,m,g])}const iv={projectId:"24290d0dec9f291cdba39d39f76c1c33",chains:[{id:50312,name:"Somnia Testnet",nativeCurrency:{name:"Somnia Test Token",symbol:"STT",decimals:18},rpcUrls:{default:{http:["https://dream-rpc.somnia.network/"]},public:{http:["https://dream-rpc.somnia.network/"]}},blockExplorers:{default:{name:"Shannon Explorer",url:"https://shannon-explorer.somnia.network/"}},testnet:!0,chainNamespace:"eip155"}]};const cv=iv.chains[0];const useReownWallet=()=>{const{address:n,isConnected:a}=useAccount();const o=useChainId();const{data:i}=useBalance({address:n});const{disconnect:u}=useDisconnect();const{connect:d,connectors:m}=useConnect();const{switchChainAsync:g}=useSwitchChain();const[y,v]=ot.useState(null);const[x,N]=ot.useState(!1);const fetchBalance=async(n,a)=>{if(n&&a)try{N(!0);const a=await fetch("https://dream-rpc.somnia.network/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"eth_getBalance",params:[n,"latest"],id:1})});const o=await a.json();if(o.result){const n=BigInt(o.result);const a=Number(n)/Math.pow(10,18);v(a.toFixed(4))}}catch(o){console.error("Failed to fetch balance:",o);v("0.00")}finally{N(!1)}};ot.useEffect(()=>{n&&o?fetchBalance(n,o):v(null)},[n,o]);const switchNetwork2=async n=>{try{console.log("[Wallet] switchNetwork requested:",n,"current:",o);if(o===n){console.log("[Wallet] already on target chain");return{success:!0}}if("function"==typeof g)try{console.log("[Wallet] trying wagmi switchChainAsync");await g({chainId:n,chain:cv});console.log("[Wallet] wagmi switchChainAsync success");return{success:!0}}catch(a){console.warn("[Wallet] wagmi switchChainAsync error:",a?.message||a)}if("undefined"!=typeof window.ethereum)try{console.log("[Wallet] trying window.ethereum wallet_switchEthereumChain");await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${n.toString(16)}`}]});console.log("[Wallet] window.ethereum switch success");return{success:!0}}catch(i){console.warn("[Wallet] window.ethereum switch error:",i?.code,i?.message||i);if(4902===i.code)try{console.log("[Wallet] trying wallet_addEthereumChain");await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:`0x${n.toString(16)}`,chainName:"Somnia Testnet",nativeCurrency:{name:"Somnia Test Token",symbol:"STT",decimals:18},rpcUrls:["https://dream-rpc.somnia.network/"],blockExplorerUrls:["https://shannon-explorer.somnia.network/"]}]});console.log("[Wallet] addEthereumChain success, retrying wagmi switch");if("function"==typeof g){await g({chainId:n,chain:cv});return{success:!0}}return{success:!0}}catch(u){console.error("Failed to add network:",u);return{success:!1,error:u}}return{success:!1,error:i}}return{success:!1,error:"No ethereum provider available"}}catch(d){console.error("[Wallet] switchNetwork fatal error:",d);return{success:!1,error:d}}};const getEnsName2=async n=>null;const connectWallet=async n=>{try{console.log("[Wallet] connect requested",n);const a=n?.connectorId?m.find(a=>a.id===n.connectorId):n?.connectorName?m.find(a=>(a.name||"").toLowerCase().includes(String(n.connectorName).toLowerCase())):null;if(a){const n=await d({connector:a,chainId:cv.id});console.log("[Wallet] connect via preferred result:",n);return{success:!0,result:n}}if(m.length>0){const n=await d({connector:m[0],chainId:cv.id});console.log("[Wallet] connect via fallback result:",n);return{success:!0,result:n}}return{success:!1,error:new Error("No connectors available")}}catch(a){console.error("Failed to connect:",a);return{success:!1,error:a}}};const disconnectWallet=async()=>{try{v(null);N(!1);u()}catch(n){console.error("Failed to disconnect:",n);throw n}};return{address:n,isConnected:a,chainId:o,isLoading:!1,connect:connectWallet,connectors:m,disconnect:disconnectWallet,switchNetwork:switchNetwork2,balance:y||(i?Number(i.value)/Math.pow(10,i.decimals):null),isLoadingBalance:x,getEnsName:getEnsName2,reown:{appKitState:{initialized:!0},appKitNetwork:{chainId:o},appKitAccount:{address:n},appKitBalance:{balance:i},appKit:null,disconnectHook:{disconnect:disconnectWallet}}}};const useAllCollections=()=>{const[n,a]=ot.useState([]);const[o,i]=ot.useState(!0);const[u,d]=ot.useState(null);const[m,g]=ot.useState(0);const shouldRefetch=()=>{const n=Date.now();const a=n-m;return a>6e5};const fetchAllCollections=async(o=!1)=>{if(!o&&!shouldRefetch()&&n.length>0)console.log("📦 Using cached all collections data");else try{console.log("🔄 Fetching all collections from API...");const n=new AbortController;const o=setTimeout(()=>n.abort(),1e4);const i=await fetch("/api/active-collections",{method:"GET",headers:{"Content-Type":"application/json"},signal:n.signal});clearTimeout(o);if(!i.ok){if(404===i.status)throw new Error("Collections data not available yet. Please wait for the indexer to run.");if(429===i.status)throw new Error("Too many requests. Please wait a moment and try again.");throw new Error(`HTTP ${i.status}: ${i.statusText}`)}const u=await i.json();console.log("✅ Received all collections from API:",{totalCollections:u.totalCollections,validCollections:u.validCollections,activeCollections:u.activeCollections,lastUpdate:u.lastUpdate,collections:u.collections.map(n=>({address:n.address,name:n.name,description:n.description,symbol:n.symbol,banner:n.banner,metadataBanner:n.metadata?.banner,cover:n.cover,hasBanner:!(!n.banner&&!n.metadata?.banner),hasCover:!!n.cover,nfts:n.nfts||[],hasNFTs:!!(n.nfts&&n.nfts.length>0),firstNFTImage:n.nfts&&n.nfts.length>0?n.nfts[0].image||n.nfts[0].image_url||n.nfts[0].media_url:null,nftsCount:n.nfts?.length||0,firstNFT:n.nfts?.[0]||null}))});a(u.collections||[]);g(Date.now());d(null)}catch(u){console.error("❌ Failed to fetch all collections:",u);"AbortError"===u.name?d("Request timeout. Please check your connection."):u.message.includes("Too many requests")?d("Server is busy. Please wait a moment and refresh."):d(u.message);0===n.length&&a([])}finally{i(!1)}};ot.useEffect(()=>{fetchAllCollections(!0);const n=setInterval(()=>fetchAllCollections(),6e5);return()=>clearInterval(n)},[]);const y=ot.useMemo(()=>n,[n]);return{collections:y,loading:o,error:u,refetch:()=>fetchAllCollections(!0)}};const lv=ot.createContext();const useSearch=()=>{const n=ot.useContext(lv);if(!n)throw new Error("useSearch must be used within a SearchProvider");return n};const SearchProvider=({children:n})=>{const[a,o]=ot.useState("");const[i,u]=ot.useState({priceRange:"all",supplyRange:"all",status:"all"});const[d,m]=ot.useState(!1);const[g,y]=ot.useState({collections:[],nfts:[],isLoading:!1});const[v,x]=ot.useState(!1);const[N,k]=ot.useState([]);const{address:E,isConnected:S}=useReownWallet();const{collections:A}=useAllCollections();ot.useEffect(()=>{A&&A.length>0&&console.log("🔍 SearchContext received allCollections:",{total:A.length,sample:A.slice(0,3).map(n=>({name:n.name,nfts:n.nfts?.length||0,firstNFTImage:n.nfts?.[0]?.image,firstNFT:n.nfts?.[0]}))})},[A]);const _=ot.useCallback((n,a)=>{if(!a||!n)return[];const o=a.toLowerCase();const i=n.filter(n=>n.name?.toLowerCase().includes(o)||n.description?.toLowerCase().includes(o)||n.symbol?.toLowerCase().includes(o));i.length>0&&console.log("🔍 SearchCollections results:",{term:a,total:i.length,sample:i.slice(0,3).map(n=>({name:n.name,nfts:n.nfts?.length||0,firstNFTImage:n.nfts?.[0]?.image,firstNFT:n.nfts?.[0]}))});return i},[]);const j=ot.useCallback((n,a)=>{if(!a||!n)return[];const o=a.toLowerCase();const i=n.filter(n=>n.metadata?.name?.toLowerCase().includes(o)||n.metadata?.description?.toLowerCase().includes(o)||n.collectionName?.toLowerCase().includes(o)||n.id?.toString().includes(o)||n.token?.name?.toLowerCase().includes(o)||n.token?.symbol?.toLowerCase().includes(o));i.length>0&&console.log("🔍 SearchNFTs results:",{term:a,total:i.length,sample:i.slice(0,3).map(n=>({id:n.id,name:n.metadata?.name,collectionName:n.collectionName,directImage:n.image,metadataImage:n.metadata?.image}))});return i},[]);const I=ot.useCallback(async()=>{if(!S||!E)return[];try{console.log("🔍 Fetching user NFTs for search from API...");const n=await fetch(`https://somnia.w3us.site/api/v2/addresses/${E}/nft/collections?type=ERC-721%2CERC-404%2CERC-1155`);if(!n.ok){console.warn("API response not ok:",n.status);return[]}const a=await n.json();if(!a.items||!Array.isArray(a.items)){console.warn("Invalid API response format");return[]}let o=a.items.flatMap(n=>n.token_instances&&Array.isArray(n.token_instances)?n.token_instances.map(a=>({...a,id:a.id,collectionName:n.token?.name||"Unknown",collectionSymbol:n.token?.symbol||"",tokenType:n.token?.type||"ERC-721",token:n.token||{},isFactoryNFT:n.token?.address?.toLowerCase()==="0xb7C9318Ac06AA59fE3cDD8342769361bB0Cc3d09".toLowerCase()})):[]);o.length>0&&console.log("🔍 fetchUserNFTs received NFTs:",{total:o.length,sample:o.slice(0,3).map(n=>({id:n.id,name:n.metadata?.name,collectionName:n.collectionName,directImage:n.image,metadataImage:n.metadata?.image}))});if(!o||0===o.length)try{const n=await fetch(`https://somnia.w3us.site/api/v2/addresses/${E}/nft/tokens?type=ERC-721%2CERC-404%2CERC-1155`);if(n.ok){const a=await n.json();Array.isArray(a.items)&&(o=a.items.map(n=>({...n,id:n.id,collectionName:n.token?.name||"Unknown",collectionSymbol:n.token?.symbol||"",tokenType:n.token?.type||"ERC-721",token:n.token||{},isFactoryNFT:n.token?.address?.toLowerCase()==="0xb7C9318Ac06AA59fE3cDD8342769361bB0Cc3d09".toLowerCase()})))}}catch(nL){console.warn("Fallback token fetch failed:",nL.message)}const i=o.filter((n,a,o)=>a===o.findIndex(a=>a.id===n.id&&a.token?.address===n.token?.address));console.log("✅ Fetched user NFTs for search:",i.length);return i}catch(n){console.warn("Error fetching user NFTs for search:",n);return[]}},[S,E]);ot.useEffect(()=>{let n=!1;const load=async()=>{try{if(S&&E){const a=await I();n||k(Array.isArray(a)?a:[])}else k([])}catch(nL){console.warn("Failed to load user NFTs for search:",nL?.message||nL);n||k([])}};load();return()=>{n=!0}},[S,E,I]);const O=ot.useCallback(async n=>{if(!n||n.trim().length<2)y({collections:[],nfts:[],isLoading:!1});else{y(n=>({...n,isLoading:!0}));try{const a=_(A,n);const o=j(N,n);console.log("🔍 performSearch results:",{term:n,collections:{total:a.length,sample:a.slice(0,3).map(n=>({name:n.name,nfts:n.nfts?.length||0,firstNFTImage:n.nfts?.[0]?.image}))},nfts:{total:o.length,sample:o.slice(0,3).map(n=>({id:n.id,name:n.metadata?.name,collectionName:n.collectionName}))}});y({collections:a,nfts:o,isLoading:!1})}catch(a){console.error("Search error:",a);y({collections:[],nfts:[],isLoading:!1})}}},[A,N,_,j]);const R=ot.useCallback(n=>{o(n);if(n&&n.trim().length>=2){console.log("🔍 updateSearch called with term:",n);O(n);x(!0)}else y({collections:[],nfts:[],isLoading:!1})},[O]);ot.useCallback(()=>{console.log("🔍 handleSearchFocus called, searchTerm:",a);a&&a.trim().length>=2&&x(!0)},[a]);ot.useCallback(()=>{console.log("🔍 handleSearchBlur called");setTimeout(()=>{x(!1)},200)},[]);ot.useCallback(()=>{console.log("🔍 handleViewAllCollections called, collections:",g.collections.length);x(!1)},[g.collections.length]);ot.useCallback(()=>{console.log("🔍 handleViewAllNFTs called, nfts:",g.nfts.length);x(!1)},[g.nfts.length]);ot.useCallback(n=>{console.log("🔍 handleCollectionClick called for collection:",{name:n.name,address:n.address,nfts:n.nfts?.length||0,firstNFTImage:n.nfts?.[0]?.image});x(!1)},[]);ot.useCallback(n=>{console.log("🔍 handleNFTClick called for NFT:",{id:n.id,name:n.metadata?.name,collectionName:n.collectionName,directImage:n.image,metadataImage:n.metadata?.image});x(!1)},[]);const B=ot.useCallback(n=>{console.log("🔍 updateFilters called with:",n);u(a=>({...a,...n}))},[]);ot.useCallback(()=>{console.log("🔍 resetFilters called");u({priceRange:"all",supplyRange:"all",status:"all"})},[]);const M=ot.useCallback(()=>{console.log("🔍 clearSearch called");o("");y({collections:[],nfts:[],isLoading:!1});x(!1);m(!1)},[]);const z=ot.useCallback(()=>{x(!1)},[]);ot.useCallback(()=>{console.log("🔍 toggleSearch called, current state:",{isSearchActive:d,showSearchResults:v});m(!d);d||x(!1)},[d]);ot.useEffect(()=>{a.length>=2&&R(a)},[A,a,R]);ot.useCallback(()=>{console.log("🔍 getFilteredResults called with filters:",i);let n=g.collections;let a=g.nfts;"all"!==i.priceRange&&console.log("🔍 Applying price filter:",i.priceRange);"all"!==i.supplyRange&&console.log("🔍 Applying supply filter:",i.supplyRange);"all"!==i.status&&console.log("🔍 Applying status filter:",i.status);return{collections:n,nfts:a}},[g,i]);ot.useCallback(()=>{console.log("🔍 getSearchStats called");const n=g.collections.length+g.nfts.length;const a=n>0;console.log("🔍 Search stats:",{totalResults:n,hasResults:a,collections:g.collections.length,nfts:g.nfts.length,isLoading:g.isLoading});return{totalResults:n,hasResults:a,collections:g.collections.length,nfts:g.nfts.length,isLoading:g.isLoading}},[g]);ot.useCallback(n=>{if(!n||n.length<1)return[];console.log("🔍 getSearchSuggestions called with:",n);const a=[];if(A){const o=A.filter(a=>a.name?.toLowerCase().includes(n.toLowerCase())).slice(0,3).map(n=>({type:"collection",name:n.name,description:n.description,image:n.nfts?.[0]?.image||n.cover}));a.push(...o);console.log("🔍 Collection suggestions:",o)}if(N){const o=N.filter(a=>a.metadata?.name?.toLowerCase().includes(n.toLowerCase())).slice(0,2).map(n=>({type:"nft",name:n.metadata?.name,description:n.collectionName,image:n.image||n.metadata?.image}));a.push(...o);console.log("🔍 NFT suggestions:",o)}console.log("🔍 Total suggestions:",a.length);return a},[A,N]);ot.useCallback(()=>{console.log("🔍 getSearchHistory called");const n=[];console.log("🔍 Search history:",n);return n},[]);ot.useCallback(n=>{console.log("🔍 addRecentSearch called with:",n);console.log("🔍 Adding recent search:",n)},[]);ot.useCallback(()=>{console.log("🔍 clearRecentSearches called");console.log("🔍 Clearing recent searches")},[]);const L={searchTerm:a,filters:i,isSearchActive:d,searchResults:g,showSearchResults:v,updateSearch:R,updateFilters:B,clearSearch:M,hideSearchResults:z};return at.jsx(lv.Provider,{value:L,children:n})};var uv={};var dv={};var hv;function requireBase64Js(){if(hv)return dv;hv=1;dv.byteLength=byteLength;dv.toByteArray=toByteArray;dv.fromByteArray=fromByteArray;var n=[];var a=[];var o="undefined"!=typeof Uint8Array?Uint8Array:Array;var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var u=0,d=i.length;u<d;++u){n[u]=i[u];a[i.charCodeAt(u)]=u}a["-".charCodeAt(0)]=62;a["_".charCodeAt(0)]=63;function getLens(n){var a=n.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=n.indexOf("=");-1===o&&(o=a);var i=o===a?0:4-o%4;return[o,i]}function byteLength(n){var a=getLens(n);var o=a[0];var i=a[1];return 3*(o+i)/4-i}function _byteLength(n,a,o){return 3*(a+o)/4-o}function toByteArray(n){var i;var u=getLens(n);var d=u[0];var m=u[1];var g=new o(_byteLength(n,d,m));var y=0;var v=m>0?d-4:d;var x;for(x=0;x<v;x+=4){i=a[n.charCodeAt(x)]<<18|a[n.charCodeAt(x+1)]<<12|a[n.charCodeAt(x+2)]<<6|a[n.charCodeAt(x+3)];g[y++]=i>>16&255;g[y++]=i>>8&255;g[y++]=255&i}if(2===m){i=a[n.charCodeAt(x)]<<2|a[n.charCodeAt(x+1)]>>4;g[y++]=255&i}if(1===m){i=a[n.charCodeAt(x)]<<10|a[n.charCodeAt(x+1)]<<4|a[n.charCodeAt(x+2)]>>2;g[y++]=i>>8&255;g[y++]=255&i}return g}function tripletToBase64(a){return n[a>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]}function encodeChunk(n,a,o){var i;var u=[];for(var d=a;d<o;d+=3){i=(n[d]<<16&16711680)+(n[d+1]<<8&65280)+(255&n[d+2]);u.push(tripletToBase64(i))}return u.join("")}function fromByteArray(a){var o;var i=a.length;var u=i%3;var d=[];var m=16383;for(var g=0,y=i-u;g<y;g+=m)d.push(encodeChunk(a,g,g+m>y?y:g+m));if(1===u){o=a[i-1];d.push(n[o>>2]+n[o<<4&63]+"==")}else if(2===u){o=(a[i-2]<<8)+a[i-1];d.push(n[o>>10]+n[o>>4&63]+n[o<<2&63]+"=")}return d.join("")}return dv}var fv={};
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var pv;function requireIeee754(){if(pv)return fv;pv=1;fv.read=function(n,a,o,i,u){var d,m;var g=8*u-i-1;var y=(1<<g)-1;var v=y>>1;var x=-7;var N=o?u-1:0;var k=o?-1:1;var E=n[a+N];N+=k;d=E&(1<<-x)-1;E>>=-x;x+=g;for(;x>0;d=256*d+n[a+N],N+=k,x-=8);m=d&(1<<-x)-1;d>>=-x;x+=i;for(;x>0;m=256*m+n[a+N],N+=k,x-=8);if(0===d)d=1-v;else{if(d===y)return m?NaN:1/0*(E?-1:1);m+=Math.pow(2,i);d-=v}return(E?-1:1)*m*Math.pow(2,d-i)};fv.write=function(n,a,o,i,u,d){var m,g,y;var v=8*d-u-1;var x=(1<<v)-1;var N=x>>1;var k=23===u?Math.pow(2,-24)-Math.pow(2,-77):0;var E=i?0:d-1;var S=i?1:-1;var A=a<0||0===a&&1/a<0?1:0;a=Math.abs(a);if(isNaN(a)||a===1/0){g=isNaN(a)?1:0;m=x}else{m=Math.floor(Math.log(a)/Math.LN2);if(a*(y=Math.pow(2,-m))<1){m--;y*=2}a+=m+N>=1?k/y:k*Math.pow(2,1-N);if(a*y>=2){m++;y/=2}if(m+N>=x){g=0;m=x}else if(m+N>=1){g=(a*y-1)*Math.pow(2,u);m+=N}else{g=a*Math.pow(2,N-1)*Math.pow(2,u);m=0}}for(;u>=8;n[o+E]=255&g,E+=S,g/=256,u-=8);m=m<<u|g;v+=u;for(;v>0;n[o+E]=255&m,E+=S,m/=256,v-=8);n[o+E-S]|=128*A};return fv}
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var mv;function requireBuffer(){if(mv)return uv;mv=1;!function(n){const a=requireBase64Js();const o=requireIeee754();const i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=Buffer2;n.SlowBuffer=SlowBuffer;n.INSPECT_MAX_BYTES=50;const u=2147483647;n.kMaxLength=u;Buffer2.TYPED_ARRAY_SUPPORT=typedArraySupport();Buffer2.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function typedArraySupport(){try{const n=new Uint8Array(1);const a={foo:function(){return 42}};Object.setPrototypeOf(a,Uint8Array.prototype);Object.setPrototypeOf(n,a);return 42===n.foo()}catch(nL){return!1}}Object.defineProperty(Buffer2.prototype,"parent",{enumerable:!0,get:function(){if(Buffer2.isBuffer(this))return this.buffer}});Object.defineProperty(Buffer2.prototype,"offset",{enumerable:!0,get:function(){if(Buffer2.isBuffer(this))return this.byteOffset}});function createBuffer(n){if(n>u)throw new RangeError('The value "'+n+'" is invalid for option "size"');const a=new Uint8Array(n);Object.setPrototypeOf(a,Buffer2.prototype);return a}function Buffer2(n,a,o){if("number"==typeof n){if("string"==typeof a)throw new TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(n)}return from2(n,a,o)}Buffer2.poolSize=8192;function from2(n,a,o){if("string"==typeof n)return fromString2(n,a);if(ArrayBuffer.isView(n))return fromArrayView(n);if(null==n)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);if(isInstance(n,ArrayBuffer)||n&&isInstance(n.buffer,ArrayBuffer))return fromArrayBuffer(n,a,o);if("undefined"!=typeof SharedArrayBuffer&&(isInstance(n,SharedArrayBuffer)||n&&isInstance(n.buffer,SharedArrayBuffer)))return fromArrayBuffer(n,a,o);if("number"==typeof n)throw new TypeError('The "value" argument must not be of type number. Received type number');const i=n.valueOf&&n.valueOf();if(null!=i&&i!==n)return Buffer2.from(i,a,o);const u=fromObject(n);if(u)return u;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof n[Symbol.toPrimitive])return Buffer2.from(n[Symbol.toPrimitive]("string"),a,o);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n)}Buffer2.from=function(n,a,o){return from2(n,a,o)};Object.setPrototypeOf(Buffer2.prototype,Uint8Array.prototype);Object.setPrototypeOf(Buffer2,Uint8Array);function assertSize2(n){if("number"!=typeof n)throw new TypeError('"size" argument must be of type number');if(n<0)throw new RangeError('The value "'+n+'" is invalid for option "size"')}function alloc(n,a,o){assertSize2(n);return n<=0?createBuffer(n):void 0!==a?"string"==typeof o?createBuffer(n).fill(a,o):createBuffer(n).fill(a):createBuffer(n)}Buffer2.alloc=function(n,a,o){return alloc(n,a,o)};function allocUnsafe(n){assertSize2(n);return createBuffer(n<0?0:0|checked(n))}Buffer2.allocUnsafe=function(n){return allocUnsafe(n)};Buffer2.allocUnsafeSlow=function(n){return allocUnsafe(n)};function fromString2(n,a){"string"==typeof a&&""!==a||(a="utf8");if(!Buffer2.isEncoding(a))throw new TypeError("Unknown encoding: "+a);const o=0|byteLength(n,a);let i=createBuffer(o);const u=i.write(n,a);u!==o&&(i=i.slice(0,u));return i}function fromArrayLike(n){const a=n.length<0?0:0|checked(n.length);const o=createBuffer(a);for(let i=0;i<a;i+=1)o[i]=255&n[i];return o}function fromArrayView(n){if(isInstance(n,Uint8Array)){const a=new Uint8Array(n);return fromArrayBuffer(a.buffer,a.byteOffset,a.byteLength)}return fromArrayLike(n)}function fromArrayBuffer(n,a,o){if(a<0||n.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(n.byteLength<a+(o||0))throw new RangeError('"length" is outside of buffer bounds');let i;i=void 0===a&&void 0===o?new Uint8Array(n):void 0===o?new Uint8Array(n,a):new Uint8Array(n,a,o);Object.setPrototypeOf(i,Buffer2.prototype);return i}function fromObject(n){if(Buffer2.isBuffer(n)){const a=0|checked(n.length);const o=createBuffer(a);if(0===o.length)return o;n.copy(o,0,0,a);return o}return void 0!==n.length?"number"!=typeof n.length||numberIsNaN(n.length)?createBuffer(0):fromArrayLike(n):"Buffer"===n.type&&Array.isArray(n.data)?fromArrayLike(n.data):void 0}function checked(n){if(n>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return 0|n}function SlowBuffer(n){+n!=n&&(n=0);return Buffer2.alloc(+n)}Buffer2.isBuffer=function(n){return null!=n&&!0===n._isBuffer&&n!==Buffer2.prototype};Buffer2.compare=function(n,a){isInstance(n,Uint8Array)&&(n=Buffer2.from(n,n.offset,n.byteLength));isInstance(a,Uint8Array)&&(a=Buffer2.from(a,a.offset,a.byteLength));if(!Buffer2.isBuffer(n)||!Buffer2.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(n===a)return 0;let o=n.length;let i=a.length;for(let u=0,d=Math.min(o,i);u<d;++u)if(n[u]!==a[u]){o=n[u];i=a[u];break}return o<i?-1:i<o?1:0};Buffer2.isEncoding=function(n){switch(String(n).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Buffer2.concat=function(n,a){if(!Array.isArray(n))throw new TypeError('"list" argument must be an Array of Buffers');if(0===n.length)return Buffer2.alloc(0);let o;if(void 0===a){a=0;for(o=0;o<n.length;++o)a+=n[o].length}const i=Buffer2.allocUnsafe(a);let u=0;for(o=0;o<n.length;++o){let a=n[o];if(isInstance(a,Uint8Array))if(u+a.length>i.length){Buffer2.isBuffer(a)||(a=Buffer2.from(a));a.copy(i,u)}else Uint8Array.prototype.set.call(i,a,u);else{if(!Buffer2.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,u)}u+=a.length}return i};function byteLength(n,a){if(Buffer2.isBuffer(n))return n.length;if(ArrayBuffer.isView(n)||isInstance(n,ArrayBuffer))return n.byteLength;if("string"!=typeof n)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof n);const o=n.length;const i=arguments.length>2&&!0===arguments[2];if(!i&&0===o)return 0;let u=!1;for(;;)switch(a){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":return utf8ToBytes2(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*o;case"hex":return o>>>1;case"base64":return base64ToBytes(n).length;default:if(u)return i?-1:utf8ToBytes2(n).length;a=(""+a).toLowerCase();u=!0}}Buffer2.byteLength=byteLength;function slowToString(n,a,o){let i=!1;(void 0===a||a<0)&&(a=0);if(a>this.length)return"";(void 0===o||o>this.length)&&(o=this.length);if(o<=0)return"";o>>>=0;a>>>=0;if(o<=a)return"";n||(n="utf8");for(;;)switch(n){case"hex":return hexSlice(this,a,o);case"utf8":case"utf-8":return utf8Slice(this,a,o);case"ascii":return asciiSlice(this,a,o);case"latin1":case"binary":return latin1Slice(this,a,o);case"base64":return base64Slice(this,a,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,a,o);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase();i=!0}}Buffer2.prototype._isBuffer=!0;function swap(n,a,o){const i=n[a];n[a]=n[o];n[o]=i}Buffer2.prototype.swap16=function(){const n=this.length;if(n%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let a=0;a<n;a+=2)swap(this,a,a+1);return this};Buffer2.prototype.swap32=function(){const n=this.length;if(n%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let a=0;a<n;a+=4){swap(this,a,a+3);swap(this,a+1,a+2)}return this};Buffer2.prototype.swap64=function(){const n=this.length;if(n%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let a=0;a<n;a+=8){swap(this,a,a+7);swap(this,a+1,a+6);swap(this,a+2,a+5);swap(this,a+3,a+4)}return this};Buffer2.prototype.toString=function(){const n=this.length;return 0===n?"":0===arguments.length?utf8Slice(this,0,n):slowToString.apply(this,arguments)};Buffer2.prototype.toLocaleString=Buffer2.prototype.toString;Buffer2.prototype.equals=function(n){if(!Buffer2.isBuffer(n))throw new TypeError("Argument must be a Buffer");return this===n||0===Buffer2.compare(this,n)};Buffer2.prototype.inspect=function(){let a="";const o=n.INSPECT_MAX_BYTES;a=this.toString("hex",0,o).replace(/(.{2})/g,"$1 ").trim();this.length>o&&(a+=" ... ");return"<Buffer "+a+">"};i&&(Buffer2.prototype[i]=Buffer2.prototype.inspect);Buffer2.prototype.compare=function(n,a,o,i,u){isInstance(n,Uint8Array)&&(n=Buffer2.from(n,n.offset,n.byteLength));if(!Buffer2.isBuffer(n))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof n);void 0===a&&(a=0);void 0===o&&(o=n?n.length:0);void 0===i&&(i=0);void 0===u&&(u=this.length);if(a<0||o>n.length||i<0||u>this.length)throw new RangeError("out of range index");if(i>=u&&a>=o)return 0;if(i>=u)return-1;if(a>=o)return 1;a>>>=0;o>>>=0;i>>>=0;u>>>=0;if(this===n)return 0;let d=u-i;let m=o-a;const g=Math.min(d,m);const y=this.slice(i,u);const v=n.slice(a,o);for(let x=0;x<g;++x)if(y[x]!==v[x]){d=y[x];m=v[x];break}return d<m?-1:m<d?1:0};function bidirectionalIndexOf(n,a,o,i,u){if(0===n.length)return-1;if("string"==typeof o){i=o;o=0}else o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648);o=+o;numberIsNaN(o)&&(o=u?0:n.length-1);o<0&&(o=n.length+o);if(o>=n.length){if(u)return-1;o=n.length-1}else if(o<0){if(!u)return-1;o=0}"string"==typeof a&&(a=Buffer2.from(a,i));if(Buffer2.isBuffer(a))return 0===a.length?-1:arrayIndexOf(n,a,o,i,u);if("number"==typeof a){a&=255;return"function"==typeof Uint8Array.prototype.indexOf?u?Uint8Array.prototype.indexOf.call(n,a,o):Uint8Array.prototype.lastIndexOf.call(n,a,o):arrayIndexOf(n,[a],o,i,u)}throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(n,a,o,i,u){let d=1;let m=n.length;let g=a.length;if(void 0!==i){i=String(i).toLowerCase();if("ucs2"===i||"ucs-2"===i||"utf16le"===i||"utf-16le"===i){if(n.length<2||a.length<2)return-1;d=2;m/=2;g/=2;o/=2}}function read(n,a){return 1===d?n[a]:n.readUInt16BE(a*d)}let y;if(u){let i=-1;for(y=o;y<m;y++)if(read(n,y)===read(a,-1===i?0:y-i)){-1===i&&(i=y);if(y-i+1===g)return i*d}else{-1!==i&&(y-=y-i);i=-1}}else{o+g>m&&(o=m-g);for(y=o;y>=0;y--){let o=!0;for(let i=0;i<g;i++)if(read(n,y+i)!==read(a,i)){o=!1;break}if(o)return y}}return-1}Buffer2.prototype.includes=function(n,a,o){return-1!==this.indexOf(n,a,o)};Buffer2.prototype.indexOf=function(n,a,o){return bidirectionalIndexOf(this,n,a,o,!0)};Buffer2.prototype.lastIndexOf=function(n,a,o){return bidirectionalIndexOf(this,n,a,o,!1)};function hexWrite(n,a,o,i){o=Number(o)||0;const u=n.length-o;if(i){i=Number(i);i>u&&(i=u)}else i=u;const d=a.length;i>d/2&&(i=d/2);let m;for(m=0;m<i;++m){const i=parseInt(a.substr(2*m,2),16);if(numberIsNaN(i))return m;n[o+m]=i}return m}function utf8Write(n,a,o,i){return blitBuffer(utf8ToBytes2(a,n.length-o),n,o,i)}function asciiWrite(n,a,o,i){return blitBuffer(asciiToBytes(a),n,o,i)}function base64Write(n,a,o,i){return blitBuffer(base64ToBytes(a),n,o,i)}function ucs2Write(n,a,o,i){return blitBuffer(utf16leToBytes(a,n.length-o),n,o,i)}Buffer2.prototype.write=function(n,a,o,i){if(void 0===a){i="utf8";o=this.length;a=0}else if(void 0===o&&"string"==typeof a){i=a;o=this.length;a=0}else{if(!isFinite(a))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");a>>>=0;if(isFinite(o)){o>>>=0;void 0===i&&(i="utf8")}else{i=o;o=void 0}}const u=this.length-a;(void 0===o||o>u)&&(o=u);if(n.length>0&&(o<0||a<0)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let d=!1;for(;;)switch(i){case"hex":return hexWrite(this,n,a,o);case"utf8":case"utf-8":return utf8Write(this,n,a,o);case"ascii":case"latin1":case"binary":return asciiWrite(this,n,a,o);case"base64":return base64Write(this,n,a,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,n,a,o);default:if(d)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase();d=!0}};Buffer2.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(n,o,i){return 0===o&&i===n.length?a.fromByteArray(n):a.fromByteArray(n.slice(o,i))}function utf8Slice(n,a,o){o=Math.min(n.length,o);const i=[];let u=a;for(;u<o;){const a=n[u];let d=null;let m=a>239?4:a>223?3:a>191?2:1;if(u+m<=o){let o,i,g,y;switch(m){case 1:a<128&&(d=a);break;case 2:o=n[u+1];if(128==(192&o)){y=(31&a)<<6|63&o;y>127&&(d=y)}break;case 3:o=n[u+1];i=n[u+2];if(128==(192&o)&&128==(192&i)){y=(15&a)<<12|(63&o)<<6|63&i;y>2047&&(y<55296||y>57343)&&(d=y)}break;case 4:o=n[u+1];i=n[u+2];g=n[u+3];if(128==(192&o)&&128==(192&i)&&128==(192&g)){y=(15&a)<<18|(63&o)<<12|(63&i)<<6|63&g;y>65535&&y<1114112&&(d=y)}}}if(null===d){d=65533;m=1}else if(d>65535){d-=65536;i.push(d>>>10&1023|55296);d=56320|1023&d}i.push(d);u+=m}return decodeCodePointsArray(i)}const d=4096;function decodeCodePointsArray(n){const a=n.length;if(a<=d)return String.fromCharCode.apply(String,n);let o="";let i=0;for(;i<a;)o+=String.fromCharCode.apply(String,n.slice(i,i+=d));return o}function asciiSlice(n,a,o){let i="";o=Math.min(n.length,o);for(let u=a;u<o;++u)i+=String.fromCharCode(127&n[u]);return i}function latin1Slice(n,a,o){let i="";o=Math.min(n.length,o);for(let u=a;u<o;++u)i+=String.fromCharCode(n[u]);return i}function hexSlice(n,a,o){const i=n.length;(!a||a<0)&&(a=0);(!o||o<0||o>i)&&(o=i);let u="";for(let d=a;d<o;++d)u+=y[n[d]];return u}function utf16leSlice(n,a,o){const i=n.slice(a,o);let u="";for(let d=0;d<i.length-1;d+=2)u+=String.fromCharCode(i[d]+256*i[d+1]);return u}Buffer2.prototype.slice=function(n,a){const o=this.length;n=~~n;a=void 0===a?o:~~a;if(n<0){n+=o;n<0&&(n=0)}else n>o&&(n=o);if(a<0){a+=o;a<0&&(a=0)}else a>o&&(a=o);a<n&&(a=n);const i=this.subarray(n,a);Object.setPrototypeOf(i,Buffer2.prototype);return i};function checkOffset(n,a,o){if(n%1!=0||n<0)throw new RangeError("offset is not uint");if(n+a>o)throw new RangeError("Trying to access beyond buffer length")}Buffer2.prototype.readUintLE=Buffer2.prototype.readUIntLE=function(n,a,o){n>>>=0;a>>>=0;o||checkOffset(n,a,this.length);let i=this[n];let u=1;let d=0;for(;++d<a&&(u*=256);)i+=this[n+d]*u;return i};Buffer2.prototype.readUintBE=Buffer2.prototype.readUIntBE=function(n,a,o){n>>>=0;a>>>=0;o||checkOffset(n,a,this.length);let i=this[n+--a];let u=1;for(;a>0&&(u*=256);)i+=this[n+--a]*u;return i};Buffer2.prototype.readUint8=Buffer2.prototype.readUInt8=function(n,a){n>>>=0;a||checkOffset(n,1,this.length);return this[n]};Buffer2.prototype.readUint16LE=Buffer2.prototype.readUInt16LE=function(n,a){n>>>=0;a||checkOffset(n,2,this.length);return this[n]|this[n+1]<<8};Buffer2.prototype.readUint16BE=Buffer2.prototype.readUInt16BE=function(n,a){n>>>=0;a||checkOffset(n,2,this.length);return this[n]<<8|this[n+1]};Buffer2.prototype.readUint32LE=Buffer2.prototype.readUInt32LE=function(n,a){n>>>=0;a||checkOffset(n,4,this.length);return(this[n]|this[n+1]<<8|this[n+2]<<16)+16777216*this[n+3]};Buffer2.prototype.readUint32BE=Buffer2.prototype.readUInt32BE=function(n,a){n>>>=0;a||checkOffset(n,4,this.length);return 16777216*this[n]+(this[n+1]<<16|this[n+2]<<8|this[n+3])};Buffer2.prototype.readBigUInt64LE=defineBigIntMethod(function(n){n>>>=0;validateNumber(n,"offset");const a=this[n];const o=this[n+7];void 0!==a&&void 0!==o||boundsError(n,this.length-8);const i=a+256*this[++n]+65536*this[++n]+this[++n]*2**24;const u=this[++n]+256*this[++n]+65536*this[++n]+o*2**24;return BigInt(i)+(BigInt(u)<<BigInt(32))});Buffer2.prototype.readBigUInt64BE=defineBigIntMethod(function(n){n>>>=0;validateNumber(n,"offset");const a=this[n];const o=this[n+7];void 0!==a&&void 0!==o||boundsError(n,this.length-8);const i=a*2**24+65536*this[++n]+256*this[++n]+this[++n];const u=this[++n]*2**24+65536*this[++n]+256*this[++n]+o;return(BigInt(i)<<BigInt(32))+BigInt(u)});Buffer2.prototype.readIntLE=function(n,a,o){n>>>=0;a>>>=0;o||checkOffset(n,a,this.length);let i=this[n];let u=1;let d=0;for(;++d<a&&(u*=256);)i+=this[n+d]*u;u*=128;i>=u&&(i-=Math.pow(2,8*a));return i};Buffer2.prototype.readIntBE=function(n,a,o){n>>>=0;a>>>=0;o||checkOffset(n,a,this.length);let i=a;let u=1;let d=this[n+--i];for(;i>0&&(u*=256);)d+=this[n+--i]*u;u*=128;d>=u&&(d-=Math.pow(2,8*a));return d};Buffer2.prototype.readInt8=function(n,a){n>>>=0;a||checkOffset(n,1,this.length);return 128&this[n]?-1*(255-this[n]+1):this[n]};Buffer2.prototype.readInt16LE=function(n,a){n>>>=0;a||checkOffset(n,2,this.length);const o=this[n]|this[n+1]<<8;return 32768&o?4294901760|o:o};Buffer2.prototype.readInt16BE=function(n,a){n>>>=0;a||checkOffset(n,2,this.length);const o=this[n+1]|this[n]<<8;return 32768&o?4294901760|o:o};Buffer2.prototype.readInt32LE=function(n,a){n>>>=0;a||checkOffset(n,4,this.length);return this[n]|this[n+1]<<8|this[n+2]<<16|this[n+3]<<24};Buffer2.prototype.readInt32BE=function(n,a){n>>>=0;a||checkOffset(n,4,this.length);return this[n]<<24|this[n+1]<<16|this[n+2]<<8|this[n+3]};Buffer2.prototype.readBigInt64LE=defineBigIntMethod(function(n){n>>>=0;validateNumber(n,"offset");const a=this[n];const o=this[n+7];void 0!==a&&void 0!==o||boundsError(n,this.length-8);const i=this[n+4]+256*this[n+5]+65536*this[n+6]+(o<<24);return(BigInt(i)<<BigInt(32))+BigInt(a+256*this[++n]+65536*this[++n]+this[++n]*2**24)});Buffer2.prototype.readBigInt64BE=defineBigIntMethod(function(n){n>>>=0;validateNumber(n,"offset");const a=this[n];const o=this[n+7];void 0!==a&&void 0!==o||boundsError(n,this.length-8);const i=(a<<24)+65536*this[++n]+256*this[++n]+this[++n];return(BigInt(i)<<BigInt(32))+BigInt(this[++n]*2**24+65536*this[++n]+256*this[++n]+o)});Buffer2.prototype.readFloatLE=function(n,a){n>>>=0;a||checkOffset(n,4,this.length);return o.read(this,n,!0,23,4)};Buffer2.prototype.readFloatBE=function(n,a){n>>>=0;a||checkOffset(n,4,this.length);return o.read(this,n,!1,23,4)};Buffer2.prototype.readDoubleLE=function(n,a){n>>>=0;a||checkOffset(n,8,this.length);return o.read(this,n,!0,52,8)};Buffer2.prototype.readDoubleBE=function(n,a){n>>>=0;a||checkOffset(n,8,this.length);return o.read(this,n,!1,52,8)};function checkInt(n,a,o,i,u,d){if(!Buffer2.isBuffer(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>u||a<d)throw new RangeError('"value" argument is out of bounds');if(o+i>n.length)throw new RangeError("Index out of range")}Buffer2.prototype.writeUintLE=Buffer2.prototype.writeUIntLE=function(n,a,o,i){n=+n;a>>>=0;o>>>=0;if(!i){const i=Math.pow(2,8*o)-1;checkInt(this,n,a,o,i,0)}let u=1;let d=0;this[a]=255&n;for(;++d<o&&(u*=256);)this[a+d]=n/u&255;return a+o};Buffer2.prototype.writeUintBE=Buffer2.prototype.writeUIntBE=function(n,a,o,i){n=+n;a>>>=0;o>>>=0;if(!i){const i=Math.pow(2,8*o)-1;checkInt(this,n,a,o,i,0)}let u=o-1;let d=1;this[a+u]=255&n;for(;--u>=0&&(d*=256);)this[a+u]=n/d&255;return a+o};Buffer2.prototype.writeUint8=Buffer2.prototype.writeUInt8=function(n,a,o){n=+n;a>>>=0;o||checkInt(this,n,a,1,255,0);this[a]=255&n;return a+1};Buffer2.prototype.writeUint16LE=Buffer2.prototype.writeUInt16LE=function(n,a,o){n=+n;a>>>=0;o||checkInt(this,n,a,2,65535,0);this[a]=255&n;this[a+1]=n>>>8;return a+2};Buffer2.prototype.writeUint16BE=Buffer2.prototype.writeUInt16BE=function(n,a,o){n=+n;a>>>=0;o||checkInt(this,n,a,2,65535,0);this[a]=n>>>8;this[a+1]=255&n;return a+2};Buffer2.prototype.writeUint32LE=Buffer2.prototype.writeUInt32LE=function(n,a,o){n=+n;a>>>=0;o||checkInt(this,n,a,4,4294967295,0);this[a+3]=n>>>24;this[a+2]=n>>>16;this[a+1]=n>>>8;this[a]=255&n;return a+4};Buffer2.prototype.writeUint32BE=Buffer2.prototype.writeUInt32BE=function(n,a,o){n=+n;a>>>=0;o||checkInt(this,n,a,4,4294967295,0);this[a]=n>>>24;this[a+1]=n>>>16;this[a+2]=n>>>8;this[a+3]=255&n;return a+4};function wrtBigUInt64LE(n,a,o,i,u){checkIntBI(a,i,u,n,o,7);let d=Number(a&BigInt(4294967295));n[o++]=d;d>>=8;n[o++]=d;d>>=8;n[o++]=d;d>>=8;n[o++]=d;let m=Number(a>>BigInt(32)&BigInt(4294967295));n[o++]=m;m>>=8;n[o++]=m;m>>=8;n[o++]=m;m>>=8;n[o++]=m;return o}function wrtBigUInt64BE(n,a,o,i,u){checkIntBI(a,i,u,n,o,7);let d=Number(a&BigInt(4294967295));n[o+7]=d;d>>=8;n[o+6]=d;d>>=8;n[o+5]=d;d>>=8;n[o+4]=d;let m=Number(a>>BigInt(32)&BigInt(4294967295));n[o+3]=m;m>>=8;n[o+2]=m;m>>=8;n[o+1]=m;m>>=8;n[o]=m;return o+8}Buffer2.prototype.writeBigUInt64LE=defineBigIntMethod(function(n,a=0){return wrtBigUInt64LE(this,n,a,BigInt(0),BigInt("0xffffffffffffffff"))});Buffer2.prototype.writeBigUInt64BE=defineBigIntMethod(function(n,a=0){return wrtBigUInt64BE(this,n,a,BigInt(0),BigInt("0xffffffffffffffff"))});Buffer2.prototype.writeIntLE=function(n,a,o,i){n=+n;a>>>=0;if(!i){const i=Math.pow(2,8*o-1);checkInt(this,n,a,o,i-1,-i)}let u=0;let d=1;let m=0;this[a]=255&n;for(;++u<o&&(d*=256);){n<0&&0===m&&0!==this[a+u-1]&&(m=1);this[a+u]=(n/d|0)-m&255}return a+o};Buffer2.prototype.writeIntBE=function(n,a,o,i){n=+n;a>>>=0;if(!i){const i=Math.pow(2,8*o-1);checkInt(this,n,a,o,i-1,-i)}let u=o-1;let d=1;let m=0;this[a+u]=255&n;for(;--u>=0&&(d*=256);){n<0&&0===m&&0!==this[a+u+1]&&(m=1);this[a+u]=(n/d|0)-m&255}return a+o};Buffer2.prototype.writeInt8=function(n,a,o){n=+n;a>>>=0;o||checkInt(this,n,a,1,127,-128);n<0&&(n=255+n+1);this[a]=255&n;return a+1};Buffer2.prototype.writeInt16LE=function(n,a,o){n=+n;a>>>=0;o||checkInt(this,n,a,2,32767,-32768);this[a]=255&n;this[a+1]=n>>>8;return a+2};Buffer2.prototype.writeInt16BE=function(n,a,o){n=+n;a>>>=0;o||checkInt(this,n,a,2,32767,-32768);this[a]=n>>>8;this[a+1]=255&n;return a+2};Buffer2.prototype.writeInt32LE=function(n,a,o){n=+n;a>>>=0;o||checkInt(this,n,a,4,2147483647,-2147483648);this[a]=255&n;this[a+1]=n>>>8;this[a+2]=n>>>16;this[a+3]=n>>>24;return a+4};Buffer2.prototype.writeInt32BE=function(n,a,o){n=+n;a>>>=0;o||checkInt(this,n,a,4,2147483647,-2147483648);n<0&&(n=4294967295+n+1);this[a]=n>>>24;this[a+1]=n>>>16;this[a+2]=n>>>8;this[a+3]=255&n;return a+4};Buffer2.prototype.writeBigInt64LE=defineBigIntMethod(function(n,a=0){return wrtBigUInt64LE(this,n,a,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});Buffer2.prototype.writeBigInt64BE=defineBigIntMethod(function(n,a=0){return wrtBigUInt64BE(this,n,a,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function checkIEEE754(n,a,o,i,u,d){if(o+i>n.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function writeFloat(n,a,i,u,d){a=+a;i>>>=0;d||checkIEEE754(n,a,i,4);o.write(n,a,i,u,23,4);return i+4}Buffer2.prototype.writeFloatLE=function(n,a,o){return writeFloat(this,n,a,!0,o)};Buffer2.prototype.writeFloatBE=function(n,a,o){return writeFloat(this,n,a,!1,o)};function writeDouble(n,a,i,u,d){a=+a;i>>>=0;d||checkIEEE754(n,a,i,8);o.write(n,a,i,u,52,8);return i+8}Buffer2.prototype.writeDoubleLE=function(n,a,o){return writeDouble(this,n,a,!0,o)};Buffer2.prototype.writeDoubleBE=function(n,a,o){return writeDouble(this,n,a,!1,o)};Buffer2.prototype.copy=function(n,a,o,i){if(!Buffer2.isBuffer(n))throw new TypeError("argument should be a Buffer");o||(o=0);i||0===i||(i=this.length);a>=n.length&&(a=n.length);a||(a=0);i>0&&i<o&&(i=o);if(i===o)return 0;if(0===n.length||0===this.length)return 0;if(a<0)throw new RangeError("targetStart out of bounds");if(o<0||o>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length);n.length-a<i-o&&(i=n.length-a+o);const u=i-o;this===n&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(a,o,i):Uint8Array.prototype.set.call(n,this.subarray(o,i),a);return u};Buffer2.prototype.fill=function(n,a,o,i){if("string"==typeof n){if("string"==typeof a){i=a;a=0;o=this.length}else if("string"==typeof o){i=o;o=this.length}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!Buffer2.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===n.length){const a=n.charCodeAt(0);("utf8"===i&&a<128||"latin1"===i)&&(n=a)}}else"number"==typeof n?n&=255:"boolean"==typeof n&&(n=Number(n));if(a<0||this.length<a||this.length<o)throw new RangeError("Out of range index");if(o<=a)return this;a>>>=0;o=void 0===o?this.length:o>>>0;n||(n=0);let u;if("number"==typeof n)for(u=a;u<o;++u)this[u]=n;else{const d=Buffer2.isBuffer(n)?n:Buffer2.from(n,i);const m=d.length;if(0===m)throw new TypeError('The value "'+n+'" is invalid for argument "value"');for(u=0;u<o-a;++u)this[u+a]=d[u%m]}return this};const m={};function E2(n,a,o){m[n]=class extends o{constructor(){super();Object.defineProperty(this,"message",{value:a.apply(this,arguments),writable:!0,configurable:!0});this.name=`${this.name} [${n}]`;this.stack;delete this.name}get code(){return n}set code(n){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:n,writable:!0})}toString(){return`${this.name} [${n}]: ${this.message}`}}}E2("ERR_BUFFER_OUT_OF_BOUNDS",function(n){return n?`${n} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);E2("ERR_INVALID_ARG_TYPE",function(n,a){return`The "${n}" argument must be of type number. Received type ${typeof a}`},TypeError);E2("ERR_OUT_OF_RANGE",function(n,a,o){let i=`The value of "${n}" is out of range.`;let u=o;if(Number.isInteger(o)&&Math.abs(o)>2**32)u=addNumericalSeparator(String(o));else if("bigint"==typeof o){u=String(o);(o>BigInt(2)**BigInt(32)||o<-(BigInt(2)**BigInt(32)))&&(u=addNumericalSeparator(u));u+="n"}i+=` It must be ${a}. Received ${u}`;return i},RangeError);function addNumericalSeparator(n){let a="";let o=n.length;const i="-"===n[0]?1:0;for(;o>=i+4;o-=3)a=`_${n.slice(o-3,o)}${a}`;return`${n.slice(0,o)}${a}`}function checkBounds(n,a,o){validateNumber(a,"offset");void 0!==n[a]&&void 0!==n[a+o]||boundsError(a,n.length-(o+1))}function checkIntBI(n,a,o,i,u,d){if(n>o||n<a){const o="bigint"==typeof a?"n":"";let i;i=0===a||a===BigInt(0)?`>= 0${o} and < 2${o} ** ${8*(d+1)}${o}`:`>= -(2${o} ** ${8*(d+1)-1}${o}) and < 2 ** ${8*(d+1)-1}${o}`;throw new m.ERR_OUT_OF_RANGE("value",i,n)}checkBounds(i,u,d)}function validateNumber(n,a){if("number"!=typeof n)throw new m.ERR_INVALID_ARG_TYPE(a,"number",n)}function boundsError(n,a,o){if(Math.floor(n)!==n){validateNumber(n,o);throw new m.ERR_OUT_OF_RANGE("offset","an integer",n)}if(a<0)throw new m.ERR_BUFFER_OUT_OF_BOUNDS;throw new m.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${a}`,n)}const g=/[^+/0-9A-Za-z-_]/g;function base64clean(n){n=n.split("=")[0];n=n.trim().replace(g,"");if(n.length<2)return"";for(;n.length%4!=0;)n+="=";return n}function utf8ToBytes2(n,a){a=a||1/0;let o;const i=n.length;let u=null;const d=[];for(let m=0;m<i;++m){o=n.charCodeAt(m);if(o>55295&&o<57344){if(!u){if(o>56319){(a-=3)>-1&&d.push(239,191,189);continue}if(m+1===i){(a-=3)>-1&&d.push(239,191,189);continue}u=o;continue}if(o<56320){(a-=3)>-1&&d.push(239,191,189);u=o;continue}o=65536+(u-55296<<10|o-56320)}else u&&(a-=3)>-1&&d.push(239,191,189);u=null;if(o<128){if((a-=1)<0)break;d.push(o)}else if(o<2048){if((a-=2)<0)break;d.push(o>>6|192,63&o|128)}else if(o<65536){if((a-=3)<0)break;d.push(o>>12|224,o>>6&63|128,63&o|128)}else{if(!(o<1114112))throw new Error("Invalid code point");if((a-=4)<0)break;d.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}}return d}function asciiToBytes(n){const a=[];for(let o=0;o<n.length;++o)a.push(255&n.charCodeAt(o));return a}function utf16leToBytes(n,a){let o,i,u;const d=[];for(let m=0;m<n.length&&!((a-=2)<0);++m){o=n.charCodeAt(m);i=o>>8;u=o%256;d.push(u);d.push(i)}return d}function base64ToBytes(n){return a.toByteArray(base64clean(n))}function blitBuffer(n,a,o,i){let u;for(u=0;u<i&&!(u+o>=a.length||u>=n.length);++u)a[u+o]=n[u];return u}function isInstance(n,a){return n instanceof a||null!=n&&null!=n.constructor&&null!=n.constructor.name&&n.constructor.name===a.name}function numberIsNaN(n){return n!=n}const y=function(){const n="0123456789abcdef";const a=new Array(256);for(let o=0;o<16;++o){const i=16*o;for(let u=0;u<16;++u)a[i+u]=n[o]+n[u]}return a}();function defineBigIntMethod(n){return"undefined"==typeof BigInt?BufferBigIntNotDefined:n}function BufferBigIntNotDefined(){throw new Error("BigInt not supported")}}(uv);return uv}const gv=Symbol();const yv=Object.getPrototypeOf;const bv=new WeakMap;const isObjectToTrack=n=>n&&(bv.has(n)?bv.get(n):yv(n)===Object.prototype||yv(n)===Array.prototype);const getUntracked=n=>isObjectToTrack(n)&&n[gv]||null;const markToTrack=(n,a=!0)=>{bv.set(n,a)};const vv={};const isObject=n=>"object"==typeof n&&null!==n;const canProxyDefault=n=>isObject(n)&&!xv.has(n)&&(Array.isArray(n)||!(Symbol.iterator in n))&&!(n instanceof WeakMap)&&!(n instanceof WeakSet)&&!(n instanceof Error)&&!(n instanceof Number)&&!(n instanceof Date)&&!(n instanceof String)&&!(n instanceof RegExp)&&!(n instanceof ArrayBuffer)&&!(n instanceof Promise);const createSnapshotDefault=(n,a)=>{const o=Nv.get(n);if((null==o?void 0:o[0])===a)return o[1];const i=Array.isArray(n)?[]:Object.create(Object.getPrototypeOf(n));markToTrack(i,!0);Nv.set(n,[a,i]);Reflect.ownKeys(n).forEach(a=>{if(Object.getOwnPropertyDescriptor(i,a))return;const o=Reflect.get(n,a);const{enumerable:u}=Reflect.getOwnPropertyDescriptor(n,a);const d={value:o,enumerable:u,configurable:!0};if(xv.has(o))markToTrack(o,!1);else if(wv.has(o)){const[n,a]=wv.get(o);d.value=createSnapshotDefault(n,a())}Object.defineProperty(i,a,d)});return Object.preventExtensions(i)};const createHandlerDefault=(n,a,o,i)=>({deleteProperty(n,a){const u=Reflect.get(n,a);o(a);const d=Reflect.deleteProperty(n,a);d&&i(["delete",[a],u]);return d},set(u,d,m,g){const y=!n()&&Reflect.has(u,d);const v=Reflect.get(u,d,g);if(y&&(Ev(v,m)||Cv.has(m)&&Ev(v,Cv.get(m))))return!0;o(d);isObject(m)&&(m=getUntracked(m)||m);const x=!wv.has(m)&&Sv(m)?proxy(m):m;a(d,x);Reflect.set(u,d,x,g);i(["set",[d],m,v]);return!0}});const wv=new WeakMap;const xv=new WeakSet;const Nv=new WeakMap;const kv=[1,1];const Cv=new WeakMap;let Ev=Object.is;let newProxy=(n,a)=>new Proxy(n,a);let Sv=canProxyDefault;let Av=createSnapshotDefault;let _v=createHandlerDefault;function proxy(n={}){if(!isObject(n))throw new Error("object required");const a=Cv.get(n);if(a)return a;let o=kv[0];const i=new Set;const notifyUpdate=(n,a=++kv[0])=>{if(o!==a){o=a;i.forEach(o=>o(n,a))}};let u=kv[1];const ensureVersion=(n=++kv[1])=>{if(u!==n&&!i.size){u=n;d.forEach(([a])=>{const i=a[1](n);i>o&&(o=i)})}return o};const createPropListener=n=>(a,o)=>{const i=[...a];i[1]=[n,...i[1]];notifyUpdate(i,o)};const d=new Map;const addPropListener=(n,a)=>{const o=!xv.has(a)&&wv.get(a);if(o){if("production"!==(vv?"production":void 0)&&d.has(n))throw new Error("prop listener already exists");if(i.size){const a=o[2](createPropListener(n));d.set(n,[o,a])}else d.set(n,[o])}};const removePropListener=n=>{var a;const o=d.get(n);if(o){d.delete(n);null==(a=o[1])?void 0:a.call(o)}};const addListener=n=>{i.add(n);1===i.size&&d.forEach(([n,a],o)=>{if("production"!==(vv?"production":void 0)&&a)throw new Error("remove already exists");const i=n[2](createPropListener(o));d.set(o,[n,i])});const removeListener=()=>{i.delete(n);0===i.size&&d.forEach(([n,a],o)=>{if(a){a();d.set(o,[n])}})};return removeListener};let m=!0;const g=_v(()=>m,addPropListener,removePropListener,notifyUpdate);const y=newProxy(n,g);Cv.set(n,y);const v=[n,ensureVersion,addListener];wv.set(y,v);Reflect.ownKeys(n).forEach(a=>{const o=Object.getOwnPropertyDescriptor(n,a);"value"in o&&o.writable&&(y[a]=n[a])});m=!1;return y}function subscribe(n,a,o){const i=wv.get(n);"production"===(vv?"production":void 0)||i||console.warn("Please use proxy object");let u;const d=[];const m=i[2];let g=!1;const listener=n=>{d.push(n);u||(u=Promise.resolve().then(()=>{u=void 0;g&&a(d.splice(0))}))};const y=m(listener);g=!0;return()=>{g=!1;y()}}function snapshot(n){const a=wv.get(n);"production"===(vv?"production":void 0)||a||console.warn("Please use proxy object");const[o,i]=a;return Av(o,i())}function ref(n){xv.add(n);return n}function unstable_getInternalStates(){return{proxyStateMap:wv,refSet:xv,snapCache:Nv,versionHolder:kv,proxyCache:Cv}}function subscribeKey(n,a,o,i){let u=n[a];return subscribe(n,()=>{const i=n[a];Object.is(u,i)||o(u=i)})}const{proxyStateMap:Tv,snapCache:jv}=unstable_getInternalStates();const isProxy$1=n=>Tv.has(n);function proxyMap(n){const a=[];let o=0;const i=new Map;const u=new WeakMap;const registerSnapMap=()=>{const n=jv.get(d);const a=null==n?void 0:n[1];if(a&&!u.has(a)){const n=new Map(i);u.set(a,n)}};const getMapForThis=n=>u.get(n)||i;const d={data:a,index:o,epoch:0,get size(){isProxy$1(this)||registerSnapMap();const n=getMapForThis(this);return n.size},get(n){const a=getMapForThis(this);const o=a.get(n);if(void 0!==o)return this.data[o];this.epoch},has(n){const a=getMapForThis(this);this.epoch;return a.has(n)},set(n,a){if(!isProxy$1(this))throw new Error("Cannot perform mutations on a snapshot");const o=i.get(n);if(void 0===o){i.set(n,this.index);this.data[this.index++]=a}else this.data[o]=a;this.epoch++;return this},delete(n){if(!isProxy$1(this))throw new Error("Cannot perform mutations on a snapshot");const a=i.get(n);if(void 0===a)return!1;delete this.data[a];i.delete(n);this.epoch++;return!0},clear(){if(!isProxy$1(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0;this.index=0;this.epoch++;i.clear()},forEach(n){this.epoch;const a=getMapForThis(this);a.forEach((a,o)=>{n(this.data[a],o,this)})},*entries(){this.epoch;const n=getMapForThis(this);for(const[a,o]of n)yield[a,this.data[o]]},*keys(){this.epoch;const n=getMapForThis(this);for(const a of n.keys())yield a},*values(){this.epoch;const n=getMapForThis(this);for(const a of n.values())yield this.data[a]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}};const m=proxy(d);Object.defineProperties(m,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}});Object.seal(m);return m}var Iv={};const Pv={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos",sui:"Sui",stacks:"Stacks"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:("undefined"!=typeof process&&"undefined"!=typeof Iv?Iv.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}};const Ov={caipNetworkIdToNumber:n=>n?Number(n.split(":")[1]):void 0,parseEvmChainId(n){return"string"==typeof n?this.caipNetworkIdToNumber(n):n},getNetworksByNamespace:(n,a)=>n?.filter(n=>n.chainNamespace===a)||[],getFirstNetworkByNamespace(n,a){return this.getNetworksByNamespace(n,a)[0]},getNetworkNameByCaipNetworkId(n,a){if(!a)return;const o=n.find(n=>n.caipNetworkId===a);if(o)return o.name;const[i]=a.split(":");return Pv.CHAIN_NAME_MAP?.[i]||void 0}};const Rv=["eip155","solana","polkadot","bip122","cosmos","sui","stacks"];var Bv=20,Mv=1,zv=1e6,Fv=1e6,Lv=-7,Dv=21,$v=!1,Uv="[big.js] ",Wv=Uv+"Invalid ",Hv=Wv+"decimal places",qv=Wv+"rounding mode",Gv=Uv+"Division by zero",Vv={},Kv=void 0,Zv=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function _Big_(){function Big2(n){var a=this;if(!(a instanceof Big2))return n===Kv?_Big_():new Big2(n);if(n instanceof Big2){a.s=n.s;a.e=n.e;a.c=n.c.slice()}else{if("string"!=typeof n){if(!0===Big2.strict&&"bigint"!=typeof n)throw TypeError(Wv+"value");n=0===n&&1/n<0?"-0":String(n)}parse$1(a,n)}a.constructor=Big2}Big2.prototype=Vv;Big2.DP=Bv;Big2.RM=Mv;Big2.NE=Lv;Big2.PE=Dv;Big2.strict=$v;Big2.roundDown=0;Big2.roundHalfUp=1;Big2.roundHalfEven=2;Big2.roundUp=3;return Big2}function parse$1(n,a){var o,i,u;if(!Zv.test(a))throw Error(Wv+"number");n.s="-"==a.charAt(0)?(a=a.slice(1),-1):1;(o=a.indexOf("."))>-1&&(a=a.replace(".",""));if((i=a.search(/e/i))>0){o<0&&(o=i);o+=+a.slice(i+1);a=a.substring(0,i)}else o<0&&(o=a.length);u=a.length;for(i=0;i<u&&"0"==a.charAt(i);)++i;if(i==u)n.c=[n.e=0];else{for(;u>0&&"0"==a.charAt(--u););n.e=o-i-1;n.c=[];for(o=0;i<=u;)n.c[o++]=+a.charAt(i++)}return n}function round$1(n,a,o,i){var u=n.c;o===Kv&&(o=n.constructor.RM);if(0!==o&&1!==o&&2!==o&&3!==o)throw Error(qv);if(a<1){i=3===o&&(i||!!u[0])||0===a&&(1===o&&u[0]>=5||2===o&&(u[0]>5||5===u[0]&&(i||u[1]!==Kv)));u.length=1;if(i){n.e=n.e-a+1;u[0]=1}else u[0]=n.e=0}else if(a<u.length){i=1===o&&u[a]>=5||2===o&&(u[a]>5||5===u[a]&&(i||u[a+1]!==Kv||1&u[a-1]))||3===o&&(i||!!u[0]);u.length=a;if(i)for(;++u[--a]>9;){u[a]=0;if(0===a){++n.e;u.unshift(1);break}}for(a=u.length;!u[--a];)u.pop()}return n}function stringify(n,a,o){var i=n.e,u=n.c.join(""),d=u.length;if(a)u=u.charAt(0)+(d>1?"."+u.slice(1):"")+(i<0?"e":"e+")+i;else if(i<0){for(;++i;)u="0"+u;u="0."+u}else if(i>0)if(++i>d)for(i-=d;i--;)u+="0";else i<d&&(u=u.slice(0,i)+"."+u.slice(i));else d>1&&(u=u.charAt(0)+"."+u.slice(1));return n.s<0&&o?"-"+u:u}Vv.abs=function(){var n=new this.constructor(this);n.s=1;return n};Vv.cmp=function(n){var a,o=this,i=o.c,u=(n=new o.constructor(n)).c,d=o.s,m=n.s,g=o.e,y=n.e;if(!i[0]||!u[0])return i[0]?d:u[0]?-m:0;if(d!=m)return d;a=d<0;if(g!=y)return g>y^a?1:-1;m=(g=i.length)<(y=u.length)?g:y;for(d=-1;++d<m;)if(i[d]!=u[d])return i[d]>u[d]^a?1:-1;return g==y?0:g>y^a?1:-1};Vv.div=function(n){var a=this,o=a.constructor,i=a.c,u=(n=new o(n)).c,d=a.s==n.s?1:-1,m=o.DP;if(m!==~~m||m<0||m>zv)throw Error(Hv);if(!u[0])throw Error(Gv);if(!i[0]){n.s=d;n.c=[n.e=0];return n}var g,y,v,x,N,k=u.slice(),E=g=u.length,S=i.length,A=i.slice(0,g),_=A.length,j=n,I=j.c=[],O=0,R=m+(j.e=a.e-n.e)+1;j.s=d;d=R<0?0:R;k.unshift(0);for(;_++<g;)A.push(0);do{for(v=0;v<10;v++){if(g!=(_=A.length))x=g>_?1:-1;else for(N=-1,x=0;++N<g;)if(u[N]!=A[N]){x=u[N]>A[N]?1:-1;break}if(!(x<0))break;for(y=_==g?u:k;_;){if(A[--_]<y[_]){N=_;for(;N&&!A[--N];)A[N]=9;--A[N];A[_]+=10}A[_]-=y[_]}for(;!A[0];)A.shift()}I[O++]=x?v:++v;A[0]&&x?A[_]=i[E]||0:A=[i[E]]}while((E++<S||A[0]!==Kv)&&d--);if(!I[0]&&1!=O){I.shift();j.e--;R--}O>R&&round$1(j,R,o.RM,A[0]!==Kv);return j};Vv.eq=function(n){return 0===this.cmp(n)};Vv.gt=function(n){return this.cmp(n)>0};Vv.gte=function(n){return this.cmp(n)>-1};Vv.lt=function(n){return this.cmp(n)<0};Vv.lte=function(n){return this.cmp(n)<1};Vv.minus=Vv.sub=function(n){var a,o,i,u,d=this,m=d.constructor,g=d.s,y=(n=new m(n)).s;if(g!=y){n.s=-y;return d.plus(n)}var v=d.c.slice(),x=d.e,N=n.c,k=n.e;if(!v[0]||!N[0]){N[0]?n.s=-y:v[0]?n=new m(d):n.s=1;return n}if(g=x-k){if(u=g<0){g=-g;i=v}else{k=x;i=N}i.reverse();for(y=g;y--;)i.push(0);i.reverse()}else{o=((u=v.length<N.length)?v:N).length;for(g=y=0;y<o;y++)if(v[y]!=N[y]){u=v[y]<N[y];break}}if(u){i=v;v=N;N=i;n.s=-n.s}if((y=(o=N.length)-(a=v.length))>0)for(;y--;)v[a++]=0;for(y=a;o>g;){if(v[--o]<N[o]){for(a=o;a&&!v[--a];)v[a]=9;--v[a];v[o]+=10}v[o]-=N[o]}for(;0===v[--y];)v.pop();for(;0===v[0];){v.shift();--k}if(!v[0]){n.s=1;v=[k=0]}n.c=v;n.e=k;return n};Vv.mod=function(n){var a,o=this,i=o.constructor,u=o.s,d=(n=new i(n)).s;if(!n.c[0])throw Error(Gv);o.s=n.s=1;a=1==n.cmp(o);o.s=u;n.s=d;if(a)return new i(o);u=i.DP;d=i.RM;i.DP=i.RM=0;o=o.div(n);i.DP=u;i.RM=d;return this.minus(o.times(n))};Vv.neg=function(){var n=new this.constructor(this);n.s=-n.s;return n};Vv.plus=Vv.add=function(n){var a,o,i,u=this,d=u.constructor;n=new d(n);if(u.s!=n.s){n.s=-n.s;return u.minus(n)}var m=u.e,g=u.c,y=n.e,v=n.c;if(!g[0]||!v[0]){v[0]||(g[0]?n=new d(u):n.s=u.s);return n}g=g.slice();if(a=m-y){if(a>0){y=m;i=v}else{a=-a;i=g}i.reverse();for(;a--;)i.push(0);i.reverse()}if(g.length-v.length<0){i=v;v=g;g=i}a=v.length;for(o=0;a;g[a]%=10)o=(g[--a]=g[a]+v[a]+o)/10|0;if(o){g.unshift(o);++y}for(a=g.length;0===g[--a];)g.pop();n.c=g;n.e=y;return n};Vv.pow=function(n){var a=this,o=new a.constructor("1"),i=o,u=n<0;if(n!==~~n||n<-Fv||n>Fv)throw Error(Wv+"exponent");u&&(n=-n);for(;;){1&n&&(i=i.times(a));n>>=1;if(!n)break;a=a.times(a)}return u?o.div(i):i};Vv.prec=function(n,a){if(n!==~~n||n<1||n>zv)throw Error(Wv+"precision");return round$1(new this.constructor(this),n,a)};Vv.round=function(n,a){if(n===Kv)n=0;else if(n!==~~n||n<-zv||n>zv)throw Error(Hv);return round$1(new this.constructor(this),n+this.e+1,a)};Vv.sqrt=function(){var n,a,o,i=this,u=i.constructor,d=i.s,m=i.e,g=new u("0.5");if(!i.c[0])return new u(i);if(d<0)throw Error(Uv+"No square root");d=Math.sqrt(+stringify(i,!0,!0));if(0===d||d===1/0){a=i.c.join("");a.length+m&1||(a+="0");d=Math.sqrt(a);m=((m+1)/2|0)-(m<0||1&m);n=new u((d==1/0?"5e":(d=d.toExponential()).slice(0,d.indexOf("e")+1))+m)}else n=new u(d+"");m=n.e+(u.DP+=4);do{o=n;n=g.times(o.plus(i.div(o)))}while(o.c.slice(0,m).join("")!==n.c.slice(0,m).join(""));return round$1(n,(u.DP-=4)+n.e+1,u.RM)};Vv.times=Vv.mul=function(n){var a,o=this,i=o.constructor,u=o.c,d=(n=new i(n)).c,m=u.length,g=d.length,y=o.e,v=n.e;n.s=o.s==n.s?1:-1;if(!u[0]||!d[0]){n.c=[n.e=0];return n}n.e=y+v;if(m<g){a=u;u=d;d=a;v=m;m=g;g=v}for(a=new Array(v=m+g);v--;)a[v]=0;for(y=g;y--;){g=0;for(v=m+y;v>y;){g=a[v]+d[y]*u[v-y-1]+g;a[v--]=g%10;g=g/10|0}a[v]=g}g?++n.e:a.shift();for(y=a.length;!a[--y];)a.pop();n.c=a;return n};Vv.toExponential=function(n,a){var o=this,i=o.c[0];if(n!==Kv){if(n!==~~n||n<0||n>zv)throw Error(Hv);o=round$1(new o.constructor(o),++n,a);for(;o.c.length<n;)o.c.push(0)}return stringify(o,!0,!!i)};Vv.toFixed=function(n,a){var o=this,i=o.c[0];if(n!==Kv){if(n!==~~n||n<0||n>zv)throw Error(Hv);o=round$1(new o.constructor(o),n+o.e+1,a);for(n=n+o.e+1;o.c.length<n;)o.c.push(0)}return stringify(o,!1,!!i)};Vv[Symbol.for("nodejs.util.inspect.custom")]=Vv.toJSON=Vv.toString=function(){var n=this,a=n.constructor;return stringify(n,n.e<=a.NE||n.e>=a.PE,!!n.c[0])};Vv.toNumber=function(){var n=+stringify(this,!0,!0);if(!0===this.constructor.strict&&!this.eq(n.toString()))throw Error(Uv+"Imprecise conversion");return n};Vv.toPrecision=function(n,a){var o=this,i=o.constructor,u=o.c[0];if(n!==Kv){if(n!==~~n||n<1||n>zv)throw Error(Wv+"precision");o=round$1(new i(o),n,a);for(;o.c.length<n;)o.c.push(0)}return stringify(o,n<=o.e||o.e<=i.NE||o.e>=i.PE,!!u)};Vv.valueOf=function(){var n=this,a=n.constructor;if(!0===a.strict)throw Error(Uv+"valueOf disallowed");return stringify(n,n.e<=a.NE||n.e>=a.PE,!0)};var Yv=_Big_();const Jv={bigNumber:n=>new Yv(n||0),multiply(n,a){if(void 0===n||void 0===a)return new Yv(0);const o=new Yv(n);const i=new Yv(a);return o.times(i)},toFixed:(n,a=2)=>void 0===n||""===n?new Yv(0).toFixed(a):new Yv(n).toFixed(a),formatNumberToLocalString:(n,a=2)=>void 0===n||""===n?"0.00":"number"==typeof n?n.toLocaleString("en-US",{maximumFractionDigits:a,minimumFractionDigits:a,roundingMode:"floor"}):parseFloat(n).toLocaleString("en-US",{maximumFractionDigits:a,minimumFractionDigits:a,roundingMode:"floor"}),parseLocalStringToNumber(n){if(void 0===n||""===n)return 0;const a=n.replace(/,/gu,"");return new Yv(a).toNumber()}};const Qv=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}];const Xv=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}];const ew=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}];const tw={getERC20Abi:n=>Pv.USDT_CONTRACT_ADDRESSES.includes(n)?ew:Qv,getSwapAbi:()=>Xv};const nw={validateCaipAddress(n){if(3!==n.split(":")?.length)throw new Error("Invalid CAIP Address");return n},parseCaipAddress(n){const a=n.split(":");if(3!==a.length)throw new Error(`Invalid CAIP-10 address: ${n}`);const[o,i,u]=a;if(!o||!i||!u)throw new Error(`Invalid CAIP-10 address: ${n}`);return{chainNamespace:o,chainId:i,address:u}},parseCaipNetworkId(n){const a=n.split(":");if(2!==a.length)throw new Error(`Invalid CAIP-2 network id: ${n}`);const[o,i]=a;if(!o||!i)throw new Error(`Invalid CAIP-2 network id: ${n}`);return{chainNamespace:o,chainId:i}}};const rw={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids",HISTORY_TRANSACTIONS_CACHE:"@appkit/history_transactions_cache",TOKEN_PRICE_CACHE:"@appkit/token_price_cache",RECENT_EMAILS:"@appkit/recent_emails"};function getSafeConnectorIdKey(n){if(!n)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${n}:connected_connector_id`}const sw={setItem(n,a){isSafe()&&void 0!==a&&localStorage.setItem(n,a)},getItem(n){if(isSafe())return localStorage.getItem(n)||void 0},removeItem(n){isSafe()&&localStorage.removeItem(n)},clear(){isSafe()&&localStorage.clear()}};function isSafe(){return"undefined"!=typeof window&&"undefined"!=typeof localStorage}function getW3mThemeVariables(n,a){return"light"===a?{"--w3m-accent":n?.["--w3m-accent"]||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":n?.["--w3m-accent"]||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const aw={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,NAMES_SUPPORTED_CHAIN_NAMESPACES:[Pv.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x",sui:"0x",stacks:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,DEFAULT_REMOTE_FEATURES:{socials:["google","x","discord","farcaster","github","apple","facebook"]},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}};const ow={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5,transactionsHistory:15e3,tokenPrice:15e3},isCacheExpired:(n,a)=>Date.now()-n>a,getActiveNetworkProps(){const n=ow.getActiveNamespace();const a=ow.getActiveCaipNetworkId();const o=a?a.split(":")[1]:void 0;const i=o?isNaN(Number(o))?o:Number(o):void 0;return{namespace:n,caipNetworkId:a,chainId:i}},setWalletConnectDeepLink({name:n,href:a}){try{sw.setItem(rw.DEEPLINK_CHOICE,JSON.stringify({href:a,name:n}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const n=sw.getItem(rw.DEEPLINK_CHOICE);if(n)return JSON.parse(n)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{sw.removeItem(rw.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(n){try{sw.setItem(rw.ACTIVE_NAMESPACE,n)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(n){try{sw.setItem(rw.ACTIVE_CAIP_NETWORK_ID,n);ow.setActiveNamespace(n.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return sw.getItem(rw.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{sw.removeItem(rw.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(n){try{const a=getSafeConnectorIdKey(n);sw.removeItem(a)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(n){try{const a=ow.getRecentWallets();const o=a.find(a=>a.id===n.id);if(!o){a.unshift(n);a.length>2&&a.pop();sw.setItem(rw.RECENT_WALLETS,JSON.stringify(a))}}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const n=sw.getItem(rw.RECENT_WALLETS);return n?JSON.parse(n):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(n,a){try{const o=getSafeConnectorIdKey(n);sw.setItem(o,a)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{const n=sw.getItem(rw.ACTIVE_NAMESPACE);return n}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(n){if(n)try{const a=getSafeConnectorIdKey(n);return sw.getItem(a)}catch(nL){console.info("Unable to get connected connector id in namespace",n)}},setConnectedSocialProvider(n){try{sw.setItem(rw.CONNECTED_SOCIAL,n)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return sw.getItem(rw.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{sw.removeItem(rw.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return sw.getItem(rw.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){const n=sw.getItem(rw.ACTIVE_CAIP_NETWORK_ID);const a=n?.split(":")?.[1];return a},setConnectionStatus(n){try{sw.setItem(rw.CONNECTION_STATUS,n)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return sw.getItem(rw.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const n=sw.getItem(rw.CONNECTED_NAMESPACES);return n?.length?n.split(","):[]}catch{return[]}},setConnectedNamespaces(n){try{const a=Array.from(new Set(n));sw.setItem(rw.CONNECTED_NAMESPACES,a.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(n){try{const a=ow.getConnectedNamespaces();if(!a.includes(n)){a.push(n);ow.setConnectedNamespaces(a)}}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(n){try{const a=ow.getConnectedNamespaces();const o=a.indexOf(n);if(o>-1){a.splice(o,1);ow.setConnectedNamespaces(a)}}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return sw.getItem(rw.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to get telegram social provider");return null}},setTelegramSocialProvider(n){try{sw.setItem(rw.TELEGRAM_SOCIAL_PROVIDER,n)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{sw.removeItem(rw.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let n={};try{const a=sw.getItem(rw.PORTFOLIO_CACHE);n=a?JSON.parse(a):{}}catch{console.info("Unable to get balance cache")}return n},removeAddressFromBalanceCache(n){try{const a=ow.getBalanceCache();sw.setItem(rw.PORTFOLIO_CACHE,JSON.stringify({...a,[n]:void 0}))}catch{console.info("Unable to remove address from balance cache",n)}},getBalanceCacheForCaipAddress(n){try{const a=ow.getBalanceCache();const o=a[n];if(o&&!this.isCacheExpired(o.timestamp,this.cacheExpiry.portfolio))return o.balance;ow.removeAddressFromBalanceCache(n)}catch{console.info("Unable to get balance cache for address",n)}},updateBalanceCache(n){try{const a=ow.getBalanceCache();a[n.caipAddress]=n;sw.setItem(rw.PORTFOLIO_CACHE,JSON.stringify(a))}catch{console.info("Unable to update balance cache",n)}},getNativeBalanceCache(){let n={};try{const a=sw.getItem(rw.NATIVE_BALANCE_CACHE);n=a?JSON.parse(a):{}}catch{console.info("Unable to get balance cache")}return n},removeAddressFromNativeBalanceCache(n){try{const a=ow.getBalanceCache();sw.setItem(rw.NATIVE_BALANCE_CACHE,JSON.stringify({...a,[n]:void 0}))}catch{console.info("Unable to remove address from balance cache",n)}},getNativeBalanceCacheForCaipAddress(n){try{const a=ow.getNativeBalanceCache();const o=a[n];if(o&&!this.isCacheExpired(o.timestamp,this.cacheExpiry.nativeBalance))return o;console.info("Discarding cache for address",n);ow.removeAddressFromBalanceCache(n)}catch{console.info("Unable to get balance cache for address",n)}},updateNativeBalanceCache(n){try{const a=ow.getNativeBalanceCache();a[n.caipAddress]=n;sw.setItem(rw.NATIVE_BALANCE_CACHE,JSON.stringify(a))}catch{console.info("Unable to update balance cache",n)}},getEnsCache(){let n={};try{const a=sw.getItem(rw.ENS_CACHE);n=a?JSON.parse(a):{}}catch{console.info("Unable to get ens name cache")}return n},getEnsFromCacheForAddress(n){try{const a=ow.getEnsCache();const o=a[n];if(o&&!this.isCacheExpired(o.timestamp,this.cacheExpiry.ens))return o.ens;ow.removeEnsFromCache(n)}catch{console.info("Unable to get ens name from cache",n)}},updateEnsCache(n){try{const a=ow.getEnsCache();a[n.address]=n;sw.setItem(rw.ENS_CACHE,JSON.stringify(a))}catch{console.info("Unable to update ens name cache",n)}},removeEnsFromCache(n){try{const a=ow.getEnsCache();sw.setItem(rw.ENS_CACHE,JSON.stringify({...a,[n]:void 0}))}catch{console.info("Unable to remove ens name from cache",n)}},getIdentityCache(){let n={};try{const a=sw.getItem(rw.IDENTITY_CACHE);n=a?JSON.parse(a):{}}catch{console.info("Unable to get identity cache")}return n},getIdentityFromCacheForAddress(n){try{const a=ow.getIdentityCache();const o=a[n];if(o&&!this.isCacheExpired(o.timestamp,this.cacheExpiry.identity))return o.identity;ow.removeIdentityFromCache(n)}catch{console.info("Unable to get identity from cache",n)}},updateIdentityCache(n){try{const a=ow.getIdentityCache();a[n.address]={identity:n.identity,timestamp:n.timestamp};sw.setItem(rw.IDENTITY_CACHE,JSON.stringify(a))}catch{console.info("Unable to update identity cache",n)}},removeIdentityFromCache(n){try{const a=ow.getIdentityCache();sw.setItem(rw.IDENTITY_CACHE,JSON.stringify({...a,[n]:void 0}))}catch{console.info("Unable to remove identity from cache",n)}},clearAddressCache(){try{sw.removeItem(rw.PORTFOLIO_CACHE);sw.removeItem(rw.NATIVE_BALANCE_CACHE);sw.removeItem(rw.ENS_CACHE);sw.removeItem(rw.IDENTITY_CACHE);sw.removeItem(rw.HISTORY_TRANSACTIONS_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(n){try{sw.setItem(rw.PREFERRED_ACCOUNT_TYPES,JSON.stringify(n))}catch{console.info("Unable to set preferred account types",n)}},getPreferredAccountTypes(){try{const n=sw.getItem(rw.PREFERRED_ACCOUNT_TYPES);return n?JSON.parse(n):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(n,a){try{const o=ow.getConnections();const i=o[a]??[];const u=new Map;for(const n of i)u.set(n.connectorId,{...n});for(const a of n){const n=u.get(a.connectorId);const o=a.connectorId===Pv.CONNECTOR_ID.AUTH;if(n&&!o){const o=new Set(n.accounts.map(n=>n.address.toLowerCase()));const i=a.accounts.filter(n=>!o.has(n.address.toLowerCase()));n.accounts.push(...i)}else u.set(a.connectorId,{...a})}const d={...o,[a]:Array.from(u.values())};sw.setItem(rw.CONNECTIONS,JSON.stringify(d))}catch(o){console.error("Unable to sync connections to storage",o)}},getConnections(){try{const n=sw.getItem(rw.CONNECTIONS);return n?JSON.parse(n):{}}catch(n){console.error("Unable to get connections from storage",n);return{}}},deleteAddressFromConnection({connectorId:n,address:a,namespace:o}){try{const i=ow.getConnections();const u=i[o]??[];const d=new Map(u.map(n=>[n.connectorId,n]));const m=d.get(n);if(m){const o=m.accounts.filter(n=>n.address.toLowerCase()!==a.toLowerCase());0===o.length?d.delete(n):d.set(n,{...m,accounts:m.accounts.filter(n=>n.address.toLowerCase()!==a.toLowerCase())})}sw.setItem(rw.CONNECTIONS,JSON.stringify({...i,[o]:Array.from(d.values())}))}catch{console.error(`Unable to remove address "${a}" from connector "${n}" in namespace "${o}"`)}},getDisconnectedConnectorIds(){try{const n=sw.getItem(rw.DISCONNECTED_CONNECTOR_IDS);return n?JSON.parse(n):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(n,a){try{const o=ow.getDisconnectedConnectorIds();const i=o[a]??[];i.push(n);sw.setItem(rw.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...o,[a]:Array.from(new Set(i))}))}catch{console.error(`Unable to set disconnected connector id "${n}" for namespace "${a}"`)}},removeDisconnectedConnectorId(n,a){try{const o=ow.getDisconnectedConnectorIds();let i=o[a]??[];i=i.filter(a=>a.toLowerCase()!==n.toLowerCase());sw.setItem(rw.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...o,[a]:Array.from(new Set(i))}))}catch{console.error(`Unable to remove disconnected connector id "${n}" for namespace "${a}"`)}},isConnectorDisconnected(n,a){try{const o=ow.getDisconnectedConnectorIds();const i=o[a]??[];return i.some(a=>a.toLowerCase()===n.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${n}" for namespace "${a}"`)}return!1},getTransactionsCache(){try{const n=sw.getItem(rw.HISTORY_TRANSACTIONS_CACHE);return n?JSON.parse(n):{}}catch{console.info("Unable to get transactions cache")}return{}},getTransactionsCacheForAddress({address:n,chainId:a=""}){try{const o=ow.getTransactionsCache();const i=o[n]?.[a];if(i&&!this.isCacheExpired(i.timestamp,this.cacheExpiry.transactionsHistory))return i.transactions;ow.removeTransactionsCache({address:n,chainId:a})}catch{console.info("Unable to get transactions cache")}},updateTransactionsCache({address:n,chainId:a="",timestamp:o,transactions:i}){try{const u=ow.getTransactionsCache();u[n]={...u[n],[a]:{timestamp:o,transactions:i}};sw.setItem(rw.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(u))}catch{console.info("Unable to update transactions cache",{address:n,chainId:a,timestamp:o,transactions:i})}},removeTransactionsCache({address:n,chainId:a}){try{const o=ow.getTransactionsCache();const i=o?.[n]||{};const{[a]:u,...d}=i;sw.setItem(rw.HISTORY_TRANSACTIONS_CACHE,JSON.stringify({...o,[n]:d}))}catch{console.info("Unable to remove transactions cache",{address:n,chainId:a})}},getTokenPriceCache(){try{const n=sw.getItem(rw.TOKEN_PRICE_CACHE);return n?JSON.parse(n):{}}catch{console.info("Unable to get token price cache")}return{}},getTokenPriceCacheForAddresses(n){try{const a=ow.getTokenPriceCache();const o=a[n.join(",")];if(o&&!this.isCacheExpired(o.timestamp,this.cacheExpiry.tokenPrice))return o.tokenPrice;ow.removeTokenPriceCache(n)}catch{console.info("Unable to get token price cache for addresses",n)}},updateTokenPriceCache(n){try{const a=ow.getTokenPriceCache();a[n.addresses.join(",")]={timestamp:n.timestamp,tokenPrice:n.tokenPrice};sw.setItem(rw.TOKEN_PRICE_CACHE,JSON.stringify(a))}catch{console.info("Unable to update token price cache",n)}},removeTokenPriceCache(n){try{const a=ow.getTokenPriceCache();sw.setItem(rw.TOKEN_PRICE_CACHE,JSON.stringify({...a,[n.join(",")]:void 0}))}catch{console.info("Unable to remove token price cache",n)}}};const iw={isMobile(){return!!this.isClient()&&Boolean(window?.matchMedia&&"function"==typeof window.matchMedia&&window.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent))},checkCaipNetwork:(n,a="")=>n?.caipNetworkId.toLocaleLowerCase().includes(a.toLowerCase()),isAndroid(){if(!this.isMobile())return!1;const n=window?.navigator.userAgent.toLowerCase();return iw.isMobile()&&n.includes("android")},isIos(){if(!this.isMobile())return!1;const n=window?.navigator.userAgent.toLowerCase();return n.includes("iphone")||n.includes("ipad")},isSafari(){if(!this.isClient())return!1;const n=window?.navigator.userAgent.toLowerCase();return n.includes("safari")},isClient:()=>"undefined"!=typeof window,isPairingExpired:n=>!n||n-Date.now()<=aw.TEN_SEC_MS,isAllowedRetry:(n,a=aw.ONE_SEC_MS)=>Date.now()-n>=a,copyToClopboard(n){navigator.clipboard.writeText(n)},isIframe(){try{return window?.self!==window?.top}catch(nL){return!1}},isSafeApp(){if(iw.isClient()&&window.self!==window.top)try{const n=window?.location?.ancestorOrigins?.[0];const a="https://app.safe.global";if(n){const o=new URL(n);const i=new URL(a);return o.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry:()=>Date.now()+aw.FOUR_MINUTES_MS,getNetworkId:n=>n?.split(":")[1],getPlainAddress:n=>n?.split(":")[2],wait:async n=>new Promise(a=>{setTimeout(a,n)}),debounce(n,a=500){let o;return(...i)=>{function next(){n(...i)}o&&clearTimeout(o);o=setTimeout(next,a)}},isHttpUrl:n=>n.startsWith("http://")||n.startsWith("https://"),formatNativeUrl(n,a,o=null){if(iw.isHttpUrl(n))return this.formatUniversalUrl(n,a);let i=n;let u=o;if(!i.includes("://")){i=n.replaceAll("/","").replaceAll(":","");i=`${i}://`}i.endsWith("/")||(i=`${i}/`);u&&!u?.endsWith("/")&&(u=`${u}/`);this.isTelegram()&&this.isAndroid()&&(a=encodeURIComponent(a));const d=encodeURIComponent(a);return{redirect:`${i}wc?uri=${d}`,redirectUniversalLink:u?`${u}wc?uri=${d}`:void 0,href:i}},formatUniversalUrl(n,a){if(!iw.isHttpUrl(n))return this.formatNativeUrl(n,a);let o=n;o.endsWith("/")||(o=`${o}/`);const i=encodeURIComponent(a);return{redirect:`${o}wc?uri=${i}`,href:o}},getOpenTargetForPlatform(n){return"popupWindow"===n?n:this.isTelegram()?ow.getTelegramSocialProvider()?"_top":"_blank":n},openHref(n,a,o){window?.open(n,this.getOpenTargetForPlatform(a),o||"noreferrer noopener")},returnOpenHref(n,a,o){return window?.open(n,this.getOpenTargetForPlatform(a),o||"noreferrer noopener")},isTelegram:()=>"undefined"!=typeof window&&(Boolean(window.TelegramWebviewProxy)||Boolean(window.Telegram)||Boolean(window.TelegramWebviewProxyProto)),isPWA(){if("undefined"==typeof window)return!1;const n=!(!window?.matchMedia||"function"!=typeof window.matchMedia)&&window.matchMedia("(display-mode: standalone)")?.matches;const a=window?.navigator?.standalone;return Boolean(n||a)},async preloadImage(n){const a=new Promise((a,o)=>{const i=new Image;i.onload=a;i.onerror=o;i.crossOrigin="anonymous";i.src=n});return Promise.race([a,iw.wait(2e3)])},formatBalance(n,a){let o="0.000";if("string"==typeof n){const a=Number(n);if(a){const n=Math.floor(1e3*a)/1e3;n&&(o=n.toString())}}return`${o}${a?` ${a}`:""}`},getApiUrl:()=>Pv.W3M_API_URL,getBlockchainApiUrl:()=>Pv.BLOCKCHAIN_API_RPC_URL,getAnalyticsUrl:()=>Pv.PULSE_API_URL,getUUID:()=>crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,n=>{const a=16*Math.random()|0;const o="x"===n?a:3&a|8;return o.toString(16)}),parseError:n=>"string"==typeof n?n:"string"==typeof n?.issues?.[0]?.message?n.issues[0].message:n instanceof Error?n.message:"Unknown error",sortRequestedNetworks(n,a=[]){const o={};if(a&&n){n.forEach((n,a)=>{o[n]=a});a.sort((n,a)=>{const i=o[n.id];const u=o[a.id];return void 0!==i&&void 0!==u?i-u:void 0!==i?-1:void 0!==u?1:0})}return a},calculateBalance(n){let a=0;for(const o of n)a+=o.value??0;return a},formatTokenBalance(n){const a=n.toFixed(2);const[o,i]=a.split(".");return{dollars:o,pennies:i}},isAddress(n,a="eip155"){switch(a){case"eip155":return!(!/^(?:0x)?[0-9a-f]{40}$/iu.test(n)||!/^(?:0x)?[0-9a-f]{40}$/iu.test(n)&&!/^(?:0x)?[0-9A-F]{40}$/iu.test(n));case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(n);default:return!1}},uniqueBy(n,a){const o=new Set;return n.filter(n=>{const i=n[a];if(o.has(i))return!1;o.add(i);return!0})},generateSdkVersion(n,a,o){const i=0===n.length;const u=i?aw.ADAPTER_TYPES.UNIVERSAL:n.map(n=>n.adapterType).join(",");return`${a}-${u}-${o}`},createAccount:(n,a,o,i,u)=>({namespace:n,address:a,type:o,publicKey:i,path:u}),isCaipAddress(n){if("string"!=typeof n)return!1;const a=n.split(":");const o=a[0];return 3===a.filter(Boolean).length&&o in Pv.CHAIN_NAME_MAP},getAccount:n=>n?"string"==typeof n?{address:n,chainId:void 0}:{address:n.address,chainId:n.chainId}:{address:void 0,chainId:void 0},isMac(){const n=window?.navigator.userAgent.toLowerCase();return n.includes("macintosh")&&!n.includes("safari")},formatTelegramSocialLoginUrl(n){const a=`--${encodeURIComponent(window?.location.href)}`;const o="state=";const i=new URL(n);if("auth.magic.link"===i.host){const i="provider_authorization_url=";const u=n.substring(n.indexOf(i)+i.length);const d=this.injectIntoUrl(decodeURIComponent(u),o,a);return n.replace(u,encodeURIComponent(d))}return this.injectIntoUrl(n,o,a)},injectIntoUrl(n,a,o){const i=n.indexOf(a);if(-1===i)throw new Error(`${a} parameter not found in the URL: ${n}`);const u=n.indexOf("&",i);const d=a.length;const m=-1!==u?u:n.length;const g=n.substring(0,i+d);const y=n.substring(i+d,m);const v=n.substring(u);const x=y+o;const N=g+x+v;return N}};async function fetchData(...n){const a=await fetch(...n);if(!a.ok){const n=new Error(`HTTP status code: ${a.status}`,{cause:a});throw n}return a}class cw{constructor({baseUrl:n,clientId:a}){this.baseUrl=n;this.clientId=a}async get({headers:n,signal:a,cache:o,...i}){const u=this.createUrl(i);const d=await fetchData(u,{method:"GET",headers:n,signal:a,cache:o});return d.json()}async getBlob({headers:n,signal:a,...o}){const i=this.createUrl(o);const u=await fetchData(i,{method:"GET",headers:n,signal:a});return u.blob()}async post({body:n,headers:a,signal:o,...i}){const u=this.createUrl(i);const d=await fetchData(u,{method:"POST",headers:a,body:n?JSON.stringify(n):void 0,signal:o});return d.json()}async put({body:n,headers:a,signal:o,...i}){const u=this.createUrl(i);const d=await fetchData(u,{method:"PUT",headers:a,body:n?JSON.stringify(n):void 0,signal:o});return d.json()}async delete({body:n,headers:a,signal:o,...i}){const u=this.createUrl(i);const d=await fetchData(u,{method:"DELETE",headers:a,body:n?JSON.stringify(n):void 0,signal:o});return d.json()}createUrl({path:n,params:a}){const o=new URL(n,this.baseUrl);a&&Object.entries(a).forEach(([n,a])=>{a&&o.searchParams.append(n,a)});this.clientId&&o.searchParams.append("clientId",this.clientId);return o}}const lw={getFeatureValue(n,a){const o=a?.[n];return void 0===o?aw.DEFAULT_FEATURES[n]:o},filterSocialsByPlatform(n){if(!n||!n.length)return n;if(iw.isTelegram()){if(iw.isIos())return n.filter(n=>"google"!==n);if(iw.isMac())return n.filter(n=>"x"!==n);if(iw.isAndroid())return n.filter(n=>!["facebook","x"].includes(n))}return n}};const uw=proxy({features:aw.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:aw.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}});const dw={state:uw,subscribeKey:(n,a)=>subscribeKey(uw,n,a),setOptions(n){Object.assign(uw,n)},setRemoteFeatures(n){if(!n)return;const a={...uw.remoteFeatures,...n};uw.remoteFeatures=a;uw.remoteFeatures?.socials&&(uw.remoteFeatures.socials=lw.filterSocialsByPlatform(uw.remoteFeatures.socials));if(uw.features?.pay){uw.remoteFeatures.email=!1;uw.remoteFeatures.socials=!1}},setFeatures(n){if(!n)return;uw.features||(uw.features=aw.DEFAULT_FEATURES);const a={...uw.features,...n};uw.features=a;if(uw.features?.pay&&uw.remoteFeatures){uw.remoteFeatures.email=!1;uw.remoteFeatures.socials=!1}},setProjectId(n){uw.projectId=n},setCustomRpcUrls(n){uw.customRpcUrls=n},setAllWallets(n){uw.allWallets=n},setIncludeWalletIds(n){uw.includeWalletIds=n},setExcludeWalletIds(n){uw.excludeWalletIds=n},setFeaturedWalletIds(n){uw.featuredWalletIds=n},setTokens(n){uw.tokens=n},setTermsConditionsUrl(n){uw.termsConditionsUrl=n},setPrivacyPolicyUrl(n){uw.privacyPolicyUrl=n},setCustomWallets(n){uw.customWallets=n},setIsSiweEnabled(n){uw.isSiweEnabled=n},setIsUniversalProvider(n){uw.isUniversalProvider=n},setSdkVersion(n){uw.sdkVersion=n},setMetadata(n){uw.metadata=n},setDisableAppend(n){uw.disableAppend=n},setEIP6963Enabled(n){uw.enableEIP6963=n},setDebug(n){uw.debug=n},setEnableWalletConnect(n){uw.enableWalletConnect=n},setEnableWalletGuide(n){uw.enableWalletGuide=n},setEnableAuthLogger(n){uw.enableAuthLogger=n},setEnableWallets(n){uw.enableWallets=n},setPreferUniversalLinks(n){uw.experimental_preferUniversalLinks=n},setSIWX(n){if(n)for(const[a,o]of Object.entries(aw.SIWX_DEFAULTS))n[a]??(n[a]=o);uw.siwx=n},setConnectMethodsOrder(n){uw.features={...uw.features,connectMethodsOrder:n}},setWalletFeaturesOrder(n){uw.features={...uw.features,walletFeaturesOrder:n}},setSocialsOrder(n){uw.remoteFeatures={...uw.remoteFeatures,socials:n}},setCollapseWallets(n){uw.features={...uw.features,collapseWallets:n}},setEnableEmbedded(n){uw.enableEmbedded=n},setAllowUnsupportedChain(n){uw.allowUnsupportedChain=n},setManualWCControl(n){uw.manualWCControl=n},setEnableNetworkSwitch(n){uw.enableNetworkSwitch=n},setEnableReconnect(n){uw.enableReconnect=n},setDefaultAccountTypes(n={}){Object.entries(n).forEach(([n,a])=>{a&&(uw.defaultAccountTypes[n]=a)})},setUniversalProviderConfigOverride(n){uw.universalProviderConfigOverride=n},getUniversalProviderConfigOverride:()=>uw.universalProviderConfigOverride,getSnapshot:()=>snapshot(uw)};const hw=Object.freeze({enabled:!0,events:[]});const fw=new cw({baseUrl:iw.getAnalyticsUrl(),clientId:null});const pw=5;const mw=6e4;const gw=proxy({...hw});const yw={state:gw,subscribeKey:(n,a)=>subscribeKey(gw,n,a),async sendError(n,a){if(!gw.enabled)return;const o=Date.now();const i=gw.events.filter(n=>{const a=new Date(n.properties.timestamp||"").getTime();return o-a<mw});if(i.length>=pw)return;const u={type:"error",event:a,properties:{errorType:n.name,errorMessage:n.message,stackTrace:n.stack,timestamp:(new Date).toISOString()}};gw.events.push(u);try{if("undefined"==typeof window)return;const{projectId:o,sdkType:i,sdkVersion:u}=dw.state;await fw.post({path:"/e",params:{projectId:o,st:i,sv:u||"html-wagmi-4.2.2"},body:{eventId:iw.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:(new Date).toISOString(),props:{type:"error",event:a,errorType:n.name,errorMessage:n.message,stackTrace:n.stack}}})}catch{}},enable(){gw.enabled=!0},disable(){gw.enabled=!1},clearEvents(){gw.events=[]}};class bw extends Error{constructor(n,a,o){super(n);this.name="AppKitError";this.category=a;this.originalError=o;Object.setPrototypeOf(this,bw.prototype);let i=!1;if(o instanceof Error&&"string"==typeof o.stack&&o.stack){const n=o.stack;const a=n.indexOf("\n");if(a>-1){const o=n.substring(a+1);this.stack=`${this.name}: ${this.message}\n${o}`;i=!0}}i||(Error.captureStackTrace?Error.captureStackTrace(this,bw):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function errorHandler(n,a){const o=n instanceof bw?n:new bw(n instanceof Error?n.message:String(n),a,n);yw.sendError(o,o.category);throw o}function withErrorBoundary(n,a="INTERNAL_SDK_ERROR"){const o={};Object.keys(n).forEach(i=>{const u=n[i];if("function"==typeof u){let n=u;n="AsyncFunction"===u.constructor.name?async(...n)=>{try{return await u(...n)}catch(o){return errorHandler(o,a)}}:(...n)=>{try{return u(...n)}catch(o){return errorHandler(o,a)}};o[i]=n}else o[i]=u});return o}var vw={};const ww="https://secure.walletconnect.org/sdk";const xw=("undefined"!=typeof process&&"undefined"!=typeof vw?vw.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||ww;const Nw=("undefined"!=typeof process&&"undefined"!=typeof vw?vw.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error";const kw=("undefined"!=typeof process&&"undefined"!=typeof vw?vw.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4";const Cw={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"};const Ew={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}};const Sw={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"},BINANCE:{id:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25",appId:"yFK5FCqYprrXDiVFbhyRx7",deeplink:"bnc://app.binance.com/mp/app",url:"https://app.binance.com/en/download"}};const Aw={handleMobileDeeplinkRedirect(n,a){const o=window.location.href;const i=encodeURIComponent(o);if(n===Sw.PHANTOM.id&&!("phantom"in window)){const n=o.startsWith("https")?"https":"http";const a=o.split("/")[2];const u=encodeURIComponent(`${n}://${a}`);window.location.href=`${Sw.PHANTOM.url}/ul/browse/${i}?ref=${u}`}n!==Sw.SOLFLARE.id||"solflare"in window||(window.location.href=`${Sw.SOLFLARE.url}/ul/v1/browse/${i}?ref=${i}`);a===Pv.CHAIN.SOLANA&&(n!==Sw.COINBASE.id||"coinbaseSolana"in window||(window.location.href=`${Sw.COINBASE.url}/dapp?cb_url=${i}`));if(a===Pv.CHAIN.BITCOIN&&n===Sw.BINANCE.id&&!("binancew3w"in window)){const n=jx.state.activeCaipNetwork;const a=window.btoa("/pages/browser/index");const o=window.btoa(`url=${i}&defaultChainId=${n?.id??1}`);const u=new URL(Sw.BINANCE.deeplink);u.searchParams.set("appId",Sw.BINANCE.appId);u.searchParams.set("startPagePath",a);u.searchParams.set("startPageQuery",o);const d=new URL(Sw.BINANCE.url);d.searchParams.set("_dp",window.btoa(u.toString()));window.location.href=d.toString()}}};const _w=proxy({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}});const Tw={state:_w,subscribeNetworkImages:n=>subscribe(_w.networkImages,()=>n(_w.networkImages)),subscribeKey:(n,a)=>subscribeKey(_w,n,a),subscribe:n=>subscribe(_w,()=>n(_w)),setWalletImage(n,a){_w.walletImages[n]=a},setNetworkImage(n,a){_w.networkImages[n]=a},setChainImage(n,a){_w.chainImages[n]=a},setConnectorImage(n,a){_w.connectorImages={..._w.connectorImages,[n]:a}},setTokenImage(n,a){_w.tokenImages[n]=a},setCurrencyImage(n,a){_w.currencyImages[n]=a}};const jw=withErrorBoundary(Tw);const Iw={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:"",sui:"",stacks:""};const Pw=proxy({networkImagePromises:{}});const Ow={async fetchWalletImage(n){if(n){await Kw._fetchWalletImage(n);return this.getWalletImageById(n)}},async fetchNetworkImage(n){if(!n)return;const a=this.getNetworkImageById(n);if(a)return a;Pw.networkImagePromises[n]||(Pw.networkImagePromises[n]=Kw._fetchNetworkImage(n));await Pw.networkImagePromises[n];return this.getNetworkImageById(n)},getWalletImageById(n){if(n)return jw.state.walletImages[n]},getWalletImage:n=>n?.image_url?n?.image_url:n?.image_id?jw.state.walletImages[n.image_id]:void 0,getNetworkImage:n=>n?.assets?.imageUrl?n?.assets?.imageUrl:n?.assets?.imageId?jw.state.networkImages[n.assets.imageId]:void 0,getNetworkImageById(n){if(n)return jw.state.networkImages[n]},getConnectorImage:n=>n?.imageUrl?n.imageUrl:n?.info?.icon?n.info.icon:n?.imageId?jw.state.connectorImages[n.imageId]:void 0,getChainImage:n=>jw.state.networkImages[Iw[n]]};const Rw=proxy({message:"",variant:"info",open:!1});const Bw={state:Rw,subscribeKey:(n,a)=>subscribeKey(Rw,n,a),open(n,a){const{debug:o}=dw.state;const{code:i,displayMessage:u,debugMessage:d}=n;if(u&&o){Rw.message=u;Rw.variant=a;Rw.open=!0}d&&console.error("function"==typeof d?d():d,i?{code:i}:void 0)},close(){Rw.open=!1;Rw.message="";Rw.variant="info"}};const Mw=withErrorBoundary(Bw);const zw=iw.getAnalyticsUrl();const Fw=new cw({baseUrl:zw,clientId:null});const Lw=["MODAL_CREATED"];const Dw=proxy({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}});const $w={state:Dw,subscribe:n=>subscribe(Dw,()=>n(Dw)),getSdkProperties(){const{projectId:n,sdkType:a,sdkVersion:o}=dw.state;return{projectId:n,st:a,sv:o||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(n){try{let a=Lx.state.address;"address"in n.data&&n.data.address&&(a=n.data.address);if(Lw.includes(n.data.event)||"undefined"==typeof window)return;const o=jx.getActiveCaipNetwork()?.caipNetworkId;await Fw.post({path:"/e",params:$w.getSdkProperties(),body:{eventId:iw.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:n.timestamp,props:{...n.data,address:a,properties:{..."properties"in n.data?n.data.properties:{},caipNetworkId:o}}}});Dw.reportedErrors.FORBIDDEN=!1}catch(a){const n=a instanceof Error&&a.cause instanceof Response&&a.cause.status===Pv.HTTP_STATUS_CODES.FORBIDDEN&&!Dw.reportedErrors.FORBIDDEN;if(n){Mw.open({displayMessage:"Invalid App Configuration",debugMessage:`Origin ${isSafe()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error");Dw.reportedErrors.FORBIDDEN=!0}}},sendEvent(n){Dw.timestamp=Date.now();Dw.data=n;(dw.state.features?.analytics||"INITIALIZE"===n.event)&&$w._sendAnalyticsEvent(Dw)}};const Uw=iw.getApiUrl();const Ww=new cw({baseUrl:Uw,clientId:null});const Hw=40;const qw=4;const Gw=20;const Vw=proxy({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1});const Kw={state:Vw,subscribeKey:(n,a)=>subscribeKey(Vw,n,a),_getSdkProperties(){const{projectId:n,sdkType:a,sdkVersion:o}=dw.state;return{projectId:n,st:a||"appkit",sv:o||"html-wagmi-4.2.2"}},_filterOutExtensions:n=>dw.state.isUniversalProvider?n.filter(n=>Boolean(n.mobile_link||n.desktop_link||n.webapp_link)):n,async _fetchWalletImage(n){const a=`${Ww.baseUrl}/getWalletImage/${n}`;const o=await Ww.getBlob({path:a,params:Kw._getSdkProperties()});jw.setWalletImage(n,URL.createObjectURL(o))},async _fetchNetworkImage(n){const a=`${Ww.baseUrl}/public/getAssetImage/${n}`;const o=await Ww.getBlob({path:a,params:Kw._getSdkProperties()});jw.setNetworkImage(n,URL.createObjectURL(o))},async _fetchConnectorImage(n){const a=`${Ww.baseUrl}/public/getAssetImage/${n}`;const o=await Ww.getBlob({path:a,params:Kw._getSdkProperties()});jw.setConnectorImage(n,URL.createObjectURL(o))},async _fetchCurrencyImage(n){const a=`${Ww.baseUrl}/public/getCurrencyImage/${n}`;const o=await Ww.getBlob({path:a,params:Kw._getSdkProperties()});jw.setCurrencyImage(n,URL.createObjectURL(o))},async _fetchTokenImage(n){const a=`${Ww.baseUrl}/public/getTokenImage/${n}`;const o=await Ww.getBlob({path:a,params:Kw._getSdkProperties()});jw.setTokenImage(n,URL.createObjectURL(o))},_filterWalletsByPlatform(n){const a=iw.isMobile()?n?.filter(n=>{if(n.mobile_link)return!0;if(n.id===Sw.COINBASE.id||n.id===Sw.BINANCE.id)return!0;const a="solana"===jx.state.activeChain;return a&&(n.id===Sw.SOLFLARE.id||n.id===Sw.PHANTOM.id)}):n;return a},async fetchProjectConfig(){const n=await Ww.get({path:"/appkit/v1/config",params:Kw._getSdkProperties()});return n.features},async fetchAllowedOrigins(){try{const{allowedOrigins:n}=await Ww.get({path:"/projects/v1/origins",params:Kw._getSdkProperties()});return n}catch(n){if(n instanceof Error&&n.cause instanceof Response){const a=n.cause.status;if(a===Pv.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:n});if(a>=Pv.HTTP_STATUS_CODES.SERVER_ERROR&&a<600)throw new Error("SERVER_ERROR",{cause:n});return[]}return[]}},async fetchNetworkImages(){const n=jx.getAllRequestedCaipNetworks();const a=n?.map(({assets:n})=>n?.imageId).filter(Boolean).filter(n=>!Ow.getNetworkImageById(n));a&&await Promise.allSettled(a.map(n=>Kw._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:n}=ax.state;const a=n.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(a.map(n=>Kw._fetchConnectorImage(n)))},async fetchCurrencyImages(n=[]){await Promise.allSettled(n.map(n=>Kw._fetchCurrencyImage(n)))},async fetchTokenImages(n=[]){await Promise.allSettled(n.map(n=>Kw._fetchTokenImage(n)))},async fetchWallets(n){const a=n.exclude??[];const o=Kw._getSdkProperties();o.sv.startsWith("html-core-")&&a.push(...Object.values(Sw).map(n=>n.id));const i=await Ww.get({path:"/getWallets",params:{...Kw._getSdkProperties(),...n,page:String(n.page),entries:String(n.entries),include:n.include?.join(","),exclude:a.join(",")}});const u=Kw._filterWalletsByPlatform(i?.data);return{data:u||[],count:i?.count}},async fetchFeaturedWallets(){const{featuredWalletIds:n}=dw.state;if(n?.length){const a={...Kw._getSdkProperties(),page:1,entries:n?.length??qw,include:n};const{data:o}=await Kw.fetchWallets(a);const i=[...o].sort((a,o)=>n.indexOf(a.id)-n.indexOf(o.id));const u=i.map(n=>n.image_id).filter(Boolean);await Promise.allSettled(u.map(n=>Kw._fetchWalletImage(n)));Vw.featured=i;Vw.allFeatured=i}},async fetchRecommendedWallets(){try{Vw.isFetchingRecommendedWallets=!0;const{includeWalletIds:n,excludeWalletIds:a,featuredWalletIds:o}=dw.state;const i=[...a??[],...o??[]].filter(Boolean);const u=jx.getRequestedCaipNetworkIds().join(",");const d={page:1,entries:qw,include:n,exclude:i,chains:u};const{data:m,count:g}=await Kw.fetchWallets(d);const y=ow.getRecentWallets();const v=m.map(n=>n.image_id).filter(Boolean);const x=y.map(n=>n.image_id).filter(Boolean);await Promise.allSettled([...v,...x].map(n=>Kw._fetchWalletImage(n)));Vw.recommended=m;Vw.allRecommended=m;Vw.count=g??0}catch{}finally{Vw.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:n}){const{includeWalletIds:a,excludeWalletIds:o,featuredWalletIds:i}=dw.state;const u=jx.getRequestedCaipNetworkIds().join(",");const d=[...Vw.recommended.map(({id:n})=>n),...o??[],...i??[]].filter(Boolean);const m={page:n,entries:Hw,include:a,exclude:d,chains:u};const{data:g,count:y}=await Kw.fetchWallets(m);const v=g.slice(0,Gw).map(n=>n.image_id).filter(Boolean);await Promise.allSettled(v.map(n=>Kw._fetchWalletImage(n)));Vw.wallets=iw.uniqueBy([...Vw.wallets,...Kw._filterOutExtensions(g)],"id").filter(n=>n.chains?.some(n=>u.includes(n)));Vw.count=y>Vw.count?y:Vw.count;Vw.page=n},async initializeExcludedWallets({ids:n}){const a={page:1,entries:n.length,include:n};const{data:o}=await Kw.fetchWallets(a);o&&o.forEach(n=>{Vw.excludedWallets.push({rdns:n.rdns,name:n.name})})},async searchWallet({search:n,badge:a}){const{includeWalletIds:o,excludeWalletIds:i}=dw.state;const u=jx.getRequestedCaipNetworkIds().join(",");Vw.search=[];const d={page:1,entries:100,search:n?.trim(),badge_type:a,include:o,exclude:i,chains:u};const{data:m}=await Kw.fetchWallets(d);$w.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:a??"",search:n??""}});const g=m.map(n=>n.image_id).filter(Boolean);await Promise.allSettled([...g.map(n=>Kw._fetchWalletImage(n)),iw.wait(300)]);Vw.search=Kw._filterOutExtensions(m)},initPromise(n,a){const o=Vw.promises[n];return o||(Vw.promises[n]=a())},prefetch({fetchConnectorImages:n=!0,fetchFeaturedWallets:a=!0,fetchRecommendedWallets:o=!0,fetchNetworkImages:i=!0}={}){const u=[n&&Kw.initPromise("connectorImages",Kw.fetchConnectorImages),a&&Kw.initPromise("featuredWallets",Kw.fetchFeaturedWallets),o&&Kw.initPromise("recommendedWallets",Kw.fetchRecommendedWallets),i&&Kw.initPromise("networkImages",Kw.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(u)},prefetchAnalyticsConfig(){dw.state.features?.analytics&&Kw.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:n}=await Ww.get({path:"/getAnalyticsConfig",params:Kw._getSdkProperties()});dw.setFeatures({analytics:n})}catch(n){dw.setFeatures({analytics:!1})}},filterByNamespaces(n){if(!n?.length){Vw.featured=Vw.allFeatured;Vw.recommended=Vw.allRecommended;return}const a=jx.getRequestedCaipNetworkIds().join(",");Vw.featured=Vw.allFeatured.filter(n=>n.chains?.some(n=>a.includes(n)));Vw.recommended=Vw.allRecommended.filter(n=>n.chains?.some(n=>a.includes(n)));Vw.filteredWallets=Vw.wallets.filter(n=>n.chains?.some(n=>a.includes(n)))},clearFilterByNamespaces(){Vw.filteredWallets=[]},setFilterByNamespace(n){if(!n){Vw.featured=Vw.allFeatured;Vw.recommended=Vw.allRecommended;return}const a=jx.getRequestedCaipNetworkIds().join(",");Vw.featured=Vw.allFeatured.filter(n=>n.chains?.some(n=>a.includes(n)));Vw.recommended=Vw.allRecommended.filter(n=>n.chains?.some(n=>a.includes(n)));Vw.filteredWallets=Vw.wallets.filter(n=>n.chains?.some(n=>a.includes(n)))}};const Zw=proxy({view:"Connect",history:["Connect"],transactionStack:[]});const Yw={state:Zw,subscribeKey:(n,a)=>subscribeKey(Zw,n,a),pushTransactionStack(n){Zw.transactionStack.push(n)},popTransactionStack(n){const a=Zw.transactionStack.pop();if(!a)return;const{onSuccess:o,onError:i,onCancel:u}=a;switch(n){case"success":o?.();break;case"error":i?.();Jw.goBack();break;case"cancel":u?.();Jw.goBack()}},push(n,a){if(n!==Zw.view){Zw.view=n;Zw.history.push(n);Zw.data=a}},reset(n,a){Zw.view=n;Zw.history=[n];Zw.data=a},replace(n,a){const o=Zw.history.at(-1);const i=o===n;if(!i){Zw.view=n;Zw.history[Zw.history.length-1]=n;Zw.data=a}},goBack(){const n=jx.state.activeCaipAddress;const a="ConnectingFarcaster"===Jw.state.view;const o=!n&&a;if(Zw.history.length>1){Zw.history.pop();const[a]=Zw.history.slice(-1);if(a){const o="Connect"===a;Zw.view=n&&o?"Account":a}}else Wx.close();Zw.data?.wallet&&(Zw.data.wallet=void 0);setTimeout(()=>{if(o){Lx.setFarcasterUrl(void 0,jx.state.activeChain);const n=ax.getAuthConnector();n?.provider?.reload();const a=snapshot(dw.state);n?.provider?.syncDappData?.({metadata:a.metadata,sdkVersion:a.sdkVersion,projectId:a.projectId,sdkType:a.sdkType})}},100)},goBackToIndex(n){if(Zw.history.length>1){Zw.history=Zw.history.slice(0,n+1);const[a]=Zw.history.slice(-1);a&&(Zw.view=a)}},goBackOrCloseModal(){Jw.state.history.length>1?Jw.goBack():Wx.close()}};const Jw=withErrorBoundary(Yw);const Qw=proxy({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0});const Xw={state:Qw,subscribe:n=>subscribe(Qw,()=>n(Qw)),setThemeMode(n){Qw.themeMode=n;try{const a=ax.getAuthConnector();if(a){const o=Xw.getSnapshot().themeVariables;a.provider.syncTheme({themeMode:n,themeVariables:o,w3mThemeVariables:getW3mThemeVariables(o,n)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(n){Qw.themeVariables={...Qw.themeVariables,...n};try{const n=ax.getAuthConnector();if(n){const a=Xw.getSnapshot().themeVariables;n.provider.syncTheme({themeVariables:a,w3mThemeVariables:getW3mThemeVariables(Qw.themeVariables,Qw.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot:()=>snapshot(Qw)};const ex=withErrorBoundary(Xw);const tx=Object.fromEntries(Rv.map(n=>[n,void 0]));const nx=Object.fromEntries(Rv.map(n=>[n,!0]));const rx=proxy({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:tx,filterByNamespaceMap:nx});const sx={state:rx,subscribe:n=>subscribe(rx,()=>{n(rx)}),subscribeKey:(n,a)=>subscribeKey(rx,n,a),initialize(n){n.forEach(n=>{const a=ow.getConnectedConnectorId(n);a&&ax.setConnectorId(a,n)})},setActiveConnector(n){n&&(rx.activeConnector=ref(n))},setConnectors(n){const a=n.filter(n=>!rx.allConnectors.some(a=>a.id===n.id&&ax.getConnectorName(a.name)===ax.getConnectorName(n.name)&&a.chain===n.chain));a.forEach(n=>{"MULTI_CHAIN"!==n.type&&rx.allConnectors.push(ref(n))});const o=ax.getEnabledNamespaces();const i=ax.getEnabledConnectors(o);rx.connectors=ax.mergeMultiChainConnectors(i)},filterByNamespaces(n){Object.keys(rx.filterByNamespaceMap).forEach(n=>{rx.filterByNamespaceMap[n]=!1});n.forEach(n=>{rx.filterByNamespaceMap[n]=!0});ax.updateConnectorsForEnabledNamespaces()},filterByNamespace(n,a){rx.filterByNamespaceMap[n]=a;ax.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const n=ax.getEnabledNamespaces();const a=ax.getEnabledConnectors(n);const o=ax.areAllNamespacesEnabled();rx.connectors=ax.mergeMultiChainConnectors(a);o?Kw.clearFilterByNamespaces():Kw.filterByNamespaces(n)},getEnabledNamespaces:()=>Object.entries(rx.filterByNamespaceMap).filter(([n,a])=>a).map(([n])=>n),getEnabledConnectors:n=>rx.allConnectors.filter(a=>n.includes(a.chain)),areAllNamespacesEnabled:()=>Object.values(rx.filterByNamespaceMap).every(n=>n),mergeMultiChainConnectors(n){const a=ax.generateConnectorMapByName(n);const o=[];a.forEach(n=>{const a=n[0];const i=a?.id===Pv.CONNECTOR_ID.AUTH;n.length>1&&a?o.push({name:a.name,imageUrl:a.imageUrl,imageId:a.imageId,connectors:[...n],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:a?.id||""}):a&&o.push(a)});return o},generateConnectorMapByName(n){const a=new Map;n.forEach(n=>{const{name:o}=n;const i=ax.getConnectorName(o);if(!i)return;const u=a.get(i)||[];const d=u.find(a=>a.chain===n.chain);d||u.push(n);a.set(i,u)});return a},getConnectorName(n){if(!n)return n;const a={"Trust Wallet":"Trust"};return a[n]||n},getUniqueConnectorsByName(n){const a=[];n.forEach(n=>{a.find(a=>a.chain===n.chain)||a.push(n)});return a},addConnector(n){if(n.id===Pv.CONNECTOR_ID.AUTH){const a=n;const o=snapshot(dw.state);const i=ex.getSnapshot().themeMode;const u=ex.getSnapshot().themeVariables;a?.provider?.syncDappData?.({metadata:o.metadata,sdkVersion:o.sdkVersion,projectId:o.projectId,sdkType:o.sdkType});a?.provider?.syncTheme({themeMode:i,themeVariables:u,w3mThemeVariables:getW3mThemeVariables(u,i)});ax.setConnectors([n])}else ax.setConnectors([n])},getAuthConnector(n){const a=n||jx.state.activeChain;const o=rx.connectors.find(n=>n.id===Pv.CONNECTOR_ID.AUTH);if(o){if(o?.connectors?.length){const n=o.connectors.find(n=>n.chain===a);return n}return o}},getAnnouncedConnectorRdns:()=>rx.connectors.filter(n=>"ANNOUNCED"===n.type).map(n=>n.info?.rdns),getConnectorById:n=>rx.allConnectors.find(a=>a.id===n),getConnector({id:n,rdns:a,namespace:o}){const i=o||jx.state.activeChain;const u=rx.allConnectors.filter(n=>n.chain===i);return u.find(o=>o.explorerId===n||o.info?.rdns===a)},syncIfAuthConnector(n){if("ID_AUTH"!==n.id)return;const a=n;const o=snapshot(dw.state);const i=ex.getSnapshot().themeMode;const u=ex.getSnapshot().themeVariables;a?.provider?.syncDappData?.({metadata:o.metadata,sdkVersion:o.sdkVersion,sdkType:o.sdkType,projectId:o.projectId});a.provider.syncTheme({themeMode:i,themeVariables:u,w3mThemeVariables:getW3mThemeVariables(u,i)})},getConnectorsByNamespace(n){const a=rx.allConnectors.filter(a=>a.chain===n);return ax.mergeMultiChainConnectors(a)},canSwitchToSmartAccount(n){const a=jx.checkIfSmartAccountEnabled();return a&&getPreferredAccountType(n)===Ew.ACCOUNT_TYPES.EOA},selectWalletConnector(n){const a=ax.getConnector({id:n.id,rdns:n.rdns});Aw.handleMobileDeeplinkRedirect(a?.explorerId||n.id,jx.state.activeChain);a?Jw.push("ConnectingExternal",{connector:a,wallet:n}):Jw.push("ConnectingWalletConnect",{wallet:n})},getConnectors:n=>n?ax.getConnectorsByNamespace(n):ax.mergeMultiChainConnectors(rx.allConnectors),setFilterByNamespace(n){rx.filterByNamespace=n;rx.connectors=ax.getConnectors(n);Kw.setFilterByNamespace(n)},setConnectorId(n,a){if(n){rx.activeConnectorIds={...rx.activeConnectorIds,[a]:n};ow.setConnectedConnectorId(a,n)}},removeConnectorId(n){rx.activeConnectorIds={...rx.activeConnectorIds,[n]:void 0};ow.deleteConnectedConnectorId(n)},getConnectorId(n){if(n)return rx.activeConnectorIds[n]},isConnected:n=>n?Boolean(rx.activeConnectorIds[n]):Object.values(rx.activeConnectorIds).some(n=>Boolean(n)),resetConnectorIds(){rx.activeConnectorIds={...tx}}};const ax=withErrorBoundary(sx);const ox=1e3;const ix={checkNamespaceConnectorId:(n,a)=>ax.getConnectorId(n)===a,isSocialProvider:n=>aw.DEFAULT_REMOTE_FEATURES.socials.includes(n),connectWalletConnect:({walletConnect:n,connector:a,closeModalOnConnect:o=!0,redirectViewOnModalClose:i="Connect",onOpen:u,onConnect:d})=>new Promise((m,g)=>{n&&ax.setActiveConnector(a);u?.(iw.isMobile()&&n);if(i){const n=Wx.subscribeKey("open",a=>{if(!a){Jw.state.view!==i&&Jw.replace(i);n();g(new Error("Modal closed"))}})}const y=jx.subscribeKey("activeCaipAddress",n=>{if(n){d?.();o&&Wx.close();y();m(nw.parseCaipAddress(n))}})}),connectExternal:n=>new Promise((a,o)=>{const i=jx.subscribeKey("activeCaipAddress",n=>{if(n){Wx.close();i();a(nw.parseCaipAddress(n))}});vx.connectExternal(n,n.chain).catch(()=>{i();o(new Error("Connection rejected"))})}),connectSocial({social:n,namespace:a,closeModalOnConnect:o=!0,onOpenFarcaster:i,onConnect:u}){let d=Lx.state.socialWindow;let m=Lx.state.socialProvider;let g=!1;let y=null;const v=a||jx.state.activeChain;const x=jx.subscribeKey("activeCaipAddress",n=>{if(n){o&&Wx.close();x()}});return new Promise((a,o)=>{async function handleSocialConnection(n){if(n.data?.resultUri)if(n.origin===Pv.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",handleSocialConnection,!1);try{const i=ax.getAuthConnector(v);if(i&&!g){if(d){d.close();Lx.setSocialWindow(void 0,v);d=Lx.state.socialWindow}g=!0;const u=n.data.resultUri;m&&$w.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:m}});if(m){ow.setConnectedSocialProvider(m);await vx.connectExternal({id:i.id,type:i.type,socialUri:u},i.chain);const n=jx.state.activeCaipAddress;if(!n){o(new Error("Failed to connect"));return}a(nw.parseCaipAddress(n));$w.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:m}})}}}catch(i){m&&$w.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:m}});o(new Error("Failed to connect"))}}else m&&$w.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:m}})}async function connectSocial(){if(n){Lx.setSocialProvider(n,v);m=Lx.state.socialProvider;$w.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:m}})}if("farcaster"===m){i?.();const a=Wx.subscribeKey("open",i=>{if(!i&&"farcaster"===n){o(new Error("Popup closed"));u?.();a()}});const d=ax.getAuthConnector();if(d&&!Lx.state.farcasterUrl)try{const{url:n}=await d.provider.getFarcasterUri();Lx.setFarcasterUrl(n,v)}catch{o(new Error("Failed to connect to farcaster"))}}else{const n=ax.getAuthConnector();y=iw.returnOpenHref(`${Pv.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(n&&m){const{uri:a}=await n.provider.getSocialRedirectUri({provider:m});if(y&&a){Lx.setSocialWindow(y,v);d=Lx.state.socialWindow;y.location.href=a;const n=setInterval(()=>{if(d?.closed&&!g){o(new Error("Popup closed"));clearInterval(n)}},1e3);window.addEventListener("message",handleSocialConnection,!1)}else{y?.close();o(new Error("Failed to initiate social connection"))}}}catch{o(new Error("Failed to initiate social connection"));y?.close()}}}connectSocial()})},connectEmail:({closeModalOnConnect:n=!0,redirectViewOnModalClose:a="Connect",onOpen:o,onConnect:i})=>new Promise((u,d)=>{o?.();if(a){const n=Wx.subscribeKey("open",o=>{if(!o){Jw.state.view!==a&&Jw.replace(a);n();d(new Error("Modal closed"))}})}const m=jx.subscribeKey("activeCaipAddress",a=>{if(a){i?.();n&&Wx.close();m();u(nw.parseCaipAddress(a))}})}),async updateEmail(){const n=ow.getConnectedConnectorId(jx.state.activeChain);const a=ax.getAuthConnector();if(!a)throw new Error("No auth connector found");if(n!==Pv.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const o=a.provider.getEmail()??"";await Wx.open({view:"UpdateEmailWallet",data:{email:o,redirectView:void 0}});return new Promise((n,i)=>{const u=setInterval(()=>{const i=a.provider.getEmail()??"";if(i!==o){Wx.close();clearInterval(u);d();n({email:i})}},ox);const d=Wx.subscribeKey("open",n=>{if(!n){"Connect"!==Jw.state.view&&Jw.push("Connect");clearInterval(u);d();i(new Error("Modal closed"))}})})},canSwitchToSmartAccount(n){const a=jx.checkIfSmartAccountEnabled();return a&&getPreferredAccountType(n)===Ew.ACCOUNT_TYPES.EOA}};function getActiveNetworkTokenAddress(){const n=jx.state.activeCaipNetwork?.chainNamespace||"eip155";const a=jx.state.activeCaipNetwork?.id||1;const o=aw.NATIVE_TOKEN_ADDRESS[n];return`${n}:${a}:${o}`}function getPreferredAccountType(n){const a=jx.getAccountData(n)?.preferredAccountType;return a}function getActiveCaipNetwork(n){return n?jx.state.chains.get(n)?.networkState?.caipNetwork:jx.state.activeCaipNetwork}const cx={getConnectionStatus(n,a){const o=ax.state.activeConnectorIds[a];const i=vx.getConnections(a);const u=Boolean(o)&&n.connectorId===o;if(u)return"connected";const d=i.some(a=>a.connectorId.toLowerCase()===n.connectorId.toLowerCase());return d?"active":"disconnected"},excludeConnectorAddressFromConnections:({connections:n,connectorId:a,addresses:o})=>n.map(n=>{const i=!!a&&n.connectorId.toLowerCase()===a.toLowerCase();if(i&&o){const a=n.accounts.filter(n=>{const a=o.some(a=>a.toLowerCase()===n.address.toLowerCase());return!a});return{...n,accounts:a}}return n}),excludeExistingConnections(n,a){const o=new Set(n);return a.filter(n=>!o.has(n.connectorId))},getConnectionsByConnectorId:(n,a)=>n.filter(n=>n.connectorId.toLowerCase()===a.toLowerCase()),getConnectionsData(n){const a=Boolean(dw.state.remoteFeatures?.multiWallet);const o=ax.state.activeConnectorIds[n];const i=vx.getConnections(n);const u=vx.state.recentConnections.get(n)??[];const d=u.filter(n=>ax.getConnectorById(n.connectorId));const m=cx.excludeExistingConnections([...i.map(n=>n.connectorId),...o?[o]:[]],d);return a?{connections:i,recentConnections:m}:{connections:i.filter(n=>n.connectorId.toLowerCase()===o?.toLowerCase()),recentConnections:[]}}};const lx=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0});const ux=proxy({...lx});const dx={state:ux,subscribeKey:(n,a)=>subscribeKey(ux,n,a),showLoading(n,a={}){this._showMessage({message:n,variant:"loading",...a})},showSuccess(n){this._showMessage({message:n,variant:"success"})},showSvg(n,a){this._showMessage({message:n,svg:a})},showError(n){const a=iw.parseError(n);this._showMessage({message:a,variant:"error"})},hide(){ux.message=lx.message;ux.variant=lx.variant;ux.svg=lx.svg;ux.open=lx.open;ux.autoClose=lx.autoClose},_showMessage({message:n,svg:a,variant:o="success",autoClose:i=lx.autoClose}){if(ux.open){ux.open=!1;setTimeout(()=>{ux.message=n;ux.variant=o;ux.svg=a;ux.open=!0;ux.autoClose=i},150)}else{ux.message=n;ux.variant=o;ux.svg=a;ux.open=!0;ux.autoClose=i}}};const hx=dx;const fx=proxy({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0});const px={state:fx,subscribe:n=>subscribe(fx,()=>n(fx)),setLastNetworkInView(n){fx.lastNetworkInView=n},async fetchTransactions(n){if(!n)throw new Error("Transactions can't be fetched without an accountAddress");fx.loading=!0;try{const a=await Rx.fetchTransactions({account:n,cursor:fx.next,chainId:jx.state.activeCaipNetwork?.caipNetworkId});const o=mx.filterSpamTransactions(a.data);const i=mx.filterByConnectedChain(o);const u=[...fx.transactions,...i];fx.loading=!1;fx.transactions=u;fx.transactionsByYear=mx.groupTransactionsByYearAndMonth(fx.transactionsByYear,i);fx.empty=0===u.length;fx.next=a.next?a.next:void 0}catch(a){const o=jx.state.activeChain;$w.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:n,projectId:dw.state.projectId,cursor:fx.next,isSmartAccount:getPreferredAccountType(o)===Ew.ACCOUNT_TYPES.SMART_ACCOUNT}});hx.showError("Failed to fetch transactions");fx.loading=!1;fx.empty=!0;fx.next=void 0}},groupTransactionsByYearAndMonth(n={},a=[]){const o=n;a.forEach(n=>{const a=new Date(n.metadata.minedAt).getFullYear();const i=new Date(n.metadata.minedAt).getMonth();const u=o[a]??{};const d=u[i]??[];const m=d.filter(a=>a.id!==n.id);o[a]={...u,[i]:[...m,n].sort((n,a)=>new Date(a.metadata.minedAt).getTime()-new Date(n.metadata.minedAt).getTime())}});return o},filterSpamTransactions:n=>n.filter(n=>{const a=n.transfers.every(n=>!0===n.nft_info?.flags.is_spam);return!a}),filterByConnectedChain(n){const a=jx.state.activeCaipNetwork?.caipNetworkId;const o=n.filter(n=>n.metadata.chain===a);return o},clearCursor(){fx.next=void 0},resetTransactions(){fx.transactions=[];fx.transactionsByYear={};fx.lastNetworkInView=void 0;fx.loading=!1;fx.empty=!1;fx.next=void 0}};const mx=withErrorBoundary(px,"API_ERROR");const gx=proxy({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let yx;const bx={state:gx,subscribe:n=>subscribe(gx,()=>n(gx)),subscribeKey:(n,a)=>subscribeKey(gx,n,a),_getClient:()=>gx._client,setClient(n){gx._client=ref(n)},initialize(n){const a=n.filter(n=>Boolean(n.namespace)).map(n=>n.namespace);vx.syncStorageConnections(a)},syncStorageConnections(n){const a=ow.getConnections();const o=n??Array.from(jx.state.chains.keys());for(const i of o){const n=a[i]??[];const o=new Map(gx.recentConnections);o.set(i,n);gx.recentConnections=o}},getConnections:n=>n?gx.connections.get(n)??[]:[],hasAnyConnection(n){const a=vx.state.connections;return Array.from(a.values()).flatMap(n=>n).some(({connectorId:a})=>a===n)},async connectWalletConnect(){if(iw.isTelegram()||iw.isSafari()&&iw.isIos()){if(yx){await yx;yx=void 0;return}if(!iw.isPairingExpired(gx?.wcPairingExpiry)){const n=gx.wcUri;gx.wcUri=n;return}yx=vx._getClient()?.connectWalletConnect?.().catch(()=>{});vx.state.status="connecting";await yx;yx=void 0;gx.wcPairingExpiry=void 0;vx.state.status="connected"}else await(vx._getClient()?.connectWalletConnect?.())},async connectExternal(n,a,o=!0){const i=await(vx._getClient()?.connectExternal?.(n));o&&jx.setActiveNamespace(a);return i},async reconnectExternal(n){await(vx._getClient()?.reconnectExternal?.(n));const a=n.chain||jx.state.activeChain;a&&ax.setConnectorId(n.id,a)},async setPreferredAccountType(n,a){if(!a)return;Wx.setLoading(!0,jx.state.activeChain);const o=ax.getAuthConnector();if(o){Lx.setPreferredAccountType(n,a);await o.provider.setPreferredAccount(n);ow.setPreferredAccountTypes(Object.entries(jx.state.chains).reduce((n,[a,o])=>{const i=a;const u=getPreferredAccountType(i);void 0!==u&&(n[i]=u);return n},{}));await vx.reconnectExternal(o);Wx.setLoading(!1,jx.state.activeChain);$w.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:n,network:jx.state.activeCaipNetwork?.caipNetworkId||""}})}},signMessage:async n=>vx._getClient()?.signMessage(n),parseUnits:(n,a)=>vx._getClient()?.parseUnits(n,a),formatUnits:(n,a)=>vx._getClient()?.formatUnits(n,a),sendTransaction:async n=>vx._getClient()?.sendTransaction(n),getCapabilities:async n=>vx._getClient()?.getCapabilities(n),grantPermissions:async n=>vx._getClient()?.grantPermissions(n),walletGetAssets:async n=>vx._getClient()?.walletGetAssets(n)??{},estimateGas:async n=>vx._getClient()?.estimateGas(n),writeContract:async n=>vx._getClient()?.writeContract(n),getEnsAddress:async n=>vx._getClient()?.getEnsAddress(n),getEnsAvatar:async n=>vx._getClient()?.getEnsAvatar(n),checkInstalled:n=>vx._getClient()?.checkInstalled?.(n)||!1,resetWcConnection(){gx.wcUri=void 0;gx.wcPairingExpiry=void 0;gx.wcLinking=void 0;gx.recentWallet=void 0;gx.status="disconnected";mx.resetTransactions();ow.deleteWalletConnectDeepLink()},resetUri(){gx.wcUri=void 0;gx.wcPairingExpiry=void 0;yx=void 0},finalizeWcConnection(n){const{wcLinking:a,recentWallet:o}=vx.state;a&&ow.setWalletConnectDeepLink(a);o&&ow.setAppKitRecent(o);$w.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:n,properties:{method:a?"mobile":"qrcode",name:Jw.state.data?.wallet?.name||"Unknown"}})},setWcBasic(n){gx.wcBasic=n},setUri(n){gx.wcUri=n;gx.wcPairingExpiry=iw.getPairingExpiry()},setWcLinking(n){gx.wcLinking=n},setWcError(n){gx.wcError=n;gx.buffering=!1},setRecentWallet(n){gx.recentWallet=n},setBuffering(n){gx.buffering=n},setStatus(n){gx.status=n},setIsSwitchingConnection(n){gx.isSwitchingConnection=n},async disconnect({id:n,namespace:a,initialDisconnect:o}={}){try{await(vx._getClient()?.disconnect({id:n,chainNamespace:a,initialDisconnect:o}))}catch(i){throw new bw("Failed to disconnect","INTERNAL_SDK_ERROR",i)}},setConnections(n,a){const o=new Map(gx.connections);o.set(a,n);gx.connections=o},async handleAuthAccountSwitch({address:n,namespace:a}){const o=Lx.state.user?.accounts?.find(n=>"smartAccount"===n.type);const i=o&&o.address.toLowerCase()===n.toLowerCase()&&ix.canSwitchToSmartAccount(a)?"smartAccount":"eoa";await vx.setPreferredAccountType(i,a)},async handleActiveConnection({connection:n,namespace:a,address:o}){const i=ax.getConnectorById(n.connectorId);const u=n.connectorId===Pv.CONNECTOR_ID.AUTH;if(!i)throw new Error(`No connector found for connection: ${n.connectorId}`);if(!u){const n=await vx.connectExternal({id:i.id,type:i.type,provider:i.provider,address:o,chain:a},a);return n?.address}u&&o&&await vx.handleAuthAccountSwitch({address:o,namespace:a});return o},async handleDisconnectedConnection({connection:n,namespace:a,address:o,closeModalOnConnect:i}){const u=ax.getConnectorById(n.connectorId);const d=n.auth?.name?.toLowerCase();const m=n.connectorId===Pv.CONNECTOR_ID.AUTH;const g=n.connectorId===Pv.CONNECTOR_ID.WALLET_CONNECT;if(!u)throw new Error(`No connector found for connection: ${n.connectorId}`);let y;if(m)if(d&&ix.isSocialProvider(d)){const{address:n}=await ix.connectSocial({social:d,closeModalOnConnect:i,onOpenFarcaster(){Wx.open({view:"ConnectingFarcaster"})},onConnect(){Jw.replace("ProfileWallets")}});y=n}else{const{address:n}=await ix.connectEmail({closeModalOnConnect:i,onOpen(){Wx.open({view:"EmailLogin"})},onConnect(){Jw.replace("ProfileWallets")}});y=n}else if(g){const{address:n}=await ix.connectWalletConnect({walletConnect:!0,connector:u,closeModalOnConnect:i,onOpen(n){Wx.open({view:n?"AllWallets":"ConnectingWalletConnect"})},onConnect(){Jw.replace("ProfileWallets")}});y=n}else{const n=await vx.connectExternal({id:u.id,type:u.type,provider:u.provider,chain:a},a);n&&(y=n.address)}m&&o&&await vx.handleAuthAccountSwitch({address:o,namespace:a});return y},async switchConnection({connection:n,address:a,namespace:o,closeModalOnConnect:i,onChange:u}){let d;const m=Lx.getCaipAddress(o);if(m){const{address:n}=nw.parseCaipAddress(m);d=n}const g=cx.getConnectionStatus(n,o);switch(g){case"connected":case"active":{const i=await vx.handleActiveConnection({connection:n,namespace:o,address:a});if(d&&i){const n=i.toLowerCase()!==d.toLowerCase();u?.({address:i,namespace:o,hasSwitchedAccount:n,hasSwitchedWallet:"active"===g})}break}case"disconnected":{const d=await vx.handleDisconnectedConnection({connection:n,namespace:o,address:a,closeModalOnConnect:i});d&&u?.({address:d,namespace:o,hasSwitchedAccount:!0,hasSwitchedWallet:!0});break}default:throw new Error(`Invalid connection status: ${g}`)}}};const vx=withErrorBoundary(bx);const wx=proxy({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1});const xx={state:wx,subscribe:n=>subscribe(wx,()=>n(wx)),subscribeOpen:n=>subscribeKey(wx,"open",n),set(n){Object.assign(wx,{...wx,...n})}};const Nx={async getTokenList(n){const a=await Rx.fetchSwapTokens({chainId:n});const o=a?.tokens?.map(n=>({...n,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0}))||[];return o},async fetchGasPrice(){const n=jx.state.activeCaipNetwork;if(!n)return null;try{if("solana"===n.chainNamespace){const n=(await(vx?.estimateGas({chainNamespace:"solana"})))?.toString();return{standard:n,fast:n,instant:n}}return await Rx.fetchGasPrice({chainId:n.caipNetworkId})}catch{return null}},async fetchSwapAllowance({tokenAddress:n,userAddress:a,sourceTokenAmount:o,sourceTokenDecimals:i}){const u=await Rx.fetchSwapAllowance({tokenAddress:n,userAddress:a});if(u?.allowance&&o&&i){const n=vx.parseUnits(o,i)||0;const a=BigInt(u.allowance)>=n;return a}return!1},async getMyTokensWithBalance(n){const a=await Mx.getMyTokensWithBalance(n);Lx.setTokenBalance(a,jx.state.activeChain);return this.mapBalancesToSwapTokens(a)},mapBalancesToSwapTokens:n=>n?.map(n=>({...n,address:n?.address?n.address:getActiveNetworkTokenAddress(),decimals:parseInt(n.quantity.decimals,10),logoUri:n.iconUrl,eip2612:!1}))||[]};const kx=proxy({tokenBalances:[],loading:!1});const Cx={state:kx,subscribe:n=>subscribe(kx,()=>n(kx)),subscribeKey:(n,a)=>subscribeKey(kx,n,a),setToken(n){n&&(kx.token=ref(n))},setTokenAmount(n){kx.sendTokenAmount=n},setReceiverAddress(n){kx.receiverAddress=n},setReceiverProfileImageUrl(n){kx.receiverProfileImageUrl=n},setReceiverProfileName(n){kx.receiverProfileName=n},setNetworkBalanceInUsd(n){kx.networkBalanceInUSD=n},setLoading(n){kx.loading=n},async sendToken(){try{Ex.setLoading(!0);switch(jx.state.activeCaipNetwork?.chainNamespace){case"eip155":await Ex.sendEvmToken();return;case"solana":await Ex.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Ex.setLoading(!1)}},async sendEvmToken(){const n=jx.state.activeChain;if(!n)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const a=getPreferredAccountType(n);if(!Ex.state.sendTokenAmount||!Ex.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Ex.state.token)throw new Error("A token is required");if(Ex.state.token?.address){$w.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:a===Ew.ACCOUNT_TYPES.SMART_ACCOUNT,token:Ex.state.token.address,amount:Ex.state.sendTokenAmount,network:jx.state.activeCaipNetwork?.caipNetworkId||""}});await Ex.sendERC20Token({receiverAddress:Ex.state.receiverAddress,tokenAddress:Ex.state.token.address,sendTokenAmount:Ex.state.sendTokenAmount,decimals:Ex.state.token.quantity.decimals})}else{$w.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:a===Ew.ACCOUNT_TYPES.SMART_ACCOUNT,token:Ex.state.token.symbol||"",amount:Ex.state.sendTokenAmount,network:jx.state.activeCaipNetwork?.caipNetworkId||""}});await Ex.sendNativeToken({receiverAddress:Ex.state.receiverAddress,sendTokenAmount:Ex.state.sendTokenAmount,decimals:Ex.state.token.quantity.decimals})}},async fetchTokenBalance(n){kx.loading=!0;const a=jx.state.activeCaipNetwork?.caipNetworkId;const o=jx.state.activeCaipNetwork?.chainNamespace;const i=jx.state.activeCaipAddress;const u=i?iw.getPlainAddress(i):void 0;if(kx.lastRetry&&!iw.isAllowedRetry(kx.lastRetry,30*aw.ONE_SEC_MS)){kx.loading=!1;return[]}try{if(u&&a&&o){const n=await Mx.getMyTokensWithBalance();kx.tokenBalances=n;kx.lastRetry=void 0;return n}}catch(d){kx.lastRetry=Date.now();n?.(d);hx.showError("Token Balance Unavailable")}finally{kx.loading=!1}return[]},fetchNetworkBalance(){if(0===kx.tokenBalances.length)return;const n=Nx.mapBalancesToSwapTokens(kx.tokenBalances);if(!n)return;const a=n.find(n=>n.address===getActiveNetworkTokenAddress());a&&(kx.networkBalanceInUSD=a?Jv.multiply(a.quantity.numeric,a.price).toString():"0")},async sendNativeToken(n){Jw.pushTransactionStack({});const a=n.receiverAddress;const o=Lx.state.address;const i=vx.parseUnits(n.sendTokenAmount.toString(),Number(n.decimals));const u="0x";await vx.sendTransaction({chainNamespace:Pv.CHAIN.EVM,to:a,address:o,data:u,value:i??BigInt(0)});$w.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:getPreferredAccountType("eip155")===Ew.ACCOUNT_TYPES.SMART_ACCOUNT,token:Ex.state.token?.symbol||"",amount:n.sendTokenAmount,network:jx.state.activeCaipNetwork?.caipNetworkId||""}});vx._getClient()?.updateBalance("eip155");Ex.resetSend()},async sendERC20Token(n){Jw.pushTransactionStack({onSuccess(){Jw.replace("Account")}});const a=vx.parseUnits(n.sendTokenAmount.toString(),Number(n.decimals));if(Lx.state.address&&n.sendTokenAmount&&n.receiverAddress&&n.tokenAddress){const o=iw.getPlainAddress(n.tokenAddress);if(!o)throw new Error("SendController:sendERC20Token - tokenAddress is required");await vx.writeContract({fromAddress:Lx.state.address,tokenAddress:o,args:[n.receiverAddress,a??BigInt(0)],method:"transfer",abi:tw.getERC20Abi(o),chainNamespace:Pv.CHAIN.EVM});Ex.resetSend()}},async sendSolanaToken(){if(!Ex.state.sendTokenAmount||!Ex.state.receiverAddress)throw new Error("An amount and receiver address are required");Jw.pushTransactionStack({onSuccess(){Jw.replace("Account")}});await vx.sendTransaction({chainNamespace:"solana",to:Ex.state.receiverAddress,value:Ex.state.sendTokenAmount});vx._getClient()?.updateBalance("solana");Ex.resetSend()},resetSend(){kx.token=void 0;kx.sendTokenAmount=void 0;kx.receiverAddress=void 0;kx.receiverProfileImageUrl=void 0;kx.receiverProfileName=void 0;kx.loading=!1;kx.tokenBalances=[]}};const Ex=withErrorBoundary(Cx);const Sx={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0};const Ax={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]};const _x=proxy({chains:proxyMap(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1});const Tx={state:_x,subscribe:n=>subscribe(_x,()=>{n(_x)}),subscribeKey:(n,a)=>subscribeKey(_x,n,a),subscribeChainProp(n,a,o){let i;return subscribe(_x.chains,()=>{const u=o||_x.activeChain;if(u){const o=_x.chains.get(u)?.[n];if(i!==o){i=o;a(o)}}})},initialize(n,a,o){const{chainId:i,namespace:u}=ow.getActiveNetworkProps();const d=a?.find(n=>n.id.toString()===i?.toString());const m=n.find(n=>n?.namespace===u);const g=m||n?.[0];const y=n.map(n=>n.namespace).filter(n=>void 0!==n);const v=dw.state.enableEmbedded?new Set([...y]):new Set([...a?.map(n=>n.chainNamespace)??[]]);0!==n?.length&&g||(_x.noAdapters=!0);if(!_x.noAdapters){_x.activeChain=g?.namespace;_x.activeCaipNetwork=d;jx.setChainNetworkData(g?.namespace,{caipNetwork:d});_x.activeChain&&xx.set({activeChain:g?.namespace})}v.forEach(n=>{const i=a?.filter(a=>a.chainNamespace===n);const u=ow.getPreferredAccountTypes()||{};const d={...dw.state.defaultAccountTypes,...u};jx.state.chains.set(n,{namespace:n,networkState:proxy({...Ax,caipNetwork:i?.[0]}),accountState:proxy({...Sx,preferredAccountType:d[n]}),caipNetworks:i??[],...o});jx.setRequestedCaipNetworks(i??[],n)})},removeAdapter(n){if(_x.activeChain===n){const a=Array.from(_x.chains.entries()).find(([a])=>a!==n);if(a){const n=a[1]?.caipNetworks?.[0];n&&jx.setActiveCaipNetwork(n)}}_x.chains.delete(n)},addAdapter(n,{networkControllerClient:a,connectionControllerClient:o},i){if(!n.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");_x.chains.set(n.namespace,{namespace:n.namespace,networkState:{...Ax,caipNetwork:i[0]},accountState:Sx,caipNetworks:i,connectionControllerClient:o,networkControllerClient:a});jx.setRequestedCaipNetworks(i?.filter(a=>a.chainNamespace===n.namespace)??[],n.namespace)},addNetwork(n){const a=_x.chains.get(n.chainNamespace);if(a){const o=[...a.caipNetworks||[]];a.caipNetworks?.find(a=>a.id===n.id)||o.push(n);_x.chains.set(n.chainNamespace,{...a,caipNetworks:o});jx.setRequestedCaipNetworks(o,n.chainNamespace);ax.filterByNamespace(n.chainNamespace,!0)}},removeNetwork(n,a){const o=_x.chains.get(n);if(o){const i=_x.activeCaipNetwork?.id===a;const u=[...o.caipNetworks?.filter(n=>n.id!==a)||[]];i&&o?.caipNetworks?.[0]&&jx.setActiveCaipNetwork(o.caipNetworks[0]);_x.chains.set(n,{...o,caipNetworks:u});jx.setRequestedCaipNetworks(u||[],n);0===u.length&&ax.filterByNamespace(n,!1)}},setAdapterNetworkState(n,a){const o=_x.chains.get(n);if(o){o.networkState={...o.networkState||Ax,...a};_x.chains.set(n,o)}},setChainAccountData(n,a,o=!0){if(!n)throw new Error("Chain is required to update chain account data");const i=_x.chains.get(n);if(i){const o={...i.accountState||Sx,...a};_x.chains.set(n,{...i,accountState:o});if(1===_x.chains.size||_x.activeChain===n){a.caipAddress&&(_x.activeCaipAddress=a.caipAddress);Lx.replaceState(o)}}},setChainNetworkData(n,a){if(!n)return;const o=_x.chains.get(n);if(o){const i={...o.networkState||Ax,...a};_x.chains.set(n,{...o,networkState:i})}},setAccountProp(n,a,o,i=!0){jx.setChainAccountData(o,{[n]:a},i)},setActiveNamespace(n){_x.activeChain=n;const a=n?_x.chains.get(n):void 0;const o=a?.networkState?.caipNetwork;if(o?.id&&n){_x.activeCaipAddress=a?.accountState?.caipAddress;_x.activeCaipNetwork=o;jx.setChainNetworkData(n,{caipNetwork:o});ow.setActiveCaipNetworkId(o?.caipNetworkId);xx.set({activeChain:n,selectedNetworkId:o?.caipNetworkId})}},setActiveCaipNetwork(n){if(!n)return;_x.activeChain!==n.chainNamespace&&jx.setIsSwitchingNamespace(!0);const a=_x.chains.get(n.chainNamespace);_x.activeChain=n.chainNamespace;_x.activeCaipNetwork=n;jx.setChainNetworkData(n.chainNamespace,{caipNetwork:n});_x.activeCaipAddress=a?.accountState?.address?`${n.chainNamespace}:${n.id}:${a?.accountState?.address}`:void 0;jx.setAccountProp("caipAddress",_x.activeCaipAddress,n.chainNamespace);a&&Lx.replaceState(a.accountState);Ex.resetSend();xx.set({activeChain:_x.activeChain,selectedNetworkId:_x.activeCaipNetwork?.caipNetworkId});ow.setActiveCaipNetworkId(n.caipNetworkId);const o=jx.checkIfSupportedNetwork(n.chainNamespace);o||!dw.state.enableNetworkSwitch||dw.state.allowUnsupportedChain||vx.state.wcBasic||jx.showUnsupportedChainUI()},addCaipNetwork(n){if(!n)return;const a=_x.chains.get(n.chainNamespace);a&&a?.caipNetworks?.push(n)},async switchActiveNamespace(n){if(!n)return;const a=n!==jx.state.activeChain;const o=jx.getNetworkData(n)?.caipNetwork;const i=jx.getCaipNetworkByNamespace(n,o?.id);a&&i&&await jx.switchActiveNetwork(i)},async switchActiveNetwork(n){const a=jx.state.activeChain;if(!a)throw new Error("ChainController:switchActiveNetwork - namespace is required");const o=jx.state.chains.get(a);const i=!o?.caipNetworks?.some(n=>n.id===_x.activeCaipNetwork?.id);const u=jx.getNetworkControllerClient(n.chainNamespace);if(u){try{await u.switchCaipNetwork(n);i&&Wx.close()}catch(d){Jw.goBack()}$w.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:n.caipNetworkId}})}},getNetworkControllerClient(n){const a=n||_x.activeChain;if(!a)throw new Error("ChainController:getNetworkControllerClient - chain is required");const o=_x.chains.get(a);if(!o)throw new Error("Chain adapter not found");if(!o.networkControllerClient)throw new Error("NetworkController client not set");return o.networkControllerClient},getConnectionControllerClient(n){const a=n||_x.activeChain;if(!a)throw new Error("Chain is required to get connection controller client");const o=_x.chains.get(a);if(!o?.connectionControllerClient)throw new Error("ConnectionController client not set");return o.connectionControllerClient},getNetworkProp(n,a){const o=_x.chains.get(a)?.networkState;if(o)return o[n]},getRequestedCaipNetworks(n){const a=_x.chains.get(n);const{approvedCaipNetworkIds:o=[],requestedCaipNetworks:i=[]}=a?.networkState||{};const u=iw.sortRequestedNetworks(o,i);const d=u.filter(n=>n?.id);return d},getAllRequestedCaipNetworks(){const n=[];_x.chains.forEach(a=>{if(!a.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const o=jx.getRequestedCaipNetworks(a.namespace);n.push(...o)});return n},setRequestedCaipNetworks(n,a){jx.setAdapterNetworkState(a,{requestedCaipNetworks:n});const o=jx.getAllRequestedCaipNetworks();const i=o.map(n=>n.chainNamespace);const u=Array.from(new Set(i));ax.filterByNamespaces(u)},getAllApprovedCaipNetworkIds(){const n=[];_x.chains.forEach(a=>{if(!a.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const o=jx.getApprovedCaipNetworkIds(a.namespace);n.push(...o)});return n},getActiveCaipNetwork:n=>n?_x.chains.get(n)?.networkState?.caipNetwork:_x.activeCaipNetwork,getActiveCaipAddress:()=>_x.activeCaipAddress,getApprovedCaipNetworkIds(n){const a=_x.chains.get(n);const o=a?.networkState?.approvedCaipNetworkIds||[];return o},async setApprovedCaipNetworksData(n){const a=jx.getNetworkControllerClient();const o=await(a?.getApprovedCaipNetworksData());jx.setAdapterNetworkState(n,{approvedCaipNetworkIds:o?.approvedCaipNetworkIds,supportsAllNetworks:o?.supportsAllNetworks})},checkIfSupportedNetwork(n,a){const o=a||_x.activeCaipNetwork?.caipNetworkId;const i=jx.getRequestedCaipNetworks(n);return!i.length||i?.some(n=>n.caipNetworkId===o)},checkIfSupportedChainId(n){if(!_x.activeChain)return!0;const a=jx.getRequestedCaipNetworks(_x.activeChain);return a?.some(a=>a.id===n)},setSmartAccountEnabledNetworks(n,a){jx.setAdapterNetworkState(a,{smartAccountEnabledNetworks:n})},checkIfSmartAccountEnabled(){const n=Ov.caipNetworkIdToNumber(_x.activeCaipNetwork?.caipNetworkId);const a=_x.activeChain;if(!a||!n)return!1;const o=jx.getNetworkProp("smartAccountEnabledNetworks",a);return Boolean(o?.includes(Number(n)))},showUnsupportedChainUI(){Wx.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const n=_x.activeCaipNetwork;return Boolean(n?.chainNamespace&&aw.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(n.chainNamespace))},resetNetwork(n){jx.setAdapterNetworkState(n,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(n){const a=n;if(!a)throw new Error("Chain is required to set account prop");const o=jx.state.chains.get(a)?.accountState?.preferredAccountType;const i=dw.state.defaultAccountTypes[a];_x.activeCaipAddress=void 0;jx.setChainAccountData(a,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:i||o,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"});ax.removeConnectorId(a)},setIsSwitchingNamespace(n){_x.isSwitchingNamespace=n},getFirstCaipNetworkSupportsAuthConnector(){const n=[];let a;_x.chains.forEach(a=>{Pv.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(n=>n===a.namespace)&&a.namespace&&n.push(a.namespace)});if(n.length>0){const o=n[0];a=o?_x.chains.get(o)?.caipNetworks?.[0]:void 0;return a}},getAccountData(n){const a=n||_x.activeChain;if(a)return jx.state.chains.get(a)?.accountState},getNetworkData(n){const a=n||_x.activeChain;if(a)return jx.state.chains.get(a)?.networkState},getCaipNetworkByNamespace(n,a){if(!n)return;const o=jx.state.chains.get(n);const i=o?.caipNetworks?.find(n=>n.id===a);return i||o?.networkState?.caipNetwork||o?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){const n=ax.state.filterByNamespace;const a=n?[_x.chains.get(n)]:Array.from(_x.chains.values());return a.flatMap(n=>n?.caipNetworks||[]).map(n=>n.caipNetworkId)},getCaipNetworks:n=>n?jx.getRequestedCaipNetworks(n):jx.getAllRequestedCaipNetworks(),setLastConnectedSIWECaipNetwork(n){_x.lastConnectedSIWECaipNetwork=n},getLastConnectedSIWECaipNetwork:()=>_x.lastConnectedSIWECaipNetwork};const jx=withErrorBoundary(Tx);const Ix={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]};const Px=iw.getBlockchainApiUrl();const Ox=proxy({clientId:null,api:new cw({baseUrl:Px,clientId:null}),supportedChains:{http:[],ws:[]}});const Rx={state:Ox,async get(n){const{st:a,sv:o}=Rx.getSdkProperties();const i=dw.state.projectId;const u={...n.params||{},st:a,sv:o,projectId:i};return Ox.api.get({...n,params:u})},getSdkProperties(){const{sdkType:n,sdkVersion:a}=dw.state;return{st:n||"unknown",sv:a||"unknown"}},async isNetworkSupported(n){if(!n)return!1;try{Ox.supportedChains.http.length||await Rx.getSupportedNetworks()}catch(nL){return!1}return Ox.supportedChains.http.includes(n)},async getSupportedNetworks(){try{const n=await Rx.get({path:"v1/supported-chains"});Ox.supportedChains=n;return n}catch{return Ox.supportedChains}},async fetchIdentity({address:n,caipNetworkId:a}){const o=await Rx.isNetworkSupported(a);if(!o)return{avatar:"",name:""};const i=ow.getIdentityFromCacheForAddress(n);if(i)return i;const u=await Rx.get({path:`/v1/identity/${n}`,params:{sender:jx.state.activeCaipAddress?iw.getPlainAddress(jx.state.activeCaipAddress):void 0}});ow.updateIdentityCache({address:n,identity:u,timestamp:Date.now()});return u},async fetchTransactions({account:n,cursor:a,signal:o,cache:i,chainId:u}){const d=await Rx.isNetworkSupported(jx.state.activeCaipNetwork?.caipNetworkId);if(!d)return{data:[],next:void 0};const m=ow.getTransactionsCacheForAddress({address:n,chainId:u});if(m)return m;const g=await Rx.get({path:`/v1/account/${n}/history`,params:{cursor:a,chainId:u},signal:o,cache:i});ow.updateTransactionsCache({address:n,chainId:u,timestamp:Date.now(),transactions:g});return g},async fetchSwapQuote({amount:n,userAddress:a,from:o,to:i,gasPrice:u}){const d=await Rx.isNetworkSupported(jx.state.activeCaipNetwork?.caipNetworkId);return d?Rx.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:n,userAddress:a,from:o,to:i,gasPrice:u}}):{quotes:[]}},async fetchSwapTokens({chainId:n}){const a=await Rx.isNetworkSupported(jx.state.activeCaipNetwork?.caipNetworkId);return a?Rx.get({path:"/v1/convert/tokens",params:{chainId:n}}):{tokens:[]}},async fetchTokenPrice({addresses:n}){const a=await Rx.isNetworkSupported(jx.state.activeCaipNetwork?.caipNetworkId);if(!a)return{fungibles:[]};const o=ow.getTokenPriceCacheForAddresses(n);if(o)return o;const i=await Ox.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:n,projectId:dw.state.projectId},headers:{"Content-Type":"application/json"}});ow.updateTokenPriceCache({addresses:n,timestamp:Date.now(),tokenPrice:i});return i},async fetchSwapAllowance({tokenAddress:n,userAddress:a}){const o=await Rx.isNetworkSupported(jx.state.activeCaipNetwork?.caipNetworkId);return o?Rx.get({path:"/v1/convert/allowance",params:{tokenAddress:n,userAddress:a},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:n}){const{st:a,sv:o}=Rx.getSdkProperties();const i=await Rx.isNetworkSupported(jx.state.activeCaipNetwork?.caipNetworkId);if(!i)throw new Error("Network not supported for Gas Price");return Rx.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:n,st:a,sv:o}})},async generateSwapCalldata({amount:n,from:a,to:o,userAddress:i,disableEstimate:u}){const d=await Rx.isNetworkSupported(jx.state.activeCaipNetwork?.caipNetworkId);if(!d)throw new Error("Network not supported for Swaps");return Ox.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:n,eip155:{slippage:aw.CONVERT_SLIPPAGE_TOLERANCE},projectId:dw.state.projectId,from:a,to:o,userAddress:i,disableEstimate:u}})},async generateApproveCalldata({from:n,to:a,userAddress:o}){const{st:i,sv:u}=Rx.getSdkProperties();const d=await Rx.isNetworkSupported(jx.state.activeCaipNetwork?.caipNetworkId);if(!d)throw new Error("Network not supported for Swaps");return Rx.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:o,from:n,to:a,st:i,sv:u}})},async getBalance(n,a,o){const{st:i,sv:u}=Rx.getSdkProperties();const d=await Rx.isNetworkSupported(jx.state.activeCaipNetwork?.caipNetworkId);if(!d){hx.showError("Token Balance Unavailable");return{balances:[]}}const m=`${a}:${n}`;const g=ow.getBalanceCacheForCaipAddress(m);if(g)return g;const y=await Rx.get({path:`/v1/account/${n}/balance`,params:{currency:"usd",chainId:a,forceUpdate:o,st:i,sv:u}});ow.updateBalanceCache({caipAddress:m,balance:y,timestamp:Date.now()});return y},async lookupEnsName(n){const a=await Rx.isNetworkSupported(jx.state.activeCaipNetwork?.caipNetworkId);return a?Rx.get({path:`/v1/profile/account/${n}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:n}){const a=await Rx.isNetworkSupported(jx.state.activeCaipNetwork?.caipNetworkId);return a?Rx.get({path:`/v1/profile/reverse/${n}`,params:{sender:Lx.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(n){const a=await Rx.isNetworkSupported(jx.state.activeCaipNetwork?.caipNetworkId);return a?Rx.get({path:`/v1/profile/suggestions/${n}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:n,address:a,message:o,signature:i}){const u=await Rx.isNetworkSupported(jx.state.activeCaipNetwork?.caipNetworkId);return u?Ox.api.post({path:"/v1/profile/account",body:{coin_type:n,address:a,message:o,signature:i},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:n,partnerUserId:a,defaultNetwork:o,purchaseAmount:i,paymentAmount:u}){const d=await Rx.isNetworkSupported(jx.state.activeCaipNetwork?.caipNetworkId);if(!d)return"";const m=await Ox.api.post({path:"/v1/generators/onrampurl",params:{projectId:dw.state.projectId},body:{destinationWallets:n,defaultNetwork:o,partnerUserId:a,defaultExperience:"buy",presetCryptoAmount:i,presetFiatAmount:u}});return m.url},async getOnrampOptions(){const n=await Rx.isNetworkSupported(jx.state.activeCaipNetwork?.caipNetworkId);if(!n)return{paymentCurrencies:[],purchaseCurrencies:[]};try{const n=await Rx.get({path:"/v1/onramp/options"});return n}catch(nL){return Ix}},async getOnrampQuote({purchaseCurrency:n,paymentCurrency:a,amount:o,network:i}){try{const u=await Rx.isNetworkSupported(jx.state.activeCaipNetwork?.caipNetworkId);if(!u)return null;const d=await Ox.api.post({path:"/v1/onramp/quote",params:{projectId:dw.state.projectId},body:{purchaseCurrency:n,paymentCurrency:a,amount:o,network:i}});return d}catch(nL){return{networkFee:{amount:o,currency:a.id},paymentSubtotal:{amount:o,currency:a.id},paymentTotal:{amount:o,currency:a.id},purchaseAmount:{amount:o,currency:a.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(n){const a=await Rx.isNetworkSupported(jx.state.activeCaipNetwork?.caipNetworkId);return a?Rx.get({path:`/v1/sessions/${n}`}):[]},async revokeSmartSession(n,a,o){const i=await Rx.isNetworkSupported(jx.state.activeCaipNetwork?.caipNetworkId);return i?Ox.api.post({path:`/v1/sessions/${n}/revoke`,params:{projectId:dw.state.projectId},body:{pci:a,signature:o}}):{success:!1}},setClientId(n){Ox.clientId=n;Ox.api=new cw({baseUrl:Px,clientId:n})}};const Bx={createBalance(n,a){const o={name:n.metadata.name||"",symbol:n.metadata.symbol||"",decimals:n.metadata.decimals||0,value:n.metadata.value||0,price:n.metadata.price||0,iconUrl:n.metadata.iconUrl||""};return{name:o.name,symbol:o.symbol,chainId:a,address:"native"===n.address?void 0:this.convertAddressToCAIP10Address(n.address,a),value:o.value,price:o.price,quantity:{decimals:o.decimals.toString(),numeric:this.convertHexToBalance({hex:n.balance,decimals:o.decimals})},iconUrl:o.iconUrl}},convertHexToBalance:({hex:n,decimals:a})=>formatUnits$1(BigInt(n),a),convertAddressToCAIP10Address:(n,a)=>`${a}:${n}`,createCAIP2ChainId:(n,a)=>`${a}:${parseInt(n,16)}`,getChainIdHexFromCAIP2ChainId(n){const a=n.split(":");if(a.length<2||!a[1])return"0x0";const o=a[1];const i=parseInt(o,10);return isNaN(i)?"0x0":`0x${i.toString(16)}`},isWalletGetAssetsResponse(n){return"object"==typeof n&&null!==n&&Object.values(n).every(n=>Array.isArray(n)&&n.every(n=>this.isValidAsset(n)))},isValidAsset:n=>"object"==typeof n&&null!==n&&"string"==typeof n.address&&"string"==typeof n.balance&&("ERC20"===n.type||"NATIVE"===n.type)&&"object"==typeof n.metadata&&null!==n.metadata&&"string"==typeof n.metadata.name&&"string"==typeof n.metadata.symbol&&"number"==typeof n.metadata.decimals&&"number"==typeof n.metadata.price&&"string"==typeof n.metadata.iconUrl};const Mx={async getMyTokensWithBalance(n){const a=Lx.state.address;const o=jx.state.activeCaipNetwork;const i=ax.getConnectorId("eip155")===Pv.CONNECTOR_ID.AUTH;if(!a||!o)return[];const u=`${o.caipNetworkId}:${a}`;const d=ow.getBalanceCacheForCaipAddress(u);if(d)return d.balances;if(o.chainNamespace===Pv.CHAIN.EVM&&i){const n=await this.getEIP155Balances(a,o);if(n)return this.filterLowQualityTokens(n)}const m=await Rx.getBalance(a,o.caipNetworkId,n);return this.filterLowQualityTokens(m.balances)},async getEIP155Balances(n,a){try{const o=Bx.getChainIdHexFromCAIP2ChainId(a.caipNetworkId);const i=await vx.getCapabilities(n);if(!i?.[o]?.assetDiscovery?.supported)return null;const u=await vx.walletGetAssets({account:n,chainFilter:[o]});if(!Bx.isWalletGetAssetsResponse(u))return null;const d=u[o]||[];const m=d.map(n=>Bx.createBalance(n,a.caipNetworkId));ow.updateBalanceCache({caipAddress:`${a.caipNetworkId}:${n}`,balance:{balances:m},timestamp:Date.now()});return m}catch(o){return null}},filterLowQualityTokens:n=>n.filter(n=>"0"!==n.quantity.decimals)};const zx=proxy({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map});const Fx={state:zx,replaceState(n){n&&Object.assign(zx,ref(n))},subscribe:n=>jx.subscribeChainProp("accountState",a=>{if(a)return n(a)}),subscribeKey(n,a,o){let i;return jx.subscribeChainProp("accountState",o=>{if(o){const u=o[n];if(i!==u){i=u;a(u)}}},o)},setStatus(n,a){jx.setAccountProp("status",n,a)},getCaipAddress(n){if(n)return jx.state.chains.get(n)?.accountState?.caipAddress},setCaipAddress(n,a){const o=n?iw.getPlainAddress(n):void 0;a===jx.state.activeChain&&(jx.state.activeCaipAddress=n);jx.setAccountProp("caipAddress",n,a);jx.setAccountProp("address",o,a)},setBalance(n,a,o){jx.setAccountProp("balance",n,o);jx.setAccountProp("balanceSymbol",a,o)},setProfileName(n,a){jx.setAccountProp("profileName",n,a)},setProfileImage(n,a){jx.setAccountProp("profileImage",n,a)},setUser(n,a){jx.setAccountProp("user",n,a)},setAddressExplorerUrl(n,a){jx.setAccountProp("addressExplorerUrl",n,a)},setSmartAccountDeployed(n,a){jx.setAccountProp("smartAccountDeployed",n,a)},setCurrentTab(n){jx.setAccountProp("currentTab",n,jx.state.activeChain)},setTokenBalance(n,a){n&&jx.setAccountProp("tokenBalance",n,a)},setShouldUpdateToAddress(n,a){jx.setAccountProp("shouldUpdateToAddress",n,a)},addAddressLabel(n,a,o){if(!o)return;const i=jx.state.chains.get(o)?.accountState?.addressLabels||new Map;i.set(n,a);jx.setAccountProp("addressLabels",i,o)},removeAddressLabel(n,a){if(!a)return;const o=jx.state.chains.get(a)?.accountState?.addressLabels||new Map;o.delete(n);jx.setAccountProp("addressLabels",o,a)},setConnectedWalletInfo(n,a){jx.setAccountProp("connectedWalletInfo",n,a,!1)},setPreferredAccountType(n,a){jx.setAccountProp("preferredAccountType",n,a)},setSocialProvider(n,a){n&&jx.setAccountProp("socialProvider",n,a)},setSocialWindow(n,a){jx.setAccountProp("socialWindow",n?ref(n):void 0,a)},setFarcasterUrl(n,a){jx.setAccountProp("farcasterUrl",n,a)},async fetchTokenBalance(n){zx.balanceLoading=!0;const a=jx.state.activeCaipNetwork?.caipNetworkId;const o=jx.state.activeCaipNetwork?.chainNamespace;const i=jx.state.activeCaipAddress;const u=i?iw.getPlainAddress(i):void 0;if(zx.lastRetry&&!iw.isAllowedRetry(zx.lastRetry,30*aw.ONE_SEC_MS)){zx.balanceLoading=!1;return[]}try{if(u&&a&&o){const n=await Mx.getMyTokensWithBalance();Lx.setTokenBalance(n,o);zx.lastRetry=void 0;zx.balanceLoading=!1;return n}}catch(d){zx.lastRetry=Date.now();n?.(d);hx.showError("Token Balance Unavailable")}finally{zx.balanceLoading=!1}return[]},resetAccount(n){jx.resetAccount(n)}};const Lx=withErrorBoundary(Fx);const Dx={onSwitchNetwork({network:n,ignoreSwitchConfirmation:a=!1}){const o=jx.state.activeCaipNetwork;const i=Jw.state.data;const u=n.id===o?.id;if(u)return;const d=Lx.getCaipAddress(jx.state.activeChain);const m=n.chainNamespace!==jx.state.activeChain;const g=Lx.getCaipAddress(n.chainNamespace);const y=ax.getConnectorId(jx.state.activeChain);const v=y===Pv.CONNECTOR_ID.AUTH;const x=Pv.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(a=>a===n.chainNamespace);a||v&&x?Jw.push("SwitchNetwork",{...i,network:n}):d&&m&&!g?Jw.push("SwitchActiveChain",{switchToChain:n.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:n}):Jw.push("SwitchNetwork",{...i,network:n})}};const $x=proxy({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0});const Ux={state:$x,subscribe:n=>subscribe($x,()=>n($x)),subscribeKey:(n,a)=>subscribeKey($x,n,a),async open(n){const a=n?.namespace;const o=jx.state.activeChain;const i=a&&a!==o;const u=jx.getAccountData(n?.namespace)?.caipAddress;vx.state.wcBasic?Kw.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Kw.prefetch();ax.setFilterByNamespace(n?.namespace);Wx.setLoading(!0,a);if(a&&i){const n=jx.getNetworkData(a)?.caipNetwork||jx.getRequestedCaipNetworks(a)[0];n&&Dx.onSwitchNetwork({network:n,ignoreSwitchConfirmation:!0})}else{const a=jx.state.noAdapters;dw.state.manualWCControl||a&&!u?iw.isMobile()?Jw.reset("AllWallets"):Jw.reset("ConnectingWalletConnectBasic"):n?.view?Jw.reset(n.view,n.data):u?Jw.reset("Account"):Jw.reset("Connect")}$x.open=!0;xx.set({open:!0});$w.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:Boolean(u)}})},close(){const n=dw.state.enableEmbedded;const a=Boolean(jx.state.activeCaipAddress);$x.open&&$w.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:a}});$x.open=!1;Jw.reset("Connect");Wx.clearLoading();n?a?Jw.replace("Account"):Jw.push("Connect"):xx.set({open:!1});vx.resetUri()},setLoading(n,a){a&&$x.loadingNamespaceMap.set(a,n);$x.loading=n;xx.set({loading:n})},clearLoading(){$x.loadingNamespaceMap.clear();$x.loading=!1;xx.set({loading:!1})},shake(){if(!$x.shake){$x.shake=!0;setTimeout(()=>{$x.shake=!1},500)}}};const Wx=withErrorBoundary(Ux);const Hx=2147483648;const qx={convertEVMChainIdToCoinType(n){if(n>=Hx)throw new Error("Invalid chainId");return(Hx|n)>>>0}};const Gx=proxy({suggestions:[],loading:!1});const Vx={state:Gx,subscribe:n=>subscribe(Gx,()=>n(Gx)),subscribeKey:(n,a)=>subscribeKey(Gx,n,a),async resolveName(n){try{return await Rx.lookupEnsName(n)}catch(nL){const a=nL;throw new Error(a?.reasons?.[0]?.description||"Error resolving name")}},async isNameRegistered(n){try{await Rx.lookupEnsName(n);return!0}catch{return!1}},async getSuggestions(n){try{Gx.loading=!0;Gx.suggestions=[];const a=await Rx.getEnsNameSuggestions(n);Gx.suggestions=a.suggestions||[];return Gx.suggestions}catch(nL){const a=Kx.parseEnsApiError(nL,"Error fetching name suggestions");throw new Error(a)}finally{Gx.loading=!1}},async getNamesForAddress(n){try{const a=jx.state.activeCaipNetwork;if(!a)return[];const o=ow.getEnsFromCacheForAddress(n);if(o)return o;const i=await Rx.reverseLookupEnsName({address:n});ow.updateEnsCache({address:n,ens:i,timestamp:Date.now()});return i}catch(nL){const a=Kx.parseEnsApiError(nL,"Error fetching names for address");throw new Error(a)}},async registerName(n){const a=jx.state.activeCaipNetwork;const o=Lx.state.address;const i=ax.getAuthConnector();if(!a)throw new Error("Network not found");if(!o||!i)throw new Error("Address or auth connector not found");Gx.loading=!0;try{const i=JSON.stringify({name:n,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Jw.pushTransactionStack({onCancel(){Jw.replace("RegisterAccountName")}});const u=await vx.signMessage(i);Gx.loading=!1;const d=a.id;if(!d)throw new Error("Network not found");const m=qx.convertEVMChainIdToCoinType(Number(d));await Rx.registerEnsName({coinType:m,address:o,signature:u,message:i});Lx.setProfileName(n,a.chainNamespace);ow.updateEnsCache({address:o,ens:[{name:n,registered_at:(new Date).toISOString(),updated_at:void 0,addresses:{},attributes:[]}],timestamp:Date.now()});Jw.replace("RegisterAccountNameSuccess")}catch(nL){const o=Kx.parseEnsApiError(nL,`Error registering name ${n}`);Jw.replace("RegisterAccountName");throw new Error(o)}finally{Gx.loading=!1}},validateName:n=>/^[a-zA-Z0-9-]{4,}$/u.test(n),parseEnsApiError(n,a){const o=n;return o?.reasons?.[0]?.description||a}};const Kx=withErrorBoundary(Vx);var Zx={exports:{}};var Yx;function requireEvents(){if(Yx)return Zx.exports;Yx=1;var n="object"==typeof Reflect?Reflect:null;var a=n&&"function"==typeof n.apply?n.apply:function(n,a,o){return Function.prototype.apply.call(n,a,o)};var o;o=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:function(n){return Object.getOwnPropertyNames(n)};function ProcessEmitWarning(n){console&&console.warn&&console.warn(n)}var i=Number.isNaN||function(n){return n!=n};function EventEmitter(){EventEmitter.init.call(this)}Zx.exports=EventEmitter;Zx.exports.once=once;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=void 0;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=void 0;var u=10;function checkListener(n){if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(n){if("number"!=typeof n||n<0||i(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");u=n}});EventEmitter.init=function(){if(void 0===this._events||this._events===Object.getPrototypeOf(this)._events){this._events=Object.create(null);this._eventsCount=0}this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function(n){if("number"!=typeof n||n<0||i(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");this._maxListeners=n;return this};function _getMaxListeners(n){return void 0===n._maxListeners?EventEmitter.defaultMaxListeners:n._maxListeners}EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function(n){var o=[];for(var i=1;i<arguments.length;i++)o.push(arguments[i]);var u="error"===n;var d=this._events;if(void 0!==d)u=u&&void 0===d.error;else if(!u)return!1;if(u){var m;o.length>0&&(m=o[0]);if(m instanceof Error)throw m;var g=new Error("Unhandled error."+(m?" ("+m.message+")":""));g.context=m;throw g}var y=d[n];if(void 0===y)return!1;if("function"==typeof y)a(y,this,o);else{var v=y.length;var x=arrayClone(y,v);for(i=0;i<v;++i)a(x[i],this,o)}return!0};function _addListener(n,a,o,i){var u;var d;var m;checkListener(o);d=n._events;if(void 0===d){d=n._events=Object.create(null);n._eventsCount=0}else{if(void 0!==d.newListener){n.emit("newListener",a,o.listener?o.listener:o);d=n._events}m=d[a]}if(void 0===m){m=d[a]=o;++n._eventsCount}else{"function"==typeof m?m=d[a]=i?[o,m]:[m,o]:i?m.unshift(o):m.push(o);u=_getMaxListeners(n);if(u>0&&m.length>u&&!m.warned){m.warned=!0;var g=new Error("Possible EventEmitter memory leak detected. "+m.length+" "+String(a)+" listeners added. Use emitter.setMaxListeners() to increase limit");g.name="MaxListenersExceededWarning";g.emitter=n;g.type=a;g.count=m.length;ProcessEmitWarning(g)}}return n}EventEmitter.prototype.addListener=function(n,a){return _addListener(this,n,a,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function(n,a){return _addListener(this,n,a,!0)};function onceWrapper(){if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=!0;return 0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}}function _onceWrap(n,a,o){var i={fired:!1,wrapFn:void 0,target:n,type:a,listener:o};var u=onceWrapper.bind(i);u.listener=o;i.wrapFn=u;return u}EventEmitter.prototype.once=function(n,a){checkListener(a);this.on(n,_onceWrap(this,n,a));return this};EventEmitter.prototype.prependOnceListener=function(n,a){checkListener(a);this.prependListener(n,_onceWrap(this,n,a));return this};EventEmitter.prototype.removeListener=function(n,a){var o,i,u,d,m;checkListener(a);i=this._events;if(void 0===i)return this;o=i[n];if(void 0===o)return this;if(o===a||o.listener===a)if(0===--this._eventsCount)this._events=Object.create(null);else{delete i[n];i.removeListener&&this.emit("removeListener",n,o.listener||a)}else if("function"!=typeof o){u=-1;for(d=o.length-1;d>=0;d--)if(o[d]===a||o[d].listener===a){m=o[d].listener;u=d;break}if(u<0)return this;0===u?o.shift():spliceOne(o,u);1===o.length&&(i[n]=o[0]);void 0!==i.removeListener&&this.emit("removeListener",n,m||a)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function(n){var a,o,i;o=this._events;if(void 0===o)return this;if(void 0===o.removeListener){if(0===arguments.length){this._events=Object.create(null);this._eventsCount=0}else void 0!==o[n]&&(0===--this._eventsCount?this._events=Object.create(null):delete o[n]);return this}if(0===arguments.length){var u=Object.keys(o);var d;for(i=0;i<u.length;++i){d=u[i];"removeListener"!==d&&this.removeAllListeners(d)}this.removeAllListeners("removeListener");this._events=Object.create(null);this._eventsCount=0;return this}a=o[n];if("function"==typeof a)this.removeListener(n,a);else if(void 0!==a)for(i=a.length-1;i>=0;i--)this.removeListener(n,a[i]);return this};function _listeners(n,a,o){var i=n._events;if(void 0===i)return[];var u=i[a];return void 0===u?[]:"function"==typeof u?o?[u.listener||u]:[u]:o?unwrapListeners(u):arrayClone(u,u.length)}EventEmitter.prototype.listeners=function(n){return _listeners(this,n,!0)};EventEmitter.prototype.rawListeners=function(n){return _listeners(this,n,!1)};EventEmitter.listenerCount=function(n,a){return"function"==typeof n.listenerCount?n.listenerCount(a):listenerCount.call(n,a)};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(n){var a=this._events;if(void 0!==a){var o=a[n];if("function"==typeof o)return 1;if(void 0!==o)return o.length}return 0}EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]};function arrayClone(n,a){var o=new Array(a);for(var i=0;i<a;++i)o[i]=n[i];return o}function spliceOne(n,a){for(;a+1<n.length;a++)n[a]=n[a+1];n.pop()}function unwrapListeners(n){var a=new Array(n.length);for(var o=0;o<a.length;++o)a[o]=n[o].listener||n[o];return a}function once(n,a){return new Promise(function(o,i){function errorListener(o){n.removeListener(a,resolver);i(o)}function resolver(){"function"==typeof n.removeListener&&n.removeListener("error",errorListener);o([].slice.call(arguments))}eventTargetAgnosticAddListener(n,a,resolver,{once:!0});"error"!==a&&addErrorHandlerIfEventEmitter(n,errorListener,{once:!0})})}function addErrorHandlerIfEventEmitter(n,a,o){"function"==typeof n.on&&eventTargetAgnosticAddListener(n,"error",a,o)}function eventTargetAgnosticAddListener(n,a,o,i){if("function"==typeof n.on)i.once?n.once(a,o):n.on(a,o);else{if("function"!=typeof n.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n);n.addEventListener(a,function wrapListener(u){i.once&&n.removeEventListener(a,wrapListener);o(u)})}}return Zx.exports}requireEvents();const JSONStringify=n=>JSON.stringify(n,(n,a)=>"bigint"==typeof a?a.toString()+"n":a);function safeJsonStringify(n){return"string"==typeof n?n:JSONStringify(n)||""}var Jx;var Qx;function requireQuickFormatUnescaped(){if(Qx)return Jx;Qx=1;function tryStringify(n){try{return JSON.stringify(n)}catch(nL){return'"[Circular]"'}}Jx=format2;function format2(n,a,o){var i=o&&o.stringify||tryStringify;var u=1;if("object"==typeof n&&null!==n){var d=a.length+u;if(1===d)return n;var m=new Array(d);m[0]=i(n);for(var g=1;g<d;g++)m[g]=i(a[g]);return m.join(" ")}if("string"!=typeof n)return n;var y=a.length;if(0===y)return n;var v="";var x=1-u;var N=-1;var k=n&&n.length||0;for(var E=0;E<k;){if(37===n.charCodeAt(E)&&E+1<k){N=N>-1?N:0;switch(n.charCodeAt(E+1)){case 100:case 102:if(x>=y)break;if(null==a[x])break;N<E&&(v+=n.slice(N,E));v+=Number(a[x]);N=E+2;E++;break;case 105:if(x>=y)break;if(null==a[x])break;N<E&&(v+=n.slice(N,E));v+=Math.floor(Number(a[x]));N=E+2;E++;break;case 79:case 111:case 106:if(x>=y)break;if(void 0===a[x])break;N<E&&(v+=n.slice(N,E));var S=typeof a[x];if("string"===S){v+="'"+a[x]+"'";N=E+2;E++;break}if("function"===S){v+=a[x].name||"<anonymous>";N=E+2;E++;break}v+=i(a[x]);N=E+2;E++;break;case 115:if(x>=y)break;N<E&&(v+=n.slice(N,E));v+=String(a[x]);N=E+2;E++;break;case 37:N<E&&(v+=n.slice(N,E));v+="%";N=E+2;E++;x--}++x}++E}if(-1===N)return n;N<k&&(v+=n.slice(N));return v}return Jx}var Xx;var eN;function requireBrowser(){if(eN)return Xx;eN=1;const n=requireQuickFormatUnescaped();Xx=pino;const a=pfGlobalThisOrFallback().console||{};const o={mapHttpRequest:mock,mapHttpResponse:mock,wrapRequestSerializer:passthrough,wrapResponseSerializer:passthrough,wrapErrorSerializer:passthrough,req:mock,res:mock,err:asErrValue};function shouldSerialize(n,a){if(Array.isArray(n)){const a=n.filter(function(n){return"!stdSerializers.err"!==n});return a}return!0===n&&Object.keys(a)}function pino(n){n=n||{};n.browser=n.browser||{};const o=n.browser.transmit;if(o&&"function"!=typeof o.send)throw Error("pino: transmit option must have a send function");const i=n.browser.write||a;n.browser.write&&(n.browser.asObject=!0);const u=n.serializers||{};const d=shouldSerialize(n.browser.serialize,u);let m=n.browser.serialize;Array.isArray(n.browser.serialize)&&n.browser.serialize.indexOf("!stdSerializers.err")>-1&&(m=!1);const g=["error","fatal","warn","info","debug","trace"];"function"==typeof i&&(i.error=i.fatal=i.warn=i.info=i.debug=i.trace=i);!1===n.enabled&&(n.level="silent");const y=n.level||"info";const v=Object.create(i);v.log||(v.log=noop3);Object.defineProperty(v,"levelVal",{get:getLevelVal});Object.defineProperty(v,"level",{get:getLevel,set:setLevel});const x={transmit:o,serialize:d,asObject:n.browser.asObject,levels:g,timestamp:getTimeFunction(n)};v.levels=pino.levels;v.level=y;v.setMaxListeners=v.getMaxListeners=v.emit=v.addListener=v.on=v.prependListener=v.once=v.prependOnceListener=v.removeListener=v.removeAllListeners=v.listeners=v.listenerCount=v.eventNames=v.write=v.flush=noop3;v.serializers=u;v._serialize=d;v._stdErrSerialize=m;v.child=child;o&&(v._logEvent=createLogEventShape());function getLevelVal(){return"silent"===this.level?1/0:this.levels.values[this.level]}function getLevel(){return this._level}function setLevel(n){if("silent"!==n&&!this.levels.values[n])throw Error("unknown level "+n);this._level=n;set(x,v,"error","log");set(x,v,"fatal","error");set(x,v,"warn","error");set(x,v,"info","log");set(x,v,"debug","log");set(x,v,"trace","log")}function child(a,i){if(!a)throw new Error("missing bindings for child Pino");i=i||{};d&&a.serializers&&(i.serializers=a.serializers);const m=i.serializers;if(d&&m){var g=Object.assign({},u,m);var y=!0===n.browser.serialize?Object.keys(g):d;delete a.serializers;applySerializers([a],y,g,this._stdErrSerialize)}function Child(n){this._childLevel=1+(0|n._childLevel);this.error=bind(n,a,"error");this.fatal=bind(n,a,"fatal");this.warn=bind(n,a,"warn");this.info=bind(n,a,"info");this.debug=bind(n,a,"debug");this.trace=bind(n,a,"trace");if(g){this.serializers=g;this._serialize=y}o&&(this._logEvent=createLogEventShape([].concat(n._logEvent.bindings,a)))}Child.prototype=this;return new Child(this)}return v}pino.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};pino.stdSerializers=o;pino.stdTimeFunctions=Object.assign({},{nullTime:nullTime,epochTime:epochTime,unixTime:unixTime,isoTime:isoTime});function set(n,o,i,u){const d=Object.getPrototypeOf(o);o[i]=o.levelVal>o.levels.values[i]?noop3:d[i]?d[i]:a[i]||a[u]||noop3;wrap(n,o,i)}function wrap(n,o,i){(n.transmit||o[i]!==noop3)&&(o[i]=function(u){return function(){const d=n.timestamp();const m=new Array(arguments.length);const g=Object.getPrototypeOf&&Object.getPrototypeOf(this)===a?a:this;for(var y=0;y<m.length;y++)m[y]=arguments[y];n.serialize&&!n.asObject&&applySerializers(m,this._serialize,this.serializers,this._stdErrSerialize);n.asObject?u.call(g,asObject(this,i,m,d)):u.apply(g,m);if(n.transmit){const a=n.transmit.level||o.level;const u=pino.levels.values[a];const g=pino.levels.values[i];if(g<u)return;transmit(this,{ts:d,methodLevel:i,methodValue:g,transmitValue:pino.levels.values[n.transmit.level||o.level],send:n.transmit.send,val:o.levelVal},m)}}}(o[i]))}function asObject(a,o,i,u){a._serialize&&applySerializers(i,a._serialize,a.serializers,a._stdErrSerialize);const d=i.slice();let m=d[0];const g={};u&&(g.time=u);g.level=pino.levels.values[o];let y=1+(0|a._childLevel);y<1&&(y=1);if(null!==m&&"object"==typeof m){for(;y--&&"object"==typeof d[0];)Object.assign(g,d.shift());m=d.length?n(d.shift(),d):void 0}else"string"==typeof m&&(m=n(d.shift(),d));void 0!==m&&(g.msg=m);return g}function applySerializers(n,a,o,i){for(const u in n)if(i&&n[u]instanceof Error)n[u]=pino.stdSerializers.err(n[u]);else if("object"==typeof n[u]&&!Array.isArray(n[u]))for(const i in n[u])a&&a.indexOf(i)>-1&&i in o&&(n[u][i]=o[i](n[u][i]))}function bind(n,a,o){return function(){const i=new Array(1+arguments.length);i[0]=a;for(var u=1;u<i.length;u++)i[u]=arguments[u-1];return n[o].apply(this,i)}}function transmit(n,a,o){const i=a.send;const u=a.ts;const d=a.methodLevel;const m=a.methodValue;const g=a.val;const y=n._logEvent.bindings;applySerializers(o,n._serialize||Object.keys(n.serializers),n.serializers,void 0===n._stdErrSerialize||n._stdErrSerialize);n._logEvent.ts=u;n._logEvent.messages=o.filter(function(n){return-1===y.indexOf(n)});n._logEvent.level.label=d;n._logEvent.level.value=m;i(d,n._logEvent,g);n._logEvent=createLogEventShape(y)}function createLogEventShape(n){return{ts:0,messages:[],bindings:n||[],level:{label:"",value:0}}}function asErrValue(n){const a={type:n.constructor.name,msg:n.message,stack:n.stack};for(const o in n)void 0===a[o]&&(a[o]=n[o]);return a}function getTimeFunction(n){return"function"==typeof n.timestamp?n.timestamp:!1===n.timestamp?nullTime:epochTime}function mock(){return{}}function passthrough(n){return n}function noop3(){}function nullTime(){return!1}function epochTime(){return Date.now()}function unixTime(){return Math.round(Date.now()/1e3)}function isoTime(){return new Date(Date.now()).toISOString()}function pfGlobalThisOrFallback(){function defd(n){return"undefined"!=typeof n&&n}try{if("undefined"!=typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"globalThis",{get:function(){delete Object.prototype.globalThis;return this.globalThis=this},configurable:!0});return globalThis}catch(nL){return defd(self)||defd(window)||defd(this)||{}}}return Xx}var tN=requireBrowser();const nN=getDefaultExportFromCjs(tN);const rN={level:"info"},sN="custom_context",aN=1024e3;let oN=class{constructor(n){this.nodeValue=n,this.sizeInBytes=(new TextEncoder).encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}};let iN=class{constructor(n){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=n,this.sizeInBytes=0}append(n){const a=new oN(n);if(a.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${n} with size ${a.size}`);for(;this.size+a.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=a),this.tail=a):(this.head=a,this.tail=a),this.lengthInNodes++,this.sizeInBytes+=a.size}shift(){if(!this.head)return;const n=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=n.size}toArray(){const n=[];let a=this.head;for(;null!==a;)n.push(a.value),a=a.next;return n}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let n=this.head;return{next:()=>{if(!n)return{done:!0,value:null};const a=n.value;return n=n.next,{done:!1,value:a}}}}};let cN=class{constructor(n,a=aN){this.level=n??"error",this.levelValue=tN.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=a,this.logs=new iN(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(n,a){a===tN.levels.values.error?console.error(n):a===tN.levels.values.warn?console.warn(n):a===tN.levels.values.debug?console.debug(n):a===tN.levels.values.trace?console.trace(n):console.log(n)}appendToLogs(n){this.logs.append(safeJsonStringify({timestamp:(new Date).toISOString(),log:n}));const a="string"==typeof n?JSON.parse(n).level:n.level;a>=this.levelValue&&this.forwardToConsole(n,a)}getLogs(){return this.logs}clearLogs(){this.logs=new iN(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(n){const a=this.getLogArray();return a.push(safeJsonStringify({extraMetadata:n})),new Blob(a,{type:"application/json"})}};let lN=class{constructor(n,a=aN){this.baseChunkLogger=new cN(n,a)}write(n){this.baseChunkLogger.appendToLogs(n)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(n){return this.baseChunkLogger.logsToBlob(n)}downloadLogsBlobInBrowser(n){const a=URL.createObjectURL(this.logsToBlob(n)),o=document.createElement("a");o.href=a,o.download=`walletconnect-logs-${(new Date).toISOString()}.txt`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)}};let uN=class{constructor(n,a=aN){this.baseChunkLogger=new cN(n,a)}write(n){this.baseChunkLogger.appendToLogs(n)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(n){return this.baseChunkLogger.logsToBlob(n)}};var dN=Object.defineProperty,hN=Object.defineProperties,fN=Object.getOwnPropertyDescriptors,pN=Object.getOwnPropertySymbols,mN=Object.prototype.hasOwnProperty,gN=Object.prototype.propertyIsEnumerable,f$6=(n,a,o)=>a in n?dN(n,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[a]=o,i$5=(n,a)=>{for(var o in a||(a={}))mN.call(a,o)&&f$6(n,o,a[o]);if(pN)for(var o of pN(a))gN.call(a,o)&&f$6(n,o,a[o]);return n},g$1=(n,a)=>hN(n,fN(a));function k$1(n){return g$1(i$5({},n),{level:n?.level||rN.level})}function v$1(n,a=sN){return n[a]||""}function b$1(n,a,o=sN){return n[o]=a,n}function y$2(n,a=sN){let o="";return o=typeof n.bindings>"u"?v$1(n,a):n.bindings().context||"",o}function w$2(n,a,o=sN){const i=y$2(n,o);return i.trim()?`${i}/${a}`:a}function E$4(n,a,o=sN){const i=w$2(n,a,o),u=n.child({context:i});return b$1(u,i,o)}function C$5(n){var a,o;const i=new lN(null==(a=n.opts)?void 0:a.level,n.maxSizeInBytes);return{logger:nN(g$1(i$5({},n.opts),{level:"trace",browser:g$1(i$5({},null==(o=n.opts)?void 0:o.browser),{write:n=>i.write(n)})})),chunkLoggerController:i}}function I$1(n){var a;const o=new uN(null==(a=n.opts)?void 0:a.level,n.maxSizeInBytes);return{logger:nN(g$1(i$5({},n.opts),{level:"trace"}),o),chunkLoggerController:o}}function A$2(n){return typeof n.loggerOverride<"u"&&"string"!=typeof n.loggerOverride?{logger:n.loggerOverride,chunkLoggerController:null}:typeof window<"u"?C$5(n):I$1(n)}function base(n){if(n.length>=255)throw new TypeError("Alphabet too long");const a=new Uint8Array(256);for(let m=0;m<a.length;m++)a[m]=255;for(let m=0;m<n.length;m++){const o=n.charAt(m);const i=o.charCodeAt(0);if(255!==a[i])throw new TypeError(o+" is ambiguous");a[i]=m}const o=n.length;const i=n.charAt(0);const u=Math.log(o)/Math.log(256);const d=Math.log(256)/Math.log(o);function encode2(a){a instanceof Uint8Array||(ArrayBuffer.isView(a)?a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength):Array.isArray(a)&&(a=Uint8Array.from(a)));if(!(a instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===a.length)return"";let u=0;let m=0;let g=0;const y=a.length;for(;g!==y&&0===a[g];){g++;u++}const v=(y-g)*d+1>>>0;const x=new Uint8Array(v);for(;g!==y;){let n=a[g];let i=0;for(let a=v-1;(0!==n||i<m)&&-1!==a;a--,i++){n+=256*x[a]>>>0;x[a]=n%o>>>0;n=n/o>>>0}if(0!==n)throw new Error("Non-zero carry");m=i;g++}let N=v-m;for(;N!==v&&0===x[N];)N++;let k=i.repeat(u);for(;N<v;++N)k+=n.charAt(x[N]);return k}function decodeUnsafe(n){if("string"!=typeof n)throw new TypeError("Expected String");if(0===n.length)return new Uint8Array;let d=0;let m=0;let g=0;for(;n[d]===i;){m++;d++}const y=(n.length-d)*u+1>>>0;const v=new Uint8Array(y);for(;d<n.length;){const i=n.charCodeAt(d);if(i>255)return;let u=a[i];if(255===u)return;let m=0;for(let n=y-1;(0!==u||m<g)&&-1!==n;n--,m++){u+=o*v[n]>>>0;v[n]=u%256>>>0;u=u/256>>>0}if(0!==u)throw new Error("Non-zero carry");g=m;d++}let x=y-g;for(;x!==y&&0===v[x];)x++;const N=new Uint8Array(m+(y-x));let k=m;for(;x!==y;)N[k++]=v[x++];return N}function decode(n){const a=decodeUnsafe(n);if(a)return a;throw new Error("Non-base"+o+" character")}return{encode:encode2,decodeUnsafe:decodeUnsafe,decode:decode}}var yN="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";base(yN);var bN={};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$1=function(n,a){extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)a.hasOwnProperty(o)&&(n[o]=a[o])};return extendStatics$1(n,a)};function __extends$1(n,a){extendStatics$1(n,a);function __(){this.constructor=n}n.prototype=null===a?Object.create(a):(__.prototype=a.prototype,new __)}var __assign$1=function(){__assign$1=Object.assign||function(n){for(var a,o=1,i=arguments.length;o<i;o++){a=arguments[o];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])}return n};return __assign$1.apply(this,arguments)};function __rest$1(n,a){var o={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&a.indexOf(i)<0&&(o[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var u=0;for(i=Object.getOwnPropertySymbols(n);u<i.length;u++)a.indexOf(i[u])<0&&Object.prototype.propertyIsEnumerable.call(n,i[u])&&(o[i[u]]=n[i[u]])}return o}function __decorate$1(n,a,o,i){var u,d=arguments.length,m=d<3?a:null===i?i=Object.getOwnPropertyDescriptor(a,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)m=Reflect.decorate(n,a,o,i);else for(var g=n.length-1;g>=0;g--)(u=n[g])&&(m=(d<3?u(m):d>3?u(a,o,m):u(a,o))||m);return d>3&&m&&Object.defineProperty(a,o,m),m}function __param$1(n,a){return function(o,i){a(o,i,n)}}function __metadata$1(n,a){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,a)}function __awaiter$1(n,a,o,i){function adopt(n){return n instanceof o?n:new o(function(a){a(n)})}return new(o||(o=Promise))(function(o,u){function fulfilled(n){try{step(i.next(n))}catch(nL){u(nL)}}function rejected(n){try{step(i.throw(n))}catch(nL){u(nL)}}function step(n){n.done?o(n.value):adopt(n.value).then(fulfilled,rejected)}step((i=i.apply(n,a||[])).next())})}function __generator$1(n,a){var o,i,u,d,m={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return d={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d;function verb(n){return function(a){return step([n,a])}}function step(d){if(o)throw new TypeError("Generator is already executing.");for(;m;)try{if(o=1,i&&(u=2&d[0]?i.return:d[0]?i.throw||((u=i.return)&&u.call(i),0):i.next)&&!(u=u.call(i,d[1])).done)return u;(i=0,u)&&(d=[2&d[0],u.value]);switch(d[0]){case 0:case 1:u=d;break;case 4:m.label++;return{value:d[1],done:!1};case 5:m.label++;i=d[1];d=[0];continue;case 7:d=m.ops.pop();m.trys.pop();continue;default:if(!(u=m.trys,u=u.length>0&&u[u.length-1])&&(6===d[0]||2===d[0])){m=0;continue}if(3===d[0]&&(!u||d[1]>u[0]&&d[1]<u[3])){m.label=d[1];break}if(6===d[0]&&m.label<u[1]){m.label=u[1];u=d;break}if(u&&m.label<u[2]){m.label=u[2];m.ops.push(d);break}u[2]&&m.ops.pop();m.trys.pop();continue}d=a.call(n,m)}catch(nL){d=[6,nL];i=0}finally{o=u=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function __createBinding$1(n,a,o,i){void 0===i&&(i=o);n[i]=a[o]}function __exportStar$1(n,a){for(var o in n)"default"===o||a.hasOwnProperty(o)||(a[o]=n[o])}function __values$1(n){var a="function"==typeof Symbol&&Symbol.iterator,o=a&&n[a],i=0;if(o)return o.call(n);if(n&&"number"==typeof n.length)return{next:function(){n&&i>=n.length&&(n=void 0);return{value:n&&n[i++],done:!n}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read$1(n,a){var o="function"==typeof Symbol&&n[Symbol.iterator];if(!o)return n;var i,u,d=o.call(n),m=[];try{for(;(void 0===a||a-- >0)&&!(i=d.next()).done;)m.push(i.value)}catch(g){u={error:g}}finally{try{i&&!i.done&&(o=d.return)&&o.call(d)}finally{if(u)throw u.error}}return m}function __spread$1(){for(var n=[],a=0;a<arguments.length;a++)n=n.concat(__read$1(arguments[a]));return n}function __spreadArrays$1(){for(var n=0,a=0,o=arguments.length;a<o;a++)n+=arguments[a].length;var i=Array(n),u=0;for(a=0;a<o;a++)for(var d=arguments[a],m=0,g=d.length;m<g;m++,u++)i[u]=d[m];return i}function __await$1(n){return this instanceof __await$1?(this.v=n,this):new __await$1(n)}function __asyncGenerator$1(n,a,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,u=o.apply(n,a||[]),d=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){u[n]&&(i[n]=function(a){return new Promise(function(o,i){d.push([n,a,o,i])>1||resume(n,a)})})}function resume(n,a){try{step(u[n](a))}catch(nL){settle(d[0][3],nL)}}function step(n){n.value instanceof __await$1?Promise.resolve(n.value.v).then(fulfill,reject):settle(d[0][2],n)}function fulfill(n){resume("next",n)}function reject(n){resume("throw",n)}function settle(n,a){(n(a),d.shift(),d.length)&&resume(d[0][0],d[0][1])}}function __asyncDelegator$1(n){var a,o;return a={},verb("next"),verb("throw",function(n){throw n}),verb("return"),a[Symbol.iterator]=function(){return this},a;function verb(i,u){a[i]=n[i]?function(a){return(o=!o)?{value:__await$1(n[i](a)),done:"return"===i}:u?u(a):a}:u}}function __asyncValues$1(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,o=n[Symbol.asyncIterator];return o?o.call(n):(n="function"==typeof __values$1?__values$1(n):n[Symbol.iterator](),a={},verb("next"),verb("throw"),verb("return"),a[Symbol.asyncIterator]=function(){return this},a);function verb(o){a[o]=n[o]&&function(a){return new Promise(function(i,u){a=n[o](a),settle(i,u,a.done,a.value)})}}function settle(n,a,o,i){Promise.resolve(i).then(function(a){n({value:a,done:o})},a)}}function __makeTemplateObject$1(n,a){Object.defineProperty?Object.defineProperty(n,"raw",{value:a}):n.raw=a;return n}function __importStar$1(n){if(n&&n.__esModule)return n;var a={};if(null!=n)for(var o in n)Object.hasOwnProperty.call(n,o)&&(a[o]=n[o]);a.default=n;return a}function __importDefault$1(n){return n&&n.__esModule?n:{default:n}}function __classPrivateFieldGet$1(n,a){if(!a.has(n))throw new TypeError("attempted to get private field on non-instance");return a.get(n)}function __classPrivateFieldSet$1(n,a,o){if(!a.has(n))throw new TypeError("attempted to set private field on non-instance");a.set(n,o);return o}const vN=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return __assign$1},__asyncDelegator:__asyncDelegator$1,__asyncGenerator:__asyncGenerator$1,__asyncValues:__asyncValues$1,__await:__await$1,__awaiter:__awaiter$1,__classPrivateFieldGet:__classPrivateFieldGet$1,__classPrivateFieldSet:__classPrivateFieldSet$1,__createBinding:__createBinding$1,__decorate:__decorate$1,__exportStar:__exportStar$1,__extends:__extends$1,__generator:__generator$1,__importDefault:__importDefault$1,__importStar:__importStar$1,__makeTemplateObject:__makeTemplateObject$1,__metadata:__metadata$1,__param:__param$1,__read:__read$1,__rest:__rest$1,__spread:__spread$1,__spreadArrays:__spreadArrays$1,__values:__values$1},Symbol.toStringTag,{value:"Module"}));const wN=getAugmentedNamespace(vN);var xN={};var NN;function requireCrypto(){if(NN)return xN;NN=1;Object.defineProperty(xN,"__esModule",{value:!0});xN.isBrowserCryptoAvailable=xN.getSubtleCrypto=xN.getBrowerCrypto=void 0;function getBrowerCrypto(){return(null===globalThis||void 0===globalThis?void 0:globalThis.crypto)||(null===globalThis||void 0===globalThis?void 0:globalThis.msCrypto)||{}}xN.getBrowerCrypto=getBrowerCrypto;function getSubtleCrypto(){const n=getBrowerCrypto();return n.subtle||n.webkitSubtle}xN.getSubtleCrypto=getSubtleCrypto;function isBrowserCryptoAvailable(){return!!getBrowerCrypto()&&!!getSubtleCrypto()}xN.isBrowserCryptoAvailable=isBrowserCryptoAvailable;return xN}var kN={};var CN;function requireEnv(){if(CN)return kN;CN=1;Object.defineProperty(kN,"__esModule",{value:!0});kN.isBrowser=kN.isNode=kN.isReactNative=void 0;function isReactNative(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}kN.isReactNative=isReactNative;function isNode2(){return"undefined"!=typeof process&&"undefined"!=typeof process.versions&&"undefined"!=typeof process.versions.node}kN.isNode=isNode2;function isBrowser2(){return!isReactNative()&&!isNode2()}kN.isBrowser=isBrowser2;return kN}var EN;function requireCjs(){if(EN)return bN;EN=1;!function(n){Object.defineProperty(n,"__esModule",{value:!0});const a=wN;a.__exportStar(requireCrypto(),n);a.__exportStar(requireEnv(),n)}(bN);return bN}requireCjs();var SN={exports:{}};var AN;function requireBrowserPonyfill(){if(AN)return SN.exports;AN=1;!function(n,a){var o="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||"undefined"!=typeof globalThis&&globalThis;var i=function(){function F2(){this.fetch=!1;this.DOMException=o.DOMException}F2.prototype=o;return new F2}();!function(n){!function(a){var o="undefined"!=typeof n&&n||"undefined"!=typeof self&&self||"undefined"!=typeof n&&n||{};var i={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{new Blob;return!0}catch(nL){return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function isDataView(n){return n&&DataView.prototype.isPrototypeOf(n)}if(i.arrayBuffer){var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"];var d=ArrayBuffer.isView||function(n){return n&&u.indexOf(Object.prototype.toString.call(n))>-1}}function normalizeName(n){"string"!=typeof n&&(n=String(n));if(/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(n)||""===n)throw new TypeError('Invalid character in header field name: "'+n+'"');return n.toLowerCase()}function normalizeValue(n){"string"!=typeof n&&(n=String(n));return n}function iteratorFor(n){var a={next:function(){var a=n.shift();return{done:void 0===a,value:a}}};i.iterable&&(a[Symbol.iterator]=function(){return a});return a}function Headers2(n){this.map={};n instanceof Headers2?n.forEach(function(n,a){this.append(a,n)},this):Array.isArray(n)?n.forEach(function(n){if(2!=n.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+n.length);this.append(n[0],n[1])},this):n&&Object.getOwnPropertyNames(n).forEach(function(a){this.append(a,n[a])},this)}Headers2.prototype.append=function(n,a){n=normalizeName(n);a=normalizeValue(a);var o=this.map[n];this.map[n]=o?o+", "+a:a};Headers2.prototype.delete=function(n){delete this.map[normalizeName(n)]};Headers2.prototype.get=function(n){n=normalizeName(n);return this.has(n)?this.map[n]:null};Headers2.prototype.has=function(n){return this.map.hasOwnProperty(normalizeName(n))};Headers2.prototype.set=function(n,a){this.map[normalizeName(n)]=normalizeValue(a)};Headers2.prototype.forEach=function(n,a){for(var o in this.map)this.map.hasOwnProperty(o)&&n.call(a,this.map[o],o,this)};Headers2.prototype.keys=function(){var n=[];this.forEach(function(a,o){n.push(o)});return iteratorFor(n)};Headers2.prototype.values=function(){var n=[];this.forEach(function(a){n.push(a)});return iteratorFor(n)};Headers2.prototype.entries=function(){var n=[];this.forEach(function(a,o){n.push([o,a])});return iteratorFor(n)};i.iterable&&(Headers2.prototype[Symbol.iterator]=Headers2.prototype.entries);function consumed(n){if(!n._noBody){if(n.bodyUsed)return Promise.reject(new TypeError("Already read"));n.bodyUsed=!0}}function fileReaderReady(n){return new Promise(function(a,o){n.onload=function(){a(n.result)};n.onerror=function(){o(n.error)}})}function readBlobAsArrayBuffer(n){var a=new FileReader;var o=fileReaderReady(a);a.readAsArrayBuffer(n);return o}function readBlobAsText(n){var a=new FileReader;var o=fileReaderReady(a);var i=/charset=([A-Za-z0-9_-]+)/.exec(n.type);var u=i?i[1]:"utf-8";a.readAsText(n,u);return o}function readArrayBufferAsText(n){var a=new Uint8Array(n);var o=new Array(a.length);for(var i=0;i<a.length;i++)o[i]=String.fromCharCode(a[i]);return o.join("")}function bufferClone(n){if(n.slice)return n.slice(0);var a=new Uint8Array(n.byteLength);a.set(new Uint8Array(n));return a.buffer}function Body(){this.bodyUsed=!1;this._initBody=function(n){this.bodyUsed=this.bodyUsed;this._bodyInit=n;if(n)if("string"==typeof n)this._bodyText=n;else if(i.blob&&Blob.prototype.isPrototypeOf(n))this._bodyBlob=n;else if(i.formData&&FormData.prototype.isPrototypeOf(n))this._bodyFormData=n;else if(i.searchParams&&URLSearchParams.prototype.isPrototypeOf(n))this._bodyText=n.toString();else if(i.arrayBuffer&&i.blob&&isDataView(n)){this._bodyArrayBuffer=bufferClone(n.buffer);this._bodyInit=new Blob([this._bodyArrayBuffer])}else i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(n)||d(n))?this._bodyArrayBuffer=bufferClone(n):this._bodyText=n=Object.prototype.toString.call(n);else{this._noBody=!0;this._bodyText=""}this.headers.get("content-type")||("string"==typeof n?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(n)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))};i.blob&&(this.blob=function(){var n=consumed(this);if(n)return n;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))});this.arrayBuffer=function(){if(this._bodyArrayBuffer){var n=consumed(this);return n||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(i.blob)return this.blob().then(readBlobAsArrayBuffer);throw new Error("could not read as ArrayBuffer")};this.text=function(){var n=consumed(this);if(n)return n;if(this._bodyBlob)return readBlobAsText(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)};i.formData&&(this.formData=function(){return this.text().then(decode)});this.json=function(){return this.text().then(JSON.parse)};return this}var m=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function normalizeMethod(n){var a=n.toUpperCase();return m.indexOf(a)>-1?a:n}function Request2(n,a){if(!(this instanceof Request2))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');a=a||{};var i=a.body;if(n instanceof Request2){if(n.bodyUsed)throw new TypeError("Already read");this.url=n.url;this.credentials=n.credentials;a.headers||(this.headers=new Headers2(n.headers));this.method=n.method;this.mode=n.mode;this.signal=n.signal;if(!i&&null!=n._bodyInit){i=n._bodyInit;n.bodyUsed=!0}}else this.url=String(n);this.credentials=a.credentials||this.credentials||"same-origin";!a.headers&&this.headers||(this.headers=new Headers2(a.headers));this.method=normalizeMethod(a.method||this.method||"GET");this.mode=a.mode||this.mode||null;this.signal=a.signal||this.signal||function(){if("AbortController"in o){var n=new AbortController;return n.signal}}();this.referrer=null;if(("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i);if(!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==a.cache&&"no-cache"!==a.cache)){var u=/([?&])_=[^&]*/;if(u.test(this.url))this.url=this.url.replace(u,"$1_="+(new Date).getTime());else{var d=/\?/;this.url+=(d.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}Request2.prototype.clone=function(){return new Request2(this,{body:this._bodyInit})};function decode(n){var a=new FormData;n.trim().split("&").forEach(function(n){if(n){var o=n.split("=");var i=o.shift().replace(/\+/g," ");var u=o.join("=").replace(/\+/g," ");a.append(decodeURIComponent(i),decodeURIComponent(u))}});return a}function parseHeaders(n){var a=new Headers2;var o=n.replace(/\r?\n[\t ]+/g," ");o.split("\r").map(function(n){return 0===n.indexOf("\n")?n.substr(1,n.length):n}).forEach(function(n){var o=n.split(":");var i=o.shift().trim();if(i){var u=o.join(":").trim();try{a.append(i,u)}catch(d){console.warn("Response "+d.message)}}});return a}Body.call(Request2.prototype);function Response2(n,a){if(!(this instanceof Response2))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');a||(a={});this.type="default";this.status=void 0===a.status?200:a.status;if(this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300;this.statusText=void 0===a.statusText?"":""+a.statusText;this.headers=new Headers2(a.headers);this.url=a.url||"";this._initBody(n)}Body.call(Response2.prototype);Response2.prototype.clone=function(){return new Response2(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers2(this.headers),url:this.url})};Response2.error=function(){var n=new Response2(null,{status:200,statusText:""});n.ok=!1;n.status=0;n.type="error";return n};var g=[301,302,303,307,308];Response2.redirect=function(n,a){if(-1===g.indexOf(a))throw new RangeError("Invalid status code");return new Response2(null,{status:a,headers:{location:n}})};a.DOMException=o.DOMException;try{new a.DOMException}catch(y){a.DOMException=function(n,a){this.message=n;this.name=a;var o=Error(n);this.stack=o.stack};a.DOMException.prototype=Object.create(Error.prototype);a.DOMException.prototype.constructor=a.DOMException}function fetch2(n,u){return new Promise(function(d,m){var g=new Request2(n,u);if(g.signal&&g.signal.aborted)return m(new a.DOMException("Aborted","AbortError"));var y=new XMLHttpRequest;function abortXhr(){y.abort()}y.onload=function(){var n={statusText:y.statusText,headers:parseHeaders(y.getAllResponseHeaders()||"")};0===g.url.indexOf("file://")&&(y.status<200||y.status>599)?n.status=200:n.status=y.status;n.url="responseURL"in y?y.responseURL:n.headers.get("X-Request-URL");var a="response"in y?y.response:y.responseText;setTimeout(function(){d(new Response2(a,n))},0)};y.onerror=function(){setTimeout(function(){m(new TypeError("Network request failed"))},0)};y.ontimeout=function(){setTimeout(function(){m(new TypeError("Network request timed out"))},0)};y.onabort=function(){setTimeout(function(){m(new a.DOMException("Aborted","AbortError"))},0)};function fixUrl(n){try{return""===n&&o.location.href?o.location.href:n}catch(nL){return n}}y.open(g.method,fixUrl(g.url),!0);"include"===g.credentials?y.withCredentials=!0:"omit"===g.credentials&&(y.withCredentials=!1);"responseType"in y&&(i.blob?y.responseType="blob":i.arrayBuffer&&(y.responseType="arraybuffer"));if(u&&"object"==typeof u.headers&&!(u.headers instanceof Headers2||o.Headers&&u.headers instanceof o.Headers)){var v=[];Object.getOwnPropertyNames(u.headers).forEach(function(n){v.push(normalizeName(n));y.setRequestHeader(n,normalizeValue(u.headers[n]))});g.headers.forEach(function(n,a){-1===v.indexOf(a)&&y.setRequestHeader(a,n)})}else g.headers.forEach(function(n,a){y.setRequestHeader(a,n)});if(g.signal){g.signal.addEventListener("abort",abortXhr);y.onreadystatechange=function(){4===y.readyState&&g.signal.removeEventListener("abort",abortXhr)}}y.send("undefined"==typeof g._bodyInit?null:g._bodyInit)})}fetch2.polyfill=!0;if(!o.fetch){o.fetch=fetch2;o.Headers=Headers2;o.Request=Request2;o.Response=Response2}a.Headers=Headers2;a.Request=Request2;a.Response=Response2;a.fetch=fetch2;Object.defineProperty(a,"__esModule",{value:!0});return a}({})}(i);i.fetch.ponyfill=!0;delete i.fetch.polyfill;var u=o.fetch?o:i;a=u.fetch;a.default=u.fetch;a.fetch=u.fetch;a.Headers=u.Headers;a.Request=u.Request;a.Response=u.Response;n.exports=a}(SN,SN.exports);return SN.exports}requireBrowserPonyfill();let _N=null;const TN={getSIWX:()=>dw.state.siwx,async initializeIfEnabled(n=jx.getActiveCaipAddress()){const a=dw.state.siwx;if(!a||!n)return;const[o,i,u]=n.split(":");if(jx.checkIfSupportedNetwork(o,`${o}:${i}`))try{if(dw.state.remoteFeatures?.emailCapture){const n=jx.getAccountData(o)?.user;await Wx.open({view:"DataCapture",data:{email:n?.email??void 0}});return}_N&&await _N;const n=await a.getSessions(`${o}:${i}`,u);if(n.length)return;await Wx.open({view:"SIWXSignMessage"})}catch(d){console.error("SIWXUtil:initializeIfEnabled",d);$w.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()});await(vx._getClient()?.disconnect().catch(console.error));Jw.reset("Connect");hx.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const n=dw.state.siwx;const a=iw.getPlainAddress(jx.getActiveCaipAddress());const o=getActiveCaipNetwork();const i=vx._getClient();if(!n)throw new Error("SIWX is not enabled");if(!a)throw new Error("No ActiveCaipAddress found");if(!o)throw new Error("No ActiveCaipNetwork or client found");if(!i)throw new Error("No ConnectionController client found");try{const u=await n.createMessage({chainId:o.caipNetworkId,accountAddress:a});const d=u.toString();const m=ax.getConnectorId(o.chainNamespace);m===Pv.CONNECTOR_ID.AUTH&&Jw.pushTransactionStack({});const g=await i.signMessage(d);await n.addSession({data:u,message:d,signature:g});jx.setLastConnectedSIWECaipNetwork(o);Wx.close();$w.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(u){const n=this.getSIWXEventProperties();Wx.state.open&&"ApproveTransaction"!==Jw.state.view||await Wx.open({view:"SIWXSignMessage"});hx.showError("Error signing message");$w.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:n});console.error("SWIXUtil:requestSignMessage",u)}},async cancelSignMessage(){try{const n=this.getSIWX();const a=n?.getRequired?.();if(a){const a=jx.getLastConnectedSIWECaipNetwork();if(a){const o=await(n?.getSessions(a?.caipNetworkId,iw.getPlainAddress(jx.getActiveCaipAddress())||""));o&&o.length>0?await jx.switchActiveNetwork(a):await vx.disconnect()}else await vx.disconnect()}else Wx.close();Wx.close();$w.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(n){console.error("SIWXUtil:cancelSignMessage",n)}},async getAllSessions(){const n=this.getSIWX();const a=jx.getAllRequestedCaipNetworks();const o=[];await Promise.all(a.map(async a=>{const i=await(n?.getSessions(a.caipNetworkId,iw.getPlainAddress(jx.getActiveCaipAddress())||""));i&&o.push(...i)}));return o},async getSessions(n){const a=dw.state.siwx;let o=n?.address;if(!o){const n=jx.getActiveCaipAddress();o=iw.getPlainAddress(n)}let i=n?.caipNetworkId;if(!i){const n=jx.getActiveCaipNetwork();i=n?.caipNetworkId}return a&&o&&i?a.getSessions(i,o):[]},async isSIWXCloseDisabled(){const n=this.getSIWX();if(n){const a="ApproveTransaction"===Jw.state.view;const o="SIWXSignMessage"===Jw.state.view;if(a||o)return n.getRequired?.()&&0===(await this.getSessions()).length}return!1},async authConnectorAuthenticate({authConnector:n,chainId:a,socialUri:o,preferredAccountType:i,chainNamespace:u}){const d=TN.getSIWX();if(!d||!u.includes(Pv.CHAIN.EVM)||dw.state.remoteFeatures?.emailCapture){const u=await n.connect({chainId:a,socialUri:o,preferredAccountType:i});return{address:u.address,chainId:u.chainId,accounts:u.accounts}}const m=`${u}:${a}`;const g=await d.createMessage({chainId:m,accountAddress:"<<AccountAddress>>"});const y={accountAddress:g.accountAddress,chainId:g.chainId,domain:g.domain,uri:g.uri,version:g.version,nonce:g.nonce,notBefore:g.notBefore,statement:g.statement,resources:g.resources,requestId:g.requestId,issuedAt:g.issuedAt,expirationTime:g.expirationTime,serializedMessage:g.toString()};const v=await n.connect({chainId:a,socialUri:o,siwxMessage:y,preferredAccountType:i});y.accountAddress=v.address;y.serializedMessage=v.message||"";if(v.signature&&v.message){const n=TN.addEmbeddedWalletSession(y,v.message,v.signature);await n}return{address:v.address,chainId:v.chainId,accounts:v.accounts}},async addEmbeddedWalletSession(n,a,o){if(_N)return _N;const i=TN.getSIWX();if(!i)return Promise.resolve();_N=i.addSession({data:n,message:a,signature:o}).finally(()=>{_N=null});return _N},async universalProviderAuthenticate({universalProvider:n,chains:a,methods:o}){const i=TN.getSIWX();const u=getActiveCaipNetwork();const d=new Set(a.map(n=>n.split(":")[0]));if(!i||1!==d.size||!d.has("eip155"))return!1;const m=await i.createMessage({chainId:getActiveCaipNetwork()?.caipNetworkId||"",accountAddress:""});const g=await n.authenticate({nonce:m.nonce,domain:m.domain,uri:m.uri,exp:m.expirationTime,iat:m.issuedAt,nbf:m.notBefore,requestId:m.requestId,version:m.version,resources:m.resources,statement:m.statement,chainId:m.chainId,methods:o,chains:[m.chainId,...a.filter(n=>n!==m.chainId)]});hx.showLoading("Authenticating...",{autoClose:!1});Lx.setConnectedWalletInfo({...g.session.peer.metadata,name:g.session.peer.metadata.name,icon:g.session.peer.metadata.icons?.[0],type:"WALLET_CONNECT"},Array.from(d)[0]);if(g?.auths?.length){const a=g.auths.map(a=>{const o=n.client.formatAuthMessage({request:a.p,iss:a.p.iss});return{data:{...a.p,accountAddress:a.p.iss.split(":").slice(-1).join(""),chainId:a.p.iss.split(":").slice(2,4).join(":"),uri:a.p.aud,version:a.p.version||m.version,expirationTime:a.p.exp,issuedAt:a.p.iat,notBefore:a.p.nbf},message:o,signature:a.s.s,cacao:a}});try{await i.setSessions(a);u&&jx.setLastConnectedSIWECaipNetwork(u);$w.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:TN.getSIWXEventProperties()})}catch(y){console.error("SIWX:universalProviderAuth - failed to set sessions",y);$w.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:TN.getSIWXEventProperties()});await n.disconnect().catch(console.error);throw y}finally{hx.hide()}}return!0},getSIWXEventProperties(){const n=jx.state.activeChain;if(!n)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:jx.state.activeCaipNetwork?.caipNetworkId||"",isSmartAccount:getPreferredAccountType(n)===Ew.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const n=this.getSIWX();n&&await n.setSessions([])}};const jN={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:Pv.CHAIN.EVM,CONNECTOR_TYPE_AUTH:"AUTH"};const IN={ConnectorExplorerIds:{[Pv.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[Pv.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[Pv.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[Pv.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[Pv.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[jN.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[jN.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[jN.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[jN.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[jN.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[jN.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[jN.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[jN.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[jN.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[jN.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[jN.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[Pv.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Pv.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Pv.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[Pv.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[Pv.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[Pv.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[Pv.CONNECTOR_ID.INJECTED]:"Browser Wallet",[Pv.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[Pv.CONNECTOR_ID.COINBASE]:"Coinbase",[Pv.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[Pv.CONNECTOR_ID.LEDGER]:"Ledger",[Pv.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[Pv.CONNECTOR_ID.INJECTED]:"INJECTED",[Pv.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[Pv.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[Pv.CONNECTOR_ID.AUTH]:"AUTH",[jN.CONNECTOR_TYPE_AUTH]:"AUTH"}};const PN={getCaipTokens(n){if(!n)return;const a={};Object.entries(n).forEach(([n,o])=>{a[`${jN.EIP155}:${n}`]=o});return a},isLowerCaseMatch:(n,a)=>n?.toLowerCase()===a?.toLowerCase(),getActiveNamespaceConnectedToAuth(){const n=jx.state.activeChain;return Pv.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(a=>ax.getConnectorId(a)===Pv.CONNECTOR_ID.AUTH&&a===n)},withRetry({conditionFn:n,intervalMs:a,maxRetries:o}){let i=0;return new Promise(u=>{async function tryCheck(){i+=1;const d=await n();if(d)return u(!0);if(i>=o)return u(!1);setTimeout(tryCheck,a);return null}tryCheck()})}};const ON=new AbortController;const RN={EmbeddedWalletAbortController:ON,ALERT_ERRORS:{IFRAME_LOAD_FAILED:{code:"APKT003",displayMessage:"Network Error: Wallet Load Failed",debugMessage:()=>"Failed to load the embedded wallet. This may be due to network issues or server downtime. Please check your network connection and try again shortly. Contact support if the issue persists."},IFRAME_REQUEST_TIMEOUT:{code:"APKT004",displayMessage:"Wallet Request Timeout",debugMessage:()=>"The request to the embedded wallet timed out. Please check your network connection and try again shortly. Contact support if the issue persists."},UNVERIFIED_DOMAIN:{code:"APKT005",displayMessage:"Unverified Domain",debugMessage:()=>"Embedded wallet load failed. Ensure your domain is verified in https://dashboard.reown.com."}}};const BN="rpc.walletconnect.org";function getBlockchainApiRpcUrl(n,a){const o=new URL("https://rpc.walletconnect.org/v1/");o.searchParams.set("chainId",n);o.searchParams.set("projectId",a);return o.toString()}const MN=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"];const zN={extendRpcUrlWithProjectId(n,a){let o=!1;try{const a=new URL(n);o=a.host===BN}catch(nL){o=!1}if(o){const o=new URL(n);o.searchParams.has("projectId")||o.searchParams.set("projectId",a);return o.toString()}return n},isCaipNetwork:n=>"chainNamespace"in n&&"caipNetworkId"in n,getChainNamespace(n){return this.isCaipNetwork(n)?n.chainNamespace:Pv.CHAIN.EVM},getCaipNetworkId(n){return this.isCaipNetwork(n)?n.caipNetworkId:`${Pv.CHAIN.EVM}:${n.id}`},getDefaultRpcUrl(n,a,o){const i=n.rpcUrls?.default?.http?.[0];return MN.includes(a)?getBlockchainApiRpcUrl(a,o):i||""},extendCaipNetwork(n,{customNetworkImageUrls:a,projectId:o,customRpcUrls:i}){const u=this.getChainNamespace(n);const d=this.getCaipNetworkId(n);const m=n.rpcUrls?.default?.http?.[0];const g=this.getDefaultRpcUrl(n,d,o);const y=n?.rpcUrls?.chainDefault?.http?.[0]||m;const v=i?.[d]?.map(n=>n.url)||[];const x=[...v,...g?[g]:[]];const N=[...v];y&&!N.includes(y)&&N.push(y);return{...n,chainNamespace:u,caipNetworkId:d,assets:{imageId:IN.NetworkImageIds[n.id],imageUrl:a?.[n.id]},rpcUrls:{...n.rpcUrls,default:{http:x},chainDefault:{http:N}}}},extendCaipNetworks:(n,{customNetworkImageUrls:a,projectId:o,customRpcUrls:i})=>n.map(n=>zN.extendCaipNetwork(n,{customNetworkImageUrls:a,customRpcUrls:i,projectId:o})),getViemTransport(n,a,o){const i=[];o?.forEach(n=>{i.push(http(n.url,n.config))});MN.includes(n.caipNetworkId)&&i.push(http(getBlockchainApiRpcUrl(n.caipNetworkId,a),{fetchOptions:{headers:{"Content-Type":"text/plain"}}}));n?.rpcUrls?.default?.http?.forEach(n=>{i.push(http(n))});return fallback(i)},extendWagmiTransports(n,a,o){if(MN.includes(n.caipNetworkId)){const i=this.getDefaultRpcUrl(n,n.caipNetworkId,a);return fallback([o,http(i)])}return o},getUnsupportedNetwork:n=>({id:n.split(":")[1],caipNetworkId:n,name:Pv.UNSUPPORTED_NETWORK_NAME,chainNamespace:n.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}),getCaipNetworkFromStorage(n){const a=ow.getActiveCaipNetworkId();const o=jx.getAllRequestedCaipNetworks();const i=Array.from(jx.state.chains?.keys()||[]);const u=a?.split(":")[0];const d=!!u&&i.includes(u);const m=o?.find(n=>n.caipNetworkId===a);const g=d&&!m&&a;return g?this.getUnsupportedNetwork(a):m||n||o?.[0]}};const FN={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u};const LN={set(n,a){$N.isClient&&localStorage.setItem(`${Cw.STORAGE_KEY}${n}`,a)},get:n=>$N.isClient?localStorage.getItem(`${Cw.STORAGE_KEY}${n}`):null,delete(n,a){$N.isClient&&(a?localStorage.removeItem(n):localStorage.removeItem(`${Cw.STORAGE_KEY}${n}`))}};const DN=3e4;const $N={checkIfAllowedToTriggerEmail(){const n=LN.get(Cw.LAST_EMAIL_LOGIN_TIME);if(n){const a=Date.now()-Number(n);if(a<DN){const n=Math.ceil((DN-a)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const n=LN.get(Cw.LAST_EMAIL_LOGIN_TIME);if(n){const a=Date.now()-Number(n);if(a<DN)return Math.ceil((DN-a)/1e3)}return 0},checkIfRequestExists:n=>Ew.NOT_SAFE_RPC_METHODS.includes(n.method)||Ew.SAFE_RPC_METHODS.includes(n.method),getResponseType(n){const a="string"==typeof n;const o=a&&(n?.match(FN.transactionHash)||n?.match(FN.signedMessage));return o?Cw.RPC_RESPONSE_TYPE_TX:Cw.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe:n=>Ew.SAFE_RPC_METHODS.includes(n.method),isClient:"undefined"!=typeof window};var UN;!function(n){n.assertEqual=n=>n;function assertIs(n){}n.assertIs=assertIs;function assertNever(n){throw new Error}n.assertNever=assertNever;n.arrayToEnum=n=>{const a={};for(const o of n)a[o]=o;return a};n.getValidEnumValues=a=>{const o=n.objectKeys(a).filter(n=>"number"!=typeof a[a[n]]);const i={};for(const n of o)i[n]=a[n];return n.objectValues(i)};n.objectValues=a=>n.objectKeys(a).map(function(n){return a[n]});n.objectKeys="function"==typeof Object.keys?n=>Object.keys(n):n=>{const a=[];for(const o in n)Object.prototype.hasOwnProperty.call(n,o)&&a.push(o);return a};n.find=(n,a)=>{for(const o of n)if(a(o))return o};n.isInteger="function"==typeof Number.isInteger?n=>Number.isInteger(n):n=>"number"==typeof n&&isFinite(n)&&Math.floor(n)===n;function joinValues(n,a=" | "){return n.map(n=>"string"==typeof n?`'${n}'`:n).join(a)}n.joinValues=joinValues;n.jsonStringifyReplacer=(n,a)=>"bigint"==typeof a?a.toString():a}(UN||(UN={}));var WN;!function(n){n.mergeShapes=(n,a)=>({...n,...a})}(WN||(WN={}));const HN=UN.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]);const getParsedType=n=>{const a=typeof n;switch(a){case"undefined":return HN.undefined;case"string":return HN.string;case"number":return isNaN(n)?HN.nan:HN.number;case"boolean":return HN.boolean;case"function":return HN.function;case"bigint":return HN.bigint;case"symbol":return HN.symbol;case"object":return Array.isArray(n)?HN.array:null===n?HN.null:n.then&&"function"==typeof n.then&&n.catch&&"function"==typeof n.catch?HN.promise:"undefined"!=typeof Map&&n instanceof Map?HN.map:"undefined"!=typeof Set&&n instanceof Set?HN.set:"undefined"!=typeof Date&&n instanceof Date?HN.date:HN.object;default:return HN.unknown}};const qN=UN.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);const quotelessJson=n=>{const a=JSON.stringify(n,null,2);return a.replace(/"([^"]+)":/g,"$1:")};class GN extends Error{constructor(n){super();this.issues=[];this.addIssue=n=>{this.issues=[...this.issues,n]};this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const a=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a;this.name="ZodError";this.issues=n}get errors(){return this.issues}format(n){const a=n||function(n){return n.message};const o={_errors:[]};const processError=n=>{for(const i of n.issues)if("invalid_union"===i.code)i.unionErrors.map(processError);else if("invalid_return_type"===i.code)processError(i.returnTypeError);else if("invalid_arguments"===i.code)processError(i.argumentsError);else if(0===i.path.length)o._errors.push(a(i));else{let n=o;let u=0;for(;u<i.path.length;){const o=i.path[u];const d=u===i.path.length-1;if(d){n[o]=n[o]||{_errors:[]};n[o]._errors.push(a(i))}else n[o]=n[o]||{_errors:[]};n=n[o];u++}}};processError(this);return o}toString(){return this.message}get message(){return JSON.stringify(this.issues,UN.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(n=n=>n.message){const a={};const o=[];for(const i of this.issues)if(i.path.length>0){a[i.path[0]]=a[i.path[0]]||[];a[i.path[0]].push(n(i))}else o.push(n(i));return{formErrors:o,fieldErrors:a}}get formErrors(){return this.flatten()}}GN.create=n=>{const a=new GN(n);return a};const errorMap=(n,a)=>{let o;switch(n.code){case qN.invalid_type:o=n.received===HN.undefined?"Required":`Expected ${n.expected}, received ${n.received}`;break;case qN.invalid_literal:o=`Invalid literal value, expected ${JSON.stringify(n.expected,UN.jsonStringifyReplacer)}`;break;case qN.unrecognized_keys:o=`Unrecognized key(s) in object: ${UN.joinValues(n.keys,", ")}`;break;case qN.invalid_union:o="Invalid input";break;case qN.invalid_union_discriminator:o=`Invalid discriminator value. Expected ${UN.joinValues(n.options)}`;break;case qN.invalid_enum_value:o=`Invalid enum value. Expected ${UN.joinValues(n.options)}, received '${n.received}'`;break;case qN.invalid_arguments:o="Invalid function arguments";break;case qN.invalid_return_type:o="Invalid function return type";break;case qN.invalid_date:o="Invalid date";break;case qN.invalid_string:if("object"==typeof n.validation)if("includes"in n.validation){o=`Invalid input: must include "${n.validation.includes}"`;"number"==typeof n.validation.position&&(o=`${o} at one or more positions greater than or equal to ${n.validation.position}`)}else"startsWith"in n.validation?o=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?o=`Invalid input: must end with "${n.validation.endsWith}"`:UN.assertNever(n.validation);else o="regex"!==n.validation?`Invalid ${n.validation}`:"Invalid";break;case qN.too_small:o="array"===n.type?`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:"string"===n.type?`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:"number"===n.type?`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:"date"===n.type?`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:"Invalid input";break;case qN.too_big:o="array"===n.type?`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:"string"===n.type?`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:"number"===n.type?`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:"bigint"===n.type?`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:"date"===n.type?`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:"Invalid input";break;case qN.custom:o="Invalid input";break;case qN.invalid_intersection_types:o="Intersection results could not be merged";break;case qN.not_multiple_of:o=`Number must be a multiple of ${n.multipleOf}`;break;case qN.not_finite:o="Number must be finite";break;default:o=a.defaultError;UN.assertNever(n)}return{message:o}};let VN=errorMap;function setErrorMap(n){VN=n}function getErrorMap(){return VN}const makeIssue=n=>{const{data:a,path:o,errorMaps:i,issueData:u}=n;const d=[...o,...u.path||[]];const m={...u,path:d};let g="";const y=i.filter(n=>!!n).slice().reverse();for(const v of y)g=v(m,{data:a,defaultError:g}).message;return{...u,path:d,message:u.message||g}};const KN=[];function addIssueToContext(n,a){const o=makeIssue({issueData:a,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,getErrorMap(),errorMap].filter(n=>!!n)});n.common.issues.push(o)}class ZN{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(n,a){const o=[];for(const i of a){if("aborted"===i.status)return YN;"dirty"===i.status&&n.dirty();o.push(i.value)}return{status:n.value,value:o}}static async mergeObjectAsync(n,a){const o=[];for(const i of a)o.push({key:await i.key,value:await i.value});return ZN.mergeObjectSync(n,o)}static mergeObjectSync(n,a){const o={};for(const i of a){const{key:a,value:u}=i;if("aborted"===a.status)return YN;if("aborted"===u.status)return YN;"dirty"===a.status&&n.dirty();"dirty"===u.status&&n.dirty();"__proto__"===a.value||"undefined"==typeof u.value&&!i.alwaysSet||(o[a.value]=u.value)}return{status:n.value,value:o}}}const YN=Object.freeze({status:"aborted"});const DIRTY=n=>({status:"dirty",value:n});const OK=n=>({status:"valid",value:n});const isAborted=n=>"aborted"===n.status;const isDirty=n=>"dirty"===n.status;const isValid$1=n=>"valid"===n.status;const isAsync=n=>"undefined"!=typeof Promise&&n instanceof Promise;var JN;!function(n){n.errToObj=n=>"string"==typeof n?{message:n}:n||{};n.toString=n=>"string"==typeof n?n:null==n?void 0:n.message}(JN||(JN={}));class QN{constructor(n,a,o,i){this._cachedPath=[];this.parent=n;this.data=a;this._path=o;this._key=i}get path(){this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key));return this._cachedPath}}const handleResult=(n,a)=>{if(isValid$1(a))return{success:!0,data:a.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const a=new GN(n.common.issues);this._error=a;return this._error}}};function processCreateParams(n){if(!n)return{};const{errorMap:a,invalid_type_error:o,required_error:i,description:u}=n;if(a&&(o||i))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(a)return{errorMap:a,description:u};const customMap=(n,a)=>"invalid_type"!==n.code?{message:a.defaultError}:"undefined"==typeof a.data?{message:null!=i?i:a.defaultError}:{message:null!=o?o:a.defaultError};return{errorMap:customMap,description:u}}class XN{constructor(n){this.spa=this.safeParseAsync;this._def=n;this.parse=this.parse.bind(this);this.safeParse=this.safeParse.bind(this);this.parseAsync=this.parseAsync.bind(this);this.safeParseAsync=this.safeParseAsync.bind(this);this.spa=this.spa.bind(this);this.refine=this.refine.bind(this);this.refinement=this.refinement.bind(this);this.superRefine=this.superRefine.bind(this);this.optional=this.optional.bind(this);this.nullable=this.nullable.bind(this);this.nullish=this.nullish.bind(this);this.array=this.array.bind(this);this.promise=this.promise.bind(this);this.or=this.or.bind(this);this.and=this.and.bind(this);this.transform=this.transform.bind(this);this.brand=this.brand.bind(this);this.default=this.default.bind(this);this.catch=this.catch.bind(this);this.describe=this.describe.bind(this);this.pipe=this.pipe.bind(this);this.readonly=this.readonly.bind(this);this.isNullable=this.isNullable.bind(this);this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(n){return getParsedType(n.data)}_getOrReturnCtx(n,a){return a||{common:n.parent.common,data:n.data,parsedType:getParsedType(n.data),schemaErrorMap:this._def.errorMap,path:n.path,parent:n.parent}}_processInputParams(n){return{status:new ZN,ctx:{common:n.parent.common,data:n.data,parsedType:getParsedType(n.data),schemaErrorMap:this._def.errorMap,path:n.path,parent:n.parent}}}_parseSync(n){const a=this._parse(n);if(isAsync(a))throw new Error("Synchronous parse encountered promise.");return a}_parseAsync(n){const a=this._parse(n);return Promise.resolve(a)}parse(n,a){const o=this.safeParse(n,a);if(o.success)return o.data;throw o.error}safeParse(n,a){var o;const i={common:{issues:[],async:null!==(o=null==a?void 0:a.async)&&void 0!==o&&o,contextualErrorMap:null==a?void 0:a.errorMap},path:(null==a?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:n,parsedType:getParsedType(n)};const u=this._parseSync({data:n,path:i.path,parent:i});return handleResult(i,u)}async parseAsync(n,a){const o=await this.safeParseAsync(n,a);if(o.success)return o.data;throw o.error}async safeParseAsync(n,a){const o={common:{issues:[],contextualErrorMap:null==a?void 0:a.errorMap,async:!0},path:(null==a?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:n,parsedType:getParsedType(n)};const i=this._parse({data:n,path:o.path,parent:o});const u=await(isAsync(i)?i:Promise.resolve(i));return handleResult(o,u)}refine(n,a){const getIssueProperties=n=>"string"==typeof a||"undefined"==typeof a?{message:a}:"function"==typeof a?a(n):a;return this._refinement((a,o)=>{const i=n(a);const setError=()=>o.addIssue({code:qN.custom,...getIssueProperties(a)});if("undefined"!=typeof Promise&&i instanceof Promise)return i.then(n=>{if(n)return!0;setError();return!1});if(i)return!0;setError();return!1})}refinement(n,a){return this._refinement((o,i)=>{if(n(o))return!0;i.addIssue("function"==typeof a?a(o,i):a);return!1})}_refinement(n){return new gC({schema:this,typeName:AC.ZodEffects,effect:{type:"refinement",refinement:n}})}superRefine(n){return this._refinement(n)}optional(){return yC.create(this,this._def)}nullable(){return bC.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return tC.create(this,this._def)}promise(){return mC.create(this,this._def)}or(n){return rC.create([this,n],this._def)}and(n){return aC.create(this,n,this._def)}transform(n){return new gC({...processCreateParams(this._def),schema:this,typeName:AC.ZodEffects,effect:{type:"transform",transform:n}})}default(n){const a="function"==typeof n?n:()=>n;return new vC({...processCreateParams(this._def),innerType:this,defaultValue:a,typeName:AC.ZodDefault})}brand(){return new kC({typeName:AC.ZodBranded,type:this,...processCreateParams(this._def)})}catch(n){const a="function"==typeof n?n:()=>n;return new wC({...processCreateParams(this._def),innerType:this,catchValue:a,typeName:AC.ZodCatch})}describe(n){const a=this.constructor;return new a({...this._def,description:n})}pipe(n){return CC.create(this,n)}readonly(){return EC.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const tk=/^c[^\s-]{8,}$/i;const nk=/^[a-z][a-z0-9]*$/;const rk=/^[0-9A-HJKMNP-TV-Z]{26}$/;const sk=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i;const ok=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;const lk="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let uk;const fk=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/;const pk=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;const datetimeRegex=n=>n.precision?n.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${n.precision}}Z$`):0===n.precision?n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function isValidIP(n,a){return!("v4"!==a&&a||!fk.test(n))||!("v6"!==a&&a||!pk.test(n))}class mk extends XN{_parse(n){this._def.coerce&&(n.data=String(n.data));const a=this._getType(n);if(a!==HN.string){const a=this._getOrReturnCtx(n);addIssueToContext(a,{code:qN.invalid_type,expected:HN.string,received:a.parsedType});return YN}const o=new ZN;let i;for(const d of this._def.checks)if("min"===d.kind){if(n.data.length<d.value){i=this._getOrReturnCtx(n,i);addIssueToContext(i,{code:qN.too_small,minimum:d.value,type:"string",inclusive:!0,exact:!1,message:d.message});o.dirty()}}else if("max"===d.kind){if(n.data.length>d.value){i=this._getOrReturnCtx(n,i);addIssueToContext(i,{code:qN.too_big,maximum:d.value,type:"string",inclusive:!0,exact:!1,message:d.message});o.dirty()}}else if("length"===d.kind){const a=n.data.length>d.value;const u=n.data.length<d.value;if(a||u){i=this._getOrReturnCtx(n,i);a?addIssueToContext(i,{code:qN.too_big,maximum:d.value,type:"string",inclusive:!0,exact:!0,message:d.message}):u&&addIssueToContext(i,{code:qN.too_small,minimum:d.value,type:"string",inclusive:!0,exact:!0,message:d.message});o.dirty()}}else if("email"===d.kind){if(!ok.test(n.data)){i=this._getOrReturnCtx(n,i);addIssueToContext(i,{validation:"email",code:qN.invalid_string,message:d.message});o.dirty()}}else if("emoji"===d.kind){uk||(uk=new RegExp(lk,"u"));if(!uk.test(n.data)){i=this._getOrReturnCtx(n,i);addIssueToContext(i,{validation:"emoji",code:qN.invalid_string,message:d.message});o.dirty()}}else if("uuid"===d.kind){if(!sk.test(n.data)){i=this._getOrReturnCtx(n,i);addIssueToContext(i,{validation:"uuid",code:qN.invalid_string,message:d.message});o.dirty()}}else if("cuid"===d.kind){if(!tk.test(n.data)){i=this._getOrReturnCtx(n,i);addIssueToContext(i,{validation:"cuid",code:qN.invalid_string,message:d.message});o.dirty()}}else if("cuid2"===d.kind){if(!nk.test(n.data)){i=this._getOrReturnCtx(n,i);addIssueToContext(i,{validation:"cuid2",code:qN.invalid_string,message:d.message});o.dirty()}}else if("ulid"===d.kind){if(!rk.test(n.data)){i=this._getOrReturnCtx(n,i);addIssueToContext(i,{validation:"ulid",code:qN.invalid_string,message:d.message});o.dirty()}}else if("url"===d.kind)try{new URL(n.data)}catch(u){i=this._getOrReturnCtx(n,i);addIssueToContext(i,{validation:"url",code:qN.invalid_string,message:d.message});o.dirty()}else if("regex"===d.kind){d.regex.lastIndex=0;const a=d.regex.test(n.data);if(!a){i=this._getOrReturnCtx(n,i);addIssueToContext(i,{validation:"regex",code:qN.invalid_string,message:d.message});o.dirty()}}else if("trim"===d.kind)n.data=n.data.trim();else if("includes"===d.kind){if(!n.data.includes(d.value,d.position)){i=this._getOrReturnCtx(n,i);addIssueToContext(i,{code:qN.invalid_string,validation:{includes:d.value,position:d.position},message:d.message});o.dirty()}}else if("toLowerCase"===d.kind)n.data=n.data.toLowerCase();else if("toUpperCase"===d.kind)n.data=n.data.toUpperCase();else if("startsWith"===d.kind){if(!n.data.startsWith(d.value)){i=this._getOrReturnCtx(n,i);addIssueToContext(i,{code:qN.invalid_string,validation:{startsWith:d.value},message:d.message});o.dirty()}}else if("endsWith"===d.kind){if(!n.data.endsWith(d.value)){i=this._getOrReturnCtx(n,i);addIssueToContext(i,{code:qN.invalid_string,validation:{endsWith:d.value},message:d.message});o.dirty()}}else if("datetime"===d.kind){const a=datetimeRegex(d);if(!a.test(n.data)){i=this._getOrReturnCtx(n,i);addIssueToContext(i,{code:qN.invalid_string,validation:"datetime",message:d.message});o.dirty()}}else if("ip"===d.kind){if(!isValidIP(n.data,d.version)){i=this._getOrReturnCtx(n,i);addIssueToContext(i,{validation:"ip",code:qN.invalid_string,message:d.message});o.dirty()}}else UN.assertNever(d);return{status:o.value,value:n.data}}_regex(n,a,o){return this.refinement(a=>n.test(a),{validation:a,code:qN.invalid_string,...JN.errToObj(o)})}_addCheck(n){return new mk({...this._def,checks:[...this._def.checks,n]})}email(n){return this._addCheck({kind:"email",...JN.errToObj(n)})}url(n){return this._addCheck({kind:"url",...JN.errToObj(n)})}emoji(n){return this._addCheck({kind:"emoji",...JN.errToObj(n)})}uuid(n){return this._addCheck({kind:"uuid",...JN.errToObj(n)})}cuid(n){return this._addCheck({kind:"cuid",...JN.errToObj(n)})}cuid2(n){return this._addCheck({kind:"cuid2",...JN.errToObj(n)})}ulid(n){return this._addCheck({kind:"ulid",...JN.errToObj(n)})}ip(n){return this._addCheck({kind:"ip",...JN.errToObj(n)})}datetime(n){var a;return"string"==typeof n?this._addCheck({kind:"datetime",precision:null,offset:!1,message:n}):this._addCheck({kind:"datetime",precision:"undefined"==typeof(null==n?void 0:n.precision)?null:null==n?void 0:n.precision,offset:null!==(a=null==n?void 0:n.offset)&&void 0!==a&&a,...JN.errToObj(null==n?void 0:n.message)})}regex(n,a){return this._addCheck({kind:"regex",regex:n,...JN.errToObj(a)})}includes(n,a){return this._addCheck({kind:"includes",value:n,position:null==a?void 0:a.position,...JN.errToObj(null==a?void 0:a.message)})}startsWith(n,a){return this._addCheck({kind:"startsWith",value:n,...JN.errToObj(a)})}endsWith(n,a){return this._addCheck({kind:"endsWith",value:n,...JN.errToObj(a)})}min(n,a){return this._addCheck({kind:"min",value:n,...JN.errToObj(a)})}max(n,a){return this._addCheck({kind:"max",value:n,...JN.errToObj(a)})}length(n,a){return this._addCheck({kind:"length",value:n,...JN.errToObj(a)})}nonempty(n){return this.min(1,JN.errToObj(n))}trim(){return new mk({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new mk({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new mk({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(n=>"datetime"===n.kind)}get isEmail(){return!!this._def.checks.find(n=>"email"===n.kind)}get isURL(){return!!this._def.checks.find(n=>"url"===n.kind)}get isEmoji(){return!!this._def.checks.find(n=>"emoji"===n.kind)}get isUUID(){return!!this._def.checks.find(n=>"uuid"===n.kind)}get isCUID(){return!!this._def.checks.find(n=>"cuid"===n.kind)}get isCUID2(){return!!this._def.checks.find(n=>"cuid2"===n.kind)}get isULID(){return!!this._def.checks.find(n=>"ulid"===n.kind)}get isIP(){return!!this._def.checks.find(n=>"ip"===n.kind)}get minLength(){let n=null;for(const a of this._def.checks)"min"===a.kind&&(null===n||a.value>n)&&(n=a.value);return n}get maxLength(){let n=null;for(const a of this._def.checks)"max"===a.kind&&(null===n||a.value<n)&&(n=a.value);return n}}mk.create=n=>{var a;return new mk({checks:[],typeName:AC.ZodString,coerce:null!==(a=null==n?void 0:n.coerce)&&void 0!==a&&a,...processCreateParams(n)})};function floatSafeRemainder(n,a){const o=(n.toString().split(".")[1]||"").length;const i=(a.toString().split(".")[1]||"").length;const u=o>i?o:i;const d=parseInt(n.toFixed(u).replace(".",""));const m=parseInt(a.toFixed(u).replace(".",""));return d%m/Math.pow(10,u)}class yk extends XN{constructor(){super(...arguments);this.min=this.gte;this.max=this.lte;this.step=this.multipleOf}_parse(n){this._def.coerce&&(n.data=Number(n.data));const a=this._getType(n);if(a!==HN.number){const a=this._getOrReturnCtx(n);addIssueToContext(a,{code:qN.invalid_type,expected:HN.number,received:a.parsedType});return YN}let o;const i=new ZN;for(const u of this._def.checks)if("int"===u.kind){if(!UN.isInteger(n.data)){o=this._getOrReturnCtx(n,o);addIssueToContext(o,{code:qN.invalid_type,expected:"integer",received:"float",message:u.message});i.dirty()}}else if("min"===u.kind){const a=u.inclusive?n.data<u.value:n.data<=u.value;if(a){o=this._getOrReturnCtx(n,o);addIssueToContext(o,{code:qN.too_small,minimum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message});i.dirty()}}else if("max"===u.kind){const a=u.inclusive?n.data>u.value:n.data>=u.value;if(a){o=this._getOrReturnCtx(n,o);addIssueToContext(o,{code:qN.too_big,maximum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message});i.dirty()}}else if("multipleOf"===u.kind){if(0!==floatSafeRemainder(n.data,u.value)){o=this._getOrReturnCtx(n,o);addIssueToContext(o,{code:qN.not_multiple_of,multipleOf:u.value,message:u.message});i.dirty()}}else if("finite"===u.kind){if(!Number.isFinite(n.data)){o=this._getOrReturnCtx(n,o);addIssueToContext(o,{code:qN.not_finite,message:u.message});i.dirty()}}else UN.assertNever(u);return{status:i.value,value:n.data}}gte(n,a){return this.setLimit("min",n,!0,JN.toString(a))}gt(n,a){return this.setLimit("min",n,!1,JN.toString(a))}lte(n,a){return this.setLimit("max",n,!0,JN.toString(a))}lt(n,a){return this.setLimit("max",n,!1,JN.toString(a))}setLimit(n,a,o,i){return new yk({...this._def,checks:[...this._def.checks,{kind:n,value:a,inclusive:o,message:JN.toString(i)}]})}_addCheck(n){return new yk({...this._def,checks:[...this._def.checks,n]})}int(n){return this._addCheck({kind:"int",message:JN.toString(n)})}positive(n){return this._addCheck({kind:"min",value:0,inclusive:!1,message:JN.toString(n)})}negative(n){return this._addCheck({kind:"max",value:0,inclusive:!1,message:JN.toString(n)})}nonpositive(n){return this._addCheck({kind:"max",value:0,inclusive:!0,message:JN.toString(n)})}nonnegative(n){return this._addCheck({kind:"min",value:0,inclusive:!0,message:JN.toString(n)})}multipleOf(n,a){return this._addCheck({kind:"multipleOf",value:n,message:JN.toString(a)})}finite(n){return this._addCheck({kind:"finite",message:JN.toString(n)})}safe(n){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:JN.toString(n)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:JN.toString(n)})}get minValue(){let n=null;for(const a of this._def.checks)"min"===a.kind&&(null===n||a.value>n)&&(n=a.value);return n}get maxValue(){let n=null;for(const a of this._def.checks)"max"===a.kind&&(null===n||a.value<n)&&(n=a.value);return n}get isInt(){return!!this._def.checks.find(n=>"int"===n.kind||"multipleOf"===n.kind&&UN.isInteger(n.value))}get isFinite(){let n=null,a=null;for(const o of this._def.checks){if("finite"===o.kind||"int"===o.kind||"multipleOf"===o.kind)return!0;"min"===o.kind?(null===a||o.value>a)&&(a=o.value):"max"===o.kind&&(null===n||o.value<n)&&(n=o.value)}return Number.isFinite(a)&&Number.isFinite(n)}}yk.create=n=>new yk({checks:[],typeName:AC.ZodNumber,coerce:(null==n?void 0:n.coerce)||!1,...processCreateParams(n)});class vk extends XN{constructor(){super(...arguments);this.min=this.gte;this.max=this.lte}_parse(n){this._def.coerce&&(n.data=BigInt(n.data));const a=this._getType(n);if(a!==HN.bigint){const a=this._getOrReturnCtx(n);addIssueToContext(a,{code:qN.invalid_type,expected:HN.bigint,received:a.parsedType});return YN}let o;const i=new ZN;for(const u of this._def.checks)if("min"===u.kind){const a=u.inclusive?n.data<u.value:n.data<=u.value;if(a){o=this._getOrReturnCtx(n,o);addIssueToContext(o,{code:qN.too_small,type:"bigint",minimum:u.value,inclusive:u.inclusive,message:u.message});i.dirty()}}else if("max"===u.kind){const a=u.inclusive?n.data>u.value:n.data>=u.value;if(a){o=this._getOrReturnCtx(n,o);addIssueToContext(o,{code:qN.too_big,type:"bigint",maximum:u.value,inclusive:u.inclusive,message:u.message});i.dirty()}}else if("multipleOf"===u.kind){if(n.data%u.value!==BigInt(0)){o=this._getOrReturnCtx(n,o);addIssueToContext(o,{code:qN.not_multiple_of,multipleOf:u.value,message:u.message});i.dirty()}}else UN.assertNever(u);return{status:i.value,value:n.data}}gte(n,a){return this.setLimit("min",n,!0,JN.toString(a))}gt(n,a){return this.setLimit("min",n,!1,JN.toString(a))}lte(n,a){return this.setLimit("max",n,!0,JN.toString(a))}lt(n,a){return this.setLimit("max",n,!1,JN.toString(a))}setLimit(n,a,o,i){return new vk({...this._def,checks:[...this._def.checks,{kind:n,value:a,inclusive:o,message:JN.toString(i)}]})}_addCheck(n){return new vk({...this._def,checks:[...this._def.checks,n]})}positive(n){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:JN.toString(n)})}negative(n){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:JN.toString(n)})}nonpositive(n){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:JN.toString(n)})}nonnegative(n){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:JN.toString(n)})}multipleOf(n,a){return this._addCheck({kind:"multipleOf",value:n,message:JN.toString(a)})}get minValue(){let n=null;for(const a of this._def.checks)"min"===a.kind&&(null===n||a.value>n)&&(n=a.value);return n}get maxValue(){let n=null;for(const a of this._def.checks)"max"===a.kind&&(null===n||a.value<n)&&(n=a.value);return n}}vk.create=n=>{var a;return new vk({checks:[],typeName:AC.ZodBigInt,coerce:null!==(a=null==n?void 0:n.coerce)&&void 0!==a&&a,...processCreateParams(n)})};class wk extends XN{_parse(n){this._def.coerce&&(n.data=Boolean(n.data));const a=this._getType(n);if(a!==HN.boolean){const a=this._getOrReturnCtx(n);addIssueToContext(a,{code:qN.invalid_type,expected:HN.boolean,received:a.parsedType});return YN}return OK(n.data)}}wk.create=n=>new wk({typeName:AC.ZodBoolean,coerce:(null==n?void 0:n.coerce)||!1,...processCreateParams(n)});class xk extends XN{_parse(n){this._def.coerce&&(n.data=new Date(n.data));const a=this._getType(n);if(a!==HN.date){const a=this._getOrReturnCtx(n);addIssueToContext(a,{code:qN.invalid_type,expected:HN.date,received:a.parsedType});return YN}if(isNaN(n.data.getTime())){const a=this._getOrReturnCtx(n);addIssueToContext(a,{code:qN.invalid_date});return YN}const o=new ZN;let i;for(const u of this._def.checks)if("min"===u.kind){if(n.data.getTime()<u.value){i=this._getOrReturnCtx(n,i);addIssueToContext(i,{code:qN.too_small,message:u.message,inclusive:!0,exact:!1,minimum:u.value,type:"date"});o.dirty()}}else if("max"===u.kind){if(n.data.getTime()>u.value){i=this._getOrReturnCtx(n,i);addIssueToContext(i,{code:qN.too_big,message:u.message,inclusive:!0,exact:!1,maximum:u.value,type:"date"});o.dirty()}}else UN.assertNever(u);return{status:o.value,value:new Date(n.data.getTime())}}_addCheck(n){return new xk({...this._def,checks:[...this._def.checks,n]})}min(n,a){return this._addCheck({kind:"min",value:n.getTime(),message:JN.toString(a)})}max(n,a){return this._addCheck({kind:"max",value:n.getTime(),message:JN.toString(a)})}get minDate(){let n=null;for(const a of this._def.checks)"min"===a.kind&&(null===n||a.value>n)&&(n=a.value);return null!=n?new Date(n):null}get maxDate(){let n=null;for(const a of this._def.checks)"max"===a.kind&&(null===n||a.value<n)&&(n=a.value);return null!=n?new Date(n):null}}xk.create=n=>new xk({checks:[],coerce:(null==n?void 0:n.coerce)||!1,typeName:AC.ZodDate,...processCreateParams(n)});class Ak extends XN{_parse(n){const a=this._getType(n);if(a!==HN.symbol){const a=this._getOrReturnCtx(n);addIssueToContext(a,{code:qN.invalid_type,expected:HN.symbol,received:a.parsedType});return YN}return OK(n.data)}}Ak.create=n=>new Ak({typeName:AC.ZodSymbol,...processCreateParams(n)});class _k extends XN{_parse(n){const a=this._getType(n);if(a!==HN.undefined){const a=this._getOrReturnCtx(n);addIssueToContext(a,{code:qN.invalid_type,expected:HN.undefined,received:a.parsedType});return YN}return OK(n.data)}}_k.create=n=>new _k({typeName:AC.ZodUndefined,...processCreateParams(n)});class Bk extends XN{_parse(n){const a=this._getType(n);if(a!==HN.null){const a=this._getOrReturnCtx(n);addIssueToContext(a,{code:qN.invalid_type,expected:HN.null,received:a.parsedType});return YN}return OK(n.data)}}Bk.create=n=>new Bk({typeName:AC.ZodNull,...processCreateParams(n)});class zk extends XN{constructor(){super(...arguments);this._any=!0}_parse(n){return OK(n.data)}}zk.create=n=>new zk({typeName:AC.ZodAny,...processCreateParams(n)});class qk extends XN{constructor(){super(...arguments);this._unknown=!0}_parse(n){return OK(n.data)}}qk.create=n=>new qk({typeName:AC.ZodUnknown,...processCreateParams(n)});class Vk extends XN{_parse(n){const a=this._getOrReturnCtx(n);addIssueToContext(a,{code:qN.invalid_type,expected:HN.never,received:a.parsedType});return YN}}Vk.create=n=>new Vk({typeName:AC.ZodNever,...processCreateParams(n)});class eC extends XN{_parse(n){const a=this._getType(n);if(a!==HN.undefined){const a=this._getOrReturnCtx(n);addIssueToContext(a,{code:qN.invalid_type,expected:HN.void,received:a.parsedType});return YN}return OK(n.data)}}eC.create=n=>new eC({typeName:AC.ZodVoid,...processCreateParams(n)});class tC extends XN{_parse(n){const{ctx:a,status:o}=this._processInputParams(n);const i=this._def;if(a.parsedType!==HN.array){addIssueToContext(a,{code:qN.invalid_type,expected:HN.array,received:a.parsedType});return YN}if(null!==i.exactLength){const n=a.data.length>i.exactLength.value;const u=a.data.length<i.exactLength.value;if(n||u){addIssueToContext(a,{code:n?qN.too_big:qN.too_small,minimum:u?i.exactLength.value:void 0,maximum:n?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message});o.dirty()}}if(null!==i.minLength&&a.data.length<i.minLength.value){addIssueToContext(a,{code:qN.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message});o.dirty()}if(null!==i.maxLength&&a.data.length>i.maxLength.value){addIssueToContext(a,{code:qN.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message});o.dirty()}if(a.common.async)return Promise.all([...a.data].map((n,o)=>i.type._parseAsync(new QN(a,n,a.path,o)))).then(n=>ZN.mergeArray(o,n));const u=[...a.data].map((n,o)=>i.type._parseSync(new QN(a,n,a.path,o)));return ZN.mergeArray(o,u)}get element(){return this._def.type}min(n,a){return new tC({...this._def,minLength:{value:n,message:JN.toString(a)}})}max(n,a){return new tC({...this._def,maxLength:{value:n,message:JN.toString(a)}})}length(n,a){return new tC({...this._def,exactLength:{value:n,message:JN.toString(a)}})}nonempty(n){return this.min(1,n)}}tC.create=(n,a)=>new tC({type:n,minLength:null,maxLength:null,exactLength:null,typeName:AC.ZodArray,...processCreateParams(a)});function deepPartialify(n){if(n instanceof nC){const a={};for(const o in n.shape){const i=n.shape[o];a[o]=yC.create(deepPartialify(i))}return new nC({...n._def,shape:()=>a})}return n instanceof tC?new tC({...n._def,type:deepPartialify(n.element)}):n instanceof yC?yC.create(deepPartialify(n.unwrap())):n instanceof bC?bC.create(deepPartialify(n.unwrap())):n instanceof oC?oC.create(n.items.map(n=>deepPartialify(n))):n}class nC extends XN{constructor(){super(...arguments);this._cached=null;this.nonstrict=this.passthrough;this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const n=this._def.shape();const a=UN.objectKeys(n);return this._cached={shape:n,keys:a}}_parse(n){const a=this._getType(n);if(a!==HN.object){const a=this._getOrReturnCtx(n);addIssueToContext(a,{code:qN.invalid_type,expected:HN.object,received:a.parsedType});return YN}const{status:o,ctx:i}=this._processInputParams(n);const{shape:u,keys:d}=this._getCached();const m=[];if(!(this._def.catchall instanceof Vk&&"strip"===this._def.unknownKeys))for(const y in i.data)d.includes(y)||m.push(y);const g=[];for(const y of d){const n=u[y];const a=i.data[y];g.push({key:{status:"valid",value:y},value:n._parse(new QN(i,a,i.path,y)),alwaysSet:y in i.data})}if(this._def.catchall instanceof Vk){const n=this._def.unknownKeys;if("passthrough"===n)for(const a of m)g.push({key:{status:"valid",value:a},value:{status:"valid",value:i.data[a]}});else if("strict"===n){if(m.length>0){addIssueToContext(i,{code:qN.unrecognized_keys,keys:m});o.dirty()}}else if("strip"!==n)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const n=this._def.catchall;for(const a of m){const o=i.data[a];g.push({key:{status:"valid",value:a},value:n._parse(new QN(i,o,i.path,a)),alwaysSet:a in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const n=[];for(const a of g){const o=await a.key;n.push({key:o,value:await a.value,alwaysSet:a.alwaysSet})}return n}).then(n=>ZN.mergeObjectSync(o,n)):ZN.mergeObjectSync(o,g)}get shape(){return this._def.shape()}strict(n){JN.errToObj;return new nC({...this._def,unknownKeys:"strict",...void 0!==n?{errorMap:(a,o)=>{var i,u,d,m;const g=null!==(d=null===(u=(i=this._def).errorMap)||void 0===u?void 0:u.call(i,a,o).message)&&void 0!==d?d:o.defaultError;return"unrecognized_keys"===a.code?{message:null!==(m=JN.errToObj(n).message)&&void 0!==m?m:g}:{message:g}}}:{}})}strip(){return new nC({...this._def,unknownKeys:"strip"})}passthrough(){return new nC({...this._def,unknownKeys:"passthrough"})}extend(n){return new nC({...this._def,shape:()=>({...this._def.shape(),...n})})}merge(n){const a=new nC({unknownKeys:n._def.unknownKeys,catchall:n._def.catchall,shape:()=>({...this._def.shape(),...n._def.shape()}),typeName:AC.ZodObject});return a}setKey(n,a){return this.augment({[n]:a})}catchall(n){return new nC({...this._def,catchall:n})}pick(n){const a={};UN.objectKeys(n).forEach(o=>{n[o]&&this.shape[o]&&(a[o]=this.shape[o])});return new nC({...this._def,shape:()=>a})}omit(n){const a={};UN.objectKeys(this.shape).forEach(o=>{n[o]||(a[o]=this.shape[o])});return new nC({...this._def,shape:()=>a})}deepPartial(){return deepPartialify(this)}partial(n){const a={};UN.objectKeys(this.shape).forEach(o=>{const i=this.shape[o];n&&!n[o]?a[o]=i:a[o]=i.optional()});return new nC({...this._def,shape:()=>a})}required(n){const a={};UN.objectKeys(this.shape).forEach(o=>{if(n&&!n[o])a[o]=this.shape[o];else{const n=this.shape[o];let i=n;for(;i instanceof yC;)i=i._def.innerType;a[o]=i}});return new nC({...this._def,shape:()=>a})}keyof(){return createZodEnum(UN.objectKeys(this.shape))}}nC.create=(n,a)=>new nC({shape:()=>n,unknownKeys:"strip",catchall:Vk.create(),typeName:AC.ZodObject,...processCreateParams(a)});nC.strictCreate=(n,a)=>new nC({shape:()=>n,unknownKeys:"strict",catchall:Vk.create(),typeName:AC.ZodObject,...processCreateParams(a)});nC.lazycreate=(n,a)=>new nC({shape:n,unknownKeys:"strip",catchall:Vk.create(),typeName:AC.ZodObject,...processCreateParams(a)});class rC extends XN{_parse(n){const{ctx:a}=this._processInputParams(n);const o=this._def.options;function handleResults(n){for(const a of n)if("valid"===a.result.status)return a.result;for(const i of n)if("dirty"===i.result.status){a.common.issues.push(...i.ctx.common.issues);return i.result}const o=n.map(n=>new GN(n.ctx.common.issues));addIssueToContext(a,{code:qN.invalid_union,unionErrors:o});return YN}if(a.common.async)return Promise.all(o.map(async n=>{const o={...a,common:{...a.common,issues:[]},parent:null};return{result:await n._parseAsync({data:a.data,path:a.path,parent:o}),ctx:o}})).then(handleResults);{let n;const i=[];for(const d of o){const o={...a,common:{...a.common,issues:[]},parent:null};const u=d._parseSync({data:a.data,path:a.path,parent:o});if("valid"===u.status)return u;"dirty"!==u.status||n||(n={result:u,ctx:o});o.common.issues.length&&i.push(o.common.issues)}if(n){a.common.issues.push(...n.ctx.common.issues);return n.result}const u=i.map(n=>new GN(n));addIssueToContext(a,{code:qN.invalid_union,unionErrors:u});return YN}}get options(){return this._def.options}}rC.create=(n,a)=>new rC({options:n,typeName:AC.ZodUnion,...processCreateParams(a)});const getDiscriminator=n=>n instanceof dC?getDiscriminator(n.schema):n instanceof gC?getDiscriminator(n.innerType()):n instanceof hC?[n.value]:n instanceof fC?n.options:n instanceof pC?Object.keys(n.enum):n instanceof vC?getDiscriminator(n._def.innerType):n instanceof _k?[void 0]:n instanceof Bk?[null]:null;class sC extends XN{_parse(n){const{ctx:a}=this._processInputParams(n);if(a.parsedType!==HN.object){addIssueToContext(a,{code:qN.invalid_type,expected:HN.object,received:a.parsedType});return YN}const o=this.discriminator;const i=a.data[o];const u=this.optionsMap.get(i);if(!u){addIssueToContext(a,{code:qN.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[o]});return YN}return a.common.async?u._parseAsync({data:a.data,path:a.path,parent:a}):u._parseSync({data:a.data,path:a.path,parent:a})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(n,a,o){const i=new Map;for(const u of a){const a=getDiscriminator(u.shape[n]);if(!a)throw new Error(`A discriminator value for key \`${n}\` could not be extracted from all schema options`);for(const o of a){if(i.has(o))throw new Error(`Discriminator property ${String(n)} has duplicate value ${String(o)}`);i.set(o,u)}}return new sC({typeName:AC.ZodDiscriminatedUnion,discriminator:n,options:a,optionsMap:i,...processCreateParams(o)})}}function mergeValues(n,a){const o=getParsedType(n);const i=getParsedType(a);if(n===a)return{valid:!0,data:n};if(o===HN.object&&i===HN.object){const o=UN.objectKeys(a);const i=UN.objectKeys(n).filter(n=>-1!==o.indexOf(n));const u={...n,...a};for(const d of i){const o=mergeValues(n[d],a[d]);if(!o.valid)return{valid:!1};u[d]=o.data}return{valid:!0,data:u}}if(o===HN.array&&i===HN.array){if(n.length!==a.length)return{valid:!1};const o=[];for(let i=0;i<n.length;i++){const u=n[i];const d=a[i];const m=mergeValues(u,d);if(!m.valid)return{valid:!1};o.push(m.data)}return{valid:!0,data:o}}return o===HN.date&&i===HN.date&&+n===+a?{valid:!0,data:n}:{valid:!1}}class aC extends XN{_parse(n){const{status:a,ctx:o}=this._processInputParams(n);const handleParsed=(n,i)=>{if(isAborted(n)||isAborted(i))return YN;const u=mergeValues(n.value,i.value);if(!u.valid){addIssueToContext(o,{code:qN.invalid_intersection_types});return YN}(isDirty(n)||isDirty(i))&&a.dirty();return{status:a.value,value:u.data}};return o.common.async?Promise.all([this._def.left._parseAsync({data:o.data,path:o.path,parent:o}),this._def.right._parseAsync({data:o.data,path:o.path,parent:o})]).then(([n,a])=>handleParsed(n,a)):handleParsed(this._def.left._parseSync({data:o.data,path:o.path,parent:o}),this._def.right._parseSync({data:o.data,path:o.path,parent:o}))}}aC.create=(n,a,o)=>new aC({left:n,right:a,typeName:AC.ZodIntersection,...processCreateParams(o)});class oC extends XN{_parse(n){const{status:a,ctx:o}=this._processInputParams(n);if(o.parsedType!==HN.array){addIssueToContext(o,{code:qN.invalid_type,expected:HN.array,received:o.parsedType});return YN}if(o.data.length<this._def.items.length){addIssueToContext(o,{code:qN.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"});return YN}const i=this._def.rest;if(!i&&o.data.length>this._def.items.length){addIssueToContext(o,{code:qN.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"});a.dirty()}const u=[...o.data].map((n,a)=>{const i=this._def.items[a]||this._def.rest;return i?i._parse(new QN(o,n,o.path,a)):null}).filter(n=>!!n);return o.common.async?Promise.all(u).then(n=>ZN.mergeArray(a,n)):ZN.mergeArray(a,u)}get items(){return this._def.items}rest(n){return new oC({...this._def,rest:n})}}oC.create=(n,a)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new oC({items:n,typeName:AC.ZodTuple,rest:null,...processCreateParams(a)})};class iC extends XN{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(n){const{status:a,ctx:o}=this._processInputParams(n);if(o.parsedType!==HN.object){addIssueToContext(o,{code:qN.invalid_type,expected:HN.object,received:o.parsedType});return YN}const i=[];const u=this._def.keyType;const d=this._def.valueType;for(const m in o.data)i.push({key:u._parse(new QN(o,m,o.path,m)),value:d._parse(new QN(o,o.data[m],o.path,m))});return o.common.async?ZN.mergeObjectAsync(a,i):ZN.mergeObjectSync(a,i)}get element(){return this._def.valueType}static create(n,a,o){return new iC(a instanceof XN?{keyType:n,valueType:a,typeName:AC.ZodRecord,...processCreateParams(o)}:{keyType:mk.create(),valueType:n,typeName:AC.ZodRecord,...processCreateParams(a)})}}class cC extends XN{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(n){const{status:a,ctx:o}=this._processInputParams(n);if(o.parsedType!==HN.map){addIssueToContext(o,{code:qN.invalid_type,expected:HN.map,received:o.parsedType});return YN}const i=this._def.keyType;const u=this._def.valueType;const d=[...o.data.entries()].map(([n,a],d)=>({key:i._parse(new QN(o,n,o.path,[d,"key"])),value:u._parse(new QN(o,a,o.path,[d,"value"]))}));if(o.common.async){const n=new Map;return Promise.resolve().then(async()=>{for(const o of d){const i=await o.key;const u=await o.value;if("aborted"===i.status||"aborted"===u.status)return YN;"dirty"!==i.status&&"dirty"!==u.status||a.dirty();n.set(i.value,u.value)}return{status:a.value,value:n}})}{const n=new Map;for(const o of d){const i=o.key;const u=o.value;if("aborted"===i.status||"aborted"===u.status)return YN;"dirty"!==i.status&&"dirty"!==u.status||a.dirty();n.set(i.value,u.value)}return{status:a.value,value:n}}}}cC.create=(n,a,o)=>new cC({valueType:a,keyType:n,typeName:AC.ZodMap,...processCreateParams(o)});class lC extends XN{_parse(n){const{status:a,ctx:o}=this._processInputParams(n);if(o.parsedType!==HN.set){addIssueToContext(o,{code:qN.invalid_type,expected:HN.set,received:o.parsedType});return YN}const i=this._def;if(null!==i.minSize&&o.data.size<i.minSize.value){addIssueToContext(o,{code:qN.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message});a.dirty()}if(null!==i.maxSize&&o.data.size>i.maxSize.value){addIssueToContext(o,{code:qN.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message});a.dirty()}const u=this._def.valueType;function finalizeSet(n){const o=new Set;for(const i of n){if("aborted"===i.status)return YN;"dirty"===i.status&&a.dirty();o.add(i.value)}return{status:a.value,value:o}}const d=[...o.data.values()].map((n,a)=>u._parse(new QN(o,n,o.path,a)));return o.common.async?Promise.all(d).then(n=>finalizeSet(n)):finalizeSet(d)}min(n,a){return new lC({...this._def,minSize:{value:n,message:JN.toString(a)}})}max(n,a){return new lC({...this._def,maxSize:{value:n,message:JN.toString(a)}})}size(n,a){return this.min(n,a).max(n,a)}nonempty(n){return this.min(1,n)}}lC.create=(n,a)=>new lC({valueType:n,minSize:null,maxSize:null,typeName:AC.ZodSet,...processCreateParams(a)});class uC extends XN{constructor(){super(...arguments);this.validate=this.implement}_parse(n){const{ctx:a}=this._processInputParams(n);if(a.parsedType!==HN.function){addIssueToContext(a,{code:qN.invalid_type,expected:HN.function,received:a.parsedType});return YN}function makeArgsIssue(n,o){return makeIssue({data:n,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,getErrorMap(),errorMap].filter(n=>!!n),issueData:{code:qN.invalid_arguments,argumentsError:o}})}function makeReturnsIssue(n,o){return makeIssue({data:n,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,getErrorMap(),errorMap].filter(n=>!!n),issueData:{code:qN.invalid_return_type,returnTypeError:o}})}const o={errorMap:a.common.contextualErrorMap};const i=a.data;if(this._def.returns instanceof mC){const n=this;return OK(async function(...a){const u=new GN([]);const d=await n._def.args.parseAsync(a,o).catch(n=>{u.addIssue(makeArgsIssue(a,n));throw u});const m=await Reflect.apply(i,this,d);const g=await n._def.returns._def.type.parseAsync(m,o).catch(n=>{u.addIssue(makeReturnsIssue(m,n));throw u});return g})}{const n=this;return OK(function(...a){const u=n._def.args.safeParse(a,o);if(!u.success)throw new GN([makeArgsIssue(a,u.error)]);const d=Reflect.apply(i,this,u.data);const m=n._def.returns.safeParse(d,o);if(!m.success)throw new GN([makeReturnsIssue(d,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...n){return new uC({...this._def,args:oC.create(n).rest(qk.create())})}returns(n){return new uC({...this._def,returns:n})}implement(n){const a=this.parse(n);return a}strictImplement(n){const a=this.parse(n);return a}static create(n,a,o){return new uC({args:n||oC.create([]).rest(qk.create()),returns:a||qk.create(),typeName:AC.ZodFunction,...processCreateParams(o)})}}class dC extends XN{get schema(){return this._def.getter()}_parse(n){const{ctx:a}=this._processInputParams(n);const o=this._def.getter();return o._parse({data:a.data,path:a.path,parent:a})}}dC.create=(n,a)=>new dC({getter:n,typeName:AC.ZodLazy,...processCreateParams(a)});class hC extends XN{_parse(n){if(n.data!==this._def.value){const a=this._getOrReturnCtx(n);addIssueToContext(a,{received:a.data,code:qN.invalid_literal,expected:this._def.value});return YN}return{status:"valid",value:n.data}}get value(){return this._def.value}}hC.create=(n,a)=>new hC({value:n,typeName:AC.ZodLiteral,...processCreateParams(a)});function createZodEnum(n,a){return new fC({values:n,typeName:AC.ZodEnum,...processCreateParams(a)})}class fC extends XN{_parse(n){if("string"!=typeof n.data){const a=this._getOrReturnCtx(n);const o=this._def.values;addIssueToContext(a,{expected:UN.joinValues(o),received:a.parsedType,code:qN.invalid_type});return YN}if(-1===this._def.values.indexOf(n.data)){const a=this._getOrReturnCtx(n);const o=this._def.values;addIssueToContext(a,{received:a.data,code:qN.invalid_enum_value,options:o});return YN}return OK(n.data)}get options(){return this._def.values}get enum(){const n={};for(const a of this._def.values)n[a]=a;return n}get Values(){const n={};for(const a of this._def.values)n[a]=a;return n}get Enum(){const n={};for(const a of this._def.values)n[a]=a;return n}extract(n){return fC.create(n)}exclude(n){return fC.create(this.options.filter(a=>!n.includes(a)))}}fC.create=createZodEnum;class pC extends XN{_parse(n){const a=UN.getValidEnumValues(this._def.values);const o=this._getOrReturnCtx(n);if(o.parsedType!==HN.string&&o.parsedType!==HN.number){const n=UN.objectValues(a);addIssueToContext(o,{expected:UN.joinValues(n),received:o.parsedType,code:qN.invalid_type});return YN}if(-1===a.indexOf(n.data)){const n=UN.objectValues(a);addIssueToContext(o,{received:o.data,code:qN.invalid_enum_value,options:n});return YN}return OK(n.data)}get enum(){return this._def.values}}pC.create=(n,a)=>new pC({values:n,typeName:AC.ZodNativeEnum,...processCreateParams(a)});class mC extends XN{unwrap(){return this._def.type}_parse(n){const{ctx:a}=this._processInputParams(n);if(a.parsedType!==HN.promise&&!1===a.common.async){addIssueToContext(a,{code:qN.invalid_type,expected:HN.promise,received:a.parsedType});return YN}const o=a.parsedType===HN.promise?a.data:Promise.resolve(a.data);return OK(o.then(n=>this._def.type.parseAsync(n,{path:a.path,errorMap:a.common.contextualErrorMap})))}}mC.create=(n,a)=>new mC({type:n,typeName:AC.ZodPromise,...processCreateParams(a)});class gC extends XN{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===AC.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(n){const{status:a,ctx:o}=this._processInputParams(n);const i=this._def.effect||null;const u={addIssue:n=>{addIssueToContext(o,n);n.fatal?a.abort():a.dirty()},get path(){return o.path}};u.addIssue=u.addIssue.bind(u);if("preprocess"===i.type){const n=i.transform(o.data,u);return o.common.issues.length?{status:"dirty",value:o.data}:o.common.async?Promise.resolve(n).then(n=>this._def.schema._parseAsync({data:n,path:o.path,parent:o})):this._def.schema._parseSync({data:n,path:o.path,parent:o})}if("refinement"===i.type){const executeRefinement=n=>{const a=i.refinement(n,u);if(o.common.async)return Promise.resolve(a);if(a instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return n};if(!1===o.common.async){const n=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});if("aborted"===n.status)return YN;"dirty"===n.status&&a.dirty();executeRefinement(n.value);return{status:a.value,value:n.value}}return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(n=>{if("aborted"===n.status)return YN;"dirty"===n.status&&a.dirty();return executeRefinement(n.value).then(()=>({status:a.value,value:n.value}))})}if("transform"===i.type){if(!1===o.common.async){const n=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});if(!isValid$1(n))return n;const d=i.transform(n.value,u);if(d instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:a.value,value:d}}return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(n=>isValid$1(n)?Promise.resolve(i.transform(n.value,u)).then(n=>({status:a.value,value:n})):n)}UN.assertNever(i)}}gC.create=(n,a,o)=>new gC({schema:n,typeName:AC.ZodEffects,effect:a,...processCreateParams(o)});gC.createWithPreprocess=(n,a,o)=>new gC({schema:a,effect:{type:"preprocess",transform:n},typeName:AC.ZodEffects,...processCreateParams(o)});class yC extends XN{_parse(n){const a=this._getType(n);return a===HN.undefined?OK(void 0):this._def.innerType._parse(n)}unwrap(){return this._def.innerType}}yC.create=(n,a)=>new yC({innerType:n,typeName:AC.ZodOptional,...processCreateParams(a)});class bC extends XN{_parse(n){const a=this._getType(n);return a===HN.null?OK(null):this._def.innerType._parse(n)}unwrap(){return this._def.innerType}}bC.create=(n,a)=>new bC({innerType:n,typeName:AC.ZodNullable,...processCreateParams(a)});class vC extends XN{_parse(n){const{ctx:a}=this._processInputParams(n);let o=a.data;a.parsedType===HN.undefined&&(o=this._def.defaultValue());return this._def.innerType._parse({data:o,path:a.path,parent:a})}removeDefault(){return this._def.innerType}}vC.create=(n,a)=>new vC({innerType:n,typeName:AC.ZodDefault,defaultValue:"function"==typeof a.default?a.default:()=>a.default,...processCreateParams(a)});class wC extends XN{_parse(n){const{ctx:a}=this._processInputParams(n);const o={...a,common:{...a.common,issues:[]}};const i=this._def.innerType._parse({data:o.data,path:o.path,parent:{...o}});return isAsync(i)?i.then(n=>({status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new GN(o.common.issues)},input:o.data})})):{status:"valid",value:"valid"===i.status?i.value:this._def.catchValue({get error(){return new GN(o.common.issues)},input:o.data})}}removeCatch(){return this._def.innerType}}wC.create=(n,a)=>new wC({innerType:n,typeName:AC.ZodCatch,catchValue:"function"==typeof a.catch?a.catch:()=>a.catch,...processCreateParams(a)});class xC extends XN{_parse(n){const a=this._getType(n);if(a!==HN.nan){const a=this._getOrReturnCtx(n);addIssueToContext(a,{code:qN.invalid_type,expected:HN.nan,received:a.parsedType});return YN}return{status:"valid",value:n.data}}}xC.create=n=>new xC({typeName:AC.ZodNaN,...processCreateParams(n)});const NC=Symbol("zod_brand");class kC extends XN{_parse(n){const{ctx:a}=this._processInputParams(n);const o=a.data;return this._def.type._parse({data:o,path:a.path,parent:a})}unwrap(){return this._def.type}}class CC extends XN{_parse(n){const{status:a,ctx:o}=this._processInputParams(n);if(o.common.async){const handleAsync=async()=>{const n=await this._def.in._parseAsync({data:o.data,path:o.path,parent:o});if("aborted"===n.status)return YN;if("dirty"===n.status){a.dirty();return DIRTY(n.value)}return this._def.out._parseAsync({data:n.value,path:o.path,parent:o})};return handleAsync()}{const n=this._def.in._parseSync({data:o.data,path:o.path,parent:o});if("aborted"===n.status)return YN;if("dirty"===n.status){a.dirty();return{status:"dirty",value:n.value}}return this._def.out._parseSync({data:n.value,path:o.path,parent:o})}}static create(n,a){return new CC({in:n,out:a,typeName:AC.ZodPipeline})}}class EC extends XN{_parse(n){const a=this._def.innerType._parse(n);isValid$1(a)&&(a.value=Object.freeze(a.value));return a}}EC.create=(n,a)=>new EC({innerType:n,typeName:AC.ZodReadonly,...processCreateParams(a)});const custom=(n,a={},o)=>n?zk.create().superRefine((i,u)=>{var d,m;if(!n(i)){const n="function"==typeof a?a(i):"string"==typeof a?{message:a}:a;const g=null===(m=null!==(d=n.fatal)&&void 0!==d?d:o)||void 0===m||m;const y="string"==typeof n?{message:n}:n;u.addIssue({code:"custom",...y,fatal:g})}}):zk.create();const SC={object:nC.lazycreate};var AC;!function(n){n.ZodString="ZodString";n.ZodNumber="ZodNumber";n.ZodNaN="ZodNaN";n.ZodBigInt="ZodBigInt";n.ZodBoolean="ZodBoolean";n.ZodDate="ZodDate";n.ZodSymbol="ZodSymbol";n.ZodUndefined="ZodUndefined";n.ZodNull="ZodNull";n.ZodAny="ZodAny";n.ZodUnknown="ZodUnknown";n.ZodNever="ZodNever";n.ZodVoid="ZodVoid";n.ZodArray="ZodArray";n.ZodObject="ZodObject";n.ZodUnion="ZodUnion";n.ZodDiscriminatedUnion="ZodDiscriminatedUnion";n.ZodIntersection="ZodIntersection";n.ZodTuple="ZodTuple";n.ZodRecord="ZodRecord";n.ZodMap="ZodMap";n.ZodSet="ZodSet";n.ZodFunction="ZodFunction";n.ZodLazy="ZodLazy";n.ZodLiteral="ZodLiteral";n.ZodEnum="ZodEnum";n.ZodEffects="ZodEffects";n.ZodNativeEnum="ZodNativeEnum";n.ZodOptional="ZodOptional";n.ZodNullable="ZodNullable";n.ZodDefault="ZodDefault";n.ZodCatch="ZodCatch";n.ZodPromise="ZodPromise";n.ZodBranded="ZodBranded";n.ZodPipeline="ZodPipeline";n.ZodReadonly="ZodReadonly"}(AC||(AC={}));const instanceOfType=(n,a={message:`Input not instance of ${n.name}`})=>custom(a=>a instanceof n,a);const _C=mk.create;const TC=yk.create;const jC=xC.create;const IC=vk.create;const PC=wk.create;const OC=xk.create;const RC=Ak.create;const BC=_k.create;const MC=Bk.create;const zC=zk.create;const FC=qk.create;const LC=Vk.create;const DC=eC.create;const $C=tC.create;const UC=nC.create;const WC=nC.strictCreate;const HC=rC.create;const qC=sC.create;const GC=aC.create;const VC=oC.create;const KC=iC.create;const ZC=cC.create;const YC=lC.create;const JC=uC.create;const QC=dC.create;const XC=hC.create;const eE=fC.create;const tE=pC.create;const nE=mC.create;const rE=gC.create;const sE=yC.create;const aE=bC.create;const oE=gC.createWithPreprocess;const iE=CC.create;const ostring=()=>_C().optional();const onumber=()=>TC().optional();const oboolean=()=>PC().optional();const cE={string:n=>mk.create({...n,coerce:!0}),number:n=>yk.create({...n,coerce:!0}),boolean:n=>wk.create({...n,coerce:!0}),bigint:n=>vk.create({...n,coerce:!0}),date:n=>xk.create({...n,coerce:!0})};const lE=YN;var uE=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap:setErrorMap,getErrorMap:getErrorMap,makeIssue:makeIssue,EMPTY_PATH:KN,addIssueToContext:addIssueToContext,ParseStatus:ZN,INVALID:YN,DIRTY:DIRTY,OK:OK,isAborted:isAborted,isDirty:isDirty,isValid:isValid$1,isAsync:isAsync,get util(){return UN},get objectUtil(){return WN},ZodParsedType:HN,getParsedType:getParsedType,ZodType:XN,ZodString:mk,ZodNumber:yk,ZodBigInt:vk,ZodBoolean:wk,ZodDate:xk,ZodSymbol:Ak,ZodUndefined:_k,ZodNull:Bk,ZodAny:zk,ZodUnknown:qk,ZodNever:Vk,ZodVoid:eC,ZodArray:tC,ZodObject:nC,ZodUnion:rC,ZodDiscriminatedUnion:sC,ZodIntersection:aC,ZodTuple:oC,ZodRecord:iC,ZodMap:cC,ZodSet:lC,ZodFunction:uC,ZodLazy:dC,ZodLiteral:hC,ZodEnum:fC,ZodNativeEnum:pC,ZodPromise:mC,ZodEffects:gC,ZodTransformer:gC,ZodOptional:yC,ZodNullable:bC,ZodDefault:vC,ZodCatch:wC,ZodNaN:xC,BRAND:NC,ZodBranded:kC,ZodPipeline:CC,ZodReadonly:EC,custom:custom,Schema:XN,ZodSchema:XN,late:SC,get ZodFirstPartyTypeKind(){return AC},coerce:cE,any:zC,array:$C,bigint:IC,boolean:PC,date:OC,discriminatedUnion:qC,effect:rE,enum:eE,function:JC,instanceof:instanceOfType,intersection:GC,lazy:QC,literal:XC,map:ZC,nan:jC,nativeEnum:tE,never:LC,null:MC,nullable:aE,number:TC,object:UC,oboolean:oboolean,onumber:onumber,optional:sE,ostring:ostring,pipeline:iE,preprocess:oE,promise:nE,record:KC,set:YC,strictObject:WC,string:_C,symbol:RC,transformer:rE,tuple:VC,undefined:BC,union:HC,unknown:FC,void:DC,NEVER:lE,ZodIssueCode:qN,quotelessJson:quotelessJson,ZodError:GN});const dE=uE.object({message:uE.string()});function zType(n){return uE.literal(Cw[n])}const hE=uE.object({serializedMessage:uE.string().optional(),accountAddress:uE.string(),chainId:uE.string(),notBefore:uE.string().optional(),domain:uE.string(),uri:uE.string(),version:uE.string(),nonce:uE.string(),statement:uE.string().optional(),resources:uE.array(uE.string()).optional(),requestId:uE.string().optional(),issuedAt:uE.string().optional(),expirationTime:uE.string().optional()});uE.object({accessList:uE.array(uE.string()),blockHash:uE.string().nullable(),blockNumber:uE.string().nullable(),chainId:uE.string().or(uE.number()),from:uE.string(),gas:uE.string(),hash:uE.string(),input:uE.string().nullable(),maxFeePerGas:uE.string(),maxPriorityFeePerGas:uE.string(),nonce:uE.string(),r:uE.string(),s:uE.string(),to:uE.string(),transactionIndex:uE.string().nullable(),type:uE.string(),v:uE.string(),value:uE.string()});const fE=uE.object({chainId:uE.string().or(uE.number()),rpcUrl:uE.optional(uE.string())});const pE=uE.object({email:uE.string().email()});const mE=uE.object({otp:uE.string()});const gE=uE.object({uri:uE.string(),preferredAccountType:uE.optional(uE.string()),chainId:uE.optional(uE.string().or(uE.number())),siwxMessage:uE.optional(hE),rpcUrl:uE.optional(uE.string())});const yE=uE.object({chainId:uE.optional(uE.string().or(uE.number())),preferredAccountType:uE.optional(uE.string()),socialUri:uE.optional(uE.string()),siwxMessage:uE.optional(hE),rpcUrl:uE.optional(uE.string())});const bE=uE.object({provider:uE.enum(["google","github","apple","facebook","x","discord"])});const vE=uE.object({email:uE.string().email()});const wE=uE.object({otp:uE.string()});const xE=uE.object({otp:uE.string()});const NE=uE.object({themeMode:uE.optional(uE.enum(["light","dark"])),themeVariables:uE.optional(uE.record(uE.string(),uE.string().or(uE.number()))),w3mThemeVariables:uE.optional(uE.record(uE.string(),uE.string()))});const kE=uE.object({metadata:uE.object({name:uE.string(),description:uE.string(),url:uE.string(),icons:uE.array(uE.string())}).optional(),sdkVersion:uE.string().optional(),sdkType:uE.string().optional(),projectId:uE.string()});const CE=uE.object({type:uE.string()});const SE=uE.object({action:uE.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])});const AE=uE.object({url:uE.string()});const _E=uE.object({userName:uE.string()});const TE=uE.object({email:uE.string().optional().nullable(),address:uE.string(),chainId:uE.string().or(uE.number()),accounts:uE.array(uE.object({address:uE.string(),type:uE.enum([Ew.ACCOUNT_TYPES.EOA,Ew.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:uE.string().optional().nullable(),preferredAccountType:uE.optional(uE.string()),signature:uE.string().optional(),message:uE.string().optional(),siwxMessage:uE.optional(hE)});const jE=uE.object({action:uE.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])});const IE=uE.object({email:uE.string().email().optional().nullable(),address:uE.string(),chainId:uE.string().or(uE.number()),smartAccountDeployed:uE.optional(uE.boolean()),accounts:uE.array(uE.object({address:uE.string(),type:uE.enum([Ew.ACCOUNT_TYPES.EOA,Ew.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:uE.optional(uE.string()),signature:uE.string().optional(),message:uE.string().optional(),siwxMessage:uE.optional(hE)});const PE=uE.object({uri:uE.string()});const OE=uE.object({isConnected:uE.boolean()});const RE=uE.object({chainId:uE.string().or(uE.number())});const BE=uE.object({chainId:uE.string().or(uE.number())});const ME=uE.object({newEmail:uE.string().email()});const zE=uE.object({smartAccountEnabledNetworks:uE.array(uE.number())});uE.object({address:uE.string(),isDeployed:uE.boolean()});const FE=uE.object({version:uE.string().optional()});const LE=uE.object({type:uE.string(),address:uE.string()});const DE=uE.any();const $E=uE.object({method:uE.literal("eth_accounts")});const UE=uE.object({method:uE.literal("eth_blockNumber")});const WE=uE.object({method:uE.literal("eth_call"),params:uE.array(uE.any())});const HE=uE.object({method:uE.literal("eth_chainId")});const qE=uE.object({method:uE.literal("eth_estimateGas"),params:uE.array(uE.any())});const GE=uE.object({method:uE.literal("eth_feeHistory"),params:uE.array(uE.any())});const VE=uE.object({method:uE.literal("eth_gasPrice")});const KE=uE.object({method:uE.literal("eth_getAccount"),params:uE.array(uE.any())});const ZE=uE.object({method:uE.literal("eth_getBalance"),params:uE.array(uE.any())});const YE=uE.object({method:uE.literal("eth_getBlockByHash"),params:uE.array(uE.any())});const JE=uE.object({method:uE.literal("eth_getBlockByNumber"),params:uE.array(uE.any())});const QE=uE.object({method:uE.literal("eth_getBlockReceipts"),params:uE.array(uE.any())});const XE=uE.object({method:uE.literal("eth_getBlockTransactionCountByHash"),params:uE.array(uE.any())});const eS=uE.object({method:uE.literal("eth_getBlockTransactionCountByNumber"),params:uE.array(uE.any())});const tS=uE.object({method:uE.literal("eth_getCode"),params:uE.array(uE.any())});const nS=uE.object({method:uE.literal("eth_getFilterChanges"),params:uE.array(uE.any())});const rS=uE.object({method:uE.literal("eth_getFilterLogs"),params:uE.array(uE.any())});const sS=uE.object({method:uE.literal("eth_getLogs"),params:uE.array(uE.any())});const aS=uE.object({method:uE.literal("eth_getProof"),params:uE.array(uE.any())});const oS=uE.object({method:uE.literal("eth_getStorageAt"),params:uE.array(uE.any())});const iS=uE.object({method:uE.literal("eth_getTransactionByBlockHashAndIndex"),params:uE.array(uE.any())});const cS=uE.object({method:uE.literal("eth_getTransactionByBlockNumberAndIndex"),params:uE.array(uE.any())});const lS=uE.object({method:uE.literal("eth_getTransactionByHash"),params:uE.array(uE.any())});const uS=uE.object({method:uE.literal("eth_getTransactionCount"),params:uE.array(uE.any())});const dS=uE.object({method:uE.literal("eth_getTransactionReceipt"),params:uE.array(uE.any())});const hS=uE.object({method:uE.literal("eth_getUncleCountByBlockHash"),params:uE.array(uE.any())});const fS=uE.object({method:uE.literal("eth_getUncleCountByBlockNumber"),params:uE.array(uE.any())});const pS=uE.object({method:uE.literal("eth_maxPriorityFeePerGas")});const mS=uE.object({method:uE.literal("eth_newBlockFilter")});const gS=uE.object({method:uE.literal("eth_newFilter"),params:uE.array(uE.any())});const yS=uE.object({method:uE.literal("eth_newPendingTransactionFilter")});const bS=uE.object({method:uE.literal("eth_sendRawTransaction"),params:uE.array(uE.any())});const vS=uE.object({method:uE.literal("eth_syncing"),params:uE.array(uE.any())});const wS=uE.object({method:uE.literal("eth_uninstallFilter"),params:uE.array(uE.any())});const xS=uE.object({method:uE.literal("personal_sign"),params:uE.array(uE.any())});const NS=uE.object({method:uE.literal("eth_signTypedData_v4"),params:uE.array(uE.any())});const kS=uE.object({method:uE.literal("eth_sendTransaction"),params:uE.array(uE.any())});const CS=uE.object({method:uE.literal("solana_signMessage"),params:uE.object({message:uE.string(),pubkey:uE.string()})});const ES=uE.object({method:uE.literal("solana_signTransaction"),params:uE.object({transaction:uE.string()})});const SS=uE.object({method:uE.literal("solana_signAllTransactions"),params:uE.object({transactions:uE.array(uE.string())})});const AS=uE.object({method:uE.literal("solana_signAndSendTransaction"),params:uE.object({transaction:uE.string(),options:uE.object({skipPreflight:uE.boolean().optional(),preflightCommitment:uE.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:uE.number().optional(),minContextSlot:uE.number().optional()}).optional()})});const _S=uE.object({method:uE.literal("wallet_sendCalls"),params:uE.array(uE.object({chainId:uE.string().or(uE.number()).optional(),from:uE.string().optional(),version:uE.string().optional(),capabilities:uE.any().optional(),calls:uE.array(uE.object({to:uE.string().startsWith("0x"),data:uE.string().startsWith("0x").optional(),value:uE.string().optional()}))}))});const TS=uE.object({method:uE.literal("wallet_getCallsStatus"),params:uE.array(uE.string())});const jS=uE.object({method:uE.literal("wallet_getCapabilities"),params:uE.array(uE.string().or(uE.number()).optional()).optional()});const IS=uE.object({method:uE.literal("wallet_grantPermissions"),params:uE.array(uE.any())});const PS=uE.object({method:uE.literal("wallet_revokePermissions"),params:uE.any()});const OS=uE.object({method:uE.literal("wallet_getAssets"),params:uE.any()});const RS=uE.object({token:uE.string()});const BS=uE.object({id:uE.string().optional()});const MS={appEvent:BS.extend({type:zType("APP_SWITCH_NETWORK"),payload:fE}).or(BS.extend({type:zType("APP_CONNECT_EMAIL"),payload:pE})).or(BS.extend({type:zType("APP_CONNECT_DEVICE")})).or(BS.extend({type:zType("APP_CONNECT_OTP"),payload:mE})).or(BS.extend({type:zType("APP_CONNECT_SOCIAL"),payload:gE})).or(BS.extend({type:zType("APP_GET_FARCASTER_URI")})).or(BS.extend({type:zType("APP_CONNECT_FARCASTER")})).or(BS.extend({type:zType("APP_GET_USER"),payload:uE.optional(yE)})).or(BS.extend({type:zType("APP_GET_SOCIAL_REDIRECT_URI"),payload:bE})).or(BS.extend({type:zType("APP_SIGN_OUT")})).or(BS.extend({type:zType("APP_IS_CONNECTED"),payload:uE.optional(RS)})).or(BS.extend({type:zType("APP_GET_CHAIN_ID")})).or(BS.extend({type:zType("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(BS.extend({type:zType("APP_INIT_SMART_ACCOUNT")})).or(BS.extend({type:zType("APP_SET_PREFERRED_ACCOUNT"),payload:CE})).or(BS.extend({type:zType("APP_RPC_REQUEST"),payload:xS.or(OS).or($E).or(UE).or(WE).or(HE).or(qE).or(GE).or(VE).or(KE).or(ZE).or(YE).or(JE).or(QE).or(XE).or(eS).or(tS).or(nS).or(rS).or(sS).or(aS).or(oS).or(iS).or(cS).or(lS).or(uS).or(dS).or(hS).or(fS).or(pS).or(mS).or(gS).or(yS).or(bS).or(vS).or(wS).or(xS).or(NS).or(kS).or(CS).or(ES).or(SS).or(AS).or(TS).or(_S).or(jS).or(IS).or(PS).and(uE.object({chainId:uE.string().or(uE.number()).optional(),chainNamespace:uE.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:uE.string().optional()}))})).or(BS.extend({type:zType("APP_UPDATE_EMAIL"),payload:vE})).or(BS.extend({type:zType("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:wE})).or(BS.extend({type:zType("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:xE})).or(BS.extend({type:zType("APP_SYNC_THEME"),payload:NE})).or(BS.extend({type:zType("APP_SYNC_DAPP_DATA"),payload:kE})).or(BS.extend({type:zType("APP_RELOAD")})).or(BS.extend({type:zType("APP_RPC_ABORT")})),frameEvent:BS.extend({type:zType("FRAME_SWITCH_NETWORK_ERROR"),payload:dE}).or(BS.extend({type:zType("FRAME_SWITCH_NETWORK_SUCCESS"),payload:BE})).or(BS.extend({type:zType("FRAME_CONNECT_EMAIL_SUCCESS"),payload:SE})).or(BS.extend({type:zType("FRAME_CONNECT_EMAIL_ERROR"),payload:dE})).or(BS.extend({type:zType("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:AE})).or(BS.extend({type:zType("FRAME_GET_FARCASTER_URI_ERROR"),payload:dE})).or(BS.extend({type:zType("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:_E})).or(BS.extend({type:zType("FRAME_CONNECT_FARCASTER_ERROR"),payload:dE})).or(BS.extend({type:zType("FRAME_CONNECT_OTP_ERROR"),payload:dE})).or(BS.extend({type:zType("FRAME_CONNECT_OTP_SUCCESS")})).or(BS.extend({type:zType("FRAME_CONNECT_DEVICE_ERROR"),payload:dE})).or(BS.extend({type:zType("FRAME_CONNECT_DEVICE_SUCCESS")})).or(BS.extend({type:zType("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:TE})).or(BS.extend({type:zType("FRAME_CONNECT_SOCIAL_ERROR"),payload:dE})).or(BS.extend({type:zType("FRAME_GET_USER_ERROR"),payload:dE})).or(BS.extend({type:zType("FRAME_GET_USER_SUCCESS"),payload:IE})).or(BS.extend({type:zType("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:dE})).or(BS.extend({type:zType("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:PE})).or(BS.extend({type:zType("FRAME_SIGN_OUT_ERROR"),payload:dE})).or(BS.extend({type:zType("FRAME_SIGN_OUT_SUCCESS")})).or(BS.extend({type:zType("FRAME_IS_CONNECTED_ERROR"),payload:dE})).or(BS.extend({type:zType("FRAME_IS_CONNECTED_SUCCESS"),payload:OE})).or(BS.extend({type:zType("FRAME_GET_CHAIN_ID_ERROR"),payload:dE})).or(BS.extend({type:zType("FRAME_GET_CHAIN_ID_SUCCESS"),payload:RE})).or(BS.extend({type:zType("FRAME_RPC_REQUEST_ERROR"),payload:dE})).or(BS.extend({type:zType("FRAME_RPC_REQUEST_SUCCESS"),payload:DE})).or(BS.extend({type:zType("FRAME_SESSION_UPDATE"),payload:RS})).or(BS.extend({type:zType("FRAME_UPDATE_EMAIL_ERROR"),payload:dE})).or(BS.extend({type:zType("FRAME_UPDATE_EMAIL_SUCCESS"),payload:jE})).or(BS.extend({type:zType("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:dE})).or(BS.extend({type:zType("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(BS.extend({type:zType("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:dE})).or(BS.extend({type:zType("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:ME})).or(BS.extend({type:zType("FRAME_SYNC_THEME_ERROR"),payload:dE})).or(BS.extend({type:zType("FRAME_SYNC_THEME_SUCCESS")})).or(BS.extend({type:zType("FRAME_SYNC_DAPP_DATA_ERROR"),payload:dE})).or(BS.extend({type:zType("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(BS.extend({type:zType("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:zE})).or(BS.extend({type:zType("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:dE})).or(BS.extend({type:zType("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:dE})).or(BS.extend({type:zType("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:LE})).or(BS.extend({type:zType("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:dE})).or(BS.extend({type:zType("FRAME_READY"),payload:FE})).or(BS.extend({type:zType("FRAME_RELOAD_ERROR"),payload:dE})).or(BS.extend({type:zType("FRAME_RELOAD_SUCCESS")}))};function shouldHandleEvent(n,a={}){return"string"==typeof a?.type&&a?.type?.includes(n)}function createSecureSiteSdkUrl({projectId:n,chainId:a,enableLogger:o,rpcUrl:i=Pv.BLOCKCHAIN_API_RPC_URL,enableCloudAuthAccount:u=!1}){const d=new URL(xw);d.searchParams.set("projectId",n);d.searchParams.set("chainId",String(a));d.searchParams.set("version",kw);d.searchParams.set("enableLogger",String(o));d.searchParams.set("rpcUrl",i);u&&d.searchParams.set("enableCloudAuthAccount","true");return d.toString()}class zS{constructor({projectId:n,isAppClient:a=!1,chainId:o="eip155:1",enableLogger:i=!0,enableCloudAuthAccount:u=!1,rpcUrl:d=Pv.BLOCKCHAIN_API_RPC_URL}){this.iframe=null;this.iframeIsReady=!1;this.initFrame=()=>{const n=document.getElementById("w3m-iframe");this.iframe&&!n&&document.body.appendChild(this.iframe)};this.events={registerFrameEventHandler:(n,a,o)=>{function eventHandler({data:o}){if(!shouldHandleEvent(Cw.FRAME_EVENT_KEY,o))return;const i=MS.frameEvent.safeParse(o);if(i.success){if(i.data?.id===n){a(i.data);window.removeEventListener("message",eventHandler)}}else console.warn("W3mFrame: invalid frame event",i.error.message)}if($N.isClient){window.addEventListener("message",eventHandler);o.addEventListener("abort",()=>{window.removeEventListener("message",eventHandler)})}},onFrameEvent:n=>{$N.isClient&&window.addEventListener("message",({data:a})=>{if(!shouldHandleEvent(Cw.FRAME_EVENT_KEY,a))return;const o=MS.frameEvent.safeParse(a);o.success?n(o.data):console.warn("W3mFrame: invalid frame event",o.error.message)})},onAppEvent:n=>{$N.isClient&&window.addEventListener("message",({data:a})=>{if(!shouldHandleEvent(Cw.APP_EVENT_KEY,a))return;const o=MS.appEvent.safeParse(a);o.success||console.warn("W3mFrame: invalid app event",o.error.message);n(a)})},postAppEvent:n=>{if($N.isClient){if(!this.iframe?.contentWindow)throw new Error("W3mFrame: iframe is not set");this.iframe.contentWindow.postMessage(n,"*")}},postFrameEvent:n=>{if($N.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");parent.postMessage(n,"*")}}};this.projectId=n;this.frameLoadPromise=new Promise((n,a)=>{this.frameLoadPromiseResolver={resolve:n,reject:a}});this.rpcUrl=d;if(a){this.frameLoadPromise=new Promise((n,a)=>{this.frameLoadPromiseResolver={resolve:n,reject:a}});if($N.isClient){const a=document.createElement("iframe");a.id="w3m-iframe";a.src=createSecureSiteSdkUrl({projectId:n,chainId:o,enableLogger:i,rpcUrl:this.rpcUrl,enableCloudAuthAccount:u});a.name="w3m-secure-iframe";a.style.position="fixed";a.style.zIndex="999999";a.style.display="none";a.style.border="none";a.style.animationDelay="0s, 50ms";a.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)";a.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)";this.iframe=a;this.iframe.onerror=()=>{this.frameLoadPromiseResolver?.reject("Unable to load email login dependency")};this.events.onFrameEvent(n=>{if("@w3m-frame/READY"===n.type){this.iframeIsReady=!0;this.frameLoadPromiseResolver?.resolve(void 0)}})}}}get networks(){const n=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...n)}}class FS{constructor(n){const a=k$1({level:Nw});const{logger:o,chunkLoggerController:i}=A$2({opts:a});this.logger=E$4(o,this.constructor.name);this.chunkLoggerController=i;if("undefined"!=typeof window&&this.chunkLoggerController?.downloadLogsBlobInBrowser){window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={});window.downloadAppKitLogsBlob.sdk=()=>{this.chunkLoggerController?.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:n})}}}}class LS{constructor({projectId:n,chainId:a,enableLogger:o=!0,onTimeout:i,abortController:u,getActiveCaipNetwork:d,getCaipNetworks:m,enableCloudAuthAccount:g}){this.openRpcRequests=[];this.isInitialized=!1;o&&(this.w3mLogger=new FS(n));this.abortController=u;this.getActiveCaipNetwork=d;this.getCaipNetworks=m;const y=this.getRpcUrl(a);this.w3mFrame=new zS({projectId:n,isAppClient:!0,chainId:a,enableLogger:o,rpcUrl:y,enableCloudAuthAccount:g});this.onTimeout=i;this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame();this.initPromise=new Promise(n=>{this.w3mFrame.events.onFrameEvent(a=>{a.type===Cw.FRAME_READY&&setTimeout(()=>{n()},500)})});await this.initPromise;this.isInitialized=!0;this.initPromise=void 0}async init(){this.isInitialized||(this.initPromise?await this.initPromise:await this.createFrame())}getLoginEmailUsed(){return Boolean(LN.get(Cw.EMAIL_LOGIN_USED_KEY))}getEmail(){return LN.get(Cw.EMAIL)}getUsername(){return LN.get(Cw.SOCIAL_USERNAME)}async reload(){try{await this.appEvent({type:Cw.APP_RELOAD})}catch(n){this.w3mLogger?.logger.error({error:n},"Error reloading iframe");throw n}}async connectEmail(n){try{$N.checkIfAllowedToTriggerEmail();await this.init();const a=await this.appEvent({type:Cw.APP_CONNECT_EMAIL,payload:n});this.setNewLastEmailLoginTime();return a}catch(a){this.w3mLogger?.logger.error({error:a},"Error connecting email");throw a}}async connectDevice(){try{return this.appEvent({type:Cw.APP_CONNECT_DEVICE})}catch(n){this.w3mLogger?.logger.error({error:n},"Error connecting device");throw n}}async connectOtp(n){try{return this.appEvent({type:Cw.APP_CONNECT_OTP,payload:n})}catch(a){this.w3mLogger?.logger.error({error:a},"Error connecting otp");throw a}}async isConnected(){try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Cw.APP_IS_CONNECTED});n?.isConnected||this.deleteAuthLoginCache();return n}catch(n){this.deleteAuthLoginCache();this.w3mLogger?.logger.error({error:n},"Error checking connection");throw n}}async getChainId(){try{const n=await this.appEvent({type:Cw.APP_GET_CHAIN_ID});this.setLastUsedChainId(n.chainId);return n}catch(n){this.w3mLogger?.logger.error({error:n},"Error getting chain id");throw n}}async getSocialRedirectUri(n){try{await this.init();return this.appEvent({type:Cw.APP_GET_SOCIAL_REDIRECT_URI,payload:n})}catch(a){this.w3mLogger?.logger.error({error:a},"Error getting social redirect uri");throw a}}async updateEmail(n){try{const a=await this.appEvent({type:Cw.APP_UPDATE_EMAIL,payload:n});this.setNewLastEmailLoginTime();return a}catch(a){this.w3mLogger?.logger.error({error:a},"Error updating email");throw a}}async updateEmailPrimaryOtp(n){try{return this.appEvent({type:Cw.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:n})}catch(a){this.w3mLogger?.logger.error({error:a},"Error updating email primary otp");throw a}}async updateEmailSecondaryOtp(n){try{const a=await this.appEvent({type:Cw.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:n});this.setLoginSuccess(a.newEmail);return a}catch(a){this.w3mLogger?.logger.error({error:a},"Error updating email secondary otp");throw a}}async syncTheme(n){try{return this.appEvent({type:Cw.APP_SYNC_THEME,payload:n})}catch(a){this.w3mLogger?.logger.error({error:a},"Error syncing theme");throw a}}async syncDappData(n){try{return this.appEvent({type:Cw.APP_SYNC_DAPP_DATA,payload:n})}catch(a){this.w3mLogger?.logger.error({error:a},"Error syncing dapp data");throw a}}async getSmartAccountEnabledNetworks(){try{const n=await this.appEvent({type:Cw.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks);return n}catch(n){this.persistSmartAccountEnabledNetworks([]);this.w3mLogger?.logger.error({error:n},"Error getting smart account enabled networks");throw n}}async setPreferredAccount(n){try{return this.appEvent({type:Cw.APP_SET_PREFERRED_ACCOUNT,payload:{type:n}})}catch(a){this.w3mLogger?.logger.error({error:a},"Error setting preferred account");throw a}}async connect(n){if(n?.socialUri)try{await this.init();const a=this.getRpcUrl(n.chainId);const o=await this.appEvent({type:Cw.APP_CONNECT_SOCIAL,payload:{uri:n.socialUri,preferredAccountType:n.preferredAccountType,chainId:n.chainId,siwxMessage:n.siwxMessage,rpcUrl:a}});o.userName&&this.setSocialLoginSuccess(o.userName);this.setLoginSuccess(o.email);this.setLastUsedChainId(o.chainId);this.user=o;return o}catch(a){this.w3mLogger?.logger.error({error:a},"Error connecting social");throw a}else try{const a=n?.chainId||this.getLastUsedChainId()||1;const o=await this.getUser({chainId:a,preferredAccountType:n?.preferredAccountType,siwxMessage:n?.siwxMessage,rpcUrl:this.getRpcUrl(a)});this.setLoginSuccess(o.email);this.setLastUsedChainId(o.chainId);this.user=o;return o}catch(a){this.w3mLogger?.logger.error({error:a},"Error connecting");throw a}}async getUser(n){try{await this.init();const a=n?.chainId||this.getLastUsedChainId()||1;const o=await this.appEvent({type:Cw.APP_GET_USER,payload:{...n,chainId:a,rpcUrl:this.getRpcUrl(a)}});this.user=o;return o}catch(a){this.w3mLogger?.logger.error({error:a},"Error connecting");throw a}}async connectSocial({uri:n,chainId:a,preferredAccountType:o}){try{await this.init();const i=this.getRpcUrl(a);const u=await this.appEvent({type:Cw.APP_CONNECT_SOCIAL,payload:{uri:n,chainId:a,rpcUrl:i,preferredAccountType:o}});u.userName&&this.setSocialLoginSuccess(u.userName);return u}catch(i){this.w3mLogger?.logger.error({error:i},"Error connecting social");throw i}}async getFarcasterUri(){try{await this.init();const n=await this.appEvent({type:Cw.APP_GET_FARCASTER_URI});return n}catch(n){this.w3mLogger?.logger.error({error:n},"Error getting farcaster uri");throw n}}async connectFarcaster(){try{const n=await this.appEvent({type:Cw.APP_CONNECT_FARCASTER});n.userName&&this.setSocialLoginSuccess(n.userName);return n}catch(n){this.w3mLogger?.logger.error({error:n},"Error connecting farcaster");throw n}}async switchNetwork({chainId:n}){try{const a=this.getRpcUrl(n);const o=await this.appEvent({type:Cw.APP_SWITCH_NETWORK,payload:{chainId:n,rpcUrl:a}});this.setLastUsedChainId(o.chainId);return o}catch(a){this.w3mLogger?.logger.error({error:a},"Error switching network");throw a}}async disconnect(){try{this.deleteAuthLoginCache();const n=await new Promise(async n=>{const a=setTimeout(()=>{n()},3e3);await this.appEvent({type:Cw.APP_SIGN_OUT});clearTimeout(a);n()});return n}catch(n){this.w3mLogger?.logger.error({error:n},"Error disconnecting");throw n}}async request(n){const a=n;try{if(Ew.GET_CHAIN_ID===n.method)return this.getLastUsedChainId();const o=n.chainNamespace||"eip155";const i=this.getActiveCaipNetwork(o)?.id;a.chainNamespace=o;a.chainId=i;a.rpcUrl=this.getRpcUrl(i);this.rpcRequestHandler?.(n);const u=await this.appEvent({type:Cw.APP_RPC_REQUEST,payload:a});this.rpcSuccessHandler?.(u,a);return u}catch(o){this.rpcErrorHandler?.(o,a);this.w3mLogger?.logger.error({error:o},"Error requesting");throw o}}onRpcRequest(n){this.rpcRequestHandler=n}onRpcSuccess(n){this.rpcSuccessHandler=n}onRpcError(n){this.rpcErrorHandler=n}onIsConnected(n){this.w3mFrame.events.onFrameEvent(a=>{a.type===Cw.FRAME_IS_CONNECTED_SUCCESS&&a.payload.isConnected&&n()})}onNotConnected(n){this.w3mFrame.events.onFrameEvent(a=>{a.type===Cw.FRAME_IS_CONNECTED_ERROR&&n();a.type!==Cw.FRAME_IS_CONNECTED_SUCCESS||a.payload.isConnected||n()})}onConnect(n){this.w3mFrame.events.onFrameEvent(a=>{a.type===Cw.FRAME_GET_USER_SUCCESS&&n(a.payload)})}onSocialConnected(n){this.w3mFrame.events.onFrameEvent(a=>{a.type===Cw.FRAME_CONNECT_SOCIAL_SUCCESS&&n(a.payload)})}async getCapabilities(){try{const n=await this.request({method:"wallet_getCapabilities"});return n||{}}catch{return{}}}onSetPreferredAccount(n){this.w3mFrame.events.onFrameEvent(a=>{a.type===Cw.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?n(a.payload):a.type===Cw.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&n({type:Ew.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:a})=>{Ew.SAFE_RPC_METHODS.includes(a)||n.abort();await this.appEvent({type:Cw.APP_RPC_ABORT})}));this.openRpcRequests=[]}catch(nL){this.w3mLogger?.logger.error({error:nL},"Error aborting RPC request")}}async appEvent(n){let a;let o;function replaceEventType(n){return n.replace("@w3m-app/","")}const i=[Cw.APP_SYNC_DAPP_DATA,Cw.APP_SYNC_THEME,Cw.APP_SET_PREFERRED_ACCOUNT];const u=replaceEventType(n.type);this.w3mFrame.iframeIsReady||i.includes(n.type)||(o=setTimeout(()=>{this.onTimeout?.("iframe_load_failed");this.abortController.abort()},2e4));await this.w3mFrame.frameLoadPromise;clearTimeout(o);const d=[Cw.APP_CONNECT_EMAIL,Cw.APP_CONNECT_DEVICE,Cw.APP_CONNECT_OTP,Cw.APP_CONNECT_SOCIAL,Cw.APP_GET_SOCIAL_REDIRECT_URI].map(replaceEventType).includes(u);d&&(a=setTimeout(()=>{this.onTimeout?.("iframe_request_timeout");this.abortController.abort()},12e4));return new Promise((i,d)=>{const m=Math.random().toString(36).substring(7);this.w3mLogger?.logger.info?.({event:n,id:m},"Sending app event");this.w3mFrame.events.postAppEvent({...n,id:m});const g=new AbortController;if("RPC_REQUEST"===u){const a=n;this.openRpcRequests=[...this.openRpcRequests,{...a.payload,abortController:g}]}g.signal.addEventListener("abort",()=>{"RPC_REQUEST"===u?d(new Error("Request was aborted")):"GET_FARCASTER_URI"!==u&&d(new Error("Something went wrong"))});function handler(n,g){if(n.id===m){g?.logger.info?.({framEvent:n,id:m},"Received frame response");if(n.type===`@w3m-frame/${u}_SUCCESS`){a&&clearTimeout(a);o&&clearTimeout(o);"payload"in n&&i(n.payload);i(void 0)}else if(n.type===`@w3m-frame/${u}_ERROR`){a&&clearTimeout(a);o&&clearTimeout(o);"payload"in n&&d(new Error(n.payload?.message||"An error occurred"));d(new Error("An error occurred"))}}}this.w3mFrame.events.registerFrameEventHandler(m,n=>handler(n,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){LN.set(Cw.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(n){LN.set(Cw.SOCIAL_USERNAME,n)}setLoginSuccess(n){n&&LN.set(Cw.EMAIL,n);LN.set(Cw.EMAIL_LOGIN_USED_KEY,"true");LN.delete(Cw.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){LN.delete(Cw.EMAIL_LOGIN_USED_KEY);LN.delete(Cw.EMAIL);LN.delete(Cw.LAST_USED_CHAIN_KEY);LN.delete(Cw.SOCIAL_USERNAME)}setLastUsedChainId(n){n&&LN.set(Cw.LAST_USED_CHAIN_KEY,String(n))}getLastUsedChainId(){const n=LN.get(Cw.LAST_USED_CHAIN_KEY)??void 0;const a=Number(n);return isNaN(a)?n:a}persistSmartAccountEnabledNetworks(n){LN.set(Cw.SMART_ACCOUNT_ENABLED_NETWORKS,n.join(","))}getRpcUrl(n){let a=void 0===n?void 0:"eip155";"string"==typeof n&&(a=n.includes(":")?nw.parseCaipNetworkId(n)?.chainNamespace:Number.isInteger(Number(n))?"eip155":"solana");const o=this.getCaipNetworks(a);const i=n?o.find(a=>String(a.id)===String(n)||a.caipNetworkId===n):o[0];return i?.rpcUrls.default.http?.[0]}}class DS{constructor(){}static getInstance({projectId:n,chainId:a,enableLogger:o,onTimeout:i,abortController:u,getActiveCaipNetwork:d,getCaipNetworks:m}){DS.instance||(DS.instance=new LS({projectId:n,chainId:a,enableLogger:o,onTimeout:i,abortController:u,getActiveCaipNetwork:d,getCaipNetworks:m,enableCloudAuthAccount:Boolean(dw.state.remoteFeatures?.emailCapture)}));return DS.instance}}const $S={DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]};const US={filterOutDuplicatesByRDNS(n){const a=dw.state.enableEIP6963?ax.state.connectors:[];const o=ow.getRecentWallets();const i=a.map(n=>n.info?.rdns).filter(Boolean);const u=o.map(n=>n.rdns).filter(Boolean);const d=i.concat(u);if(d.includes("io.metamask.mobile")&&iw.isMobile()){const n=d.indexOf("io.metamask.mobile");d[n]="io.metamask"}const m=n.filter(n=>{if(n?.rdns&&d.includes(String(n.rdns)))return!1;if(!n?.rdns){const o=a.some(a=>a.name===n.name);if(o)return!1}return!0});return m},filterOutDuplicatesByIds(n){const a=ax.state.connectors.filter(n=>"ANNOUNCED"===n.type||"INJECTED"===n.type);const o=ow.getRecentWallets();const i=a.map(n=>n.explorerId);const u=o.map(n=>n.id);const d=i.concat(u);const m=n.filter(n=>!d.includes(n?.id));return m},filterOutDuplicateWallets(n){const a=this.filterOutDuplicatesByRDNS(n);const o=this.filterOutDuplicatesByIds(a);return o},markWalletsAsInstalled(n){const{connectors:a}=ax.state;const{featuredWalletIds:o}=dw.state;const i=a.filter(n=>"ANNOUNCED"===n.type).reduce((n,a)=>{if(!a.info?.rdns)return n;n[a.info.rdns]=!0;return n},{});const u=n.map(n=>({...n,installed:Boolean(n.rdns)&&Boolean(i[n.rdns??""])}));const d=u.sort((n,a)=>{const i=Number(a.installed)-Number(n.installed);if(0!==i)return i;if(o?.length){const i=o.indexOf(n.id);const u=o.indexOf(a.id);if(-1!==i&&-1!==u)return i-u;if(-1!==i)return-1;if(-1!==u)return 1}return 0});return d},getConnectOrderMethod(n,a){const o=n?.connectMethodsOrder||dw.state.features?.connectMethodsOrder;const i=a||ax.state.connectors;if(o)return o;const{injected:u,announced:d}=WS.getConnectorsByType(i,Kw.state.recommended,Kw.state.featured);const m=u.filter(WS.showConnector);const g=d.filter(WS.showConnector);return m.length||g.length?["wallet","email","social"]:$S.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(n){const a=Boolean(n.rdns)&&Kw.state.excludedWallets.some(a=>a.rdns===n.rdns);const o=Boolean(n.name)&&Kw.state.excludedWallets.some(a=>PN.isLowerCaseMatch(a.name,n.name));return a||o},markWalletsWithDisplayIndex:n=>n.map((n,a)=>({...n,display_index:a}))};const WS={getConnectorsByType(n,a,o){const{customWallets:i}=dw.state;const u=ow.getRecentWallets();const d=US.filterOutDuplicateWallets(a);const m=US.filterOutDuplicateWallets(o);const g=n.filter(n=>"MULTI_CHAIN"===n.type);const y=n.filter(n=>"ANNOUNCED"===n.type);const v=n.filter(n=>"INJECTED"===n.type);const x=n.filter(n=>"EXTERNAL"===n.type);return{custom:i,recent:u,external:x,multiChain:g,announced:y,injected:v,recommended:d,featured:m}},showConnector(n){const a=n.info?.rdns;const o=Boolean(a)&&Kw.state.excludedWallets.some(n=>Boolean(n.rdns)&&n.rdns===a);const i=Boolean(n.name)&&Kw.state.excludedWallets.some(a=>PN.isLowerCaseMatch(a.name,n.name));if("INJECTED"===n.type){const u="Browser Wallet"===n.name;if(u){if(!iw.isMobile())return!1;if(iw.isMobile()&&!a&&!vx.checkInstalled())return!1}if(o||i)return!1}return"ANNOUNCED"!==n.type&&"EXTERNAL"!==n.type||!o&&!i},getIsConnectedWithWC(){const n=Array.from(jx.state.chains.values());const a=n.some(n=>{const a=ax.getConnectorId(n.namespace);return a===Pv.CONNECTOR_ID.WALLET_CONNECT});return a},getConnectorTypeOrder({recommended:n,featured:a,custom:o,recent:i,announced:u,injected:d,multiChain:m,external:g,overriddenConnectors:y=dw.state.features?.connectorTypeOrder??[]}){const v=dw.state.enableWalletConnect;const x=[{type:"walletConnect",isEnabled:v},{type:"recent",isEnabled:i.length>0},{type:"injected",isEnabled:[...d,...u,...m].length>0},{type:"featured",isEnabled:a.length>0},{type:"custom",isEnabled:o&&o.length>0},{type:"external",isEnabled:g.length>0},{type:"recommended",isEnabled:n.length>0}];const N=x.filter(n=>n.isEnabled);const k=new Set(N.map(n=>n.type));const E=y.filter(n=>k.has(n)).map(n=>({type:n,isEnabled:!0}));const S=N.filter(({type:n})=>{const a=E.some(({type:a})=>a===n);return!a});return Array.from(new Set([...E,...S].map(({type:n})=>n)))},getAuthName:({email:n,socialUsername:a,socialProvider:o})=>a?o&&"discord"===o&&a.endsWith("0")?a.slice(0,-1):a:n.length>30?`${n.slice(0,-3)}...`:n,async fetchProviderData(n){try{if("Browser Wallet"===n.name&&!iw.isMobile())return{accounts:[],chainId:void 0};if(n.id===Pv.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[a,o]=await Promise.all([n.provider?.request({method:"eth_accounts"}),n.provider?.request({method:"eth_chainId"}).then(n=>Number(n))]);return{accounts:a,chainId:o}}catch(a){console.warn(`Failed to fetch provider data for ${n.name}`,a);return{accounts:[],chainId:void 0}}}};
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const HS=globalThis,qS=HS.ShadowRoot&&(void 0===HS.ShadyCSS||HS.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,GS=Symbol(),VS=new WeakMap;let KS=class{constructor(n,a,o){if(this._$cssResult$=!0,o!==GS)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=n,this.t=a}get styleSheet(){let n=this.o;const a=this.t;if(qS&&void 0===n){const o=void 0!==a&&1===a.length;o&&(n=VS.get(a)),void 0===n&&((this.o=n=new CSSStyleSheet).replaceSync(this.cssText),o&&VS.set(a,n))}return n}toString(){return this.cssText}};const r$5=n=>new KS("string"==typeof n?n:n+"",void 0,GS),i$4=(n,...a)=>{const o=1===n.length?n[0]:a.reduce((a,o,i)=>a+(n=>{if(!0===n._$cssResult$)return n.cssText;if("number"==typeof n)return n;throw Error("Value passed to 'css' function must be a 'css' function result: "+n+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(o)+n[i+1],n[0]);return new KS(o,n,GS)},S$2=(n,a)=>{if(qS)n.adoptedStyleSheets=a.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const o of a){const a=document.createElement("style"),i=HS.litNonce;void 0!==i&&a.setAttribute("nonce",i),a.textContent=o.cssText,n.appendChild(a)}},ZS=qS?n=>n:n=>n instanceof CSSStyleSheet?(n=>{let a="";for(const o of n.cssRules)a+=o.cssText;return r$5(a)})(n):n;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:YS,defineProperty:JS,getOwnPropertyDescriptor:QS,getOwnPropertyNames:XS,getOwnPropertySymbols:eA,getPrototypeOf:tA}=Object,nA=globalThis,rA=nA.trustedTypes,sA=rA?rA.emptyScript:"",aA=nA.reactiveElementPolyfillSupport,d$2=(n,a)=>n,oA={toAttribute(n,a){switch(a){case Boolean:n=n?sA:null;break;case Object:case Array:n=null==n?n:JSON.stringify(n)}return n},fromAttribute(n,a){let o=n;switch(a){case Boolean:o=null!==n;break;case Number:o=null===n?null:Number(n);break;case Object:case Array:try{o=JSON.parse(n)}catch(i){o=null}}return o}},f$5=(n,a)=>!YS(n,a),iA={attribute:!0,type:String,converter:oA,reflect:!1,useDefault:!1,hasChanged:f$5};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),nA.litPropertyMetadata??(nA.litPropertyMetadata=new WeakMap);let cA=class extends HTMLElement{static addInitializer(n){this._$Ei(),(this.l??(this.l=[])).push(n)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(n,a=iA){if(a.state&&(a.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(n)&&((a=Object.create(a)).wrapped=!0),this.elementProperties.set(n,a),!a.noAccessor){const o=Symbol(),i=this.getPropertyDescriptor(n,o,a);void 0!==i&&JS(this.prototype,n,i)}}static getPropertyDescriptor(n,a,o){const{get:i,set:u}=QS(this.prototype,n)??{get(){return this[a]},set(n){this[a]=n}};return{get:i,set(a){const d=i?.call(this);u?.call(this,a),this.requestUpdate(n,d,o)},configurable:!0,enumerable:!0}}static getPropertyOptions(n){return this.elementProperties.get(n)??iA}static _$Ei(){if(this.hasOwnProperty(d$2("elementProperties")))return;const n=tA(this);n.finalize(),void 0!==n.l&&(this.l=[...n.l]),this.elementProperties=new Map(n.elementProperties)}static finalize(){if(this.hasOwnProperty(d$2("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(d$2("properties"))){const n=this.properties,a=[...XS(n),...eA(n)];for(const o of a)this.createProperty(o,n[o])}const n=this[Symbol.metadata];if(null!==n){const a=litPropertyMetadata.get(n);if(void 0!==a)for(const[n,o]of a)this.elementProperties.set(n,o)}this._$Eh=new Map;for(const[a,o]of this.elementProperties){const n=this._$Eu(a,o);void 0!==n&&this._$Eh.set(n,a)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(n){const a=[];if(Array.isArray(n)){const o=new Set(n.flat(1/0).reverse());for(const n of o)a.unshift(ZS(n))}else void 0!==n&&a.push(ZS(n));return a}static _$Eu(n,a){const o=a.attribute;return!1===o?void 0:"string"==typeof o?o:"string"==typeof n?n.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(n=>n(this))}addController(n){(this._$EO??(this._$EO=new Set)).add(n),void 0!==this.renderRoot&&this.isConnected&&n.hostConnected?.()}removeController(n){this._$EO?.delete(n)}_$E_(){const n=new Map,a=this.constructor.elementProperties;for(const o of a.keys())this.hasOwnProperty(o)&&(n.set(o,this[o]),delete this[o]);n.size>0&&(this._$Ep=n)}createRenderRoot(){const n=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return S$2(n,this.constructor.elementStyles),n}connectedCallback(){this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),this._$EO?.forEach(n=>n.hostConnected?.())}enableUpdating(n){}disconnectedCallback(){this._$EO?.forEach(n=>n.hostDisconnected?.())}attributeChangedCallback(n,a,o){this._$AK(n,o)}_$ET(n,a){const o=this.constructor.elementProperties.get(n),i=this.constructor._$Eu(n,o);if(void 0!==i&&!0===o.reflect){const u=(void 0!==o.converter?.toAttribute?o.converter:oA).toAttribute(a,o.type);this._$Em=n,null==u?this.removeAttribute(i):this.setAttribute(i,u),this._$Em=null}}_$AK(n,a){const o=this.constructor,i=o._$Eh.get(n);if(void 0!==i&&this._$Em!==i){const n=o.getPropertyOptions(i),u="function"==typeof n.converter?{fromAttribute:n.converter}:void 0!==n.converter?.fromAttribute?n.converter:oA;this._$Em=i;const d=u.fromAttribute(a,n.type);this[i]=d??this._$Ej?.get(i)??d,this._$Em=null}}requestUpdate(n,a,o){if(void 0!==n){const i=this.constructor,u=this[n];if(o??(o=i.getPropertyOptions(n)),!((o.hasChanged??f$5)(u,a)||o.useDefault&&o.reflect&&u===this._$Ej?.get(n)&&!this.hasAttribute(i._$Eu(n,o))))return;this.C(n,a,o)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(n,a,{useDefault:o,reflect:i,wrapped:u},d){o&&!(this._$Ej??(this._$Ej=new Map)).has(n)&&(this._$Ej.set(n,d??a??this[n]),!0!==u||void 0!==d)||(this._$AL.has(n)||(this.hasUpdated||o||(a=void 0),this._$AL.set(n,a)),!0===i&&this._$Em!==n&&(this._$Eq??(this._$Eq=new Set)).add(n))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(a){Promise.reject(a)}const n=this.scheduleUpdate();return null!=n&&await n,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[n,a]of this._$Ep)this[n]=a;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[a,o]of n){const{wrapped:n}=o,i=this[a];!0!==n||this._$AL.has(a)||void 0===i||this.C(a,void 0,o,i)}}let n=!1;const a=this._$AL;try{n=this.shouldUpdate(a),n?(this.willUpdate(a),this._$EO?.forEach(n=>n.hostUpdate?.()),this.update(a)):this._$EM()}catch(o){throw n=!1,this._$EM(),o}n&&this._$AE(a)}willUpdate(n){}_$AE(n){this._$EO?.forEach(n=>n.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(n)),this.updated(n)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(n){return!0}update(n){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(n){}firstUpdated(n){}};cA.elementStyles=[],cA.shadowRootOptions={mode:"open"},cA[d$2("elementProperties")]=new Map,cA[d$2("finalized")]=new Map,aA?.({ReactiveElement:cA}),(nA.reactiveElementVersions??(nA.reactiveElementVersions=[])).push("2.1.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const lA=globalThis,uA=lA.trustedTypes,dA=uA?uA.createPolicy("lit-html",{createHTML:n=>n}):void 0,hA="$lit$",fA=`lit$${Math.random().toFixed(9).slice(2)}$`,pA="?"+fA,mA=`<${pA}>`,gA=document,l$3=()=>gA.createComment(""),c$1=n=>null===n||"object"!=typeof n&&"function"!=typeof n,yA=Array.isArray,u$3=n=>yA(n)||"function"==typeof n?.[Symbol.iterator],bA="[ \t\n\f\r]",vA=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,wA=/-->/g,xA=/>/g,NA=RegExp(`>|${bA}(?:([^\\s"'>=/]+)(${bA}*=${bA}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),kA=/'/g,CA=/"/g,EA=/^(?:script|style|textarea|title)$/i,SA=Symbol.for("lit-noChange"),AA=Symbol.for("lit-nothing"),_A=new WeakMap,TA=gA.createTreeWalker(gA,129);function P$2(n,a){if(!yA(n)||!n.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==dA?dA.createHTML(a):a}const V$1=(n,a)=>{const o=n.length-1,i=[];let u,d=2===a?"<svg>":3===a?"<math>":"",m=vA;for(let g=0;g<o;g++){const a=n[g];let o,y,v=-1,x=0;for(;x<a.length&&(m.lastIndex=x,y=m.exec(a),null!==y);)x=m.lastIndex,m===vA?"!--"===y[1]?m=wA:void 0!==y[1]?m=xA:void 0!==y[2]?(EA.test(y[2])&&(u=RegExp("</"+y[2],"g")),m=NA):void 0!==y[3]&&(m=NA):m===NA?">"===y[0]?(m=u??vA,v=-1):void 0===y[1]?v=-2:(v=m.lastIndex-y[2].length,o=y[1],m=void 0===y[3]?NA:'"'===y[3]?CA:kA):m===CA||m===kA?m=NA:m===wA||m===xA?m=vA:(m=NA,u=void 0);const N=m===NA&&n[g+1].startsWith("/>")?" ":"";d+=m===vA?a+mA:v>=0?(i.push(o),a.slice(0,v)+hA+a.slice(v)+fA+N):a+fA+(-2===v?g:N)}return[P$2(n,d+(n[o]||"<?>")+(2===a?"</svg>":3===a?"</math>":"")),i]};let jA=class n{constructor({strings:a,_$litType$:o},i){let u;this.parts=[];let d=0,m=0;const g=a.length-1,y=this.parts,[v,x]=V$1(a,o);if(this.el=n.createElement(v,i),TA.currentNode=this.el.content,2===o||3===o){const n=this.el.content.firstChild;n.replaceWith(...n.childNodes)}for(;null!==(u=TA.nextNode())&&y.length<g;){if(1===u.nodeType){if(u.hasAttributes())for(const n of u.getAttributeNames())if(n.endsWith(hA)){const a=x[m++],o=u.getAttribute(n).split(fA),i=/([.?@])?(.*)/.exec(a);y.push({type:1,index:d,name:i[2],strings:o,ctor:"."===i[1]?RA:"?"===i[1]?BA:"@"===i[1]?MA:OA}),u.removeAttribute(n)}else n.startsWith(fA)&&(y.push({type:6,index:d}),u.removeAttribute(n));if(EA.test(u.tagName)){const n=u.textContent.split(fA),a=n.length-1;if(a>0){u.textContent=uA?uA.emptyScript:"";for(let o=0;o<a;o++)u.append(n[o],l$3()),TA.nextNode(),y.push({type:2,index:++d});u.append(n[a],l$3())}}}else if(8===u.nodeType)if(u.data===pA)y.push({type:2,index:d});else{let n=-1;for(;-1!==(n=u.data.indexOf(fA,n+1));)y.push({type:7,index:d}),n+=fA.length-1}d++}}static createElement(n,a){const o=gA.createElement("template");return o.innerHTML=n,o}};function S$1(n,a,o=n,i){if(a===SA)return a;let u=void 0!==i?o._$Co?.[i]:o._$Cl;const d=c$1(a)?void 0:a._$litDirective$;return u?.constructor!==d&&(u?._$AO?.(!1),void 0===d?u=void 0:(u=new d(n),u._$AT(n,o,i)),void 0!==i?(o._$Co??(o._$Co=[]))[i]=u:o._$Cl=u),void 0!==u&&(a=S$1(n,u._$AS(n,a.values),u,i)),a}class IA{constructor(n,a){this._$AV=[],this._$AN=void 0,this._$AD=n,this._$AM=a}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(n){const{el:{content:a},parts:o}=this._$AD,i=(n?.creationScope??gA).importNode(a,!0);TA.currentNode=i;let u=TA.nextNode(),d=0,m=0,g=o[0];for(;void 0!==g;){if(d===g.index){let a;2===g.type?a=new PA(u,u.nextSibling,this,n):1===g.type?a=new g.ctor(u,g.name,g.strings,this,n):6===g.type&&(a=new zA(u,this,n)),this._$AV.push(a),g=o[++m]}d!==g?.index&&(u=TA.nextNode(),d++)}return TA.currentNode=gA,i}p(n){let a=0;for(const o of this._$AV)void 0!==o&&(void 0!==o.strings?(o._$AI(n,o,a),a+=o.strings.length-2):o._$AI(n[a])),a++}}class PA{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(n,a,o,i){this.type=2,this._$AH=AA,this._$AN=void 0,this._$AA=n,this._$AB=a,this._$AM=o,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let n=this._$AA.parentNode;const a=this._$AM;return void 0!==a&&11===n?.nodeType&&(n=a.parentNode),n}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(n,a=this){n=S$1(this,n,a),c$1(n)?n===AA||null==n||""===n?(this._$AH!==AA&&this._$AR(),this._$AH=AA):n!==this._$AH&&n!==SA&&this._(n):void 0!==n._$litType$?this.$(n):void 0!==n.nodeType?this.T(n):u$3(n)?this.k(n):this._(n)}O(n){return this._$AA.parentNode.insertBefore(n,this._$AB)}T(n){this._$AH!==n&&(this._$AR(),this._$AH=this.O(n))}_(n){this._$AH!==AA&&c$1(this._$AH)?this._$AA.nextSibling.data=n:this.T(gA.createTextNode(n)),this._$AH=n}$(n){const{values:a,_$litType$:o}=n,i="number"==typeof o?this._$AC(n):(void 0===o.el&&(o.el=jA.createElement(P$2(o.h,o.h[0]),this.options)),o);if(this._$AH?._$AD===i)this._$AH.p(a);else{const n=new IA(i,this),o=n.u(this.options);n.p(a),this.T(o),this._$AH=n}}_$AC(n){let a=_A.get(n.strings);return void 0===a&&_A.set(n.strings,a=new jA(n)),a}k(n){yA(this._$AH)||(this._$AH=[],this._$AR());const a=this._$AH;let o,i=0;for(const u of n)i===a.length?a.push(o=new PA(this.O(l$3()),this.O(l$3()),this,this.options)):o=a[i],o._$AI(u),i++;i<a.length&&(this._$AR(o&&o._$AB.nextSibling,i),a.length=i)}_$AR(n=this._$AA.nextSibling,a){for(this._$AP?.(!1,!0,a);n!==this._$AB;){const a=n.nextSibling;n.remove(),n=a}}setConnected(n){void 0===this._$AM&&(this._$Cv=n,this._$AP?.(n))}}class OA{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(n,a,o,i,u){this.type=1,this._$AH=AA,this._$AN=void 0,this.element=n,this.name=a,this._$AM=i,this.options=u,o.length>2||""!==o[0]||""!==o[1]?(this._$AH=Array(o.length-1).fill(new String),this.strings=o):this._$AH=AA}_$AI(n,a=this,o,i){const u=this.strings;let d=!1;if(void 0===u)n=S$1(this,n,a,0),d=!c$1(n)||n!==this._$AH&&n!==SA,d&&(this._$AH=n);else{const i=n;let m,g;for(n=u[0],m=0;m<u.length-1;m++)g=S$1(this,i[o+m],a,m),g===SA&&(g=this._$AH[m]),d||(d=!c$1(g)||g!==this._$AH[m]),g===AA?n=AA:n!==AA&&(n+=(g??"")+u[m+1]),this._$AH[m]=g}d&&!i&&this.j(n)}j(n){n===AA?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,n??"")}}let RA=class extends OA{constructor(){super(...arguments),this.type=3}j(n){this.element[this.name]=n===AA?void 0:n}};class BA extends OA{constructor(){super(...arguments),this.type=4}j(n){this.element.toggleAttribute(this.name,!!n&&n!==AA)}}let MA=class extends OA{constructor(n,a,o,i,u){super(n,a,o,i,u),this.type=5}_$AI(n,a=this){if((n=S$1(this,n,a,0)??AA)===SA)return;const o=this._$AH,i=n===AA&&o!==AA||n.capture!==o.capture||n.once!==o.once||n.passive!==o.passive,u=n!==AA&&(o===AA||i);i&&this.element.removeEventListener(this.name,this,o),u&&this.element.addEventListener(this.name,this,n),this._$AH=n}handleEvent(n){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,n):this._$AH.handleEvent(n)}};class zA{constructor(n,a,o){this.element=n,this.type=6,this._$AN=void 0,this._$AM=a,this.options=o}get _$AU(){return this._$AM._$AU}_$AI(n){S$1(this,n)}}const FA=lA.litHtmlPolyfillSupport;FA?.(jA,PA),(lA.litHtmlVersions??(lA.litHtmlVersions=[])).push("3.3.1");const B2=(n,a,o)=>{const i=o?.renderBefore??a;let u=i._$litPart$;if(void 0===u){const n=o?.renderBefore??null;i._$litPart$=u=new PA(a.insertBefore(l$3(),n),n,void 0,o??{})}return u._$AI(n),u};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const LA=globalThis;let DA=class extends cA{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const a=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=a.firstChild),a}update(n){const a=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(n),this._$Do=B2(a,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return SA}};DA._$litElement$=!0,DA.finalized=!0,LA.litElementHydrateSupport?.({LitElement:DA});const $A=LA.litElementPolyfillSupport;$A?.({LitElement:DA});(LA.litElementVersions??(LA.litElementVersions=[])).push("4.2.1");i$4`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`;i$4`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`;i$4`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;const UA={hexStringToNumber(n){const a=n.startsWith("0x")?n.slice(2):n;const o=parseInt(a,16);return o},numberToHexString:n=>`0x${n.toString(16)}`,async getUserInfo(n){const[a,o]=await Promise.all([UA.getAddresses(n),UA.getChainId(n)]);return{chainId:o,addresses:a}},async getChainId(n){const a=await n.request({method:"eth_chainId"});return Number(a)},async getAddress(n){const[a]=await n.request({method:"eth_accounts"});return a},async getAddresses(n){const a=await n.request({method:"eth_accounts"});return a},async addEthereumChain(n,a){const o=a.rpcUrls.chainDefault?.http||[];await n.request({method:"wallet_addEthereumChain",params:[{chainId:UA.numberToHexString(a.id),rpcUrls:[...o],chainName:a.name,nativeCurrency:{name:a.nativeCurrency.name,decimals:a.nativeCurrency.decimals,symbol:a.nativeCurrency.symbol},blockExplorerUrls:[a.blockExplorers?.default.url],iconUrls:[IN.NetworkImageIds[a.id]]}]})}};const WA={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function defineChain(n){return{formatters:void 0,fees:void 0,serializers:void 0,...n}}const HA=defineChain({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"});const qA=defineChain({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});defineChain({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});defineChain({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});defineChain({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const GA={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]};const VA={getMethodsByChainNamespace:n=>GA[n]||[],createDefaultNamespace(n){return{methods:this.getMethodsByChainNamespace(n),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(n,a){if(!a)return{...n};const o={...n};const i=new Set;a.methods&&Object.keys(a.methods).forEach(n=>i.add(n));a.chains&&Object.keys(a.chains).forEach(n=>i.add(n));a.events&&Object.keys(a.events).forEach(n=>i.add(n));a.rpcMap&&Object.keys(a.rpcMap).forEach(n=>{const[a]=n.split(":");a&&i.add(a)});i.forEach(n=>{o[n]||(o[n]=this.createDefaultNamespace(n))});a.methods&&Object.entries(a.methods).forEach(([n,a])=>{o[n]&&(o[n].methods=a)});a.chains&&Object.entries(a.chains).forEach(([n,a])=>{o[n]&&(o[n].chains=a)});a.events&&Object.entries(a.events).forEach(([n,a])=>{o[n]&&(o[n].events=a)});if(a.rpcMap){const n=new Set;Object.entries(a.rpcMap).forEach(([a,i])=>{const[u,d]=a.split(":");if(u&&d&&o[u]){o[u].rpcMap||(o[u].rpcMap={});if(!n.has(u)){o[u].rpcMap={};n.add(u)}o[u].rpcMap[d]=i}})}return o},createNamespaces(n,a){const o=n.reduce((n,a)=>{const{id:o,chainNamespace:i,rpcUrls:u}=a;const d=u.default.http[0];n[i]||(n[i]=this.createDefaultNamespace(i));const m=`${i}:${o}`;const g=n[i];g.chains.push(m);switch(m){case HA.caipNetworkId:g.chains.push(HA.deprecatedCaipNetworkId);break;case qA.caipNetworkId:g.chains.push(qA.deprecatedCaipNetworkId)}g?.rpcMap&&d&&(g.rpcMap[o]=d);return n},{});return this.applyNamespaceOverrides(o,a)},resolveReownName:async n=>{const a=await Kx.resolveName(n);const o=Object.values(a?.addresses)||[];return o[0]?.address||!1},getChainsFromNamespaces:(n={})=>Object.values(n).flatMap(n=>{const a=n.chains||[];const o=n.accounts.map(n=>{const[a,o]=n.split(":");return`${a}:${o}`});return Array.from(new Set([...a,...o]))}),isSessionEventData:n=>"object"==typeof n&&null!==n&&"id"in n&&"topic"in n&&"params"in n&&"object"==typeof n.params&&null!==n.params&&"chainId"in n.params&&"event"in n.params&&"object"==typeof n.params.event&&null!==n.params.event,isOriginAllowed(n,a,o){for(const i of[...a,...o])if(i.includes("*")){const a=i.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&");const o=`^${a.replace(/\\\*/gu,".*")}$`;const u=new RegExp(o,"u");if(u.test(n))return!0}else try{if(new URL(i).origin===n)return!0}catch(nL){if(i===n)return!0}return!1},listenWcProvider({universalProvider:n,namespace:a,onConnect:o,onDisconnect:i,onAccountsChanged:u,onChainChanged:d,onDisplayUri:m}){o&&n.on("connect",()=>{const i=VA.getWalletConnectAccounts(n,a);o(i)});i&&n.on("disconnect",()=>{i()});u&&n.on("session_event",n=>{if(VA.isSessionEventData(n)){const{name:o,data:i}=n.params.event;if("accountsChanged"===o&&Array.isArray(i)){const n=i.filter(n=>iw.isCaipAddress(n)).map(n=>nw.parseCaipAddress(n)).filter(n=>n.chainNamespace===a);u(n)}}});d&&n.on("chainChanged",n=>{d(n)});m&&n.on("display_uri",n=>{m(n)})},getWalletConnectAccounts(n,a){const o=new Set;const i=n?.session?.namespaces?.[a]?.accounts?.map(n=>nw.parseCaipAddress(n)).filter(({address:n})=>{if(o.has(n.toLowerCase()))return!1;o.add(n.toLowerCase());return!0});return i&&i.length>0?i:[]}};class KA{constructor(n){this.namespace=n.namespace}async syncConnections(n){switch(this.namespace){case Pv.CHAIN.EVM:await this.syncEVMConnections(n);break;case Pv.CHAIN.SOLANA:await this.syncSolanaConnections(n);break;case Pv.CHAIN.BITCOIN:await this.syncBitcoinConnections(n);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:n,caipNetworks:a,universalProvider:o,getConnectionStatusInfo:i,onConnection:u,onListenProvider:d}){await Promise.all(n.filter(n=>{const{hasDisconnected:a,hasConnected:o}=i(n.id);return!a&&o}).map(async n=>{if(n.id===Pv.CONNECTOR_ID.WALLET_CONNECT){const i=VA.getWalletConnectAccounts(o,this.namespace);const d=a.find(n=>n.chainNamespace===this.namespace&&n.id.toString()===i[0]?.chainId?.toString());i.length>0&&u({connectorId:n.id,accounts:i.map(n=>({address:n.address})),caipNetwork:d})}else{const{accounts:o,chainId:i}=await WS.fetchProviderData(n);if(o.length>0&&i){const m=a.find(n=>n.chainNamespace===this.namespace&&n.id.toString()===i.toString());u({connectorId:n.id,accounts:o.map(n=>({address:n})),caipNetwork:m});n.provider&&n.id!==Pv.CONNECTOR_ID.AUTH&&n.id!==Pv.CONNECTOR_ID.WALLET_CONNECT&&d(n.id,n.provider)}}}))}async syncSolanaConnections({connectors:n,caipNetwork:a,universalProvider:o,getConnectionStatusInfo:i,onConnection:u,onListenProvider:d}){await Promise.all(n.filter(n=>{const{hasDisconnected:a,hasConnected:o}=i(n.id);return!a&&o}).map(async n=>{if(n.id===Pv.CONNECTOR_ID.WALLET_CONNECT){const i=VA.getWalletConnectAccounts(o,this.namespace);i.length>0&&u({connectorId:n.id,accounts:i.map(n=>({address:n.address})),caipNetwork:a})}else{const o=await n.connect({chainId:a?.id});if(o){u({connectorId:n.id,accounts:[{address:o}],caipNetwork:a});d(n.id,n.provider)}}}))}async syncBitcoinConnections({connectors:n,caipNetwork:a,universalProvider:o,getConnectionStatusInfo:i,onConnection:u,onListenProvider:d}){await Promise.all(n.filter(n=>{const{hasDisconnected:a,hasConnected:o}=i(n.id);return!a&&o}).map(async n=>{if(n.id===Pv.CONNECTOR_ID.WALLET_CONNECT){const i=VA.getWalletConnectAccounts(o,this.namespace);i.length>0&&u({connectorId:n.id,accounts:i.map(n=>({address:n.address})),caipNetwork:a});return}const i=await n.connect();const m=await n.getAccountAddresses();let g=m?.map(n=>iw.createAccount(Pv.CHAIN.BITCOIN,n.address,n.purpose||"payment",n.publicKey,n.path));g&&g.length>1&&(g=[{namespace:Pv.CHAIN.BITCOIN,publicKey:g[WA.ACCOUNT_INDEXES.PAYMENT]?.publicKey??"",path:g[WA.ACCOUNT_INDEXES.PAYMENT]?.path??"",address:g[WA.ACCOUNT_INDEXES.PAYMENT]?.address??"",type:"payment"},{namespace:Pv.CHAIN.BITCOIN,publicKey:g[WA.ACCOUNT_INDEXES.ORDINAL]?.publicKey??"",path:g[WA.ACCOUNT_INDEXES.ORDINAL]?.path??"",address:g[WA.ACCOUNT_INDEXES.ORDINAL]?.address??"",type:"ordinal"}]);const y=n.chains.find(n=>n.id===a?.id)||n.chains[0];if(!y)throw new Error("The connector does not support any of the requested chains");if(i){d(n.id,n.provider);u({connectorId:n.id,accounts:g.map(n=>({address:n.address,type:n.type})),caipNetwork:a})}}))}getConnection({address:n,connectorId:a,connections:o,connectors:i}){if(a){const u=o.find(n=>PN.isLowerCaseMatch(n.connectorId,a));if(!u)return null;const d=i.find(n=>PN.isLowerCaseMatch(n.id,u.connectorId));const m=n?u.accounts.find(a=>PN.isLowerCaseMatch(a.address,n)):u.accounts[0];return{...u,account:m,connector:d}}const u=o.find(n=>n.accounts.length>0&&i.some(a=>PN.isLowerCaseMatch(a.id,n.connectorId)));if(u){const[n]=u.accounts;const a=i.find(n=>PN.isLowerCaseMatch(n.id,u.connectorId));return{...u,account:n,connector:a}}return null}}class ZA{constructor({provider:n,namespace:a}){this.id=Pv.CONNECTOR_ID.WALLET_CONNECT;this.name=IN.ConnectorNamesMap[Pv.CONNECTOR_ID.WALLET_CONNECT];this.type="WALLET_CONNECT";this.imageId=IN.ConnectorImageIds[Pv.CONNECTOR_ID.WALLET_CONNECT];this.getCaipNetworks=jx.getCaipNetworks.bind(jx);this.caipNetworks=this.getCaipNetworks();this.provider=n;this.chain=a}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){const n=await this.authenticate();if(!n){const n=this.getCaipNetworks();const a=dw.state.universalProviderConfigOverride;const o=VA.createNamespaces(n,a);await this.provider.connect({optionalNamespaces:o})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const n=this.chains.map(n=>n.caipNetworkId);return TN.universalProviderAuthenticate({universalProvider:this.provider,chains:n,methods:YA})}}const YA=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];const JA=[Pv.CONNECTOR_ID.AUTH,Pv.CONNECTOR_ID.WALLET_CONNECT];class QA{constructor(n){this.availableConnectors=[];this.availableConnections=[];this.providerHandlers={};this.eventListeners=new Map;this.getCaipNetworks=n=>jx.getCaipNetworks(n);this.getConnectorId=n=>ax.getConnectorId(n);n&&this.construct(n);n?.namespace&&(this.connectionManager=new KA({namespace:n.namespace}))}construct(n){this.projectId=n.projectId;this.namespace=n.namespace;this.adapterType=n.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:n,chainId:a}){const o=this.getCaipNetworks().filter(n=>n.chainNamespace===this.namespace).find(n=>n.id.toString()===a?.toString());n&&o&&this.addConnection({connectorId:Pv.CONNECTOR_ID.AUTH,accounts:n,caipNetwork:o})}setAuthProvider(n){n.onConnect(this.onAuthConnected.bind(this));n.onSocialConnected(this.onAuthConnected.bind(this));this.addConnector({id:Pv.CONNECTOR_ID.AUTH,type:"AUTH",name:Pv.CONNECTOR_NAMES.AUTH,provider:n,imageId:IN.ConnectorImageIds[Pv.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...n){const a=new Set;this.availableConnectors=[...n,...this.availableConnectors].filter(n=>{if(a.has(n.id))return!1;a.add(n.id);return!0});this.emit("connectors",this.availableConnectors)}addConnection(...n){const a=new Set;this.availableConnections=[...n,...this.availableConnections].filter(n=>{if(a.has(n.connectorId.toLowerCase()))return!1;a.add(n.connectorId.toLowerCase());return!0});this.emit("connections",this.availableConnections)}deleteConnection(n){this.availableConnections=this.availableConnections.filter(a=>!PN.isLowerCaseMatch(a.connectorId,n));this.emit("connections",this.availableConnections)}clearConnections(n=!1){this.availableConnections=[];n&&this.emit("connections",this.availableConnections)}setStatus(n,a){Lx.setStatus(n,a)}on(n,a){this.eventListeners.has(n)||this.eventListeners.set(n,new Set);this.eventListeners.get(n)?.add(a)}off(n,a){const o=this.eventListeners.get(n);o&&o.delete(a)}removeAllEventListeners(){this.eventListeners.forEach(n=>{n.clear()})}emit(n,a){const o=this.eventListeners.get(n);o&&o.forEach(n=>n(a))}async connectWalletConnect(n){const a=this.getWalletConnectConnector();const o=await a.connectWalletConnect();return{clientId:o.clientId}}async switchNetwork(n){const{caipNetwork:a,providerType:o}=n;if(!n.provider)return;const i="provider"in n.provider?n.provider.provider:n.provider;if("WALLET_CONNECT"!==o){if(i&&"AUTH"===o){const n=i;const o=getPreferredAccountType(a.chainNamespace);await n.switchNetwork({chainId:a.caipNetworkId});const u=await n.getUser({chainId:a.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",u)}}else i.setDefaultChain(a.caipNetworkId)}getWalletConnectConnector(){const n=this.connectors.find(n=>n instanceof ZA);if(!n)throw new Error("WalletConnectConnector not found");return n}onConnect(n,a){if(n.length>0){const{address:o,chainId:i}=iw.getAccount(n[0]);const u=this.getCaipNetworks().filter(n=>n.chainNamespace===this.namespace).find(n=>n.id.toString()===i?.toString());const d=this.connectors.find(n=>n.id===a);if(o){this.emit("accountChanged",{address:o,chainId:i,connector:d});this.addConnection({connectorId:a,accounts:n.map(n=>{const{address:a}=iw.getAccount(n);return{address:a}}),caipNetwork:u})}}}onAccountsChanged(n,a,o=!0){if(n.length>0){const{address:o}=iw.getAccount(n[0]);const i=this.connectionManager?.getConnection({connectorId:a,connections:this.connections,connectors:this.connectors});o&&PN.isLowerCaseMatch(this.getConnectorId(Pv.CHAIN.EVM),a)&&this.emit("accountChanged",{address:o,chainId:i?.caipNetwork?.id,connector:i?.connector});this.addConnection({connectorId:a,accounts:n.map(n=>{const{address:a}=iw.getAccount(n);return{address:a}}),caipNetwork:i?.caipNetwork})}else o&&this.onDisconnect(a)}onDisconnect(n){this.removeProviderListeners(n);this.deleteConnection(n);PN.isLowerCaseMatch(this.getConnectorId(Pv.CHAIN.EVM),n)&&this.emitFirstAvailableConnection();0===this.connections.length&&this.emit("disconnect")}onChainChanged(n,a){const o="string"==typeof n&&n.startsWith("0x")?UA.hexStringToNumber(n).toString():n.toString();const i=this.connectionManager?.getConnection({connectorId:a,connections:this.connections,connectors:this.connectors});const u=this.getCaipNetworks().filter(n=>n.chainNamespace===this.namespace).find(n=>n.id.toString()===o);i&&this.addConnection({connectorId:a,accounts:i.accounts,caipNetwork:u});PN.isLowerCaseMatch(this.getConnectorId(Pv.CHAIN.EVM),a)&&this.emit("switchNetwork",{chainId:o})}listenProviderEvents(n,a){if(JA.includes(n))return;const accountsChangedHandler=a=>this.onAccountsChanged(a,n);const chainChangedHandler=a=>this.onChainChanged(a,n);const disconnectHandler=()=>this.onDisconnect(n);if(!this.providerHandlers[n]){a.on("disconnect",disconnectHandler);a.on("accountsChanged",accountsChangedHandler);a.on("chainChanged",chainChangedHandler);this.providerHandlers[n]={provider:a,disconnect:disconnectHandler,accountsChanged:accountsChangedHandler,chainChanged:chainChangedHandler}}}removeProviderListeners(n){if(this.providerHandlers[n]){const{provider:a,disconnect:o,accountsChanged:i,chainChanged:u}=this.providerHandlers[n];a.removeListener("disconnect",o);a.removeListener("accountsChanged",i);a.removeListener("chainChanged",u);this.providerHandlers[n]=null}}emitFirstAvailableConnection(){const n=this.connectionManager?.getConnection({connections:this.connections,connectors:this.connectors});if(n){const[a]=n.accounts;this.emit("accountChanged",{address:a?.address,chainId:n.caipNetwork?.id,connector:n.connector})}}}function authConnector(n){let a=[];let o;let i;function parseChainId(n){return Ov.parseEvmChainId(n)||1}function getProviderInstance(){o||(o=DS.getInstance({projectId:n.options.projectId,chainId:getActiveCaipNetwork()?.caipNetworkId,enableLogger:n.options.enableAuthLogger,onTimeout:n=>{"iframe_load_failed"===n?Mw.open(RN.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):"iframe_request_timeout"===n?Mw.open(RN.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):"unverified_domain"===n&&Mw.open(RN.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:RN.EmbeddedWalletAbortController,getActiveCaipNetwork:n=>getActiveCaipNetwork(n),getCaipNetworks:n=>jx.getCaipNetworks(n)}));return o}async function connectSocial(o={}){const i=getProviderInstance();let u=o.chainId;if(o.isReconnecting){const a=Ov.parseEvmChainId(i.getLastUsedChainId()||"");const o=n.chains?.[0].id;u=a||o;if(!u)throw new Error("ChainId not found in provider")}const d=getPreferredAccountType("eip155");const{address:m,chainId:g,accounts:y}=await TN.authConnectorAuthenticate({authConnector:i,chainId:u,preferredAccountType:d,socialUri:o.socialUri,chainNamespace:Pv.CHAIN.EVM});a=y?.map(n=>n.address)||[m];const v=parseChainId(g);return{accounts:a,account:m,chainId:v,chain:{id:v,unsuported:!1}}}return createConnector(o=>({id:Pv.CONNECTOR_ID.AUTH,name:Pv.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:Pv.CHAIN.EVM,async connect(n={}){if(i)return i;i||(i=new Promise(a=>{a(connectSocial(n))}));const a=await i;i=void 0;return a},async disconnect(){const n=await this.getProvider();await n.disconnect()},getAccounts(){if(!a?.length)return Promise.resolve([]);o.emitter.emit("change",{accounts:a});return Promise.resolve(a)},async getProvider(){this.provider||(this.provider=DS.getInstance({projectId:n.options.projectId,chainId:getActiveCaipNetwork()?.caipNetworkId,enableLogger:n.options.enableAuthLogger,abortController:RN.EmbeddedWalletAbortController,onTimeout:n=>{"iframe_load_failed"===n?Mw.open(RN.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):"iframe_request_timeout"===n?Mw.open(RN.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):"unverified_domain"===n&&Mw.open(RN.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:n=>getActiveCaipNetwork(n),getCaipNetworks:n=>jx.getCaipNetworks(n)}));return Promise.resolve(this.provider)},async getChainId(){const n=await this.getProvider();const{chainId:a}=await n.getChainId();return parseChainId(a)},async isAuthorized(){const n=jx.state.activeChain;const a=n===Pv.CHAIN.EVM;const o=Pv.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(n=>ax.getConnectorId(n)===Pv.CONNECTOR_ID.AUTH);if(o&&!a)return!1;const i=await this.getProvider();return Promise.resolve(i.getLoginEmailUsed())},async switchChain({chainId:n}){try{const i=o.chains.find(a=>a.id===n);if(!i)throw new Tr(new Error("chain not found on connector."));const u=await this.getProvider();const d=getPreferredAccountType("eip155");const m=await u.connect({chainId:n,preferredAccountType:d});a=m?.accounts?.map(n=>n.address)||[m.address];o.emitter.emit("change",{chainId:Number(n),accounts:a});return i}catch(i){if(i instanceof Error)throw new Tr(i);throw i}},onAccountsChanged(n){0===n.length?this.onDisconnect():o.emitter.emit("change",{accounts:n.map(getAddress$2)})},onChainChanged(n){const a=Number(n);o.emitter.emit("change",{chainId:a})},async onDisconnect(n){const a=await this.getProvider();await a.disconnect()}}))}walletConnect.type="walletConnect";function walletConnect(n,a){const o=n.isNewChainsStale??!0;let i;let u;let d;let m;let g;let y;let v;return createConnector(n=>({id:"walletConnect",name:"WalletConnect",type:walletConnect.type,async setup(){const n=await this.getProvider().catch(()=>null);if(n){if(!m){m=this.onConnect.bind(this);n.on("connect",m)}if(!y){y=this.onSessionDelete.bind(this);n.on("session_delete",y)}}},async connect({...n}={}){try{const a=jx.getCaipNetworks();const o=await this.getProvider();if(!o)throw new tc;if(!g){g=this.onDisplayUri;o.on("display_uri",g)}const i=await this.isChainsStale();o.session&&i&&await o.disconnect();const x=dw.state.universalProviderConfigOverride;if(!o.session||i){const i=VA.createNamespaces(a,x);await o.connect({optionalNamespaces:i,..."pairingTopic"in n?{pairingTopic:n.pairingTopic}:{}});this.setRequestedChainsIds(a.map(n=>Number(n.id)))}const N=await this.getAccounts();const k=await this.getChainId();const E=o.session?.namespaces?.eip155?.chains;const S=E?.some(n=>Number(n.split(":")[1])===k);let A=1;S?A=k:E?.[0]&&(A=Number(E[0].split(":")[1]));if(g){o.removeListener("display_uri",g);g=void 0}if(m){o.removeListener("connect",m);m=void 0}if(!u){u=this.onAccountsChanged.bind(this);o.on("accountsChanged",u)}if(!d){d=this.onChainChanged.bind(this);o.on("chainChanged",d)}if(!v){v=this.onDisconnect.bind(this);o.on("disconnect",v)}if(!y){y=this.onSessionDelete.bind(this);o.on("session_delete",y)}const _=x?.defaultChain;o.setDefaultChain(_??`eip155:${A}`);return{accounts:N,chainId:A}}catch(a){if(/(user rejected|connection request reset)/i.test(a?.message))throw new Cr(a);throw a}},async disconnect(){const n=await this.getProvider();try{await(n?.disconnect())}catch(a){if(!/No matching key/i.test(a.message))throw a}finally{if(d){n?.removeListener("chainChanged",d);d=void 0}if(v){n?.removeListener("disconnect",v);v=void 0}if(!m){m=this.onConnect.bind(this);n?.on("connect",m)}if(u){n?.removeListener("accountsChanged",u);u=void 0}if(y){n?.removeListener("session_delete",y);y=void 0}this.setRequestedChainsIds([])}},async getAccounts(){const n=await this.getProvider();if(!n?.session?.namespaces)return[];const a=n?.session?.namespaces[Pv.CHAIN.EVM]?.accounts;const o=a?.map(n=>n.split(":")[2])??[];const i=new Set;const u=o.filter(n=>{const a=n?.toLowerCase();if(i.has(a))return!1;i.add(a);return!0});return u},async getProvider({chainId:n}={}){if(!i){i=await a.getUniversalProvider();i?.events.setMaxListeners(Number.POSITIVE_INFINITY)}const o=ow.getActiveNamespace();const u=a.getCaipNetwork()?.id;if(n&&u!==n&&o){const n=ow.getStoredActiveCaipNetworkId();const i=o?a.getCaipNetworks(o):[];const u=i?.find(a=>a.id===n);u&&u.chainNamespace===Pv.CHAIN.EVM&&await(this.switchChain?.({chainId:Number(u.id)}))}return i},async getChainId(){const n=a.getCaipNetwork(Pv.CHAIN.EVM)?.id;if(n)return n;const o=await this.getProvider();const i=o.session?.namespaces[Pv.CHAIN.EVM]?.chains?.[0];const u=jx.getCaipNetworks().find(n=>n.id===i);return u?.id},async isAuthorized(){try{const[n,a]=await Promise.all([this.getAccounts(),this.getProvider()]);if(!n.length)return!1;const o=await this.isChainsStale();if(o&&a.session){await a.disconnect().catch(()=>{});return!1}return!0}catch{return!1}},async switchChain({addEthereumChainParameter:a,chainId:o}){const i=await this.getProvider();if(!i)throw new tc;const u=jx.getCaipNetworks().find(n=>n.id===o);if(!u)throw new Tr(new Li);try{await i.request({method:"wallet_switchEthereumChain",params:[{chainId:numberToHex(o)}]});u?.caipNetworkId&&i.setDefaultChain(u?.caipNetworkId);n.emitter.emit("change",{chainId:Number(o)});const a=await this.getRequestedChainsIds();this.setRequestedChainsIds([...a,o]);return{...u,id:u.id}}catch(d){const n=d;if(/(?:user rejected)/iu.test(n.message))throw new Cr(n);try{let n;n=a?.blockExplorerUrls?a.blockExplorerUrls:u.blockExplorers?.default.url?[u.blockExplorers?.default.url]:[];const d=u.rpcUrls?.chainDefault?.http||[];const m={blockExplorerUrls:n,chainId:numberToHex(o),chainName:u.name,iconUrls:a?.iconUrls,nativeCurrency:u.nativeCurrency,rpcUrls:d};await i.request({method:"wallet_addEthereumChain",params:[m]});const g=await this.getRequestedChainsIds();this.setRequestedChainsIds([...g,o]);return{...u,id:u.id}}catch(nL){throw new Cr(nL)}}},onAccountsChanged(a){0===a.length?this.onDisconnect():n.emitter.emit("change",{accounts:a.map(n=>getAddress$2(n))})},onChainChanged(a){const o=Number(a);n.emitter.emit("change",{chainId:o})},onConnect(n){this.setRequestedChainsIds(jx.getCaipNetworks().map(n=>Number(n.id)))},async onDisconnect(a){this.setRequestedChainsIds([]);n.emitter.emit("disconnect");const o=await this.getProvider();if(u){o.removeListener("accountsChanged",u);u=void 0}if(d){o.removeListener("chainChanged",d);d=void 0}if(v){o.removeListener("disconnect",v);v=void 0}if(y){o.removeListener("session_delete",y);y=void 0}if(!m){m=this.onConnect.bind(this);o.on("connect",m)}},onDisplayUri(a){n.emitter.emit("message",{type:"display_uri",data:a})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){if(!i?.session?.namespaces)return[];const n=i?.session?.namespaces[Pv.CHAIN.EVM]?.accounts;const a=n?.map(n=>Number.parseInt(n.split(":")[1]??""))??[];return a},async getRequestedChainsIds(){const a=await(n.storage?.getItem(this.requestedChainsStorageKey))??[];return[...new Set(a)]},async isChainsStale(){if(!o)return!1;const a=n.chains.map(n=>n.id);const i=this.getNamespaceChainsIds();if(i.length&&!i.some(n=>a.includes(n)))return!1;const u=await this.getRequestedChainsIds();return!a.every(n=>u.includes(Number(n)))},async setRequestedChainsIds(a){await(n.storage?.setItem(this.requestedChainsStorageKey,a))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}}))}const XA=proxy({pendingTransactions:0});const e_={state:XA,subscribeKey:(n,a)=>subscribeKey(XA,n,a),increase(n){XA[n]+=1},decrease(n){XA[n]-=1},reset(n){XA[n]=0}};async function getSafeConnector(a){if(iw.isSafeApp()){const{safe:o}=await __vitePreload(async()=>{const{safe:a}=await n(async()=>{const{safe:n}=await import("./index-C48FUAJh-BylhyVHQ.js");return{safe:n}},__vite__mapDeps([0,1]));return{safe:a}},__vite__mapDeps([0,1,2]));if(o&&!a.some(n=>"safe"===n.type)){const n=o();return n}}return null}async function getCoinbaseConnector(a){try{const{coinbaseWallet:o}=await __vitePreload(async()=>{const{coinbaseWallet:a}=await n(async()=>{const{coinbaseWallet:n}=await import("./index-C48FUAJh-BylhyVHQ.js");return{coinbaseWallet:n}},__vite__mapDeps([0,1]));return{coinbaseWallet:a}},__vite__mapDeps([0,1,2]));if(o&&!a.some(n=>"coinbaseWalletSDK"===n.id))return o()}catch(o){console.error("Failed to import Coinbase Wallet SDK:",o)}return null}const t_={enable:!1,pollingInterval:3e4};class n_ extends QA{constructor(n){const a=zN.extendCaipNetworks(n.networks,{projectId:n.projectId,customNetworkImageUrls:{},customRpcUrls:n.customRpcUrls});super();this.balancePromises={};this.namespace=Pv.CHAIN.EVM;this.adapterType=Pv.ADAPTER_TYPES.WAGMI;this.projectId=n.projectId;this.pendingTransactionsFilter={...t_,...n.pendingTransactionsFilter??{}};this.createConfig({...n,networks:a});this.checkChainId()}construct(n){this.checkChainId();this.setupWatchers()}async getAccounts(n){const a=this.getWagmiConnector(n.id);if(!a)return{accounts:[]};if(a.id===Pv.CONNECTOR_ID.AUTH){const n=await a.getProvider();if(!n?.user)return{accounts:[]};const{address:o,accounts:i}=n.user;return Promise.resolve({accounts:(i||[{address:o,type:"eoa"}]).map(n=>iw.createAccount("eip155",n.address,n.type))})}const{addresses:o,address:i}=getAccount(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(o||[i])]?.map(n=>iw.createAccount("eip155",n||"","eoa"))})}checkChainId(){const{chainId:n}=getAccount(this.wagmiConfig);n&&this.emit("switchNetwork",{chainId:n})}getWagmiConnector(n){return this.wagmiConfig.connectors.find(a=>a.id===n)}createConfig(n){this.wagmiChains=n.networks.filter(n=>n.chainNamespace===Pv.CHAIN.EVM);const a={};const o=[...n.connectors??[]];this.wagmiChains.forEach(o=>{const i=n.transports?.[o.id];const u=zN.getCaipNetworkId(o);a[o.id]=i?zN.extendWagmiTransports(o,n.projectId,i):zN.getViemTransport(o,n.projectId,n.customRpcUrls?.[u])});this.wagmiConfig=createConfig({...n,chains:this.wagmiChains,connectors:o,transports:a})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=watchPendingTransactions(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions");e_.increase("pendingTransactions")}});const n=e_.subscribeKey("pendingTransactions",a=>{if(a>=Pv.LIMITS.PENDING_TRANSACTIONS){this.unwatchPendingTransactions?.();n()}})}setupWatchers(){watchConnections(this.wagmiConfig,{onChange:n=>{this.clearConnections();this.addConnection(...n.map(n=>{const a=this.getCaipNetworks().find(a=>a.id===n.chainId);const o=n.connector.id===Pv.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(n=>({address:n})),caipNetwork:a,connectorId:n.connector.id,auth:o?{name:ow.getConnectedSocialProvider(),username:ow.getConnectedSocialUsername()}:void 0}}))}});watchAccount(this.wagmiConfig,{onChange:(n,a)=>{"disconnected"===n.status&&a.address&&this.emit("disconnect");n?.chainId&&n?.chainId!==a?.chainId&&this.emit("switchNetwork",{chainId:n.chainId});if("connected"===n.status){const o=n.address!==a?.address;const i=n.connector.id!==a.connector?.id;const u="connected"!==a.status;if(o||i||u){this.setupWatchPendingTransactions();this.handleAccountChanged({address:n.address,chainId:n.chainId,connector:n.connector})}}}})}async addThirdPartyConnectors(n){const a=[];if(!1!==n.enableCoinbase){const n=await getCoinbaseConnector(this.wagmiConfig.connectors);n&&a.push(n)}const o=await getSafeConnector(this.wagmiConfig.connectors);o&&a.push(o);await Promise.all(a.map(a=>{const o=this.wagmiConfig._internal.connectors.setup(a);this.wagmiConfig._internal.connectors.setState(n=>[...n,o]);return this.addWagmiConnector(o,n)}))}addWagmiConnectors(n,a){const o=[];!1!==n.enableWalletConnect&&o.push(walletConnect(n,a));!1!==n.enableEIP6963&&o.push(injected({shimDisconnect:!0}));const i=a?.remoteFeatures?.email??!0;const u=Array.isArray(a?.remoteFeatures?.socials)&&a?.remoteFeatures?.socials?.length>0;(i||u)&&o.push(authConnector({chains:this.wagmiChains,options:{projectId:n.projectId,enableAuthLogger:n.enableAuthLogger}}));o.forEach(n=>{const a=this.wagmiConfig._internal.connectors.setup(n);this.wagmiConfig._internal.connectors.setState(n=>[...n,a])})}async handleAccountChanged({address:n,chainId:a,connector:o}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const i=await o.getProvider().catch(()=>{});this.emit("accountChanged",{address:n,chainId:a,connector:{id:o.id,name:IN.ConnectorNamesMap[o.id]??o.name,imageId:IN.ConnectorImageIds[o.id],type:IN.ConnectorTypesMap[o.type]??"EXTERNAL",info:o.id===Pv.CONNECTOR_ID.INJECTED?void 0:{rdns:o.id},provider:i,chain:this.namespace,chains:[]}})}async signMessage(n){try{const a=await signMessage(this.wagmiConfig,{message:n.message,account:n.address});return{signature:a}}catch(a){throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(n){const{chainId:a,address:o}=getAccount(this.wagmiConfig);const i={account:o,to:n.to,value:Number.isNaN(Number(n.value))?BigInt(0):BigInt(n.value),gas:n.gas?BigInt(n.gas):void 0,gasPrice:n.gasPrice?BigInt(n.gasPrice):void 0,data:n.data,chainId:a,type:"legacy",parameters:["nonce"]};await prepareTransactionRequest(this.wagmiConfig,i);const u=await sendTransaction(this.wagmiConfig,i);await waitForTransactionReceipt(this.wagmiConfig,{hash:u,timeout:25e3});return{hash:u}}async writeContract(n){const{caipNetwork:a,...o}=n;const i=Number(Ov.caipNetworkIdToNumber(a.caipNetworkId));const u=await writeContract(this.wagmiConfig,{chain:this.wagmiChains?.[i],chainId:i,address:o.tokenAddress,account:o.fromAddress,abi:o.abi,functionName:o.method,args:o.args,__mode:"prepared"});return{hash:u}}async estimateGas(n){try{const a=await estimateGas(this.wagmiConfig,{account:n.address,to:n.to,data:n.data,type:"legacy"});return{gas:a}}catch(a){throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(n){return parseUnits$2(n.value,n.decimals)}formatUnits(n){return formatUnits$1(n.value,n.decimals)}async addWagmiConnector(n,a){if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(n.type===Pv.CONNECTOR_ID.INJECTED&&!1===a.enableEIP6963)return;if(n.id===Pv.CONNECTOR_ID.AUTH||n.id===Pv.CONNECTOR_ID.WALLET_CONNECT)return;const o=await n.getProvider().catch(()=>{});this.addConnector({id:n.id,explorerId:IN.ConnectorExplorerIds[n.id],imageUrl:a?.connectorImages?.[n.id]??n.icon,name:IN.ConnectorNamesMap[n.id]??n.name,imageId:IN.ConnectorImageIds[n.id],type:IN.ConnectorTypesMap[n.type]??"EXTERNAL",info:n.id===Pv.CONNECTOR_ID.INJECTED?void 0:{rdns:n.id},provider:o,chain:this.namespace,chains:[]})}async syncConnectors(n,a){watchConnectors(this.wagmiConfig,{onChange:a=>{a.forEach(a=>this.addWagmiConnector(a,n))}});this.addWagmiConnectors(n,a);await Promise.all(this.wagmiConfig.connectors.map(a=>this.addWagmiConnector(a,n)));this.addThirdPartyConnectors(n)}async syncConnections(){return Promise.resolve()}async syncConnection(n){const{id:a,chainId:o}=n;const i=getConnections(this.wagmiConfig);const u=i.find(n=>n.connector.id===a);const d=this.getWagmiConnector(a);const m=await(d?.getProvider());const g=iw.isSafeApp();if(g&&a===Pv.CONNECTOR_ID.SAFE&&!u?.accounts.length){const n=this.getWagmiConnector("safe");if(n){const a=await connect(this.wagmiConfig,{connector:n,chainId:Number(o)});const i=await n.getProvider();return{chainId:Number(o),address:a.accounts[0],provider:i,type:u?.connector.type?.toUpperCase(),id:u?.connector.id}}}return{chainId:Number(u?.chainId),address:u?.accounts[0],provider:m,type:u?.connector.type?.toUpperCase(),id:u?.connector.id}}async connectWalletConnect(n){const a=this.getWalletConnectConnector();await a.authenticate();const o=this.getWagmiConnector("walletConnect");if(!o)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const i=await connect(this.wagmiConfig,{connector:o,chainId:n?Number(n):void 0});i.chainId!==Number(n)&&await switchChain(this.wagmiConfig,{chainId:i.chainId});return{clientId:await a.provider.client.core.crypto.getClientId()}}async connect(n){const{id:a,address:o,provider:i,type:u,info:d,chainId:m,socialUri:g}=n;const y=this.getWagmiConnector(a);if(!y)throw new Error("connectionControllerClient:connectExternal - connector is undefined");i&&d&&y.id===Pv.CONNECTOR_ID.EIP6963&&y.setEip6963Wallet?.({provider:i,info:d});const v=this.wagmiConfig.state?.connections?.get(y.uid);if(v){await(this.wagmiConfig.storage?.setItem("recentConnectorId",y.id));const n=[...v.accounts].sort((n,a)=>PN.isLowerCaseMatch(n,o)?-1:PN.isLowerCaseMatch(a,o)?1:0);this.wagmiConfig?.setState(a=>({...a,connections:new Map(a.connections).set(y.uid,{accounts:n,chainId:v.chainId,connector:v.connector}),current:y.uid,status:"connected"}));return{address:n[0],chainId:v.chainId,provider:i,type:u,id:a}}const x=await connect(this.wagmiConfig,{connector:y,chainId:m?Number(m):void 0,socialUri:g});return{address:x.accounts[0],chainId:x.chainId,provider:i,type:u,id:a}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(n=>({accounts:n.accounts.map(n=>({address:n})),connectorId:n.connector.id}))}async reconnect(n){const{id:a}=n;const o=this.getWagmiConnector(a);if(!o)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await reconnect(this.wagmiConfig,{connectors:[o]})}async getBalance(n){const a=n.address;const o=this.getCaipNetworks().find(a=>a.id===n.chainId);if(!a)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(o&&this.wagmiConfig){const a=`${o.caipNetworkId}:${n.address}`;const i=this.balancePromises[a];if(i)return i;const u=ow.getNativeBalanceCacheForCaipAddress(a);if(u)return{balance:u.balance,symbol:u.symbol};this.balancePromises[a]=new Promise(async i=>{try{const u=Number(n.chainId);const d=await getBalance(this.wagmiConfig,{address:n.address,chainId:u,token:n.tokens?.[o.caipNetworkId]?.address});ow.updateNativeBalanceCache({caipAddress:a,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()});i({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u);i({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[a]});return this.balancePromises[a]||{balance:"0.00",symbol:"ETH"}}return{balance:"",symbol:""}}getWalletConnectProvider(){return this.getWagmiConnector("walletConnect")?.provider}async disconnect(n){if(n.id){const a=this.getWagmiConnector(n.id);const o=getConnections(this.wagmiConfig);const i=o.find(a=>PN.isLowerCaseMatch(a.connector.id,n.id));await disconnect(this.wagmiConfig,{connector:a});!1===dw.state.enableReconnect&&this.deleteConnection(n.id);return i?{connections:[{accounts:i.accounts.map(n=>({address:n})),connectorId:i.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const n=getConnections(this.wagmiConfig);const a=await Promise.allSettled(n.map(async n=>{const a=this.getWagmiConnector(n.connector.id);a&&await disconnect(this.wagmiConfig,{connector:a});return n}));this.wagmiConfig.state.connections.clear();return{connections:a.filter(n=>"fulfilled"===n.status).map(({value:n})=>({accounts:n.accounts.map(n=>({address:n})),connectorId:n.connector.id}))}}async switchNetwork(n){const{caipNetwork:a}=n;const o=this.wagmiConfig.chains.find(n=>n.id.toString()===a.id.toString());await switchChain(this.wagmiConfig,{chainId:a.id,addEthereumChainParameter:{chainName:o?.name??a.name,nativeCurrency:o?.nativeCurrency??a.nativeCurrency,rpcUrls:[a.rpcUrls?.chainDefault?.http?.[0]??o?.rpcUrls?.default?.http?.[0]??""],blockExplorerUrls:[o?.blockExplorers?.default?.url??a.blockExplorers?.default?.url??""]}});await super.switchNetwork(n)}async getCapabilities(n){if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const a=getConnections(this.wagmiConfig);const o=a[0];const i=o?this.getWagmiConnector(o.connector.id):null;if(!i)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const u=await i.getProvider();if(!u)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");return await u.request({method:"wallet_getCapabilities",params:[n]})}async grantPermissions(n){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const a=getConnections(this.wagmiConfig);const o=a[0];const i=o?this.getWagmiConnector(o.connector.id):null;if(!i)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const u=await i.getProvider();if(!u)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return u.request({method:"wallet_grantPermissions",params:n})}async revokePermissions(n){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const a=getConnections(this.wagmiConfig);const o=a[0];const i=o?this.getWagmiConnector(o.connector.id):null;if(!i)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const u=await i.getProvider();if(!u)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return u.request({method:"wallet_revokePermissions",params:n})}async walletGetAssets(n){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const a=getConnections(this.wagmiConfig);const o=a[0];const i=o?this.getWagmiConnector(o.connector.id):null;if(!i)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const u=await i.getProvider();if(!u)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return u.request({method:"wallet_getAssets",params:[n]})}setAuthProvider(n){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:Pv.CONNECTOR_ID.AUTH,type:"AUTH",name:Pv.CONNECTOR_NAMES.AUTH,provider:n,imageId:IN.ConnectorImageIds[Pv.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(n){n.on("connect",()=>{const n=getConnections(this.wagmiConfig);const a=this.getWagmiConnector("walletConnect");if(a&&!n.find(n=>n.connector.id===a.id)){if("eip155"===jx.state.activeChain)return;reconnect(this.wagmiConfig,{connectors:[a]})}});this.addConnector(new ZA({provider:n,caipNetworks:this.getCaipNetworks(),namespace:"eip155"}));return Promise.resolve()}}const r_=new n_({networks:iv.chains,projectId:iv.projectId});const s_=createConfig({chains:iv.chains,connectors:r_.connectors,transports:r_.transports});const a_=new Uc;const ReownProvider=({children:n})=>{const[a,o]=ot.useState(!1);const[i,u]=ot.useState(!0);ot.useEffect(()=>{const initializeProvider=async()=>{try{await new Promise(n=>setTimeout(n,1e3));const n=window.ethereum?.isMetaMask;const a=window.ethereum?.isWalletConnect;const i=window.ethereum?.isCoinbaseWallet;const u=window.ethereum?.isNightlyWallet;const d=window.ethereum?.isBackpack;const m=window.ethereum?.isEVMAsk;const g=window.ethereum?.isReown;console.log("ReownProvider: Wallet detection:",{hasMetaMask:n,hasWalletConnect:a,hasCoinbaseWallet:i,hasNightlyWallet:u,hasBackpack:d,hasEVMAsk:m,hasReown:g});if(n||a||i||u||d||m){console.log("ReownProvider: Other wallet detected, but still initializing Reown as fallback");o(!0)}else{console.log("ReownProvider: No other wallets detected, initializing Reown as primary");o(!0)}}catch(n){console.error("ReownProvider: Error during initialization:",n);o(!1)}finally{u(!1)}};initializeProvider()},[]);return i?at.jsx("div",{className:"min-h-screen bg-black"}):at.jsx(WagmiProvider,{config:s_,children:at.jsx(QueryClientProvider,{client:a_,children:n})})};const o_="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%20104%2074'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;'%3e%3cg%20transform='matrix(1,0,0,1,-62.9053,-11.72)'%3e%3cg%20transform='matrix(0.0278661,0,0,0.0278661,60.3688,-0.633193)'%3e%3cg%20transform='matrix(1.08496,0,0,1.0179,-170.176,2.41367)'%3e%3crect%20x='1560.3'%20y='433.14'%20width='386.277'%20height='1265.57'%20style='fill:url(%23_Linear1);'/%3e%3c/g%3e%3cpath%20d='M3363.03,2953.95C3363.03,2953.95%202976.77,3177.24%202513.2,3001.78C2256.74,2904.7%202027.59,2543.53%202002.52,2505.16C2002.52,2505.16%202255.22,2189.28%202259.54,2193.44C2292.02,2224.76%202448.89,2465.2%202554.79,2537.07C2665.28,2612.07%202779.6,2683.18%202970.3,2652.7C3217.62,2613.18%203363.39,2371.41%203363.39,2371.41'%20style='fill:url(%23_Linear2);'/%3e%3cpath%20d='M3421.17,2470.92C3422.52,2447.75%203443.22,2074.2%203390.09,1942.48C3356.26,1858.59%203268.81,1711.19%203107.17,1645.27C2955.45,1583.38%202779.15,1587.81%202633.79,1670.86C2561.72,1712.03%202397.69,1903.9%202359.97,1958.81C2323.5,2014.7%201972.12,2474.32%201972.12,2474.32C1972.12,2474.32%201792.59,2743.35%201467.02,2979.07C1231.3,3149.74%20857.758,3073.22%20760.787,3048.45C470.205,2974.23%20226.48,2763.69%20134.941,2474.32C98.86,2360.26%2086.861,2240%2092.254,2120.78C97.769,1998.84%20126.508,1879.35%20170.93,1765.41C353.602,1296.86%20821.557,1121.11%201286.23,1228.41C1345.46,1242.09%201587.1,1310.11%201695.77,1400.6C1742.46,1439.48%201890.47,1694.12%201941.78,1731.52C1868.72,1829.34%201662.26,2088.89%201656.22,2080.66C1560.18,1949.87%201466.29,1825.54%201396.67,1752.54C1364.49,1718.8%201326.78,1688.4%201286.07,1665.59C1241.7,1640.73%201192.39,1626.32%201142.77,1616.25C1014.63,1590.25%20875.39,1602.15%20760.787,1668.48C702.968,1701.95%20654.83,1749.35%20615.662,1803.22C515.695,1940.71%20479.125,2123.88%20529.362,2287.5C602.031,2524.17%20860.168,2697.81%201107.83,2651.96C1222.22,2630.78%201318.25,2565.39%201407.08,2493.48C1463.76,2447.6%201853.67,1933.92%201911.86,1861.91C1911.86,1861.91%202075.85,1598.88%202335.58,1385.29C2468.96,1275.61%202633.57,1219.77%202746.42,1203.44C2983.45,1169.14%203319.16,1197.95%203556.91,1456.64C3846.57,1771.78%203807.86,1963.54%203809.45,2200.65C3809.7,2236.87%203809.22,2272.06%203807.84,2306.18L3807.84,3095.05L3421.11,3095.05L3421.11,2472.06L3421.17,2470.92Z'%20style='fill:url(%23_Linear3);'/%3e%3c/g%3e%3c/g%3e%3cdefs%3e%3clinearGradient%20id='_Linear1'%20x1='0'%20y1='0'%20x2='1'%20y2='0'%20gradientUnits='userSpaceOnUse'%20gradientTransform='matrix(3719.36,0,0,2651.74,91.0235,1769.18)'%3e%3cstop%20offset='0'%20style='stop-color:rgb(66,201,238);stop-opacity:1'/%3e%3cstop%20offset='0.45'%20style='stop-color:rgb(88,37,246);stop-opacity:1'/%3e%3cstop%20offset='1'%20style='stop-color:rgb(229,16,138);stop-opacity:1'/%3e%3c/linearGradient%3e%3clinearGradient%20id='_Linear2'%20x1='0'%20y1='0'%20x2='1'%20y2='0'%20gradientUnits='userSpaceOnUse'%20gradientTransform='matrix(3719.36,0,0,2651.74,91.0235,1769.18)'%3e%3cstop%20offset='0'%20style='stop-color:rgb(66,201,238);stop-opacity:1'/%3e%3cstop%20offset='0.45'%20style='stop-color:rgb(88,37,246);stop-opacity:1'/%3e%3cstop%20offset='1'%20style='stop-color:rgb(229,16,138);stop-opacity:1'/%3e%3c/linearGradient%3e%3clinearGradient%20id='_Linear3'%20x1='0'%20y1='0'%20x2='1'%20y2='0'%20gradientUnits='userSpaceOnUse'%20gradientTransform='matrix(3719.36,0,0,2651.74,91.0235,1769.18)'%3e%3cstop%20offset='0'%20style='stop-color:rgb(66,201,238);stop-opacity:1'/%3e%3cstop%20offset='0.45'%20style='stop-color:rgb(88,37,246);stop-opacity:1'/%3e%3cstop%20offset='1'%20style='stop-color:rgb(229,16,138);stop-opacity:1'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e";const i_="data:image/svg+xml,%3csvg%20width='25'%20height='24'%20viewBox='0%200%2025%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12.0224%203.58728C12.0281%203.35631%2012.3279%203.27146%2012.4561%203.46284C14.0002%205.76973%2016.6294%207.28848%2019.6139%207.28848C20.7329%207.28848%2021.8019%207.07448%2022.7823%206.68607C20.8309%202.74069%2016.7745%200.0227692%2012.0809%200.000143355C5.4924%20-0.0319099%200.0747474%205.31532%200.0228993%2011.9041C0.0125297%2013.2249%200.216151%2014.4976%200.600769%2015.6883C3.43639%2015.4536%206.2079%2014.2525%208.37704%2012.0823C10.73%209.72924%2011.9451%206.67004%2012.0224%203.58728Z'%20fill='url(%23paint0_linear_728_4516)'/%3e%3cpath%20d='M11.9651%2023.9999C18.5526%2024.031%2023.9694%2018.6866%2024.0222%2012.0987C24.0325%2010.7779%2023.8289%209.50616%2023.4452%208.31548C20.6087%208.55022%2017.8381%209.75127%2015.668%2011.9215C13.315%2014.2745%2012.1008%2017.3337%2012.0235%2020.4165C12.0179%2020.6475%2011.7181%2020.7323%2011.5899%2020.5409C10.0458%2018.2341%207.41658%2016.7153%204.43201%2016.7153C3.31398%2016.7153%202.24496%2016.9284%201.26456%2017.3168C3.21688%2021.2603%207.27235%2023.9772%2011.9651%2023.9999Z'%20fill='url(%23paint1_linear_728_4516)'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_728_4516'%20x1='22.7823'%20y1='-8.42108e-07'%20x2='9.57872'%20y2='18.4678'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%234B1BF9'/%3e%3cstop%20offset='1'%20stop-color='%233ECCEE'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_728_4516'%20x1='24.0225'%20y1='8.31547'%20x2='10.8228'%20y2='26.7809'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23F20A49'/%3e%3cstop%20offset='0.52'%20stop-color='%23C119E7'/%3e%3cstop%20offset='1'%20stop-color='%234675F3'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e";const c_="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%2038%2027'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;'%3e%3cg%20transform='matrix(1,0,0,1,-1694.3,-36.2585)'%3e%3cg%20transform='matrix(1,0,0,1,-40,-2.12025)'%3e%3cpath%20d='M1769.01,55.819L1764.32,55.819C1763.21,55.819%201762.31,54.916%201762.31,53.805L1762.31,49.777C1762.31,48.665%201763.21,47.763%201764.32,47.763L1769.01,47.763L1769.01,45.557C1769.01,42.116%201766.21,39.323%201762.77,39.323L1741.48,39.323C1738.04,39.323%201735.25,42.116%201735.25,45.557L1735.25,58.025C1735.25,61.465%201738.04,64.258%201741.48,64.258L1762.77,64.258C1766.21,64.258%201769.01,61.465%201769.01,58.025L1769.01,55.819Z'%20style='fill:none;stroke:white;stroke-width:1.89px;'/%3e%3cg%20transform='matrix(0.720727,0,0,1,492.88,0.767239)'%3e%3cpath%20d='M1773.61,49.01C1773.61,47.898%201772.36,46.996%201770.81,46.996L1763.74,46.996C1762.2,46.996%201760.95,47.898%201760.95,49.01L1760.95,53.038C1760.95,54.149%201762.2,55.052%201763.74,55.052L1770.81,55.052C1772.36,55.052%201773.61,54.149%201773.61,53.038L1773.61,49.01Z'%20style='fill:none;stroke:white;stroke-width:2.17px;'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const toCamelCase=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,a,o)=>o?o.toUpperCase():a.toLowerCase());const toPascalCase=n=>{const a=toCamelCase(n);return a.charAt(0).toUpperCase()+a.slice(1)};const mergeClasses=(...n)=>n.filter((n,a,o)=>Boolean(n)&&""!==n.trim()&&o.indexOf(n)===a).join(" ").trim();const hasA11yProp=n=>{for(const a in n)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0};
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var l_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=ot.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:u="",children:d,iconNode:m,...g},y)=>ot.createElement("svg",{ref:y,...l_,width:a,height:a,stroke:n,strokeWidth:i?24*Number(o)/Number(a):o,className:mergeClasses("lucide",u),...!d&&!hasA11yProp(g)&&{"aria-hidden":"true"},...g},[...m.map(([n,a])=>ot.createElement(n,a)),...Array.isArray(d)?d:[d]]));
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(n,a)=>{const o=ot.forwardRef(({className:o,...i},u)=>ot.createElement(u_,{ref:u,iconNode:a,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(n))}`,`lucide-${n}`,o),...i}));o.displayName=toPascalCase(n);return o};
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]];const h_=createLucideIcon("activity",d_);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]];const p_=createLucideIcon("arrow-right",f_);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]];const g_=createLucideIcon("calendar",m_);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]];const b_=createLucideIcon("chart-column",y_);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]];const w_=createLucideIcon("check",v_);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]];const N_=createLucideIcon("chevron-down",x_);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]];const C_=createLucideIcon("chevron-left",k_);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]];const S_=createLucideIcon("chevron-right",E_);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]];const T_=createLucideIcon("circle-check-big",A_);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]];const I_=createLucideIcon("circle-help",j_);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]];const O_=createLucideIcon("circle-stop",P_);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]];const B_=createLucideIcon("circle-x",R_);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]];const z_=createLucideIcon("clock",M_);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]];const L_=createLucideIcon("cpu",F_);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]];const $_=createLucideIcon("dollar-sign",D_);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]];const W_=createLucideIcon("download",U_);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]];const q_=createLucideIcon("ellipsis",H_);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]];const V_=createLucideIcon("external-link",G_);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]];const Z_=createLucideIcon("eye",K_);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]];const J_=createLucideIcon("funnel",Y_);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]];const X_=createLucideIcon("globe",Q_);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]];const tT=createLucideIcon("grid-3x3",eT);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]];const rT=createLucideIcon("hard-drive",nT);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]];const aT=createLucideIcon("heart",sT);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]];const iT=createLucideIcon("image",oT);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]];const lT=createLucideIcon("list",cT);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]];const dT=createLucideIcon("loader-circle",uT);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]];const fT=createLucideIcon("menu",hT);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=[["path",{d:"M5 12h14",key:"1ays0h"}]];const mT=createLucideIcon("minus",pT);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]];const yT=createLucideIcon("move",gT);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]];const vT=createLucideIcon("package",bT);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]];const xT=createLucideIcon("party-popper",wT);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]];const kT=createLucideIcon("pause",NT);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]];const ET=createLucideIcon("play",CT);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]];const AT=createLucideIcon("plus",ST);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]];const TT=createLucideIcon("refresh-cw",_T);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]];const IT=createLucideIcon("rocket",jT);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]];const OT=createLucideIcon("rotate-cw",PT);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]];const BT=createLucideIcon("search",RT);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]];const zT=createLucideIcon("settings",MT);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]];const LT=createLucideIcon("share-2",FT);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]];const $T=createLucideIcon("sparkles",DT);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]];const WT=createLucideIcon("trash-2",UT);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]];const qT=createLucideIcon("trending-up",HT);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]];const VT=createLucideIcon("triangle-alert",GT);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]];const ZT=createLucideIcon("trophy",KT);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]];const JT=createLucideIcon("twitter",YT);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]];const XT=createLucideIcon("upload",QT);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]];const fj=createLucideIcon("users",ej);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]];const Nj=createLucideIcon("wifi",mj);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]];const Aj=createLucideIcon("x",Cj);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]];const Bj=createLucideIcon("zap",_j);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]];const $j=createLucideIcon("zoom-in",zj);
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]];const Kj=createLucideIcon("zoom-out",Gj);const LazyImage=({src:n,alt:a,className:o="",fallbackSrc:i="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjMzM0MTU1Ii8+CjxwYXRoIGQ9Ik0xMDAgNzBDMTE2LjU2OSA3MCAxMzAgODMuNDMxIDMwIDEwMEMxMzAgMTE2LjU2OSAxMTYuNTY5IDEzMCAxMDAgMTMwQzgzLjQzMSAxMzAgNzAgMTE2LjU2OSA3MCAxMEM3MCA4My40MzEgODMuNDMxIDcwIDEwMCA3MFoiIGZpbGw9IiM2QjcyODAiLz4KPC9zdmc+",placeholderSrc:u="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjMzM0MTU1Ii8+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iMjAiIGZpbGw9IiM2QjcyODAiLz4KPC9zdmc+",onLoad:d,onError:m,priority:g=!1,sizes:y="100vw",...v})=>{const[x,N]=ot.useState(u);const[k,E]=ot.useState("loading");const[S,A]=ot.useState(!1);const _=ot.useRef(null);const j=ot.useRef(null);const I=ot.useMemo(()=>({rootMargin:g?"0px":"100px",threshold:g?0:.1}),[g]);const O=ot.useMemo(()=>n&&n.includes("ipfs")&&!n.includes("data:")&&n.includes("gateway.lighthouse.storage")?n.replace(/\.(jpg|jpeg|png)$/i,".webp"):n,[n]);ot.useEffect(()=>{if(n){if(!g){j.current=new IntersectionObserver(n=>{n.forEach(n=>{if(n.isIntersecting){A(!0);j.current&&j.current.disconnect()}})},I);_.current&&j.current.observe(_.current);return()=>{j.current&&j.current.disconnect()}}A(!0)}else{N(i);E("error")}},[n,g,I]);ot.useEffect(()=>{if(!S||!n)return;const a=new Image;if(O!==n){const n=new Image;n.src=O}a.onload=()=>{N(n);E("loaded");d&&d()};a.onerror=()=>{if(O!==n){const a=new Image;a.onload=()=>{N(n);E("loaded");d&&d()};a.onerror=()=>{N(i);E("error");m&&m()};a.src=n}else{N(i);E("error");m&&m()}};a.src=O},[S,n,O,i,d,m]);return at.jsxs("div",{className:"relative overflow-hidden",children:[at.jsx("img",{ref:_,src:x,alt:a,className:`${o} ${"loading"===k?"animate-pulse blur-sm scale-105":""} ${"loaded"===k?"animate-fade-in":""}`,style:{transition:"all 0.3s ease-in-out",opacity:"loaded"===k?1:.8,filter:"loading"===k?"blur(4px)":"blur(0px)",transform:"loading"===k?"scale(1.05)":"scale(1)"},sizes:y,loading:g?"eager":"lazy",...v}),"loading"===k&&at.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 animate-pulse"})]})};const getNFTImageUrl=n=>{console.log("🔍 getNFTImageUrl called for NFT:",n.metadata?.name||n.id,n.collectionName);let a=n.image||n.image_url||n.media_url||"";if(a&&!a.startsWith("ipfs://")&&(a.startsWith("http://")||a.startsWith("https://"))){console.log("✅ Using pre-converted HTTP image URL:",a);return a}if(!a&&n.metadata){a=n.metadata.image||n.metadata.image_url||n.metadata.media_url||"";console.log("📋 Using metadata image:",a)}if(a&&a.startsWith("ipfs://")){const o=a.replace("ipfs://","");const i=n.collectionName?.toLowerCase().includes("somnia")||n.collectionName?.toLowerCase().includes("dreava")||n.collectionName?.toLowerCase().includes("dreava.art");if(i){a=`https://gateway.lighthouse.storage/ipfs/${o}`;console.log("🏭 Converting to Lighthouse gateway for collection:",n.collectionName)}else{a=`https://cloudflare-ipfs.com/ipfs/${o}`;console.log("🌐 Converting to Cloudflare gateway for external collection:",n.collectionName)}}console.log("✅ Final image URL:",a);return a};const getFallbackImage=n=>{window.allCollections&&console.log("🔍 Available collections in window.allCollections:",{total:window.allCollections.length,sample:window.allCollections.slice(0,3).map(n=>({name:n.name,nfts:n.nfts?.length||0,firstNFTImage:n.nfts?.[0]?.image}))});const a=window.allCollections?.find(a=>a.name===n.collectionName||a.name?.toLowerCase().includes(n.collectionName?.toLowerCase())||n.collectionName?.toLowerCase().includes(a.name?.toLowerCase()));if(a){console.log("🔍 Found collection for fallback:",{name:a.name,nfts:a.nfts?.length||0,firstNFT:a.nfts?.[0]});if(a.nfts&&a.nfts.length>0){const n=a.nfts[0];const o=n.image||n.image_url||n.media_url;if(o&&!o.startsWith("ipfs://")){console.log("🖼️ Using first NFT image from collection as fallback:",a.name,o);return o}if(o&&o.startsWith("ipfs://")){const n=o.replace("ipfs://","");const i=`https://gateway.lighthouse.storage/ipfs/${n}`;console.log("🖼️ Converting IPFS NFT image for fallback:",a.name,i);return i}}const n=a.cover||a.banner||a.metadataBanner;if(n){console.log("🖼️ Using collection fallback image:",a.name,n);return n}}console.log("⚠️ No fallback image found, using placeholder");return null};const SearchResults=()=>{const{searchResults:n,showSearchResults:a,hideSearchResults:o,searchTerm:i}=useSearch();const u=useNavigate();const d=ot.useCallback(n=>{o();u(`/launchpad/collection/${n.address}`);console.log("Collection clicked:",n)},[o,u]);const m=ot.useCallback(n=>{o();const a=new URLSearchParams;n.id&&a.set("nftId",n.id);n.token?.address&&a.set("contract",n.token.address);n.metadata?.name&&a.set("nftName",n.metadata.name);n.collectionName&&a.set("collection",n.collectionName);u(`/my-nfts?${a.toString()}`);console.log("NFT clicked with search params:",n,a.toString())},[o,u]);const g=ot.useCallback(()=>{o();u("/")},[o,u]);const y=ot.useCallback(()=>{o();u("/my-nfts")},[o,u]);const v=ot.useMemo(()=>n.collections.length+n.nfts.length,[n.collections.length,n.nfts.length]);const x=ot.useMemo(()=>n.collections.slice(0,3),[n.collections]);const N=ot.useMemo(()=>n.nfts.slice(0,3),[n.nfts]);return a&&i?at.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-zinc-900/95 backdrop-blur-sm border border-zinc-700/30 rounded-xl shadow-xl z-50 max-h-96 overflow-y-auto",children:n.isLoading?at.jsxs("div",{className:"p-6 text-center",children:[at.jsx(dT,{className:"w-6 h-6 animate-spin mx-auto text-zinc-400 mb-2"}),at.jsx("p",{className:"text-zinc-400",children:"Searching..."})]}):0===v?at.jsxs("div",{className:"p-6 text-center",children:[at.jsx(vT,{className:"w-8 h-8 mx-auto text-zinc-400 mb-2"}),at.jsxs("p",{className:"text-zinc-400",children:['No results found for "',i,'"']})]}):at.jsxs("div",{className:"p-4",children:[n.collections.length>0&&at.jsxs("div",{className:"mb-4",children:[at.jsxs("div",{className:"flex items-center justify-between mb-3",children:[at.jsxs("h3",{className:"text-sm font-semibold text-zinc-300 flex items-center gap-2",children:[at.jsx(vT,{className:"w-4 h-4"}),"Collections (",n.collections.length,")"]}),at.jsx("button",{onClick:g,className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:"View all"})]}),at.jsx("div",{className:"space-y-2",children:x.map((n,a)=>{0===a&&console.log("🔍 First collection in search results:",{name:n.name,cover:n.cover,banner:n.banner,metadataBanner:n.metadataBanner,nfts:n.nfts,nftsCount:n.nfts?.length||0,firstNFTImage:n.nfts?.[0]?.image,firstNFT:n.nfts?.[0],fullCollection:n});return at.jsxs("div",{onClick:()=>d(n),className:"flex items-center gap-3 p-2 rounded-lg hover:bg-zinc-800/50 cursor-pointer transition-colors",children:[at.jsxs("div",{className:"w-10 h-10 rounded-lg bg-zinc-800 flex items-center justify-center flex-shrink-0 overflow-hidden",children:[(()=>{const o=n.cover||n.banner||n.metadataBanner||n.metadata?.image||n.metadata?.banner;const i=o;return o?at.jsx(LazyImage,{src:i,alt:n.name,className:"w-full h-full object-cover",priority:a<2,sizes:"40px",onError:n=>{console.warn("⚠️ Collection image failed to load:",n.target.src);n.target.style.display="none";n.target.nextSibling.style.display="flex"}}):null})(),(n.cover||n.banner||n.metadataBanner||n.nfts&&n.nfts.length>0,null),!n.cover&&!n.banner&&!n.metadataBanner&&n.nfts&&n.nfts.length>0?at.jsx(LazyImage,{src:n.nfts[0].image,alt:`${n.name} NFT`,className:"w-full h-full object-cover",priority:a<2,sizes:"40px",onError:n=>{console.warn("⚠️ Collection NFT image failed to load:",n.target.src);n.target.style.display="none";n.target.nextSibling.style.display="flex"}}):null,at.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{display:n.cover||n.banner||n.metadataBanner||n.nfts&&n.nfts.length>0?"none":"flex"},children:at.jsx(iT,{className:"w-5 h-5 text-zinc-400"})})]}),at.jsxs("div",{className:"flex-1 min-w-0",children:[at.jsx("h4",{className:"text-sm font-medium text-white truncate",children:n.name}),at.jsx("p",{className:"text-xs text-zinc-400 truncate",children:n.description||"No description"})]}),at.jsx(p_,{className:"w-4 h-4 text-zinc-400"})]},`collection-${a}`)})})]}),n.nfts.length>0&&at.jsxs("div",{children:[at.jsxs("div",{className:"flex items-center justify-between mb-3",children:[at.jsxs("h3",{className:"text-sm font-semibold text-zinc-300 flex items-center gap-2",children:[at.jsx(iT,{className:"w-4 h-4"}),"My NFTs (",n.nfts.length,")"]}),at.jsx("button",{onClick:y,className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:"View all"})]}),at.jsx("div",{className:"space-y-2",children:N.map((n,a)=>{0===a&&console.log("🔍 First NFT in search results:",{id:n.id,directImage:n.image,metadataImage:n.metadata?.image,contractAddress:n.contractAddress||n.token?.address,isFactoryNFT:n.isFactoryNFT,collectionName:n.collectionName,fullNft:n});let o=getNFTImageUrl(n);if(!o){o=getFallbackImage(n);console.log("🔄 Using fallback image for NFT:",n.metadata?.name||n.id)}if(!o&&n.collectionName){const a=window.allCollections?.find(a=>a.name===n.collectionName||a.name?.toLowerCase().includes(n.collectionName?.toLowerCase())||n.collectionName?.toLowerCase().includes(a.name?.toLowerCase()));if(a&&a.nfts&&a.nfts.length>0){const n=a.nfts[0];const i=n.image||n.image_url||n.media_url;if(i){if(i.startsWith("ipfs://")){const n=i.replace("ipfs://","");o=`https://gateway.lighthouse.storage/ipfs/${n}`}else o=i;console.log("🖼️ Using collection NFT image as fallback:",a.name,o)}}}return at.jsxs("div",{onClick:()=>m(n),className:"flex items-center gap-3 p-2 rounded-lg hover:bg-zinc-800/50 cursor-pointer transition-colors",children:[at.jsxs("div",{className:"w-10 h-10 rounded-lg bg-zinc-800 flex items-center justify-center flex-shrink-0 overflow-hidden",children:[o?at.jsx(LazyImage,{src:o,alt:n.metadata?.name||`NFT #${n.id}`,className:"w-full h-full object-cover",priority:a<2,sizes:"40px",onError:a=>{console.warn("⚠️ NFT image failed to load:",a.target.src);console.log("🔍 NFT data for debugging:",{nft:n.id,directImage:n.image,metadataImage:n.metadata?.image,resolvedUrl:o});const i=getFallbackImage(n);if(i&&i!==o){console.log("🔄 Retrying with fallback image:",i);a.target.src=i}else{a.target.style.display="none";a.target.nextSibling.style.display="flex"}}}):null,at.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{display:o?"none":"flex"},children:at.jsx("img",{src:o_,alt:"Logo",className:"w-5 h-5 opacity-50"})})]}),at.jsxs("div",{className:"flex-1 min-w-0",children:[at.jsx("h4",{className:"text-sm font-medium text-white truncate",children:n.metadata?.name||`NFT #${n.id}`}),at.jsx("p",{className:"text-xs text-zinc-400 truncate",children:n.collectionName})]}),at.jsx(p_,{className:"w-4 h-4 text-zinc-400"})]},`nft-${n.token?.address}-${n.id}-${a}`)})})]}),at.jsx("div",{className:"mt-4 pt-3 border-t border-zinc-700/30",children:at.jsxs("p",{className:"text-xs text-zinc-500 text-center",children:["Found ",v," result",1!==v?"s":"",' for "',i,'"']})})]})}):null};const ConnectWalletModal=({isOpen:n,onClose:a})=>{const{connect:o,disconnect:i,isConnected:u,address:d,connectors:m}=useReownWallet();const[g,y]=ot.useState([]);const[v,x]=ot.useState(!1);if(!n)return null;ot.useEffect(()=>{if(n){document.body.classList.add("modal-open");const n=document.querySelector(".wallet-modal-overlay");if(n){n.style.position="fixed";n.style.top="0";n.style.left="0";n.style.right="0";n.style.bottom="0";n.style.display="flex";n.style.alignItems="center";n.style.justifyContent="center";n.style.zIndex="999999";n.style.width="100vw";n.style.height="100vh"}}else document.body.classList.remove("modal-open");return()=>{document.body.classList.remove("modal-open")}},[n]);ot.useEffect(()=>{try{console.log("[ConnectModal] available connectors:",m?.map(n=>({id:n.id,name:n.name})))}catch{}const n=N.map(n=>({...n,installed:"metamask"===n.id?window.ethereum&&window.ethereum.isMetaMask:"rabby"===n.id?window.ethereum&&window.ethereum.isRabby:"keplr"===n.id?!!window.keplr:"subwallet"===n.id?!(!window.injectedWeb3||!window.injectedWeb3["polkadot-js"]):"pontem"===n.id?window.ethereum&&window.ethereum.isPontem:"nightly"===n.id?window.ethereum&&window.ethereum.isNightly:"okx"!==n.id||window.ethereum&&window.ethereum.isOkxWallet}));y(n)},[]);const handleConnect=async n=>{if(!v)try{x(!0);console.log("Attempting to connect with wallet:",n);const i=m?.find(a=>a.id.toLowerCase().includes(n));const u=m?.find(a=>(a.name||"").toLowerCase().includes(n));const d=i||u||m?.[0];const g=await o({connectorId:d?.id,connectorName:d?.name});if(!g?.success)throw g?.error||new Error("Failed to connect");a()}catch(i){console.error("Failed to connect:",i);alert(`Connection failed: ${i.message}`)}finally{x(!1)}};const handleDisconnect=async()=>{try{await i();a()}catch(n){console.error("Failed to disconnect:",n)}};const N=[{id:"metamask",name:"MetaMask",icon:"🦊",description:"Connect using MetaMask",installed:!0},{id:"walletconnect",name:"WalletConnect",icon:"🔗",description:"Connect using WalletConnect",installed:!0},{id:"rabby",name:"Rabby Wallet",icon:"🐰",description:"Connect using Rabby Wallet",installed:!0},{id:"keplr",name:"Keplr",icon:"🔵",description:"Connect using Keplr",installed:window.keplr},{id:"subwallet",name:"SubWallet",icon:"🟢",description:"Connect using SubWallet",installed:window.injectedWeb3&&window.injectedWeb3["polkadot-js"]},{id:"pontem",name:"Pontem Wallet",icon:"🟣",description:"Connect using Pontem Wallet",installed:window.ethereum&&window.ethereum.isPontem},{id:"nightly",name:"Nightly",icon:"🌙",description:"Connect using Nightly",installed:window.ethereum&&window.ethereum.isNightly},{id:"okx",name:"OKX Wallet",icon:"⚫",description:"Connect using OKX Wallet",installed:window.ethereum&&window.ethereum.isOkxWallet}];return xb.createPortal(at.jsx("div",{className:"wallet-modal-overlay fixed inset-0 bg-black/60 backdrop-blur-md p-4 z-[100000]",onClick:a,children:at.jsxs("div",{className:"wallet-modal-content bg-zinc-900 border border-zinc-800 rounded-2xl w-full max-w-md max-h-[90vh] overflow-hidden shadow-2xl mx-auto my-auto",onClick:n=>n.stopPropagation(),children:[at.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-zinc-800",children:[at.jsxs("div",{className:"flex items-center gap-3",children:[at.jsx("img",{src:o_,alt:"Dreava",className:"w-8 h-8"}),at.jsx("h2",{className:"text-xl font-bold text-white",children:"Connect"})]}),at.jsx("button",{onClick:a,className:"text-zinc-400 hover:text-white transition-colors duration-200",children:at.jsx(Aj,{size:24})})]}),at.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:u?at.jsxs("div",{className:"space-y-4",children:[at.jsxs("div",{className:"bg-zinc-800 rounded-xl p-4",children:[at.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[at.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),at.jsx("span",{className:"text-green-400 font-medium",children:"Connected"})]}),at.jsx("p",{className:"text-zinc-300 text-sm font-mono break-all",children:d})]}),at.jsx("button",{onClick:handleDisconnect,className:"w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-4 rounded-xl transition-colors duration-200",children:"Disconnect Wallet"})]}):at.jsx("div",{className:"space-y-3",children:g.map(n=>at.jsxs("button",{onClick:()=>handleConnect(n.id),disabled:!n.installed||v,className:"w-full flex items-center justify-between p-4 rounded-xl border transition-all duration-200 "+(n.installed?"bg-zinc-800 border-zinc-700 hover:bg-zinc-700 hover:border-zinc-600 cursor-pointer":"bg-zinc-800/50 border-zinc-700/50 cursor-not-allowed opacity-50"),children:[at.jsxs("div",{className:"flex items-center gap-3",children:[at.jsx("span",{className:"text-2xl",children:n.icon}),at.jsxs("div",{className:"text-left",children:[at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsx("span",{className:"font-medium text-white",children:n.name}),n.installed&&at.jsx("span",{className:"bg-green-500/20 text-green-400 text-xs px-2 py-1 rounded-full",children:"installed"})]}),at.jsx("p",{className:"text-zinc-400 text-sm",children:n.description})]})]}),v&&at.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})]},n.id))})}),at.jsx("div",{className:"p-6 border-t border-zinc-800 bg-zinc-900/50",children:at.jsxs("p",{className:"text-center text-zinc-400 text-sm",children:["By connecting your wallet, you agree to our"," ",at.jsx("a",{href:"/terms",className:"text-blue-400 hover:text-blue-300 underline",children:"Terms of Service"})," ","and"," ",at.jsx("a",{href:"/privacy",className:"text-blue-400 hover:text-blue-300 underline",children:"Privacy Policy"})]})})]})}),document.body)};const ReownConnector=({isMobile:n=!1})=>{const[a,o]=ot.useState(!1);const[i,u]=ot.useState(!1);const d=ot.useRef();const{disconnect:m,isConnected:g,address:y,isLoading:v}=useReownWallet();ot.useEffect(()=>{const handleClickOutside=n=>{d.current&&!d.current.contains(n.target)&&o(!1)};document.addEventListener("mousedown",handleClickOutside);return()=>document.removeEventListener("mousedown",handleClickOutside)},[]);const handleWalletClick=()=>{g?o(n=>!n):u(!0)};const handleDisconnect=async()=>{try{await m();o(!1)}catch(n){console.error("Disconnect failed:",n)}};const formatAddress=n=>n?`${n.slice(0,6)}...${n.slice(-4)}`:"";return at.jsxs(at.Fragment,{children:[at.jsxs("button",{onClick:handleWalletClick,disabled:v,"data-wallet-connect":!0,className:"flex items-center gap-2 rounded-xl text-white font-semibold shadow hover:shadow-lg hover:scale-105 transition-all duration-200 bg-gradient-to-r from-blue-500 to-pink-500 "+(n?"px-3 py-2":"px-4 py-2"),children:[at.jsx("img",{src:c_,alt:"Wallet",className:"w-5 h-5"}),g?formatAddress(y):"Connect"]}),a&&xb.createPortal(at.jsx("div",{ref:d,className:"fixed inset-0 z-[100000]",onClick:()=>o(!1),children:at.jsx("div",{className:"absolute right-3 top-16 w-64 bg-zinc-900/95 backdrop-blur-xl border border-zinc-800/50 rounded-xl shadow-2xl animate-fadeIn",onClick:n=>n.stopPropagation(),children:at.jsxs("div",{className:"pt-2",children:[at.jsx(sv,{to:"/my-nfts",onClick:()=>o(!1),className:"block px-4 py-3 hover:bg-white/5 text-white transition-colors duration-200",children:"My NFTs"}),at.jsx("button",{onClick:handleDisconnect,className:"w-full text-left px-4 py-3 text-red-400 hover:bg-red-400/10 transition-colors duration-200",children:"Disconnect"})]})})}),document.body),i&&at.jsx("div",{className:"relative z-[999999]",children:at.jsx(ConnectWalletModal,{isOpen:i,onClose:()=>u(!1)})})]})};const Jj=50312;const Xj="0xc488";const eI={chainId:Xj,chainName:"Somnia Testnet",rpcUrls:["https://dream-rpc.somnia.network/"],nativeCurrency:{name:"Somnia Test Token",symbol:"STT",decimals:18},blockExplorerUrls:["https://shannon-explorer.somnia.network/"]};async function ensureSomniaNetwork(){console.log("[Network] ensureSomniaNetwork invoked");if("undefined"==typeof window||!window.ethereum)throw new Error("Wallet not detected");try{if("function"==typeof window.ethereum.request){console.log("[Network] requesting permissions: wallet_requestPermissions");await window.ethereum.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]})}}catch{}const n=await window.ethereum.request({method:"eth_chainId"});console.log("[Network] current chainId:",n);if(n===Xj){console.log("[Network] already on Somnia");return!0}try{console.log("[Network] trying wallet_switchEthereumChain to",Xj);await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:Xj}]});console.log("[Network] switchEthereumChain success");return!0}catch(a){console.warn("[Network] switchEthereumChain error:",a?.code,a?.message||a);if(a&&(4902===a.code||String(a.message||"").toLowerCase().includes("unrecognized"))){console.log("[Network] trying wallet_addEthereumChain");await window.ethereum.request({method:"wallet_addEthereumChain",params:[eI]});console.log("[Network] addEthereumChain success");return!0}throw a}}const Header=()=>{const n=useNavigate();const a=useLocation();const{searchTerm:o,filters:i,updateSearch:u,updateFilters:d,clearSearch:m,hideSearchResults:g}=useSearch();const[y,v]=ot.useState(!1);const[x,N]=ot.useState(!1);const{isConnected:k,chainId:E,switchNetwork:S,balance:A}=useReownWallet();ot.useEffect(()=>{k||console.warn("❌ Wallet not connected")},[k]);ot.useEffect(()=>{const enforceNetwork=async()=>{if(k&&E!==Jj)try{console.log("[Header] enforcing network. current chainId:",E);await S(Jj)}catch(n){console.warn("[Header] Network switch failed (wagmi):",n?.message||n)}};enforceNetwork()},[k,E,S]);ot.useEffect(()=>{const handleClickOutside=n=>{const a=n.target.closest(".search-container");a||g();const o=n.target.closest(".mobile-menu");!o&&x&&N(!1)};document.addEventListener("mousedown",handleClickOutside);return()=>document.removeEventListener("mousedown",handleClickOutside)},[g,x]);ot.useEffect(()=>{N(!1);v(!1)},[a.pathname]);const handleCreateDreams=()=>{n("/create-dreams");N(!1)};const _=ot.useCallback(n=>{u(n.target.value)},[u]);const j=ot.useCallback((n,a)=>{d({...i,[n]:a})},[i,d]);const I=ot.useCallback(()=>{m()},[m]);const formatBalance=n=>{if(!n)return"0.00";try{return parseFloat(n).toFixed(2)}catch{return"0.00"}};return at.jsx(at.Fragment,{children:at.jsxs("header",{className:"bg-black text-white px-4 md:px-6 py-3 flex items-center justify-between border-b border-zinc-800 relative z-[100]",children:[at.jsxs("div",{className:"flex items-center gap-6",children:[at.jsx(sv,{to:"/",children:at.jsx("img",{src:o_,alt:"Logo",className:"h-8 md:h-9"})}),at.jsxs("button",{onClick:handleCreateDreams,className:"hidden md:inline-flex items-center bg-zinc-800 hover:bg-zinc-700 text-white font-semibold px-6 py-2 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg border border-zinc-700",children:[at.jsx($T,{className:"inline w-4 h-4 mr-2"}),"Create your dreams"]})]}),at.jsx("div",{className:"hidden md:block flex-1 md:px-10 md:max-w-xl",children:at.jsxs("div",{className:"search-container relative",children:[at.jsxs("div",{className:"relative",children:[at.jsx(BT,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-zinc-400 w-5 h-5"}),at.jsx("input",{type:"text",placeholder:"Search items, collections and accounts",value:o,onChange:_,className:"w-full px-4 py-2 rounded-full bg-zinc-800 placeholder-zinc-400 text-white focus:outline-none pl-10 pr-20"}),o&&at.jsx("button",{onClick:I,className:"absolute right-12 top-1/2 transform -translate-y-1/2 text-zinc-400 hover:text-white transition-colors duration-200",children:at.jsx(Aj,{size:16})}),at.jsx("button",{onClick:()=>v(!y),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-zinc-400 hover:text-white transition-colors duration-200",children:at.jsx(J_,{size:16})})]}),y&&at.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-zinc-900/95 backdrop-blur-xl border border-zinc-800/50 rounded-xl p-4 z-40",children:at.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[at.jsxs("div",{children:[at.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Price Range"}),at.jsxs("select",{className:"w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2 text-white",value:i.priceRange||"",onChange:n=>j("priceRange",n.target.value),children:[at.jsx("option",{value:"",children:"All"}),at.jsx("option",{value:"0-0.1",children:"0 - 0.1 STT"}),at.jsx("option",{value:"0.1-1",children:"0.1 - 1 STT"}),at.jsx("option",{value:"1-10",children:"1 - 10 STT"}),at.jsx("option",{value:"10+",children:"10+ STT"})]})]}),at.jsxs("div",{children:[at.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Supply Range"}),at.jsxs("select",{className:"w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2 text-white",value:i.supplyRange||"",onChange:n=>j("supplyRange",n.target.value),children:[at.jsx("option",{value:"",children:"All"}),at.jsx("option",{value:"1-100",children:"1 - 100"}),at.jsx("option",{value:"100-1000",children:"100 - 1,000"}),at.jsx("option",{value:"1000-10000",children:"1,000 - 10,000"}),at.jsx("option",{value:"10000+",children:"10,000+"})]})]}),at.jsxs("div",{children:[at.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Type"}),at.jsxs("select",{className:"w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2 text-white",value:i.type||"",onChange:n=>j("type",n.target.value),children:[at.jsx("option",{value:"",children:"All"}),at.jsx("option",{value:"collection",children:"Collection"}),at.jsx("option",{value:"nft",children:"NFT"})]})]}),at.jsxs("div",{children:[at.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Sort"}),at.jsxs("select",{className:"w-full bg-zinc-800 border border-zinc-700 rounded-lg p-2 text-white",value:i.sort||"",onChange:n=>j("sort",n.target.value),children:[at.jsx("option",{value:"relevance",children:"Relevance"}),at.jsx("option",{value:"newest",children:"Newest"}),at.jsx("option",{value:"popular",children:"Popular"})]})]})]})}),at.jsx(SearchResults,{})]})}),at.jsxs("div",{className:"hidden md:flex items-center gap-6 relative",children:[at.jsx(sv,{to:"/launchpad",className:"font-semibold",children:"Launchpad"}),at.jsx(sv,{to:"/marketplace",className:"font-semibold",children:"Marketplace"}),k&&A&&at.jsxs("div",{className:"flex items-center gap-1 pr-2",children:[at.jsx("img",{src:i_,alt:"STT",className:"w-5 h-5"}),at.jsxs("span",{className:"font-bold text-sm",children:[formatBalance(A)," STT"]})]}),at.jsx(ReownConnector,{})]}),at.jsxs("div",{className:"flex md:hidden items-center gap-3",children:[at.jsx("button",{onClick:()=>v(!y),className:"p-2 text-zinc-400 hover:text-white transition-colors duration-200",children:at.jsx(BT,{className:"w-5 h-5"})}),at.jsx("div",{className:"p-2",children:at.jsx(ReownConnector,{isMobile:!0})}),at.jsx("button",{onClick:()=>N(!x),className:"p-2 text-zinc-400 hover:text-white transition-colors duration-200",children:at.jsx(fT,{className:"w-5 h-5"})})]}),y&&xb.createPortal(at.jsx("div",{className:"search-container fixed inset-x-0 top-20 z-[100000] md:hidden px-4 animate-fadeIn",children:at.jsxs("div",{className:"bg-zinc-900/95 backdrop-blur-xl border border-zinc-800/50 rounded-xl p-3 shadow-2xl mx-2",children:[at.jsxs("div",{className:"relative",children:[at.jsx(BT,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400 w-5 h-5"}),at.jsx("input",{type:"text",placeholder:"Search collections, NFTs, creators...",value:o,onChange:_,className:"w-full pl-10 pr-10 py-3 bg-zinc-800/60 border border-zinc-700/50 rounded-lg text-white placeholder:text-zinc-500 focus:outline-none focus:border-pink-500/50 focus:ring-2 focus:ring-pink-500/20 transition-all duration-300",autoFocus:!0}),o&&at.jsx("button",{onClick:I,className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-white transition-colors duration-200",children:at.jsx(Aj,{size:16})})]}),at.jsx("div",{className:"mt-2",children:at.jsx(SearchResults,{})})]})}),document.body),x&&at.jsx("div",{className:"mobile-menu md:hidden absolute top-full left-0 right-0 bg-zinc-900/95 backdrop-blur-xl border-t border-zinc-800/50 animate-fadeIn",children:at.jsxs("div",{className:"p-6 space-y-6 relative",children:[at.jsx("button",{onClick:()=>N(!1),className:"absolute top-0 right-0 p-2 text-zinc-400 hover:text-white transition-colors duration-200",children:at.jsx(Aj,{className:"w-6 h-6"})}),at.jsxs("div",{className:"text-center",children:[at.jsxs("button",{onClick:()=>{handleCreateDreams();N(!1)},className:"w-full bg-zinc-800 hover:bg-zinc-700 text-white font-semibold px-6 py-4 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-lg border border-zinc-700 shadow-lg",children:[at.jsx($T,{className:"inline w-5 h-5 mr-2"}),"Create Your Dreams"]}),at.jsx("p",{className:"text-zinc-400 text-sm mt-2",children:"Build, populate, and manage your NFT collections."})]}),at.jsxs("div",{className:"space-y-4",children:[at.jsx(sv,{to:"/launchpad",onClick:()=>N(!1),className:"block text-center py-3 font-semibold text-white hover:text-pink-400 transition-colors duration-200 border border-zinc-700 rounded-lg hover:bg-zinc-800/50",children:"Launchpad"}),at.jsx(sv,{to:"/marketplace",onClick:()=>N(!1),className:"block text-center py-3 font-semibold text-white hover:text-pink-400 transition-colors duration-200 border border-zinc-700 rounded-lg hover:bg-zinc-800/50",children:"Marketplace"})]})]})})]})})};var tI={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0};var nI=it.createContext&&it.createContext(tI);var rI=["attr","size","title"];function _objectWithoutProperties(n,a){if(null==n)return{};var o=_objectWithoutPropertiesLoose(n,a);var i,u;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(n);for(u=0;u<d.length;u++){i=d[u];a.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(n,i)&&(o[i]=n[i])}}return o}function _objectWithoutPropertiesLoose(n,a){if(null==n)return{};var o={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(a.indexOf(i)>=0)continue;o[i]=n[i]}return o}function _extends(){_extends=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n};return _extends.apply(this,arguments)}function ownKeys$1(n,a){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);a&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),o.push.apply(o,i)}return o}function _objectSpread(n){for(var a=1;a<arguments.length;a++){var o=null!=arguments[a]?arguments[a]:{};a%2?ownKeys$1(Object(o),!0).forEach(function(a){_defineProperty(n,a,o[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):ownKeys$1(Object(o)).forEach(function(a){Object.defineProperty(n,a,Object.getOwnPropertyDescriptor(o,a))})}return n}function _defineProperty(n,a,o){a=_toPropertyKey(a);a in n?Object.defineProperty(n,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[a]=o;return n}function _toPropertyKey(n){var a=_toPrimitive(n,"string");return"symbol"==typeof a?a:a+""}function _toPrimitive(n,a){if("object"!=typeof n||!n)return n;var o=n[Symbol.toPrimitive];if(void 0!==o){var i=o.call(n,a);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(n)}function Tree2Element(n){return n&&n.map((n,a)=>it.createElement(n.tag,_objectSpread({key:a},n.attr),Tree2Element(n.child)))}function GenIcon(n){return a=>it.createElement(IconBase,_extends({attr:_objectSpread({},n.attr)},a),Tree2Element(n.child))}function IconBase(n){var elem=a=>{var{attr:o,size:i,title:u}=n,d=_objectWithoutProperties(n,rI);var m=i||a.size||"1em";var g;a.className&&(g=a.className);n.className&&(g=(g?g+" ":"")+n.className);return it.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,o,d,{className:g,style:_objectSpread(_objectSpread({color:n.color||a.color},a.style),n.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),u&&it.createElement("title",null,u),n.children)};return void 0!==nI?it.createElement(nI.Consumer,null,n=>elem(n)):elem(tI)}function FaDiscord(n){return GenIcon({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"},child:[]}]})(n)}function FaTelegramPlane(n){return GenIcon({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M446.7 98.6l-67.6 318.8c-5.1 22.5-18.4 28.1-37.3 17.5l-103-75.9-49.7 47.8c-5.5 5.5-10.1 10.1-20.7 10.1l7.4-104.9 190.9-172.5c8.3-7.4-1.8-11.5-12.9-4.1L117.8 284 16.2 252.2c-22.1-6.9-22.5-22.1 4.6-32.7L418.2 66.4c18.4-6.9 34.5 4.1 28.5 32.2z"},child:[]}]})(n)}function FaTwitter(n){return GenIcon({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(n)}const Footer$1=()=>at.jsx("footer",{className:"fixed bottom-0 left-0 w-full bg-[#0d0d0d] border-t border-zinc-700 z-[80]",children:at.jsxs("div",{className:"flex flex-row items-center justify-between px-4 md:px-6 py-3 w-full min-h-[52px]",children:[at.jsxs("div",{className:"flex gap-6 text-xs md:text-sm text-white whitespace-nowrap overflow-x-auto no-scrollbar",children:[at.jsx("a",{href:"https://www.notion.so/dreava-art-NFT-Launchpad-Guide-Step-by-Step-from-Collection-to-Sale-220626bc8ae98000adfffd01b1aff334",target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-400 transition-colors",children:"Docs"}),at.jsx(sv,{to:"/privacy",className:"hover:text-blue-400 transition-colors",children:"Privacy Policy"}),at.jsx(sv,{to:"/terms",className:"hover:text-blue-400 transition-colors",children:"Terms Of Service"})]}),at.jsxs("div",{className:"flex gap-4 flex-shrink-0",children:[at.jsx("a",{href:"https://discord.gg/R24uFV3k8b",target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-400 transition-colors",children:at.jsx(FaDiscord,{className:"text-white w-5 h-5"})}),at.jsx("a",{href:"https://x.com/dreava_art",target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-400 transition-colors",children:at.jsx(FaTwitter,{className:"text-white w-5 h-5"})}),at.jsx("a",{href:"https://t.me",target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-400 transition-colors",children:at.jsx(FaTelegramPlane,{className:"text-white w-5 h-5"})})]})]})});const sI="/assets/blurry%20circle%20on%20the%20left-B9j3xpR6.svg";const aI="/assets/blurry%20circle%20on%20the%20right-BrslP2N3.svg";const BackgroundCircles=()=>at.jsxs(at.Fragment,{children:[at.jsx("img",{src:sI,alt:"",className:"fixed top-[-400px] left-0 w-[800px] translate-x-[-50%] translate-y-[50%] pointer-events-none select-none z-0"}),at.jsx("img",{src:aI,alt:"",className:"fixed top-[-80px] right-0 w-[800px] translate-x-[50%] pointer-events-none select-none z-0"})]});const oI="/assets/IMG-ClTlsDTj.mov";const LoadingScreen=({onLoadingComplete:n})=>{const[a,o]=ot.useState("Initializing");const[i,u]=ot.useState(!0);const[d,m]=ot.useState(!1);const[g,y]=ot.useState(0);const v=ot.useRef(null);const preloadAllImages=async()=>{o("Preloading assets");y(30);await new Promise(n=>setTimeout(n,300));y(60)};const preloadCollections=async()=>{o("Loading collections");y(80);try{JSON.parse(localStorage.getItem("dreava_collections")||"[]")}catch(n){}await new Promise(n=>setTimeout(n,200));y(90)};ot.useEffect(()=>{const initializeLoading=async()=>{try{const a=Date.now();const i=2e3;o("Initializing");y(10);await new Promise(n=>setTimeout(n,300));await preloadAllImages();await preloadCollections();o("Almost ready");y(95);await new Promise(n=>setTimeout(n,300));y(100);o("Ready");const d=Date.now()-a;d<i&&await new Promise(n=>setTimeout(n,i-d));u(!1);n&&n()}catch(a){console.error("Loading error:",a);u(!1);n&&n()}};initializeLoading()},[n]);return i?at.jsxs("div",{className:"fixed inset-0 bg-black z-[9996] flex flex-col items-center justify-center",children:[at.jsx(BackgroundCircles,{}),d?at.jsx("div",{className:"relative z-10 mb-6 w-64 h-64 bg-zinc-800/80 backdrop-blur-sm rounded-2xl shadow-2xl flex items-center justify-center border border-zinc-700/30",children:at.jsxs("div",{className:"text-center",children:[at.jsx("img",{src:o_,alt:"Dreava",className:"w-32 h-32 mx-auto mb-4"}),at.jsx("div",{className:"text-zinc-300 text-lg font-semibold",children:"Dreava"})]})}):at.jsx("div",{className:"relative z-10 mb-6",children:at.jsx("video",{ref:v,src:oI,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"w-64 h-64 object-cover rounded-2xl shadow-2xl",onError:n=>{console.warn("Failed to load video:",n);m(!0);n.target.style.display="none"}})}),at.jsx("div",{className:"relative z-10 w-80 h-2 bg-zinc-800 rounded-full overflow-hidden mb-4",children:at.jsx("div",{className:"h-full bg-gradient-to-r from-pink-500 to-blue-500 rounded-full transition-all duration-300 ease-out",style:{width:`${g}%`}})}),at.jsxs("div",{className:"relative z-10 text-zinc-300 text-sm font-medium mb-2",children:[Math.round(g),"%"]}),at.jsx("div",{className:"relative z-10 text-zinc-300 text-sm font-medium",children:a})]}):null};const hasExistingWalletProvider=()=>window.ethereum&&(window.ethereum.isMetaMask||window.ethereum.isWalletConnect||window.ethereum.isCoinbaseWallet||window.ethereum.isReown);const getActiveProviderInfo=()=>window.ethereum?window.ethereum.isMetaMask?"MetaMask":window.ethereum.isWalletConnect?"WalletConnect":window.ethereum.isCoinbaseWallet?"Coinbase Wallet":window.ethereum.isReown?"Reown":"Unknown Provider":null;const checkNetworkAvailability=async()=>{try{if(!window.ethereum)return!1;const n=await window.ethereum.request({method:"eth_chainId"});return void 0!==n}catch(n){console.warn("Network availability check failed:",n);return!1}};const WalletStatusMonitor=({enabled:n=!1})=>{const[a,o]=ot.useState({hasProvider:!1,providerType:null,networkAvailable:!1,lastCheck:null});const[i,u]=ot.useState(!1);ot.useEffect(()=>{if(!n)return;const checkWalletStatus=async()=>{try{const n=hasExistingWalletProvider();const a=getActiveProviderInfo();const i=await checkNetworkAvailability();o({hasProvider:n,providerType:a,networkAvailable:i,lastCheck:(new Date).toLocaleTimeString()})}catch(n){console.error("Wallet status check failed:",n);o(n=>({...n,lastCheck:(new Date).toLocaleTimeString()}))}};const a=setInterval(checkWalletStatus,5e3);checkWalletStatus();return()=>clearInterval(a)},[n]);return n?at.jsxs(at.Fragment,{children:[at.jsxs("button",{onClick:()=>u(!i),className:"fixed bottom-4 right-4 z-50 bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg text-sm font-medium shadow-lg",children:[i?"Hide":"Show"," Wallet Status"]}),i&&at.jsxs("div",{className:"fixed bottom-16 right-4 z-50 bg-gray-900 border border-gray-700 rounded-lg p-4 text-white text-sm shadow-xl max-w-xs",children:[at.jsx("h3",{className:"font-bold mb-2 text-blue-400",children:"Wallet Status Monitor"}),at.jsxs("div",{className:"space-y-2",children:[at.jsxs("div",{className:"flex justify-between",children:[at.jsx("span",{children:"Provider:"}),at.jsx("span",{className:a.hasProvider?"text-green-400":"text-red-400",children:a.providerType||"None"})]}),at.jsxs("div",{className:"flex justify-between",children:[at.jsx("span",{children:"Network:"}),at.jsx("span",{className:a.networkAvailable?"text-green-400":"text-red-400",children:a.networkAvailable?"Available":"Unavailable"})]}),at.jsxs("div",{className:"flex justify-between",children:[at.jsx("span",{children:"Last Check:"}),at.jsx("span",{className:"text-gray-400 text-xs",children:a.lastCheck||"Never"})]})]}),at.jsx("div",{className:"mt-3 pt-3 border-t border-gray-700",children:at.jsxs("div",{className:"text-xs text-gray-400",children:[at.jsxs("div",{children:["Window.ethereum: ",window.ethereum?"✓":"✗"]}),at.jsxs("div",{children:["MetaMask: ",window.ethereum?.isMetaMask?"✓":"✗"]}),at.jsxs("div",{children:["Reown: ",window.ethereum?.isReown?"✓":"✗"]})]})})]})]}):null};const DebugLoader=({enabled:n=!1})=>{const[a,o]=ot.useState({pageLoadTime:null,errors:[],warnings:[],walletStatus:null,networkRequests:[],domReady:!1});const[i,u]=ot.useState(!1);ot.useEffect(()=>{if(!n)return;const a=performance.now();const errorHandler2=n=>{o(a=>({...a,errors:[...a.errors,{message:n.message||n.error?.message||"Unknown error",source:n.filename||n.target?.src||"Unknown",line:n.lineno||"Unknown",time:(new Date).toLocaleTimeString()}]}))};const resourceLoadHandler=n=>{"SCRIPT"!==n.target.tagName&&"LINK"!==n.target.tagName||o(a=>({...a,networkRequests:[...a.networkRequests,{url:n.target.src||n.target.href,type:n.target.tagName,success:!n.target.onerror,time:(new Date).toLocaleTimeString()}]}))};const resourceErrorHandler=n=>{o(a=>({...a,errors:[...a.errors,{message:`Failed to load resource: ${n.target.src||n.target.href}`,source:n.target.src||n.target.href||"Unknown",time:(new Date).toLocaleTimeString()}]}))};const checkDOMReady=()=>{o(n=>({...n,domReady:"complete"===document.readyState,pageLoadTime:((performance.now()-a)/1e3).toFixed(2)}))};window.addEventListener("error",errorHandler2);window.addEventListener("unhandledrejection",n=>{errorHandler2({message:n.reason?.message||"Unhandled promise rejection"})});window.addEventListener("load",checkDOMReady);document.addEventListener("DOMContentLoaded",checkDOMReady);document.addEventListener("load",resourceLoadHandler,!0);document.addEventListener("error",resourceErrorHandler,!0);const checkWalletStatus=()=>{const n={hasEthereum:!!window.ethereum,ethereumType:window.ethereum?window.ethereum.isMetaMask?"MetaMask":window.ethereum.isWalletConnect?"WalletConnect":window.ethereum.isCoinbaseWallet?"CoinbaseWallet":window.ethereum.isNightlyWallet?"NightlyWallet":window.ethereum.isReown?"Reown":"Unknown":"None",time:(new Date).toLocaleTimeString()};o(a=>({...a,walletStatus:n}))};const i=setInterval(checkWalletStatus,2e3);checkWalletStatus();return()=>{window.removeEventListener("error",errorHandler2);window.removeEventListener("unhandledrejection",errorHandler2);window.removeEventListener("load",checkDOMReady);document.removeEventListener("DOMContentLoaded",checkDOMReady);document.removeEventListener("load",resourceLoadHandler,!0);document.removeEventListener("error",resourceErrorHandler,!0);clearInterval(i)}},[n]);return n?at.jsxs(at.Fragment,{children:[at.jsxs("button",{onClick:()=>u(!i),className:"fixed bottom-4 left-4 z-50 bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-lg text-sm font-medium shadow-lg",children:[i?"Hide":"Show"," Debug"]}),i&&at.jsxs("div",{className:"fixed bottom-16 left-4 z-50 bg-gray-900 border border-gray-700 rounded-lg p-4 text-white text-sm shadow-xl max-w-md max-h-96 overflow-y-auto",children:[at.jsx("h3",{className:"font-bold mb-2 text-red-400",children:"Debug Loader"}),at.jsxs("div",{className:"space-y-2 mb-3",children:[at.jsxs("div",{className:"flex justify-between",children:[at.jsx("span",{children:"DOM Ready:"}),at.jsx("span",{className:a.domReady?"text-green-400":"text-red-400",children:a.domReady?"Yes":"No"})]}),at.jsxs("div",{className:"flex justify-between",children:[at.jsx("span",{children:"Load Time:"}),at.jsx("span",{className:"text-blue-400",children:a.pageLoadTime?`${a.pageLoadTime}s`:"Loading..."})]})]}),a.walletStatus&&at.jsxs("div",{className:"mb-3 p-2 bg-gray-800 rounded",children:[at.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Wallet Status:"}),at.jsxs("div",{className:"text-xs",children:[at.jsxs("div",{children:["Ethereum: ",a.walletStatus.hasEthereum?"✓":"✗"]}),at.jsxs("div",{children:["Type: ",a.walletStatus.ethereumType]}),at.jsxs("div",{children:["Time: ",a.walletStatus.time]})]})]}),a.errors.length>0&&at.jsxs("div",{className:"mb-3",children:[at.jsxs("div",{className:"text-xs text-red-400 mb-1",children:["Errors (",a.errors.length,"):"]}),at.jsx("div",{className:"space-y-1 max-h-20 overflow-y-auto",children:a.errors.slice(-5).map((n,a)=>at.jsx("div",{className:"text-xs text-red-300 bg-red-900 p-1 rounded",children:n.message},a))})]}),a.warnings.length>0&&at.jsxs("div",{className:"mb-3",children:[at.jsxs("div",{className:"text-xs text-yellow-400 mb-1",children:["Warnings (",a.warnings.length,"):"]}),at.jsx("div",{className:"space-y-1 max-h-20 overflow-y-auto",children:a.warnings.slice(-5).map((n,a)=>at.jsx("div",{className:"text-xs text-yellow-300 bg-yellow-900 p-1 rounded",children:n.message},a))})]}),a.networkRequests.length>0&&at.jsxs("div",{children:[at.jsxs("div",{className:"text-xs text-blue-400 mb-1",children:["Network (",a.networkRequests.length,"):"]}),at.jsx("div",{className:"space-y-1 max-h-20 overflow-y-auto",children:a.networkRequests.slice(-5).map((n,a)=>at.jsxs("div",{className:"text-xs p-1 rounded "+(n.success?"text-green-300 bg-green-900":"text-red-300 bg-red-900"),children:[n.type,": ",n.success?"✓":"✗"]},a))})]})]})]}):null};const TestPage=()=>{const[n,a]=ot.useState({hasEthereum:!1,ethereumType:"None",metaMaskAvailable:!1,reownAvailable:!1});ot.useEffect(()=>{const checkWalletStatus=()=>{const n=!!window.ethereum;const o=window.ethereum?window.ethereum.isMetaMask?"MetaMask":window.ethereum.isWalletConnect?"WalletConnect":window.ethereum.isCoinbaseWallet?"CoinbaseWallet":window.ethereum.isNightlyWallet?"NightlyWallet":window.ethereum.isReown?"Reown":"Unknown":"None";a({hasEthereum:n,ethereumType:o,metaMaskAvailable:window.ethereum?.isMetaMask||!1,reownAvailable:window.ethereum?.isReown||!1})};checkWalletStatus();const n=setInterval(checkWalletStatus,2e3);return()=>clearInterval(n)},[]);return at.jsx("div",{className:"min-h-screen bg-black text-white p-8",children:at.jsxs("div",{className:"max-w-4xl mx-auto",children:[at.jsx("h1",{className:"text-4xl font-bold mb-8 text-center",children:"🧪 Test Page - Wallet Status"}),at.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 mb-8",children:[at.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Wallet Status"}),at.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[at.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[at.jsx("div",{className:"text-lg font-medium",children:"Ethereum Provider"}),at.jsx("div",{className:"text-2xl font-bold "+(n.hasEthereum?"text-green-400":"text-red-400"),children:n.hasEthereum?"✓ Available":"✗ Not Available"})]}),at.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[at.jsx("div",{className:"text-lg font-medium",children:"Provider Type"}),at.jsx("div",{className:"text-2xl font-bold text-blue-400",children:n.ethereumType})]}),at.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[at.jsx("div",{className:"text-lg font-medium",children:"MetaMask"}),at.jsx("div",{className:"text-2xl font-bold "+(n.metaMaskAvailable?"text-green-400":"text-red-400"),children:n.metaMaskAvailable?"✓ Active":"✗ Inactive"})]}),at.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[at.jsx("div",{className:"text-lg font-medium",children:"Reown"}),at.jsx("div",{className:"text-2xl font-bold "+(n.reownAvailable?"text-green-400":"text-red-400"),children:n.reownAvailable?"✓ Active":"✗ Inactive"})]})]})]}),at.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 mb-8",children:[at.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"System Info"}),at.jsxs("div",{className:"space-y-2 text-sm",children:[at.jsxs("div",{children:["User Agent: ",navigator.userAgent]}),at.jsxs("div",{children:["Platform: ",navigator.platform]}),at.jsxs("div",{children:["Language: ",navigator.language]}),at.jsxs("div",{children:["Cookies Enabled: ",navigator.cookieEnabled?"Yes":"No"]}),at.jsxs("div",{children:["Online: ",navigator.onLine?"Yes":"No"]})]})]}),at.jsxs("div",{className:"bg-gray-900 rounded-lg p-6",children:[at.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Test Actions"}),at.jsxs("div",{className:"space-x-4",children:[at.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded",children:"Reload Page"}),at.jsx("button",{onClick:()=>console.log("Current ethereum:",window.ethereum),className:"bg-green-600 hover:bg-green-700 px-4 py-2 rounded",children:"Log Ethereum to Console"}),at.jsx("button",{onClick:()=>{try{const n=window.ethereum?.request?.({method:"eth_chainId"});console.log("Chain ID test:",n)}catch(n){console.error("Chain ID test failed:",n)}},className:"bg-yellow-600 hover:bg-yellow-700 px-4 py-2 rounded",children:"Test Chain ID"})]})]}),at.jsxs("div",{className:"bg-blue-900 rounded-lg p-6 mt-8",children:[at.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Instructions"}),at.jsxs("div",{className:"space-y-2 text-sm",children:[at.jsx("div",{children:"1. Откройте консоль браузера (F12)"}),at.jsx("div",{children:"2. Проверьте, нет ли ошибок"}),at.jsx("div",{children:"3. Убедитесь, что MetaMask работает"}),at.jsx("div",{children:"4. Если все работает, можно включить Reown обратно"})]})]})]})})};const SimpleTestPage=()=>{const[n,a]=ot.useState({hasEthereum:!1,ethereumType:"None",metaMaskAvailable:!1,pageLoaded:!1});ot.useEffect(()=>{const checkWalletStatus=()=>{const n=!!window.ethereum;const o=window.ethereum?window.ethereum.isMetaMask?"MetaMask":window.ethereum.isWalletConnect?"WalletConnect":window.ethereum.isCoinbaseWallet?"CoinbaseWallet":window.ethereum.isNightlyWallet?"NightlyWallet":window.ethereum.isBackpack?"Backpack":window.ethereum.isEVMAsk?"EVM Ask":window.ethereum.isReown?"Reown":"Unknown":"None";a({hasEthereum:n,ethereumType:o,metaMaskAvailable:window.ethereum?.isMetaMask||!1,pageLoaded:!0})};checkWalletStatus();const n=setInterval(checkWalletStatus,2e3);return()=>clearInterval(n)},[]);return at.jsx("div",{className:"min-h-screen bg-black text-white p-8",children:at.jsxs("div",{className:"max-w-4xl mx-auto",children:[at.jsx("h1",{className:"text-4xl font-bold mb-8 text-center",children:"🧪 Simple Test Page"}),at.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 mb-8",children:[at.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Page Status"}),at.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[at.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[at.jsx("div",{className:"text-lg font-medium",children:"Page Loaded"}),at.jsx("div",{className:"text-2xl font-bold "+(n.pageLoaded?"text-green-400":"text-red-400"),children:n.pageLoaded?"✓ Yes":"✗ No"})]}),at.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[at.jsx("div",{className:"text-lg font-medium",children:"React Working"}),at.jsx("div",{className:"text-2xl font-bold text-green-400",children:"✓ Yes"})]})]})]}),at.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 mb-8",children:[at.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Wallet Status"}),at.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[at.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[at.jsx("div",{className:"text-lg font-medium",children:"Ethereum Provider"}),at.jsx("div",{className:"text-2xl font-bold "+(n.hasEthereum?"text-green-400":"text-red-400"),children:n.hasEthereum?"✓ Available":"✗ Not Available"})]}),at.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[at.jsx("div",{className:"text-lg font-medium",children:"Provider Type"}),at.jsx("div",{className:"text-2xl font-bold text-blue-400",children:n.ethereumType})]}),at.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[at.jsx("div",{className:"text-lg font-medium",children:"MetaMask"}),at.jsx("div",{className:"text-2xl font-bold "+(n.metaMaskAvailable?"text-green-400":"text-red-400"),children:n.metaMaskAvailable?"✓ Active":"✗ Inactive"})]}),at.jsxs("div",{className:"bg-gray-800 p-4 rounded",children:[at.jsx("div",{className:"text-lg font-medium",children:"Console Errors"}),at.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:"Check F12"})]})]})]}),at.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 mb-8",children:[at.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"System Info"}),at.jsxs("div",{className:"space-y-2 text-sm",children:[at.jsxs("div",{children:["User Agent: ",navigator.userAgent]}),at.jsxs("div",{children:["Platform: ",navigator.platform]}),at.jsxs("div",{children:["Language: ",navigator.language]}),at.jsxs("div",{children:["Cookies Enabled: ",navigator.cookieEnabled?"Yes":"No"]}),at.jsxs("div",{children:["Online: ",navigator.onLine?"Yes":"No"]}),at.jsxs("div",{children:["Window Ethereum: ",window.ethereum?"Yes":"No"]})]})]}),at.jsxs("div",{className:"bg-gray-900 rounded-lg p-6",children:[at.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Test Actions"}),at.jsxs("div",{className:"space-x-4",children:[at.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded",children:"Reload Page"}),at.jsx("button",{onClick:()=>console.log("Current ethereum:",window.ethereum),className:"bg-green-600 hover:bg-green-700 px-4 py-2 rounded",children:"Log Ethereum to Console"}),at.jsx("button",{onClick:()=>{try{window.ethereum?.request?window.ethereum.request({method:"eth_chainId"}).then(n=>console.log("Chain ID:",n)).catch(n=>console.error("Chain ID error:",n)):console.log("No ethereum.request method available")}catch(n){console.error("Chain ID test failed:",n)}},className:"bg-yellow-600 hover:bg-yellow-700 px-4 py-2 rounded",children:"Test Chain ID"})]})]}),at.jsxs("div",{className:"bg-blue-900 rounded-lg p-6 mt-8",children:[at.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Instructions"}),at.jsxs("div",{className:"space-y-2 text-sm",children:[at.jsx("div",{children:"1. Откройте консоль браузера (F12)"}),at.jsx("div",{children:"2. Проверьте, нет ли ошибок"}),at.jsx("div",{children:"3. Убедитесь, что MetaMask работает"}),at.jsx("div",{children:"4. Если все работает, можно будет добавить Reown позже"})]})]})]})})};const ReownTest=()=>{const n=useReownWallet();return at.jsx("div",{className:"min-h-screen bg-black text-white p-8",children:at.jsxs("div",{className:"max-w-4xl mx-auto",children:[at.jsx("h1",{className:"text-4xl font-bold mb-8",children:"🧪 Reown Test Page"}),at.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[at.jsxs("div",{className:"bg-gray-900 p-6 rounded-lg",children:[at.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"💰 Wallet Status"}),at.jsxs("div",{className:"space-y-3",children:[at.jsxs("div",{className:"flex justify-between",children:[at.jsx("span",{children:"Connected:"}),at.jsx("span",{className:n.isConnected?"text-green-400":"text-red-400",children:n.isConnected?"Yes":"No"})]}),at.jsxs("div",{className:"flex justify-between",children:[at.jsx("span",{children:"Loading:"}),at.jsx("span",{className:"text-green-400",children:"No"})]}),at.jsxs("div",{className:"flex justify-between",children:[at.jsx("span",{children:"Address:"}),at.jsx("span",{className:"text-blue-400 font-mono text-sm",children:n.address||"Not connected"})]}),at.jsxs("div",{className:"flex justify-between",children:[at.jsx("span",{children:"Chain ID:"}),at.jsx("span",{className:"text-purple-400",children:n.chainId||"Unknown"})]}),at.jsxs("div",{className:"flex justify-between",children:[at.jsx("span",{children:"Balance:"}),at.jsx("span",{className:"text-green-400",children:n.balance?`${n.balance} STT`:"Loading..."})]})]})]}),at.jsxs("div",{className:"bg-gray-900 p-6 rounded-lg",children:[at.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"🔧 Actions"}),at.jsxs("div",{className:"space-y-3",children:[at.jsx("button",{onClick:n.connect,disabled:n.isLoading,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 px-4 py-2 rounded-lg transition-colors",children:"Connect Wallet"}),at.jsx("button",{onClick:n.disconnect,disabled:!n.isConnected,className:"w-full bg-red-600 hover:bg-red-700 disabled:bg-gray-600 px-4 py-2 rounded-lg transition-colors",children:"Disconnect"}),at.jsx("button",{onClick:()=>n.switchNetwork(50312),disabled:!n.isConnected||50312===n.chainId,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 px-4 py-2 rounded-lg transition-colors",children:"Switch to Somnia Testnet"})]})]}),at.jsxs("div",{className:"bg-gray-900 p-6 rounded-lg md:col-span-2",children:[at.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"🔍 Reown AppKit Info"}),at.jsxs("div",{className:"space-y-3",children:[at.jsxs("div",{className:"flex justify-between",children:[at.jsx("span",{children:"AppKit Initialized:"}),at.jsx("span",{className:n.reown.appKitState.initialized?"text-green-400":"text-red-400",children:n.reown.appKitState.initialized?"Yes":"No"})]}),at.jsxs("div",{className:"flex justify-between",children:[at.jsx("span",{children:"AppKit Instance:"}),at.jsx("span",{className:"text-blue-400",children:"Not available"})]})]})]}),at.jsxs("div",{className:"bg-gray-900 p-6 rounded-lg md:col-span-2",children:[at.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"🐛 Debug Info"}),at.jsx("div",{className:"bg-gray-800 p-4 rounded-lg",children:at.jsx("pre",{className:"text-sm text-gray-300 overflow-x-auto",children:JSON.stringify({wallet:{isConnected:n.isConnected,isLoading:n.isLoading,address:n.address,chainId:n.chainId,balance:n.balance},reown:{appKitState:n.reown.appKitState,appKitNetwork:n.reown.appKitNetwork,appKitAccount:n.reown.appKitAccount,appKitBalance:n.reown.appKitBalance}},null,2)})})]})]})]})})};const iI="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%2034%2034'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;'%3e%3cg%20transform='matrix(1,0,0,1,-291.918,-540.871)'%3e%3cg%20transform='matrix(0.996682,0,0,0.994293,215.755,17.0697)'%3e%3cg%20transform='matrix(1.00333,0,0,1.00574,-419.254,-12.0358)'%3e%3ccircle%20cx='510.859'%20cy='552.602'%20r='16.583'%20style='fill:rgb(22,22,22);stroke:white;stroke-width:0.5px;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(0.996682,0,0,0.994293,215.755,17.0697)'%3e%3cg%20id='svgexport-6.svg'%20transform='matrix(-1.00333,0,0,1.00574,93.3056,543.738)'%3e%3cg%20transform='matrix(1,0,0,1,-12,-12)'%3e%3cpath%20d='M10,6L8.59,7.41L13.17,12L8.59,16.59L10,18L16,12L10,6Z'%20style='fill:white;fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";const cI="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%2034%2034'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;'%3e%3cg%20transform='matrix(1,0,0,1,-695.346,-540.871)'%3e%3cg%20transform='matrix(0.996682,0,0,0.994293,215.755,17.0697)'%3e%3cg%20transform='matrix(1.00333,0,0,1.00574,-14.483,-12.0358)'%3e%3ccircle%20cx='510.859'%20cy='552.602'%20r='16.583'%20style='fill:rgb(22,22,22);stroke:white;stroke-width:0.5px;'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(0.996682,0,0,0.994293,215.755,17.0697)'%3e%3cg%20id='svgexport-6.svg'%20transform='matrix(1.00333,0,0,1.00574,498.077,543.738)'%3e%3cg%20transform='matrix(1,0,0,1,-12,-12)'%3e%3cpath%20d='M10,6L8.59,7.41L13.17,12L8.59,16.59L10,18L16,12L10,6Z'%20style='fill:white;fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";var lI={exports:{}};var uI;var dI;function requireReactPropTypesSecret(){if(dI)return uI;dI=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";uI=n;return uI}var hI;var fI;function requireFactoryWithThrowingShims(){if(fI)return hI;fI=1;var n=requireReactPropTypesSecret();function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;hI=function(){function shim(a,o,i,u,d,m){if(m!==n){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");g.name="Invariant Violation";throw g}}shim.isRequired=shim;function getShim(){return shim}var a={array:shim,bigint:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};a.PropTypes=a;return a};return hI}var pI;function requirePropTypes(){if(pI)return lI.exports;pI=1;lI.exports=requireFactoryWithThrowingShims()();return lI.exports}var mI=requirePropTypes();function _classCallCheck(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(n,a){for(var o=0;o<a.length;o++){var i=a[o];i.enumerable=i.enumerable||!1;i.configurable=!0;"value"in i&&(i.writable=!0);Object.defineProperty(n,i.key,i)}}function _createClass(n,a,o){a&&_defineProperties(n.prototype,a);return n}function _inherits(n,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,writable:!0,configurable:!0}});a&&_setPrototypeOf(n,a)}function _getPrototypeOf(n){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)};return _getPrototypeOf(n)}function _setPrototypeOf(n,a){_setPrototypeOf=Object.setPrototypeOf||function(n,a){n.__proto__=a;return n};return _setPrototypeOf(n,a)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return!0}catch(nL){return!1}}function _assertThisInitialized(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function _possibleConstructorReturn(n,a){return!a||"object"!=typeof a&&"function"!=typeof a?_assertThisInitialized(n):a}function _createSuper(n){var a=_isNativeReflectConstruct();return function(){var o,i=_getPrototypeOf(n);if(a){var u=_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,u)}else o=i.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function _toConsumableArray(n){return _arrayWithoutHoles(n)||_iterableToArray(n)||_unsupportedIterableToArray(n)||_nonIterableSpread()}function _arrayWithoutHoles(n){if(Array.isArray(n))return _arrayLikeToArray(n)}function _iterableToArray(n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)}function _unsupportedIterableToArray(n,a){if(n){if("string"==typeof n)return _arrayLikeToArray(n,a);var o=Object.prototype.toString.call(n).slice(8,-1);"Object"===o&&n.constructor&&(o=n.constructor.name);return"Map"===o||"Set"===o?Array.from(n):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(n,a):void 0}}function _arrayLikeToArray(n,a){(null==a||a>n.length)&&(a=n.length);for(var o=0,i=new Array(a);o<a;o++)i[o]=n[o];return i}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function zeroPad(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;var o=String(n);if(0===a)return o;var i=o.match(/(.*?)([0-9]+)(.*)/);var u=i?i[1]:"";var d=i?i[3]:"";var m=i?i[2]:o;var g=m.length>=a?m:(_toConsumableArray(Array(a)).map(function(){return"0"}).join("")+m).slice(-1*a);return"".concat(u).concat(g).concat(d)}var gI={daysInHours:!1,zeroPadTime:2};function calcTimeDelta(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var o=a.now,i=void 0===o?Date.now:o,u=a.precision,d=void 0===u?0:u,m=a.controlled,g=a.offsetTime,y=void 0===g?0:g,v=a.overtime;var x;x="string"==typeof n?new Date(n).getTime():n instanceof Date?n.getTime():n;m||(x+=y);var N=m?x:x-i();var k=Math.min(20,Math.max(0,d));var E=Math.round(1e3*parseFloat(((v?N:Math.max(0,N))/1e3).toFixed(k)));var S=Math.abs(E)/1e3;return{total:E,days:Math.floor(S/86400),hours:Math.floor(S/3600%24),minutes:Math.floor(S/60%60),seconds:Math.floor(S%60),milliseconds:Number((S%1*1e3).toFixed()),completed:E<=0}}function formatTimeDelta(n,a){var o=n.days,i=n.hours,u=n.minutes,d=n.seconds;var m=Object.assign(Object.assign({},gI),a),g=m.daysInHours,y=m.zeroPadTime,v=m.zeroPadDays,x=void 0===v?y:v;var N=Math.min(2,y);var k=g?zeroPad(i+24*o,y):zeroPad(i,N);return{days:g?"":zeroPad(o,x),hours:k,minutes:zeroPad(u,N),seconds:zeroPad(d,N)}}var yI=function(n){_inherits(Countdown2,n);var a=_createSuper(Countdown2);function Countdown2(){var n;_classCallCheck(this,Countdown2);n=a.apply(this,arguments);n.state={count:n.props.count||3};n.startCountdown=function(){n.interval=window.setInterval(function(){var a=n.state.count-1;if(0===a){n.stopCountdown();n.props.onComplete&&n.props.onComplete()}else n.setState(function(n){return{count:n.count-1}})},1e3)};n.stopCountdown=function(){clearInterval(n.interval)};n.addTime=function(a){n.stopCountdown();n.setState(function(n){return{count:n.count+a}},n.startCountdown)};return n}_createClass(Countdown2,[{key:"componentDidMount",value:function(){this.startCountdown()}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return this.props.children?ot.cloneElement(this.props.children,{count:this.state.count}):null}}]);return Countdown2}(ot.Component);yI.propTypes={count:mI.number,children:mI.element,onComplete:mI.func};var bI=function(n){_inherits(Countdown$12,n);var a=_createSuper(Countdown$12);function Countdown$12(n){var o;_classCallCheck(this,Countdown$12);o=a.call(this,n);o.mounted=!1;o.initialTimestamp=o.calcOffsetStartTimestamp();o.offsetStartTimestamp=o.props.autoStart?0:o.initialTimestamp;o.offsetTime=0;o.legacyMode=!1;o.legacyCountdownRef=null;o.tick=function(){var n=o.calcTimeDelta();var a=n.completed&&!o.props.overtime?void 0:o.props.onTick;o.setTimeDeltaState(n,void 0,a)};o.setLegacyCountdownRef=function(n){o.legacyCountdownRef=n};o.start=function(){if(!o.isStarted()){var n=o.offsetStartTimestamp;o.offsetStartTimestamp=0;o.offsetTime+=n?o.calcOffsetStartTimestamp()-n:0;var a=o.calcTimeDelta();o.setTimeDeltaState(a,"STARTED",o.props.onStart);if(!o.props.controlled&&(!a.completed||o.props.overtime)){o.clearTimer();o.interval=window.setInterval(o.tick,o.props.intervalDelay)}}};o.pause=function(){if(!o.isPaused()){o.clearTimer();o.offsetStartTimestamp=o.calcOffsetStartTimestamp();o.setTimeDeltaState(o.state.timeDelta,"PAUSED",o.props.onPause)}};o.stop=function(){if(!o.isStopped()){o.clearTimer();o.offsetStartTimestamp=o.calcOffsetStartTimestamp();o.offsetTime=o.offsetStartTimestamp-o.initialTimestamp;o.setTimeDeltaState(o.calcTimeDelta(),"STOPPED",o.props.onStop)}};o.isStarted=function(){return o.isStatus("STARTED")};o.isPaused=function(){return o.isStatus("PAUSED")};o.isStopped=function(){return o.isStatus("STOPPED")};o.isCompleted=function(){return o.isStatus("COMPLETED")};if(n.date){var i=o.calcTimeDelta();o.state={timeDelta:i,status:i.completed?"COMPLETED":"STOPPED"}}else o.legacyMode=!0;return o}_createClass(Countdown$12,[{key:"componentDidMount",value:function(){if(!this.legacyMode){this.mounted=!0;this.props.onMount&&this.props.onMount(this.calcTimeDelta());this.props.autoStart&&this.start()}}},{key:"componentDidUpdate",value:function(n){if(!this.legacyMode&&this.props.date!==n.date){this.initialTimestamp=this.calcOffsetStartTimestamp();this.offsetStartTimestamp=this.initialTimestamp;this.offsetTime=0;this.setTimeDeltaState(this.calcTimeDelta())}}},{key:"componentWillUnmount",value:function(){if(!this.legacyMode){this.mounted=!1;this.clearTimer()}}},{key:"calcTimeDelta",value:function(){var n=this.props,a=n.date,o=n.now,i=n.precision,u=n.controlled,d=n.overtime;return calcTimeDelta(a,{now:o,precision:i,controlled:u,offsetTime:this.offsetTime,overtime:d})}},{key:"calcOffsetStartTimestamp",value:function(){return Date.now()}},{key:"addTime",value:function(n){this.legacyCountdownRef.addTime(n)}},{key:"clearTimer",value:function(){window.clearInterval(this.interval)}},{key:"isStatus",value:function(n){return this.state.status===n}},{key:"setTimeDeltaState",value:function(n,a,o){var i=this;if(this.mounted){var u=n.completed&&!this.state.timeDelta.completed;var d=n.completed&&"STARTED"===a;u&&!this.props.overtime&&this.clearTimer();var onDone=function(){o&&o(i.state.timeDelta);i.props.onComplete&&(u||d)&&i.props.onComplete(n,d)};return this.setState(function(o){var u=a||o.status;n.completed&&!i.props.overtime?u="COMPLETED":a||"COMPLETED"!==u||(u="STOPPED");return{timeDelta:n,status:u}},onDone)}}},{key:"getApi",value:function(){return this.api=this.api||{start:this.start,pause:this.pause,stop:this.stop,isStarted:this.isStarted,isPaused:this.isPaused,isStopped:this.isStopped,isCompleted:this.isCompleted}}},{key:"getRenderProps",value:function(){var n=this.props,a=n.daysInHours,o=n.zeroPadTime,i=n.zeroPadDays;var u=this.state.timeDelta;return Object.assign(Object.assign({},u),{api:this.getApi(),props:this.props,formatted:formatTimeDelta(u,{daysInHours:a,zeroPadTime:o,zeroPadDays:i})})}},{key:"render",value:function(){if(this.legacyMode){var n=this.props,a=n.count,o=n.children,i=n.onComplete;return ot.createElement(yI,{ref:this.setLegacyCountdownRef,count:a,onComplete:i},o)}var u=this.props,d=u.className,m=u.overtime,g=u.children,y=u.renderer;var v=this.getRenderProps();if(y)return y(v);if(g&&this.state.timeDelta.completed&&!m)return ot.cloneElement(g,{countdown:v});var x=v.formatted,N=x.days,k=x.hours,E=x.minutes,S=x.seconds;return ot.createElement("span",{className:d},v.total<0?"-":"",N,N?":":"",k,":",E,":",S)}}]);return Countdown$12}(ot.Component);bI.defaultProps=Object.assign(Object.assign({},gI),{controlled:!1,intervalDelay:1e3,precision:0,autoStart:!0});bI.propTypes={date:mI.oneOfType([mI.instanceOf(Date),mI.string,mI.number]),daysInHours:mI.bool,zeroPadTime:mI.number,zeroPadDays:mI.number,controlled:mI.bool,intervalDelay:mI.number,precision:mI.number,autoStart:mI.bool,overtime:mI.bool,className:mI.string,children:mI.element,renderer:mI.func,now:mI.func,onMount:mI.func,onStart:mI.func,onPause:mI.func,onStop:mI.func,onTick:mI.func,onComplete:mI.func};const getIpfsUrls=n=>{if(!n)return[];if(n.startsWith("ipfs://")){const a=n.replace("ipfs://","");return[`https://gateway.lighthouse.storage/ipfs/${a}`]}return[n]};const fetchWithFallback$3=async n=>{const tryFetchJson=async n=>{const a=await fetch(n,{method:"GET",mode:"cors",headers:{Accept:"application/json"}});if(!a.ok)throw new Error(`HTTP ${a.status}`);return await a.json()};if("string"==typeof n)try{return await tryFetchJson(n)}catch(a){throw new Error("Failed to fetch from URL")}else if(Array.isArray(n)){for(const o of n)try{return await tryFetchJson(o)}catch(a){continue}throw new Error("All URLs failed")}throw new Error("Invalid URL format")};const vI=JSON.parse('[{"inputs":[{"internalType":"string","name":"name_","type":"string"},{"internalType":"string","name":"symbol_","type":"string"},{"internalType":"uint256","name":"maxSupply_","type":"uint256"},{"internalType":"string","name":"baseTokenURI_","type":"string"},{"internalType":"string","name":"unrevealedURI_","type":"string"},{"internalType":"address","name":"initialOwner","type":"address"},{"internalType":"string","name":"contractURI_","type":"string"},{"internalType":"address","name":"royaltyRecipient","type":"address"},{"internalType":"uint96","name":"royaltyFeeNumerator","type":"uint96"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"uint256","name":"numerator","type":"uint256"},{"internalType":"uint256","name":"denominator","type":"uint256"}],"name":"ERC2981InvalidDefaultRoyalty","type":"error"},{"inputs":[{"internalType":"address","name":"receiver","type":"address"}],"name":"ERC2981InvalidDefaultRoyaltyReceiver","type":"error"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256","name":"numerator","type":"uint256"},{"internalType":"uint256","name":"denominator","type":"uint256"}],"name":"ERC2981InvalidTokenRoyalty","type":"error"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"address","name":"receiver","type":"address"}],"name":"ERC2981InvalidTokenRoyaltyReceiver","type":"error"},{"inputs":[],"name":"ERC721EnumerableForbiddenBatchMint","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"address","name":"owner","type":"address"}],"name":"ERC721IncorrectOwner","type":"error"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ERC721InsufficientApproval","type":"error"},{"inputs":[{"internalType":"address","name":"approver","type":"address"}],"name":"ERC721InvalidApprover","type":"error"},{"inputs":[{"internalType":"address","name":"operator","type":"address"}],"name":"ERC721InvalidOperator","type":"error"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"ERC721InvalidOwner","type":"error"},{"inputs":[{"internalType":"address","name":"receiver","type":"address"}],"name":"ERC721InvalidReceiver","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"}],"name":"ERC721InvalidSender","type":"error"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ERC721NonexistentToken","type":"error"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"ERC721OutOfBoundsIndex","type":"error"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"OwnableInvalidOwner","type":"error"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"OwnableUnauthorizedAccount","type":"error"},{"inputs":[],"name":"ReentrancyGuardReentrantCall","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"bool","name":"enabled","type":"bool"}],"name":"AdminSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"uri","type":"string"}],"name":"ContractURISet","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"startPrice","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"endPrice","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"startTime","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"endTime","type":"uint256"}],"name":"DutchAuctionStarted","type":"event"},{"anonymous":false,"inputs":[],"name":"DutchAuctionStopped","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"phaseId","type":"uint256"}],"name":"Minted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"token","type":"address"},{"indexed":false,"internalType":"bool","name":"enabled","type":"bool"}],"name":"PaymentTokenSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"phaseId","type":"uint256"}],"name":"PhaseActivated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"phaseId","type":"uint256"},{"components":[{"internalType":"uint256","name":"start","type":"uint256"},{"internalType":"uint256","name":"end","type":"uint256"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"uint256","name":"maxPerWallet","type":"uint256"},{"internalType":"bytes32","name":"merkleRoot","type":"bytes32"},{"internalType":"bool","name":"isPublic","type":"bool"}],"indexed":false,"internalType":"struct SomniaNFT.Phase","name":"phase","type":"tuple"}],"name":"PhaseAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"phaseId","type":"uint256"},{"components":[{"internalType":"uint256","name":"start","type":"uint256"},{"internalType":"uint256","name":"end","type":"uint256"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"uint256","name":"maxPerWallet","type":"uint256"},{"internalType":"bytes32","name":"merkleRoot","type":"bytes32"},{"internalType":"bool","name":"isPublic","type":"bool"}],"indexed":false,"internalType":"struct SomniaNFT.Phase","name":"phase","type":"tuple"}],"name":"PhaseUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bool","name":"revealed","type":"bool"}],"name":"Revealed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"uint256","name":"start","type":"uint256"},{"internalType":"uint256","name":"end","type":"uint256"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"uint256","name":"maxPerWallet","type":"uint256"},{"internalType":"bytes32","name":"merkleRoot","type":"bytes32"},{"internalType":"bool","name":"isPublic","type":"bool"}],"name":"addPhase","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"auction","outputs":[{"internalType":"uint256","name":"startPrice","type":"uint256"},{"internalType":"uint256","name":"endPrice","type":"uint256"},{"internalType":"uint256","name":"startTime","type":"uint256"},{"internalType":"uint256","name":"endTime","type":"uint256"},{"internalType":"bool","name":"active","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"baseTokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"contractURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"currentPhase","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"deleteDefaultRoyalty","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getCurrentAuctionPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getCurrentPhase","outputs":[{"components":[{"internalType":"uint256","name":"start","type":"uint256"},{"internalType":"uint256","name":"end","type":"uint256"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"uint256","name":"maxPerWallet","type":"uint256"},{"internalType":"bytes32","name":"merkleRoot","type":"bytes32"},{"internalType":"bool","name":"isPublic","type":"bool"}],"internalType":"struct SomniaNFT.Phase","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"phaseId","type":"uint256"}],"name":"getPhase","outputs":[{"components":[{"internalType":"uint256","name":"start","type":"uint256"},{"internalType":"uint256","name":"end","type":"uint256"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"uint256","name":"maxPerWallet","type":"uint256"},{"internalType":"bytes32","name":"merkleRoot","type":"bytes32"},{"internalType":"bool","name":"isPublic","type":"bool"}],"internalType":"struct SomniaNFT.Phase","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"isAdmin","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"maxSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"bytes32[]","name":"proof","type":"bytes32[]"}],"name":"mint","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"mintDutch","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"bytes32[]","name":"proof","type":"bytes32[]"}],"name":"mintWithERC20","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"mintedPerWallet","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"ownerMint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"paused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"paymentToken","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"phases","outputs":[{"internalType":"uint256","name":"start","type":"uint256"},{"internalType":"uint256","name":"end","type":"uint256"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"uint256","name":"maxPerWallet","type":"uint256"},{"internalType":"bytes32","name":"merkleRoot","type":"bytes32"},{"internalType":"bool","name":"isPublic","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"revealed","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256","name":"salePrice","type":"uint256"}],"name":"royaltyInfo","outputs":[{"internalType":"address","name":"receiver","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"},{"internalType":"bool","name":"enabled","type":"bool"}],"name":"setAdmin","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"uri","type":"string"}],"name":"setBaseURI","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"uri","type":"string"}],"name":"setContractURI","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"phaseId","type":"uint256"}],"name":"setCurrentPhase","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"receiver","type":"address"},{"internalType":"uint96","name":"feeNumerator","type":"uint96"}],"name":"setDefaultRoyalty","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"newMax","type":"uint256"}],"name":"setMaxSupply","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_paused","type":"bool"}],"name":"setPaused","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"bool","name":"enabled","type":"bool"}],"name":"setPaymentToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_revealed","type":"bool"}],"name":"setRevealed","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"string","name":"uri","type":"string"}],"name":"setTokenURI","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256[]","name":"tokenIds","type":"uint256[]"},{"internalType":"string[]","name":"uris","type":"string[]"}],"name":"setTokenURIs","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"uri","type":"string"}],"name":"setUnrevealedURI","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"startPrice","type":"uint256"},{"internalType":"uint256","name":"endPrice","type":"uint256"},{"internalType":"uint256","name":"startTime","type":"uint256"},{"internalType":"uint256","name":"endTime","type":"uint256"}],"name":"startDutchAuction","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"stopDutchAuction","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"unrevealedURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"updateCurrentPhase","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"phaseId","type":"uint256"},{"internalType":"uint256","name":"start","type":"uint256"},{"internalType":"uint256","name":"end","type":"uint256"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"uint256","name":"maxPerWallet","type":"uint256"},{"internalType":"bytes32","name":"merkleRoot","type":"bytes32"},{"internalType":"bool","name":"isPublic","type":"bool"}],"name":"updatePhase","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"useERC20","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}]');const UniversalLoading=({message:n="Loading...",progress:a=null,showVideo:o=!0,showBackground:i=!0,size:u="default",className:d="",onComplete:m=null,autoProgress:g=!1,minDuration:y=2e3,showProgress:v=!0,showDots:x=!0})=>{const[N,k]=ot.useState(0);const[E,S]=ot.useState(!1);const[A,_]=ot.useState(0);const j=ot.useRef(null);const I=ot.useRef(Date.now());ot.useEffect(()=>{const n=setInterval(()=>{k(n=>(n+1)%4)},500);return()=>clearInterval(n)},[]);ot.useEffect(()=>{if(g&&null===a){const n=setInterval(()=>{_(a=>{if(a>=100){clearInterval(n);m&&m();return 100}return a+1})},50);return()=>clearInterval(n)}},[g,a,m]);ot.useEffect(()=>{if(m&&!g){const n=Date.now()-I.current;const a=Math.max(0,y-n);if(a>0){const n=setTimeout(()=>{m()},a);return()=>clearTimeout(n)}m()}},[m,g,y]);const getSizeClasses=()=>{switch(u){case"small":return{container:"py-8",video:"w-32 h-32",logo:"text-2xl",message:"text-sm",progress:"w-48 h-2",dots:"w-2 h-2"};case"large":return{container:"py-20",video:"w-96 h-96",logo:"text-5xl",message:"text-xl",progress:"w-96 h-4",dots:"w-4 h-4"};default:return{container:"py-16",video:"w-64 h-64",logo:"text-4xl",message:"text-lg",progress:"w-80 h-3",dots:"w-3 h-3"}}};const O=getSizeClasses();const R=null!==a?a:A;return at.jsxs("div",{className:`flex flex-col items-center justify-center ${O.container} ${d}`,children:[i&&at.jsx(BackgroundCircles,{}),o&&!E?at.jsx("div",{className:"relative z-10 mb-8",children:at.jsx("video",{ref:j,src:oI,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:`${O.video} object-cover rounded-2xl shadow-2xl`,onError:n=>{console.warn("Failed to load video:",n);S(!0);n.target.style.display="none"}})}):o&&E?at.jsx("div",{className:`relative z-10 mb-8 ${O.video} bg-zinc-800/80 backdrop-blur-sm rounded-2xl shadow-2xl flex items-center justify-center border border-zinc-700/30`,children:at.jsx("div",{className:"text-center",children:at.jsx("video",{src:oI,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:`${O.video} object-cover rounded-2xl`})})}):at.jsx("div",{className:"mb-8",children:at.jsx("video",{src:oI,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:`${O.video} object-cover rounded-2xl shadow-2xl`})}),at.jsxs("p",{className:`text-zinc-400 ${O.message} mb-6 text-center`,children:[n,x&&N>0&&at.jsx("span",{className:"ml-1",children:".".repeat(N)})]}),v&&at.jsxs("div",{className:`max-w-full mx-auto mb-6 ${O.progress}`,children:[at.jsx("div",{className:"bg-zinc-800/80 backdrop-blur-sm rounded-full h-full overflow-hidden border border-zinc-700/30",children:at.jsx("div",{className:"bg-gradient-to-r from-[#00A3FF] to-[#FF1CF7] h-full transition-all duration-300 ease-out rounded-full",style:{width:`${R}%`}})}),at.jsx("div",{className:"flex justify-center items-center mt-2",children:at.jsxs("span",{className:"text-white font-semibold",children:[Math.round(R),"%"]})})]}),x&&at.jsx("div",{className:"flex justify-center gap-2",children:[0,1,2].map(n=>at.jsx("div",{className:`bg-gradient-to-r from-[#00A3FF] to-[#FF1CF7] rounded-full animate-pulse ${O.dots}`,style:{animationDelay:.2*n+"s",animationDuration:"1s"}},n))})]})};const LoadingSpinner=({message:n="Loading...",progress:a=null,showLogo:o=!0,size:i="default",className:u="",showVideo:d=!1,showBackground:m=!1,showProgress:g=!1,showDots:y=!1})=>at.jsx(UniversalLoading,{message:n,progress:a,showVideo:d,showBackground:m,size:i,className:u,showProgress:g,showDots:y});const Pagination=({currentPage:n,totalPages:a,onPageChange:o,itemsPerPage:i=5,totalItems:u,className:d=""})=>{if(a<=1)return null;const m=n*i+1;const g=Math.min((n+1)*i,u);const getVisiblePages=()=>{const o=[];const i=5;if(a<=i)for(let n=0;n<a;n++)o.push(n);else if(n<=2){for(let n=0;n<4;n++)o.push(n);o.push("...");o.push(a-1)}else if(n>=a-3){o.push(0);o.push("...");for(let n=a-4;n<a;n++)o.push(n)}else{o.push(0);o.push("...");for(let a=n-1;a<=n+1;a++)o.push(a);o.push("...");o.push(a-1)}return o};const y=getVisiblePages();return at.jsxs("div",{className:`flex items-center justify-between ${d}`,children:[at.jsxs("div",{className:"text-sm text-zinc-400",children:["Showing ",m," to ",g," of ",u," collections"]}),at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsx("button",{onClick:()=>o(n-1),disabled:0===n,className:"p-2 rounded-lg transition-all duration-200 "+(0===n?"bg-zinc-800/50 text-zinc-600 cursor-not-allowed":"bg-zinc-800/80 text-white hover:bg-zinc-700/80 hover:scale-105"),children:at.jsx(C_,{className:"w-4 h-4"})}),at.jsx("div",{className:"flex items-center gap-1",children:y.map((a,i)=>at.jsx("button",{onClick:()=>"number"==typeof a&&o(a),disabled:"number"!=typeof a,className:"px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 "+(a===n?"bg-gradient-to-r from-[#00A3FF] to-[#FF1CF7] text-white":"number"==typeof a?"bg-zinc-800/80 text-zinc-300 hover:bg-zinc-700/80 hover:text-white":"text-zinc-500 cursor-default"),children:"..."===a?"...":a+1},i))}),at.jsx("button",{onClick:()=>o(n+1),disabled:n>=a-1,className:"p-2 rounded-lg transition-all duration-200 "+(n>=a-1?"bg-zinc-800/50 text-zinc-600 cursor-not-allowed":"bg-zinc-800/80 text-white hover:bg-zinc-700/80 hover:scale-105"),children:at.jsx(S_,{className:"w-4 h-4"})})]})]})};class wI extends it.Component{constructor(n){super(n);__publicField(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0}}componentDidCatch(n,a){this.setState({error:n,errorInfo:a});console.error("Error caught by boundary:",n,a)}render(){return this.state.hasError?at.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-6",children:at.jsxs("div",{className:"max-w-md w-full bg-zinc-900/50 backdrop-blur-sm rounded-2xl border border-zinc-700/30 p-8 text-center",children:[at.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:at.jsx(VT,{className:"w-8 h-8 text-red-400"})}),at.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Something went wrong"}),at.jsx("p",{className:"text-zinc-400 mb-6",children:"We encountered an unexpected error. Please try refreshing the page or contact support if the problem persists."}),at.jsxs("div",{className:"space-y-3",children:[at.jsxs("button",{onClick:this.handleRetry,className:"w-full px-4 py-2 bg-gradient-to-r from-[#00A3FF] to-[#FF1CF7] text-white rounded-lg hover:from-[#0095E6] hover:to-[#E61CC7] transition-all duration-300 flex items-center justify-center gap-2",children:[at.jsx(TT,{className:"w-4 h-4"}),"Try Again"]}),at.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-zinc-800/50 text-zinc-300 rounded-lg hover:bg-zinc-700/50 transition-colors",children:"Refresh Page"})]}),!1]})}):this.props.children}}const useActiveCollections=()=>{const[a,o]=ot.useState([]);const[i,u]=ot.useState(!0);const[d,m]=ot.useState(null);const[g,y]=ot.useState(0);const shouldRefetch=()=>{const n=Date.now();const a=n-g;return a>6e5};const fetchActiveCollections=async(i=!1)=>{if(!i&&!shouldRefetch()&&a.length>0)console.log("📦 Using cached collections data");else try{console.log("🔄 Fetching active collections from API...");const a=new AbortController;const u=setTimeout(()=>a.abort(),1e4);const d=i?`/api/active-collections?ts=${Date.now()}`:"/api/active-collections";const g=await fetch(d,{method:"GET",headers:{"Content-Type":"application/json"},signal:a.signal});clearTimeout(u);if(!g.ok){if(404===g.status)throw new Error("Active collections data not available yet. Please wait for the indexer to run.");if(429===g.status)throw new Error("Too many requests. Please wait a moment and try again.");throw new Error(`HTTP ${g.status}: ${g.statusText}`)}const v=await g.json();console.log("✅ Received active collections from API:",{totalCollections:v.totalCollections,validCollections:v.validCollections,activeCollections:v.activeCollections,lastUpdate:v.lastUpdate,collections:v.collections.map(n=>({address:n.address,name:n.name,banner:n.banner,metadataBanner:n.metadata?.banner,cover:n.cover,hasBanner:!(!n.banner&&!n.metadata?.banner),hasCover:!!n.cover,nfts:n.nfts||[],hasNFTs:!!(n.nfts&&n.nfts.length>0),firstNFTImage:n.nfts&&n.nfts.length>0?n.nfts[0].image||n.nfts[0].image_url||n.nfts[0].media_url:null}))});try{const{filterOutBlacklisted:a}=await __vitePreload(async()=>{const{filterOutBlacklisted:a}=await n(async()=>{const{filterOutBlacklisted:n}=await import("./blacklist-DrID8I7O-DrID8I7O.js");return{filterOutBlacklisted:n}},[]);return{filterOutBlacklisted:a}},[]);const i=await a(v.collections||[]);o(i)}catch{o(v.collections||[])}y(Date.now());m(null)}catch(d){console.error("❌ Failed to fetch active collections:",d);"AbortError"===d.name?m("Request timeout. Please check your connection."):d.message.includes("Too many requests")?m("Server is busy. Please wait a moment and refresh."):m(d.message);0===a.length&&o([])}finally{u(!1)}};ot.useEffect(()=>{fetchActiveCollections(!0);const n=setInterval(()=>fetchActiveCollections(),6e5);return()=>clearInterval(n)},[]);const v=ot.useMemo(()=>a,[a]);return{collections:v,loading:i,error:d,refetch:()=>fetchActiveCollections(!0)}};const ImagePreloader=({images:n=[],priority:a=!1,onProgress:o=null,onComplete:i=null})=>{const u=ot.useRef(0);const d=ot.useRef(n.length);const m=ot.useRef(!1);ot.useEffect(()=>{if(!n.length||m.current)return;m.current=!0;u.current=0;const preloadImage=n=>new Promise((a,i)=>{const m=new Image;m.onload=()=>{u.current++;o&&o(u.current,d.current);a(n)};m.onerror=()=>{u.current++;o&&o(u.current,d.current);i(new Error(`Failed to load: ${n}`))};m.src=n});const preloadAll=async()=>{try{if(a)await Promise.allSettled(n.map(preloadImage));else for(const a of n)await preloadImage(a);i&&i(u.current,d.current)}catch(o){}finally{m.current=!1}};preloadAll()},[n,a,o,i]);return null};const PerformanceMonitor$1=({enabled:n=!0,onMetrics:a=null,showUI:o=!1})=>{const[i,u]=ot.useState({});const[d,m]=ot.useState(!1);const g=ot.useRef(null);const y=ot.useRef(null);const getPerformanceMetrics=()=>{if(!window.performance)return{};const n=performance.getEntriesByType("navigation")[0];const a=performance.getEntriesByType("paint");n&&(y.current=n);const o={dns:n?.domainLookupEnd-n?.domainLookupStart||0,tcp:n?.connectEnd-n?.connectStart||0,ttfb:n?.responseStart-n?.requestStart||0,domContentLoaded:n?.domContentLoadedEventEnd-n?.domContentLoadedEventStart||0,loadComplete:n?.loadEventEnd-n?.loadEventStart||0,totalTime:n?.loadEventEnd-n?.navigationStart||0,firstPaint:a.find(n=>"first-paint"===n.name)?.startTime||0,firstContentfulPaint:a.find(n=>"first-contentful-paint"===n.name)?.startTime||0,memory:window.performance.memory?{usedJSHeapSize:window.performance.memory.usedJSHeapSize,totalJSHeapSize:window.performance.memory.totalJSHeapSize,jsHeapSizeLimit:window.performance.memory.jsHeapSizeLimit,memoryUsagePercent:Math.round(window.performance.memory.usedJSHeapSize/window.performance.memory.totalJSHeapSize*100)}:null,userTiming:performance.getEntriesByType("measure").reduce((n,a)=>{n[a.name]=a.duration;return n},{}),timestamp:Date.now(),userAgent:navigator.userAgent,connection:navigator.connection?{effectiveType:navigator.connection.effectiveType,downlink:navigator.connection.downlink,rtt:navigator.connection.rtt}:null,resources:performance.getEntriesByType("resource").length,resourceTypes:performance.getEntriesByType("resource").reduce((n,a)=>{const o=a.initiatorType||"other";n[o]=(n[o]||0)+1;return n},{}),errors:window.errorCount||0,warnings:window.warningCount||0};return o};const observeErrors=()=>{window.errorCount=0;window.warningCount=0;window.addEventListener("error",n=>{window.errorCount++;console.error("🚨 Performance Monitor - Error:",n.error)});window.addEventListener("unhandledrejection",n=>{window.warningCount++;console.warn("⚠️ Performance Monitor - Unhandled Promise Rejection:",n.reason)})};const observeCoreWebVitals=()=>{if(window.PerformanceObserver)try{g.current=new PerformanceObserver(n=>{const a=n.getEntries();const o=a[a.length-1];u(n=>({...n,lcp:o.startTime,lcpElement:o.element?.tagName||"unknown"}))});g.current.observe({entryTypes:["largest-contentful-paint"]});const n=new PerformanceObserver(n=>{const a=n.getEntries();a.forEach(n=>{u(a=>({...a,fid:n.processingStart-n.startTime,fidElement:n.name||"unknown"}))})});n.observe({entryTypes:["first-input"]});const a=new PerformanceObserver(n=>{let a=0;n.getEntries().forEach(n=>{n.hadRecentInput||(a+=n.value)});u(n=>({...n,cls:a}))});a.observe({entryTypes:["layout-shift"]});const o=new PerformanceObserver(n=>{n.getEntries().forEach(n=>{"navigation"===n.entryType&&u(a=>({...a,ttfb:n.responseStart-n.requestStart}))})});o.observe({entryTypes:["navigation"]})}catch(n){console.warn("Performance monitoring setup failed:",n)}};const analyzePerformance=()=>{const n=getPerformanceMetrics();const o={...i,...n};const d={lcp:o.lcp<2500?"good":o.lcp<4e3?"needs-improvement":"poor",fid:o.fid<100?"good":o.fid<300?"needs-improvement":"poor",cls:o.cls<.1?"good":o.cls<.25?"needs-improvement":"poor",ttfb:o.ttfb<800?"good":o.ttfb<1800?"needs-improvement":"poor"};const m=Object.values(d).reduce((n,a)=>{"good"===a?n+=1:"needs-improvement"===a&&(n+=.5);return n},0)/Object.keys(d).length;const g={...o,scores:d,overallScore:Math.round(100*m),timestamp:Date.now()};u(g);a&&a(g);return g};ot.useEffect(()=>{if(!n)return;m(!0);const startMonitoring=()=>{observeErrors();observeCoreWebVitals();setTimeout(()=>{analyzePerformance()},1e3);const n=setInterval(analyzePerformance,3e4);return()=>clearInterval(n)};if("complete"!==document.readyState){window.addEventListener("load",startMonitoring);return()=>window.removeEventListener("load",startMonitoring)}startMonitoring();return()=>{g.current&&g.current.disconnect()}},[n,a]);ot.useEffect(()=>{i.overallScore&&window.gtag&&window.gtag("event","performance_metrics",{event_category:"performance",value:i.overallScore,custom_parameters:{lcp:i.lcp,fid:i.fid,cls:i.cls,ttfb:i.ttfb}})},[i.overallScore]);return o&&d?at.jsxs("div",{className:"fixed bottom-4 right-4 bg-zinc-900/90 backdrop-blur-sm border border-zinc-700 rounded-lg p-4 text-white text-sm z-50",children:[at.jsx("div",{className:"font-semibold mb-2",children:"Performance Monitor"}),i.overallScore&&at.jsxs("div",{className:"mb-2",children:[at.jsx("span",{className:"text-zinc-400",children:"Overall Score:"}),at.jsxs("span",{className:"ml-2 font-bold "+(i.overallScore>=80?"text-green-400":i.overallScore>=60?"text-yellow-400":"text-red-400"),children:[i.overallScore,"/100"]})]}),at.jsxs("div",{className:"space-y-1 text-xs",children:[i.lcp&&at.jsxs("div",{className:"flex justify-between",children:[at.jsx("span",{children:"LCP:"}),at.jsxs("span",{className:"good"===i.scores?.lcp?"text-green-400":"text-red-400",children:[Math.round(i.lcp),"ms"]})]}),i.fid&&at.jsxs("div",{className:"flex justify-between",children:[at.jsx("span",{children:"FID:"}),at.jsxs("span",{className:"good"===i.scores?.fid?"text-green-400":"text-red-400",children:[Math.round(i.fid),"ms"]})]}),i.cls&&at.jsxs("div",{className:"flex justify-between",children:[at.jsx("span",{children:"CLS:"}),at.jsx("span",{className:"good"===i.scores?.cls?"text-green-400":"text-red-400",children:i.cls.toFixed(3)})]})]})]}):null};const PerformanceStats$1=({metrics:n,showDetails:a=!1,isVisible:o=!1})=>{const[i,u]=ot.useState(!1);if(!o||!n||0===Object.keys(n).length)return null;const getScoreColor=n=>n>=80?"text-green-400":n>=60?"text-yellow-400":"text-red-400";const getScoreIcon=n=>n>=80?at.jsx(T_,{className:"w-4 h-4"}):at.jsx(VT,{className:"w-4 h-4"});const formatBytes=n=>{if(!n)return"0 B";const a=1024;const o=["B","KB","MB","GB"];const i=Math.floor(Math.log(n)/Math.log(a));return parseFloat((n/Math.pow(a,i)).toFixed(2))+" "+o[i]};const formatTime=n=>n?n<1e3?`${Math.round(n)}ms`:`${(n/1e3).toFixed(2)}s`:"0ms";return at.jsxs("div",{className:"bg-zinc-900/90 backdrop-blur-sm border border-zinc-700 rounded-lg p-4 text-white text-sm",children:[at.jsxs("div",{className:"flex items-center justify-between mb-4",children:[at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsx(b_,{className:"w-5 h-5 text-blue-400"}),at.jsx("span",{className:"font-semibold",children:"Performance Stats"})]}),at.jsx("button",{onClick:()=>u(!i),className:"text-zinc-400 hover:text-white transition-colors",children:i?"−":"+"})]}),n.overallScore&&at.jsxs("div",{className:"mb-4 p-3 bg-zinc-800/50 rounded-lg",children:[at.jsxs("div",{className:"flex items-center justify-between mb-2",children:[at.jsx("span",{className:"text-zinc-400",children:"Overall Score"}),at.jsxs("div",{className:`flex items-center gap-2 ${getScoreColor(n.overallScore)}`,children:[getScoreIcon(n.overallScore),at.jsxs("span",{className:"font-bold text-lg",children:[n.overallScore,"/100"]})]})]}),at.jsx("div",{className:"w-full bg-zinc-700 rounded-full h-2",children:at.jsx("div",{className:"h-2 rounded-full transition-all duration-300 "+(n.overallScore>=80?"bg-green-500":n.overallScore>=60?"bg-yellow-500":"bg-red-500"),style:{width:`${n.overallScore}%`}})})]}),at.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[n.lcp&&at.jsxs("div",{className:"flex items-center gap-2 p-2 bg-zinc-800/30 rounded",children:[at.jsx(Bj,{className:"w-4 h-4 text-blue-400"}),at.jsxs("div",{children:[at.jsx("div",{className:"text-xs text-zinc-400",children:"LCP"}),at.jsx("div",{className:"font-medium",children:formatTime(n.lcp)})]})]}),n.fid&&at.jsxs("div",{className:"flex items-center gap-2 p-2 bg-zinc-800/30 rounded",children:[at.jsx(h_,{className:"w-4 h-4 text-green-400"}),at.jsxs("div",{children:[at.jsx("div",{className:"text-xs text-zinc-400",children:"FID"}),at.jsx("div",{className:"font-medium",children:formatTime(n.fid)})]})]}),n.cls&&at.jsxs("div",{className:"flex items-center gap-2 p-2 bg-zinc-800/30 rounded",children:[at.jsx(VT,{className:"w-4 h-4 text-yellow-400"}),at.jsxs("div",{children:[at.jsx("div",{className:"text-xs text-zinc-400",children:"CLS"}),at.jsx("div",{className:"font-medium",children:n.cls.toFixed(3)})]})]}),n.ttfb&&at.jsxs("div",{className:"flex items-center gap-2 p-2 bg-zinc-800/30 rounded",children:[at.jsx(z_,{className:"w-4 h-4 text-purple-400"}),at.jsxs("div",{children:[at.jsx("div",{className:"text-xs text-zinc-400",children:"TTFB"}),at.jsx("div",{className:"font-medium",children:formatTime(n.ttfb)})]})]})]}),i&&at.jsxs("div",{className:"space-y-3 border-t border-zinc-700 pt-3",children:[n.memory&&at.jsxs("div",{className:"flex items-center gap-2 p-2 bg-zinc-800/30 rounded",children:[at.jsx(rT,{className:"w-4 h-4 text-cyan-400"}),at.jsxs("div",{className:"flex-1",children:[at.jsx("div",{className:"text-xs text-zinc-400",children:"Memory Usage"}),at.jsxs("div",{className:"font-medium",children:[formatBytes(n.memory.usedJSHeapSize)," / ",formatBytes(n.memory.totalJSHeapSize)]}),at.jsxs("div",{className:"text-xs text-zinc-500",children:[n.memory.memoryUsagePercent,"% used"]})]})]}),n.connection&&at.jsxs("div",{className:"flex items-center gap-2 p-2 bg-zinc-800/30 rounded",children:[at.jsx(Nj,{className:"w-4 h-4 text-green-400"}),at.jsxs("div",{className:"flex-1",children:[at.jsx("div",{className:"text-xs text-zinc-400",children:"Network"}),at.jsxs("div",{className:"font-medium",children:[n.connection.effectiveType," • ",n.connection.downlink,"Mbps"]}),at.jsxs("div",{className:"text-xs text-zinc-500",children:["RTT: ",n.connection.rtt,"ms"]})]})]}),at.jsxs("div",{className:"flex items-center gap-2 p-2 bg-zinc-800/30 rounded",children:[at.jsx(b_,{className:"w-4 h-4 text-orange-400"}),at.jsxs("div",{className:"flex-1",children:[at.jsx("div",{className:"text-xs text-zinc-400",children:"Resources Loaded"}),at.jsxs("div",{className:"font-medium",children:[n.resources," total"]}),n.resourceTypes&&at.jsx("div",{className:"text-xs text-zinc-500",children:Object.entries(n.resourceTypes).slice(0,3).map(([n,a])=>at.jsxs("span",{className:"mr-2",children:[n,": ",a]},n))})]})]}),(n.errors>0||n.warnings>0)&&at.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-900/30 rounded border border-red-500/30",children:[at.jsx(VT,{className:"w-4 h-4 text-red-400"}),at.jsxs("div",{className:"flex-1",children:[at.jsx("div",{className:"text-xs text-red-400",children:"Issues Detected"}),at.jsxs("div",{className:"font-medium text-red-300",children:[n.errors," errors • ",n.warnings," warnings"]})]})]}),at.jsxs("div",{className:"text-xs text-zinc-500 text-center",children:["Last updated: ",new Date(n.timestamp).toLocaleTimeString()]})]})]})};const Home=()=>{const{collections:n,loading:a,error:o}=useActiveCollections();const[i,u]=ot.useState(0);const[d,m]=ot.useState(!1);const[g,y]=ot.useState("active");const[v,x]=ot.useState(0);const N=ot.useRef(null);const k=useNavigate();const{searchTerm:E,filters:S,updateSearch:A}=useSearch();const[_,j]=ot.useState({});const[I,O]=ot.useState(!1);const R=ot.useMemo(()=>window.innerWidth<768,[]);const B=ot.useMemo(()=>window.innerWidth>=768&&window.innerWidth<1024,[]);const M=ot.useMemo(()=>{if(!n||0===n.length)return[];const a=[];n.slice(0,3).forEach(n=>{n.cover&&a.push(n.cover);n.bannerImage&&a.push(n.bannerImage);n.firstNFTImage&&a.push(n.firstNFTImage)});n.slice(0,6).forEach(n=>{n.cover&&a.push(n.cover);n.firstNFTImage&&a.push(n.firstNFTImage)});return[...new Set(a)]},[n]);const z=ot.useMemo(()=>Math.floor(Date.now()/1e3),[]);const L=ot.useMemo(()=>Math.floor(new Date("2025-06-29T00:00:00Z").getTime()/1e3),[]);ot.useCallback(n=>n.totalSupply&&void 0!==n.minted&&Number(n.minted)>=Number(n.totalSupply),[]);const D=ot.useCallback(n=>{const a=n.phases||{};if(0===Object.values(a).length)return!1;const o=Object.values(a).every(n=>Number(n.end)<z);const i=n.totalSupply&&void 0!==n.minted&&Number(n.minted)>=Number(n.totalSupply);"Somniac visioner"!==n.name&&"True Friendship in Somnia"!==n.name||console.log("🔍 isSaleEnded debug for:",n.name,{phases:a,allPhasesEnded:o,soldOut:i,now:z,phaseEnds:Object.values(a).map(n=>({end:n.end,endTime:new Date(1e3*n.end)}))});return i||o},[z]);const W=ot.useCallback(n=>{if(!n||0===Object.values(n).length)return!1;const a=Object.values(n).some(n=>Number(n.start)<=z&&z<=Number(n.end));if(n&&Object.keys(n).length>0){const o=Object.values(n)[0];!o||"Somniac visioner"!==o.name&&"True Friendship in Somnia"!==o.name||console.log("🔍 isActiveSale debug:",{phases:n,hasActive:a,now:z,phaseTimes:Object.values(n).map(n=>({start:n.start,end:n.end,startTime:new Date(1e3*n.start),endTime:new Date(1e3*n.end),isActive:Number(n.start)<=z&&z<=Number(n.end)}))})}return a},[z]);const H=ot.useCallback(n=>n&&Object.values(n).some(n=>Number(n.start)>z),[z]);const q=ot.useCallback(n=>n.phases||n.metadata?.phases||{},[]);const G=ot.useCallback(n=>{const a=q(n);return a&&0!==Object.values(a).length?Math.max(...Object.values(a).map(n=>Number(n.end))):0},[q]);const V=ot.useCallback(n=>{const a=q(n);if(!a)return null;const o=Math.floor(Date.now()/1e3);for(const[i,u]of Object.entries(a))if(Number(u.start)<=o&&o<=Number(u.end))return{name:i,...u};return null},[q]);const formatPrice2=n=>{const a=Number(n);return isFinite(a)?0===a?"0":a>=1?a.toLocaleString(void 0,{maximumFractionDigits:2}):a>=.1?a.toLocaleString(void 0,{maximumFractionDigits:3}):a>=.01?a.toLocaleString(void 0,{maximumFractionDigits:4}):a.toLocaleString(void 0,{maximumFractionDigits:6}):"0"};const Z=ot.useCallback(n=>{const a=V(n);return a?a.price:"0"},[V]);const Y=ot.useMemo(()=>{const a=n.filter(n=>{const a=q(n);const o=W(a)&&!D(n);"Somniac visioner"!==n.name&&"True Friendship in Somnia"!==n.name||console.log("🔍 Debug collection:",n.name,{phases:a,isActiveSale:W(a),isSaleEnded:D(n),isActive:o});return o});console.log("🎯 Active collections found:",a.length,a.map(n=>n.name));return a},[n,q,W,D]);const J=ot.useMemo(()=>{console.log("🔍 Filtering collections for tab:",g,"Total collections:",n.length);let a=n.filter(n=>{const a=q(n);let o=!1;if("completed"===g){o=D(n)&&G(n)>=L;console.log(`📊 Collection ${n.name}: completed=${o}, isSaleEnded=${D(n)}, lastPhaseEnd=${G(n)}, cutoff=${L}`)}else if("active"===g){o=W(a)&&!D(n);console.log(`📊 Collection ${n.name}: active=${o}, isActiveSale=${W(a)}, isSaleEnded=${D(n)}`)}else if("upcoming"===g){const i=H(a);const u=W(a);o=(i||!u&&!D(n))&&!D(n);console.log(`📊 Collection ${n.name}: upcoming=${o}, hasUpcoming=${i}, hasActive=${u}, isSaleEnded=${D(n)}`)}return o});console.log(`✅ Filtered collections for ${g}:`,a.length);if(E){const n=E.toLowerCase();a=a.filter(a=>a.name.toLowerCase().includes(n)||a.description.toLowerCase().includes(n))}"all"!==S.priceRange&&(a=a.filter(n=>{const a=V(n);const o=a?parseFloat(a.price):0;switch(S.priceRange){case"low":return o<.1;case"medium":return o>=.1&&o<=1;case"high":return o>1;default:return!0}}));"all"!==S.supplyRange&&(a=a.filter(n=>{const a=n.totalSupply||0;switch(S.supplyRange){case"small":return a<1e3;case"medium":return a>=1e3&&a<=1e4;case"large":return a>1e4;default:return!0}}));"all"!==S.status&&(a=a.filter(n=>{const a=q(n);const o=Math.floor(Date.now()/1e3);switch(S.status){case"active":return Object.values(a).some(n=>Number(n.start)<=o&&o<=Number(n.end));case"upcoming":return Object.values(a).some(n=>Number(n.start)>o);case"completed":return D(n);default:return!0}}));return a},[n,g,E,S,q,D,W,H,G,L,V]);ot.useEffect(()=>{if(!(Y.length<=1||d)){N.current=setInterval(()=>{u(n=>(n+1)%Y.length)},5e3);return()=>{N.current&&clearInterval(N.current)}}},[Y.length,d]);ot.useEffect(()=>{E&&E.length>=2&&console.log("🔍 Performing search for term:",E)},[E]);ot.useEffect(()=>{console.log("📊 Home state:",{loading:a,error:o,collectionsCount:n.length,activeCollectionsCount:Y.length,shownCollectionsCount:J.length,activeTab:g,searchTerm:E,filters:S});n.length>0&&console.log("📋 Collections details:",n.map(n=>({name:n.name,address:n.address,phases:n.phases,totalSupply:n.totalSupply,minted:n.minted,hasPhases:Object.keys(n.phases||{}).length>0})))},[a,o,n.length,Y.length,J.length,g,E,S]);const X=ot.useCallback(()=>{m(!0);u(n=>(n-1+Y.length)%Y.length)},[Y.length]);const ee=ot.useCallback(()=>{m(!0);u(n=>(n+1)%Y.length)},[Y.length]);const te=ot.useCallback(()=>{Y[i]&&k(`/launchpad/collection/${Y[i].address}`)},[Y,i,k]);const ne=ot.useCallback(n=>{k(`/launchpad/collection/${n.address}`)},[k]);ot.useCallback(()=>{x(0)},[]);const re=ot.useCallback(({collection:n})=>{if(!n)return null;const a=localStorage.getItem(`collection_${n.address}_banner`);const o=n.metadata?.banner?getIpfsUrls(n.metadata.banner)[0]:null;const d=n.banner?n.banner.startsWith("ipfs://")?getIpfsUrls(n.banner)[0]:n.banner:null;const g=a||o||d||null;const y=localStorage.getItem(`collection_${n.address}_banner_position`)||"center center";const v=localStorage.getItem(`collection_${n.address}_banner_fit`)||"cover";const x=V(n);const N=Z(n);const k=n.totalSupply&&void 0!==n.minted&&Number(n.minted)>=Number(n.totalSupply);return at.jsxs("div",{className:"relative h-[250px] md:h-[400px] w-full overflow-hidden shadow-2xl border-b border-zinc-700/30 bg-zinc-900/80 backdrop-blur-sm z-10",children:[g?at.jsx("img",{src:g,alt:"banner",className:"absolute inset-0 w-full h-full object-cover",style:{objectPosition:y,objectFit:v},onError:n=>{console.warn("⚠️ Banner image failed to load:",g);n.target.style.display="none";const a=n.target.nextElementSibling;a&&(a.style.display="flex")}}):null,at.jsxs("div",{className:"flex items-center justify-center h-full w-full "+(g?"hidden":""),style:{display:g?"none":"flex"},children:[at.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-800 via-zinc-900 to-black"}),at.jsxs("div",{className:"relative z-10 text-center text-white px-4",children:[at.jsx("div",{className:"text-2xl md:text-4xl font-bold mb-2 md:mb-4 bg-gradient-to-r from-blue-500 to-pink-500 bg-clip-text text-transparent",children:n.name}),at.jsx("div",{className:"hidden md:block text-xl text-zinc-300 mb-2",children:n.description?n.description.slice(0,100)+"...":"Amazing NFT Collection"}),at.jsx("div",{className:"text-sm md:text-base text-zinc-400",children:"Discover and mint unique NFTs"})]})]}),at.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-zinc-900/60 via-zinc-900/20 to-transparent"}),at.jsx("div",{className:"absolute top-3 md:top-6 right-3 md:right-6 z-30",children:k?at.jsx("div",{className:"bg-pink-500/20 text-pink-400 px-3 py-1.5 md:px-4 md:py-2 rounded-full text-xs md:text-sm font-medium border border-pink-500/30",children:"Sold out"}):x?at.jsx("div",{className:"bg-green-500/20 text-green-400 px-3 py-1.5 md:px-4 md:py-2 rounded-full text-xs md:text-sm font-medium border border-green-500/30 animate-pulse",children:"Live"}):at.jsx("div",{className:"bg-blue-500/20 text-blue-400 px-3 py-1.5 md:px-4 md:py-2 rounded-full text-xs md:text-sm font-medium border border-blue-500/30",children:"Coming soon"})}),at.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 md:p-8 z-20",children:at.jsxs("div",{className:"flex items-end gap-3 md:gap-6",children:[at.jsx("img",{src:n.cover||n.firstNFTImage||n.bannerImage||"/placeholder-banner.jpg",alt:n.name,className:"w-20 h-20 md:w-32 md:h-32 object-cover rounded-xl border border-zinc-700/30 flex-shrink-0",onError:a=>{console.warn("⚠️ Cover image failed to load:",a.target.src);n.firstNFTImage&&n.firstNFTImage!==a.target.src?a.target.src=n.firstNFTImage:a.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiBmaWxsPSIjMzM0MTU1Ii8+CjxjaXJjbGUgY3g9IjY0IiBjeT0iNjQiIHI9IjMyIiBmaWxsPSIjNjY3MzgwIi8+Cjwvc3ZnPgo="}}),at.jsxs("div",{className:"flex-1",children:[at.jsx("h2",{onClick:()=>window.innerWidth<768&&te(),className:"text-xl md:text-3xl font-bold text-white drop-shadow-lg mb-2 md:mb-4 "+(window.innerWidth<768?"cursor-pointer hover:text-pink-400 transition-colors duration-200":""),children:n.name}),at.jsx("div",{className:"hidden md:block",children:at.jsx("p",{className:"text-zinc-300 text-base leading-relaxed mb-6",children:n.description||"No description available"})}),at.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-2 md:gap-4",children:[at.jsxs("div",{className:"bg-zinc-900/50 backdrop-blur-sm px-3 py-2 md:px-4 md:py-2 rounded-xl border border-zinc-700/30 w-full md:w-[180px]",children:[at.jsx("span",{className:"text-zinc-400 text-xs md:text-sm",children:"Minted:"}),at.jsxs("span",{className:"text-white font-semibold ml-2 text-sm md:text-base",children:[Number(n.minted)||0," / ",Number(n.totalSupply)||0]})]}),at.jsx("div",{className:"bg-zinc-900/50 backdrop-blur-sm px-3 py-2 md:px-4 md:py-2 rounded-xl border border-zinc-700/30 w-full md:w-[180px]",children:at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsx("span",{className:"text-zinc-400 text-xs md:text-sm",children:"Price:"}),at.jsxs("div",{className:"flex items-center gap-1",children:[at.jsx("img",{src:i_,alt:"STT",className:"w-3 h-3 md:w-4 md:h-4"}),at.jsxs("span",{className:"text-white font-semibold text-sm md:text-base",children:[formatPrice2(N)," STT"]})]})]})})]})]})]})}),at.jsxs("button",{onClick:te,className:"hidden md:inline-flex absolute bottom-4 md:bottom-6 right-4 md:right-6 items-center gap-2 px-3 py-2 md:px-5 md:py-2.5 bg-gradient-to-r from-[#00A3FF] to-[#FF1CF7] text-white font-medium rounded-lg hover:from-[#0095E6] hover:to-[#E61CC7] transition-all duration-300 hover:scale-105 shadow-lg hover:shadow-pink-500/25 text-xs md:text-sm z-30",children:["View",at.jsx(p_,{size:12,className:"md:w-3.5 md:h-3.5"})]}),Y.length>1&&at.jsxs(at.Fragment,{children:[at.jsx("button",{onClick:X,className:"absolute left-2 md:left-4 top-1/2 transform -translate-y-1/2 bg-black/40 backdrop-blur-sm border border-white/20 rounded-full p-1.5 md:p-2 hover:bg-black/60 transition-all duration-200 z-30",children:at.jsx("img",{src:iI,alt:"Previous",className:"w-4 h-4 md:w-5 md:h-5"})}),at.jsx("button",{onClick:ee,className:"absolute right-2 md:right-4 top-1/2 transform -translate-y-1/2 bg-black/40 backdrop-blur-sm border border-white/20 rounded-full p-1.5 md:p-2 hover:bg-black/60 transition-all duration-200 z-30",children:at.jsx("img",{src:cI,alt:"Next",className:"w-4 h-4 md:w-5 md:h-5"})}),at.jsx("div",{className:"absolute bottom-2 md:bottom-4 left-1/2 transform -translate-x-1/2 flex gap-1.5 md:gap-2 z-30",children:Y.map((n,a)=>at.jsx("button",{onClick:()=>{m(!0);u(a)},className:"w-1.5 h-1.5 md:w-2 md:h-2 rounded-full transition-all duration-200 "+(a===i?"bg-white":"bg-white/40 hover:bg-white/60")},a))})]})]})},[V,Z,te,Y.length]);const se=ot.useCallback(({collection:n,index:a})=>{const o=V(n);const i=Z(n);const u=n.totalSupply&&void 0!==n.minted&&Number(n.minted)>=Number(n.totalSupply);return at.jsxs("div",{onClick:()=>ne(n),className:"bg-zinc-900/50 backdrop-blur-sm rounded-2xl border border-zinc-700/30 p-3 md:p-4 hover:border-zinc-600/50 transition-all duration-300 hover:scale-105 cursor-pointer group","data-index":a,children:[at.jsx("div",{className:"aspect-square rounded-xl overflow-hidden mb-3 md:mb-4 border border-zinc-600/30",children:at.jsx(LazyImage,{src:n.cover||n.firstNFTImage||"/default-cover.png",alt:n.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",priority:a<6,sizes:R?"100vw":B?"50vw":"33vw",onError:a=>{console.warn("⚠️ Collection cover failed to load:",a.target.src);n.firstNFTImage&&n.firstNFTImage!==a.target.src?a.target.src=n.firstNFTImage:a.target.src="/default-cover.png"}})}),at.jsx("h3",{onClick:()=>window.innerWidth<768&&ne(n),className:"text-white font-semibold mb-2 truncate text-sm md:text-base "+(window.innerWidth<768?"cursor-pointer hover:text-pink-400 transition-colors duration-200":""),children:n.name}),at.jsxs("div",{className:"space-y-1.5 md:space-y-2 text-xs md:text-sm",children:[at.jsxs("div",{className:"flex items-center justify-between",children:[at.jsx("span",{className:"text-zinc-400",children:"Price:"}),at.jsxs("div",{className:"flex items-center gap-1",children:[at.jsx("img",{src:i_,alt:"STT",className:"w-2.5 h-2.5 md:w-3 md:h-3"}),at.jsx("span",{className:"text-white",children:formatPrice2(i)})]})]}),at.jsxs("div",{className:"flex items-center justify-between",children:[at.jsx("span",{className:"text-zinc-400",children:"Supply:"}),at.jsx("span",{className:"text-white",children:Number(n.totalSupply)||0})]}),at.jsxs("div",{className:"flex items-center justify-between",children:[at.jsx("span",{className:"text-zinc-400",children:"Minted:"}),at.jsx("span",{className:"text-white",children:Number(n.minted)||0})]})]}),at.jsx("div",{className:"mt-2 md:mt-3",children:u?at.jsx("div",{className:"text-center text-zinc-400 text-xs md:text-sm",children:"Finished"}):o?at.jsx("div",{className:"text-center text-green-400 text-xs md:text-sm",children:"Live"}):at.jsx("div",{className:"text-center text-blue-400 text-xs md:text-sm",children:"Coming soon"})})]})},[V,Z,ne]);const ae=ot.useCallback(()=>at.jsx("div",{className:"bg-zinc-900 border-b border-zinc-800 relative z-10",children:at.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-6",children:at.jsx("div",{className:"flex",children:[{id:"completed",name:"Completed Sales"},{id:"active",name:"Active Sales"},{id:"upcoming",name:"Upcoming Sales"}].map(n=>at.jsx("button",{onClick:()=>{y(n.id);x(0)},className:"py-3 md:py-4 px-3 md:px-6 font-medium transition-all duration-200 border-b-2 text-sm md:text-base "+(g===n.id?"text-white border-pink-500 bg-gradient-to-r from-pink-500/10 to-blue-500/10":"text-zinc-400 border-transparent hover:text-zinc-300 hover:bg-zinc-800/50"),children:n.name},n.id))})})}),[g]);const oe=ot.useCallback(({message:n,icon:a})=>at.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[at.jsx("div",{className:"w-16 h-16 bg-zinc-800/50 rounded-full flex items-center justify-center mb-4",children:at.jsx(a,{className:"w-8 h-8 text-zinc-500"})}),at.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Collections Found"}),at.jsx("p",{className:"text-zinc-400 max-w-md",children:n})]}),[]);return at.jsx(wI,{children:at.jsxs("div",{className:"min-h-screen bg-black text-white",children:[at.jsx(BackgroundCircles,{}),Y.length>0?at.jsx("div",{className:"relative z-10",children:at.jsx(re,{collection:Y[i]})}):at.jsxs("div",{className:"relative h-[250px] md:h-[400px] w-full overflow-hidden shadow-2xl border-b border-zinc-700/30 bg-zinc-900/80 backdrop-blur-sm z-10",children:[at.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-800 via-zinc-900 to-black"}),at.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:at.jsxs("div",{className:"text-center text-white",children:[at.jsx("h1",{className:"text-4xl font-bold mb-4 bg-gradient-to-r from-blue-500 to-pink-500 bg-clip-text text-transparent",children:"Welcome to Dreava"}),at.jsx("p",{className:"text-xl text-zinc-300 mb-6",children:"Discover amazing NFT collections"}),at.jsx("div",{className:"text-zinc-400",children:"No active sales at the moment"})]})})]}),at.jsx(ae,{}),at.jsx("div",{className:"relative z-10 py-6 md:py-8 pb-20 md:pb-24",children:at.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-6",children:[at.jsx(PerformanceMonitor$1,{onMetrics:j,showUI:!1}),Object.keys(_).length>0&&at.jsx("div",{className:"mb-6",children:at.jsx(PerformanceStats$1,{metrics:_,isVisible:"true"===localStorage.getItem("showPerformanceStats")})}),M.length>0&&at.jsx(ImagePreloader,{images:M,priority:!0,onComplete:()=>O(!0),onProgress:(n,a)=>{n===a&&O(!0)}}),a?at.jsx(LoadingSpinner,{message:"Loading collections",showVideo:!0,showBackground:!0,size:"large",showProgress:!1,showDots:!1}):o?at.jsxs("div",{className:"text-center py-16",children:[at.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:at.jsx(Aj,{className:"w-8 h-8 text-red-400"})}),at.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Error Loading Collections"}),at.jsx("p",{className:"text-zinc-400 mb-4",children:o}),at.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-gradient-to-r from-[#00A3FF] to-[#FF1CF7] text-white rounded-lg hover:from-[#0095E6] hover:to-[#E61CC7] transition-all duration-300",children:"Try Again"})]}):0===J.length?at.jsx(oe,{message:`No ${g} collections found. Check back later for new drops!`,icon:"completed"===g?ZT:"active"===g?z_:g_}):at.jsx(at.Fragment,{children:E?at.jsx(SearchResults,{collections:J,searchTerm:E,onCollectionClick:ne}):at.jsxs(at.Fragment,{children:[at.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 md:gap-6 mb-6 md:mb-8",children:J.slice(5*v,5*(v+1)).map((n,a)=>at.jsx(se,{collection:n,index:a},n.address))}),at.jsx(Pagination,{currentPage:v,totalPages:Math.ceil(J.length/5),onPageChange:x,totalItems:J.length,itemsPerPage:5})]})})]})})]})})};const xI=[{inputs:[{internalType:"address",name:"_feeRecipient",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!0,internalType:"address",name:"collection",type:"address"}],name:"CollectionCreated",type:"event"},{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"},{internalType:"uint256",name:"maxSupply_",type:"uint256"},{internalType:"string",name:"baseTokenURI_",type:"string"},{internalType:"string",name:"unrevealedURI_",type:"string"},{internalType:"string",name:"contractURI_",type:"string"},{internalType:"address",name:"royaltyRecipient_",type:"address"},{internalType:"uint96",name:"royaltyFeeNumerator_",type:"uint96"}],name:"createCollection",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bool",name:"_paused",type:"bool"}],name:"setPaused",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newFee",type:"uint256"}],name:"updateCreationFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newRecipient",type:"address"}],name:"updateFeeRecipient",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"collectionAddr",type:"address"},{internalType:"bool",name:"status",type:"bool"}],name:"verifyCollection",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"allCollections",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"collectionCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"collections",outputs:[{internalType:"address",name:"contractAddress",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"uint256",name:"createdAt",type:"uint256"},{internalType:"bool",name:"verified",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"creationFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"feeRecipient",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllCollections",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserCollections",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"userCollections",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}];const getApiBase$1=()=>{try{const n="undefined"!=typeof window;const a=n&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname);const o=n&&"5173"===String(window.location.port);if(a&&o)return"";const i="http://localhost:3000";if(i&&"string"==typeof i&&i.trim()){const n=i.trim().replace(/\/$/,"");if(/^https?:\/\//i.test(n))return n}}catch{}return""};const buildApiUrl$1=n=>{const a=getApiBase$1();const o=n.startsWith("/")?n:`/${n}`;return a?`${a}${o}`:o};const uploadFile=async n=>{console.log("📤 uploadFile called with:",n);const a=[buildApiUrl$1("/api/upload-file"),"/api/upload-file",buildApiUrl$1("/upload-file"),"/upload-file",buildApiUrl$1("/api/pin-file"),"/api/pin-file",buildApiUrl$1("/pin-file"),"/pin-file"];let o=null;for(const i of a)try{const a=new FormData;a.append("file",n);console.log(`📤 Sending request to ${i}`);const u=await fetch(i,{method:"POST",body:a});console.log("📤 Response status:",u.status,"for",i);if(!u.ok){let n={};try{n=await u.json()}catch{}console.error(`❌ Upload failed on ${i}:`,n);o=new Error(n.error||`Upload failed (${u.status}) at ${i}`);continue}const d=await u.json();console.log("📤 Upload response:",d);const m=d.gatewayUrl||d.url||d.cid;console.log("📤 Final result URL:",m);return d}catch(nL){console.error(`❌ Request error on ${i}:`,nL);o=nL;continue}throw o||new Error("File upload failed")};const uploadMetadata=async n=>{console.log("📋 uploadMetadata called with:",n);const a=[{url:buildApiUrl$1("/api/upload-metadata"),method:"POST",body:JSON.stringify({metadata:n}),headers:{"Content-Type":"application/json"}},{url:"/api/upload-metadata",method:"POST",body:JSON.stringify({metadata:n}),headers:{"Content-Type":"application/json"}},{url:buildApiUrl$1("/pin-json"),method:"POST",body:JSON.stringify({metadata:n}),headers:{"Content-Type":"application/json"}},{url:"/pin-json",method:"POST",body:JSON.stringify({metadata:n}),headers:{"Content-Type":"application/json"}}];let o=null;for(const i of a)try{console.log("📋 Trying metadata endpoint:",i.url);const n=await fetch(i.url,{method:i.method,headers:i.headers,body:i.body});console.log("📋 Metadata upload response status:",n.status,"for",i.url);if(!n.ok){const a=await n.json().catch(()=>({}));console.error("❌ Metadata upload failed:",a);o=new Error(a.error||`Metadata upload failed (${n.status}) at ${i.url}`);continue}const a=await n.json();console.log("📋 Metadata upload response data:",a);return{url:a.url||a.ipfsUri,...a}}catch(nL){console.error(`❌ Metadata request error on ${i.url}:`,nL);o=nL;continue}throw o||new Error("Metadata upload failed")};const NI="data:image/svg+xml,%3csvg%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M22.5187%2027.4077H6.22219C3.52187%2027.4077%201.33325%2025.2191%201.33325%2022.5187V6.22228C1.33325%203.52195%203.52187%201.33333%206.22219%201.33333H22.5187C25.219%201.33333%2027.4076%203.52195%2027.4076%206.22228V22.5187C27.4076%2025.2191%2025.219%2027.4077%2022.5187%2027.4077Z'%20fill='%2352525B'%3e%3c/path%3e%3cpath%20d='M27.1791%204.82062C27.3127%205.26714%2027.4072%205.73159%2027.4072%206.22212V22.5186C27.4072%2025.2189%2025.2186%2027.4075%2022.5183%2027.4075H6.22181C5.73129%2027.4075%205.26684%2027.313%204.82031%2027.1794C5.42654%2029.192%207.2713%2030.6668%209.4811%2030.6668H25.7776C28.4779%2030.6668%2030.6665%2028.4782%2030.6665%2025.7779V9.48141C30.6665%207.27161%2029.1917%205.42685%2027.1791%204.82062Z'%20fill='%2371717A'%3e%3c/path%3e%3cpath%20d='M18.4445%2012.7407C19.7945%2012.7407%2020.8889%2011.6463%2020.8889%2010.2962C20.8889%208.94619%2019.7945%207.85176%2018.4445%207.85176C17.0944%207.85176%2016%208.94619%2016%2010.2962C16%2011.6463%2017.0944%2012.7407%2018.4445%2012.7407Z'%20fill='%23A1A1AA'%3e%3c/path%3e%3cpath%20d='M6.22217%2021.5001C6.22217%2022.0574%206.67847%2022.5186%207.2407%2022.5186H21.5001C22.0623%2022.5186%2022.5186%2022.0655%2022.5186%2021.5001C22.5186%2020.1116%2021.7494%2016%2020.0742%2016C19.2479%2016%2017.9638%2017.6296%2016.8149%2017.6296C14.5334%2017.6296%2012.3333%2012.7407%2010.2963%2012.7407C8.25923%2012.7407%206.22217%2018.8128%206.22217%2021.5001Z'%20fill='%23A1A1AA'%3e%3c/path%3e%3c/svg%3e";const VideoSpinner=({type:n="processing",className:a="",size:o="md"})=>{const getSizeClasses=()=>{switch(o){case"sm":return"w-8 h-8";case"md":default:return"w-12 h-12";case"lg":return"w-20 h-20"}};return at.jsx("div",{className:`flex items-center justify-center ${a}`,children:at.jsx("div",{className:`${getSizeClasses()} bg-black rounded-full flex items-center justify-center overflow-hidden`,children:at.jsxs("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover",children:[at.jsx("source",{src:"/assets/videos/IMG.mov",type:"video/quicktime"}),at.jsx("source",{src:"/assets/videos/IMG.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})})})};const CancelWarningModal=({isVisible:n,onConfirm:a,onCancel:o,title:i="Cancel Upload",message:u="Are you sure you want to cancel this upload? All progress will be lost and you'll need to start over."})=>n?at.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[11000] flex items-center justify-center p-4",children:at.jsxs("div",{className:"relative bg-zinc-900 border border-zinc-700 rounded-2xl p-6 max-w-md w-full animate-fadeIn",tabIndex:-1,autoFocus:!0,children:[at.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[at.jsx("div",{className:"w-12 h-12 bg-red-500/20 border border-red-500/30 rounded-full flex items-center justify-center",children:at.jsx(VT,{size:24,className:"text-red-400"})}),at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-bold text-white",children:i}),at.jsx("p",{className:"text-zinc-400 text-sm",children:"This action cannot be undone"})]})]}),at.jsx("p",{className:"text-zinc-300 mb-6 leading-relaxed",children:u}),at.jsxs("div",{className:"flex gap-3",children:[at.jsx("button",{onClick:o,className:"flex-1 py-3 px-4 rounded-xl bg-zinc-700/50 hover:bg-zinc-600/50 text-white font-semibold transition-all duration-200 hover:scale-105",children:"Continue"}),at.jsx("button",{onClick:a,className:"flex-1 py-3 px-4 rounded-xl bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-semibold transition-all duration-200 hover:scale-105 shadow-lg hover:shadow-red-500/25",children:"Cancel Process"})]}),at.jsx("button",{onClick:o,className:"absolute top-4 right-4 text-zinc-400 hover:text-white transition-all duration-200 hover:scale-110","aria-label":"Close",children:at.jsx(Aj,{size:20})})]})}):null;const kI="0xb7C9318Ac06AA59fE3cDD8342769361bB0Cc3d09";const CI=["Art","Collectibles","Gaming","Music","Domains","Utility","Other"];const EI=["bg-blue-600","bg-pink-600","bg-green-600","bg-purple-600","bg-yellow-600","bg-red-600"];const CreateCollection=({onSuccess:n})=>{const[a,o]=ot.useState({name:"",description:"",categories:[],royaltyRecipient:"",royaltyPercent:0});const[i,u]=ot.useState(null);const[d,m]=ot.useState(!1);const[g,y]=ot.useState("");const[v,x]=ot.useState(0);const[N,k]=ot.useState(!1);const[E,S]=ot.useState(!1);const[A,_]=ot.useState({visible:!1,message:"",txHash:""});const[j,I]=ot.useState(!1);const[O,R]=ot.useState(!1);useNavigate();const{switchNetwork:B}=useReownWallet();ot.useEffect(()=>{if(A.visible){const n=setTimeout(()=>_(n=>({...n,visible:!1})),5e3);return()=>clearTimeout(n)}},[A.visible]);const showToast=(n,a="")=>{_({visible:!0,message:n,txHash:a})};const handleChange=n=>{const{name:i,value:u}=n.target;console.log("📝 Form field changed:",i,u);o({...a,[i]:u})};const handleFileChange=n=>{const a=n.target.files[0];console.log("📁 File selected:",a?{name:a.name,size:a.size,type:a.type}:"No file");if(a){const o=10485760;if(a.size>o){const o=(a.size/1048576).toFixed(1);const i=`File size (${o}MB) exceeds the maximum allowed size of 10MB. Please choose a smaller file.`;showToast(`❌ ${i}`);console.error("❌ File too large:",o,"MB");n.target.value="";return}if(!a.type.startsWith("image/")){showToast("❌ Please select an image file (JPG, PNG, GIF, SVG)");console.error("❌ Invalid file type:",a.type);n.target.value="";return}}u(a)};const handleDragOver=n=>{n.preventDefault();n.currentTarget.classList.add("border-pink-500/50","bg-pink-500/10")};const handleDragLeave=n=>{n.preventDefault();n.currentTarget.classList.remove("border-pink-500/50","bg-pink-500/10")};const handleDrop=n=>{n.preventDefault();n.currentTarget.classList.remove("border-pink-500/50","bg-pink-500/10");const a=n.dataTransfer.files;if(a.length>0){const n=a[0];if(!n.type.startsWith("image/")){showToast("❌ Please drop an image file (JPG, PNG, GIF, SVG)");console.error("❌ Invalid file type dropped:",n.type);return}const o=10485760;if(n.size>o){const a=(n.size/1048576).toFixed(1);const o=`File size (${a}MB) exceeds the maximum allowed size of 10MB. Please choose a smaller file.`;showToast(`❌ ${o}`);console.error("❌ File too large dropped:",a,"MB");return}u(n)}};const toggleCategory=n=>{o(a=>{const o=a.categories.includes(n);const i=o?a.categories.filter(a=>a!==n):[...a.categories,n];return{...a,categories:i}})};const uploadToBackend=async n=>{try{console.log("📤 Uploading file:",n.name,n.size,n.type);console.log("📤 File object:",n);const a=await uploadFile(n);console.log("✅ File uploaded successfully:",a);console.log("✅ Result object:",a);const o=a.gatewayUrl||a.url;console.log("✅ Image URL for collection:",o);console.log("✅ Full result object:",a);if(!o){console.error("❌ No image URL found in result:",a);throw new Error("Failed to get image URL from upload result")}return o}catch(a){console.error("❌ Error uploading file:",a);console.error("❌ Error details:",{message:a.message,stack:a.stack,response:a.response});throw a}};const uploadMetadataJSON=async n=>{try{console.log("📋 Uploading metadata JSON:",n);const a=await uploadMetadata(n);console.log("✅ Metadata uploaded successfully:",a);return a.url}catch(a){console.error("❌ Error uploading metadata:",a);throw a}};const createCollection=async()=>{try{I(!0);console.log("🔍 Form validation:",{name:a.name,description:a.description,coverFile:i?i.name:"No file",ethereum:!!window.ethereum});if(!window.ethereum)throw new Error("Wallet not detected");if(!a.name||!i||!a.description)throw new Error("Name, description, and cover image required");const o=10485760;if(i.size>o){const n=(i.size/1048576).toFixed(1);throw new Error(`File size (${n}MB) exceeds the maximum allowed size of 10MB`)}if(!i.type.startsWith("image/"))throw new Error("Invalid file type. Please select an image file.");m(!0);y("📤 Uploading cover image to IPFS...");x(10);const u=await uploadToBackend(i);console.log("🎯 Cover URL for metadata:",u);y("📋 Uploading collection metadata...");x(40);const d={name:a.name,description:a.description,image:u,categories:a.categories,royaltyRecipient:a.royaltyRecipient,royaltyPercent:a.royaltyPercent};console.log("🎯 Metadata JSON to upload:",d);const g=await uploadMetadataJSON(d);y("⛓️ Creating collection on blockchain...");x(70);try{const n=await(async()=>{try{return await(B?.(Jj))}catch{return{success:!1}}})();n?.success||await ensureSomniaNetwork()}catch(nL){showToast("❌ Please switch to Somnia Testnet to create a collection");I(!1);return}const v=new mb(window.ethereum);const N=await v.getSigner();try{const n=await v.getNetwork();console.log("Connected to network:",n)}catch(nL){console.error("RPC connection error:",nL);throw new Error("Network error. Please check your connection and try again.")}const E=new Ey(kI,xI,N);console.log("Factory address:",E.target);const S=a.name.substring(0,3).toUpperCase();const A=[a.name,S,0,"","",g,a.royaltyRecipient||hp,Math.round(100*Number(a.royaltyPercent)),{value:parseUnits$1("0.05",18)}];console.log("Creating collection with params:",A);let _=null;let j=3;for(;j>0&&!_;)try{_=await E.createCollection(...A);break}catch(nL){console.warn(`Collection creation attempt ${4-j} failed:`,nL);j--;if(!(j>0))throw nL;await new Promise(n=>setTimeout(n,2e3))}console.log("Transaction sent:",_.hash);y("⏳ Waiting for blockchain confirmation...");let O=null;j=3;for(;j>0&&!O;)try{O=await _.wait();break}catch(nL){console.warn(`Transaction confirmation attempt ${4-j} failed:`,nL);j--;if(!(j>0))throw nL;await new Promise(n=>setTimeout(n,2e3))}console.log("Transaction confirmed:",O);const R=O.logs.map(n=>{try{return E.interface.parseLog(n)}catch(nL){console.warn("Failed to parse log:",nL);return null}}).find(n=>n&&"CollectionCreated"===n.name);if(!R)throw new Error("CollectionCreated event not found in transaction logs");const M=R.args.collection;console.log("Collection created at:",M);if(M){const n=new Ey(M,vI,N);await n.setContractURI(g)}const z={address:M,name:a.name,description:a.description,image:u,cover:u,banner:u,metadata:g,createdAt:(new Date).toISOString()};console.log("📦 Collection data created:",z);console.log("📦 Cover URL in collection data:",z.cover);const L=JSON.parse(localStorage.getItem("dreava_collections"))||[];L.push(z);localStorage.setItem("dreava_collections",JSON.stringify(L));y("✅ Collection created successfully!");x(100);try{const n=await new mb(window.ethereum).getSigner();const o=await n.getAddress();await fetch("/api/quest/record-action",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({walletAddress:o,actionType:"collection_created",data:{collectionAddress:M,collectionName:a.name,txHash:_.hash,metadataUrl:g,coverUrl:u}})})}catch(n){console.warn("⚠️ Failed to record quest action:",n)}setTimeout(()=>{k(!0)},1500);showToast("✅ Collection created!",_.hash);window.newlyCreatedCollectionData=z}catch(o){console.error("Error creating collection:",o);y(`❌ Error: ${o.reason||o.message}`);x(0);setTimeout(()=>{k(!0)},1e3);showToast(`❌ Error: ${o.reason||o.message}`);delete window.newlyCreatedCollectionData}finally{I(!1)}};return at.jsxs("div",{className:"max-w-4xl mx-auto text-white",children:[at.jsxs("div",{className:"text-left mb-8",children:[at.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-blue-500 to-pink-500 bg-clip-text text-transparent leading-none mb-4",children:"Collection Identity"}),at.jsx("p",{className:"text-zinc-400 text-lg leading-relaxed max-w-2xl",children:"Give your collection a unique identity. Set the foundation for your NFT project with a name, description, and visual identity that represents your vision. Once created, you'll be able to add your amazing NFTs in the next step."})]}),at.jsxs("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 p-8 shadow-2xl",children:[at.jsxs("div",{className:"mb-8",children:[at.jsxs("label",{className:"text-sm font-medium mb-4 block",children:[at.jsx("span",{className:"text-white",children:"Collection Cover Image"})," ",at.jsx("span",{className:"text-red-500",children:"*"})]}),at.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-start",children:[at.jsxs("label",{htmlFor:"cover-upload",className:"w-48 h-48 bg-zinc-800/50 border-2 border-dashed border-zinc-600 rounded-2xl flex items-center justify-center cursor-pointer overflow-hidden hover:border-pink-500/50 transition-all duration-300 group",onDragOver:handleDragOver,onDragLeave:handleDragLeave,onDrop:handleDrop,children:[i?at.jsxs("div",{className:"relative w-full h-full",children:[at.jsx("img",{src:URL.createObjectURL(i),alt:"preview",className:"w-full h-full object-cover rounded-2xl",onLoad:()=>console.log("✅ Preview image loaded successfully"),onError:n=>{console.error("❌ Preview image failed to load:",n);console.error("❌ Image src:",n.target.src)}}),at.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:at.jsxs("div",{className:"text-white text-center",children:[at.jsx("div",{className:"text-sm font-medium",children:"Change Image"}),at.jsx("div",{className:"text-xs text-zinc-300",children:"Click to replace"})]})}),at.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded-full",children:[(i.size/1024/1024).toFixed(2)," MB"]})]}):at.jsxs("div",{className:"text-center text-zinc-400",children:[at.jsx(XT,{className:"w-8 h-8 mx-auto mb-2"}),at.jsx("div",{className:"text-sm",children:"Drop image here or click to upload"}),at.jsx("div",{className:"text-xs",children:"PNG, JPG, GIF up to 10MB"})]}),at.jsx("input",{id:"cover-upload",type:"file",accept:"image/*",onChange:handleFileChange,className:"hidden"})]}),at.jsx("div",{className:"flex-1",children:at.jsxs("div",{className:"bg-zinc-800/30 rounded-2xl p-6 border border-zinc-700/30",children:[at.jsx("h4",{className:"text-white font-semibold mb-3",children:"Upload Requirements"}),at.jsxs("ul",{className:"space-y-2 text-sm text-zinc-300",children:[at.jsxs("li",{className:"flex items-center gap-2",children:[at.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Recommended size: 300 × 300px"]}),at.jsxs("li",{className:"flex items-center gap-2",children:[at.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"File types: JPG, PNG, SVG or GIF"]}),at.jsxs("li",{className:"flex items-center gap-2",children:[at.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Max file size: 10MB"]}),at.jsxs("li",{className:"flex items-center gap-2",children:[at.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"This will be your collection's main image"]})]}),at.jsxs("button",{onClick:()=>document.getElementById("cover-upload").click(),className:"mt-4 w-full py-3 px-6 rounded-xl bg-gradient-to-r from-[#00A3FF] to-[#FF1CF7] hover:from-[#0095E6] hover:to-[#E61CC7] text-white font-semibold transition-all duration-300 hover:scale-105 shadow-2xl hover:shadow-pink-500/25 relative overflow-hidden group",children:[at.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),at.jsxs("div",{className:"relative z-10 flex items-center justify-center gap-3",children:[at.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),at.jsx("span",{children:"Choose Image"})]})]})]})})]})]}),at.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[at.jsxs("div",{children:[at.jsxs("label",{className:"text-sm font-medium mb-3 block",children:[at.jsx("span",{className:"text-white",children:"Collection Name"})," ",at.jsx("span",{className:"text-red-500",children:"*"})]}),at.jsx("input",{type:"text",name:"name",value:a.name,onChange:handleChange,placeholder:"Enter collection name",className:"w-full p-4 rounded-2xl bg-zinc-800/50 border border-zinc-700/50 text-white placeholder:text-zinc-500 text-base focus:outline-none focus:border-pink-500/50 focus:ring-2 focus:ring-pink-500/20 transition-all duration-300"})]}),at.jsxs("div",{children:[at.jsx("label",{className:"text-sm font-medium mb-3 block",children:at.jsx("span",{className:"text-white",children:"Categories"})}),at.jsxs("div",{className:"relative",children:[at.jsxs("button",{onClick:()=>S(n=>!n),className:"w-full p-4 rounded-2xl bg-zinc-800/50 border border-zinc-700/50 text-left text-white text-base flex justify-between items-center focus:outline-none focus:border-pink-500/50 focus:ring-2 focus:ring-pink-500/20 transition-all duration-300",children:[a.categories.length>0?at.jsx("div",{className:"flex flex-wrap gap-2",children:a.categories.map((n,a)=>at.jsxs("span",{className:`flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium ${EI[a%EI.length]}`,children:[n,at.jsx("span",{onClick:a=>{a.stopPropagation();toggleCategory(n)},className:"hover:text-red-400 transition-colors cursor-pointer",children:at.jsx(Aj,{size:12})})]},n))}):"Select Categories",at.jsx(N_,{size:16,className:"ml-2"})]}),E&&at.jsx("div",{className:"absolute bg-zinc-800/95 backdrop-blur-sm border border-zinc-700/50 rounded-2xl w-full max-h-40 overflow-y-auto z-20 mt-2 shadow-2xl",children:CI.map(n=>at.jsx("div",{onClick:()=>toggleCategory(n),className:"px-4 py-3 cursor-pointer hover:bg-zinc-700/50 transition-colors duration-200 "+(a.categories.includes(n)?"bg-zinc-700/50":""),children:n},n))})]})]})]}),at.jsxs("div",{className:"mb-8",children:[at.jsxs("label",{className:"text-sm font-medium mb-3 block",children:[at.jsx("span",{className:"text-white",children:"Description"})," ",at.jsx("span",{className:"text-red-500",children:"*"})]}),at.jsx("textarea",{name:"description",value:a.description,onChange:handleChange,placeholder:"Write a short description about this collection",className:"w-full p-4 rounded-2xl bg-zinc-800/50 border border-zinc-700/50 text-white h-32 placeholder:text-zinc-500 text-base focus:outline-none focus:border-pink-500/50 focus:ring-2 focus:ring-pink-500/20 transition-all duration-300 resize-none"})]}),at.jsxs("div",{className:"bg-gradient-to-r from-blue-900/20 to-purple-900/20 rounded-2xl p-6 border border-blue-500/30 mb-8",children:[at.jsxs("h4",{className:"text-white font-semibold mb-4 flex items-center gap-2",children:[at.jsx("svg",{className:"w-5 h-5 text-[#46ABEF]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Collection Creation Cost"]}),at.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[at.jsxs("div",{className:"bg-[#46ABEF]/20 p-4 rounded-xl border border-[#46ABEF]/30",children:[at.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[at.jsx("svg",{className:"w-4 h-4 text-[#46ABEF]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),at.jsx("div",{className:"text-white font-medium text-sm",children:"Gas Fee"})]}),at.jsx("div",{className:"text-white font-bold text-lg",children:"~0.01 STT"}),at.jsx("div",{className:"text-white text-xs",children:"Network transaction cost"})]}),at.jsxs("div",{className:"bg-[#8223D5]/20 p-4 rounded-xl border border-[#8223D5]/30",children:[at.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[at.jsx("svg",{className:"w-4 h-4 text-[#8223D5]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),at.jsx("div",{className:"text-white font-medium text-sm",children:"Platform Fee"})]}),at.jsx("div",{className:"text-white font-bold text-lg",children:"0.05 STT"}),at.jsx("div",{className:"text-white text-xs",children:"One-time creation fee"})]}),at.jsxs("div",{className:"bg-[#D0139A]/20 p-4 rounded-xl border border-[#D0139A]/30",children:[at.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[at.jsx("svg",{className:"w-4 h-4 text-[#D0139A]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),at.jsx("div",{className:"text-white font-medium text-sm",children:"Total Cost"})]}),at.jsx("div",{className:"text-white font-bold text-lg",children:"~0.06 STT"}),at.jsx("div",{className:"text-white text-xs",children:"Estimated total"})]})]})]}),at.jsxs("div",{className:"bg-zinc-800/30 rounded-2xl p-6 border border-zinc-700/30 mb-8",children:[at.jsxs("h4",{className:"text-white font-semibold mb-4 flex items-center gap-2",children:[at.jsx("svg",{className:"w-5 h-5 text-[#8223D5]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Royalty Settings"]}),at.jsx("p",{className:"text-zinc-400 text-sm mb-6",children:"Set up royalty payments for your collection. This allows you to earn a percentage of sales when your NFTs are traded."}),at.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[1fr_auto] items-end gap-6",children:[at.jsxs("div",{children:[at.jsx("label",{className:"text-sm font-medium mb-2 block text-white",children:"Royalty Recipient Address"}),at.jsx("input",{type:"text",name:"royaltyRecipient",value:a.royaltyRecipient,onChange:handleChange,placeholder:"0x...",className:"w-full p-4 rounded-2xl bg-zinc-800/50 border border-zinc-700/50 text-white placeholder:text-zinc-500 text-base focus:outline-none focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 transition-all duration-300"}),at.jsx("p",{className:"text-xs text-zinc-500 mt-2",children:"Leave empty to use your wallet address"})]}),at.jsxs("div",{children:[at.jsx("label",{className:"text-sm font-medium mb-2 block text-white",children:"Royalty Percentage"}),at.jsxs("div",{className:"relative w-24 md:w-28",children:[at.jsx("input",{type:"number",name:"royaltyPercent",min:0,max:100,value:a.royaltyPercent,onChange:handleChange,placeholder:"0",className:"w-full p-4 pr-10 rounded-2xl bg-zinc-800/50 border border-zinc-700/50 text-white placeholder:text-zinc-500 text-base focus:outline-none focus:border-purple-500/50 focus:ring-2 focus:ring-purple-500/20 transition-all duration-300"}),at.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400",children:"%"})]}),at.jsx("p",{className:"text-xs text-zinc-500 mt-2 whitespace-nowrap",children:"Recommended: 2.5% - 10%"})]})]})]}),at.jsxs("button",{onClick:createCollection,className:"w-full max-w-xs mx-auto mt-8 py-4 px-8 rounded-2xl bg-gradient-to-r from-[#00A3FF] to-[#FF1CF7] text-white font-semibold text-lg transition-all duration-300 hover:from-[#0095E6] hover:to-[#E61CC7] hover:scale-105 shadow-2xl hover:shadow-pink-500/25 relative overflow-hidden group",children:[at.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),at.jsx("span",{className:"relative z-10",children:"Create Collection"})]})]}),d&&at.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md flex justify-center items-center z-[9998] p-4",children:at.jsx("div",{className:"bg-black backdrop-blur-xl rounded-3xl shadow-2xl max-w-md w-full animate-fadeIn border border-zinc-700/50 relative overflow-hidden transform transition-all duration-300 hover:scale-[1.02]",tabIndex:-1,autoFocus:!0,children:at.jsxs("div",{className:"relative z-10 p-8",children:[at.jsxs("div",{className:"text-center mb-8",children:[100===v?at.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-blue-500 to-pink-500 rounded-full flex items-center justify-center animate-pulse",children:at.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}):at.jsx("div",{className:"mb-4",children:at.jsx(VideoSpinner,{type:"processing",size:"lg"})}),at.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-blue-500 to-pink-500 bg-clip-text text-transparent mb-2",children:100===v?"Collection Created!":"Creating Collection..."}),at.jsx("p",{className:"text-zinc-400 text-sm",children:100===v?"Your collection has been successfully created on the blockchain":"Please wait while we process your collection"})]}),v<100&&at.jsxs("div",{className:"mb-8",children:[at.jsx("div",{className:"w-full h-3 bg-zinc-800/50 rounded-full mb-4 overflow-hidden",children:at.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-pink-500 relative transition-all duration-700 ease-out",style:{width:`${v}%`},children:at.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-pulse"})})}),at.jsxs("div",{className:"text-center",children:[at.jsxs("div",{className:"text-2xl font-bold text-white mb-2",children:[v,"%"]}),at.jsx("p",{className:"text-sm text-zinc-400",children:g})]})]}),100===v&&at.jsx("div",{className:"mb-8",children:at.jsxs("div",{className:"bg-green-500/20 border border-green-500/30 rounded-2xl p-6 text-center",children:[at.jsx("div",{className:"w-12 h-12 mx-auto mb-3 bg-green-500 rounded-full flex items-center justify-center",children:at.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),at.jsx("h4",{className:"text-green-400 font-semibold mb-2",children:"Success!"}),at.jsx("p",{className:"text-zinc-300 text-sm",children:"Your collection is now live on the blockchain"})]})}),N&&100===v&&at.jsxs("div",{className:"space-y-3",children:[at.jsxs("button",{onClick:()=>{m(!1);x(0);k(!1);if(n){const a=window.newlyCreatedCollectionData;n(a);delete window.newlyCreatedCollectionData}},className:"w-full py-4 px-6 rounded-2xl bg-gradient-to-r from-green-500 to-emerald-500 text-white font-semibold hover:from-green-600 hover:to-emerald-600 transition-all duration-300 hover:scale-105 shadow-2xl hover:shadow-green-500/25 relative overflow-hidden group",children:[at.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),at.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-2",children:[at.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),n?"Continue to Populate Collection":"Continue"]})]}),at.jsx("button",{onClick:()=>{m(!1);x(0);k(!1);delete window.newlyCreatedCollectionData},className:"w-full py-3 px-6 rounded-2xl bg-zinc-700/50 hover:bg-zinc-600/50 text-white font-semibold transition-all duration-200 hover:scale-105",children:"Stay Here"})]}),at.jsx("button",{type:"button",onClick:()=>{R(!0)},"aria-label":"Close",className:"absolute top-4 right-4 text-zinc-400 hover:text-white transition-all duration-200 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-pink-500/40 rounded-xl",children:at.jsx(Aj,{size:24})})]})})}),A.visible&&at.jsxs("div",{className:"fixed bottom-20 right-4 bg-zinc-900/95 backdrop-blur-md text-white p-4 rounded-2xl shadow-2xl max-w-xs animate-fadeIn cursor-pointer hover:opacity-100 opacity-90 z-50 border border-zinc-700/50 hover:border-pink-500/50 transition-all duration-300 hover:scale-105",children:[at.jsx("p",{className:"text-sm mb-1",children:A.message}),A.txHash&&at.jsxs("a",{href:`https://shannon-explorer.somnia.network/tx/${A.txHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline flex items-center gap-1 text-sm hover:text-pink-400 transition-colors duration-200",children:[at.jsx(V_,{size:16}),"View Transaction"]})]}),at.jsx(CancelWarningModal,{isVisible:O,onConfirm:()=>{R(!1);m(!1);x(0);k(!1);delete window.newlyCreatedCollectionData},onCancel:()=>R(!1),title:"Cancel Collection Creation",message:"Are you sure you want to cancel this collection creation? All progress will be lost and you'll need to start over. This action cannot be undone."})]})};const Explore=()=>{ot.useEffect(()=>{const n=window.location.hash;if(n){const a=document.querySelector(n);a&&setTimeout(()=>{a.scrollIntoView({behavior:"smooth"})},100)}},[]);return at.jsx("main",{className:"max-w-4xl mx-auto px-4 py-10 text-white",children:at.jsx("section",{id:"create",className:"bg-[#1a1a1a] p-8 rounded-2xl shadow-lg mb-10",children:at.jsx(CreateCollection,{})})})};const SI={webAssembly:"undefined"!=typeof WebAssembly,sharedArrayBuffer:"undefined"!=typeof crossOriginIsolated&&crossOriginIsolated&&"SharedArrayBuffer"in globalThis,webTransport:"WebTransport"in window,serviceWorker:"serviceWorker"in navigator,fileSystemAccess:"showOpenFilePicker"in window,webGPU:"gpu"in navigator,compressionStreams:"CompressionStream"in window,webCodecs:"VideoEncoder"in window,backgroundSync:"serviceWorker"in navigator&&"sync"in window.ServiceWorkerRegistration?.prototype,webAssemblySimd:"undefined"!=typeof WebAssembly&&WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,0,11]))};const AI={enableWasm:!0,enableServiceWorker:!0,enableSharedArrayBuffer:!0,enableWebTransport:!0,enableWebGPU:!1,enableFileSystemAccess:!1,enableCompression:!0,enableBackgroundSync:!1};const checkFeatureSupport=n=>{const a={wasm:SI.webAssembly&&AI.enableWasm,sharedArrayBuffer:SI.sharedArrayBuffer&&AI.enableSharedArrayBuffer,webTransport:SI.webTransport&&AI.enableWebTransport,serviceWorker:SI.serviceWorker&&AI.enableServiceWorker,fileSystemAccess:SI.fileSystemAccess&&AI.enableFileSystemAccess,webGPU:SI.webGPU&&AI.enableWebGPU,compression:SI.compressionStreams&&AI.enableCompression,backgroundSync:SI.backgroundSync&&AI.enableBackgroundSync};return a[n]||!1};const logBrowserCapabilities=()=>{console.log("🔍 Browser Capabilities:",{...SI,flags:AI,supported:Object.keys(SI).filter(n=>SI[n])});console.log("📊 Production Feature Stats:",{timestamp:(new Date).toISOString(),userAgent:navigator.userAgent,features:SI,flags:AI})};logBrowserCapabilities();class _I{constructor(){this.initialized=!1;this.optimizers={};this.initializeOptimizations()}async initializeOptimizations(){try{console.log("🚀 Initializing SafeOptimizer with advanced features...");if(checkFeatureSupport("wasm")){this.optimizers.wasm=await this.createWasmProcessor();console.log("✅ WASM processor initialized")}if(checkFeatureSupport("serviceWorker")){this.optimizers.serviceWorker=await this.createServiceWorkerCache();console.log("✅ Service Worker cache initialized")}if(checkFeatureSupport("sharedArrayBuffer")){this.optimizers.sharedBuffer=await this.createSharedBufferWorker();console.log("✅ Shared Buffer Worker initialized")}if(checkFeatureSupport("compression")){this.optimizers.compression=!0;console.log("✅ Compression API available")}this.initialized=!0;console.log("✅ SafeOptimizer initialized with optimizations:",Object.keys(this.optimizers))}catch(n){console.warn("⚠️ SafeOptimizer initialization failed, using fallbacks:",n);this.initialized=!0}}async createWasmProcessor(){try{const{WasmImageProcessor:a}=await __vitePreload(async()=>{const{WasmImageProcessor:a}=await n(async()=>{const{WasmImageProcessor:n}=await import("./wasmImageProcessor-qC-FVM58-D65KWRiK.js");return{WasmImageProcessor:n}},[]);return{WasmImageProcessor:a}},[]);return new a}catch(a){console.warn("⚠️ WASM processor creation failed:",a);return null}}async createServiceWorkerCache(){try{const{ServiceWorkerCache:a}=await __vitePreload(async()=>{const{ServiceWorkerCache:a}=await n(async()=>{const{ServiceWorkerCache:n}=await import("./serviceWorkerCache-B_gri7LS-B_gri7LS.js");return{ServiceWorkerCache:n}},[]);return{ServiceWorkerCache:a}},[]);return new a}catch(a){console.warn("⚠️ Service Worker cache creation failed:",a);return null}}async createSharedBufferWorker(){try{const{SharedBufferWorker:a}=await __vitePreload(async()=>{const{SharedBufferWorker:a}=await n(async()=>{const{SharedBufferWorker:n}=await import("./sharedBufferWorker-BI1Z8M5Y-DobD4AUJ.js");return{SharedBufferWorker:n}},[]);return{SharedBufferWorker:a}},[]);return new a}catch(a){console.warn("⚠️ Shared Buffer Worker creation failed:",a);return null}}async optimizeImage(n,a=.8){if(this.optimizers.wasm)try{const o=await this.optimizers.wasm.optimize(n,a);console.log("✅ WASM optimization successful");return o}catch(o){console.warn("⚠️ WASM optimization failed, using Canvas fallback:",o)}return await this.canvasOptimize(n,a)}async canvasOptimize(n,a){return new Promise(o=>{const i=document.createElement("canvas");const u=i.getContext("2d");const d=new Image;d.onload=()=>{const m=1200;const g=900;let{width:y,height:v}=d;if(y>m||v>g){const n=Math.min(m/y,g/v);y*=n;v*=n}i.width=y;i.height=v;u.imageSmoothingEnabled=!0;u.imageSmoothingQuality="high";u.drawImage(d,0,0,y,v);i.toBlob(a=>{const i=new File([a],n.name,{type:n.type,lastModified:Date.now()});console.log(`📱 Canvas optimization: ${n.size} -> ${i.size} bytes (${Math.round(100*(1-i.size/n.size))}% reduction)`);o(i)},n.type,a)};d.onerror=()=>{console.warn("⚠️ Image loading failed, returning original file");o(n)};d.src=URL.createObjectURL(n)})}async uploadFiles(n,a,o={}){const i=[];if(this.optimizers.sharedBuffer)try{console.log("🚀 Using Shared Buffer Worker for file processing...");const u=await this.optimizers.sharedBuffer.processFiles(n);for(let d=0;d<n.length;d++){const m=n[d];const g=u[d];if(g&&g.processed){this.optimizers.serviceWorker&&await this.optimizers.serviceWorker.cacheUpload(m,g);i.push(g)}else{const n=await this.regularUpload(m,a,o);i.push(n)}}}catch(u){console.warn("⚠️ Shared Buffer processing failed, using regular upload:",u);for(const d of n){const n=await this.regularUpload(d,a,o);i.push(n)}}else for(const d of n){const n=await this.regularUpload(d,a,o);i.push(n)}return i}async regularUpload(n,a,o={}){const i=new FormData;i.append("file",n);o.metadata&&i.append("metadata",JSON.stringify(o.metadata));const u=await fetch(a,{method:"POST",body:i});if(!u.ok)throw new Error(`Upload failed: ${u.status}`);const d=await u.json();this.optimizers.serviceWorker&&await this.optimizers.serviceWorker.cacheUpload(n,d);return d}async compressData(n){if(this.optimizers.compression&&this.optimizers.sharedBuffer)try{return await this.optimizers.sharedBuffer.compressData(n)}catch(a){console.warn("⚠️ Shared Buffer compression failed, using fallback:",a)}return await this.fallbackCompression(n)}async fallbackCompression(n){try{const a=new CompressionStream("gzip");const o=a.writable.getWriter();const i=a.readable.getReader();const u=new Uint8Array(n);o.write(u);o.close();const d=[];for(;;){const{done:n,value:a}=await i.read();if(n)break;d.push(a)}const m=new Uint8Array(d.reduce((n,a)=>n+a.length,0));let g=0;for(const n of d){m.set(n,g);g+=n.length}return m.buffer}catch(a){console.warn("⚠️ Fallback compression failed:",a);return n}}async decompressData(n){if(this.optimizers.compression&&this.optimizers.sharedBuffer)try{return await this.optimizers.sharedBuffer.decompressData(n)}catch(a){console.warn("⚠️ Shared Buffer decompression failed, using fallback:",a)}return await this.fallbackDecompression(n)}async fallbackDecompression(n){try{const a=new DecompressionStream("gzip");const o=a.writable.getWriter();const i=a.readable.getReader();const u=new Uint8Array(n);o.write(u);o.close();const d=[];for(;;){const{done:n,value:a}=await i.read();if(n)break;d.push(a)}const m=new Uint8Array(d.reduce((n,a)=>n+a.length,0));let g=0;for(const n of d){m.set(n,g);g+=n.length}return m.buffer}catch(a){console.warn("⚠️ Fallback decompression failed:",a);return n}}getOptimizationStats(){const n={initialized:this.initialized,availableOptimizers:Object.keys(this.optimizers),features:SI,featureFlags:AI};this.optimizers.serviceWorker&&(n.serviceWorker=this.optimizers.serviceWorker.getCacheStats());this.optimizers.sharedBuffer&&(n.sharedBuffer="available");this.optimizers.wasm&&(n.wasm="available");this.optimizers.compression&&(n.compression="available");return n}destroy(){this.optimizers.sharedBuffer&&this.optimizers.sharedBuffer.destroy();this.optimizers.serviceWorker&&this.optimizers.serviceWorker.clearCache();this.optimizers={};this.initialized=!1}}const TI=new _I;class jI{constructor(){this.metrics={uploads:{total:0,successful:0,failed:0,totalBytes:0,averageSpeed:0,averageTime:0},cache:{hits:0,misses:0,hitRate:0,totalItems:0,memoryUsage:0},network:{requests:0,errors:0,averageResponseTime:0,slowestRequest:0},memory:{used:0,peak:0,available:0},timing:{startTime:null,lastUpdate:null,totalDuration:0}};this.history=[];this.maxHistorySize=100;this.isMonitoring=!1;this.monitoringInterval=null}start(){if(!this.isMonitoring){this.isMonitoring=!0;this.metrics.timing.startTime=Date.now();this.metrics.timing.lastUpdate=Date.now();this.monitoringInterval=setInterval(()=>{this.updateMetrics()},2e3);console.log("📊 Performance monitoring started")}}stop(){if(this.isMonitoring){this.isMonitoring=!1;if(this.monitoringInterval){clearInterval(this.monitoringInterval);this.monitoringInterval=null}this.updateMetrics();this.saveToHistory();console.log("📊 Performance monitoring stopped")}}updateMetrics(){const n=Date.now();this.metrics.timing.lastUpdate=n;this.metrics.timing.totalDuration=n-this.metrics.timing.startTime;if("memory"in performance){const n=performance.memory;this.metrics.memory.used=n.usedJSHeapSize;this.metrics.memory.available=n.jsHeapSizeLimit;this.metrics.memory.peak=Math.max(this.metrics.memory.peak,n.usedJSHeapSize)}if(this.metrics.uploads.total>0){this.metrics.uploads.averageSpeed=this.metrics.uploads.totalBytes/(this.metrics.timing.totalDuration/1e3);this.metrics.uploads.averageTime=this.metrics.timing.totalDuration/this.metrics.uploads.total}const a=this.metrics.cache.hits+this.metrics.cache.misses;a>0&&(this.metrics.cache.hitRate=this.metrics.cache.hits/a*100);this.metrics.network.requests>0&&(this.metrics.network.averageResponseTime=this.metrics.network.averageResponseTime/this.metrics.network.requests)}saveToHistory(){const n={timestamp:Date.now(),metrics:JSON.parse(JSON.stringify(this.metrics))};this.history.push(n);this.history.length>this.maxHistorySize&&this.history.shift()}recordSuccessfulUpload(n,a){this.metrics.uploads.total++;this.metrics.uploads.successful++;this.metrics.uploads.totalBytes+=n;if(a){this.metrics.network.averageResponseTime+=a;this.metrics.network.slowestRequest=Math.max(this.metrics.network.slowestRequest,a)}this.metrics.network.requests++}recordFailedUpload(n,a){this.metrics.uploads.total++;this.metrics.uploads.failed++;n&&(this.metrics.uploads.totalBytes+=n);this.metrics.network.requests++;this.metrics.network.errors++;console.warn("📊 Upload failed:",a)}recordCacheHit(){this.metrics.cache.hits++}recordCacheMiss(){this.metrics.cache.misses++}updateCacheStats(n){this.metrics.cache.totalItems=n.totalItems||0;this.metrics.cache.memoryUsage=n.totalMemory||0}getMetrics(){this.updateMetrics();return this.metrics}getHistory(){return this.history}getPerformanceSummary(){const n=this.getMetrics();return{uploads:{total:n.uploads.total,successRate:n.uploads.total>0?(n.uploads.successful/n.uploads.total*100).toFixed(1):0,averageSpeed:this.formatBytes(n.uploads.averageSpeed)+"/s",totalData:this.formatBytes(n.uploads.totalBytes)},cache:{hitRate:n.cache.hitRate.toFixed(1)+"%",items:n.cache.totalItems,memory:this.formatBytes(n.cache.memoryUsage)},network:{requests:n.network.requests,errorRate:n.network.requests>0?(n.network.errors/n.network.requests*100).toFixed(1):0,averageResponseTime:n.network.averageResponseTime.toFixed(0)+"ms"},memory:{used:this.formatBytes(n.memory.used),peak:this.formatBytes(n.memory.peak),available:this.formatBytes(n.memory.available)},duration:this.formatDuration(n.timing.totalDuration)}}formatBytes(n){if(0===n)return"0 B";const a=1024;const o=["B","KB","MB","GB"];const i=Math.floor(Math.log(n)/Math.log(a));return parseFloat((n/Math.pow(a,i)).toFixed(2))+" "+o[i]}formatDuration(n){if(n<1e3)return n+"ms";if(n<6e4)return(n/1e3).toFixed(1)+"s";const a=Math.floor(n/6e4);const o=(n%6e4/1e3).toFixed(0);return`${a}m ${o}s`}exportMetrics(){return{metrics:this.getMetrics(),history:this.getHistory(),summary:this.getPerformanceSummary(),exportTime:(new Date).toISOString()}}reset(){this.metrics={uploads:{total:0,successful:0,failed:0,totalBytes:0,averageSpeed:0,averageTime:0},cache:{hits:0,misses:0,hitRate:0,totalItems:0,memoryUsage:0},network:{requests:0,errors:0,averageResponseTime:0,slowestRequest:0},memory:{used:0,peak:0,available:0},timing:{startTime:null,lastUpdate:null,totalDuration:0}};this.history=[];console.log("📊 Performance metrics reset")}}const PI=new jI;const OI=new _I;let RI=class{constructor(){this.cache=new Map;this.maxSize=100}async getFileHash(n){const a=await n.arrayBuffer();const o=await crypto.subtle.digest("SHA-256",a);const i=Array.from(new Uint8Array(o));return i.map(n=>n.toString(16).padStart(2,"0")).join("")}async get(n,a=""){const o=await this.getFileHash(n);const i=`${o}::${a}`;return this.cache.get(i)}async set(n,a,o=""){const i=await this.getFileHash(n);const u=`${i}::${o}`;if(this.cache.size>=this.maxSize){const n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(u,a)}clear(){this.cache.clear()}};const BI=new RI;const MI={Background:["Blue","Red","Green","Purple","Orange","Yellow","Pink","Black","White","Gradient"],Body:["Alien","Ape","Zombie","Robot","Human","Cat","Dog","Bear","Pig","Frog"],Eyes:["Blue","Green","Brown","Red","Yellow","Purple","Pink","Black","White","Laser"],Mouth:["Smile","Frown","Open","Closed","Tongue","Pipe","Cigar","None"],Hat:["Cap","Beanie","Fedora","Crown","Helmet","Bandana","None"],Clothing:["T-Shirt","Suit","Hoodie","Jacket","Dress","None"],Accessory:["Glasses","Earring","Necklace","Watch","Tattoo","None"],Rarity:["Common","Uncommon","Rare","Epic","Legendary","Mythic"],Type:["Character","Item","Weapon","Armor","Pet","Vehicle"],Element:["Fire","Water","Earth","Air","Lightning","Ice","Dark","Light"],Season:["Spring","Summer","Fall","Winter"],Mood:["Happy","Sad","Angry","Surprised","Calm","Excited"],Style:["Cartoon","Realistic","Pixel","Anime","Abstract","Minimalist"],Color:["Red","Blue","Green","Yellow","Purple","Orange","Pink","Black","White","Gold","Silver"],Pattern:["Stripes","Dots","Zigzag","Solid","Gradient","Camouflage","Geometric"],Material:["Metal","Wood","Plastic","Fabric","Glass","Stone","Leather"],Size:["Tiny","Small","Medium","Large","Huge","Massive"],Age:["Baby","Young","Adult","Elder","Ancient"],Gender:["Male","Female","Non-binary","Unknown"],Class:["Warrior","Mage","Archer","Rogue","Paladin","Druid","Monk"],Faction:["Alliance","Horde","Neutral","Chaos","Order","Nature"]};const SmartAttributeInput$1=({trait_type:n,value:a,description:o,onChange:i,onRemove:u,index:d})=>{const[m,g]=ot.useState(!1);const[y,v]=ot.useState(!1);const[x,N]=ot.useState([]);const[k,E]=ot.useState(()=>{const n=localStorage.getItem("recent_attributes");return n?JSON.parse(n):{}});const getSuggestions=n=>{const a=MI[n]||[];const o=k[n]||[];return[...new Set([...o,...a])]};const updateRecentAttributes=(n,a)=>{if(!n||!a)return;const o={...k};o[n]||(o[n]=[]);o[n]=[a,...o[n].filter(n=>n!==a)].slice(0,10);E(o);localStorage.setItem("recent_attributes",JSON.stringify(o))};const handleTraitChange=n=>{i("trait_type",n);if(n){const a=getSuggestions(n);N(a);g(!0)}else g(!1)};const selectTraitSuggestion=n=>{handleTraitChange(n);g(!1)};const handleValueChange=a=>{i("value",a);a&&n&&updateRecentAttributes(n,a)};const selectValueSuggestion=n=>{handleValueChange(n);v(!1)};const handleValueFocus=()=>{if(n){const a=getSuggestions(n);N(a);v(!0)}};const handleBlur=n=>{setTimeout(()=>{"trait"===n?g(!1):"value"===n&&v(!1)},150)};return at.jsxs("div",{className:"flex flex-col gap-2 mt-2 p-3 border border-zinc-600 rounded-lg bg-zinc-800/50",children:[at.jsxs("div",{className:"flex items-center justify-between mb-2",children:[at.jsxs("span",{className:"text-xs text-zinc-400 font-medium",children:["Attribute #",d+1]}),at.jsx("button",{onClick:u,className:"px-2 py-1 text-red-400 hover:text-red-300 transition-colors text-xs",children:"Remove"})]}),at.jsxs("div",{className:"flex gap-3",children:[at.jsxs("div",{className:"w-1/2 relative",children:[at.jsx("input",{type:"text",placeholder:"Trait (e.g., Background)",value:n,onChange:n=>handleTraitChange(n.target.value),onFocus:()=>{n&&g(!0)},onBlur:()=>handleBlur("trait"),className:"w-full p-2 rounded bg-zinc-900 border border-zinc-700 text-white text-sm"}),n&&at.jsx("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2",children:at.jsx(N_,{size:16,className:"text-zinc-400"})}),m&&n&&at.jsx("div",{className:"absolute top-full left-0 right-0 bg-zinc-800 border border-zinc-600 rounded-lg mt-1 max-h-40 overflow-y-auto z-10",children:Object.keys(MI).filter(a=>a.toLowerCase().includes(n.toLowerCase())).map(n=>at.jsx("div",{onClick:()=>selectTraitSuggestion(n),className:"px-3 py-2 hover:bg-zinc-700 cursor-pointer text-sm text-white",children:n},n))})]}),at.jsxs("div",{className:"w-1/2 relative",children:[at.jsx("input",{type:"text",placeholder:"Value",value:a,onChange:n=>handleValueChange(n.target.value),onFocus:handleValueFocus,onBlur:()=>handleBlur("value"),className:"w-full p-2 rounded bg-zinc-900 border border-zinc-700 text-white text-sm"}),y&&x.length>0&&at.jsx("div",{className:"absolute top-full left-0 right-0 bg-zinc-800 border border-zinc-600 rounded-lg mt-1 max-h-40 overflow-y-auto z-10",children:x.map(a=>at.jsxs("div",{onClick:()=>selectValueSuggestion(a),className:"px-3 py-2 hover:bg-zinc-700 cursor-pointer text-sm text-white flex items-center justify-between",children:[at.jsx("span",{children:a}),k[n]?.includes(a)&&at.jsx(w_,{size:14,className:"text-green-400"})]},a))})]})]}),at.jsx("input",{type:"text",placeholder:"Description for this attribute (optional)",value:o,onChange:n=>i("description",n.target.value),className:"w-full p-2 rounded bg-zinc-900 border border-zinc-700 text-white text-sm"})]})};const zI=500;const SingleNFT=({collection:n,onSuccess:a})=>{const[o,i]=ot.useState("");const[u,d]=ot.useState(1);const[m,g]=ot.useState([]);const[y,v]=ot.useState(null);const[x,N]=ot.useState(!1);const[k,E]=ot.useState(!1);const[S,A]=ot.useState(!1);const[_,j]=ot.useState(0);const[I,O]=ot.useState("");const[R,B]=ot.useState(!1);const M=ot.useRef(null);useNavigate();ot.useEffect(()=>{console.log("🔍 Loading collection info:",n);if(n&&n.name){console.log("✅ Setting collection name:",n.name);i(n.name)}else{console.log("❌ No collection or collection name provided");i("")}},[n]);const handleAttributeChange=(n,a,o)=>{const i=[...m];i[n][a]=o;console.log(`✏️ Updating attribute ${n+1}:`,{field:a,value:o});console.log("📊 Updated attributes:",i);g(i)};const addAttribute=()=>{const n={trait_type:"",value:"",description:""};const a=[...m,n];console.log("➕ Adding attribute:",n);console.log("📊 Total attributes now:",a.length);g(a)};const handleImageUpload=async n=>{const a=n.target.files[0];if(a){A(!0);try{console.log("🔄 Processing uploaded file:",a.name);let n=a;if(a.type.startsWith("image/")&&a.size>1048576){console.log("🖼️ Optimizing image...");try{n=await OI.optimizeImage(a,.8);console.log(`✅ Image optimized: ${a.size} -> ${n.size} bytes`)}catch(o){console.warn("⚠️ Image optimization failed, using original:",o);n=a}}await new Promise(n=>setTimeout(n,300));v(n);console.log("✅ File processed successfully")}catch(o){console.error("❌ Error processing file:",o)}finally{A(!1)}}};const getIpfsUrls2=n=>{if(!n)return[];if(n.startsWith("ipfs://")){const a=n.replace("ipfs://","");return[`https://gateway.lighthouse.storage/ipfs/${a}`]}return[n]};const fetchWithFallback2=async n=>{for(const a of n)try{const n=await fetch(a);if(n.ok)return await n.json()}catch{}throw new Error("All IPFS gateways failed")};const getOptimizationStats=()=>{const n=OI.getOptimizationStats();const a=PI.getMetrics();return{optimizer:n,performance:a,cache:{hits:BI.cache.size,maxSize:BI.maxSize}}};const uploadToIPFSViaServer=async(n,a,o,i)=>{console.log("📤 Uploading file to backend:",n.name,n.size,n.type);const getApiBase2=()=>{try{const n="undefined"!=typeof window;const a=n&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname);const o=n&&"5173"===String(window.location.port);if(a&&o)return"";const i="http://localhost:3000";if(i&&"string"==typeof i&&i.trim()){const n=i.trim().replace(/\/$/,"");if(/^https?:\/\//i.test(n))return n}}catch{}return""};const buildApiUrl2=n=>{const a=getApiBase2();const o=n.startsWith("/")?n:`/${n}`;return a?`${a}${o}`:o};const u=new FormData;u.append("file",n);u.append("name",a);u.append("description",`A unique NFT from the ${a} collection`);u.append("attributes",JSON.stringify(i));u.append("quantity",o.toString());const d=await fetch(buildApiUrl2("/api/pin-nft"),{method:"POST",body:u});if(!d.ok){const n=await d.json().catch(()=>({}));console.error("❌ NFT upload failed:",n);throw new Error("Failed to upload NFT to backend server")}const m=await d.json();console.log("✅ NFT uploaded successfully:",m);const g=Array.isArray(m.metadataUrls)?m.metadataUrls:[];if(0===g.length)throw new Error("Backend did not return metadataUrls");return g};const uploadSingleWithCache=async(n,a,o,i)=>{console.log("🔥 Using optimized upload with caching for SingleNFT...");PI.start();const u=Date.now();try{const d=JSON.stringify({name:a,quantity:o,attributes:i});const m=await BI.get(n,d);if(m){console.log("✅ Cache hit for SingleNFT file (with params)");PI.recordCacheHit();return m}PI.recordCacheMiss();const g=await uploadToIPFSViaServer(n,a,o,i);await BI.set(n,g,d);const y=Date.now()-u;PI.recordSuccessfulUpload(n.size,y);return g}catch(d){PI.recordFailedUpload(n.size,d);throw d}finally{PI.stop()}};const handlePublish=async()=>{const i=Math.max(1,parseInt(u||1,10));if(!y||!o||i<1||isNaN(i))alert("Please upload an image and fill in all required fields.");else if(i>zI)alert(`You can upload a maximum of ${zI} NFTs at once. Please reduce the quantity.`);else try{N(!0);E(!0);j(0);O("Preparing upload...");j(20);O("Uploading image to IPFS...");const u=await uploadSingleWithCache(y,o,i,m);j(60);O("Processing metadata...");await new Promise(n=>setTimeout(n,500));j(80);O("Saving NFTs locally...");const g=JSON.parse(localStorage.getItem(`collection_${n.address}_nfts`))||[];console.log("📦 Existing NFTs in localStorage:",g.length);const v=g.map(n=>{const a=n.name?.match(/#(\d+)$/);return a?parseInt(a[1],10):null}).filter(n=>null!==n).sort((n,a)=>n-a);console.log("📊 Existing numbers:",v);let x=1;if(v.length>0)for(let n=1;n<=Math.max(...v)+1;n++)if(!v.includes(n)){x=n;break}console.log("🎯 Starting NFT numbering from:",x);console.log("📝 Processing",u.length,"metadata URLs");let k="";let S="";for(let n=0;n<u.length;n++){const a=u[n];let i="";let y;const v=80+Math.round(n/u.length*15);j(v);O(`Processing NFT ${n+1}/${u.length}...`);console.log(`🔄 Processing NFT ${n+1}/${u.length}:`,a);try{const o=getIpfsUrls2(a);console.log("🔗 IPFS URLs:",o);y=await fetchWithFallback2(o);console.log("📋 Metadata fetched:",y.name);i=y.image?getIpfsUrls2(y.image)[0]:"";console.log("🖼️ Image URL:",i);if(0===n){k=i;S=a}}catch(d){console.error("❌ Metadata fetch failed for NFT",n+1,":",d.message);i=a;if(0===n){k=i;S=a}}const N={id:Date.now()+n,name:`${o} #${x+n}`,description:m.map(n=>n.description).join(" "),tokenURI:a,image:i,quantity:1,attributes:[...m],price:0,status:"draft",type:"single"};console.log("💾 Saving NFT:",N.name,"with ID:",N.id);g.push(N)}console.log("💾 Saving",g.length,"NFTs to localStorage");j(95);O("Saving to local storage...");localStorage.setItem(`collection_${n.address}_nfts`,JSON.stringify(g));const A=JSON.parse(localStorage.getItem(`collection_${n.address}_nfts`))||[];console.log("✅ Verification: Saved",A.length,"NFTs to localStorage");j(100);O("✅ Upload complete!");const _=getOptimizationStats();console.log("📊 SingleNFT Optimization Stats:",_);if(a){const u={type:"single",collection:n,nft:{name:o,quantity:i,attributes:m,imageUrl:k,metadataUrl:S},timestamp:(new Date).toISOString(),optimizationStats:_};a(u)}}catch(d){console.error(d);alert("Failed to upload NFT metadata to IPFS.");O("❌ Upload failed")}finally{E(!1)}};return at.jsxs("div",{className:"flex flex-col gap-8",children:[at.jsx("h2",{className:"text-xl font-semibold text-white",children:"Single NFT Upload"}),at.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-start",children:[at.jsxs("div",{className:"flex-shrink-0",children:[at.jsx("label",{className:"text-sm text-zinc-400 block mb-2",children:"Upload image *"}),at.jsxs("div",{className:`w-[160px] h-[144px] bg-zinc-900 border border-zinc-600 rounded-xl flex items-center justify-center cursor-pointer overflow-hidden ${S?"ring-2 ring-blue-500 bg-blue-900/20":""} ${k?"ring-2 ring-green-500 bg-green-900/20":""}`,onClick:()=>!S&&!k&&M.current.click(),children:[k?at.jsxs("div",{className:"flex flex-col items-center gap-2",children:[at.jsx("div",{className:"w-6 h-6 border-2 border-green-400 border-t-transparent rounded-full animate-spin"}),at.jsx("div",{className:"text-green-400 text-xs",children:"Uploading..."})]}):S?at.jsxs("div",{className:"flex flex-col items-center gap-2",children:[at.jsx("div",{className:"w-6 h-6 border-2 border-blue-400 border-t-transparent rounded-full animate-spin"}),at.jsx("div",{className:"text-blue-400 text-xs",children:"Processing..."})]}):y?at.jsx("img",{src:URL.createObjectURL(y),alt:"preview",className:"object-cover w-full h-full"}):at.jsx("img",{src:NI,alt:"upload",className:"w-8 h-8 opacity-70"}),at.jsx("input",{ref:M,type:"file",accept:"image/*",onChange:handleImageUpload,disabled:S||k,className:"hidden"})]})]}),at.jsxs("div",{className:"flex-1 space-y-4",children:[at.jsxs("div",{children:[at.jsx("label",{className:"text-sm text-zinc-400 mb-1 block",children:"Name *"}),at.jsx("input",{type:"text",value:o,onChange:n=>i(n.target.value),placeholder:n?"Collection name should appear here...":"Enter NFT name",className:"w-full p-3 rounded-xl bg-zinc-800 border text-white text-sm "+(n&&!o?"border-yellow-500/50":"border-zinc-600")}),n&&!o&&at.jsx("p",{className:"text-xs text-yellow-400 mt-1",children:"⚠️ Collection name not found. Please enter a name manually."})]}),at.jsxs("div",{className:"flex items-center gap-4",children:[at.jsxs("button",{type:"button",onClick:addAttribute,className:"text-sm font-medium rounded-lg border border-purple-600 px-4 py-2 text-purple-400 hover:bg-purple-900 hover:text-white transition",children:["Add Attribute (",m.length,")"]}),at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsx("label",{className:"text-sm text-zinc-400",children:"Quantity"}),at.jsx("input",{type:"number",min:1,value:isNaN(u)?"":u,onChange:n=>d(parseInt(n.target.value)),className:"w-20 p-2 rounded bg-zinc-900 border border-zinc-700 text-white text-sm"})]})]}),m.length>0&&at.jsxs("div",{className:"text-sm text-zinc-400 mb-2",children:["Attributes: ",m.length," ",1===m.length?"attribute":"attributes"," added"]}),m.map((n,a)=>at.jsx(SmartAttributeInput$1,{trait_type:n.trait_type,value:n.value,description:n.description,onChange:(n,o)=>handleAttributeChange(a,n,o),onRemove:()=>g(m.filter((n,o)=>o!==a)),index:a},a)),0===m.length&&at.jsx("div",{className:"text-center py-4 text-zinc-500 text-sm border border-dashed border-zinc-700 rounded-lg",children:'No attributes added yet. Click "Add Attribute" to start adding traits like Background, Body, Eyes, etc.'}),at.jsx("button",{onClick:handlePublish,disabled:k,className:"w-full py-3 rounded-lg bg-gradient-to-r from-[#00A3FF] to-[#FF1CF7] text-white font-semibold text-sm shadow-md active:scale-95 transition",children:k?"Uploading...":"Publish NFT"})]})]}),u>10&&at.jsxs("div",{className:"p-4 bg-blue-900/20 border border-blue-500/30 rounded-xl",children:[at.jsxs("div",{className:"flex items-center gap-2 text-blue-400 mb-2",children:[at.jsx("span",{className:"text-lg",children:"🚀"}),at.jsx("span",{className:"font-semibold",children:"Performance Optimization Active"})]}),at.jsxs("p",{className:"text-sm text-blue-300",children:["Large quantity detected (",u," NFTs). Using smart caching for faster upload."]}),at.jsx("div",{className:"mt-2 text-xs text-blue-400",children:"• Smart caching: Enabled • File processing: Optimized"})]}),x&&at.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md flex justify-center items-center z-[9998] p-4",children:at.jsx("div",{className:"bg-black backdrop-blur-xl rounded-3xl shadow-2xl max-w-4xl w-full animate-fadeIn border border-zinc-700/50 relative overflow-hidden transform transition-all duration-300 hover:scale-[1.02]",tabIndex:-1,autoFocus:!0,children:at.jsxs("div",{className:"relative z-10 p-8",children:[at.jsxs("div",{className:"text-center mb-8",children:[100===_?at.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-blue-500 to-pink-500 rounded-full flex items-center justify-center animate-pulse",children:at.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}):at.jsx("div",{className:"mb-4",children:at.jsx(VideoSpinner,{type:"uploading",size:"lg"})}),at.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-blue-500 to-pink-500 bg-clip-text text-transparent mb-2",children:100===_?"NFT Uploaded!":"Uploading NFT..."}),at.jsx("p",{className:"text-zinc-400 text-sm",children:100===_?"Your NFT has been successfully uploaded to IPFS":"Please wait while we process your NFT"})]}),_<100&&at.jsxs("div",{className:"mb-8",children:[at.jsx("div",{className:"w-full h-3 bg-zinc-800/50 rounded-full mb-4 overflow-hidden",children:at.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-pink-500 relative transition-all duration-700 ease-out",style:{width:`${_}%`},children:at.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-pulse"})})}),at.jsxs("div",{className:"text-center",children:[at.jsxs("div",{className:"text-2xl font-bold text-white mb-2",children:[_,"%"]}),at.jsx("p",{className:"text-sm text-zinc-400",children:I})]})]}),100===_&&at.jsx("div",{className:"mb-8",children:at.jsxs("div",{className:"bg-green-500/20 border border-green-500/30 rounded-2xl p-6 text-center",children:[at.jsx("div",{className:"w-12 h-12 mx-auto mb-3 bg-green-500 rounded-full flex items-center justify-center",children:at.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),at.jsx("h4",{className:"text-green-400 font-semibold mb-2",children:"Success!"}),at.jsx("p",{className:"text-zinc-300 text-sm",children:"Your NFT is now live on IPFS"})]})}),100===_&&at.jsxs("div",{className:"space-y-3",children:[at.jsxs("button",{onClick:()=>{N(!1)},className:"w-full py-4 px-6 rounded-2xl bg-gradient-to-r from-green-500 to-emerald-500 text-white font-semibold hover:from-green-600 hover:to-emerald-600 transition-all duration-300 hover:scale-105 shadow-2xl hover:shadow-green-500/25 relative overflow-hidden group",children:[at.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),at.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-2",children:[at.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),a?"Continue to Studio Dashboard":"Continue"]})]}),at.jsx("button",{onClick:()=>N(!1),className:"w-full py-3 px-6 rounded-2xl bg-zinc-700/50 hover:bg-zinc-600/50 text-white font-semibold transition-all duration-200 hover:scale-105",children:"Stay Here"})]}),at.jsx("button",{onClick:()=>{_<100?B(!0):N(!1)},className:"absolute top-4 right-4 text-zinc-400 hover:text-white transition-all duration-200 hover:scale-110",children:at.jsx(Aj,{size:24})})]})})}),at.jsx(CancelWarningModal,{isVisible:R,onConfirm:()=>{B(!1);N(!1)},onCancel:()=>B(!1),title:"Cancel Upload Process",message:"Are you sure you want to cancel this upload? All progress will be lost and you'll need to start over. This action cannot be undone."})]})};class FI{constructor(n={}){this.chunkSize=n.chunkSize||1048576;this.maxConcurrentChunks=n.maxConcurrentChunks||3;this.onProgress=n.onProgress||(()=>{});this.onChunk=n.onChunk||(()=>{})}async processFileStream(n){const a=n.stream();const o=a.getReader();const i=[];let u=0;let d=0;try{for(;;){const{done:a,value:m}=await o.read();if(a)break;i.push(m);u+=m.length;d+=m.length;this.onProgress({processed:d,total:n.size,percentage:d/n.size*100})}const a=new ArrayBuffer(u);const m=new Uint8Array(a);let g=0;for(const n of i){m.set(n,g);g+=n.length}return a}finally{o.releaseLock()}}async processFilesParallel(n){const a=new LI(this.maxConcurrentChunks);const o=[];const i=n.map(async(n,i)=>{await a.acquire();try{const a=await this.processFileStream(n);o[i]={file:n,result:a,index:i};return a}finally{a.release()}});await Promise.all(i);return o.filter(Boolean)}async uploadStream(n,a,o={}){const{onProgress:i,chunkSize:u=this.chunkSize}=o;const d=n.stream();const m=d.getReader();const g=[];let y=0;try{for(;;){const{done:o,value:d}=await m.read();if(o)break;g.push(d);y+=d.length;if(g.length>=u){await this.uploadChunk(g,a);g.length=0;i&&i({uploaded:y,total:n.size})}}g.length>0&&await this.uploadChunk(g,a)}finally{m.releaseLock()}}async uploadChunk(n,a){const o=new Blob(n);const i=new FormData;i.append("chunk",o);const u=await fetch(a,{method:"POST",body:i});if(!u.ok)throw new Error(`Upload failed: ${u.status}`);return u.json()}}let LI=class{constructor(n){this.max=n;this.current=0;this.queue=[]}async acquire(){if(this.current<this.max){this.current++;return Promise.resolve()}return new Promise(n=>{this.queue.push(n)})}release(){this.current--;if(this.queue.length>0){this.current++;const n=this.queue.shift();n()}}};class DI{constructor(n={}){this.maxSize=n.maxSize||100;this.maxMemory=n.maxMemory||104857600;this.ttl=n.ttl||864e5;this.compression=!1!==n.compression;this.cache=new Map;this.indexes=new Map;this.accessOrder=[];this.stats={hits:0,misses:0,sets:0,deletes:0,compressions:0};this.cleanupInterval=setInterval(()=>{this.cleanup()},3e5)}generateKey(n){return"string"==typeof n?n:n instanceof File?`file_${n.name}_${n.size}_${n.lastModified}`:n instanceof ArrayBuffer?`buffer_${n.byteLength}`:JSON.stringify(n)}async compress(n){if(!this.compression)return n;try{if("string"==typeof n){const a=new TextEncoder;const o=a.encode(n);const i=await this.compressUint8Array(o);this.stats.compressions++;return i}if(n instanceof ArrayBuffer){const a=new Uint8Array(n);const o=await this.compressUint8Array(a);this.stats.compressions++;return o}return n}catch(a){console.warn("Compression failed, using original data:",a);return n}}async compressUint8Array(n){const a=new CompressionStream("gzip");const o=a.writable.getWriter();const i=a.readable.getReader();o.write(n);o.close();const u=[];for(;;){const{done:n,value:a}=await i.read();if(n)break;u.push(a)}const d=new Uint8Array(u.reduce((n,a)=>n+a.length,0));let m=0;for(const g of u){d.set(g,m);m+=g.length}return d.buffer}async decompress(n){if(!(this.compression&&n instanceof ArrayBuffer))return n;try{const a=new Uint8Array(n);const o=new DecompressionStream("gzip");const i=o.writable.getWriter();const u=o.readable.getReader();i.write(a);i.close();const d=[];for(;;){const{done:n,value:a}=await u.read();if(n)break;d.push(a)}const m=new Uint8Array(d.reduce((n,a)=>n+a.length,0));let g=0;for(const n of d){m.set(n,g);g+=n.length}return(new TextDecoder).decode(m)}catch(a){console.warn("Decompression failed, returning original data:",a);return n}}async set(n,a,o={}){const i=this.generateKey(n);const u=o.ttl||this.ttl;const d=await this.compress(a);const m={value:d,timestamp:Date.now(),expiresAt:Date.now()+u,accessCount:0,lastAccessed:Date.now(),size:this.calculateSize(d),originalSize:this.calculateSize(a)};this.shouldEvict(m.size)&&this.evict();this.cache.set(i,m);this.updateAccessOrder(i);this.updateIndexes(i,a);this.stats.sets++;return i}async get(n){const a=this.generateKey(n);const o=this.cache.get(a);if(!o){this.stats.misses++;return null}if(Date.now()>o.expiresAt){this.delete(a);this.stats.misses++;return null}o.accessCount++;o.lastAccessed=Date.now();this.updateAccessOrder(a);this.stats.hits++;const i=await this.decompress(o.value);return i}delete(n){const a=this.generateKey(n);const o=this.cache.get(a);if(o){this.cache.delete(a);this.removeFromAccessOrder(a);this.removeFromIndexes(a);this.stats.deletes++}}has(n){const a=this.generateKey(n);const o=this.cache.get(a);if(!o)return!1;if(Date.now()>o.expiresAt){this.delete(a);return!1}return!0}clear(){this.cache.clear();this.indexes.clear();this.accessOrder=[]}getStats(){const n=this.cache.size;const a=this.getTotalMemory();const o=this.stats.hits/(this.stats.hits+this.stats.misses)||0;return{...this.stats,totalItems:n,totalMemory:a,hitRate:100*o,compressionRatio:this.getCompressionRatio()}}search(n){const a=[];for(const[o,i]of this.indexes)if(o.includes(n)||n.includes(o))for(const n of i){const o=this.cache.get(n);o&&Date.now()<=o.expiresAt&&a.push({key:n,entry:o})}return a}calculateSize(n){return"string"==typeof n?(new TextEncoder).encode(n).length:n instanceof ArrayBuffer?n.byteLength:n instanceof File?n.size:JSON.stringify(n).length}shouldEvict(n){const a=this.getTotalMemory();return a+n>this.maxMemory||this.cache.size>=this.maxSize}getTotalMemory(){let n=0;for(const a of this.cache.values())n+=a.size;return n}getCompressionRatio(){let n=0;let a=0;for(const o of this.cache.values()){n+=o.originalSize;a+=o.size}return n>0?a/n*100:100}updateAccessOrder(n){this.removeFromAccessOrder(n);this.accessOrder.push(n)}removeFromAccessOrder(n){const a=this.accessOrder.indexOf(n);a>-1&&this.accessOrder.splice(a,1)}updateIndexes(n,a){if("string"==typeof a){const o=a.toLowerCase().split(/\s+/);for(const a of o)if(a.length>2){this.indexes.has(a)||this.indexes.set(a,new Set);this.indexes.get(a).add(n)}}const o=this.calculateSize(a);const i=this.getSizeRange(o);this.indexes.has(i)||this.indexes.set(i,new Set);this.indexes.get(i).add(n)}removeFromIndexes(n){for(const a of this.indexes.values())a.delete(n)}getSizeRange(n){return n<1024?"small":n<1048576?"medium":n<10485760?"large":"huge"}evict(){for(;this.shouldEvict(0)&&this.accessOrder.length>0;){const n=this.accessOrder.shift();this.delete(n)}}cleanup(){const n=Date.now();const a=[];for(const[o,i]of this.cache.entries())n>i.expiresAt&&a.push(o);for(const o of a)this.delete(o);a.length>0&&console.log(`Cleaned up ${a.length} expired cache entries`)}destroy(){this.cleanupInterval&&clearInterval(this.cleanupInterval);this.clear()}}class $I extends DI{constructor(n={}){super({maxSize:n.maxSize||50,maxMemory:n.maxMemory||524288e3,ttl:n.ttl||6048e5,compression:!0,...n})}async setFile(n,a={}){const o=await this.generateFileKey(n);const i={file:n,metadata:{name:n.name,size:n.size,type:n.type,lastModified:n.lastModified,...a}};return this.set(o,i)}async getFile(n){const a=await this.get(n);return a?.file||null}async generateFileKey(n){const a=await n.arrayBuffer();const o=await crypto.subtle.digest("SHA-256",a);const i=Array.from(new Uint8Array(o));return`file_${i.map(n=>n.toString(16).padStart(2,"0")).join("")}`}searchByType(n){const a=[];for(const[o,i]of this.cache.entries()){const u=i.value;u?.metadata?.type===n&&a.push({key:o,entry:i})}return a}searchBySize(n,a){const o=[];for(const[i,u]of this.cache.entries()){const d=u.value;const m=d?.metadata?.size;m>=n&&m<=a&&o.push({key:i,entry:u})}return o}}class UI{constructor(){this.isMobile=this.detectMobile();this.isLowEnd=this.detectLowEndDevice();this.connectionSpeed=this.detectConnectionSpeed();this.batteryLevel=null;this.batteryCharging=!1;this.initializeBatteryMonitoring();this.initializeConnectionMonitoring()}detectMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768}detectLowEndDevice(){const n=navigator.deviceMemory||4;const a=navigator.hardwareConcurrency||4;const o=n<4||a<4;console.log(`📱 Device specs: ${n}GB RAM, ${a} cores, Low-end: ${o}`);return o}detectConnectionSpeed(){if("connection"in navigator){const n=navigator.connection;const a=n.effectiveType||"unknown";const o=n.downlink||10;console.log(`🌐 Connection: ${a}, ${o}Mbps`);return"slow-2g"===a||"2g"===a||o<1?"slow":"3g"===a||o<5?"medium":"fast"}return"unknown"}async initializeBatteryMonitoring(){if("getBattery"in navigator)try{const n=await navigator.getBattery();this.batteryLevel=n.level;this.batteryCharging=n.charging;n.addEventListener("levelchange",()=>{this.batteryLevel=n.level});n.addEventListener("chargingchange",()=>{this.batteryCharging=n.charging});console.log(`🔋 Battery: ${(100*this.batteryLevel).toFixed(0)}%, Charging: ${this.batteryCharging}`)}catch(n){console.warn("Battery API not available:",n)}}initializeConnectionMonitoring(){if("connection"in navigator){const n=navigator.connection;n.addEventListener("change",()=>{this.connectionSpeed=this.detectConnectionSpeed();console.log(`🌐 Connection changed: ${this.connectionSpeed}`)})}}getOptimalSettings(){const n={batchSize:25,maxConcurrentUploads:3,compressionLevel:"medium",imageQuality:.8,useWebWorker:!0,useStreaming:!1,cacheSize:50,retryAttempts:3,retryDelay:1e3};if(this.isMobile){n.batchSize=10;n.maxConcurrentUploads=2;n.cacheSize=25;if(this.isLowEnd){n.batchSize=5;n.maxConcurrentUploads=1;n.useWebWorker=!1;n.cacheSize=10;n.retryAttempts=2}if("slow"===this.connectionSpeed){n.batchSize=3;n.maxConcurrentUploads=1;n.compressionLevel="high";n.imageQuality=.6;n.retryDelay=2e3}if(null!==this.batteryLevel&&this.batteryLevel<.2&&!this.batteryCharging){n.batchSize=Math.max(2,n.batchSize/2);n.maxConcurrentUploads=1;n.useWebWorker=!1;console.log("🔋 Low battery detected, reducing performance")}}console.log("📱 Optimal settings:",n);return n}async optimizeImage(n,a=.8){return this.isMobile?new Promise(o=>{const i=document.createElement("canvas");const u=i.getContext("2d");const d=new Image;d.onload=()=>{const m=this.isLowEnd?800:1200;const g=this.isLowEnd?600:900;let{width:y,height:v}=d;if(y>m||v>g){const n=Math.min(m/y,g/v);y*=n;v*=n}i.width=y;i.height=v;u.drawImage(d,0,0,y,v);i.toBlob(a=>{const i=new File([a],n.name,{type:n.type,lastModified:Date.now()});console.log(`📱 Image optimized: ${n.size} -> ${i.size} bytes`);o(i)},n.type,a)};d.src=URL.createObjectURL(n)}):n}async optimizeFiles(n){if(!this.isMobile)return n;const a=this.getOptimalSettings();const o=[];for(let i=0;i<n.length;i++){const u=n[i];if(u.type.startsWith("image/")){const n=await this.optimizeImage(u,a.imageQuality);o.push(n)}else o.push(u)}return o}getRecommendations(){const n=[];if(this.isMobile){n.push("📱 Mobile device detected - using optimized settings");this.isLowEnd&&n.push("⚠️ Low-end device detected - reduced batch size and performance");"slow"===this.connectionSpeed&&n.push("🌐 Slow connection detected - increased compression and reduced batch size");null!==this.batteryLevel&&this.batteryLevel<.2&&!this.batteryCharging&&n.push("🔋 Low battery - consider charging or reducing upload size")}return n}canUpload(){return null!==this.batteryLevel&&this.batteryLevel<.1&&!this.batteryCharging?{canUpload:!1,reason:"Battery too low (less than 10%)"}:"slow"===this.connectionSpeed&&this.isLowEnd?{canUpload:!0,reason:"Slow connection and low-end device - uploads may be slow"}:{canUpload:!0,reason:"Ready to upload"}}getDeviceInfo(){return{isMobile:this.isMobile,isLowEnd:this.isLowEnd,connectionSpeed:this.connectionSpeed,batteryLevel:this.batteryLevel,batteryCharging:this.batteryCharging,userAgent:navigator.userAgent,screenSize:`${window.innerWidth}x${window.innerHeight}`,memory:navigator.deviceMemory||"unknown",cores:navigator.hardwareConcurrency||"unknown"}}}const WI=new UI;const PerformanceStats=({isVisible:n=!1,onClose:a})=>{const[o,i]=ot.useState(null);const[u,d]=ot.useState(!1);const[m,g]=ot.useState(!0);ot.useEffect(()=>{if(!n)return;const updateMetrics=()=>{const n=PI.getMetrics();const a=PI.getPerformanceSummary();i({...n,summary:a})};updateMetrics();if(m){const n=setInterval(updateMetrics,2e3);return()=>clearInterval(n)}},[n,m]);if(!n||!o)return null;const{summary:y}=o;return at.jsxs("div",{className:"fixed bottom-4 right-4 z-50",children:[!u&&at.jsx("div",{className:"bg-zinc-900/95 backdrop-blur-md border border-zinc-700/30 rounded-2xl p-3 shadow-2xl",children:at.jsxs("div",{className:"flex items-center gap-3",children:[at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsx(b_,{size:16,className:"text-blue-400"}),at.jsx("span",{className:"text-xs text-white font-medium",children:"Performance"})]}),at.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[at.jsxs("div",{className:"flex items-center gap-1",children:[at.jsx(W_,{size:12,className:"text-green-400"}),at.jsxs("span",{className:"text-green-400",children:[y.uploads.successRate,"%"]})]}),at.jsxs("div",{className:"flex items-center gap-1",children:[at.jsx(rT,{size:12,className:"text-purple-400"}),at.jsx("span",{className:"text-purple-400",children:y.cache.hitRate})]}),at.jsxs("div",{className:"flex items-center gap-1",children:[at.jsx(Nj,{size:12,className:"text-blue-400"}),at.jsxs("span",{className:"text-blue-400",children:[y.network.errorRate,"%"]})]})]}),at.jsx("button",{onClick:()=>d(!0),className:"text-xs text-zinc-400 hover:text-white transition-colors",children:"Expand"}),a&&at.jsx("button",{onClick:a,className:"text-xs text-red-400 hover:text-red-300 transition-colors",children:"×"})]})}),u&&at.jsxs("div",{className:"bg-zinc-900/95 backdrop-blur-md border border-zinc-700/30 rounded-2xl p-4 shadow-2xl w-80",children:[at.jsxs("div",{className:"flex items-center justify-between mb-4",children:[at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsx(b_,{size:18,className:"text-blue-400"}),at.jsx("span",{className:"text-sm text-white font-semibold",children:"Performance Monitor"})]}),at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsx("button",{onClick:()=>g(!m),className:"text-xs px-2 py-1 rounded "+(m?"bg-green-600 text-white":"bg-zinc-700 text-zinc-300"),children:"Auto"}),at.jsx("button",{onClick:()=>d(!1),className:"text-xs text-zinc-400 hover:text-white transition-colors",children:"Collapse"}),a&&at.jsx("button",{onClick:a,className:"text-xs text-red-400 hover:text-red-300 transition-colors",children:"×"})]})]}),at.jsxs("div",{className:"space-y-3",children:[at.jsxs("div",{className:"bg-zinc-800/30 rounded-xl p-3 border border-zinc-700/30",children:[at.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[at.jsx(W_,{size:14,className:"text-green-400"}),at.jsx("span",{className:"text-xs text-white font-medium",children:"Uploads"})]}),at.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[at.jsxs("div",{children:[at.jsx("span",{className:"text-zinc-400",children:"Total:"}),at.jsx("span",{className:"text-white ml-1",children:y.uploads.total})]}),at.jsxs("div",{children:[at.jsx("span",{className:"text-zinc-400",children:"Success:"}),at.jsxs("span",{className:"text-green-400 ml-1",children:[y.uploads.successRate,"%"]})]}),at.jsxs("div",{children:[at.jsx("span",{className:"text-zinc-400",children:"Speed:"}),at.jsx("span",{className:"text-blue-400 ml-1",children:y.uploads.averageSpeed})]}),at.jsxs("div",{children:[at.jsx("span",{className:"text-zinc-400",children:"Data:"}),at.jsx("span",{className:"text-purple-400 ml-1",children:y.uploads.totalData})]})]})]}),at.jsxs("div",{className:"bg-zinc-800/30 rounded-xl p-3 border border-zinc-700/30",children:[at.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[at.jsx(rT,{size:14,className:"text-purple-400"}),at.jsx("span",{className:"text-xs text-white font-medium",children:"Cache"})]}),at.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[at.jsxs("div",{children:[at.jsx("span",{className:"text-zinc-400",children:"Hit Rate:"}),at.jsx("span",{className:"text-purple-400 ml-1",children:y.cache.hitRate})]}),at.jsxs("div",{children:[at.jsx("span",{className:"text-zinc-400",children:"Items:"}),at.jsx("span",{className:"text-white ml-1",children:y.cache.items})]}),at.jsxs("div",{className:"col-span-2",children:[at.jsx("span",{className:"text-zinc-400",children:"Memory:"}),at.jsx("span",{className:"text-blue-400 ml-1",children:y.cache.memory})]})]})]}),at.jsxs("div",{className:"bg-zinc-800/30 rounded-xl p-3 border border-zinc-700/30",children:[at.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[at.jsx(Nj,{size:14,className:"text-blue-400"}),at.jsx("span",{className:"text-xs text-white font-medium",children:"Network"})]}),at.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[at.jsxs("div",{children:[at.jsx("span",{className:"text-zinc-400",children:"Requests:"}),at.jsx("span",{className:"text-white ml-1",children:y.network.requests})]}),at.jsxs("div",{children:[at.jsx("span",{className:"text-zinc-400",children:"Errors:"}),at.jsxs("span",{className:"text-red-400 ml-1",children:[y.network.errorRate,"%"]})]}),at.jsxs("div",{className:"col-span-2",children:[at.jsx("span",{className:"text-zinc-400",children:"Avg Response:"}),at.jsx("span",{className:"text-green-400 ml-1",children:y.network.averageResponseTime})]})]})]}),at.jsxs("div",{className:"bg-zinc-800/30 rounded-xl p-3 border border-zinc-700/30",children:[at.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[at.jsx(L_,{size:14,className:"text-orange-400"}),at.jsx("span",{className:"text-xs text-white font-medium",children:"Memory"})]}),at.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[at.jsxs("div",{children:[at.jsx("span",{className:"text-zinc-400",children:"Used:"}),at.jsx("span",{className:"text-orange-400 ml-1",children:y.memory.used})]}),at.jsxs("div",{children:[at.jsx("span",{className:"text-zinc-400",children:"Peak:"}),at.jsx("span",{className:"text-red-400 ml-1",children:y.memory.peak})]}),at.jsxs("div",{className:"col-span-2",children:[at.jsx("span",{className:"text-zinc-400",children:"Available:"}),at.jsx("span",{className:"text-green-400 ml-1",children:y.memory.available})]})]})]}),at.jsxs("div",{className:"bg-zinc-800/50 rounded-lg p-3",children:[at.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[at.jsx(z_,{size:14,className:"text-yellow-400"}),at.jsx("span",{className:"text-xs text-white font-medium",children:"Duration"})]}),at.jsxs("div",{className:"text-xs",children:[at.jsx("span",{className:"text-zinc-400",children:"Total Time:"}),at.jsx("span",{className:"text-yellow-400 ml-1",children:y.duration})]})]}),at.jsxs("div",{className:"flex gap-2",children:[at.jsx("button",{onClick:()=>{const n=PI.exportMetrics();const a=new Blob([JSON.stringify(n,null,2)],{type:"application/json"});const o=URL.createObjectURL(a);const i=document.createElement("a");i.href=o;i.download=`performance-metrics-${(new Date).toISOString().split("T")[0]}.json`;i.click();URL.revokeObjectURL(o)},className:"flex-1 text-xs bg-blue-600 hover:bg-blue-700 text-white py-2 px-3 rounded transition-colors",children:"Export"}),at.jsx("button",{onClick:()=>{PI.reset();i(null)},className:"flex-1 text-xs bg-red-600 hover:bg-red-700 text-white py-2 px-3 rounded transition-colors",children:"Reset"})]})]})]})]})};const OptimizationStatus=({isVisible:n=!1,onClose:a})=>{const[o,i]=ot.useState(null);ot.useEffect(()=>{if(n){const n={features:SI,flags:AI,supported:Object.keys(SI).filter(n=>SI[n]),enabled:Object.keys(AI).filter(n=>AI[n])};i(n)}},[n]);if(!n||!o)return null;const getStatusIcon=(n,a)=>n&&a?at.jsx(T_,{size:16,className:"text-green-400"}):n&&!a?at.jsx(VT,{size:16,className:"text-yellow-400"}):at.jsx(B_,{size:16,className:"text-red-400"});const getStatusText=(n,a)=>n&&a?"Active":n&&!a?"Available":"Not Supported";const getStatusColor=(n,a)=>n&&a?"text-green-400":n&&!a?"text-yellow-400":"text-red-400";return at.jsx("div",{className:"fixed bottom-4 left-4 z-50",children:at.jsxs("div",{className:"bg-zinc-900/95 backdrop-blur-md border border-zinc-700/30 rounded-2xl p-4 shadow-2xl w-80",children:[at.jsxs("div",{className:"flex items-center justify-between mb-4",children:[at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsx(Bj,{size:18,className:"text-blue-400"}),at.jsx("span",{className:"text-sm text-white font-semibold",children:"Optimization Status"})]}),a&&at.jsx("button",{onClick:a,className:"text-xs text-red-400 hover:text-red-300 transition-colors",children:"×"})]}),at.jsxs("div",{className:"space-y-3",children:[at.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-800/30 rounded-xl border border-zinc-700/30",children:[at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsx(L_,{size:14,className:"text-purple-400"}),at.jsx("span",{className:"text-xs text-white",children:"WebAssembly"})]}),at.jsxs("div",{className:"flex items-center gap-2",children:[getStatusIcon(SI.webAssembly,AI.enableWasm),at.jsx("span",{className:`text-xs ${getStatusColor(SI.webAssembly,AI.enableWasm)}`,children:getStatusText(SI.webAssembly,AI.enableWasm)})]})]}),at.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-800/30 rounded-xl border border-zinc-700/30",children:[at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsx(rT,{size:14,className:"text-blue-400"}),at.jsx("span",{className:"text-xs text-white",children:"Service Worker"})]}),at.jsxs("div",{className:"flex items-center gap-2",children:[getStatusIcon(SI.serviceWorker,AI.enableServiceWorker),at.jsx("span",{className:`text-xs ${getStatusColor(SI.serviceWorker,AI.enableServiceWorker)}`,children:getStatusText(SI.serviceWorker,AI.enableServiceWorker)})]})]}),at.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-800/30 rounded-xl border border-zinc-700/30",children:[at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsx(Bj,{size:14,className:"text-green-400"}),at.jsx("span",{className:"text-xs text-white",children:"SharedArrayBuffer"})]}),at.jsxs("div",{className:"flex items-center gap-2",children:[getStatusIcon(SI.sharedArrayBuffer,AI.enableSharedArrayBuffer),at.jsx("span",{className:`text-xs ${getStatusColor(SI.sharedArrayBuffer,AI.enableSharedArrayBuffer)}`,children:getStatusText(SI.sharedArrayBuffer,AI.enableSharedArrayBuffer)})]})]}),at.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-800/30 rounded-xl border border-zinc-700/30",children:[at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsx(Nj,{size:14,className:"text-orange-400"}),at.jsx("span",{className:"text-xs text-white",children:"WebTransport"})]}),at.jsxs("div",{className:"flex items-center gap-2",children:[getStatusIcon(SI.webTransport,AI.enableWebTransport),at.jsx("span",{className:`text-xs ${getStatusColor(SI.webTransport,AI.enableWebTransport)}`,children:getStatusText(SI.webTransport,AI.enableWebTransport)})]})]}),at.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-800/30 rounded-xl border border-zinc-700/30",children:[at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsx(L_,{size:14,className:"text-cyan-400"}),at.jsx("span",{className:"text-xs text-white",children:"Compression"})]}),at.jsxs("div",{className:"flex items-center gap-2",children:[getStatusIcon(SI.compressionStreams,AI.enableCompression),at.jsx("span",{className:`text-xs ${getStatusColor(SI.compressionStreams,AI.enableCompression)}`,children:getStatusText(SI.compressionStreams,AI.enableCompression)})]})]})]}),at.jsx("div",{className:"mt-4 pt-3 border-t border-zinc-700",children:at.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[at.jsxs("div",{className:"text-center",children:[at.jsx("div",{className:"text-zinc-400",children:"Supported"}),at.jsx("div",{className:"text-white font-medium",children:o.supported.length})]}),at.jsxs("div",{className:"text-center",children:[at.jsx("div",{className:"text-zinc-400",children:"Enabled"}),at.jsx("div",{className:"text-white font-medium",children:o.enabled.length})]})]})}),at.jsxs("div",{className:"mt-3 text-xs text-zinc-400",children:[o.supported.length<3&&at.jsx("div",{className:"text-yellow-400 mb-1",children:"⚠️ Consider updating your browser for better performance"}),o.enabled.length>0&&at.jsxs("div",{className:"text-green-400",children:["✅ ",o.enabled.length," optimizations active"]})]})]})})};const getApiBase=()=>{try{const n="undefined"!=typeof window;const a=n&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname);const o=n&&"5173"===String(window.location.port);if(a&&o)return"";const i="http://localhost:3000";if(i&&"string"==typeof i&&i.trim()){const n=i.trim().replace(/\/$/,"");if(/^https?:\/\//i.test(n))return n}}catch{}return""};const buildApiUrl=n=>{const a=getApiBase();const o=n.startsWith("/")?n:`/${n}`;return a?`${a}${o}`:o};const HI=new $I({maxSize:100,maxMemory:524288e3,ttl:6048e5,compression:!0});const qI=new FI({chunkSize:1048576,maxConcurrentChunks:5,onProgress:n=>{console.log("Stream progress:",n)}});let GI=null;let VI=0;const initWorker=()=>{if("undefined"!=typeof Worker&&!GI)try{const n=`/workers/upload-worker.js?v=${Date.now()}`;GI=new Worker(n);GI.onmessage=handleWorkerMessage;GI.onerror=handleWorkerError;console.log("🔥 Web Worker initialized successfully with cache busting")}catch(n){console.warn("Web Worker not available, falling back to main thread:",n)}};const handleWorkerMessage=n=>{const{type:a,data:o,id:i}=n.data;if(!i)switch(a){case"CACHE_STATS":console.log("📊 Worker cache stats:",o);break;case"BATCH_PROGRESS":console.log("🔥 Worker batch progress:",o);break;case"BATCH_COMPLETE":console.log("✅ Worker batch complete:",o);break;case"UPLOAD_COMPLETE":console.log("🎉 Worker upload complete:",o);break;case"ERROR":console.error("❌ Worker error:",o)}};const handleWorkerError=n=>{console.error("❌ Web Worker error:",n)};const uploadWithWorker=async(n,a,o,i,u={})=>{console.log("🚀 Starting uploadWithWorker...");console.log("📊 Files count:",n.length);console.log("📊 Options:",u);if(!GI){console.log("🐌 Falling back to main thread processing");return uploadWithAdvancedCache(n,a,o,i)}return new Promise((d,m)=>{const g=++VI;console.log("🆔 Generated message ID:",g);const y=setTimeout(()=>{console.error("⏰ Worker timeout after 5 minutes");m(new Error("Worker timeout"))},3e5);const messageHandler=n=>{console.log("📨 Worker message received:",n.data);const{type:a,data:o,id:i}=n.data;console.log("🔍 Message details:",{type:a,id:i,messageId:g,match:i===g});if(i===g){console.log("✅ Message ID matches, processing response...");if("UPLOAD_COMPLETE"===a){console.log("🎉 Worker completed successfully, resolving with data:",o);clearTimeout(y);GI.removeEventListener("message",messageHandler);d(o)}else if("ERROR"===a){console.error("❌ Worker error:",o);let n="Unknown worker error";"string"==typeof o?n=o:o&&o.error?n=o.error:o&&"object"==typeof o&&(n=JSON.stringify(o));console.error("❌ Worker error details:",{data:o,errorMessage:n});clearTimeout(y);GI.removeEventListener("message",messageHandler);m(new Error(n))}else console.log("📊 Progress message received:",a,o)}else console.log("⏭️ Skipping message with different ID:",i)};GI.addEventListener("message",messageHandler);const v={type:"UPLOAD_FILES",data:{files:n,names:a,descriptions:o,allAttributes:i,options:u},id:g};console.log("📤 Sending message to worker:",v);GI.postMessage(v)})};const uploadWithAdvancedCache=async(n,a,o,i)=>{console.log("🔥 Using advanced cache and streaming...");const u=await Promise.all(n.map(async(n,a)=>{const o=await HI.getFile(n);if(o){console.log(`✅ Advanced cache hit for file ${a+1}`);PI.recordCacheHit();return{cached:!0,data:o,index:a}}PI.recordCacheMiss();return{cached:!1,file:n,index:a}}));const d=u.filter(n=>n.cached);const m=u.filter(n=>!n.cached);console.log(`📊 Advanced cache stats: ${d.length} cached, ${m.length} new files`);let g=[];if(m.length>0){const n=m.map(n=>n.file);const u=m.map(n=>a[n.index]);const d=m.map(n=>o[n.index]);const y=m.map(n=>i[n.index]);if(n.some(n=>n.size>10485760)){console.log("🌊 Using streaming for large files...");g=await processLargeFilesStreaming(n,u,d,y)}else{console.log("⚡ Using parallel processing for small files...");const a=[];for(let o=0;o<n.length;o++){const i=await uploadFileToServer(n[o],u[o],d[o],y[o]);a.push(i)}g={results:a}}const v=m.map((n,a)=>{const o=g.results[a];return o?{...o,index:n.index}:null}).filter(Boolean);for(let a=0;a<m.length;a++){const n=m[a].file;const o=v[a];o&&await HI.setFile(n,o)}g=v}const y=[];for(let v=0;v<n.length;v++){const n=d.find(n=>n.index===v);const a=g.find(n=>n.index===v);n?y.push(n.data):a&&y.push(a)}return{success:!0,results:y}};const processLargeFilesStreaming=async(n,a,o,i)=>{const u=[];const d=new KI(3);const m=n.map(async(m,g)=>{await d.acquire();try{console.log(`🌊 Processing large file ${g+1}/${n.length}: ${m.name}`);await qI.processFileStream(m);const d=await uploadFileToServer(m,a[g],o[g],i[g]);u[g]=d;return d}finally{d.release()}});await Promise.all(m);return{results:u.filter(Boolean)}};class KI{constructor(n){this.max=n;this.current=0;this.queue=[]}async acquire(){if(this.current<this.max){this.current++;return Promise.resolve()}return new Promise(n=>{this.queue.push(n)})}release(){this.current--;if(this.queue.length>0){this.current++;const n=this.queue.shift();n()}}}const uploadFileToServer=async(n,a,o,i,u=3)=>{for(let m=1;m<=u;m++)try{console.log(`📤 Upload attempt ${m} for file:`,n.name,n.size,n.type);const u=new FormData;u.append("file",n);u.append("name",a);u.append("description",o||"");u.append("quantity","1");i&&i.length>0&&u.append("attributes",JSON.stringify(i));const d=[buildApiUrl("/api/pin-nft"),buildApiUrl("/pin-nft")];let g=null;for(const n of d)try{const a=await fetch(n,{method:"POST",body:u});if(!a.ok){const n=await a.text();console.error("❌ NFT upload failed:",n);g=new Error(`NFT upload failed: ${a.status} - ${n}`);continue}const o=await a.json();return o}catch(nL){g=nL;continue}throw g||new Error("All endpoints failed")}catch(d){console.warn(`Upload attempt ${m} failed:`,d);if(m===u)throw d;await new Promise(n=>setTimeout(n,500*m))}};const ZI={Background:["Blue","Red","Green","Purple","Orange","Yellow","Pink","Black","White","Gradient"],Body:["Alien","Ape","Zombie","Robot","Human","Cat","Dog","Bear","Pig","Frog"],Eyes:["Blue","Green","Brown","Red","Yellow","Purple","Pink","Black","White","Laser"],Mouth:["Smile","Frown","Open","Closed","Tongue","Pipe","Cigar","None"],Hat:["Cap","Beanie","Fedora","Crown","Helmet","Bandana","None"],Clothing:["T-Shirt","Suit","Hoodie","Jacket","Dress","None"],Accessory:["Glasses","Earring","Necklace","Watch","Tattoo","None"],Rarity:["Common","Uncommon","Rare","Epic","Legendary","Mythic"],Type:["Character","Item","Weapon","Armor","Pet","Vehicle"],Element:["Fire","Water","Earth","Air","Lightning","Ice","Dark","Light"],Season:["Spring","Summer","Fall","Winter"],Mood:["Happy","Sad","Angry","Surprised","Calm","Excited"],Style:["Cartoon","Realistic","Pixel","Anime","Abstract","Minimalist"],Color:["Red","Blue","Green","Yellow","Purple","Orange","Pink","Black","White","Gold","Silver"],Pattern:["Stripes","Dots","Zigzag","Solid","Gradient","Camouflage","Geometric"],Material:["Metal","Wood","Plastic","Fabric","Glass","Stone","Leather"],Size:["Tiny","Small","Medium","Large","Huge","Massive"],Age:["Baby","Young","Adult","Elder","Ancient"],Gender:["Male","Female","Non-binary","Unknown"],Class:["Warrior","Mage","Archer","Rogue","Paladin","Druid","Monk"],Faction:["Alliance","Horde","Neutral","Chaos","Order","Nature"]};const SmartAttributeInput=({trait_type:n,value:a,onChange:o,onRemove:i,index:u})=>{const[d,m]=ot.useState(!1);const[g,y]=ot.useState(!1);const[v,x]=ot.useState([]);const[N,k]=ot.useState(()=>{const n=localStorage.getItem("recent_attributes");return n?JSON.parse(n):{}});const getSuggestions=n=>{const a=ZI[n]||[];const o=N[n]||[];return[...new Set([...o,...a])]};const updateRecentAttributes=(n,a)=>{if(!n||!a)return;const o={...N};o[n]||(o[n]=[]);o[n]=[a,...o[n].filter(n=>n!==a)].slice(0,10);k(o);localStorage.setItem("recent_attributes",JSON.stringify(o))};const handleTraitChange=n=>{o("trait_type",n);if(n){const a=getSuggestions(n);x(a);m(!0)}else m(!1)};const selectTraitSuggestion=n=>{handleTraitChange(n);m(!1)};const handleValueChange=a=>{o("value",a);a&&n&&updateRecentAttributes(n,a)};const selectValueSuggestion=n=>{handleValueChange(n);y(!1)};const handleValueFocus=()=>{if(n){const a=getSuggestions(n);x(a);y(!0)}};const handleBlur=n=>{setTimeout(()=>{"trait"===n?m(!1):"value"===n&&y(!1)},150)};return at.jsxs("div",{className:"flex gap-2 relative",children:[at.jsxs("div",{className:"w-1/2 relative",children:[at.jsx("input",{type:"text",value:n,placeholder:"Trait (e.g., Background)",onChange:n=>handleTraitChange(n.target.value),onFocus:()=>{n&&m(!0)},onBlur:()=>handleBlur("trait"),className:"w-full p-2 rounded bg-zinc-900 border border-zinc-700 text-white text-sm"}),n&&at.jsx("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2",children:at.jsx(N_,{size:16,className:"text-zinc-400"})}),d&&n&&at.jsx("div",{className:"absolute top-full left-0 right-0 bg-zinc-800 border border-zinc-600 rounded-lg mt-1 max-h-40 overflow-y-auto z-10",children:Object.keys(ZI).filter(a=>a.toLowerCase().includes(n.toLowerCase())).map(n=>at.jsx("div",{onClick:()=>selectTraitSuggestion(n),className:"px-3 py-2 hover:bg-zinc-700 cursor-pointer text-sm text-white",children:n},n))})]}),at.jsxs("div",{className:"w-1/2 relative",children:[at.jsx("input",{type:"text",value:a,placeholder:"Value",onChange:n=>handleValueChange(n.target.value),onFocus:handleValueFocus,onBlur:()=>handleBlur("value"),className:"w-full p-2 rounded bg-zinc-900 border border-zinc-700 text-white text-sm"}),g&&v.length>0&&at.jsx("div",{className:"absolute top-full left-0 right-0 bg-zinc-800 border border-zinc-600 rounded-lg mt-1 max-h-40 overflow-y-auto z-10",children:v.map(a=>at.jsxs("div",{onClick:()=>selectValueSuggestion(a),className:"px-3 py-2 hover:bg-zinc-700 cursor-pointer text-sm text-white flex items-center justify-between",children:[at.jsx("span",{children:a}),N[n]?.includes(a)&&at.jsx(w_,{size:14,className:"text-green-400"})]},a))})]}),at.jsx("button",{onClick:i,className:"px-2 py-2 text-red-400 hover:text-red-300 transition-colors",children:at.jsx(Aj,{size:16})})]})};const MultipleNFT=({collection:n,onSuccess:a})=>{const[o,i]=ot.useState({name:"",description:""});const[u,d]=ot.useState([]);const[m,g]=ot.useState(!1);const[y,v]=ot.useState(0);const[x,N]=ot.useState("");const[k,E]=ot.useState([]);const[S,A]=ot.useState(!1);const[_,j]=ot.useState([]);const[I,O]=ot.useState(!1);const R=ot.useRef(null);useNavigate();const[B,M]=ot.useState(1);const z=25;const L=1e4;const[D,W]=ot.useState({current:0,total:0,success:0,failed:0});const[H,q]=ot.useState(!1);const[G,V]=ot.useState(!1);const[Z,Y]=ot.useState(!1);const[J,X]=ot.useState([]);const[ee,te]=ot.useState(!1);const[ne,re]=ot.useState(!1);const se=ot.useRef(null);ot.useEffect(()=>{console.log("🔍 Loading collection info:",n);n&&i({name:n.name||"",description:n.description||""});const a=JSON.parse(localStorage.getItem(`collection_${n?.address}_nfts`))||[];const o=a.map(n=>{const a=n.name?.match(/#(\d+)$/);return a?parseInt(a[1],10):null}).filter(n=>null!==n);const u=o.length?Math.max(...o)+1:1;M(u);initWorker();PI.start();const d=WI.getRecommendations();X(d);const m=TI.getOptimizationStats();console.log("🚀 SafeOptimizer stats:",m)},[n]);ot.useEffect(()=>{if(0===u.length)M(1);else{const n=u.map((n,a)=>({...n,name:`${o.name||"NFT"} #${a+1}`}));d(n)}},[u.length,o.name]);ot.useEffect(()=>{S&&setTimeout(()=>{try{se.current?.focus();se.current?.scrollIntoView({block:"center",inline:"nearest"})}catch{}},0)},[S]);const uploadWithCache=async(n,a,o,i)=>{console.log("🔥 Using optimized upload with caching...");const u=await Promise.all(n.map(async(n,a)=>{const o=await HI.getFile(n);if(o){console.log(`✅ Cache hit for file ${a+1}`);return{cached:!0,data:o,index:a}}return{cached:!1,file:n,index:a}}));const d=u.filter(n=>n.cached);const m=u.filter(n=>!n.cached);console.log(`📊 Cache stats: ${d.length} cached, ${m.length} new files`);let g=[];if(m.length>0){const n=m.map(n=>n.file);const u=m.map(n=>a[n.index]);const d=m.map(n=>o[n.index]);const y=m.map(n=>i[n.index]);const v=await uploadWithAdvancedCache(n,u,d,y);const x=m.map((n,a)=>{const o=v.results[a];return o?{...o,index:n.index}:null}).filter(Boolean);for(let a=0;a<m.length;a++){const n=m[a].file;const o=x[a];o&&await HI.setFile(n,o)}g=x}const y=[];for(let v=0;v<n.length;v++){const n=d.find(n=>n.index===v);const a=g.find(n=>n.index===v);n?y.push(n.data):a&&y.push(a)}return{success:!0,results:y}};const handleImageUpload=async n=>{n.preventDefault();const a=Array.from(n.dataTransfer?.files||n.target.files);const i=a.filter(n=>{const a=n.type.startsWith("image/");a||console.warn("Skipping non-image file:",n.name);return a});if(0!==i.length){te(!0);try{console.log(`🔄 Processing ${i.length} files...`);const n=[];for(let o=0;o<i.length;o++){const a=i[o];console.log(`🔄 Optimizing file ${o+1}/${i.length}: ${a.name}`);const u=await TI.optimizeImage(a);n.push(u)}const a=n.map((n,a)=>{const i=n.name.split(".").pop()||"png";const u=`${o.name||"NFT"}`;const d=B+a;return{file:n,name:`${u} #${d}`,description:"",attributes:[{trait_type:"",value:""}],originalName:n.name,fileExtension:i}});d([...u,...a]);M(n=>n+i.length);console.log("Added images:",a.map(n=>({name:n.name,originalName:n.originalName})))}catch(m){console.error("Error processing uploaded files:",m);alert("Error processing files: "+m.message)}finally{te(!1)}}else alert("Please select only image files.")};function chunkArray(n,a){const o=[];for(let i=0;i<n.length;i+=a)o.push(n.slice(i,i+a));return o}const handlePublish=async()=>{if(!u.length||!o.name){alert("Please upload at least one image.");return}if(u.length>L){alert(`You can upload a maximum of ${L} NFTs per collection. Please reduce the number of images.`);return}const a=u.length>100;q(a);try{g(!0);v(0);N("Preparing upload...");A(!0);E([]);j([]);O(!1);W({current:0,total:Math.ceil(u.length/z),success:0,failed:0});const d=a?10:z;const m=chunkArray(u,d);let y=[];let x=[];if(a&&m.length>3){console.log("🚀 Using parallel batch processing for large upload...");console.log("🚀 Using sequential batch processing for large upload...");for(let u=0;u<m.length;u++){const g=m[u];const k=g.map(n=>n.file);const E=g.map(n=>n.name);const S=g.map(n=>n.description||o.description);const A=g.map(n=>n.attributes);console.log(`🔥 Processing batch ${u+1}/${m.length} (${g.length} images)...`);const _=Math.round((u+1)/m.length*80);v(_);N(`Uploading batch ${u+1}/${m.length} (${g.length} images)...`);try{const i=await uploadWithWorker(k,E,S,A,{batchSize:d,batchDelay:a?1e3:500,useStreaming:k.some(n=>n.size>10485760),maxConcurrent:1});console.log("🔥 Worker response:",i);console.log("🔥 Response type:",typeof i);console.log("🔥 Response keys:",Object.keys(i||{}));const g=JSON.parse(localStorage.getItem(`collection_${n?.address}_nfts`)||"[]");console.log("🔍 Processing worker response...");console.log("🔍 Full response:",i);console.log("🔍 Response.results:",i.results);console.log("🔍 Response.data?.results:",i.data?.results);const _=i.results||[];console.log("🔍 Final results array:",_);console.log("🔍 Results length:",_.length);console.log("🔍 Is array:",Array.isArray(_));_.forEach((n,a)=>{console.log(`🔍 Result ${a}:`,n);console.log(`🔍 Result ${a} status:`,n.status||"success");console.log(`🔍 Result ${a} metadataIpfs:`,n.metadataIpfs||(Array.isArray(n.metadataUrls)?n.metadataUrls[0]:void 0));console.log(`🔍 Result ${a} imageIpfs:`,n.imageIpfs||n.imageUrl)});if(!Array.isArray(_)){console.error("❌ Invalid response format:",i);throw new Error("Invalid server response format")}const j=await Promise.all(_.map(async(n,a)=>{try{const i="success"===n.status||!0===n.success;const m=n.metadataIpfs||Array.isArray(n.metadataUrls)&&n.metadataUrls.length>0;if(!i&&!m){console.error("❌ Small upload result marked as failed:",n);throw new Error(`Server marked as failed: ${n.error||"Unknown error"}`)}console.log("🔍 Processing result:",n);const g=n.metadataIpfs||(Array.isArray(n.metadataUrls)?n.metadataUrls[0]:void 0);const y=n.imageIpfs||n.imageUrl;if(!g){console.error("❌ No metadata IPFS hash in result:",n);throw new Error("No metadata IPFS hash returned")}let v;if(g&&y&&g===y)v={image:y};else try{const n=getIpfsUrls(g);v=await fetchWithFallback$3(n)}catch(nL){console.warn("⚠️ Failed to fetch metadata JSON, falling back to image URL:",nL?.message);v={image:y||""}}if(!v)throw new Error("Failed to fetch metadata from IPFS");const x=E[a]||n.name||`${o.name} #${B+u*d+a}`;return{id:Date.now()+u*d+a,name:x,description:S[a]||"",image:v.image?getIpfsUrls(v.image)[0]:"",price:0,status:"draft",type:"multiple",attributes:A[a]||[],tokenURI:g,failed:!1,originalIndex:u*d+a,verified:!0}}catch(i){console.error(`Error processing result ${a}:`,i);return{name:E[a]||`${o.name} #${B+u*d+a}`,index:u*d+a,failed:!0,reason:i.message||"Unknown error",originalIndex:u*d+a,verified:!1}}}));const I=j.filter(n=>!n.failed&&n.verified);const O=j.filter(n=>n.failed||!n.verified);I.length&&localStorage.setItem(`collection_${n?.address}_nfts`,JSON.stringify([...g,...I]));W(n=>({...n,current:u+1,success:n.success+I.length,failed:n.failed+O.length}));v(Math.round((u+1)/m.length*80));N(`Processing batch ${u+1}/${m.length} results...`);await new Promise(n=>setTimeout(n,500));N(`Completed batch ${u+1}/${m.length} (${I.length} success, ${O.length} failed)`);y=[...y,...I];x=[...x,...O]}catch(i){console.error(`Batch ${u+1} failed:`,i);const n=g.map((n,a)=>({name:n.name,index:u*d+a,failed:!0,reason:i.message||"Batch upload failed"}));W(n=>({...n,current:u+1,failed:n.failed+g.length}));x=[...x,...n]}}}else{console.log("🐌 Using sequential processing for small upload...");for(let u=0;u<m.length;u++){const d=m[u];const g=d.map(n=>n.file);const k=d.map(n=>n.name);const E=d.map(n=>n.description||o.description);const S=d.map(n=>n.attributes);console.log(`Batch ${u+1}/${m.length} (${d.length} images)...`);N(`Uploading batch ${u+1}/${m.length} (${d.length} images)...`);v(Math.round(u/m.length*80));W(n=>({...n,current:u+1}));try{const d=await uploadWithCache(g,k,E,S);const v=JSON.parse(localStorage.getItem(`collection_${n?.address}_nfts`)||"[]");console.log("🔍 Processing small upload response:",d);const A=d.results||[];if(!Array.isArray(A)){console.error("❌ Invalid response format:",d);throw new Error("Invalid server response format")}N(`Processing batch ${u+1}/${m.length} results...`);const _=await Promise.all(A.map(async(n,u)=>{try{const i="success"===n.status||!0===n.success;const d=n.metadataIpfs||Array.isArray(n.metadataUrls)&&n.metadataUrls.length>0;if(!i&&!d){console.error("❌ Result marked as failed:",n);throw new Error(`Server marked as failed: ${n.error||"Unknown error"}`)}console.log("🔍 Processing small upload result:",n);const m=n.metadataIpfs||(Array.isArray(n.metadataUrls)?n.metadataUrls[0]:void 0);const g=n.imageIpfs||n.imageUrl;if(!m){console.error("❌ No metadata IPFS hash in result:",n);throw new Error("No metadata IPFS hash returned")}let y;const v=/\.(png|jpg|jpeg|gif|webp|svg|mp4|webm)$/i.test(m||"");if(v)y={image:m};else try{const n=getIpfsUrls(m);y=await fetchWithFallback$3(n)}catch(nL){console.warn("⚠️ Failed to fetch metadata JSON, falling back to image URL:",nL?.message);y={image:g||""}}if(!y)throw new Error("Failed to fetch metadata from IPFS");if(!a&&y.image){const n=getIpfsUrls(y.image);let a=!1;for(const o of n)try{let n=await fetch(o,{method:"HEAD"});n.ok||(n=await fetch(o,{method:"GET"}));if(n.ok){a=!0;break}}catch{}if(!a)throw new Error("Failed to verify image accessibility")}const x=k[u]||n.name||`${o.name} #${B+u}`;return{id:Date.now()+u,name:x,description:E[u]||"",image:y.image?getIpfsUrls(y.image)[0]:"",price:0,status:"draft",type:"multiple",attributes:S[u]||[],tokenURI:m,failed:!1,originalIndex:u,verified:!0}}catch(i){console.error(`Error processing result ${u}:`,i);return{name:k[u]||`${o.name} #${B+u}`,index:u,failed:!0,reason:i.message||"Unknown error",originalIndex:u,verified:!1}}}));const j=_.filter(n=>!n.failed&&n.verified);const I=_.filter(n=>n.failed||!n.verified);y=[...y,...j];x=[...x,...I];W(n=>({...n,success:n.success+j.length,failed:n.failed+I.length}));j.length&&localStorage.setItem(`collection_${n?.address}_nfts`,JSON.stringify([...v,...j]));if(a&&u<m.length-1){N(`Pausing between batches... (${u+1}/${m.length})`);await new Promise(n=>setTimeout(n,1e3))}}catch(i){console.error(`Batch ${u+1} failed:`,i);const n=d.map((n,a)=>({name:n.name,index:a,failed:!0,reason:i.message||"Batch upload failed"}));x=[...x,...n];W(n=>({...n,failed:n.failed+d.length}))}}}console.log("🎯 Finalizing upload process...");console.log("📊 Final results:",{allResults:y.length,allFailed:x.length});N("Finalizing upload...");v(90);console.log("💾 Setting results and failed arrays...");E(y);j(x);v(100);console.log("🎉 Determining final status...");if(y.length&&0===x.length){console.log("✅ All uploads successful!");N("✅ Upload completed successfully!");O(!0)}else if(y.length>0){console.log(`⚠️ Upload completed with ${x.length} failures`);N(`✅ Upload completed with ${x.length} failures`)}else{console.log("❌ All uploads failed");N("❌ Upload failed")}console.log("🏁 Upload process completed")}catch(i){console.error("Upload failed:",i);N(`❌ Upload failed: ${i.message}`);alert("Upload failed: "+i.message)}finally{g(!1);q(!1)}};const retryFailedUploads=()=>{const n=_.map(n=>{const a=n.index??0;const o=u[a];return{...o,name:n.name||o.name,originalIndex:a}});d(n);j([]);A(!1);console.log("Retrying failed uploads with preserved order:",n.map((n,a)=>({newIndex:a,originalIndex:n.originalIndex,name:n.name})))};const updateCacheStats=()=>{const n=HI.getStats();const a=document.getElementById("cache-items");const o=document.getElementById("cache-memory");const i=document.getElementById("cache-hitrate");a&&(a.textContent=n.totalItems);o&&(o.textContent=`${(n.totalMemory/1024/1024).toFixed(1)}MB`);i&&(i.textContent=`${n.hitRate.toFixed(1)}%`);PI.updateCacheStats(n)};ot.useEffect(()=>{updateCacheStats();const n=setInterval(updateCacheStats,5e3);return()=>{clearInterval(n);PI.stop()}},[]);return at.jsxs("div",{className:"flex flex-col gap-8",children:[at.jsx("h2",{className:"text-xl font-semibold text-white",children:"Multiple NFT Upload"}),at.jsx("div",{className:"flex flex-col lg:flex-row gap-8",children:at.jsxs("div",{className:"w-full",children:[at.jsx("label",{className:"text-sm text-zinc-400 block mb-2",children:"Upload images *"}),at.jsxs("div",{className:`w-full min-h-[192px] bg-zinc-900 border border-zinc-600 rounded-xl p-2 cursor-pointer hover:ring-1 hover:ring-pink-500 transition-all duration-200 ${ee?"ring-2 ring-blue-500 bg-blue-900/20":""} ${m?"ring-2 ring-green-500 bg-green-900/20":""}`,onClick:()=>!ee&&!m&&R.current.click(),onDragOver:n=>n.preventDefault(),onDrop:ee||m?void 0:handleImageUpload,children:[at.jsx("div",{className:"flex flex-col justify-center items-center h-full min-h-[192px] gap-3",children:m?at.jsxs(at.Fragment,{children:[at.jsx(dT,{className:"w-8 h-8 text-green-400 animate-spin"}),at.jsx("div",{className:"text-green-400 text-sm font-medium",children:"Uploading NFTs..."}),at.jsx("div",{className:"text-green-300 text-xs",children:"Please wait while we upload to IPFS"})]}):ee?at.jsxs(at.Fragment,{children:[at.jsx(dT,{className:"w-8 h-8 text-blue-400 animate-spin"}),at.jsx("div",{className:"text-blue-400 text-sm font-medium",children:"Processing files..."}),at.jsx("div",{className:"text-blue-300 text-xs",children:"Please wait while we optimize your images"})]}):at.jsxs(at.Fragment,{children:[at.jsx("img",{src:NI,alt:"upload",className:"w-8 h-8 opacity-70"}),at.jsx("div",{className:"text-zinc-400 text-sm",children:"Drop images here or click to browse"})]})}),at.jsx("input",{ref:R,type:"file",accept:"image/*",multiple:!0,onChange:handleImageUpload,disabled:ee||m,className:"hidden"})]})]})}),at.jsx("div",{className:"space-y-6 overflow-x-auto",children:at.jsxs("table",{className:"w-full text-sm text-left text-zinc-400",children:[at.jsx("thead",{className:"text-xs uppercase bg-zinc-800 text-zinc-400",children:at.jsxs("tr",{children:[at.jsx("th",{className:"px-4 py-2",children:"#"}),at.jsx("th",{className:"px-4 py-2",children:"Preview"}),at.jsx("th",{className:"px-4 py-2",children:"Name"}),at.jsx("th",{className:"px-4 py-2",children:"Description"}),at.jsx("th",{className:"px-4 py-2",children:"Attributes"}),at.jsx("th",{className:"px-4 py-2",children:"Remove"})]})}),at.jsx("tbody",{children:u.map((n,a)=>at.jsxs("tr",{className:"border-b border-zinc-700",children:[at.jsx("td",{className:"px-4 py-2",children:a+1}),at.jsx("td",{className:"px-4 py-2",children:at.jsx("img",{src:URL.createObjectURL(n.file),alt:`preview-${a}`,className:"w-12 h-12 object-cover rounded"})}),at.jsx("td",{className:"px-4 py-2",children:at.jsx("input",{type:"text",value:n.name,onChange:n=>{const o=[...u];o[a].name=n.target.value;d(o)},className:"w-full p-2 rounded bg-zinc-900 border border-zinc-700 text-white text-sm"})}),at.jsx("td",{className:"px-4 py-2",children:at.jsx("input",{type:"text",value:n.description,onChange:n=>{const o=[...u];o[a].description=n.target.value;d(o)},className:"w-full p-2 rounded bg-zinc-900 border border-zinc-700 text-white text-sm"})}),at.jsxs("td",{className:"px-4 py-2 space-y-2",children:[n.attributes.map((n,o)=>at.jsx(SmartAttributeInput,{trait_type:n.trait_type,value:n.value,onChange:(n,i)=>{const m=[...u];m[a].attributes[o]={trait_type:n,value:i};d(m)},onRemove:()=>{const n=[...u];n[a].attributes.splice(o,1);d(n)},index:o},o)),at.jsx("button",{onClick:()=>{const n=[...u];n[a].attributes.push({trait_type:"",value:""});d(n)},className:"text-xs text-blue-400 hover:underline mt-1 flex items-center gap-1",children:at.jsx("span",{children:"+ Add Attribute"})})]}),at.jsx("td",{className:"px-4 py-2",children:at.jsx("button",{onClick:()=>{const n=[...u];n.splice(a,1);d(n)},className:"text-xs text-red-400 hover:underline",children:"Remove"})})]},a))})]})}),at.jsxs("div",{className:"flex gap-4 items-center",children:[at.jsx("button",{onClick:handlePublish,disabled:m,className:"flex-1 py-3 rounded-lg bg-gradient-to-r from-[#00A3FF] to-[#FF1CF7] text-white font-semibold text-sm shadow-md active:scale-95 transition",children:m?"Uploading...":"Publish NFTs"}),at.jsxs("button",{onClick:()=>V(!G),className:"px-4 py-3 rounded-lg bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white text-sm font-semibold transition-all duration-200 shadow-md hover:shadow-lg",title:"Show performance statistics",children:[at.jsx(b_,{size:16,className:"inline mr-1"}),"Stats"]}),at.jsxs("button",{onClick:()=>Y(!Z),className:"px-4 py-3 rounded-lg bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white text-sm font-semibold transition-all duration-200 shadow-md hover:shadow-lg",title:"Show optimization status",children:[at.jsx(Bj,{size:16,className:"inline mr-1"}),"Optimizations"]})]}),u.length>50&&at.jsxs("div",{className:"p-6 bg-gradient-to-r from-blue-900/20 to-purple-900/20 border border-blue-500/30 rounded-2xl backdrop-blur-sm",children:[at.jsxs("div",{className:"flex items-center gap-2 text-blue-400 mb-2",children:[at.jsx("span",{className:"text-lg",children:"🚀"}),at.jsx("span",{className:"font-semibold",children:"Advanced Performance Optimization Active"})]}),at.jsxs("p",{className:"text-sm text-blue-300 mb-3",children:["Large upload detected (",u.length," files). Using cutting-edge optimizations for maximum performance."]}),at.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-xs",children:[at.jsxs("div",{className:"bg-blue-900/30 p-3 rounded-xl border border-blue-500/20",children:[at.jsx("div",{className:"text-blue-400 font-medium",children:"Web Worker"}),at.jsx("div",{className:"text-blue-300",children:GI?"✅ Active":"❌ Fallback"})]}),at.jsxs("div",{className:"bg-purple-900/30 p-3 rounded-xl border border-purple-500/20",children:[at.jsx("div",{className:"text-purple-400 font-medium",children:"Streaming"}),at.jsx("div",{className:"text-purple-300",children:u.some(n=>n.file.size>10485760)?"✅ Large Files":"⚡ Optimized"})]}),at.jsxs("div",{className:"bg-green-900/30 p-3 rounded-xl border border-green-500/20",children:[at.jsx("div",{className:"text-green-400 font-medium",children:"Advanced Cache"}),at.jsx("div",{className:"text-green-300",children:"✅ Active"})]}),at.jsxs("div",{className:"bg-orange-900/30 p-3 rounded-xl border border-orange-500/20",children:[at.jsx("div",{className:"text-orange-400 font-medium",children:"Batch Size"}),at.jsxs("div",{className:"text-orange-300",children:[u.length>100?"10":"25"," files"]})]})]}),at.jsxs("div",{className:"mt-3 text-xs text-blue-400",children:["• Parallel processing: ",u.length>100?"Enabled":"Disabled","• Adaptive batching: Enabled • Compression: Enabled • Retry mechanism: Enabled"]})]}),J.length>0&&at.jsxs("div",{className:"p-6 bg-gradient-to-r from-yellow-900/20 to-orange-900/20 border border-yellow-500/30 rounded-2xl backdrop-blur-sm",children:[at.jsxs("div",{className:"flex items-center gap-2 text-yellow-400 mb-2",children:[at.jsx("span",{className:"text-lg",children:"📱"}),at.jsx("span",{className:"font-semibold",children:"Mobile Optimization"})]}),at.jsx("div",{className:"space-y-1 text-sm text-yellow-300",children:J.map((n,a)=>at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsx("span",{children:"•"}),at.jsx("span",{children:n})]},a))}),at.jsxs("div",{className:"mt-3 text-xs text-yellow-400",children:["Device: ",WI.getDeviceInfo().screenSize," | Connection: ",WI.getDeviceInfo().connectionSpeed," | Battery: ",null!==WI.getDeviceInfo().batteryLevel?`${(100*WI.getDeviceInfo().batteryLevel).toFixed(0)}%`:"Unknown"]})]}),at.jsxs("div",{className:"p-6 bg-zinc-800/50 border border-zinc-700/30 rounded-2xl backdrop-blur-sm",children:[at.jsxs("div",{className:"flex items-center justify-between mb-2",children:[at.jsx("span",{className:"text-sm font-medium text-zinc-300",children:"Cache Statistics"}),at.jsx("button",{onClick:async()=>{const n=HI.getStats();console.log("📊 Cache stats:",n);alert(`Cache Stats:\nHits: ${n.hits}\nMisses: ${n.misses}\nHit Rate: ${n.hitRate.toFixed(1)}%\nCompression: ${n.compressionRatio.toFixed(1)}%`)},className:"text-xs text-blue-400 hover:text-blue-300",children:"View Stats"})]}),at.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[at.jsxs("div",{className:"text-center",children:[at.jsx("div",{className:"text-zinc-400",children:"Items"}),at.jsx("div",{className:"text-white font-medium",id:"cache-items",children:"-"})]}),at.jsxs("div",{className:"text-center",children:[at.jsx("div",{className:"text-zinc-400",children:"Memory"}),at.jsx("div",{className:"text-white font-medium",id:"cache-memory",children:"-"})]}),at.jsxs("div",{className:"text-center",children:[at.jsx("div",{className:"text-zinc-400",children:"Hit Rate"}),at.jsx("div",{className:"text-white font-medium",id:"cache-hitrate",children:"-"})]})]})]}),S&&Nb.createPortal(at.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md flex justify-center items-center z-[10000] p-4",children:at.jsx("div",{ref:se,tabIndex:-1,className:"bg-black backdrop-blur-xl rounded-3xl shadow-2xl max-w-4xl w-full animate-fadeIn border border-zinc-700/50 relative overflow-hidden transform transition-all duration-300 hover:scale-[1.02]",autoFocus:!0,children:at.jsxs("div",{className:"relative z-10 p-8",children:[at.jsxs("div",{className:"text-center mb-8",children:[100===y?at.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-blue-500 to-pink-500 rounded-full flex items-center justify-center animate-pulse",children:at.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}):at.jsx("div",{className:"mb-4",children:at.jsx(VideoSpinner,{type:"uploading",size:"lg"})}),at.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-blue-500 to-pink-500 bg-clip-text text-transparent mb-2",children:100===y?"NFTs Uploaded!":"Uploading NFTs..."}),at.jsx("p",{className:"text-zinc-400 text-sm",children:100===y?"Your NFTs have been successfully uploaded to IPFS":"Please wait while we process your NFTs"})]}),y<100&&at.jsxs("div",{className:"mb-8",children:[at.jsx("div",{className:"w-full h-3 bg-zinc-800/50 rounded-full mb-4 overflow-hidden",children:at.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-pink-500 relative transition-all duration-700 ease-out",style:{width:`${y}%`},children:at.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-pulse"})})}),at.jsxs("div",{className:"text-center mb-6",children:[at.jsxs("div",{className:"text-2xl font-bold text-white mb-2",children:[y,"%"]}),at.jsx("p",{className:"text-sm text-zinc-400",children:x})]}),H&&at.jsxs("div",{className:"mb-6 p-4 bg-zinc-800/30 rounded-2xl border border-zinc-700/30",children:[at.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[at.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),at.jsx("span",{className:"text-sm font-semibold text-white",children:"Batch Progress"})]}),at.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[at.jsxs("div",{className:"text-center",children:[at.jsx("div",{className:"text-lg font-bold text-white",children:D.current}),at.jsx("div",{className:"text-xs text-zinc-400",children:"Batch"})]}),at.jsxs("div",{className:"text-center",children:[at.jsx("div",{className:"text-lg font-bold text-green-400",children:D.success}),at.jsx("div",{className:"text-xs text-zinc-400",children:"Success"})]}),at.jsxs("div",{className:"text-center",children:[at.jsx("div",{className:"text-lg font-bold text-red-400",children:D.failed}),at.jsx("div",{className:"text-xs text-zinc-400",children:"Failed"})]})]}),at.jsx("div",{className:"w-full h-2 bg-zinc-700/50 rounded-full overflow-hidden",children:at.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-500 transition-all duration-300",style:{width:D.current/D.total*100+"%"}})})]})]}),100===y&&at.jsxs("div",{className:"mb-8",children:[at.jsxs("div",{className:"bg-green-500/20 border border-green-500/30 rounded-2xl p-6 text-center",children:[at.jsx("div",{className:"w-12 h-12 mx-auto mb-3 bg-green-500 rounded-full flex items-center justify-center",children:at.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),at.jsx("h4",{className:"text-green-400 font-semibold mb-2",children:"Success!"}),at.jsxs("p",{className:"text-zinc-300 text-sm",children:[k.length," NFTs uploaded successfully",_.length>0&&`, ${_.length} failed`]})]}),at.jsxs("div",{className:"max-h-64 overflow-y-auto space-y-2 mb-6",children:[k.map((n,a)=>at.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-900/20 border border-green-500/30 rounded-xl",children:[at.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:at.jsx(w_,{size:16,className:"text-white"})}),at.jsx("span",{className:"text-sm text-green-400 font-medium",children:n.name})]},a)),_.map((n,a)=>at.jsxs("div",{className:"flex items-center gap-3 p-3 bg-red-900/20 border border-red-500/30 rounded-xl",children:[at.jsx("div",{className:"w-6 h-6 bg-red-500 rounded-full flex items-center justify-center",children:at.jsx(Aj,{size:16,className:"text-white"})}),at.jsxs("div",{className:"flex-1",children:[at.jsx("div",{className:"text-sm text-red-400 font-medium",children:n.name||`Unnamed #${a+1}`}),at.jsx("div",{className:"text-xs text-red-300",children:n.reason||"failed"})]})]},`f-${a}`))]})]}),100===y&&at.jsxs("div",{className:"space-y-3",children:[_.length>0&&at.jsxs("button",{onClick:retryFailedUploads,className:"w-full py-3 px-6 rounded-2xl bg-gradient-to-r from-orange-500 to-red-500 text-white font-semibold hover:from-orange-600 hover:to-red-600 transition-all duration-300 hover:scale-105 shadow-2xl hover:shadow-orange-500/25",children:["Retry Failed Uploads (",_.length,")"]}),I&&at.jsxs("div",{className:"space-y-3",children:[at.jsxs("button",{onClick:()=>{A(!1);if(a){const o={type:"multiple",collection:n,nfts:k,failed:_,totalUploaded:k.length,totalFailed:_.length,timestamp:(new Date).toISOString()};a(o)}},className:"w-full py-4 px-6 rounded-2xl bg-gradient-to-r from-green-500 to-emerald-500 text-white font-semibold hover:from-green-600 hover:to-emerald-600 transition-all duration-300 hover:scale-105 shadow-2xl hover:shadow-green-500/25 relative overflow-hidden group",children:[at.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),at.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-2",children:[at.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),a?"Continue to Studio Dashboard":"Continue"]})]}),at.jsx("button",{onClick:()=>A(!1),className:"w-full py-3 px-6 rounded-2xl bg-zinc-700/50 hover:bg-zinc-600/50 text-white font-semibold transition-all duration-200 hover:scale-105",children:"Stay Here"})]})]}),at.jsx("button",{onClick:()=>{y<100?re(!0):A(!1)},className:"absolute top-4 right-4 text-zinc-400 hover:text-white transition-all duration-200 hover:scale-110",children:at.jsx(Aj,{size:24})})]})})}),document.body),at.jsx(PerformanceStats,{isVisible:G,onClose:()=>V(!1)}),at.jsx(OptimizationStatus,{isVisible:Z,onClose:()=>Y(!1)}),at.jsx(CancelWarningModal,{isVisible:ne,onConfirm:()=>{re(!1);A(!1);g(!1);v(0);N("");W({current:0,total:0,success:0,failed:0});E([]);j([]);if(GI){try{GI.terminate()}catch{}GI=null}},onCancel:()=>re(!1),title:"Cancel Upload Process",message:"Are you sure you want to cancel this upload? All progress will be lost and you'll need to start over. This action cannot be undone."})]})};const UploadNFT=({collectionAddress:n,isReady:a})=>{const[o,i]=ot.useState("single");const[u,d]=ot.useState(null);ot.useEffect(()=>{if(n)try{const a=JSON.parse(localStorage.getItem(`collection_${n}`)||"null");if(a&&a.address){d(a);return}const o=JSON.parse(localStorage.getItem("dreava_collections")||"[]");const i=Array.isArray(o)?o.find(a=>a.address===n):null;if(i){d(i);return}d({address:n})}catch{d({address:n})}else d(null)},[n]);const m=[{key:"single",label:"Single NFT"},{key:"multiple",label:"Multiple NFTs"}];const Warning=()=>at.jsx("p",{className:"text-xs text-center text-zinc-500 mt-2",children:"⚠️ Draft is not yet published. If you clear browser data, it may be lost."});return at.jsxs("div",{className:"space-y-6",children:[at.jsx("div",{className:"flex gap-4 text-sm font-medium border-b border-zinc-700 mb-4",children:m.map(({key:n,label:a})=>at.jsx("button",{onClick:()=>i(n),className:"px-4 py-2 transition-colors "+(o===n?"border-b-2 border-pink-500 text-pink-500":"text-zinc-400 hover:text-white"),children:a},n))}),"single"===o&&at.jsxs(at.Fragment,{children:[at.jsx(SingleNFT,{collection:u}),at.jsx(Warning,{})]}),"multiple"===o&&at.jsxs(at.Fragment,{children:[at.jsx(MultipleNFT,{collection:u}),at.jsx(Warning,{})]})]})};const YI="0xb7C9318Ac06AA59fE3cDD8342769361bB0Cc3d09";const JI=["https://dream-rpc.somnia.network/","https://rpc.ankr.com/somnia_testnet"];async function withTimeout(n,a){const o=new AbortController;const i=setTimeout(()=>o.abort(),a);try{const a=await n(o);clearTimeout(i);return a}catch(nL){clearTimeout(i);throw nL}}async function tryProviders(n){for(const a of JI)try{const o=new fb(a);return await n(o)}catch(nL){}throw new Error("All RPC endpoints failed")}function getCacheKey(n){return`dreava_user_collections_${(n||"").toLowerCase()}`}function readCollectionsCache(n){try{const a=localStorage.getItem(getCacheKey(n));if(!a)return null;const o=JSON.parse(a);return o&&Array.isArray(o.collections)&&o.ts?o:null}catch(nL){return null}}function writeCollectionsCache(n,a){try{const o={ts:Date.now(),collections:a};localStorage.setItem(getCacheKey(n),JSON.stringify(o))}catch(nL){}}function mergeCollections(n,a){const o=new Map;for(const i of[...n||[],...a||[]]){if(!i||!i.address)continue;const n=i.address.toLowerCase();o.has(n)||o.set(n,i)}return Array.from(o.values())}const fetchWithFallback$2=async n=>{for(const a of n)try{const n=await fetch(a);if(n.ok)return await n.json()}catch{}throw new Error("Failed to fetch metadata")};const CollectionCoverImg=({cover:n,firstNFTImage:a})=>{if(n){const o=getIpfsUrls(n);const i=o[0]||o_;return at.jsx("img",{src:i,alt:"cover",className:"w-8 h-8 object-cover rounded-md border border-zinc-600",loading:"lazy",onError:n=>{console.warn("⚠️ Collection cover failed to load:",n.target.src);a&&a!==n.target.src?n.target.src=a:n.target.src=o_}})}return a?at.jsx("img",{src:a,alt:"NFT",className:"w-8 h-8 object-cover rounded-md border border-zinc-600",loading:"lazy",onError:n=>{console.warn("⚠️ Collection NFT image failed to load:",n.target.src);n.target.src=o_}}):at.jsx("img",{src:o_,alt:"logo",className:"w-8 h-8 object-cover rounded-md border border-zinc-600 opacity-50"})};const CollectionSelector=({selected:n,onSelect:a,showCreateButton:o=!0,onCreateNew:i})=>{const[u,d]=ot.useState([]);const[m,g]=ot.useState(!1);const[y,v]=ot.useState("bottom");const x=useNavigate();ot.useEffect(()=>{const loadCollections=async()=>{try{let a=null;if(window.ethereum)try{const n=await window.ethereum.request({method:"eth_accounts"});n&&n.length>0&&(a=n[0])}catch(n){console.warn("Could not get user address from wallet:",n)}if(!a){console.warn("No user address available, cannot load collections");d([]);return}const o=readCollectionsCache(a);const i=JSON.parse(localStorage.getItem("dreava_collections")||"[]");if(o&&Array.isArray(o.collections)){const n=mergeCollections(o.collections,i);d(n)}else i.length>0&&d(i);const u=await tryProviders(async n=>{const o=new Ey(YI,xI,n);return await o.getUserCollections(a)});const m=4;const g=[];for(let n=0;n<u.length;n+=m){const a=u.slice(n,n+m);const o=a.map(async n=>{const a={address:n,name:`${n.slice(0,6)}...${n.slice(-4)}`,cover:o_,description:""};try{const o=await withTimeout(async a=>await tryProviders(async o=>{const i=new Ey(n,vI,o);return await i.name({signal:a.signal})}),5e3).catch(()=>a.name);let i=a.cover;let u="";const d=await withTimeout(async a=>await tryProviders(async o=>{const i=new Ey(n,vI,o);return await i.contractURI({signal:a.signal})}),5e3).catch(()=>"");if(d){const n=getIpfsUrls(d);try{const a=await fetchWithFallback$2(n);if(a.image){const n=getIpfsUrls(a.image);i=n[0]||i}a.description&&(u=String(a.description))}catch{}}return{address:n,name:o,cover:i||o_,description:u}}catch(o){console.error(`Error processing contract ${n}:`,o);return a}});const i=await Promise.all(o);g.push(...i)}const y=g.filter(n=>null!==n);const v=mergeCollections(y,i);writeCollectionsCache(a,v);d(v)}catch(n){console.error("Failed to load collections:",n)}};loadCollections()},[]);const handleSelect=n=>{g(!1);a(n)};const handleCreateNew=()=>{g(!1);i?i():x("/create-dreams")};const toggleDropdown=()=>{if(!m){const n=document.querySelector("[data-collection-selector]");if(n){const a=n.getBoundingClientRect();const o=window.innerHeight-a.bottom;const i=a.top;const u=200;v(o<u&&i>o?"top":"bottom")}}g(!m)};return at.jsxs("div",{className:"relative w-full max-w-sm",children:[at.jsxs("button",{onClick:toggleDropdown,className:"w-full flex justify-between items-center bg-zinc-900 border border-zinc-700 rounded-xl px-4 py-3 text-white text-sm font-medium hover:border-pink-500 transition","data-collection-selector":!0,children:[n?.name||"Select collection",at.jsx("span",{className:"ml-2 text-zinc-400",children:"▾"})]}),m&&at.jsxs("div",{className:"absolute w-full bg-zinc-800 border border-zinc-700 rounded-xl shadow-lg z-50 overflow-hidden divide-y divide-zinc-700 max-h-48 overflow-y-auto "+("top"===y?"bottom-full mb-2":"top-full mt-2"),children:[o&&at.jsx("button",{onClick:handleCreateNew,className:"block w-full text-left px-4 py-3 text-pink-400 hover:bg-zinc-700 text-sm font-medium",children:"+ Create new collection"}),u.map((n,a)=>at.jsxs("button",{onClick:()=>handleSelect(n),className:"flex items-center gap-3 px-4 py-2 w-full hover:bg-zinc-700 text-sm text-white",children:[at.jsx(CollectionCoverImg,{cover:n.cover,firstNFTImage:n.firstNFTImage}),at.jsx("span",{className:"truncate max-w-[160px] font-medium",children:n.name})]},n.address+a))]})]})};const CreateNFTs=()=>{const[n,a]=ot.useState(null);return at.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-10 text-white space-y-8",children:[at.jsx("div",{className:"space-y-4",children:at.jsx(CollectionSelector,{selected:n,onSelect:a})}),at.jsx("div",{className:"rounded-2xl transition-all p-6 border bg-zinc-900 border-zinc-800 shadow-lg "+(n?"":"opacity-30 pointer-events-none select-none blur-sm"),children:at.jsx(UploadNFT,{collectionAddress:n?.address,isReady:!!n})})]})};const QI="undefined"!=typeof document?it.useLayoutEffect:()=>{};var XI;const eP=null!==(XI=it.useInsertionEffect)&&void 0!==XI?XI:QI;function $8ae05eaa5c114e9c$export$7f54fc3180508a52(n){const a=ot.useRef(null);eP(()=>{a.current=n},[n]);return ot.useCallback((...n)=>{const o=a.current;return null==o?void 0:o(...n)},[])}const $431fbd86ca7dc216$export$b204af158042fbac=n=>{var a;return null!==(a=null==n?void 0:n.ownerDocument)&&void 0!==a?a:document};const $431fbd86ca7dc216$export$f21a1ffae260145a=n=>{if(n&&"window"in n&&n.window===n)return n;const a=$431fbd86ca7dc216$export$b204af158042fbac(n);return a.defaultView||window};function $d4ee10de306f2510$export$4282f70798064fe0(n,a){return!(!a||!n)&&n.contains(a)}const $d4ee10de306f2510$export$cd4e5573fbe2b576=(n=document)=>n.activeElement;function $d4ee10de306f2510$export$e58f029f0fbfdb29(n){return n.target}function r$2(n){var a,o,i="";if("string"==typeof n||"number"==typeof n)i+=n;else if("object"==typeof n)if(Array.isArray(n)){var u=n.length;for(a=0;a<u;a++)n[a]&&(o=r$2(n[a]))&&(i&&(i+=" "),i+=o)}else for(o in n)n[o]&&(i&&(i+=" "),i+=o);return i}function clsx(){for(var n,a,o=0,i="",u=arguments.length;o<u;o++)(n=arguments[o])&&(a=r$2(n))&&(i&&(i+=" "),i+=a);return i}function $c87311424ea30a05$var$testUserAgent(n){var a;if("undefined"==typeof window||null==window.navigator)return!1;let o=null===(a=window.navigator.userAgentData)||void 0===a?void 0:a.brands;return Array.isArray(o)&&o.some(a=>n.test(a.brand))||n.test(window.navigator.userAgent)}function $c87311424ea30a05$var$testPlatform(n){var a;return"undefined"!=typeof window&&null!=window.navigator&&n.test((null===(a=window.navigator.userAgentData)||void 0===a?void 0:a.platform)||window.navigator.platform)}function $c87311424ea30a05$var$cached(n){let a=null;return()=>{null==a&&(a=n());return a}}const tP=$c87311424ea30a05$var$cached(function(){return $c87311424ea30a05$var$testPlatform(/^Mac/i)});const nP=$c87311424ea30a05$var$cached(function(){return $c87311424ea30a05$var$testUserAgent(/Android/i)});function $03deb23ff14920c4$export$4eaf04e54aa8eed6(){let n=ot.useRef(new Map);let a=ot.useCallback((a,o,i,u)=>{let d=(null==u?void 0:u.once)?(...a)=>{n.current.delete(i);i(...a)}:i;n.current.set(i,{type:o,eventTarget:a,fn:d,options:u});a.addEventListener(o,d,u)},[]);let o=ot.useCallback((a,o,i,u)=>{var d;let m=(null===(d=n.current.get(i))||void 0===d?void 0:d.fn)||i;a.removeEventListener(o,m,u);n.current.delete(i)},[]);let i=ot.useCallback(()=>{n.current.forEach((n,a)=>{o(n.eventTarget,n.type,a,n.options)})},[o]);ot.useEffect(()=>i,[i]);return{addGlobalListener:a,removeGlobalListener:o,removeAllGlobalListeners:i}}function $6a7db85432448f7f$export$60278871457622de(n){return!(0!==n.mozInputSource||!n.isTrusted)||(nP()&&n.pointerType?"click"===n.type&&1===n.buttons:0===n.detail&&!n.pointerType)}function $8a9cb279dc87e130$export$525bc4921d56d4a(n){let a=n;a.nativeEvent=n;a.isDefaultPrevented=()=>a.defaultPrevented;a.isPropagationStopped=()=>a.cancelBubble;a.persist=()=>{};return a}function $8a9cb279dc87e130$export$c2b7abe5d61ec696(n,a){Object.defineProperty(n,"target",{value:a});Object.defineProperty(n,"currentTarget",{value:a})}function $8a9cb279dc87e130$export$715c682d09d639cc(n){let a=ot.useRef({isFocused:!1,observer:null});QI(()=>{const n=a.current;return()=>{if(n.observer){n.observer.disconnect();n.observer=null}}},[]);let o=$8ae05eaa5c114e9c$export$7f54fc3180508a52(a=>{null==n?void 0:n(a)});return ot.useCallback(n=>{if(n.target instanceof HTMLButtonElement||n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLSelectElement){a.current.isFocused=!0;let i=n.target;let onBlurHandler=n=>{a.current.isFocused=!1;if(i.disabled){let a=$8a9cb279dc87e130$export$525bc4921d56d4a(n);o(a)}if(a.current.observer){a.current.observer.disconnect();a.current.observer=null}};i.addEventListener("focusout",onBlurHandler,{once:!0});a.current.observer=new MutationObserver(()=>{if(a.current.isFocused&&i.disabled){var n;null===(n=a.current.observer)||void 0===n?void 0:n.disconnect();let o=i===document.activeElement?null:document.activeElement;i.dispatchEvent(new FocusEvent("blur",{relatedTarget:o}));i.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:o}))}});a.current.observer.observe(i,{attributes:!0,attributeFilter:["disabled"]})}},[o])}let rP=null;let sP=new Set;let aP=new Map;let oP=!1;let iP=!1;const cP={Tab:!0,Escape:!0};function $507fabe10e71c6fb$var$triggerChangeHandlers(n,a){for(let o of sP)o(n,a)}function $507fabe10e71c6fb$var$isValidKey(n){return!(n.metaKey||!tP()&&n.altKey||n.ctrlKey||"Control"===n.key||"Shift"===n.key||"Meta"===n.key)}function $507fabe10e71c6fb$var$handleKeyboardEvent(n){oP=!0;if($507fabe10e71c6fb$var$isValidKey(n)){rP="keyboard";$507fabe10e71c6fb$var$triggerChangeHandlers("keyboard",n)}}function $507fabe10e71c6fb$var$handlePointerEvent(n){rP="pointer";if("mousedown"===n.type||"pointerdown"===n.type){oP=!0;$507fabe10e71c6fb$var$triggerChangeHandlers("pointer",n)}}function $507fabe10e71c6fb$var$handleClickEvent(n){if($6a7db85432448f7f$export$60278871457622de(n)){oP=!0;rP="virtual"}}function $507fabe10e71c6fb$var$handleFocusEvent(n){if(n.target!==window&&n.target!==document&&n.isTrusted){if(!oP&&!iP){rP="virtual";$507fabe10e71c6fb$var$triggerChangeHandlers("virtual",n)}oP=!1;iP=!1}}function $507fabe10e71c6fb$var$handleWindowBlur(){oP=!1;iP=!0}function $507fabe10e71c6fb$var$setupGlobalFocusEvents(n){if("undefined"==typeof window||"undefined"==typeof document||aP.get($431fbd86ca7dc216$export$f21a1ffae260145a(n)))return;const a=$431fbd86ca7dc216$export$f21a1ffae260145a(n);const o=$431fbd86ca7dc216$export$b204af158042fbac(n);let i=a.HTMLElement.prototype.focus;a.HTMLElement.prototype.focus=function(){oP=!0;i.apply(this,arguments)};o.addEventListener("keydown",$507fabe10e71c6fb$var$handleKeyboardEvent,!0);o.addEventListener("keyup",$507fabe10e71c6fb$var$handleKeyboardEvent,!0);o.addEventListener("click",$507fabe10e71c6fb$var$handleClickEvent,!0);a.addEventListener("focus",$507fabe10e71c6fb$var$handleFocusEvent,!0);a.addEventListener("blur",$507fabe10e71c6fb$var$handleWindowBlur,!1);if("undefined"!=typeof PointerEvent){o.addEventListener("pointerdown",$507fabe10e71c6fb$var$handlePointerEvent,!0);o.addEventListener("pointermove",$507fabe10e71c6fb$var$handlePointerEvent,!0);o.addEventListener("pointerup",$507fabe10e71c6fb$var$handlePointerEvent,!0)}a.addEventListener("beforeunload",()=>{$507fabe10e71c6fb$var$tearDownWindowFocusTracking(n)},{once:!0});aP.set(a,{focus:i})}const $507fabe10e71c6fb$var$tearDownWindowFocusTracking=(n,a)=>{const o=$431fbd86ca7dc216$export$f21a1ffae260145a(n);const i=$431fbd86ca7dc216$export$b204af158042fbac(n);a&&i.removeEventListener("DOMContentLoaded",a);if(aP.has(o)){o.HTMLElement.prototype.focus=aP.get(o).focus;i.removeEventListener("keydown",$507fabe10e71c6fb$var$handleKeyboardEvent,!0);i.removeEventListener("keyup",$507fabe10e71c6fb$var$handleKeyboardEvent,!0);i.removeEventListener("click",$507fabe10e71c6fb$var$handleClickEvent,!0);o.removeEventListener("focus",$507fabe10e71c6fb$var$handleFocusEvent,!0);o.removeEventListener("blur",$507fabe10e71c6fb$var$handleWindowBlur,!1);if("undefined"!=typeof PointerEvent){i.removeEventListener("pointerdown",$507fabe10e71c6fb$var$handlePointerEvent,!0);i.removeEventListener("pointermove",$507fabe10e71c6fb$var$handlePointerEvent,!0);i.removeEventListener("pointerup",$507fabe10e71c6fb$var$handlePointerEvent,!0)}aP.delete(o)}};function $507fabe10e71c6fb$export$2f1888112f558a7d(n){const a=$431fbd86ca7dc216$export$b204af158042fbac(n);let o;if("loading"!==a.readyState)$507fabe10e71c6fb$var$setupGlobalFocusEvents(n);else{o=()=>{$507fabe10e71c6fb$var$setupGlobalFocusEvents(n)};a.addEventListener("DOMContentLoaded",o)}return()=>$507fabe10e71c6fb$var$tearDownWindowFocusTracking(n,o)}"undefined"!=typeof document&&$507fabe10e71c6fb$export$2f1888112f558a7d();function $507fabe10e71c6fb$export$b9b3dfddab17db27(){return"pointer"!==rP}const lP=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function $507fabe10e71c6fb$var$isKeyboardFocusEvent(n,a,o){let i=$431fbd86ca7dc216$export$b204af158042fbac(null==o?void 0:o.target);const u="undefined"!=typeof window?$431fbd86ca7dc216$export$f21a1ffae260145a(null==o?void 0:o.target).HTMLInputElement:HTMLInputElement;const d="undefined"!=typeof window?$431fbd86ca7dc216$export$f21a1ffae260145a(null==o?void 0:o.target).HTMLTextAreaElement:HTMLTextAreaElement;const m="undefined"!=typeof window?$431fbd86ca7dc216$export$f21a1ffae260145a(null==o?void 0:o.target).HTMLElement:HTMLElement;const g="undefined"!=typeof window?$431fbd86ca7dc216$export$f21a1ffae260145a(null==o?void 0:o.target).KeyboardEvent:KeyboardEvent;n=n||i.activeElement instanceof u&&!lP.has(i.activeElement.type)||i.activeElement instanceof d||i.activeElement instanceof m&&i.activeElement.isContentEditable;return!(n&&"keyboard"===a&&o instanceof g&&!cP[o.key])}function $507fabe10e71c6fb$export$ec71b4b83ac08ec3(n,a,o){$507fabe10e71c6fb$var$setupGlobalFocusEvents();ot.useEffect(()=>{let handler=(a,i)=>{$507fabe10e71c6fb$var$isKeyboardFocusEvent(!!(null==o?void 0:o.isTextInput),a,i)&&n($507fabe10e71c6fb$export$b9b3dfddab17db27())};sP.add(handler);return()=>{sP.delete(handler)}},a)}function $a1ea59d68270f0dd$export$f8168d8dd8fd66e6(n){let{isDisabled:a,onFocus:o,onBlur:i,onFocusChange:u}=n;const d=ot.useCallback(n=>{if(n.target===n.currentTarget){i&&i(n);u&&u(!1);return!0}},[i,u]);const m=$8a9cb279dc87e130$export$715c682d09d639cc(d);const g=ot.useCallback(n=>{const a=$431fbd86ca7dc216$export$b204af158042fbac(n.target);const i=a?$d4ee10de306f2510$export$cd4e5573fbe2b576(a):$d4ee10de306f2510$export$cd4e5573fbe2b576();if(n.target===n.currentTarget&&i===$d4ee10de306f2510$export$e58f029f0fbfdb29(n.nativeEvent)){o&&o(n);u&&u(!0);m(n)}},[u,o,m]);return{focusProps:{onFocus:!a&&(o||u||i)?g:void 0,onBlur:a||!i&&!u?void 0:d}}}function $9ab94262bd0047c7$export$420e68273165f4ec(n){let{isDisabled:a,onBlurWithin:o,onFocusWithin:i,onFocusWithinChange:u}=n;let d=ot.useRef({isFocusWithin:!1});let{addGlobalListener:m,removeAllGlobalListeners:g}=$03deb23ff14920c4$export$4eaf04e54aa8eed6();let y=ot.useCallback(n=>{if(n.currentTarget.contains(n.target)&&d.current.isFocusWithin&&!n.currentTarget.contains(n.relatedTarget)){d.current.isFocusWithin=!1;g();o&&o(n);u&&u(!1)}},[o,u,d,g]);let v=$8a9cb279dc87e130$export$715c682d09d639cc(y);let x=ot.useCallback(n=>{if(!n.currentTarget.contains(n.target))return;const a=$431fbd86ca7dc216$export$b204af158042fbac(n.target);const o=$d4ee10de306f2510$export$cd4e5573fbe2b576(a);if(!d.current.isFocusWithin&&o===$d4ee10de306f2510$export$e58f029f0fbfdb29(n.nativeEvent)){i&&i(n);u&&u(!0);d.current.isFocusWithin=!0;v(n);let o=n.currentTarget;m(a,"focus",n=>{if(d.current.isFocusWithin&&!$d4ee10de306f2510$export$4282f70798064fe0(o,n.target)){let i=new a.defaultView.FocusEvent("blur",{relatedTarget:n.target});$8a9cb279dc87e130$export$c2b7abe5d61ec696(i,o);let u=$8a9cb279dc87e130$export$525bc4921d56d4a(i);y(u)}},{capture:!0})}},[i,u,v,m,y]);return a?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:x,onBlur:y}}}let uP=!1;let dP=0;function $6179b936705e76d3$var$setGlobalIgnoreEmulatedMouseEvents(){uP=!0;setTimeout(()=>{uP=!1},50)}function $6179b936705e76d3$var$handleGlobalPointerEvent(n){"touch"===n.pointerType&&$6179b936705e76d3$var$setGlobalIgnoreEmulatedMouseEvents()}function $6179b936705e76d3$var$setupGlobalTouchEvents(){if("undefined"!=typeof document){0===dP&&"undefined"!=typeof PointerEvent&&document.addEventListener("pointerup",$6179b936705e76d3$var$handleGlobalPointerEvent);dP++;return()=>{dP--;dP>0||"undefined"!=typeof PointerEvent&&document.removeEventListener("pointerup",$6179b936705e76d3$var$handleGlobalPointerEvent)}}}function $6179b936705e76d3$export$ae780daf29e6d456(n){let{onHoverStart:a,onHoverChange:o,onHoverEnd:i,isDisabled:u}=n;let[d,m]=ot.useState(!1);let g=ot.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;ot.useEffect($6179b936705e76d3$var$setupGlobalTouchEvents,[]);let{addGlobalListener:y,removeAllGlobalListeners:v}=$03deb23ff14920c4$export$4eaf04e54aa8eed6();let{hoverProps:x,triggerHoverEnd:N}=ot.useMemo(()=>{let triggerHoverStart=(n,i)=>{g.pointerType=i;if(u||"touch"===i||g.isHovered||!n.currentTarget.contains(n.target))return;g.isHovered=!0;let d=n.currentTarget;g.target=d;y($431fbd86ca7dc216$export$b204af158042fbac(n.target),"pointerover",n=>{g.isHovered&&g.target&&!$d4ee10de306f2510$export$4282f70798064fe0(g.target,n.target)&&triggerHoverEnd2(n,n.pointerType)},{capture:!0});a&&a({type:"hoverstart",target:d,pointerType:i});o&&o(!0);m(!0)};let triggerHoverEnd2=(n,a)=>{let u=g.target;g.pointerType="";g.target=null;if("touch"!==a&&g.isHovered&&u){g.isHovered=!1;v();i&&i({type:"hoverend",target:u,pointerType:a});o&&o(!1);m(!1)}};let n={};if("undefined"!=typeof PointerEvent){n.onPointerEnter=n=>{uP&&"mouse"===n.pointerType||triggerHoverStart(n,n.pointerType)};n.onPointerLeave=n=>{!u&&n.currentTarget.contains(n.target)&&triggerHoverEnd2(n,n.pointerType)}}return{hoverProps:n,triggerHoverEnd:triggerHoverEnd2}},[a,o,i,u,g,y,v]);ot.useEffect(()=>{u&&N({currentTarget:g.target},g.pointerType)},[u]);return{hoverProps:x,isHovered:d}}function $f7dceffc5ad7768b$export$4e328f61c538687f(n={}){let{autoFocus:a=!1,isTextInput:o,within:i}=n;let u=ot.useRef({isFocused:!1,isFocusVisible:a||$507fabe10e71c6fb$export$b9b3dfddab17db27()});let[d,m]=ot.useState(!1);let[g,y]=ot.useState(()=>u.current.isFocused&&u.current.isFocusVisible);let v=ot.useCallback(()=>y(u.current.isFocused&&u.current.isFocusVisible),[]);let x=ot.useCallback(n=>{u.current.isFocused=n;m(n);v()},[v]);$507fabe10e71c6fb$export$ec71b4b83ac08ec3(n=>{u.current.isFocusVisible=n;v()},[],{isTextInput:o});let{focusProps:N}=$a1ea59d68270f0dd$export$f8168d8dd8fd66e6({isDisabled:i,onFocusChange:x});let{focusWithinProps:k}=$9ab94262bd0047c7$export$420e68273165f4ec({isDisabled:!i,onFocusWithinChange:x});return{isFocused:d,isFocusVisible:g,focusProps:i?k:N}}var hP=Object.defineProperty;var d2=(n,a,o)=>a in n?hP(n,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[a]=o;var r$1=(n,a,o)=>(d2(n,"symbol"!=typeof a?a+"":a,o),o);let fP=class{constructor(){r$1(this,"current",this.detect());r$1(this,"handoffState","pending");r$1(this,"currentId",0)}set(n){this.current!==n&&(this.handoffState="pending",this.currentId=0,this.current=n)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}};let pP=new fP;function o$5(n){var a,o;return pP.isServer?null:n?"ownerDocument"in n?n.ownerDocument:"current"in n?null!=(o=null==(a=n.current)?void 0:a.ownerDocument)?o:document:null:document}function t$2(n){"function"==typeof queueMicrotask?queueMicrotask(n):Promise.resolve().then(n).catch(n=>setTimeout(()=>{throw n}))}function o$4(){let n=[],a={addEventListener:(n,o,i,u)=>(n.addEventListener(o,i,u),a.add(()=>n.removeEventListener(o,i,u))),requestAnimationFrame(...n){let o=requestAnimationFrame(...n);return a.add(()=>cancelAnimationFrame(o))},nextFrame:(...n)=>a.requestAnimationFrame(()=>a.requestAnimationFrame(...n)),setTimeout(...n){let o=setTimeout(...n);return a.add(()=>clearTimeout(o))},microTask(...n){let o={current:!0};return t$2(()=>{o.current&&n[0]()}),a.add(()=>{o.current=!1})},style(n,a,o){let i=n.style.getPropertyValue(a);return Object.assign(n.style,{[a]:o}),this.add(()=>{Object.assign(n.style,{[a]:i})})},group(n){let a=o$4();return n(a),this.add(()=>a.dispose())},add:a=>(n.includes(a)||n.push(a),()=>{let o=n.indexOf(a);if(o>=0)for(let a of n.splice(o,1))a()}),dispose(){for(let a of n.splice(0))a()}};return a}function p$1(){let[n]=ot.useState(o$4);return ot.useEffect(()=>()=>n.dispose(),[n]),n}let n$1=(n,a)=>{pP.isServer?ot.useEffect(n,a):ot.useLayoutEffect(n,a)};function s$2(n){let a=ot.useRef(n);return n$1(()=>{a.current=n},[n]),a}let o$3=function(n){let a=s$2(n);return it.useCallback((...n)=>a.current(...n),[a])};function E$2(n){let a=n.width/2,o=n.height/2;return{top:n.clientY-o,right:n.clientX+a,bottom:n.clientY+o,left:n.clientX-a}}function P$1(n,a){return!(!n||!a||n.right<a.left||n.left>a.right||n.bottom<a.top||n.top>a.bottom)}function w$1({disabled:n=!1}={}){let a=ot.useRef(null),[o,i]=ot.useState(!1),u=p$1(),d=o$3(()=>{a.current=null,i(!1),u.dispose()}),m=o$3(n=>{if(u.dispose(),null===a.current){a.current=n.currentTarget,i(!0);{let o=o$5(n.currentTarget);u.addEventListener(o,"pointerup",d,!1),u.addEventListener(o,"pointermove",n=>{if(a.current){let o=E$2(n);i(P$1(o,a.current.getBoundingClientRect()))}},!1),u.addEventListener(o,"pointercancel",d,!1)}}});return{pressed:o,pressProps:n?{}:{onPointerDown:m,onPointerUp:d,onClick:d}}}let mP=ot.createContext(void 0);function a$3(){return ot.useContext(mP)}function t$1(...n){return Array.from(new Set(n.flatMap(n=>"string"==typeof n?n.split(" "):[]))).filter(Boolean).join(" ")}function u$2(n,a,...o){if(n in a){let i=a[n];return"function"==typeof i?i(...o):i}let i=new Error(`Tried to handle "${n}" but there is no handler defined. Only defined handlers are: ${Object.keys(a).map(n=>`"${n}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,u$2),i}var gP=(n=>(n[n.None=0]="None",n[n.RenderStrategy=1]="RenderStrategy",n[n.Static=2]="Static",n))(gP||{}),yP=(n=>(n[n.Unmount=0]="Unmount",n[n.Hidden=1]="Hidden",n))(yP||{});function L$2(){let n=U$2();return ot.useCallback(a=>C$3({mergeRefs:n,...a}),[n])}function C$3({ourProps:n,theirProps:a,slot:o,defaultTag:i,features:u,visible:d=!0,name:m,mergeRefs:g}){g=null!=g?g:$;let y=P(a,n);if(d)return F(y,o,i,m,g);let v=null!=u?u:0;if(2&v){let{static:n=!1,...a}=y;if(n)return F(a,o,i,m,g)}if(1&v){let{unmount:n=!0,...a}=y;return u$2(n?0:1,{0:()=>null,1:()=>F({...a,hidden:!0,style:{display:"none"}},o,i,m,g)})}return F(y,o,i,m,g)}function F(n,a={},o,i,u){let{as:d=o,children:m,refName:g="ref",...y}=h(n,["unmount","static"]),v=void 0!==n.ref?{[g]:n.ref}:{},x="function"==typeof m?m(a):m;"className"in y&&y.className&&"function"==typeof y.className&&(y.className=y.className(a)),y["aria-labelledby"]&&y["aria-labelledby"]===y.id&&(y["aria-labelledby"]=void 0);let N={};if(a){let n=!1,o=[];for(let[i,u]of Object.entries(a))"boolean"==typeof u&&(n=!0),!0===u&&o.push(i.replace(/([A-Z])/g,n=>`-${n.toLowerCase()}`));if(n){N["data-headlessui-state"]=o.join(" ");for(let n of o)N[`data-${n}`]=""}}if(d===ot.Fragment&&(Object.keys(m$1(y)).length>0||Object.keys(m$1(N)).length>0)){if(ot.isValidElement(x)&&!(Array.isArray(x)&&x.length>1)){let n=x.props,a=null==n?void 0:n.className,o="function"==typeof a?(...n)=>t$1(a(...n),y.className):t$1(a,y.className),i=o?{className:o}:{},d=P(x.props,m$1(h(y,["ref"])));for(let u in N)u in d&&delete N[u];return ot.cloneElement(x,Object.assign({},d,N,v,{ref:u(H$1(x),v.ref)},i))}if(Object.keys(m$1(y)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${i} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(m$1(y)).concat(Object.keys(m$1(N))).map(n=>`  - ${n}`).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(n=>`  - ${n}`).join("\n")].join("\n"))}return ot.createElement(d,Object.assign({},h(y,["ref"]),d!==ot.Fragment&&v,d!==ot.Fragment&&N),x)}function U$2(){let n=ot.useRef([]),a=ot.useCallback(a=>{for(let o of n.current)null!=o&&("function"==typeof o?o(a):o.current=a)},[]);return(...o)=>{if(!o.every(n=>null==n))return n.current=o,a}}function $(...n){return n.every(n=>null==n)?void 0:a=>{for(let o of n)null!=o&&("function"==typeof o?o(a):o.current=a)}}function P(...n){if(0===n.length)return{};if(1===n.length)return n[0];let a={},o={};for(let i of n)for(let n in i)n.startsWith("on")&&"function"==typeof i[n]?(null!=o[n]||(o[n]=[]),o[n].push(i[n])):a[n]=i[n];if(a.disabled||a["aria-disabled"])for(let i in o)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(i)&&(o[i]=[n=>{var a;return null==(a=null==n?void 0:n.preventDefault)?void 0:a.call(n)}]);for(let i in o)Object.assign(a,{[i](n,...a){let u=o[i];for(let o of u){if((n instanceof Event||(null==n?void 0:n.nativeEvent)instanceof Event)&&n.defaultPrevented)return;o(n,...a)}}});return a}function _$1(...n){if(0===n.length)return{};if(1===n.length)return n[0];let a={},o={};for(let i of n)for(let n in i)n.startsWith("on")&&"function"==typeof i[n]?(null!=o[n]||(o[n]=[]),o[n].push(i[n])):a[n]=i[n];for(let i in o)Object.assign(a,{[i](...n){let a=o[i];for(let o of a)null==o||o(...n)}});return a}function K(n){var a;return Object.assign(ot.forwardRef(n),{displayName:null!=(a=n.displayName)?a:n.name})}function m$1(n){let a=Object.assign({},n);for(let o in a)void 0===a[o]&&delete a[o];return a}function h(n,a=[]){let o=Object.assign({},n);for(let i of a)i in o&&delete o[i];return o}function H$1(n){return it.version.split(".")[0]>="19"?n.props.ref:n.ref}function T(n,a,o){let[i,u]=ot.useState(o),d=void 0!==n,m=ot.useRef(d),g=ot.useRef(!1),y=ot.useRef(!1);return!d||m.current||g.current?!d&&m.current&&!y.current&&(y.current=!0,m.current=d,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")):(g.current=!0,m.current=d,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")),[d?n:i,o$3(n=>(d||u(n),null==a?void 0:a(n)))]}function l$2(n){let[a]=ot.useState(n);return a}function e$2(n={},a=null,o=[]){for(let[i,u]of Object.entries(n))o$2(o,f$3(a,i),u);return o}function f$3(n,a){return n?n+"["+a+"]":a}function o$2(n,a,o){if(Array.isArray(o))for(let[i,u]of o.entries())o$2(n,f$3(a,i.toString()),u);else o instanceof Date?n.push([a,o.toISOString()]):"boolean"==typeof o?n.push([a,o?"1":"0"]):"string"==typeof o?n.push([a,o]):"number"==typeof o?n.push([a,`${o}`]):null==o?n.push([a,""]):e$2(o,a,n)}function p(n){var a,o;let i=null!=(a=null==n?void 0:n.form)?a:n.closest("form");if(i){for(let a of i.elements)if(a!==n&&("INPUT"===a.tagName&&"submit"===a.type||"BUTTON"===a.tagName&&"submit"===a.type||"INPUT"===a.nodeName&&"image"===a.type)){a.click();return}null==(o=i.requestSubmit)||o.call(i)}}let bP="span";var vP=(n=>(n[n.None=1]="None",n[n.Focusable=2]="Focusable",n[n.Hidden=4]="Hidden",n))(vP||{});function l$1(n,a){var o;let{features:i=1,...u}=n,d={ref:a,"aria-hidden":!(2&~i)||(null!=(o=u["aria-hidden"])?o:void 0),hidden:!(4&~i)||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...!(4&~i)&&!!(2&~i)&&{display:"none"}}};return L$2()({ourProps:d,theirProps:u,slot:{},defaultTag:bP,name:"Hidden"})}let wP=K(l$1);let xP=ot.createContext(null);function c({children:n}){let a=ot.useContext(xP);if(!a)return it.createElement(it.Fragment,null,n);let{target:o}=a;return o?xb.createPortal(it.createElement(it.Fragment,null,n),o):null}function j$1({data:n,form:a,disabled:o,onReset:i,overrides:u}){let[d,m]=ot.useState(null),g=p$1();return ot.useEffect(()=>{if(i&&d)return g.addEventListener(d,"reset",i)},[d,a,i]),it.createElement(c,null,it.createElement(C$2,{setForm:m,formId:a}),e$2(n).map(([n,i])=>it.createElement(wP,{features:vP.Hidden,...m$1({key:n,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:a,disabled:o,name:n,value:i,...u})})))}function C$2({setForm:n,formId:a}){return ot.useEffect(()=>{if(a){let o=document.getElementById(a);o&&n(o)}},[n,a]),a?null:it.createElement(wP,{features:vP.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:a=>{if(!a)return;let o=a.closest("form");o&&n(o)}})}let NP=ot.createContext(void 0);function u$1(){return ot.useContext(NP)}function o$1(n){return"object"==typeof n&&null!==n&&"nodeType"in n}function t(n){return o$1(n)&&"tagName"in n}function n22(n){return t(n)&&"accessKey"in n}function l(n){return n22(n)&&"INPUT"===n.nodeName}function m2(n){return n22(n)&&"LABEL"===n.nodeName}function a$1(n){return n22(n)&&"FIELDSET"===n.nodeName}function E$1(n){return n22(n)&&"LEGEND"===n.nodeName}function L$1(n){return!!t(n)&&n.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]')}function s(n){let a=n.parentElement,o=null;for(;a&&!a$1(a);)E$1(a)&&(o=a),a=a.parentElement;let i=""===(null==a?void 0:a.getAttribute("disabled"));return(!i||!r(o))&&i}function r(n){if(!n)return!1;let a=n.previousElementSibling;for(;null!==a;){if(E$1(a))return!1;a=a.previousElementSibling}return!0}let kP=Symbol();function y2(...n){let a=ot.useRef(n);ot.useEffect(()=>{a.current=n},[n]);let o=o$3(n=>{for(let o of a.current)null!=o&&("function"==typeof o?o(n):o.current=n)});return n.every(n=>null==n||(null==n?void 0:n[kP]))?void 0:o}let CP=ot.createContext(null);CP.displayName="DescriptionContext";function f(){let n=ot.useContext(CP);if(null===n){let n=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(n,f),n}return n}function U$1(){var n,a;return null!=(a=null==(n=ot.useContext(CP))?void 0:n.value)?a:void 0}function w(){let[n,a]=ot.useState([]);return[n.length>0?n.join(" "):void 0,ot.useMemo(()=>function(n){let o=o$3(n=>(a(a=>[...a,n]),()=>a(a=>{let o=a.slice(),i=o.indexOf(n);return-1!==i&&o.splice(i,1),o}))),i=ot.useMemo(()=>({register:o,slot:n.slot,name:n.name,props:n.props,value:n.value}),[o,n.slot,n.name,n.props,n.value]);return it.createElement(CP.Provider,{value:i},n.children)},[a])]}let EP="p";function C$1(n,a){let o=ot.useId(),i=a$3(),{id:u=`headlessui-description-${o}`,...d}=n,m=f(),g=y2(a);n$1(()=>m.register(u),[u,m.register]);let y=i||!1,v=ot.useMemo(()=>({...m.slot,disabled:y}),[m.slot,y]),x={ref:g,...m.props,id:u};return L$2()({ourProps:x,theirProps:d,slot:v,defaultTag:EP,name:m.name||"Description"})}let SP=K(C$1),AP=Object.assign(SP,{});var _P=(n=>(n.Space=" ",n.Enter="Enter",n.Escape="Escape",n.Backspace="Backspace",n.Delete="Delete",n.ArrowLeft="ArrowLeft",n.ArrowUp="ArrowUp",n.ArrowRight="ArrowRight",n.ArrowDown="ArrowDown",n.Home="Home",n.End="End",n.PageUp="PageUp",n.PageDown="PageDown",n.Tab="Tab",n))(_P||{});let TP=ot.createContext(null);TP.displayName="LabelContext";function C(){let n=ot.useContext(TP);if(null===n){let n=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(n,C),n}return n}function N2(n){var a,o,i;let u=null!=(o=null==(a=ot.useContext(TP))?void 0:a.value)?o:void 0;return(null!=(i=void 0)?i:0)>0?[u,...n].filter(Boolean).join(" "):u}function Q({inherit:n=!1}={}){let a=N2(),[o,i]=ot.useState([]),u=n?[a,...o].filter(Boolean):o;return[u.length>0?u.join(" "):void 0,ot.useMemo(()=>function(n){let a=o$3(n=>(i(a=>[...a,n]),()=>i(a=>{let o=a.slice(),i=o.indexOf(n);return-1!==i&&o.splice(i,1),o}))),o=ot.useMemo(()=>({register:a,slot:n.slot,name:n.name,props:n.props,value:n.value}),[a,n.slot,n.name,n.props,n.value]);return it.createElement(TP.Provider,{value:o},n.children)},[i])]}let jP="label";function U(n,a){var o;let i=ot.useId(),u=C(),d=u$1(),m=a$3(),{id:g=`headlessui-label-${i}`,htmlFor:y=(null!=d?d:null==(o=u.props)?void 0:o.htmlFor),passive:v=!1,...x}=n,N=y2(a);n$1(()=>u.register(g),[g,u.register]);let k=o$3(n=>{let a=n.currentTarget;if((n.target===n.currentTarget||!L$1(n.target))&&(m2(a)&&n.preventDefault(),u.props&&"onClick"in u.props&&"function"==typeof u.props.onClick&&u.props.onClick(n),m2(a))){let n=document.getElementById(a.htmlFor);if(n){let a=n.getAttribute("disabled");if("true"===a||""===a)return;let o=n.getAttribute("aria-disabled");if("true"===o||""===o)return;(l(n)&&("file"===n.type||"radio"===n.type||"checkbox"===n.type)||"radio"===n.role||"checkbox"===n.role||"switch"===n.role)&&n.click(),n.focus({preventScroll:!0})}}}),E=m||!1,S=ot.useMemo(()=>({...u.slot,disabled:E}),[u.slot,E]),A={ref:N,...u.props,id:g,htmlFor:y,onClick:k};return v&&("onClick"in A&&(delete A.htmlFor,delete A.onClick),"onClick"in x&&delete x.onClick),L$2()({ourProps:A,theirProps:x,slot:S,defaultTag:y?jP:"div",name:u.name||"Label"})}let IP=K(U),PP=Object.assign(IP,{});function e(n,a){return ot.useMemo(()=>{var o;if(n.type)return n.type;let i=null!=(o=n.as)?o:"button";return"string"==typeof i&&"button"===i.toLowerCase()||"BUTTON"===(null==a?void 0:a.tagName)&&!a.hasAttribute("type")?"button":void 0},[n.type,n.as,a])}function hasWindow(){return"undefined"!=typeof window}function getNodeName(n){return isNode(n)?(n.nodeName||"").toLowerCase():"#document"}function getWindow(n){var a;return(null==n||null==(a=n.ownerDocument)?void 0:a.defaultView)||window}function getDocumentElement(n){var a;return null==(a=(isNode(n)?n.ownerDocument:n.document)||window.document)?void 0:a.documentElement}function isNode(n){return!!hasWindow()&&(n instanceof Node||n instanceof getWindow(n).Node)}function isElement(n){return!!hasWindow()&&(n instanceof Element||n instanceof getWindow(n).Element)}function isHTMLElement(n){return!!hasWindow()&&(n instanceof HTMLElement||n instanceof getWindow(n).HTMLElement)}function isShadowRoot(n){return!(!hasWindow()||"undefined"==typeof ShadowRoot)&&(n instanceof ShadowRoot||n instanceof getWindow(n).ShadowRoot)}const OP=new Set(["inline","contents"]);function isOverflowElement(n){const{overflow:a,overflowX:o,overflowY:i,display:u}=getComputedStyle$1(n);return/auto|scroll|overlay|hidden|clip/.test(a+i+o)&&!OP.has(u)}const RP=new Set(["table","td","th"]);function isTableElement(n){return RP.has(getNodeName(n))}const BP=[":popover-open",":modal"];function isTopLayer(n){return BP.some(a=>{try{return n.matches(a)}catch(o){return!1}})}const MP=["transform","translate","scale","rotate","perspective"];const zP=["transform","translate","scale","rotate","perspective","filter"];const FP=["paint","layout","strict","content"];function isContainingBlock(n){const a=isWebKit();const o=isElement(n)?getComputedStyle$1(n):n;return MP.some(n=>!!o[n]&&"none"!==o[n])||!!o.containerType&&"normal"!==o.containerType||!a&&!!o.backdropFilter&&"none"!==o.backdropFilter||!a&&!!o.filter&&"none"!==o.filter||zP.some(n=>(o.willChange||"").includes(n))||FP.some(n=>(o.contain||"").includes(n))}function getContainingBlock(n){let a=getParentNode(n);for(;isHTMLElement(a)&&!isLastTraversableNode(a);){if(isContainingBlock(a))return a;if(isTopLayer(a))return null;a=getParentNode(a)}return null}function isWebKit(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const LP=new Set(["html","body","#document"]);function isLastTraversableNode(n){return LP.has(getNodeName(n))}function getComputedStyle$1(n){return getWindow(n).getComputedStyle(n)}function getNodeScroll(n){return isElement(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function getParentNode(n){if("html"===getNodeName(n))return n;const a=n.assignedSlot||n.parentNode||isShadowRoot(n)&&n.host||getDocumentElement(n);return isShadowRoot(a)?a.host:a}function getNearestOverflowAncestor(n){const a=getParentNode(n);return isLastTraversableNode(a)?n.ownerDocument?n.ownerDocument.body:n.body:isHTMLElement(a)&&isOverflowElement(a)?a:getNearestOverflowAncestor(a)}function getOverflowAncestors(n,a,o){var i;void 0===a&&(a=[]);void 0===o&&(o=!0);const u=getNearestOverflowAncestor(n);const d=u===(null==(i=n.ownerDocument)?void 0:i.body);const m=getWindow(u);if(d){const n=getFrameElement(m);return a.concat(m,m.visualViewport||[],isOverflowElement(u)?u:[],n&&o?getOverflowAncestors(n):[])}return a.concat(u,getOverflowAncestors(u,[],o))}function getFrameElement(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}const DP=["top","right","bottom","left"];const $P=Math.min;const UP=Math.max;const WP=Math.round;const HP=Math.floor;const createCoords=n=>({x:n,y:n});const qP={left:"right",right:"left",bottom:"top",top:"bottom"};const GP={start:"end",end:"start"};function clamp(n,a,o){return UP(n,$P(a,o))}function evaluate(n,a){return"function"==typeof n?n(a):n}function getSide(n){return n.split("-")[0]}function getAlignment(n){return n.split("-")[1]}function getOppositeAxis(n){return"x"===n?"y":"x"}function getAxisLength(n){return"y"===n?"height":"width"}const VP=new Set(["top","bottom"]);function getSideAxis(n){return VP.has(getSide(n))?"y":"x"}function getAlignmentAxis(n){return getOppositeAxis(getSideAxis(n))}function getAlignmentSides(n,a,o){void 0===o&&(o=!1);const i=getAlignment(n);const u=getAlignmentAxis(n);const d=getAxisLength(u);let m="x"===u?i===(o?"end":"start")?"right":"left":"start"===i?"bottom":"top";a.reference[d]>a.floating[d]&&(m=getOppositePlacement(m));return[m,getOppositePlacement(m)]}function getExpandedPlacements(n){const a=getOppositePlacement(n);return[getOppositeAlignmentPlacement(n),a,getOppositeAlignmentPlacement(a)]}function getOppositeAlignmentPlacement(n){return n.replace(/start|end/g,n=>GP[n])}const KP=["left","right"];const ZP=["right","left"];const YP=["top","bottom"];const JP=["bottom","top"];function getSideList(n,a,o){switch(n){case"top":case"bottom":return o?a?ZP:KP:a?KP:ZP;case"left":case"right":return a?YP:JP;default:return[]}}function getOppositeAxisPlacements(n,a,o,i){const u=getAlignment(n);let d=getSideList(getSide(n),"start"===o,i);if(u){d=d.map(n=>n+"-"+u);a&&(d=d.concat(d.map(getOppositeAlignmentPlacement)))}return d}function getOppositePlacement(n){return n.replace(/left|right|bottom|top/g,n=>qP[n])}function expandPaddingObject(n){return{top:0,right:0,bottom:0,left:0,...n}}function getPaddingObject(n){return"number"!=typeof n?expandPaddingObject(n):{top:n,right:n,bottom:n,left:n}}function rectToClientRect(n){const{x:a,y:o,width:i,height:u}=n;return{width:i,height:u,top:o,left:a,right:a+i,bottom:o+u,x:a,y:o}}function computeCoordsFromPlacement(n,a,o){let{reference:i,floating:u}=n;const d=getSideAxis(a);const m=getAlignmentAxis(a);const g=getAxisLength(m);const y=getSide(a);const v="y"===d;const x=i.x+i.width/2-u.width/2;const N=i.y+i.height/2-u.height/2;const k=i[g]/2-u[g]/2;let E;switch(y){case"top":E={x:x,y:i.y-u.height};break;case"bottom":E={x:x,y:i.y+i.height};break;case"right":E={x:i.x+i.width,y:N};break;case"left":E={x:i.x-u.width,y:N};break;default:E={x:i.x,y:i.y}}switch(getAlignment(a)){case"start":E[m]-=k*(o&&v?-1:1);break;case"end":E[m]+=k*(o&&v?-1:1)}return E}const computePosition$1=async(n,a,o)=>{const{placement:i="bottom",strategy:u="absolute",middleware:d=[],platform:m}=o;const g=d.filter(Boolean);const y=await(null==m.isRTL?void 0:m.isRTL(a));let v=await m.getElementRects({reference:n,floating:a,strategy:u});let{x:x,y:N}=computeCoordsFromPlacement(v,i,y);let k=i;let E={};let S=0;for(let A=0;A<g.length;A++){const{name:o,fn:d}=g[A];const{x:_,y:j,data:I,reset:O}=await d({x:x,y:N,initialPlacement:i,placement:k,strategy:u,middlewareData:E,rects:v,platform:m,elements:{reference:n,floating:a}});x=null!=_?_:x;N=null!=j?j:N;E={...E,[o]:{...E[o],...I}};if(O&&S<=50){S++;if("object"==typeof O){O.placement&&(k=O.placement);O.rects&&(v=!0===O.rects?await m.getElementRects({reference:n,floating:a,strategy:u}):O.rects);({x:x,y:N}=computeCoordsFromPlacement(v,k,y))}A=-1}}return{x:x,y:N,placement:k,strategy:u,middlewareData:E}};async function detectOverflow(n,a){var o;void 0===a&&(a={});const{x:i,y:u,platform:d,rects:m,elements:g,strategy:y}=n;const{boundary:v="clippingAncestors",rootBoundary:x="viewport",elementContext:N="floating",altBoundary:k=!1,padding:E=0}=evaluate(a,n);const S=getPaddingObject(E);const A="floating"===N?"reference":"floating";const _=g[k?A:N];const j=rectToClientRect(await d.getClippingRect({element:null==(o=await(null==d.isElement?void 0:d.isElement(_)))||o?_:_.contextElement||await(null==d.getDocumentElement?void 0:d.getDocumentElement(g.floating)),boundary:v,rootBoundary:x,strategy:y}));const I="floating"===N?{x:i,y:u,width:m.floating.width,height:m.floating.height}:m.reference;const O=await(null==d.getOffsetParent?void 0:d.getOffsetParent(g.floating));const R=await(null==d.isElement?void 0:d.isElement(O))&&await(null==d.getScale?void 0:d.getScale(O))||{x:1,y:1};const B=rectToClientRect(d.convertOffsetParentRelativeRectToViewportRelativeRect?await d.convertOffsetParentRelativeRectToViewportRelativeRect({elements:g,rect:I,offsetParent:O,strategy:y}):I);return{top:(j.top-B.top+S.top)/R.y,bottom:(B.bottom-j.bottom+S.bottom)/R.y,left:(j.left-B.left+S.left)/R.x,right:(B.right-j.right+S.right)/R.x}}const arrow$3=n=>({name:"arrow",options:n,async fn(a){const{x:o,y:i,placement:u,rects:d,platform:m,elements:g,middlewareData:y}=a;const{element:v,padding:x=0}=evaluate(n,a)||{};if(null==v)return{};const N=getPaddingObject(x);const k={x:o,y:i};const E=getAlignmentAxis(u);const S=getAxisLength(E);const A=await m.getDimensions(v);const _="y"===E;const j=_?"top":"left";const I=_?"bottom":"right";const O=_?"clientHeight":"clientWidth";const R=d.reference[S]+d.reference[E]-k[E]-d.floating[S];const B=k[E]-d.reference[E];const M=await(null==m.getOffsetParent?void 0:m.getOffsetParent(v));let z=M?M[O]:0;z&&await(null==m.isElement?void 0:m.isElement(M))||(z=g.floating[O]||d.floating[S]);const L=R/2-B/2;const D=z/2-A[S]/2-1;const W=$P(N[j],D);const H=$P(N[I],D);const q=W;const G=z-A[S]-H;const V=z/2-A[S]/2+L;const Z=clamp(q,V,G);const Y=!y.arrow&&null!=getAlignment(u)&&V!==Z&&d.reference[S]/2-(V<q?W:H)-A[S]/2<0;const J=Y?V<q?V-q:V-G:0;return{[E]:k[E]+J,data:{[E]:Z,centerOffset:V-Z-J,...Y&&{alignmentOffset:J}},reset:Y}}});const flip$2=function(n){void 0===n&&(n={});return{name:"flip",options:n,async fn(a){var o,i;const{placement:u,middlewareData:d,rects:m,initialPlacement:g,platform:y,elements:v}=a;const{mainAxis:x=!0,crossAxis:N=!0,fallbackPlacements:k,fallbackStrategy:E="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:A=!0,..._}=evaluate(n,a);if(null!=(o=d.arrow)&&o.alignmentOffset)return{};const j=getSide(u);const I=getSideAxis(g);const O=getSide(g)===g;const R=await(null==y.isRTL?void 0:y.isRTL(v.floating));const B=k||(O||!A?[getOppositePlacement(g)]:getExpandedPlacements(g));const M="none"!==S;!k&&M&&B.push(...getOppositeAxisPlacements(g,A,S,R));const z=[g,...B];const L=await detectOverflow(a,_);const D=[];let W=(null==(i=d.flip)?void 0:i.overflows)||[];x&&D.push(L[j]);if(N){const n=getAlignmentSides(u,m,R);D.push(L[n[0]],L[n[1]])}W=[...W,{placement:u,overflows:D}];if(!D.every(n=>n<=0)){var H,q;const n=((null==(H=d.flip)?void 0:H.index)||0)+1;const a=z[n];if(a){const o="alignment"===N&&I!==getSideAxis(a);if(!o||W.every(n=>getSideAxis(n.placement)!==I||n.overflows[0]>0))return{data:{index:n,overflows:W},reset:{placement:a}}}let o=null==(q=W.filter(n=>n.overflows[0]<=0).sort((n,a)=>n.overflows[1]-a.overflows[1])[0])?void 0:q.placement;if(!o)switch(E){case"bestFit":{var G;const n=null==(G=W.filter(n=>{if(M){const a=getSideAxis(n.placement);return a===I||"y"===a}return!0}).map(n=>[n.placement,n.overflows.filter(n=>n>0).reduce((n,a)=>n+a,0)]).sort((n,a)=>n[1]-a[1])[0])?void 0:G[0];n&&(o=n);break}case"initialPlacement":o=g}if(u!==o)return{reset:{placement:o}}}return{}}}};function getSideOffsets(n,a){return{top:n.top-a.height,right:n.right-a.width,bottom:n.bottom-a.height,left:n.left-a.width}}function isAnySideFullyClipped(n){return DP.some(a=>n[a]>=0)}const hide$2=function(n){void 0===n&&(n={});return{name:"hide",options:n,async fn(a){const{rects:o}=a;const{strategy:i="referenceHidden",...u}=evaluate(n,a);switch(i){case"referenceHidden":{const n=await detectOverflow(a,{...u,elementContext:"reference"});const i=getSideOffsets(n,o.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:isAnySideFullyClipped(i)}}}case"escaped":{const n=await detectOverflow(a,{...u,altBoundary:!0});const i=getSideOffsets(n,o.floating);return{data:{escapedOffsets:i,escaped:isAnySideFullyClipped(i)}}}default:return{}}}}};const QP=new Set(["left","top"]);async function convertValueToCoords(n,a){const{placement:o,platform:i,elements:u}=n;const d=await(null==i.isRTL?void 0:i.isRTL(u.floating));const m=getSide(o);const g=getAlignment(o);const y="y"===getSideAxis(o);const v=QP.has(m)?-1:1;const x=d&&y?-1:1;const N=evaluate(a,n);let{mainAxis:k,crossAxis:E,alignmentAxis:S}="number"==typeof N?{mainAxis:N,crossAxis:0,alignmentAxis:null}:{mainAxis:N.mainAxis||0,crossAxis:N.crossAxis||0,alignmentAxis:N.alignmentAxis};g&&"number"==typeof S&&(E="end"===g?-1*S:S);return y?{x:E*x,y:k*v}:{x:k*v,y:E*x}}const offset$2=function(n){void 0===n&&(n=0);return{name:"offset",options:n,async fn(a){var o,i;const{x:u,y:d,placement:m,middlewareData:g}=a;const y=await convertValueToCoords(a,n);return m===(null==(o=g.offset)?void 0:o.placement)&&null!=(i=g.arrow)&&i.alignmentOffset?{}:{x:u+y.x,y:d+y.y,data:{...y,placement:m}}}}};const shift$2=function(n){void 0===n&&(n={});return{name:"shift",options:n,async fn(a){const{x:o,y:i,placement:u}=a;const{mainAxis:d=!0,crossAxis:m=!1,limiter:g={fn:n=>{let{x:a,y:o}=n;return{x:a,y:o}}},...y}=evaluate(n,a);const v={x:o,y:i};const x=await detectOverflow(a,y);const N=getSideAxis(getSide(u));const k=getOppositeAxis(N);let E=v[k];let S=v[N];if(d){const n="y"===k?"top":"left";const a="y"===k?"bottom":"right";const o=E+x[n];const i=E-x[a];E=clamp(o,E,i)}if(m){const n="y"===N?"top":"left";const a="y"===N?"bottom":"right";const o=S+x[n];const i=S-x[a];S=clamp(o,S,i)}const A=g.fn({...a,[k]:E,[N]:S});return{...A,data:{x:A.x-o,y:A.y-i,enabled:{[k]:d,[N]:m}}}}}};const limitShift$2=function(n){void 0===n&&(n={});return{options:n,fn(a){const{x:o,y:i,placement:u,rects:d,middlewareData:m}=a;const{offset:g=0,mainAxis:y=!0,crossAxis:v=!0}=evaluate(n,a);const x={x:o,y:i};const N=getSideAxis(u);const k=getOppositeAxis(N);let E=x[k];let S=x[N];const A=evaluate(g,a);const _="number"==typeof A?{mainAxis:A,crossAxis:0}:{mainAxis:0,crossAxis:0,...A};if(y){const n="y"===k?"height":"width";const a=d.reference[k]-d.floating[n]+_.mainAxis;const o=d.reference[k]+d.reference[n]-_.mainAxis;E<a?E=a:E>o&&(E=o)}if(v){var j,I;const n="y"===k?"width":"height";const a=QP.has(getSide(u));const o=d.reference[N]-d.floating[n]+(a&&(null==(j=m.offset)?void 0:j[N])||0)+(a?0:_.crossAxis);const i=d.reference[N]+d.reference[n]+(a?0:(null==(I=m.offset)?void 0:I[N])||0)-(a?_.crossAxis:0);S<o?S=o:S>i&&(S=i)}return{[k]:E,[N]:S}}}};const size$2=function(n){void 0===n&&(n={});return{name:"size",options:n,async fn(a){var o,i;const{placement:u,rects:d,platform:m,elements:g}=a;const{apply:y=()=>{},...v}=evaluate(n,a);const x=await detectOverflow(a,v);const N=getSide(u);const k=getAlignment(u);const E="y"===getSideAxis(u);const{width:S,height:A}=d.floating;let _;let j;if("top"===N||"bottom"===N){_=N;j=k===(await(null==m.isRTL?void 0:m.isRTL(g.floating))?"start":"end")?"left":"right"}else{j=N;_="end"===k?"top":"bottom"}const I=A-x.top-x.bottom;const O=S-x.left-x.right;const R=$P(A-x[_],I);const B=$P(S-x[j],O);const M=!a.middlewareData.shift;let z=R;let L=B;null!=(o=a.middlewareData.shift)&&o.enabled.x&&(L=O);null!=(i=a.middlewareData.shift)&&i.enabled.y&&(z=I);if(M&&!k){const n=UP(x.left,0);const a=UP(x.right,0);const o=UP(x.top,0);const i=UP(x.bottom,0);E?L=S-2*(0!==n||0!==a?n+a:UP(x.left,x.right)):z=A-2*(0!==o||0!==i?o+i:UP(x.top,x.bottom))}await y({...a,availableWidth:L,availableHeight:z});const D=await m.getDimensions(g.floating);return S!==D.width||A!==D.height?{reset:{rects:!0}}:{}}}};function getCssDimensions(n){const a=getComputedStyle$1(n);let o=parseFloat(a.width)||0;let i=parseFloat(a.height)||0;const u=isHTMLElement(n);const d=u?n.offsetWidth:o;const m=u?n.offsetHeight:i;const g=WP(o)!==d||WP(i)!==m;if(g){o=d;i=m}return{width:o,height:i,$:g}}function unwrapElement(n){return isElement(n)?n:n.contextElement}function getScale(n){const a=unwrapElement(n);if(!isHTMLElement(a))return createCoords(1);const o=a.getBoundingClientRect();const{width:i,height:u,$:d}=getCssDimensions(a);let m=(d?WP(o.width):o.width)/i;let g=(d?WP(o.height):o.height)/u;m&&Number.isFinite(m)||(m=1);g&&Number.isFinite(g)||(g=1);return{x:m,y:g}}const XP=createCoords(0);function getVisualOffsets(n){const a=getWindow(n);return isWebKit()&&a.visualViewport?{x:a.visualViewport.offsetLeft,y:a.visualViewport.offsetTop}:XP}function shouldAddVisualOffsets(n,a,o){void 0===a&&(a=!1);return!(!o||a&&o!==getWindow(n))&&a}function getBoundingClientRect(n,a,o,i){void 0===a&&(a=!1);void 0===o&&(o=!1);const u=n.getBoundingClientRect();const d=unwrapElement(n);let m=createCoords(1);a&&(i?isElement(i)&&(m=getScale(i)):m=getScale(n));const g=shouldAddVisualOffsets(d,o,i)?getVisualOffsets(d):createCoords(0);let y=(u.left+g.x)/m.x;let v=(u.top+g.y)/m.y;let x=u.width/m.x;let N=u.height/m.y;if(d){const n=getWindow(d);const a=i&&isElement(i)?getWindow(i):i;let o=n;let u=getFrameElement(o);for(;u&&i&&a!==o;){const n=getScale(u);const a=u.getBoundingClientRect();const i=getComputedStyle$1(u);const d=a.left+(u.clientLeft+parseFloat(i.paddingLeft))*n.x;const m=a.top+(u.clientTop+parseFloat(i.paddingTop))*n.y;y*=n.x;v*=n.y;x*=n.x;N*=n.y;y+=d;v+=m;o=getWindow(u);u=getFrameElement(o)}}return rectToClientRect({width:x,height:N,x:y,y:v})}function getWindowScrollBarX(n,a){const o=getNodeScroll(n).scrollLeft;return a?a.left+o:getBoundingClientRect(getDocumentElement(n)).left+o}function getHTMLOffset(n,a,o){void 0===o&&(o=!1);const i=n.getBoundingClientRect();const u=i.left+a.scrollLeft-(o?0:getWindowScrollBarX(n,i));const d=i.top+a.scrollTop;return{x:u,y:d}}function convertOffsetParentRelativeRectToViewportRelativeRect(n){let{elements:a,rect:o,offsetParent:i,strategy:u}=n;const d="fixed"===u;const m=getDocumentElement(i);const g=!!a&&isTopLayer(a.floating);if(i===m||g&&d)return o;let y={scrollLeft:0,scrollTop:0};let v=createCoords(1);const x=createCoords(0);const N=isHTMLElement(i);if(N||!N&&!d){("body"!==getNodeName(i)||isOverflowElement(m))&&(y=getNodeScroll(i));if(isHTMLElement(i)){const n=getBoundingClientRect(i);v=getScale(i);x.x=n.x+i.clientLeft;x.y=n.y+i.clientTop}}const k=!m||N||d?createCoords(0):getHTMLOffset(m,y,!0);return{width:o.width*v.x,height:o.height*v.y,x:o.x*v.x-y.scrollLeft*v.x+x.x+k.x,y:o.y*v.y-y.scrollTop*v.y+x.y+k.y}}function getClientRects(n){return Array.from(n.getClientRects())}function getDocumentRect(n){const a=getDocumentElement(n);const o=getNodeScroll(n);const i=n.ownerDocument.body;const u=UP(a.scrollWidth,a.clientWidth,i.scrollWidth,i.clientWidth);const d=UP(a.scrollHeight,a.clientHeight,i.scrollHeight,i.clientHeight);let m=-o.scrollLeft+getWindowScrollBarX(n);const g=-o.scrollTop;"rtl"===getComputedStyle$1(i).direction&&(m+=UP(a.clientWidth,i.clientWidth)-u);return{width:u,height:d,x:m,y:g}}function getViewportRect(n,a){const o=getWindow(n);const i=getDocumentElement(n);const u=o.visualViewport;let d=i.clientWidth;let m=i.clientHeight;let g=0;let y=0;if(u){d=u.width;m=u.height;const n=isWebKit();if(!n||n&&"fixed"===a){g=u.offsetLeft;y=u.offsetTop}}return{width:d,height:m,x:g,y:y}}const eO=new Set(["absolute","fixed"]);function getInnerBoundingClientRect(n,a){const o=getBoundingClientRect(n,!0,"fixed"===a);const i=o.top+n.clientTop;const u=o.left+n.clientLeft;const d=isHTMLElement(n)?getScale(n):createCoords(1);const m=n.clientWidth*d.x;const g=n.clientHeight*d.y;const y=u*d.x;const v=i*d.y;return{width:m,height:g,x:y,y:v}}function getClientRectFromClippingAncestor(n,a,o){let i;if("viewport"===a)i=getViewportRect(n,o);else if("document"===a)i=getDocumentRect(getDocumentElement(n));else if(isElement(a))i=getInnerBoundingClientRect(a,o);else{const o=getVisualOffsets(n);i={x:a.x-o.x,y:a.y-o.y,width:a.width,height:a.height}}return rectToClientRect(i)}function hasFixedPositionAncestor(n,a){const o=getParentNode(n);return!(o===a||!isElement(o)||isLastTraversableNode(o))&&("fixed"===getComputedStyle$1(o).position||hasFixedPositionAncestor(o,a))}function getClippingElementAncestors(n,a){const o=a.get(n);if(o)return o;let i=getOverflowAncestors(n,[],!1).filter(n=>isElement(n)&&"body"!==getNodeName(n));let u=null;const d="fixed"===getComputedStyle$1(n).position;let m=d?getParentNode(n):n;for(;isElement(m)&&!isLastTraversableNode(m);){const a=getComputedStyle$1(m);const o=isContainingBlock(m);o||"fixed"!==a.position||(u=null);const g=d?!o&&!u:!o&&"static"===a.position&&!!u&&eO.has(u.position)||isOverflowElement(m)&&!o&&hasFixedPositionAncestor(n,m);g?i=i.filter(n=>n!==m):u=a;m=getParentNode(m)}a.set(n,i);return i}function getClippingRect(n){let{element:a,boundary:o,rootBoundary:i,strategy:u}=n;const d="clippingAncestors"===o?isTopLayer(a)?[]:getClippingElementAncestors(a,this._c):[].concat(o);const m=[...d,i];const g=m[0];const y=m.reduce((n,o)=>{const i=getClientRectFromClippingAncestor(a,o,u);n.top=UP(i.top,n.top);n.right=$P(i.right,n.right);n.bottom=$P(i.bottom,n.bottom);n.left=UP(i.left,n.left);return n},getClientRectFromClippingAncestor(a,g,u));return{width:y.right-y.left,height:y.bottom-y.top,x:y.left,y:y.top}}function getDimensions(n){const{width:a,height:o}=getCssDimensions(n);return{width:a,height:o}}function getRectRelativeToOffsetParent(n,a,o){const i=isHTMLElement(a);const u=getDocumentElement(a);const d="fixed"===o;const m=getBoundingClientRect(n,!0,d,a);let g={scrollLeft:0,scrollTop:0};const y=createCoords(0);function setLeftRTLScrollbarOffset(){y.x=getWindowScrollBarX(u)}if(i||!i&&!d){("body"!==getNodeName(a)||isOverflowElement(u))&&(g=getNodeScroll(a));if(i){const n=getBoundingClientRect(a,!0,d,a);y.x=n.x+a.clientLeft;y.y=n.y+a.clientTop}else u&&setLeftRTLScrollbarOffset()}d&&!i&&u&&setLeftRTLScrollbarOffset();const v=!u||i||d?createCoords(0):getHTMLOffset(u,g);const x=m.left+g.scrollLeft-y.x-v.x;const N=m.top+g.scrollTop-y.y-v.y;return{x:x,y:N,width:m.width,height:m.height}}function isStaticPositioned(n){return"static"===getComputedStyle$1(n).position}function getTrueOffsetParent(n,a){if(!isHTMLElement(n)||"fixed"===getComputedStyle$1(n).position)return null;if(a)return a(n);let o=n.offsetParent;getDocumentElement(n)===o&&(o=o.ownerDocument.body);return o}function getOffsetParent(n,a){const o=getWindow(n);if(isTopLayer(n))return o;if(!isHTMLElement(n)){let a=getParentNode(n);for(;a&&!isLastTraversableNode(a);){if(isElement(a)&&!isStaticPositioned(a))return a;a=getParentNode(a)}return o}let i=getTrueOffsetParent(n,a);for(;i&&isTableElement(i)&&isStaticPositioned(i);)i=getTrueOffsetParent(i,a);return i&&isLastTraversableNode(i)&&isStaticPositioned(i)&&!isContainingBlock(i)?o:i||getContainingBlock(n)||o}const getElementRects=async function(n){const a=this.getOffsetParent||getOffsetParent;const o=this.getDimensions;const i=await o(n.floating);return{reference:getRectRelativeToOffsetParent(n.reference,await a(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function isRTL(n){return"rtl"===getComputedStyle$1(n).direction}const tO={convertOffsetParentRelativeRectToViewportRelativeRect:convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement:getDocumentElement,getClippingRect:getClippingRect,getOffsetParent:getOffsetParent,getElementRects:getElementRects,getClientRects:getClientRects,getDimensions:getDimensions,getScale:getScale,isElement:isElement,isRTL:isRTL};function rectsAreEqual(n,a){return n.x===a.x&&n.y===a.y&&n.width===a.width&&n.height===a.height}function observeMove(n,a){let o=null;let i;const u=getDocumentElement(n);function cleanup(){var n;clearTimeout(i);null==(n=o)||n.disconnect();o=null}function refresh(d,m){void 0===d&&(d=!1);void 0===m&&(m=1);cleanup();const g=n.getBoundingClientRect();const{left:y,top:v,width:x,height:N}=g;d||a();if(!x||!N)return;const k=HP(v);const E=HP(u.clientWidth-(y+x));const S=HP(u.clientHeight-(v+N));const A=HP(y);const _=-k+"px "+-E+"px "+-S+"px "+-A+"px";const j={rootMargin:_,threshold:UP(0,$P(1,m))||1};let I=!0;function handleObserve(a){const o=a[0].intersectionRatio;if(o!==m){if(!I)return refresh();o?refresh(!1,o):i=setTimeout(()=>{refresh(!1,1e-7)},1e3)}1!==o||rectsAreEqual(g,n.getBoundingClientRect())||refresh();I=!1}try{o=new IntersectionObserver(handleObserve,{...j,root:u.ownerDocument})}catch(O){o=new IntersectionObserver(handleObserve,j)}o.observe(n)}refresh(!0);return cleanup}function autoUpdate(n,a,o,i){void 0===i&&(i={});const{ancestorScroll:u=!0,ancestorResize:d=!0,elementResize:m="function"==typeof ResizeObserver,layoutShift:g="function"==typeof IntersectionObserver,animationFrame:y=!1}=i;const v=unwrapElement(n);const x=u||d?[...v?getOverflowAncestors(v):[],...getOverflowAncestors(a)]:[];x.forEach(n=>{u&&n.addEventListener("scroll",o,{passive:!0});d&&n.addEventListener("resize",o)});const N=v&&g?observeMove(v,o):null;let k=-1;let E=null;if(m){E=new ResizeObserver(n=>{let[i]=n;if(i&&i.target===v&&E){E.unobserve(a);cancelAnimationFrame(k);k=requestAnimationFrame(()=>{var n;null==(n=E)||n.observe(a)})}o()});v&&!y&&E.observe(v);E.observe(a)}let S;let A=y?getBoundingClientRect(n):null;y&&frameLoop();function frameLoop(){const a=getBoundingClientRect(n);A&&!rectsAreEqual(A,a)&&o();A=a;S=requestAnimationFrame(frameLoop)}o();return()=>{var n;x.forEach(n=>{u&&n.removeEventListener("scroll",o);d&&n.removeEventListener("resize",o)});null==N||N();null==(n=E)||n.disconnect();E=null;y&&cancelAnimationFrame(S)}}const nO=offset$2;const rO=shift$2;const sO=flip$2;const aO=size$2;const oO=hide$2;const iO=arrow$3;const cO=limitShift$2;const computePosition=(n,a,o)=>{const i=new Map;const u={platform:tO,...o};const d={...u.platform,_c:i};return computePosition$1(n,a,{...u,platform:d})};var lO="undefined"!=typeof document;var noop=function(){};var uO=lO?ot.useLayoutEffect:noop;function deepEqual(n,a){if(n===a)return!0;if(typeof n!=typeof a)return!1;if("function"==typeof n&&n.toString()===a.toString())return!0;let o;let i;let u;if(n&&a&&"object"==typeof n){if(Array.isArray(n)){o=n.length;if(o!==a.length)return!1;for(i=o;0!==i--;)if(!deepEqual(n[i],a[i]))return!1;return!0}u=Object.keys(n);o=u.length;if(o!==Object.keys(a).length)return!1;for(i=o;0!==i--;)if(!{}.hasOwnProperty.call(a,u[i]))return!1;for(i=o;0!==i--;){const o=u[i];if(!("_owner"===o&&n.$$typeof||deepEqual(n[o],a[o])))return!1}return!0}return n!=n&&a!=a}function getDPR(n){if("undefined"==typeof window)return 1;const a=n.ownerDocument.defaultView||window;return a.devicePixelRatio||1}function roundByDPR(n,a){const o=getDPR(n);return Math.round(a*o)/o}function useLatestRef(n){const a=ot.useRef(n);uO(()=>{a.current=n});return a}function useFloating(n){void 0===n&&(n={});const{placement:a="bottom",strategy:o="absolute",middleware:i=[],platform:u,elements:{reference:d,floating:m}={},transform:g=!0,whileElementsMounted:y,open:v}=n;const[x,N]=ot.useState({x:0,y:0,strategy:o,placement:a,middlewareData:{},isPositioned:!1});const[k,E]=ot.useState(i);deepEqual(k,i)||E(i);const[S,A]=ot.useState(null);const[_,j]=ot.useState(null);const I=ot.useCallback(n=>{if(n!==M.current){M.current=n;A(n)}},[]);const O=ot.useCallback(n=>{if(n!==z.current){z.current=n;j(n)}},[]);const R=d||S;const B=m||_;const M=ot.useRef(null);const z=ot.useRef(null);const L=ot.useRef(x);const D=null!=y;const W=useLatestRef(y);const H=useLatestRef(u);const q=useLatestRef(v);const G=ot.useCallback(()=>{if(!M.current||!z.current)return;const n={placement:a,strategy:o,middleware:k};H.current&&(n.platform=H.current);computePosition(M.current,z.current,n).then(n=>{const a={...n,isPositioned:!1!==q.current};if(V.current&&!deepEqual(L.current,a)){L.current=a;xb.flushSync(()=>{N(a)})}})},[k,a,o,H,q]);uO(()=>{if(!1===v&&L.current.isPositioned){L.current.isPositioned=!1;N(n=>({...n,isPositioned:!1}))}},[v]);const V=ot.useRef(!1);uO(()=>{V.current=!0;return()=>{V.current=!1}},[]);uO(()=>{R&&(M.current=R);B&&(z.current=B);if(R&&B){if(W.current)return W.current(R,B,G);G()}},[R,B,G,W,D]);const Z=ot.useMemo(()=>({reference:M,floating:z,setReference:I,setFloating:O}),[I,O]);const Y=ot.useMemo(()=>({reference:R,floating:B}),[R,B]);const J=ot.useMemo(()=>{const n={position:o,left:0,top:0};if(!Y.floating)return n;const a=roundByDPR(Y.floating,x.x);const i=roundByDPR(Y.floating,x.y);return g?{...n,transform:"translate("+a+"px, "+i+"px)",...getDPR(Y.floating)>=1.5&&{willChange:"transform"}}:{position:o,left:a,top:i}},[o,g,Y.floating,x.x,x.y]);return ot.useMemo(()=>({...x,update:G,refs:Z,elements:Y,floatingStyles:J}),[x,G,Z,Y,J])}const arrow$1=n=>{function isRef(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:n,fn(a){const{element:o,padding:i}="function"==typeof n?n(a):n;return o&&isRef(o)?null!=o.current?iO({element:o.current,padding:i}).fn(a):{}:o?iO({element:o,padding:i}).fn(a):{}}}};const offset=(n,a)=>({...nO(n),options:[n,a]});const shift=(n,a)=>({...rO(n),options:[n,a]});const limitShift=(n,a)=>({...cO(n),options:[n,a]});const flip=(n,a)=>({...sO(n),options:[n,a]});const size=(n,a)=>({...aO(n),options:[n,a]});const hide=(n,a)=>({...oO(n),options:[n,a]});const arrow=(n,a)=>({...arrow$1(n),options:[n,a]});let dO=ot.createContext(null);dO.displayName="GroupContext";let hO=ot.Fragment;function ve(n){var a;let[o,i]=ot.useState(null),[u,d]=Q(),[m,g]=w(),y=ot.useMemo(()=>({switch:o,setSwitch:i}),[o,i]),v={},x=n,N=L$2();return it.createElement(g,{name:"Switch.Description",value:m},it.createElement(d,{name:"Switch.Label",value:u,props:{htmlFor:null==(a=y.switch)?void 0:a.id,onClick(n){o&&(m2(n.currentTarget)&&n.preventDefault(),o.click(),o.focus({preventScroll:!0}))}}},it.createElement(dO.Provider,{value:y},N({ourProps:v,theirProps:x,slot:{},defaultTag:hO,name:"Switch.Group"}))))}let fO="button";function Ce(n,a){var o;let i=ot.useId(),u=u$1(),d=a$3(),{id:m=u||`headlessui-switch-${i}`,disabled:g=d||!1,checked:y,defaultChecked:v,onChange:x,name:N,value:k,form:E,autoFocus:S=!1,...A}=n,_=ot.useContext(dO),[j,I]=ot.useState(null),O=ot.useRef(null),R=y2(O,a,null===_?null:_.setSwitch,I),B=l$2(v),[M,z]=T(y,x,null!=B&&B),L=p$1(),[D,W]=ot.useState(!1),H=o$3(()=>{W(!0),null==z||z(!M),L.nextFrame(()=>{W(!1)})}),q=o$3(n=>{if(s(n.currentTarget))return n.preventDefault();n.preventDefault(),H()}),G=o$3(n=>{n.key===_P.Space?(n.preventDefault(),H()):n.key===_P.Enter&&p(n.currentTarget)}),V=o$3(n=>n.preventDefault()),Z=N2(),Y=U$1(),{isFocusVisible:J,focusProps:X}=$f7dceffc5ad7768b$export$4e328f61c538687f({autoFocus:S}),{isHovered:ee,hoverProps:te}=$6179b936705e76d3$export$ae780daf29e6d456({isDisabled:g}),{pressed:ne,pressProps:re}=w$1({disabled:g}),se=ot.useMemo(()=>({checked:M,disabled:g,hover:ee,focus:J,active:ne,autofocus:S,changing:D}),[M,ee,J,ne,g,D,S]),ae=_$1({id:m,ref:R,role:"switch",type:e(n,j),tabIndex:-1===n.tabIndex?0:null!=(o=n.tabIndex)?o:0,"aria-checked":M,"aria-labelledby":Z,"aria-describedby":Y,disabled:g||void 0,autoFocus:S,onClick:q,onKeyUp:G,onKeyPress:V},X,te,re),oe=ot.useCallback(()=>{if(void 0!==B)return null==z?void 0:z(B)},[z,B]),ie=L$2();return it.createElement(it.Fragment,null,null!=N&&it.createElement(j$1,{disabled:g,data:{[N]:k||"on"},overrides:{type:"checkbox",checked:M},form:E,onReset:oe}),ie({ourProps:ae,theirProps:A,slot:se,defaultTag:fO,name:"Switch"}))}let pO=K(Ce),mO=ve,gO=PP,yO=AP,bO=Object.assign(pO,{Group:mO,Label:gO,Description:yO});const vO=6048e5;const wO=864e5;const xO=Symbol.for("constructDateFrom");function constructFrom(n,a){return"function"==typeof n?n(a):n&&"object"==typeof n&&xO in n?n[xO](a):n instanceof Date?new n.constructor(a):new Date(a)}function toDate(n,a){return constructFrom(a||n,n)}function addDays(n,a,o){const i=toDate(n,o?.in);if(isNaN(a))return constructFrom(n,NaN);if(!a)return i;i.setDate(i.getDate()+a);return i}function addMonths(n,a,o){const i=toDate(n,o?.in);if(isNaN(a))return constructFrom(n,NaN);if(!a)return i;const u=i.getDate();const d=constructFrom(n,i.getTime());d.setMonth(i.getMonth()+a+1,0);const m=d.getDate();if(u>=m)return d;i.setFullYear(d.getFullYear(),d.getMonth(),u);return i}let NO={};function getDefaultOptions(){return NO}function startOfWeek(n,a){const o=getDefaultOptions();const i=a?.weekStartsOn??a?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0;const u=toDate(n,a?.in);const d=u.getDay();const m=(d<i?7:0)+d-i;u.setDate(u.getDate()-m);u.setHours(0,0,0,0);return u}function startOfISOWeek(n,a){return startOfWeek(n,{...a,weekStartsOn:1})}function getISOWeekYear(n,a){const o=toDate(n,a?.in);const i=o.getFullYear();const u=constructFrom(o,0);u.setFullYear(i+1,0,4);u.setHours(0,0,0,0);const d=startOfISOWeek(u);const m=constructFrom(o,0);m.setFullYear(i,0,4);m.setHours(0,0,0,0);const g=startOfISOWeek(m);return o.getTime()>=d.getTime()?i+1:o.getTime()>=g.getTime()?i:i-1}function getTimezoneOffsetInMilliseconds(n){const a=toDate(n);const o=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));o.setUTCFullYear(a.getFullYear());return+n-+o}function normalizeDates(n,...a){const o=constructFrom.bind(null,a.find(n=>"object"==typeof n));return a.map(o)}function startOfDay(n,a){const o=toDate(n,a?.in);o.setHours(0,0,0,0);return o}function differenceInCalendarDays(n,a,o){const[i,u]=normalizeDates(o?.in,n,a);const d=startOfDay(i);const m=startOfDay(u);const g=+d-getTimezoneOffsetInMilliseconds(d);const y=+m-getTimezoneOffsetInMilliseconds(m);return Math.round((g-y)/wO)}function startOfISOWeekYear(n,a){const o=getISOWeekYear(n,a);const i=constructFrom(n,0);i.setFullYear(o,0,4);i.setHours(0,0,0,0);return startOfISOWeek(i)}function addWeeks(n,a,o){return addDays(n,7*a,o)}function addYears(n,a,o){return addMonths(n,12*a,o)}function max(n,a){let o;let i=a?.in;n.forEach(n=>{i||"object"!=typeof n||(i=constructFrom.bind(null,n));const a=toDate(n,i);(!o||o<a||isNaN(+a))&&(o=a)});return constructFrom(i,o||NaN)}function min(n,a){let o;let i=a?.in;n.forEach(n=>{i||"object"!=typeof n||(i=constructFrom.bind(null,n));const a=toDate(n,i);(!o||o>a||isNaN(+a))&&(o=a)});return constructFrom(i,o||NaN)}function isSameDay(n,a,o){const[i,u]=normalizeDates(o?.in,n,a);return+startOfDay(i)===+startOfDay(u)}function isDate(n){return n instanceof Date||"object"==typeof n&&"[object Date]"===Object.prototype.toString.call(n)}function isValid(n){return!(!isDate(n)&&"number"!=typeof n||isNaN(+toDate(n)))}function differenceInCalendarMonths(n,a,o){const[i,u]=normalizeDates(o?.in,n,a);const d=i.getFullYear()-u.getFullYear();const m=i.getMonth()-u.getMonth();return 12*d+m}function endOfMonth(n,a){const o=toDate(n,a?.in);const i=o.getMonth();o.setFullYear(o.getFullYear(),i+1,0);o.setHours(23,59,59,999);return o}function normalizeInterval(n,a){const[o,i]=normalizeDates(n,a.start,a.end);return{start:o,end:i}}function eachMonthOfInterval(n,a){const{start:o,end:i}=normalizeInterval(a?.in,n);let u=+o>+i;const d=u?+o:+i;const m=u?i:o;m.setHours(0,0,0,0);m.setDate(1);let g=1;const y=[];for(;+m<=d;){y.push(constructFrom(o,m));m.setMonth(m.getMonth()+g)}return u?y.reverse():y}function startOfMonth(n,a){const o=toDate(n,a?.in);o.setDate(1);o.setHours(0,0,0,0);return o}function endOfYear(n,a){const o=toDate(n,a?.in);const i=o.getFullYear();o.setFullYear(i+1,0,0);o.setHours(23,59,59,999);return o}function startOfYear(n,a){const o=toDate(n,a?.in);o.setFullYear(o.getFullYear(),0,1);o.setHours(0,0,0,0);return o}function endOfWeek(n,a){const o=getDefaultOptions();const i=a?.weekStartsOn??a?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0;const u=toDate(n,a?.in);const d=u.getDay();const m=6+(d<i?-7:0)-(d-i);u.setDate(u.getDate()+m);u.setHours(23,59,59,999);return u}function endOfISOWeek(n,a){return endOfWeek(n,{...a,weekStartsOn:1})}const kO={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const formatDistance=(n,a,o)=>{let i;const u=kO[n];i="string"==typeof u?u:1===a?u.one:u.other.replace("{{count}}",a.toString());return o?.addSuffix?o.comparison&&o.comparison>0?"in "+i:i+" ago":i};function buildFormatLongFn(n){return(a={})=>{const o=a.width?String(a.width):n.defaultWidth;const i=n.formats[o]||n.formats[n.defaultWidth];return i}}const CO={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"};const EO={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"};const SO={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"};const AO={date:buildFormatLongFn({formats:CO,defaultWidth:"full"}),time:buildFormatLongFn({formats:EO,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:SO,defaultWidth:"full"})};const _O={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};const formatRelative=(n,a,o,i)=>_O[n];function buildLocalizeFn(n){return(a,o)=>{const i=o?.context?String(o.context):"standalone";let u;if("formatting"===i&&n.formattingValues){const a=n.defaultFormattingWidth||n.defaultWidth;const i=o?.width?String(o.width):a;u=n.formattingValues[i]||n.formattingValues[a]}else{const a=n.defaultWidth;const i=o?.width?String(o.width):n.defaultWidth;u=n.values[i]||n.values[a]}const d=n.argumentCallback?n.argumentCallback(a):a;return u[d]}}const TO={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]};const jO={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]};const IO={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]};const PO={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]};const OO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}};const RO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}};const ordinalNumber=(n,a)=>{const o=Number(n);const i=o%100;if(i>20||i<10)switch(i%10){case 1:return o+"st";case 2:return o+"nd";case 3:return o+"rd"}return o+"th"};const BO={ordinalNumber:ordinalNumber,era:buildLocalizeFn({values:TO,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:jO,defaultWidth:"wide",argumentCallback:n=>n-1}),month:buildLocalizeFn({values:IO,defaultWidth:"wide"}),day:buildLocalizeFn({values:PO,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:OO,defaultWidth:"wide",formattingValues:RO,defaultFormattingWidth:"wide"})};function buildMatchFn(n){return(a,o={})=>{const i=o.width;const u=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth];const d=a.match(u);if(!d)return null;const m=d[0];const g=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth];const y=Array.isArray(g)?findIndex(g,n=>n.test(m)):findKey(g,n=>n.test(m));let v;v=n.valueCallback?n.valueCallback(y):y;v=o.valueCallback?o.valueCallback(v):v;const x=a.slice(m.length);return{value:v,rest:x}}}function findKey(n,a){for(const o in n)if(Object.prototype.hasOwnProperty.call(n,o)&&a(n[o]))return o}function findIndex(n,a){for(let o=0;o<n.length;o++)if(a(n[o]))return o}function buildMatchPatternFn(n){return(a,o={})=>{const i=a.match(n.matchPattern);if(!i)return null;const u=i[0];const d=a.match(n.parsePattern);if(!d)return null;let m=n.valueCallback?n.valueCallback(d[0]):d[0];m=o.valueCallback?o.valueCallback(m):m;const g=a.slice(u.length);return{value:m,rest:g}}}const MO=/^(\d+)(th|st|nd|rd)?/i;const zO=/\d+/i;const FO={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i};const LO={any:[/^b/i,/^(a|c)/i]};const DO={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i};const $O={any:[/1/i,/2/i,/3/i,/4/i]};const UO={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i};const WO={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]};const HO={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i};const qO={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]};const GO={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i};const VO={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}};const KO={ordinalNumber:buildMatchPatternFn({matchPattern:MO,parsePattern:zO,valueCallback:n=>parseInt(n,10)}),era:buildMatchFn({matchPatterns:FO,defaultMatchWidth:"wide",parsePatterns:LO,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:DO,defaultMatchWidth:"wide",parsePatterns:$O,defaultParseWidth:"any",valueCallback:n=>n+1}),month:buildMatchFn({matchPatterns:UO,defaultMatchWidth:"wide",parsePatterns:WO,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:HO,defaultMatchWidth:"wide",parsePatterns:qO,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:GO,defaultMatchWidth:"any",parsePatterns:VO,defaultParseWidth:"any"})};const ZO={code:"en-US",formatDistance:formatDistance,formatLong:AO,formatRelative:formatRelative,localize:BO,match:KO,options:{weekStartsOn:0,firstWeekContainsDate:1}};function getDayOfYear(n,a){const o=toDate(n,a?.in);const i=differenceInCalendarDays(o,startOfYear(o));const u=i+1;return u}function getISOWeek(n,a){const o=toDate(n,a?.in);const i=+startOfISOWeek(o)-+startOfISOWeekYear(o);return Math.round(i/vO)+1}function getWeekYear(n,a){const o=toDate(n,a?.in);const i=o.getFullYear();const u=getDefaultOptions();const d=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??u.firstWeekContainsDate??u.locale?.options?.firstWeekContainsDate??1;const m=constructFrom(a?.in||n,0);m.setFullYear(i+1,0,d);m.setHours(0,0,0,0);const g=startOfWeek(m,a);const y=constructFrom(a?.in||n,0);y.setFullYear(i,0,d);y.setHours(0,0,0,0);const v=startOfWeek(y,a);return+o>=+g?i+1:+o>=+v?i:i-1}function startOfWeekYear(n,a){const o=getDefaultOptions();const i=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1;const u=getWeekYear(n,a);const d=constructFrom(a?.in||n,0);d.setFullYear(u,0,i);d.setHours(0,0,0,0);const m=startOfWeek(d,a);return m}function getWeek(n,a){const o=toDate(n,a?.in);const i=+startOfWeek(o,a)-+startOfWeekYear(o,a);return Math.round(i/vO)+1}function addLeadingZeros(n,a){const o=n<0?"-":"";const i=Math.abs(n).toString().padStart(a,"0");return o+i}const YO={y(n,a){const o=n.getFullYear();const i=o>0?o:1-o;return addLeadingZeros("yy"===a?i%100:i,a.length)},M(n,a){const o=n.getMonth();return"M"===a?String(o+1):addLeadingZeros(o+1,2)},d:(n,a)=>addLeadingZeros(n.getDate(),a.length),a(n,a){const o=n.getHours()/12>=1?"pm":"am";switch(a){case"a":case"aa":return o.toUpperCase();case"aaa":return o;case"aaaaa":return o[0];default:return"am"===o?"a.m.":"p.m."}},h:(n,a)=>addLeadingZeros(n.getHours()%12||12,a.length),H:(n,a)=>addLeadingZeros(n.getHours(),a.length),m:(n,a)=>addLeadingZeros(n.getMinutes(),a.length),s:(n,a)=>addLeadingZeros(n.getSeconds(),a.length),S(n,a){const o=a.length;const i=n.getMilliseconds();const u=Math.trunc(i*Math.pow(10,o-3));return addLeadingZeros(u,a.length)}};const JO={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"};const QO={G:function(n,a,o){const i=n.getFullYear()>0?1:0;switch(a){case"G":case"GG":case"GGG":return o.era(i,{width:"abbreviated"});case"GGGGG":return o.era(i,{width:"narrow"});default:return o.era(i,{width:"wide"})}},y:function(n,a,o){if("yo"===a){const a=n.getFullYear();const i=a>0?a:1-a;return o.ordinalNumber(i,{unit:"year"})}return YO.y(n,a)},Y:function(n,a,o,i){const u=getWeekYear(n,i);const d=u>0?u:1-u;if("YY"===a){const n=d%100;return addLeadingZeros(n,2)}return"Yo"===a?o.ordinalNumber(d,{unit:"year"}):addLeadingZeros(d,a.length)},R:function(n,a){const o=getISOWeekYear(n);return addLeadingZeros(o,a.length)},u:function(n,a){const o=n.getFullYear();return addLeadingZeros(o,a.length)},Q:function(n,a,o){const i=Math.ceil((n.getMonth()+1)/3);switch(a){case"Q":return String(i);case"QQ":return addLeadingZeros(i,2);case"Qo":return o.ordinalNumber(i,{unit:"quarter"});case"QQQ":return o.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return o.quarter(i,{width:"narrow",context:"formatting"});default:return o.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,a,o){const i=Math.ceil((n.getMonth()+1)/3);switch(a){case"q":return String(i);case"qq":return addLeadingZeros(i,2);case"qo":return o.ordinalNumber(i,{unit:"quarter"});case"qqq":return o.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return o.quarter(i,{width:"narrow",context:"standalone"});default:return o.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,a,o){const i=n.getMonth();switch(a){case"M":case"MM":return YO.M(n,a);case"Mo":return o.ordinalNumber(i+1,{unit:"month"});case"MMM":return o.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return o.month(i,{width:"narrow",context:"formatting"});default:return o.month(i,{width:"wide",context:"formatting"})}},L:function(n,a,o){const i=n.getMonth();switch(a){case"L":return String(i+1);case"LL":return addLeadingZeros(i+1,2);case"Lo":return o.ordinalNumber(i+1,{unit:"month"});case"LLL":return o.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return o.month(i,{width:"narrow",context:"standalone"});default:return o.month(i,{width:"wide",context:"standalone"})}},w:function(n,a,o,i){const u=getWeek(n,i);return"wo"===a?o.ordinalNumber(u,{unit:"week"}):addLeadingZeros(u,a.length)},I:function(n,a,o){const i=getISOWeek(n);return"Io"===a?o.ordinalNumber(i,{unit:"week"}):addLeadingZeros(i,a.length)},d:function(n,a,o){return"do"===a?o.ordinalNumber(n.getDate(),{unit:"date"}):YO.d(n,a)},D:function(n,a,o){const i=getDayOfYear(n);return"Do"===a?o.ordinalNumber(i,{unit:"dayOfYear"}):addLeadingZeros(i,a.length)},E:function(n,a,o){const i=n.getDay();switch(a){case"E":case"EE":case"EEE":return o.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return o.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(i,{width:"short",context:"formatting"});default:return o.day(i,{width:"wide",context:"formatting"})}},e:function(n,a,o,i){const u=n.getDay();const d=(u-i.weekStartsOn+8)%7||7;switch(a){case"e":return String(d);case"ee":return addLeadingZeros(d,2);case"eo":return o.ordinalNumber(d,{unit:"day"});case"eee":return o.day(u,{width:"abbreviated",context:"formatting"});case"eeeee":return o.day(u,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(u,{width:"short",context:"formatting"});default:return o.day(u,{width:"wide",context:"formatting"})}},c:function(n,a,o,i){const u=n.getDay();const d=(u-i.weekStartsOn+8)%7||7;switch(a){case"c":return String(d);case"cc":return addLeadingZeros(d,a.length);case"co":return o.ordinalNumber(d,{unit:"day"});case"ccc":return o.day(u,{width:"abbreviated",context:"standalone"});case"ccccc":return o.day(u,{width:"narrow",context:"standalone"});case"cccccc":return o.day(u,{width:"short",context:"standalone"});default:return o.day(u,{width:"wide",context:"standalone"})}},i:function(n,a,o){const i=n.getDay();const u=0===i?7:i;switch(a){case"i":return String(u);case"ii":return addLeadingZeros(u,a.length);case"io":return o.ordinalNumber(u,{unit:"day"});case"iii":return o.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return o.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return o.day(i,{width:"short",context:"formatting"});default:return o.day(i,{width:"wide",context:"formatting"})}},a:function(n,a,o){const i=n.getHours();const u=i/12>=1?"pm":"am";switch(a){case"a":case"aa":return o.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"aaa":return o.dayPeriod(u,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return o.dayPeriod(u,{width:"narrow",context:"formatting"});default:return o.dayPeriod(u,{width:"wide",context:"formatting"})}},b:function(n,a,o){const i=n.getHours();let u;u=12===i?JO.noon:0===i?JO.midnight:i/12>=1?"pm":"am";switch(a){case"b":case"bb":return o.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"bbb":return o.dayPeriod(u,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return o.dayPeriod(u,{width:"narrow",context:"formatting"});default:return o.dayPeriod(u,{width:"wide",context:"formatting"})}},B:function(n,a,o){const i=n.getHours();let u;u=i>=17?JO.evening:i>=12?JO.afternoon:i>=4?JO.morning:JO.night;switch(a){case"B":case"BB":case"BBB":return o.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"BBBBB":return o.dayPeriod(u,{width:"narrow",context:"formatting"});default:return o.dayPeriod(u,{width:"wide",context:"formatting"})}},h:function(n,a,o){if("ho"===a){let a=n.getHours()%12;0===a&&(a=12);return o.ordinalNumber(a,{unit:"hour"})}return YO.h(n,a)},H:function(n,a,o){return"Ho"===a?o.ordinalNumber(n.getHours(),{unit:"hour"}):YO.H(n,a)},K:function(n,a,o){const i=n.getHours()%12;return"Ko"===a?o.ordinalNumber(i,{unit:"hour"}):addLeadingZeros(i,a.length)},k:function(n,a,o){let i=n.getHours();0===i&&(i=24);return"ko"===a?o.ordinalNumber(i,{unit:"hour"}):addLeadingZeros(i,a.length)},m:function(n,a,o){return"mo"===a?o.ordinalNumber(n.getMinutes(),{unit:"minute"}):YO.m(n,a)},s:function(n,a,o){return"so"===a?o.ordinalNumber(n.getSeconds(),{unit:"second"}):YO.s(n,a)},S:function(n,a){return YO.S(n,a)},X:function(n,a,o){const i=n.getTimezoneOffset();if(0===i)return"Z";switch(a){case"X":return formatTimezoneWithOptionalMinutes(i);case"XXXX":case"XX":return formatTimezone(i);default:return formatTimezone(i,":")}},x:function(n,a,o){const i=n.getTimezoneOffset();switch(a){case"x":return formatTimezoneWithOptionalMinutes(i);case"xxxx":case"xx":return formatTimezone(i);default:return formatTimezone(i,":")}},O:function(n,a,o){const i=n.getTimezoneOffset();switch(a){case"O":case"OO":case"OOO":return"GMT"+formatTimezoneShort(i,":");default:return"GMT"+formatTimezone(i,":")}},z:function(n,a,o){const i=n.getTimezoneOffset();switch(a){case"z":case"zz":case"zzz":return"GMT"+formatTimezoneShort(i,":");default:return"GMT"+formatTimezone(i,":")}},t:function(n,a,o){const i=Math.trunc(+n/1e3);return addLeadingZeros(i,a.length)},T:function(n,a,o){return addLeadingZeros(+n,a.length)}};function formatTimezoneShort(n,a=""){const o=n>0?"-":"+";const i=Math.abs(n);const u=Math.trunc(i/60);const d=i%60;return 0===d?o+String(u):o+String(u)+a+addLeadingZeros(d,2)}function formatTimezoneWithOptionalMinutes(n,a){if(n%60==0){const a=n>0?"-":"+";return a+addLeadingZeros(Math.abs(n)/60,2)}return formatTimezone(n,a)}function formatTimezone(n,a=""){const o=n>0?"-":"+";const i=Math.abs(n);const u=addLeadingZeros(Math.trunc(i/60),2);const d=addLeadingZeros(i%60,2);return o+u+a+d}const dateLongFormatter=(n,a)=>{switch(n){case"P":return a.date({width:"short"});case"PP":return a.date({width:"medium"});case"PPP":return a.date({width:"long"});default:return a.date({width:"full"})}};const timeLongFormatter=(n,a)=>{switch(n){case"p":return a.time({width:"short"});case"pp":return a.time({width:"medium"});case"ppp":return a.time({width:"long"});default:return a.time({width:"full"})}};const dateTimeLongFormatter=(n,a)=>{const o=n.match(/(P+)(p+)?/)||[];const i=o[1];const u=o[2];if(!u)return dateLongFormatter(n,a);let d;switch(i){case"P":d=a.dateTime({width:"short"});break;case"PP":d=a.dateTime({width:"medium"});break;case"PPP":d=a.dateTime({width:"long"});break;default:d=a.dateTime({width:"full"})}return d.replace("{{date}}",dateLongFormatter(i,a)).replace("{{time}}",timeLongFormatter(u,a))};const XO={p:timeLongFormatter,P:dateTimeLongFormatter};const eR=/^D+$/;const tR=/^Y+$/;const nR=["D","DD","YY","YYYY"];function isProtectedDayOfYearToken(n){return eR.test(n)}function isProtectedWeekYearToken(n){return tR.test(n)}function warnOrThrowProtectedError(n,a,o){const i=message(n,a,o);console.warn(i);if(nR.includes(n))throw new RangeError(i)}function message(n,a,o){const i="Y"===n[0]?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${a}\`) for formatting ${i} to the input \`${o}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const rR=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g;const sR=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;const aR=/^'([^]*?)'?$/;const oR=/''/g;const iR=/[a-zA-Z]/;function format(n,a,o){const i=getDefaultOptions();const u=o?.locale??i.locale??ZO;const d=o?.firstWeekContainsDate??o?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1;const m=o?.weekStartsOn??o?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0;const g=toDate(n,o?.in);if(!isValid(g))throw new RangeError("Invalid time value");let y=a.match(sR).map(n=>{const a=n[0];if("p"===a||"P"===a){const o=XO[a];return o(n,u.formatLong)}return n}).join("").match(rR).map(n=>{if("''"===n)return{isToken:!1,value:"'"};const a=n[0];if("'"===a)return{isToken:!1,value:cleanEscapedString(n)};if(QO[a])return{isToken:!0,value:n};if(a.match(iR))throw new RangeError("Format string contains an unescaped latin alphabet character `"+a+"`");return{isToken:!1,value:n}});u.localize.preprocessor&&(y=u.localize.preprocessor(g,y));const v={firstWeekContainsDate:d,weekStartsOn:m,locale:u};return y.map(i=>{if(!i.isToken)return i.value;const d=i.value;(!o?.useAdditionalWeekYearTokens&&isProtectedWeekYearToken(d)||!o?.useAdditionalDayOfYearTokens&&isProtectedDayOfYearToken(d))&&warnOrThrowProtectedError(d,a,String(n));const m=QO[d[0]];return m(g,d,u.localize,v)}).join("")}function cleanEscapedString(n){const a=n.match(aR);return a?a[1].replace(oR,"'"):n}function getDaysInMonth(n,a){const o=toDate(n,a?.in);const i=o.getFullYear();const u=o.getMonth();const d=constructFrom(o,0);d.setFullYear(i,u+1,0);d.setHours(0,0,0,0);return d.getDate()}function getMonth(n,a){return toDate(n,a?.in).getMonth()}function getYear(n,a){return toDate(n,a?.in).getFullYear()}function isAfter(n,a){return+toDate(n)>+toDate(a)}function isBefore(n,a){return+toDate(n)<+toDate(a)}function isSameMonth(n,a,o){const[i,u]=normalizeDates(o?.in,n,a);return i.getFullYear()===u.getFullYear()&&i.getMonth()===u.getMonth()}function isSameYear(n,a,o){const[i,u]=normalizeDates(o?.in,n,a);return i.getFullYear()===u.getFullYear()}function setMonth(n,a,o){const i=toDate(n,o?.in);const u=i.getFullYear();const d=i.getDate();const m=constructFrom(n,0);m.setFullYear(u,a,15);m.setHours(0,0,0,0);const g=getDaysInMonth(m);i.setMonth(a,Math.min(d,g));return i}function setYear(n,a,o){const i=toDate(n,o?.in);if(isNaN(+i))return constructFrom(n,NaN);i.setFullYear(a);return i}const cR="-";const createClassGroupUtils=n=>{const a=createClassMap(n);const{conflictingClassGroups:o,conflictingClassGroupModifiers:i}=n;const getClassGroupId=n=>{const o=n.split(cR);""===o[0]&&1!==o.length&&o.shift();return getGroupRecursive(o,a)||getGroupIdForArbitraryProperty(n)};const getConflictingClassGroupIds=(n,a)=>{const u=o[n]||[];return a&&i[n]?[...u,...i[n]]:u};return{getClassGroupId:getClassGroupId,getConflictingClassGroupIds:getConflictingClassGroupIds}};const getGroupRecursive=(n,a)=>{if(0===n.length)return a.classGroupId;const o=n[0];const i=a.nextPart.get(o);const u=i?getGroupRecursive(n.slice(1),i):void 0;if(u)return u;if(0===a.validators.length)return;const d=n.join(cR);return a.validators.find(({validator:n})=>n(d))?.classGroupId};const lR=/^\[(.+)\]$/;const getGroupIdForArbitraryProperty=n=>{if(lR.test(n)){const a=lR.exec(n)[1];const o=a?.substring(0,a.indexOf(":"));if(o)return"arbitrary.."+o}};const createClassMap=n=>{const{theme:a,classGroups:o}=n;const i={nextPart:new Map,validators:[]};for(const u in o)processClassesRecursively(o[u],i,u,a);return i};const processClassesRecursively=(n,a,o,i)=>{n.forEach(n=>{if("string"==typeof n){const i=""===n?a:getPart(a,n);i.classGroupId=o;return}if("function"!=typeof n)Object.entries(n).forEach(([n,u])=>{processClassesRecursively(u,getPart(a,n),o,i)});else{if(isThemeGetter(n)){processClassesRecursively(n(i),a,o,i);return}a.validators.push({validator:n,classGroupId:o})}})};const getPart=(n,a)=>{let o=n;a.split(cR).forEach(n=>{o.nextPart.has(n)||o.nextPart.set(n,{nextPart:new Map,validators:[]});o=o.nextPart.get(n)});return o};const isThemeGetter=n=>n.isThemeGetter;const createLruCache=n=>{if(n<1)return{get:()=>{},set:()=>{}};let a=0;let o=new Map;let i=new Map;const update=(u,d)=>{o.set(u,d);a++;if(a>n){a=0;i=o;o=new Map}};return{get(n){let a=o.get(n);if(void 0!==a)return a;if(void 0!==(a=i.get(n))){update(n,a);return a}},set(n,a){o.has(n)?o.set(n,a):update(n,a)}}};const uR="!";const dR=":";const hR=dR.length;const createParseClassName=n=>{const{prefix:a,experimentalParseClassName:o}=n;let parseClassName=n=>{const a=[];let o=0;let i=0;let u=0;let d;for(let x=0;x<n.length;x++){let m=n[x];if(0===o&&0===i){if(m===dR){a.push(n.slice(u,x));u=x+hR;continue}if("/"===m){d=x;continue}}"["===m?o++:"]"===m?o--:"("===m?i++:")"===m&&i--}const m=0===a.length?n:n.substring(u);const g=stripImportantModifier(m);const y=g!==m;const v=d&&d>u?d-u:void 0;return{modifiers:a,hasImportantModifier:y,baseClassName:g,maybePostfixModifierPosition:v}};if(a){const n=a+dR;const o=parseClassName;parseClassName=a=>a.startsWith(n)?o(a.substring(n.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(o){const n=parseClassName;parseClassName=a=>o({className:a,parseClassName:n})}return parseClassName};const stripImportantModifier=n=>n.endsWith(uR)?n.substring(0,n.length-1):n.startsWith(uR)?n.substring(1):n;const createSortModifiers=n=>{const a=Object.fromEntries(n.orderSensitiveModifiers.map(n=>[n,!0]));const sortModifiers=n=>{if(n.length<=1)return n;const o=[];let i=[];n.forEach(n=>{const u="["===n[0]||a[n];if(u){o.push(...i.sort(),n);i=[]}else i.push(n)});o.push(...i.sort());return o};return sortModifiers};const createConfigUtils=n=>({cache:createLruCache(n.cacheSize),parseClassName:createParseClassName(n),sortModifiers:createSortModifiers(n),...createClassGroupUtils(n)});const fR=/\s+/;const mergeClassList=(n,a)=>{const{parseClassName:o,getClassGroupId:i,getConflictingClassGroupIds:u,sortModifiers:d}=a;const m=[];const g=n.trim().split(fR);let y="";for(let v=g.length-1;v>=0;v-=1){const n=g[v];const{isExternal:a,modifiers:x,hasImportantModifier:N,baseClassName:k,maybePostfixModifierPosition:E}=o(n);if(a){y=n+(y.length>0?" "+y:y);continue}let S=!!E;let A=i(S?k.substring(0,E):k);if(!A){if(!S){y=n+(y.length>0?" "+y:y);continue}A=i(k);if(!A){y=n+(y.length>0?" "+y:y);continue}S=!1}const _=d(x).join(":");const j=N?_+uR:_;const I=j+A;if(m.includes(I))continue;m.push(I);const O=u(A,S);for(let o=0;o<O.length;++o){const n=O[o];m.push(j+n)}y=n+(y.length>0?" "+y:y)}return y};function twJoin(){let n=0;let a;let o;let i="";for(;n<arguments.length;)if((a=arguments[n++])&&(o=toValue(a))){i&&(i+=" ");i+=o}return i}const toValue=n=>{if("string"==typeof n)return n;let a;let o="";for(let i=0;i<n.length;i++)if(n[i]&&(a=toValue(n[i]))){o&&(o+=" ");o+=a}return o};function createTailwindMerge(n,...a){let o;let i;let u;let d=initTailwindMerge;function initTailwindMerge(m){const g=a.reduce((n,a)=>a(n),n());o=createConfigUtils(g);i=o.cache.get;u=o.cache.set;d=tailwindMerge;return tailwindMerge(m)}function tailwindMerge(n){const a=i(n);if(a)return a;const d=mergeClassList(n,o);u(n,d);return d}return function(){return d(twJoin.apply(null,arguments))}}const fromTheme=n=>{const themeGetter=a=>a[n]||[];themeGetter.isThemeGetter=!0;return themeGetter};const pR=/^\[(?:(\w[\w-]*):)?(.+)\]$/i;const mR=/^\((?:(\w[\w-]*):)?(.+)\)$/i;const gR=/^\d+\/\d+$/;const yR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/;const bR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/;const vR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/;const wR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;const xR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;const isFraction=n=>gR.test(n);const isNumber=n=>!!n&&!Number.isNaN(Number(n));const isInteger=n=>!!n&&Number.isInteger(Number(n));const isPercent=n=>n.endsWith("%")&&isNumber(n.slice(0,-1));const isTshirtSize=n=>yR.test(n);const isAny=()=>!0;const isLengthOnly=n=>bR.test(n)&&!vR.test(n);const isNever=()=>!1;const isShadow=n=>wR.test(n);const isImage=n=>xR.test(n);const isAnyNonArbitrary=n=>!isArbitraryValue(n)&&!isArbitraryVariable(n);const isArbitrarySize=n=>getIsArbitraryValue(n,isLabelSize,isNever);const isArbitraryValue=n=>pR.test(n);const isArbitraryLength=n=>getIsArbitraryValue(n,isLabelLength,isLengthOnly);const isArbitraryNumber=n=>getIsArbitraryValue(n,isLabelNumber,isNumber);const isArbitraryPosition=n=>getIsArbitraryValue(n,isLabelPosition,isNever);const isArbitraryImage=n=>getIsArbitraryValue(n,isLabelImage,isImage);const isArbitraryShadow=n=>getIsArbitraryValue(n,isLabelShadow,isShadow);const isArbitraryVariable=n=>mR.test(n);const isArbitraryVariableLength=n=>getIsArbitraryVariable(n,isLabelLength);const isArbitraryVariableFamilyName=n=>getIsArbitraryVariable(n,isLabelFamilyName);const isArbitraryVariablePosition=n=>getIsArbitraryVariable(n,isLabelPosition);const isArbitraryVariableSize=n=>getIsArbitraryVariable(n,isLabelSize);const isArbitraryVariableImage=n=>getIsArbitraryVariable(n,isLabelImage);const isArbitraryVariableShadow=n=>getIsArbitraryVariable(n,isLabelShadow,!0);const getIsArbitraryValue=(n,a,o)=>{const i=pR.exec(n);return!!i&&(i[1]?a(i[1]):o(i[2]))};const getIsArbitraryVariable=(n,a,o=!1)=>{const i=mR.exec(n);return!!i&&(i[1]?a(i[1]):o)};const isLabelPosition=n=>"position"===n||"percentage"===n;const isLabelImage=n=>"image"===n||"url"===n;const isLabelSize=n=>"length"===n||"size"===n||"bg-size"===n;const isLabelLength=n=>"length"===n;const isLabelNumber=n=>"number"===n;const isLabelFamilyName=n=>"family-name"===n;const isLabelShadow=n=>"shadow"===n;const getDefaultConfig=()=>{const n=fromTheme("color");const a=fromTheme("font");const o=fromTheme("text");const i=fromTheme("font-weight");const u=fromTheme("tracking");const d=fromTheme("leading");const m=fromTheme("breakpoint");const g=fromTheme("container");const y=fromTheme("spacing");const v=fromTheme("radius");const x=fromTheme("shadow");const N=fromTheme("inset-shadow");const k=fromTheme("text-shadow");const E=fromTheme("drop-shadow");const S=fromTheme("blur");const A=fromTheme("perspective");const _=fromTheme("aspect");const j=fromTheme("ease");const I=fromTheme("animate");const scaleBreak=()=>["auto","avoid","all","avoid-page","page","left","right","column"];const scalePosition=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"];const scalePositionWithArbitrary=()=>[...scalePosition(),isArbitraryVariable,isArbitraryValue];const scaleOverflow=()=>["auto","hidden","clip","visible","scroll"];const scaleOverscroll=()=>["auto","contain","none"];const scaleUnambiguousSpacing=()=>[isArbitraryVariable,isArbitraryValue,y];const scaleInset=()=>[isFraction,"full","auto",...scaleUnambiguousSpacing()];const scaleGridTemplateColsRows=()=>[isInteger,"none","subgrid",isArbitraryVariable,isArbitraryValue];const scaleGridColRowStartAndEnd=()=>["auto",{span:["full",isInteger,isArbitraryVariable,isArbitraryValue]},isInteger,isArbitraryVariable,isArbitraryValue];const scaleGridColRowStartOrEnd=()=>[isInteger,"auto",isArbitraryVariable,isArbitraryValue];const scaleGridAutoColsRows=()=>["auto","min","max","fr",isArbitraryVariable,isArbitraryValue];const scaleAlignPrimaryAxis=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"];const scaleAlignSecondaryAxis=()=>["start","end","center","stretch","center-safe","end-safe"];const scaleMargin=()=>["auto",...scaleUnambiguousSpacing()];const scaleSizing=()=>[isFraction,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...scaleUnambiguousSpacing()];const scaleColor=()=>[n,isArbitraryVariable,isArbitraryValue];const scaleBgPosition=()=>[...scalePosition(),isArbitraryVariablePosition,isArbitraryPosition,{position:[isArbitraryVariable,isArbitraryValue]}];const scaleBgRepeat=()=>["no-repeat",{repeat:["","x","y","space","round"]}];const scaleBgSize=()=>["auto","cover","contain",isArbitraryVariableSize,isArbitrarySize,{size:[isArbitraryVariable,isArbitraryValue]}];const scaleGradientStopPosition=()=>[isPercent,isArbitraryVariableLength,isArbitraryLength];const scaleRadius=()=>["","none","full",v,isArbitraryVariable,isArbitraryValue];const scaleBorderWidth=()=>["",isNumber,isArbitraryVariableLength,isArbitraryLength];const scaleLineStyle=()=>["solid","dashed","dotted","double"];const scaleBlendMode=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"];const scaleMaskImagePosition=()=>[isNumber,isPercent,isArbitraryVariablePosition,isArbitraryPosition];const scaleBlur=()=>["","none",S,isArbitraryVariable,isArbitraryValue];const scaleRotate=()=>["none",isNumber,isArbitraryVariable,isArbitraryValue];const scaleScale=()=>["none",isNumber,isArbitraryVariable,isArbitraryValue];const scaleSkew=()=>[isNumber,isArbitraryVariable,isArbitraryValue];const scaleTranslate=()=>[isFraction,"full",...scaleUnambiguousSpacing()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[isTshirtSize],breakpoint:[isTshirtSize],color:[isAny],container:[isTshirtSize],"drop-shadow":[isTshirtSize],ease:["in","out","in-out"],font:[isAnyNonArbitrary],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[isTshirtSize],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[isTshirtSize],shadow:[isTshirtSize],spacing:["px",isNumber],text:[isTshirtSize],"text-shadow":[isTshirtSize],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",isFraction,isArbitraryValue,isArbitraryVariable,_]}],container:["container"],columns:[{columns:[isNumber,isArbitraryValue,isArbitraryVariable,g]}],"break-after":[{"break-after":scaleBreak()}],"break-before":[{"break-before":scaleBreak()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:scalePositionWithArbitrary()}],overflow:[{overflow:scaleOverflow()}],"overflow-x":[{"overflow-x":scaleOverflow()}],"overflow-y":[{"overflow-y":scaleOverflow()}],overscroll:[{overscroll:scaleOverscroll()}],"overscroll-x":[{"overscroll-x":scaleOverscroll()}],"overscroll-y":[{"overscroll-y":scaleOverscroll()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:scaleInset()}],"inset-x":[{"inset-x":scaleInset()}],"inset-y":[{"inset-y":scaleInset()}],start:[{start:scaleInset()}],end:[{end:scaleInset()}],top:[{top:scaleInset()}],right:[{right:scaleInset()}],bottom:[{bottom:scaleInset()}],left:[{left:scaleInset()}],visibility:["visible","invisible","collapse"],z:[{z:[isInteger,"auto",isArbitraryVariable,isArbitraryValue]}],basis:[{basis:[isFraction,"full","auto",g,...scaleUnambiguousSpacing()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[isNumber,isFraction,"auto","initial","none",isArbitraryValue]}],grow:[{grow:["",isNumber,isArbitraryVariable,isArbitraryValue]}],shrink:[{shrink:["",isNumber,isArbitraryVariable,isArbitraryValue]}],order:[{order:[isInteger,"first","last","none",isArbitraryVariable,isArbitraryValue]}],"grid-cols":[{"grid-cols":scaleGridTemplateColsRows()}],"col-start-end":[{col:scaleGridColRowStartAndEnd()}],"col-start":[{"col-start":scaleGridColRowStartOrEnd()}],"col-end":[{"col-end":scaleGridColRowStartOrEnd()}],"grid-rows":[{"grid-rows":scaleGridTemplateColsRows()}],"row-start-end":[{row:scaleGridColRowStartAndEnd()}],"row-start":[{"row-start":scaleGridColRowStartOrEnd()}],"row-end":[{"row-end":scaleGridColRowStartOrEnd()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":scaleGridAutoColsRows()}],"auto-rows":[{"auto-rows":scaleGridAutoColsRows()}],gap:[{gap:scaleUnambiguousSpacing()}],"gap-x":[{"gap-x":scaleUnambiguousSpacing()}],"gap-y":[{"gap-y":scaleUnambiguousSpacing()}],"justify-content":[{justify:[...scaleAlignPrimaryAxis(),"normal"]}],"justify-items":[{"justify-items":[...scaleAlignSecondaryAxis(),"normal"]}],"justify-self":[{"justify-self":["auto",...scaleAlignSecondaryAxis()]}],"align-content":[{content:["normal",...scaleAlignPrimaryAxis()]}],"align-items":[{items:[...scaleAlignSecondaryAxis(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...scaleAlignSecondaryAxis(),{baseline:["","last"]}]}],"place-content":[{"place-content":scaleAlignPrimaryAxis()}],"place-items":[{"place-items":[...scaleAlignSecondaryAxis(),"baseline"]}],"place-self":[{"place-self":["auto",...scaleAlignSecondaryAxis()]}],p:[{p:scaleUnambiguousSpacing()}],px:[{px:scaleUnambiguousSpacing()}],py:[{py:scaleUnambiguousSpacing()}],ps:[{ps:scaleUnambiguousSpacing()}],pe:[{pe:scaleUnambiguousSpacing()}],pt:[{pt:scaleUnambiguousSpacing()}],pr:[{pr:scaleUnambiguousSpacing()}],pb:[{pb:scaleUnambiguousSpacing()}],pl:[{pl:scaleUnambiguousSpacing()}],m:[{m:scaleMargin()}],mx:[{mx:scaleMargin()}],my:[{my:scaleMargin()}],ms:[{ms:scaleMargin()}],me:[{me:scaleMargin()}],mt:[{mt:scaleMargin()}],mr:[{mr:scaleMargin()}],mb:[{mb:scaleMargin()}],ml:[{ml:scaleMargin()}],"space-x":[{"space-x":scaleUnambiguousSpacing()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":scaleUnambiguousSpacing()}],"space-y-reverse":["space-y-reverse"],size:[{size:scaleSizing()}],w:[{w:[g,"screen",...scaleSizing()]}],"min-w":[{"min-w":[g,"screen","none",...scaleSizing()]}],"max-w":[{"max-w":[g,"screen","none","prose",{screen:[m]},...scaleSizing()]}],h:[{h:["screen","lh",...scaleSizing()]}],"min-h":[{"min-h":["screen","lh","none",...scaleSizing()]}],"max-h":[{"max-h":["screen","lh",...scaleSizing()]}],"font-size":[{text:["base",o,isArbitraryVariableLength,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,isArbitraryVariable,isArbitraryNumber]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",isPercent,isArbitraryValue]}],"font-family":[{font:[isArbitraryVariableFamilyName,isArbitraryValue,a]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[u,isArbitraryVariable,isArbitraryValue]}],"line-clamp":[{"line-clamp":[isNumber,"none",isArbitraryVariable,isArbitraryNumber]}],leading:[{leading:[d,...scaleUnambiguousSpacing()]}],"list-image":[{"list-image":["none",isArbitraryVariable,isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",isArbitraryVariable,isArbitraryValue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:scaleColor()}],"text-color":[{text:scaleColor()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...scaleLineStyle(),"wavy"]}],"text-decoration-thickness":[{decoration:[isNumber,"from-font","auto",isArbitraryVariable,isArbitraryLength]}],"text-decoration-color":[{decoration:scaleColor()}],"underline-offset":[{"underline-offset":[isNumber,"auto",isArbitraryVariable,isArbitraryValue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:scaleUnambiguousSpacing()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryVariable,isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryVariable,isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:scaleBgPosition()}],"bg-repeat":[{bg:scaleBgRepeat()}],"bg-size":[{bg:scaleBgSize()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},isInteger,isArbitraryVariable,isArbitraryValue],radial:["",isArbitraryVariable,isArbitraryValue],conic:[isInteger,isArbitraryVariable,isArbitraryValue]},isArbitraryVariableImage,isArbitraryImage]}],"bg-color":[{bg:scaleColor()}],"gradient-from-pos":[{from:scaleGradientStopPosition()}],"gradient-via-pos":[{via:scaleGradientStopPosition()}],"gradient-to-pos":[{to:scaleGradientStopPosition()}],"gradient-from":[{from:scaleColor()}],"gradient-via":[{via:scaleColor()}],"gradient-to":[{to:scaleColor()}],rounded:[{rounded:scaleRadius()}],"rounded-s":[{"rounded-s":scaleRadius()}],"rounded-e":[{"rounded-e":scaleRadius()}],"rounded-t":[{"rounded-t":scaleRadius()}],"rounded-r":[{"rounded-r":scaleRadius()}],"rounded-b":[{"rounded-b":scaleRadius()}],"rounded-l":[{"rounded-l":scaleRadius()}],"rounded-ss":[{"rounded-ss":scaleRadius()}],"rounded-se":[{"rounded-se":scaleRadius()}],"rounded-ee":[{"rounded-ee":scaleRadius()}],"rounded-es":[{"rounded-es":scaleRadius()}],"rounded-tl":[{"rounded-tl":scaleRadius()}],"rounded-tr":[{"rounded-tr":scaleRadius()}],"rounded-br":[{"rounded-br":scaleRadius()}],"rounded-bl":[{"rounded-bl":scaleRadius()}],"border-w":[{border:scaleBorderWidth()}],"border-w-x":[{"border-x":scaleBorderWidth()}],"border-w-y":[{"border-y":scaleBorderWidth()}],"border-w-s":[{"border-s":scaleBorderWidth()}],"border-w-e":[{"border-e":scaleBorderWidth()}],"border-w-t":[{"border-t":scaleBorderWidth()}],"border-w-r":[{"border-r":scaleBorderWidth()}],"border-w-b":[{"border-b":scaleBorderWidth()}],"border-w-l":[{"border-l":scaleBorderWidth()}],"divide-x":[{"divide-x":scaleBorderWidth()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":scaleBorderWidth()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...scaleLineStyle(),"hidden","none"]}],"divide-style":[{divide:[...scaleLineStyle(),"hidden","none"]}],"border-color":[{border:scaleColor()}],"border-color-x":[{"border-x":scaleColor()}],"border-color-y":[{"border-y":scaleColor()}],"border-color-s":[{"border-s":scaleColor()}],"border-color-e":[{"border-e":scaleColor()}],"border-color-t":[{"border-t":scaleColor()}],"border-color-r":[{"border-r":scaleColor()}],"border-color-b":[{"border-b":scaleColor()}],"border-color-l":[{"border-l":scaleColor()}],"divide-color":[{divide:scaleColor()}],"outline-style":[{outline:[...scaleLineStyle(),"none","hidden"]}],"outline-offset":[{"outline-offset":[isNumber,isArbitraryVariable,isArbitraryValue]}],"outline-w":[{outline:["",isNumber,isArbitraryVariableLength,isArbitraryLength]}],"outline-color":[{outline:scaleColor()}],shadow:[{shadow:["","none",x,isArbitraryVariableShadow,isArbitraryShadow]}],"shadow-color":[{shadow:scaleColor()}],"inset-shadow":[{"inset-shadow":["none",N,isArbitraryVariableShadow,isArbitraryShadow]}],"inset-shadow-color":[{"inset-shadow":scaleColor()}],"ring-w":[{ring:scaleBorderWidth()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:scaleColor()}],"ring-offset-w":[{"ring-offset":[isNumber,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":scaleColor()}],"inset-ring-w":[{"inset-ring":scaleBorderWidth()}],"inset-ring-color":[{"inset-ring":scaleColor()}],"text-shadow":[{"text-shadow":["none",k,isArbitraryVariableShadow,isArbitraryShadow]}],"text-shadow-color":[{"text-shadow":scaleColor()}],opacity:[{opacity:[isNumber,isArbitraryVariable,isArbitraryValue]}],"mix-blend":[{"mix-blend":[...scaleBlendMode(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":scaleBlendMode()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[isNumber]}],"mask-image-linear-from-pos":[{"mask-linear-from":scaleMaskImagePosition()}],"mask-image-linear-to-pos":[{"mask-linear-to":scaleMaskImagePosition()}],"mask-image-linear-from-color":[{"mask-linear-from":scaleColor()}],"mask-image-linear-to-color":[{"mask-linear-to":scaleColor()}],"mask-image-t-from-pos":[{"mask-t-from":scaleMaskImagePosition()}],"mask-image-t-to-pos":[{"mask-t-to":scaleMaskImagePosition()}],"mask-image-t-from-color":[{"mask-t-from":scaleColor()}],"mask-image-t-to-color":[{"mask-t-to":scaleColor()}],"mask-image-r-from-pos":[{"mask-r-from":scaleMaskImagePosition()}],"mask-image-r-to-pos":[{"mask-r-to":scaleMaskImagePosition()}],"mask-image-r-from-color":[{"mask-r-from":scaleColor()}],"mask-image-r-to-color":[{"mask-r-to":scaleColor()}],"mask-image-b-from-pos":[{"mask-b-from":scaleMaskImagePosition()}],"mask-image-b-to-pos":[{"mask-b-to":scaleMaskImagePosition()}],"mask-image-b-from-color":[{"mask-b-from":scaleColor()}],"mask-image-b-to-color":[{"mask-b-to":scaleColor()}],"mask-image-l-from-pos":[{"mask-l-from":scaleMaskImagePosition()}],"mask-image-l-to-pos":[{"mask-l-to":scaleMaskImagePosition()}],"mask-image-l-from-color":[{"mask-l-from":scaleColor()}],"mask-image-l-to-color":[{"mask-l-to":scaleColor()}],"mask-image-x-from-pos":[{"mask-x-from":scaleMaskImagePosition()}],"mask-image-x-to-pos":[{"mask-x-to":scaleMaskImagePosition()}],"mask-image-x-from-color":[{"mask-x-from":scaleColor()}],"mask-image-x-to-color":[{"mask-x-to":scaleColor()}],"mask-image-y-from-pos":[{"mask-y-from":scaleMaskImagePosition()}],"mask-image-y-to-pos":[{"mask-y-to":scaleMaskImagePosition()}],"mask-image-y-from-color":[{"mask-y-from":scaleColor()}],"mask-image-y-to-color":[{"mask-y-to":scaleColor()}],"mask-image-radial":[{"mask-radial":[isArbitraryVariable,isArbitraryValue]}],"mask-image-radial-from-pos":[{"mask-radial-from":scaleMaskImagePosition()}],"mask-image-radial-to-pos":[{"mask-radial-to":scaleMaskImagePosition()}],"mask-image-radial-from-color":[{"mask-radial-from":scaleColor()}],"mask-image-radial-to-color":[{"mask-radial-to":scaleColor()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":scalePosition()}],"mask-image-conic-pos":[{"mask-conic":[isNumber]}],"mask-image-conic-from-pos":[{"mask-conic-from":scaleMaskImagePosition()}],"mask-image-conic-to-pos":[{"mask-conic-to":scaleMaskImagePosition()}],"mask-image-conic-from-color":[{"mask-conic-from":scaleColor()}],"mask-image-conic-to-color":[{"mask-conic-to":scaleColor()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:scaleBgPosition()}],"mask-repeat":[{mask:scaleBgRepeat()}],"mask-size":[{mask:scaleBgSize()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",isArbitraryVariable,isArbitraryValue]}],filter:[{filter:["","none",isArbitraryVariable,isArbitraryValue]}],blur:[{blur:scaleBlur()}],brightness:[{brightness:[isNumber,isArbitraryVariable,isArbitraryValue]}],contrast:[{contrast:[isNumber,isArbitraryVariable,isArbitraryValue]}],"drop-shadow":[{"drop-shadow":["","none",E,isArbitraryVariableShadow,isArbitraryShadow]}],"drop-shadow-color":[{"drop-shadow":scaleColor()}],grayscale:[{grayscale:["",isNumber,isArbitraryVariable,isArbitraryValue]}],"hue-rotate":[{"hue-rotate":[isNumber,isArbitraryVariable,isArbitraryValue]}],invert:[{invert:["",isNumber,isArbitraryVariable,isArbitraryValue]}],saturate:[{saturate:[isNumber,isArbitraryVariable,isArbitraryValue]}],sepia:[{sepia:["",isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-filter":[{"backdrop-filter":["","none",isArbitraryVariable,isArbitraryValue]}],"backdrop-blur":[{"backdrop-blur":scaleBlur()}],"backdrop-brightness":[{"backdrop-brightness":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-contrast":[{"backdrop-contrast":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-invert":[{"backdrop-invert":["",isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-opacity":[{"backdrop-opacity":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-saturate":[{"backdrop-saturate":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-sepia":[{"backdrop-sepia":["",isNumber,isArbitraryVariable,isArbitraryValue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":scaleUnambiguousSpacing()}],"border-spacing-x":[{"border-spacing-x":scaleUnambiguousSpacing()}],"border-spacing-y":[{"border-spacing-y":scaleUnambiguousSpacing()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",isArbitraryVariable,isArbitraryValue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[isNumber,"initial",isArbitraryVariable,isArbitraryValue]}],ease:[{ease:["linear","initial",j,isArbitraryVariable,isArbitraryValue]}],delay:[{delay:[isNumber,isArbitraryVariable,isArbitraryValue]}],animate:[{animate:["none",I,isArbitraryVariable,isArbitraryValue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[A,isArbitraryVariable,isArbitraryValue]}],"perspective-origin":[{"perspective-origin":scalePositionWithArbitrary()}],rotate:[{rotate:scaleRotate()}],"rotate-x":[{"rotate-x":scaleRotate()}],"rotate-y":[{"rotate-y":scaleRotate()}],"rotate-z":[{"rotate-z":scaleRotate()}],scale:[{scale:scaleScale()}],"scale-x":[{"scale-x":scaleScale()}],"scale-y":[{"scale-y":scaleScale()}],"scale-z":[{"scale-z":scaleScale()}],"scale-3d":["scale-3d"],skew:[{skew:scaleSkew()}],"skew-x":[{"skew-x":scaleSkew()}],"skew-y":[{"skew-y":scaleSkew()}],transform:[{transform:[isArbitraryVariable,isArbitraryValue,"","none","gpu","cpu"]}],"transform-origin":[{origin:scalePositionWithArbitrary()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:scaleTranslate()}],"translate-x":[{"translate-x":scaleTranslate()}],"translate-y":[{"translate-y":scaleTranslate()}],"translate-z":[{"translate-z":scaleTranslate()}],"translate-none":["translate-none"],accent:[{accent:scaleColor()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:scaleColor()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryVariable,isArbitraryValue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":scaleUnambiguousSpacing()}],"scroll-mx":[{"scroll-mx":scaleUnambiguousSpacing()}],"scroll-my":[{"scroll-my":scaleUnambiguousSpacing()}],"scroll-ms":[{"scroll-ms":scaleUnambiguousSpacing()}],"scroll-me":[{"scroll-me":scaleUnambiguousSpacing()}],"scroll-mt":[{"scroll-mt":scaleUnambiguousSpacing()}],"scroll-mr":[{"scroll-mr":scaleUnambiguousSpacing()}],"scroll-mb":[{"scroll-mb":scaleUnambiguousSpacing()}],"scroll-ml":[{"scroll-ml":scaleUnambiguousSpacing()}],"scroll-p":[{"scroll-p":scaleUnambiguousSpacing()}],"scroll-px":[{"scroll-px":scaleUnambiguousSpacing()}],"scroll-py":[{"scroll-py":scaleUnambiguousSpacing()}],"scroll-ps":[{"scroll-ps":scaleUnambiguousSpacing()}],"scroll-pe":[{"scroll-pe":scaleUnambiguousSpacing()}],"scroll-pt":[{"scroll-pt":scaleUnambiguousSpacing()}],"scroll-pr":[{"scroll-pr":scaleUnambiguousSpacing()}],"scroll-pb":[{"scroll-pb":scaleUnambiguousSpacing()}],"scroll-pl":[{"scroll-pl":scaleUnambiguousSpacing()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryVariable,isArbitraryValue]}],fill:[{fill:["none",...scaleColor()]}],"stroke-w":[{stroke:[isNumber,isArbitraryVariableLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:["none",...scaleColor()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}};const NR=createTailwindMerge(getDefaultConfig);function cn2(...n){return NR(clsx(n))}function composeEventHandlers(n,a,{checkForDefaultPrevented:o=!0}={}){return function(i){n?.(i);if(!1===o||!i.defaultPrevented)return a?.(i)}}function setRef(n,a){if("function"==typeof n)return n(a);null!=n&&(n.current=a)}function composeRefs(...n){return a=>{let o=!1;const i=n.map(n=>{const i=setRef(n,a);o||"function"!=typeof i||(o=!0);return i});if(o)return()=>{for(let a=0;a<i.length;a++){const o=i[a];"function"==typeof o?o():setRef(n[a],null)}}}}function useComposedRefs(...n){return ot.useCallback(composeRefs(...n),n)}function createContextScope(n,a=[]){let o=[];function createContext3(a,i){const u=ot.createContext(i);const d=o.length;o=[...o,i];const Provider=a=>{const{scope:o,children:i,...m}=a;const g=o?.[n]?.[d]||u;const y=ot.useMemo(()=>m,Object.values(m));return at.jsx(g.Provider,{value:y,children:i})};Provider.displayName=a+"Provider";function useContext2(o,m){const g=m?.[n]?.[d]||u;const y=ot.useContext(g);if(y)return y;if(void 0!==i)return i;throw new Error(`\`${o}\` must be used within \`${a}\``)}return[Provider,useContext2]}const createScope=()=>{const a=o.map(n=>ot.createContext(n));return function(o){const i=o?.[n]||a;return ot.useMemo(()=>({[`__scope${n}`]:{...o,[n]:i}}),[o,i])}};createScope.scopeName=n;return[createContext3,composeContextScopes(createScope,...a)]}function composeContextScopes(...n){const a=n[0];if(1===n.length)return a;const createScope=()=>{const o=n.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(n){const i=o.reduce((a,{useScope:o,scopeName:i})=>{const u=o(n);const d=u[`__scope${i}`];return{...a,...d}},{});return ot.useMemo(()=>({[`__scope${a.scopeName}`]:i}),[i])}};createScope.scopeName=a.scopeName;return createScope}function createSlot(n){const a=createSlotClone(n);const o=ot.forwardRef((n,o)=>{const{children:i,...u}=n;const d=ot.Children.toArray(i);const m=d.find(isSlottable);if(m){const n=m.props.children;const i=d.map(a=>a===m?ot.Children.count(n)>1?ot.Children.only(null):ot.isValidElement(n)?n.props.children:null:a);return at.jsx(a,{...u,ref:o,children:ot.isValidElement(n)?ot.cloneElement(n,void 0,i):null})}return at.jsx(a,{...u,ref:o,children:i})});o.displayName=`${n}.Slot`;return o}var kR=createSlot("Slot");function createSlotClone(n){const a=ot.forwardRef((n,a)=>{const{children:o,...i}=n;if(ot.isValidElement(o)){const n=getElementRef$1(o);const u=mergeProps(i,o.props);o.type!==ot.Fragment&&(u.ref=a?composeRefs(a,n):n);return ot.cloneElement(o,u)}return ot.Children.count(o)>1?ot.Children.only(null):null});a.displayName=`${n}.SlotClone`;return a}var CR=Symbol("radix.slottable");function isSlottable(n){return ot.isValidElement(n)&&"function"==typeof n.type&&"__radixId"in n.type&&n.type.__radixId===CR}function mergeProps(n,a){const o={...a};for(const i in a){const u=n[i];const d=a[i];const m=/^on[A-Z]/.test(i);m?u&&d?o[i]=(...n)=>{const a=d(...n);u(...n);return a}:u&&(o[i]=u):"style"===i?o[i]={...u,...d}:"className"===i&&(o[i]=[u,d].filter(Boolean).join(" "))}return{...n,...o}}function getElementRef$1(n){let a=Object.getOwnPropertyDescriptor(n.props,"ref")?.get;let o=a&&"isReactWarning"in a&&a.isReactWarning;if(o)return n.ref;a=Object.getOwnPropertyDescriptor(n,"ref")?.get;o=a&&"isReactWarning"in a&&a.isReactWarning;return o?n.props.ref:n.props.ref||n.ref}var ER=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"];var SR=ER.reduce((n,a)=>{const o=createSlot(`Primitive.${a}`);const i=ot.forwardRef((n,i)=>{const{asChild:u,...d}=n;const m=u?o:a;"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0);return at.jsx(m,{...d,ref:i})});i.displayName=`Primitive.${a}`;return{...n,[a]:i}},{});function dispatchDiscreteCustomEvent(n,a){n&&xb.flushSync(()=>n.dispatchEvent(a))}function useCallbackRef$1(n){const a=ot.useRef(n);ot.useEffect(()=>{a.current=n});return ot.useMemo(()=>(...n)=>a.current?.(...n),[])}function useEscapeKeydown(n,a=globalThis?.document){const o=useCallbackRef$1(n);ot.useEffect(()=>{const handleKeyDown=n=>{"Escape"===n.key&&o(n)};a.addEventListener("keydown",handleKeyDown,{capture:!0});return()=>a.removeEventListener("keydown",handleKeyDown,{capture:!0})},[o,a])}var AR="DismissableLayer";var _R="dismissableLayer.update";var TR="dismissableLayer.pointerDownOutside";var jR="dismissableLayer.focusOutside";var IR;var PR=ot.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set});var OR=ot.forwardRef((n,a)=>{const{disableOutsidePointerEvents:o=!1,onEscapeKeyDown:i,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:m,onDismiss:g,...y}=n;const v=ot.useContext(PR);const[x,N]=ot.useState(null);const k=x?.ownerDocument??globalThis?.document;const[,E]=ot.useState({});const S=useComposedRefs(a,n=>N(n));const A=Array.from(v.layers);const[_]=[...v.layersWithOutsidePointerEventsDisabled].slice(-1);const j=A.indexOf(_);const I=x?A.indexOf(x):-1;const O=v.layersWithOutsidePointerEventsDisabled.size>0;const R=I>=j;const B=usePointerDownOutside(n=>{const a=n.target;const o=[...v.branches].some(n=>n.contains(a));if(R&&!o){u?.(n);m?.(n);n.defaultPrevented||g?.()}},k);const M=useFocusOutside(n=>{const a=n.target;const o=[...v.branches].some(n=>n.contains(a));if(!o){d?.(n);m?.(n);n.defaultPrevented||g?.()}},k);useEscapeKeydown(n=>{const a=I===v.layers.size-1;if(a){i?.(n);if(!n.defaultPrevented&&g){n.preventDefault();g()}}},k);ot.useEffect(()=>{if(x){if(o){if(0===v.layersWithOutsidePointerEventsDisabled.size){IR=k.body.style.pointerEvents;k.body.style.pointerEvents="none"}v.layersWithOutsidePointerEventsDisabled.add(x)}v.layers.add(x);dispatchUpdate();return()=>{o&&1===v.layersWithOutsidePointerEventsDisabled.size&&(k.body.style.pointerEvents=IR)}}},[x,k,o,v]);ot.useEffect(()=>()=>{if(x){v.layers.delete(x);v.layersWithOutsidePointerEventsDisabled.delete(x);dispatchUpdate()}},[x,v]);ot.useEffect(()=>{const handleUpdate=()=>E({});document.addEventListener(_R,handleUpdate);return()=>document.removeEventListener(_R,handleUpdate)},[]);return at.jsx(SR.div,{...y,ref:S,style:{pointerEvents:O?R?"auto":"none":void 0,...n.style},onFocusCapture:composeEventHandlers(n.onFocusCapture,M.onFocusCapture),onBlurCapture:composeEventHandlers(n.onBlurCapture,M.onBlurCapture),onPointerDownCapture:composeEventHandlers(n.onPointerDownCapture,B.onPointerDownCapture)})});OR.displayName=AR;var RR="DismissableLayerBranch";var BR=ot.forwardRef((n,a)=>{const o=ot.useContext(PR);const i=ot.useRef(null);const u=useComposedRefs(a,i);ot.useEffect(()=>{const n=i.current;if(n){o.branches.add(n);return()=>{o.branches.delete(n)}}},[o.branches]);return at.jsx(SR.div,{...n,ref:u})});BR.displayName=RR;function usePointerDownOutside(n,a=globalThis?.document){const o=useCallbackRef$1(n);const i=ot.useRef(!1);const u=ot.useRef(()=>{});ot.useEffect(()=>{const handlePointerDown=n=>{if(n.target&&!i.current){let handleAndDispatchPointerDownOutsideEvent2=function(){handleAndDispatchCustomEvent(TR,o,i,{discrete:!0})};const i={originalEvent:n};if("touch"===n.pointerType){a.removeEventListener("click",u.current);u.current=handleAndDispatchPointerDownOutsideEvent2;a.addEventListener("click",u.current,{once:!0})}else handleAndDispatchPointerDownOutsideEvent2()}else a.removeEventListener("click",u.current);i.current=!1};const n=window.setTimeout(()=>{a.addEventListener("pointerdown",handlePointerDown)},0);return()=>{window.clearTimeout(n);a.removeEventListener("pointerdown",handlePointerDown);a.removeEventListener("click",u.current)}},[a,o]);return{onPointerDownCapture:()=>i.current=!0}}function useFocusOutside(n,a=globalThis?.document){const o=useCallbackRef$1(n);const i=ot.useRef(!1);ot.useEffect(()=>{const handleFocus=n=>{if(n.target&&!i.current){const a={originalEvent:n};handleAndDispatchCustomEvent(jR,o,a,{discrete:!1})}};a.addEventListener("focusin",handleFocus);return()=>a.removeEventListener("focusin",handleFocus)},[a,o]);return{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function dispatchUpdate(){const n=new CustomEvent(_R);document.dispatchEvent(n)}function handleAndDispatchCustomEvent(n,a,o,{discrete:i}){const u=o.originalEvent.target;const d=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:o});a&&u.addEventListener(n,a,{once:!0});i?dispatchDiscreteCustomEvent(u,d):u.dispatchEvent(d)}var MR=0;function useFocusGuards(){ot.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",n[0]??createFocusGuard());document.body.insertAdjacentElement("beforeend",n[1]??createFocusGuard());MR++;return()=>{1===MR&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove());MR--}},[])}function createFocusGuard(){const n=document.createElement("span");n.setAttribute("data-radix-focus-guard","");n.tabIndex=0;n.style.outline="none";n.style.opacity="0";n.style.position="fixed";n.style.pointerEvents="none";return n}var zR="focusScope.autoFocusOnMount";var FR="focusScope.autoFocusOnUnmount";var LR={bubbles:!1,cancelable:!0};var DR="FocusScope";var $R=ot.forwardRef((n,a)=>{const{loop:o=!1,trapped:i=!1,onMountAutoFocus:u,onUnmountAutoFocus:d,...m}=n;const[g,y]=ot.useState(null);const v=useCallbackRef$1(u);const x=useCallbackRef$1(d);const N=ot.useRef(null);const k=useComposedRefs(a,n=>y(n));const E=ot.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;ot.useEffect(()=>{if(i){let handleFocusIn2=function(n){if(E.paused||!g)return;const a=n.target;g.contains(a)?N.current=a:focus(N.current,{select:!0})},handleFocusOut2=function(n){if(E.paused||!g)return;const a=n.relatedTarget;null!==a&&(g.contains(a)||focus(N.current,{select:!0}))},handleMutations2=function(n){const a=document.activeElement;if(a===document.body)for(const o of n)o.removedNodes.length>0&&focus(g)};document.addEventListener("focusin",handleFocusIn2);document.addEventListener("focusout",handleFocusOut2);const n=new MutationObserver(handleMutations2);g&&n.observe(g,{childList:!0,subtree:!0});return()=>{document.removeEventListener("focusin",handleFocusIn2);document.removeEventListener("focusout",handleFocusOut2);n.disconnect()}}},[i,g,E.paused]);ot.useEffect(()=>{if(g){UR.add(E);const n=document.activeElement;const a=g.contains(n);if(!a){const a=new CustomEvent(zR,LR);g.addEventListener(zR,v);g.dispatchEvent(a);if(!a.defaultPrevented){focusFirst(removeLinks(getTabbableCandidates(g)),{select:!0});document.activeElement===n&&focus(g)}}return()=>{g.removeEventListener(zR,v);setTimeout(()=>{const a=new CustomEvent(FR,LR);g.addEventListener(FR,x);g.dispatchEvent(a);a.defaultPrevented||focus(n??document.body,{select:!0});g.removeEventListener(FR,x);UR.remove(E)},0)}}},[g,v,x,E]);const S=ot.useCallback(n=>{if(!o&&!i)return;if(E.paused)return;const a="Tab"===n.key&&!n.altKey&&!n.ctrlKey&&!n.metaKey;const u=document.activeElement;if(a&&u){const a=n.currentTarget;const[i,d]=getTabbableEdges(a);const m=i&&d;if(m)if(n.shiftKey||u!==d){if(n.shiftKey&&u===i){n.preventDefault();o&&focus(d,{select:!0})}}else{n.preventDefault();o&&focus(i,{select:!0})}else u===a&&n.preventDefault()}},[o,i,E.paused]);return at.jsx(SR.div,{tabIndex:-1,...m,ref:k,onKeyDown:S})});$R.displayName=DR;function focusFirst(n,{select:a=!1}={}){const o=document.activeElement;for(const i of n){focus(i,{select:a});if(document.activeElement!==o)return}}function getTabbableEdges(n){const a=getTabbableCandidates(n);const o=findVisible(a,n);const i=findVisible(a.reverse(),n);return[o,i]}function getTabbableCandidates(n){const a=[];const o=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a="INPUT"===n.tagName&&"hidden"===n.type;return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;o.nextNode();)a.push(o.currentNode);return a}function findVisible(n,a){for(const o of n)if(!isHidden(o,{upTo:a}))return o}function isHidden(n,{upTo:a}){if("hidden"===getComputedStyle(n).visibility)return!0;for(;n;){if(void 0!==a&&n===a)return!1;if("none"===getComputedStyle(n).display)return!0;n=n.parentElement}return!1}function isSelectableInput(n){return n instanceof HTMLInputElement&&"select"in n}function focus(n,{select:a=!1}={}){if(n&&n.focus){const o=document.activeElement;n.focus({preventScroll:!0});n!==o&&isSelectableInput(n)&&a&&n.select()}}var UR=createFocusScopesStack();function createFocusScopesStack(){let n=[];return{add(a){const o=n[0];a!==o&&o?.pause();n=arrayRemove(n,a);n.unshift(a)},remove(a){n=arrayRemove(n,a);n[0]?.resume()}}}function arrayRemove(n,a){const o=[...n];const i=o.indexOf(a);-1!==i&&o.splice(i,1);return o}function removeLinks(n){return n.filter(n=>"A"!==n.tagName)}var WR=globalThis?.document?ot.useLayoutEffect:()=>{};var HR=ct[" useId ".trim().toString()]||(()=>{});var qR=0;function useId(n){const[a,o]=ot.useState(HR());WR(()=>{o(n=>n??String(qR++))},[n]);return n||(a?`radix-${a}`:"")}var GR="Arrow";var VR=ot.forwardRef((n,a)=>{const{children:o,width:i=10,height:u=5,...d}=n;return at.jsx(SR.svg,{...d,ref:a,width:i,height:u,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?o:at.jsx("polygon",{points:"0,0 30,0 15,10"})})});VR.displayName=GR;var KR=VR;function useSize(n){const[a,o]=ot.useState(void 0);WR(()=>{if(n){o({width:n.offsetWidth,height:n.offsetHeight});const a=new ResizeObserver(a=>{if(!Array.isArray(a))return;if(!a.length)return;const i=a[0];let u;let d;if("borderBoxSize"in i){const n=i.borderBoxSize;const a=Array.isArray(n)?n[0]:n;u=a.inlineSize;d=a.blockSize}else{u=n.offsetWidth;d=n.offsetHeight}o({width:u,height:d})});a.observe(n,{box:"border-box"});return()=>a.unobserve(n)}o(void 0)},[n]);return a}var ZR="Popper";var[YR,JR]=createContextScope(ZR);var[QR,XR]=YR(ZR);var Popper=n=>{const{__scopePopper:a,children:o}=n;const[i,u]=ot.useState(null);return at.jsx(QR,{scope:a,anchor:i,onAnchorChange:u,children:o})};Popper.displayName=ZR;var eB="PopperAnchor";var tB=ot.forwardRef((n,a)=>{const{__scopePopper:o,virtualRef:i,...u}=n;const d=XR(eB,o);const m=ot.useRef(null);const g=useComposedRefs(a,m);ot.useEffect(()=>{d.onAnchorChange(i?.current||m.current)});return i?null:at.jsx(SR.div,{...u,ref:g})});tB.displayName=eB;var nB="PopperContent";var[rB,sB]=YR(nB);var aB=ot.forwardRef((n,a)=>{const{__scopePopper:o,side:i="bottom",sideOffset:u=0,align:d="center",alignOffset:m=0,arrowPadding:g=0,avoidCollisions:y=!0,collisionBoundary:v=[],collisionPadding:x=0,sticky:N="partial",hideWhenDetached:k=!1,updatePositionStrategy:E="optimized",onPlaced:S,...A}=n;const _=XR(nB,o);const[j,I]=ot.useState(null);const O=useComposedRefs(a,n=>I(n));const[R,B]=ot.useState(null);const M=useSize(R);const z=M?.width??0;const L=M?.height??0;const D=i+("center"!==d?"-"+d:"");const W="number"==typeof x?x:{top:0,right:0,bottom:0,left:0,...x};const H=Array.isArray(v)?v:[v];const q=H.length>0;const G={padding:W,boundary:H.filter(isNotNull),altBoundary:q};const{refs:V,floatingStyles:Z,placement:Y,isPositioned:J,middlewareData:X}=useFloating({strategy:"fixed",placement:D,whileElementsMounted:(...n)=>{const a=autoUpdate(...n,{animationFrame:"always"===E});return a},elements:{reference:_.anchor},middleware:[offset({mainAxis:u+L,alignmentAxis:m}),y&&shift({mainAxis:!0,crossAxis:!1,limiter:"partial"===N?limitShift():void 0,...G}),y&&flip({...G}),size({...G,apply:({elements:n,rects:a,availableWidth:o,availableHeight:i})=>{const{width:u,height:d}=a.reference;const m=n.floating.style;m.setProperty("--radix-popper-available-width",`${o}px`);m.setProperty("--radix-popper-available-height",`${i}px`);m.setProperty("--radix-popper-anchor-width",`${u}px`);m.setProperty("--radix-popper-anchor-height",`${d}px`)}}),R&&arrow({element:R,padding:g}),transformOrigin({arrowWidth:z,arrowHeight:L}),k&&hide({strategy:"referenceHidden",...G})]});const[ee,te]=getSideAndAlignFromPlacement(Y);const ne=useCallbackRef$1(S);WR(()=>{J&&ne?.()},[J,ne]);const re=X.arrow?.x;const se=X.arrow?.y;const ae=0!==X.arrow?.centerOffset;const[oe,ie]=ot.useState();WR(()=>{j&&ie(window.getComputedStyle(j).zIndex)},[j]);return at.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...Z,transform:J?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:oe,"--radix-popper-transform-origin":[X.transformOrigin?.x,X.transformOrigin?.y].join(" "),...X.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:at.jsx(rB,{scope:o,placedSide:ee,onArrowChange:B,arrowX:re,arrowY:se,shouldHideArrow:ae,children:at.jsx(SR.div,{"data-side":ee,"data-align":te,...A,ref:O,style:{...A.style,animation:J?void 0:"none"}})})})});aB.displayName=nB;var oB="PopperArrow";var iB={top:"bottom",right:"left",bottom:"top",left:"right"};var cB=ot.forwardRef(function(n,a){const{__scopePopper:o,...i}=n;const u=sB(oB,o);const d=iB[u.placedSide];return at.jsx("span",{ref:u.onArrowChange,style:{position:"absolute",left:u.arrowX,top:u.arrowY,[d]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[u.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[u.placedSide],visibility:u.shouldHideArrow?"hidden":void 0},children:at.jsx(KR,{...i,ref:a,style:{...i.style,display:"block"}})})});cB.displayName=oB;function isNotNull(n){return null!==n}var transformOrigin=n=>({name:"transformOrigin",options:n,fn(a){const{placement:o,rects:i,middlewareData:u}=a;const d=0!==u.arrow?.centerOffset;const m=d;const g=m?0:n.arrowWidth;const y=m?0:n.arrowHeight;const[v,x]=getSideAndAlignFromPlacement(o);const N={start:"0%",center:"50%",end:"100%"}[x];const k=(u.arrow?.x??0)+g/2;const E=(u.arrow?.y??0)+y/2;let S="";let A="";if("bottom"===v){S=m?N:`${k}px`;A=-y+"px"}else if("top"===v){S=m?N:`${k}px`;A=`${i.floating.height+y}px`}else if("right"===v){S=-y+"px";A=m?N:`${E}px`}else if("left"===v){S=`${i.floating.width+y}px`;A=m?N:`${E}px`}return{data:{x:S,y:A}}}});function getSideAndAlignFromPlacement(n){const[a,o="center"]=n.split("-");return[a,o]}var lB=Popper;var uB=tB;var dB=aB;var hB=cB;var fB="Portal";var pB=ot.forwardRef((n,a)=>{const{container:o,...i}=n;const[u,d]=ot.useState(!1);WR(()=>d(!0),[]);const m=o||u&&globalThis?.document?.body;return m?Nb.createPortal(at.jsx(SR.div,{...i,ref:a}),m):null});pB.displayName=fB;function useStateMachine(n,a){return ot.useReducer((n,o)=>{const i=a[n][o];return i??n},n)}var Presence=n=>{const{present:a,children:o}=n;const i=usePresence(a);const u="function"==typeof o?o({present:i.isPresent}):ot.Children.only(o);const d=useComposedRefs(i.ref,getElementRef(u));const m="function"==typeof o;return m||i.isPresent?ot.cloneElement(u,{ref:d}):null};Presence.displayName="Presence";function usePresence(n){const[a,o]=ot.useState();const i=ot.useRef(null);const u=ot.useRef(n);const d=ot.useRef("none");const m=n?"mounted":"unmounted";const[g,y]=useStateMachine(m,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});ot.useEffect(()=>{const n=getAnimationName(i.current);d.current="mounted"===g?n:"none"},[g]);WR(()=>{const a=i.current;const o=u.current;const m=o!==n;if(m){const i=d.current;const m=getAnimationName(a);if(n)y("MOUNT");else if("none"===m||"none"===a?.display)y("UNMOUNT");else{const n=i!==m;y(o&&n?"ANIMATION_OUT":"UNMOUNT")}u.current=n}},[n,y]);WR(()=>{if(a){let n;const o=a.ownerDocument.defaultView??window;const handleAnimationEnd=d=>{const m=getAnimationName(i.current);const g=m.includes(d.animationName);if(d.target===a&&g){y("ANIMATION_END");if(!u.current){const i=a.style.animationFillMode;a.style.animationFillMode="forwards";n=o.setTimeout(()=>{"forwards"===a.style.animationFillMode&&(a.style.animationFillMode=i)})}}};const handleAnimationStart=n=>{n.target===a&&(d.current=getAnimationName(i.current))};a.addEventListener("animationstart",handleAnimationStart);a.addEventListener("animationcancel",handleAnimationEnd);a.addEventListener("animationend",handleAnimationEnd);return()=>{o.clearTimeout(n);a.removeEventListener("animationstart",handleAnimationStart);a.removeEventListener("animationcancel",handleAnimationEnd);a.removeEventListener("animationend",handleAnimationEnd)}}y("ANIMATION_END")},[a,y]);return{isPresent:["mounted","unmountSuspended"].includes(g),ref:ot.useCallback(n=>{i.current=n?getComputedStyle(n):null;o(n)},[])}}function getAnimationName(n){return n?.animationName||"none"}function getElementRef(n){let a=Object.getOwnPropertyDescriptor(n.props,"ref")?.get;let o=a&&"isReactWarning"in a&&a.isReactWarning;if(o)return n.ref;a=Object.getOwnPropertyDescriptor(n,"ref")?.get;o=a&&"isReactWarning"in a&&a.isReactWarning;return o?n.props.ref:n.props.ref||n.ref}var mB=ct[" useInsertionEffect ".trim().toString()]||WR;function useControllableState({prop:n,defaultProp:a,onChange:o=()=>{},caller:i}){const[u,d,m]=useUncontrolledState({defaultProp:a,onChange:o});const g=void 0!==n;const y=g?n:u;{const a=ot.useRef(void 0!==n);ot.useEffect(()=>{const n=a.current;if(n!==g){const a=n?"controlled":"uncontrolled";const o=g?"controlled":"uncontrolled";console.warn(`${i} is changing from ${a} to ${o}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}a.current=g},[g,i])}const v=ot.useCallback(a=>{if(g){const o=isFunction(a)?a(n):a;o!==n&&m.current?.(o)}else d(a)},[g,n,d,m]);return[y,v]}function useUncontrolledState({defaultProp:n,onChange:a}){const[o,i]=ot.useState(n);const u=ot.useRef(o);const d=ot.useRef(a);mB(()=>{d.current=a},[a]);ot.useEffect(()=>{if(u.current!==o){d.current?.(o);u.current=o}},[o,u]);return[o,i,d]}function isFunction(n){return"function"==typeof n}var getDefaultParent=function(n){if("undefined"==typeof document)return null;var a=Array.isArray(n)?n[0]:n;return a.ownerDocument.body};var gB=new WeakMap;var yB=new WeakMap;var bB={};var vB=0;var unwrapHost=function(n){return n&&(n.host||unwrapHost(n.parentNode))};var correctTargets=function(n,a){return a.map(function(a){if(n.contains(a))return a;var o=unwrapHost(a);if(o&&n.contains(o))return o;console.error("aria-hidden",a,"in not contained inside",n,". Doing nothing");return null}).filter(function(n){return Boolean(n)})};var applyAttributeToOthers=function(n,a,o,i){var u=correctTargets(a,Array.isArray(n)?n:[n]);bB[o]||(bB[o]=new WeakMap);var d=bB[o];var m=[];var g=new Set;var y=new Set(u);var keep=function(n){if(n&&!g.has(n)){g.add(n);keep(n.parentNode)}};u.forEach(keep);var deep=function(n){n&&!y.has(n)&&Array.prototype.forEach.call(n.children,function(n){if(g.has(n))deep(n);else try{var a=n.getAttribute(i);var u=null!==a&&"false"!==a;var y=(gB.get(n)||0)+1;var v=(d.get(n)||0)+1;gB.set(n,y);d.set(n,v);m.push(n);1===y&&u&&yB.set(n,!0);1===v&&n.setAttribute(o,"true");u||n.setAttribute(i,"true")}catch(nL){console.error("aria-hidden: cannot operate on ",n,nL)}})};deep(a);g.clear();vB++;return function(){m.forEach(function(n){var a=gB.get(n)-1;var u=d.get(n)-1;gB.set(n,a);d.set(n,u);if(!a){yB.has(n)||n.removeAttribute(i);yB.delete(n)}u||n.removeAttribute(o)});vB--;if(!vB){gB=new WeakMap;gB=new WeakMap;yB=new WeakMap;bB={}}}};var hideOthers=function(n,a,o){void 0===o&&(o="data-aria-hidden");var i=Array.from(Array.isArray(n)?n:[n]);var u=getDefaultParent(n);if(!u)return function(){return null};i.push.apply(i,Array.from(u.querySelectorAll("[aria-live], script")));return applyAttributeToOthers(i,u,o,"aria-hidden")};var extendStatics=function(n,a){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])};return extendStatics(n,a)};function __extends(n,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");extendStatics(n,a);function __(){this.constructor=n}n.prototype=null===a?Object.create(a):(__.prototype=a.prototype,new __)}var __assign=function(){__assign=Object.assign||function(n){for(var a,o=1,i=arguments.length;o<i;o++){a=arguments[o];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])}return n};return __assign.apply(this,arguments)};function __rest(n,a){var o={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&a.indexOf(i)<0&&(o[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var u=0;for(i=Object.getOwnPropertySymbols(n);u<i.length;u++)a.indexOf(i[u])<0&&Object.prototype.propertyIsEnumerable.call(n,i[u])&&(o[i[u]]=n[i[u]])}return o}function __decorate(n,a,o,i){var u,d=arguments.length,m=d<3?a:null===i?i=Object.getOwnPropertyDescriptor(a,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)m=Reflect.decorate(n,a,o,i);else for(var g=n.length-1;g>=0;g--)(u=n[g])&&(m=(d<3?u(m):d>3?u(a,o,m):u(a,o))||m);return d>3&&m&&Object.defineProperty(a,o,m),m}function __param(n,a){return function(o,i){a(o,i,n)}}function __esDecorate(n,a,o,i,u,d){function accept(n){if(void 0!==n&&"function"!=typeof n)throw new TypeError("Function expected");return n}var m=i.kind,g="getter"===m?"get":"setter"===m?"set":"value";var y=!a&&n?i.static?n:n.prototype:null;var v=a||(y?Object.getOwnPropertyDescriptor(y,i.name):{});var x,N=!1;for(var k=o.length-1;k>=0;k--){var E={};for(var S in i)E[S]="access"===S?{}:i[S];for(var S in i.access)E.access[S]=i.access[S];E.addInitializer=function(n){if(N)throw new TypeError("Cannot add initializers after decoration has completed");d.push(accept(n||null))};var A=(0,o[k])("accessor"===m?{get:v.get,set:v.set}:v[g],E);if("accessor"===m){if(void 0===A)continue;if(null===A||"object"!=typeof A)throw new TypeError("Object expected");(x=accept(A.get))&&(v.get=x);(x=accept(A.set))&&(v.set=x);(x=accept(A.init))&&u.unshift(x)}else(x=accept(A))&&("field"===m?u.unshift(x):v[g]=x)}y&&Object.defineProperty(y,i.name,v);N=!0}function __runInitializers(n,a,o){var i=arguments.length>2;for(var u=0;u<a.length;u++)o=i?a[u].call(n,o):a[u].call(n);return i?o:void 0}function __propKey(n){return"symbol"==typeof n?n:"".concat(n)}function __setFunctionName(n,a,o){"symbol"==typeof a&&(a=a.description?"[".concat(a.description,"]"):"");return Object.defineProperty(n,"name",{configurable:!0,value:o?"".concat(o," ",a):a})}function __metadata(n,a){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,a)}function __awaiter(n,a,o,i){function adopt(n){return n instanceof o?n:new o(function(a){a(n)})}return new(o||(o=Promise))(function(o,u){function fulfilled(n){try{step(i.next(n))}catch(nL){u(nL)}}function rejected(n){try{step(i.throw(n))}catch(nL){u(nL)}}function step(n){n.done?o(n.value):adopt(n.value).then(fulfilled,rejected)}step((i=i.apply(n,a||[])).next())})}function __generator(n,a){var o,i,u,d={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},m=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return m.next=verb(0),m.throw=verb(1),m.return=verb(2),"function"==typeof Symbol&&(m[Symbol.iterator]=function(){return this}),m;function verb(n){return function(a){return step([n,a])}}function step(g){if(o)throw new TypeError("Generator is already executing.");for(;m&&(m=0,g[0]&&(d=0)),d;)try{if(o=1,i&&(u=2&g[0]?i.return:g[0]?i.throw||((u=i.return)&&u.call(i),0):i.next)&&!(u=u.call(i,g[1])).done)return u;(i=0,u)&&(g=[2&g[0],u.value]);switch(g[0]){case 0:case 1:u=g;break;case 4:d.label++;return{value:g[1],done:!1};case 5:d.label++;i=g[1];g=[0];continue;case 7:g=d.ops.pop();d.trys.pop();continue;default:if(!(u=d.trys,u=u.length>0&&u[u.length-1])&&(6===g[0]||2===g[0])){d=0;continue}if(3===g[0]&&(!u||g[1]>u[0]&&g[1]<u[3])){d.label=g[1];break}if(6===g[0]&&d.label<u[1]){d.label=u[1];u=g;break}if(u&&d.label<u[2]){d.label=u[2];d.ops.push(g);break}u[2]&&d.ops.pop();d.trys.pop();continue}g=a.call(n,d)}catch(nL){g=[6,nL];i=0}finally{o=u=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}var wB=Object.create?function(n,a,o,i){void 0===i&&(i=o);var u=Object.getOwnPropertyDescriptor(a,o);u&&!("get"in u?!a.__esModule:u.writable||u.configurable)||(u={enumerable:!0,get:function(){return a[o]}});Object.defineProperty(n,i,u)}:function(n,a,o,i){void 0===i&&(i=o);n[i]=a[o]};function __exportStar(n,a){for(var o in n)"default"===o||Object.prototype.hasOwnProperty.call(a,o)||wB(a,n,o)}function __values(n){var a="function"==typeof Symbol&&Symbol.iterator,o=a&&n[a],i=0;if(o)return o.call(n);if(n&&"number"==typeof n.length)return{next:function(){n&&i>=n.length&&(n=void 0);return{value:n&&n[i++],done:!n}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(n,a){var o="function"==typeof Symbol&&n[Symbol.iterator];if(!o)return n;var i,u,d=o.call(n),m=[];try{for(;(void 0===a||a-- >0)&&!(i=d.next()).done;)m.push(i.value)}catch(g){u={error:g}}finally{try{i&&!i.done&&(o=d.return)&&o.call(d)}finally{if(u)throw u.error}}return m}function __spread(){for(var n=[],a=0;a<arguments.length;a++)n=n.concat(__read(arguments[a]));return n}function __spreadArrays(){for(var n=0,a=0,o=arguments.length;a<o;a++)n+=arguments[a].length;var i=Array(n),u=0;for(a=0;a<o;a++)for(var d=arguments[a],m=0,g=d.length;m<g;m++,u++)i[u]=d[m];return i}function __spreadArray(n,a,o){if(o||2===arguments.length)for(var i,u=0,d=a.length;u<d;u++)if(i||!(u in a)){i||(i=Array.prototype.slice.call(a,0,u));i[u]=a[u]}return n.concat(i||Array.prototype.slice.call(a))}function __await(n){return this instanceof __await?(this.v=n,this):new __await(n)}function __asyncGenerator(n,a,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,u=o.apply(n,a||[]),d=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),verb("next"),verb("throw"),verb("return",awaitReturn),i[Symbol.asyncIterator]=function(){return this},i;function awaitReturn(n){return function(a){return Promise.resolve(a).then(n,reject)}}function verb(n,a){if(u[n]){i[n]=function(a){return new Promise(function(o,i){d.push([n,a,o,i])>1||resume(n,a)})};a&&(i[n]=a(i[n]))}}function resume(n,a){try{step(u[n](a))}catch(nL){settle(d[0][3],nL)}}function step(n){n.value instanceof __await?Promise.resolve(n.value.v).then(fulfill,reject):settle(d[0][2],n)}function fulfill(n){resume("next",n)}function reject(n){resume("throw",n)}function settle(n,a){(n(a),d.shift(),d.length)&&resume(d[0][0],d[0][1])}}function __asyncDelegator(n){var a,o;return a={},verb("next"),verb("throw",function(n){throw n}),verb("return"),a[Symbol.iterator]=function(){return this},a;function verb(i,u){a[i]=n[i]?function(a){return(o=!o)?{value:__await(n[i](a)),done:!1}:u?u(a):a}:u}}function __asyncValues(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,o=n[Symbol.asyncIterator];return o?o.call(n):(n="function"==typeof __values?__values(n):n[Symbol.iterator](),a={},verb("next"),verb("throw"),verb("return"),a[Symbol.asyncIterator]=function(){return this},a);function verb(o){a[o]=n[o]&&function(a){return new Promise(function(i,u){a=n[o](a),settle(i,u,a.done,a.value)})}}function settle(n,a,o,i){Promise.resolve(i).then(function(a){n({value:a,done:o})},a)}}function __makeTemplateObject(n,a){Object.defineProperty?Object.defineProperty(n,"raw",{value:a}):n.raw=a;return n}var xB=Object.create?function(n,a){Object.defineProperty(n,"default",{enumerable:!0,value:a})}:function(n,a){n.default=a};var ownKeys=function(n){ownKeys=Object.getOwnPropertyNames||function(n){var a=[];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[a.length]=o);return a};return ownKeys(n)};function __importStar(n){if(n&&n.__esModule)return n;var a={};if(null!=n)for(var o=ownKeys(n),i=0;i<o.length;i++)"default"!==o[i]&&wB(a,n,o[i]);xB(a,n);return a}function __importDefault(n){return n&&n.__esModule?n:{default:n}}function __classPrivateFieldGet(n,a,o,i){if("a"===o&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof a?n!==a||!i:!a.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===o?i:"a"===o?i.call(n):i?i.value:a.get(n)}function __classPrivateFieldSet(n,a,o,i,u){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!u)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof a?n!==a||!u:!a.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?u.call(n,o):u?u.value=o:a.set(n,o),o}function __classPrivateFieldIn(n,a){if(null===a||"object"!=typeof a&&"function"!=typeof a)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof n?a===n:n.has(a)}function __addDisposableResource(n,a,o){if(null!=a){if("object"!=typeof a&&"function"!=typeof a)throw new TypeError("Object expected.");var i,u;if(o){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=a[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=a[Symbol.dispose];o&&(u=i)}if("function"!=typeof i)throw new TypeError("Object not disposable.");u&&(i=function(){try{u.call(this)}catch(nL){return Promise.reject(nL)}});n.stack.push({value:a,dispose:i,async:o})}else o&&n.stack.push({async:!0});return a}var NB="function"==typeof SuppressedError?SuppressedError:function(n,a,o){var i=new Error(o);return i.name="SuppressedError",i.error=n,i.suppressed=a,i};function __disposeResources(n){function fail(a){n.error=n.hasError?new NB(a,n.error,"An error was suppressed during disposal."):a;n.hasError=!0}var a,o=0;function next(){for(;a=n.stack.pop();)try{if(!a.async&&1===o)return o=0,n.stack.push(a),Promise.resolve().then(next);if(a.dispose){var i=a.dispose.call(a.value);if(a.async)return o|=2,Promise.resolve(i).then(next,function(n){fail(n);return next()})}else o|=1}catch(nL){fail(nL)}if(1===o)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return next()}function __rewriteRelativeImportExtension(n,a){return"string"==typeof n&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,o,i,u,d){return o?a?".jsx":".js":!i||u&&d?i+u+"."+d.toLowerCase()+"js":n}):n}const kB={__extends:__extends,__assign:__assign,__rest:__rest,__decorate:__decorate,__param:__param,__esDecorate:__esDecorate,__runInitializers:__runInitializers,__propKey:__propKey,__setFunctionName:__setFunctionName,__metadata:__metadata,__awaiter:__awaiter,__generator:__generator,__createBinding:wB,__exportStar:__exportStar,__values:__values,__read:__read,__spread:__spread,__spreadArrays:__spreadArrays,__spreadArray:__spreadArray,__await:__await,__asyncGenerator:__asyncGenerator,__asyncDelegator:__asyncDelegator,__asyncValues:__asyncValues,__makeTemplateObject:__makeTemplateObject,__importStar:__importStar,__importDefault:__importDefault,__classPrivateFieldGet:__classPrivateFieldGet,__classPrivateFieldSet:__classPrivateFieldSet,__classPrivateFieldIn:__classPrivateFieldIn,__addDisposableResource:__addDisposableResource,__disposeResources:__disposeResources,__rewriteRelativeImportExtension:__rewriteRelativeImportExtension};const CB=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:__addDisposableResource,get __assign(){return __assign},__asyncDelegator:__asyncDelegator,__asyncGenerator:__asyncGenerator,__asyncValues:__asyncValues,__await:__await,__awaiter:__awaiter,__classPrivateFieldGet:__classPrivateFieldGet,__classPrivateFieldIn:__classPrivateFieldIn,__classPrivateFieldSet:__classPrivateFieldSet,__createBinding:wB,__decorate:__decorate,__disposeResources:__disposeResources,__esDecorate:__esDecorate,__exportStar:__exportStar,__extends:__extends,__generator:__generator,__importDefault:__importDefault,__importStar:__importStar,__makeTemplateObject:__makeTemplateObject,__metadata:__metadata,__param:__param,__propKey:__propKey,__read:__read,__rest:__rest,__rewriteRelativeImportExtension:__rewriteRelativeImportExtension,__runInitializers:__runInitializers,__setFunctionName:__setFunctionName,__spread:__spread,__spreadArray:__spreadArray,__spreadArrays:__spreadArrays,__values:__values,default:kB},Symbol.toStringTag,{value:"Module"}));var EB="right-scroll-bar-position";var SB="width-before-scroll-bar";var AB="with-scroll-bars-hidden";var _B="--removed-body-scroll-bar-size";function assignRef(n,a){"function"==typeof n?n(a):n&&(n.current=a);return n}function useCallbackRef(n,a){var o=ot.useState(function(){return{value:n,callback:a,facade:{get current(){return o.value},set current(n){var a=o.value;if(a!==n){o.value=n;o.callback(n,a)}}}}})[0];o.callback=a;return o.facade}var TB="undefined"!=typeof window?ot.useLayoutEffect:ot.useEffect;var jB=new WeakMap;function useMergeRefs(n,a){var o=useCallbackRef(null,function(a){return n.forEach(function(n){return assignRef(n,a)})});TB(function(){var a=jB.get(o);if(a){var i=new Set(a);var u=new Set(n);var d=o.current;i.forEach(function(n){u.has(n)||assignRef(n,null)});u.forEach(function(n){i.has(n)||assignRef(n,d)})}jB.set(o,n)},[n]);return o}function ItoI(n){return n}function innerCreateMedium(n,a){void 0===a&&(a=ItoI);var o=[];var i=!1;var u={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return o.length?o[o.length-1]:n},useMedium:function(n){var u=a(n,i);o.push(u);return function(){o=o.filter(function(n){return n!==u})}},assignSyncMedium:function(n){i=!0;for(;o.length;){var a=o;o=[];a.forEach(n)}o={push:function(a){return n(a)},filter:function(){return o}}},assignMedium:function(n){i=!0;var a=[];if(o.length){var u=o;o=[];u.forEach(n);a=o}var executeQueue=function(){var o=a;a=[];o.forEach(n)};var cycle=function(){return Promise.resolve().then(executeQueue)};cycle();o={push:function(n){a.push(n);cycle()},filter:function(n){a=a.filter(n);return o}}}};return u}function createSidecarMedium(n){void 0===n&&(n={});var a=innerCreateMedium(null);a.options=__assign({async:!0,ssr:!1},n);return a}var SideCar$1=function(n){var a=n.sideCar,o=__rest(n,["sideCar"]);if(!a)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=a.read();if(!i)throw new Error("Sidecar medium not found");return ot.createElement(i,__assign({},o))};SideCar$1.isSideCarExport=!0;function exportSidecar(n,a){n.useMedium(a);return SideCar$1}var IB=createSidecarMedium();var nothing=function(){};var PB=ot.forwardRef(function(n,a){var o=ot.useRef(null);var i=ot.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),u=i[0],d=i[1];var m=n.forwardProps,g=n.children,y=n.className,v=n.removeScrollBar,x=n.enabled,N=n.shards,k=n.sideCar,E=n.noRelative,S=n.noIsolation,A=n.inert,_=n.allowPinchZoom,j=n.as,I=void 0===j?"div":j,O=n.gapMode,R=__rest(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]);var B=k;var M=useMergeRefs([o,a]);var z=__assign(__assign({},R),u);return ot.createElement(ot.Fragment,null,x&&ot.createElement(B,{sideCar:IB,removeScrollBar:v,shards:N,noRelative:E,noIsolation:S,inert:A,setCallbacks:d,allowPinchZoom:!!_,lockRef:o,gapMode:O}),m?ot.cloneElement(ot.Children.only(g),__assign(__assign({},z),{ref:M})):ot.createElement(I,__assign({},z,{className:y,ref:M}),g))});PB.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};PB.classNames={fullWidth:SB,zeroRight:EB};var getNonce=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var a=getNonce();a&&n.setAttribute("nonce",a);return n}function injectStyles(n,a){n.styleSheet?n.styleSheet.cssText=a:n.appendChild(document.createTextNode(a))}function insertStyleTag(n){var a=document.head||document.getElementsByTagName("head")[0];a.appendChild(n)}var stylesheetSingleton=function(){var n=0;var a=null;return{add:function(o){if(0==n&&(a=makeStyleTag())){injectStyles(a,o);insertStyleTag(a)}n++},remove:function(){n--;if(!n&&a){a.parentNode&&a.parentNode.removeChild(a);a=null}}}};var styleHookSingleton=function(){var n=stylesheetSingleton();return function(a,o){ot.useEffect(function(){n.add(a);return function(){n.remove()}},[a&&o])}};var styleSingleton=function(){var n=styleHookSingleton();var Sheet=function(a){var o=a.styles,i=a.dynamic;n(o,i);return null};return Sheet};var OB={left:0,top:0,right:0,gap:0};var parse=function(n){return parseInt(n||"",10)||0};var getOffset=function(n){var a=window.getComputedStyle(document.body);var o=a["padding"===n?"paddingLeft":"marginLeft"];var i=a["padding"===n?"paddingTop":"marginTop"];var u=a["padding"===n?"paddingRight":"marginRight"];return[parse(o),parse(i),parse(u)]};var getGapWidth=function(n){void 0===n&&(n="margin");if("undefined"==typeof window)return OB;var a=getOffset(n);var o=document.documentElement.clientWidth;var i=window.innerWidth;return{left:a[0],top:a[1],right:a[2],gap:Math.max(0,i-o+a[2]-a[0])}};var RB=styleSingleton();var BB="data-scroll-locked";var getStyles=function(n,a,o,i){var u=n.left,d=n.top,m=n.right,g=n.gap;void 0===o&&(o="margin");return"\n  .".concat(AB," {\n   overflow: hidden ").concat(i,";\n   padding-right: ").concat(g,"px ").concat(i,";\n  }\n  body[").concat(BB,"] {\n    overflow: hidden ").concat(i,";\n    overscroll-behavior: contain;\n    ").concat([a&&"position: relative ".concat(i,";"),"margin"===o&&"\n    padding-left: ".concat(u,"px;\n    padding-top: ").concat(d,"px;\n    padding-right: ").concat(m,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(g,"px ").concat(i,";\n    "),"padding"===o&&"padding-right: ".concat(g,"px ").concat(i,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(EB," {\n    right: ").concat(g,"px ").concat(i,";\n  }\n  \n  .").concat(SB," {\n    margin-right: ").concat(g,"px ").concat(i,";\n  }\n  \n  .").concat(EB," .").concat(EB," {\n    right: 0 ").concat(i,";\n  }\n  \n  .").concat(SB," .").concat(SB," {\n    margin-right: 0 ").concat(i,";\n  }\n  \n  body[").concat(BB,"] {\n    ").concat(_B,": ").concat(g,"px;\n  }\n")};var getCurrentUseCounter=function(){var n=parseInt(document.body.getAttribute(BB)||"0",10);return isFinite(n)?n:0};var useLockAttribute=function(){ot.useEffect(function(){document.body.setAttribute(BB,(getCurrentUseCounter()+1).toString());return function(){var n=getCurrentUseCounter()-1;n<=0?document.body.removeAttribute(BB):document.body.setAttribute(BB,n.toString())}},[])};var RemoveScrollBar=function(n){var a=n.noRelative,o=n.noImportant,i=n.gapMode,u=void 0===i?"margin":i;useLockAttribute();var d=ot.useMemo(function(){return getGapWidth(u)},[u]);return ot.createElement(RB,{styles:getStyles(d,!a,u,o?"":"!important")})};var MB=!1;if("undefined"!=typeof window)try{var zB=Object.defineProperty({},"passive",{get:function(){MB=!0;return!0}});window.addEventListener("test",zB,zB);window.removeEventListener("test",zB,zB)}catch(rL){MB=!1}var FB=!!MB&&{passive:!1};var alwaysContainsScroll=function(n){return"TEXTAREA"===n.tagName};var elementCanBeScrolled=function(n,a){if(!(n instanceof Element))return!1;var o=window.getComputedStyle(n);return"hidden"!==o[a]&&!(o.overflowY===o.overflowX&&!alwaysContainsScroll(n)&&"visible"===o[a])};var elementCouldBeVScrolled=function(n){return elementCanBeScrolled(n,"overflowY")};var elementCouldBeHScrolled=function(n){return elementCanBeScrolled(n,"overflowX")};var locationCouldBeScrolled=function(n,a){var o=a.ownerDocument;var i=a;do{"undefined"!=typeof ShadowRoot&&i instanceof ShadowRoot&&(i=i.host);var u=elementCouldBeScrolled(n,i);if(u){var d=getScrollVariables(n,i),m=d[1],g=d[2];if(m>g)return!0}i=i.parentNode}while(i&&i!==o.body);return!1};var getVScrollVariables=function(n){var a=n.scrollTop,o=n.scrollHeight,i=n.clientHeight;return[a,o,i]};var getHScrollVariables=function(n){var a=n.scrollLeft,o=n.scrollWidth,i=n.clientWidth;return[a,o,i]};var elementCouldBeScrolled=function(n,a){return"v"===n?elementCouldBeVScrolled(a):elementCouldBeHScrolled(a)};var getScrollVariables=function(n,a){return"v"===n?getVScrollVariables(a):getHScrollVariables(a)};var getDirectionFactor=function(n,a){return"h"===n&&"rtl"===a?-1:1};var handleScroll=function(n,a,o,i,u){var d=getDirectionFactor(n,window.getComputedStyle(a).direction);var m=d*i;var g=o.target;var y=a.contains(g);var v=!1;var x=m>0;var N=0;var k=0;do{if(!g)break;var E=getScrollVariables(n,g),S=E[0],A=E[1],_=E[2];var j=A-_-d*S;if((S||j)&&elementCouldBeScrolled(n,g)){N+=j;k+=S}var I=g.parentNode;g=I&&I.nodeType===Node.DOCUMENT_FRAGMENT_NODE?I.host:I}while(!y&&g!==document.body||y&&(a.contains(g)||a===g));(x&&Math.abs(N)<1||!x&&Math.abs(k)<1)&&(v=!0);return v};var getTouchXY=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]};var getDeltaXY=function(n){return[n.deltaX,n.deltaY]};var extractRef=function(n){return n&&"current"in n?n.current:n};var deltaCompare=function(n,a){return n[0]===a[0]&&n[1]===a[1]};var generateStyle=function(n){return"\n  .block-interactivity-".concat(n," {pointer-events: none;}\n  .allow-interactivity-").concat(n," {pointer-events: all;}\n")};var LB=0;var DB=[];function RemoveScrollSideCar(n){var a=ot.useRef([]);var o=ot.useRef([0,0]);var i=ot.useRef();var u=ot.useState(LB++)[0];var d=ot.useState(styleSingleton)[0];var m=ot.useRef(n);ot.useEffect(function(){m.current=n},[n]);ot.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(u));var a=__spreadArray([n.lockRef.current],(n.shards||[]).map(extractRef),!0).filter(Boolean);a.forEach(function(n){return n.classList.add("allow-interactivity-".concat(u))});return function(){document.body.classList.remove("block-interactivity-".concat(u));a.forEach(function(n){return n.classList.remove("allow-interactivity-".concat(u))})}}},[n.inert,n.lockRef.current,n.shards]);var g=ot.useCallback(function(n,a){if("touches"in n&&2===n.touches.length||"wheel"===n.type&&n.ctrlKey)return!m.current.allowPinchZoom;var u=getTouchXY(n);var d=o.current;var g="deltaX"in n?n.deltaX:d[0]-u[0];var y="deltaY"in n?n.deltaY:d[1]-u[1];var v;var x=n.target;var N=Math.abs(g)>Math.abs(y)?"h":"v";if("touches"in n&&"h"===N&&"range"===x.type)return!1;var k=locationCouldBeScrolled(N,x);if(!k)return!0;if(k)v=N;else{v="v"===N?"h":"v";k=locationCouldBeScrolled(N,x)}if(!k)return!1;!i.current&&"changedTouches"in n&&(g||y)&&(i.current=v);if(!v)return!0;var E=i.current||v;return handleScroll(E,a,n,"h"===E?g:y)},[]);var y=ot.useCallback(function(n){var o=n;if(DB.length&&DB[DB.length-1]===d){var i="deltaY"in o?getDeltaXY(o):getTouchXY(o);var u=a.current.filter(function(n){return n.name===o.type&&(n.target===o.target||o.target===n.shadowParent)&&deltaCompare(n.delta,i)})[0];if(u&&u.should)o.cancelable&&o.preventDefault();else if(!u){var y=(m.current.shards||[]).map(extractRef).filter(Boolean).filter(function(n){return n.contains(o.target)});var v=y.length>0?g(o,y[0]):!m.current.noIsolation;v&&o.cancelable&&o.preventDefault()}}},[]);var v=ot.useCallback(function(n,o,i,u){var d={name:n,delta:o,target:i,should:u,shadowParent:getOutermostShadowParent(i)};a.current.push(d);setTimeout(function(){a.current=a.current.filter(function(n){return n!==d})},1)},[]);var x=ot.useCallback(function(n){o.current=getTouchXY(n);i.current=void 0},[]);var N=ot.useCallback(function(a){v(a.type,getDeltaXY(a),a.target,g(a,n.lockRef.current))},[]);var k=ot.useCallback(function(a){v(a.type,getTouchXY(a),a.target,g(a,n.lockRef.current))},[]);ot.useEffect(function(){DB.push(d);n.setCallbacks({onScrollCapture:N,onWheelCapture:N,onTouchMoveCapture:k});document.addEventListener("wheel",y,FB);document.addEventListener("touchmove",y,FB);document.addEventListener("touchstart",x,FB);return function(){DB=DB.filter(function(n){return n!==d});document.removeEventListener("wheel",y,FB);document.removeEventListener("touchmove",y,FB);document.removeEventListener("touchstart",x,FB)}},[]);var E=n.removeScrollBar,S=n.inert;return ot.createElement(ot.Fragment,null,S?ot.createElement(d,{styles:generateStyle(u)}):null,E?ot.createElement(RemoveScrollBar,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function getOutermostShadowParent(n){var a=null;for(;null!==n;){if(n instanceof ShadowRoot){a=n.host;n=n.host}n=n.parentNode}return a}const $B=exportSidecar(IB,RemoveScrollSideCar);var UB=ot.forwardRef(function(n,a){return ot.createElement(PB,__assign({},n,{ref:a,sideCar:$B}))});UB.classNames=PB.classNames;var WB="Popover";var[HB,qB]=createContextScope(WB,[JR]);var GB=JR();var[VB,KB]=HB(WB);var Popover$1=n=>{const{__scopePopover:a,children:o,open:i,defaultOpen:u,onOpenChange:d,modal:m=!1}=n;const g=GB(a);const y=ot.useRef(null);const[v,x]=ot.useState(!1);const[N,k]=useControllableState({prop:i,defaultProp:u??!1,onChange:d,caller:WB});return at.jsx(lB,{...g,children:at.jsx(VB,{scope:a,contentId:useId(),triggerRef:y,open:N,onOpenChange:k,onOpenToggle:ot.useCallback(()=>k(n=>!n),[k]),hasCustomAnchor:v,onCustomAnchorAdd:ot.useCallback(()=>x(!0),[]),onCustomAnchorRemove:ot.useCallback(()=>x(!1),[]),modal:m,children:o})})};Popover$1.displayName=WB;var ZB="PopoverAnchor";var YB=ot.forwardRef((n,a)=>{const{__scopePopover:o,...i}=n;const u=KB(ZB,o);const d=GB(o);const{onCustomAnchorAdd:m,onCustomAnchorRemove:g}=u;ot.useEffect(()=>{m();return()=>g()},[m,g]);return at.jsx(uB,{...d,...i,ref:a})});YB.displayName=ZB;var JB="PopoverTrigger";var QB=ot.forwardRef((n,a)=>{const{__scopePopover:o,...i}=n;const u=KB(JB,o);const d=GB(o);const m=useComposedRefs(a,u.triggerRef);const g=at.jsx(SR.button,{type:"button","aria-haspopup":"dialog","aria-expanded":u.open,"aria-controls":u.contentId,"data-state":getState(u.open),...i,ref:m,onClick:composeEventHandlers(n.onClick,u.onOpenToggle)});return u.hasCustomAnchor?g:at.jsx(uB,{asChild:!0,...d,children:g})});QB.displayName=JB;var XB="PopoverPortal";var[eM,tM]=HB(XB,{forceMount:void 0});var PopoverPortal=n=>{const{__scopePopover:a,forceMount:o,children:i,container:u}=n;const d=KB(XB,a);return at.jsx(eM,{scope:a,forceMount:o,children:at.jsx(Presence,{present:o||d.open,children:at.jsx(pB,{asChild:!0,container:u,children:i})})})};PopoverPortal.displayName=XB;var nM="PopoverContent";var rM=ot.forwardRef((n,a)=>{const o=tM(nM,n.__scopePopover);const{forceMount:i=o.forceMount,...u}=n;const d=KB(nM,n.__scopePopover);return at.jsx(Presence,{present:i||d.open,children:d.modal?at.jsx(aM,{...u,ref:a}):at.jsx(oM,{...u,ref:a})})});rM.displayName=nM;var sM=createSlot("PopoverContent.RemoveScroll");var aM=ot.forwardRef((n,a)=>{const o=KB(nM,n.__scopePopover);const i=ot.useRef(null);const u=useComposedRefs(a,i);const d=ot.useRef(!1);ot.useEffect(()=>{const n=i.current;if(n)return hideOthers(n)},[]);return at.jsx(UB,{as:sM,allowPinchZoom:!0,children:at.jsx(iM,{...n,ref:u,trapFocus:o.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:composeEventHandlers(n.onCloseAutoFocus,n=>{n.preventDefault();d.current||o.triggerRef.current?.focus()}),onPointerDownOutside:composeEventHandlers(n.onPointerDownOutside,n=>{const a=n.detail.originalEvent;const o=0===a.button&&!0===a.ctrlKey;const i=2===a.button||o;d.current=i},{checkForDefaultPrevented:!1}),onFocusOutside:composeEventHandlers(n.onFocusOutside,n=>n.preventDefault(),{checkForDefaultPrevented:!1})})})});var oM=ot.forwardRef((n,a)=>{const o=KB(nM,n.__scopePopover);const i=ot.useRef(!1);const u=ot.useRef(!1);return at.jsx(iM,{...n,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{n.onCloseAutoFocus?.(a);if(!a.defaultPrevented){i.current||o.triggerRef.current?.focus();a.preventDefault()}i.current=!1;u.current=!1},onInteractOutside:a=>{n.onInteractOutside?.(a);if(!a.defaultPrevented){i.current=!0;"pointerdown"===a.detail.originalEvent.type&&(u.current=!0)}const d=a.target;const m=o.triggerRef.current?.contains(d);m&&a.preventDefault();"focusin"===a.detail.originalEvent.type&&u.current&&a.preventDefault()}})});var iM=ot.forwardRef((n,a)=>{const{__scopePopover:o,trapFocus:i,onOpenAutoFocus:u,onCloseAutoFocus:d,disableOutsidePointerEvents:m,onEscapeKeyDown:g,onPointerDownOutside:y,onFocusOutside:v,onInteractOutside:x,...N}=n;const k=KB(nM,o);const E=GB(o);useFocusGuards();return at.jsx($R,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:u,onUnmountAutoFocus:d,children:at.jsx(OR,{asChild:!0,disableOutsidePointerEvents:m,onInteractOutside:x,onEscapeKeyDown:g,onPointerDownOutside:y,onFocusOutside:v,onDismiss:()=>k.onOpenChange(!1),children:at.jsx(dB,{"data-state":getState(k.open),role:"dialog",id:k.contentId,...E,...N,ref:a,style:{...N.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})});var cM="PopoverClose";var lM=ot.forwardRef((n,a)=>{const{__scopePopover:o,...i}=n;const u=KB(cM,o);return at.jsx(SR.button,{type:"button",...i,ref:a,onClick:composeEventHandlers(n.onClick,()=>u.onOpenChange(!1))})});lM.displayName=cM;var uM="PopoverArrow";var dM=ot.forwardRef((n,a)=>{const{__scopePopover:o,...i}=n;const u=GB(o);return at.jsx(hB,{...u,...i,ref:a})});dM.displayName=uM;function getState(n){return n?"open":"closed"}var hM=Popover$1;var fM=QB;var pM=PopoverPortal;var mM=rM;function Popover({...n}){return at.jsx(hM,{"data-slot":"popover",...n})}function PopoverTrigger({...n}){return at.jsx(fM,{"data-slot":"popover-trigger",...n})}function PopoverContent({className:n,align:a="center",sideOffset:o=4,...i}){return at.jsx(pM,{children:at.jsx(mM,{"data-slot":"popover-content",align:a,sideOffset:o,className:cn2("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",n),...i})})}function tzName(n,a,o="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:n,timeZoneName:o}).format(a).split(/\s/g).slice(2).join(" ")}const gM={};const yM={};function tzOffset(n,a){try{const o=gM[n]||(gM[n]=new Intl.DateTimeFormat("en-US",{timeZone:n,timeZoneName:"longOffset"}).format);const i=o(a).split("GMT")[1];return i in yM?yM[i]:calcOffset(i,i.split(":"))}catch{if(n in yM)return yM[n];const a=n?.match(bM);return a?calcOffset(n,a.slice(1)):NaN}}const bM=/([+-]\d\d):?(\d\d)?/;function calcOffset(n,a){const o=+(a[0]||0);const i=+(a[1]||0);return yM[n]=o>0?60*o+i:60*o-i}class vM extends Date{constructor(...n){super();n.length>1&&"string"==typeof n[n.length-1]&&(this.timeZone=n.pop());this.internal=new Date;if(isNaN(tzOffset(this.timeZone,this)))this.setTime(NaN);else if(n.length)if("number"==typeof n[0]&&(1===n.length||2===n.length&&"number"!=typeof n[1]))this.setTime(n[0]);else if("string"==typeof n[0])this.setTime(+new Date(n[0]));else if(n[0]instanceof Date)this.setTime(+n[0]);else{this.setTime(+new Date(...n));adjustToSystemTZ(this);syncToInternal(this)}else this.setTime(Date.now())}static tz(n,...a){return a.length?new vM(...a,n):new vM(Date.now(),n)}withTimeZone(n){return new vM(+this,n)}getTimezoneOffset(){return-tzOffset(this.timeZone,this)}setTime(n){Date.prototype.setTime.apply(this,arguments);syncToInternal(this);return+this}[Symbol.for("constructDateFrom")](n){return new vM(+new Date(n),this.timeZone)}}const wM=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(n=>{if(!wM.test(n))return;const a=n.replace(wM,"$1UTC");if(vM.prototype[a])if(n.startsWith("get"))vM.prototype[n]=function(){return this.internal[a]()};else{vM.prototype[n]=function(){Date.prototype[a].apply(this.internal,arguments);syncFromInternal(this);return+this};vM.prototype[a]=function(){Date.prototype[a].apply(this,arguments);syncToInternal(this);return+this}}});function syncToInternal(n){n.internal.setTime(+n);n.internal.setUTCMinutes(n.internal.getUTCMinutes()-n.getTimezoneOffset())}function syncFromInternal(n){Date.prototype.setFullYear.call(n,n.internal.getUTCFullYear(),n.internal.getUTCMonth(),n.internal.getUTCDate());Date.prototype.setHours.call(n,n.internal.getUTCHours(),n.internal.getUTCMinutes(),n.internal.getUTCSeconds(),n.internal.getUTCMilliseconds());adjustToSystemTZ(n)}function adjustToSystemTZ(n){const a=tzOffset(n.timeZone,n);const o=new Date(+n);o.setUTCHours(o.getUTCHours()-1);const i=-new Date(+n).getTimezoneOffset();const u=-new Date(+o).getTimezoneOffset();const d=i-u;const m=Date.prototype.getHours.apply(n)!==n.internal.getUTCHours();d&&m&&n.internal.setUTCMinutes(n.internal.getUTCMinutes()+d);const g=i-a;g&&Date.prototype.setUTCMinutes.call(n,Date.prototype.getUTCMinutes.call(n)+g);const y=tzOffset(n.timeZone,n);const v=-new Date(+n).getTimezoneOffset();const x=v-y;const N=y!==a;const k=x-g;if(N&&k){Date.prototype.setUTCMinutes.call(n,Date.prototype.getUTCMinutes.call(n)+k);const a=tzOffset(n.timeZone,n);const o=y-a;if(o){n.internal.setUTCMinutes(n.internal.getUTCMinutes()+o);Date.prototype.setUTCMinutes.call(n,Date.prototype.getUTCMinutes.call(n)+o)}}}class xM extends vM{static tz(n,...a){return a.length?new xM(...a,n):new xM(Date.now(),n)}toISOString(){const[n,a,o]=this.tzComponents();const i=`${n}${a}:${o}`;return this.internal.toISOString().slice(0,-1)+i}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[n,a,o,i]=this.internal.toUTCString().split(" ");return`${n?.slice(0,-1)} ${o} ${a} ${i}`}toTimeString(){const n=this.internal.toUTCString().split(" ")[4];const[a,o,i]=this.tzComponents();return`${n} GMT${a}${o}${i} (${tzName(this.timeZone,this)})`}toLocaleString(n,a){return Date.prototype.toLocaleString.call(this,n,{...a,timeZone:a?.timeZone||this.timeZone})}toLocaleDateString(n,a){return Date.prototype.toLocaleDateString.call(this,n,{...a,timeZone:a?.timeZone||this.timeZone})}toLocaleTimeString(n,a){return Date.prototype.toLocaleTimeString.call(this,n,{...a,timeZone:a?.timeZone||this.timeZone})}tzComponents(){const n=this.getTimezoneOffset();const a=n>0?"-":"+";const o=String(Math.floor(Math.abs(n)/60)).padStart(2,"0");const i=String(Math.abs(n)%60).padStart(2,"0");return[a,o,i]}withTimeZone(n){return new xM(+this,n)}[Symbol.for("constructDateFrom")](n){return new xM(+new Date(n),this.timeZone)}}var NM;!function(n){n.Root="root";n.Chevron="chevron";n.Day="day";n.DayButton="day_button";n.CaptionLabel="caption_label";n.Dropdowns="dropdowns";n.Dropdown="dropdown";n.DropdownRoot="dropdown_root";n.Footer="footer";n.MonthGrid="month_grid";n.MonthCaption="month_caption";n.MonthsDropdown="months_dropdown";n.Month="month";n.Months="months";n.Nav="nav";n.NextMonthButton="button_next";n.PreviousMonthButton="button_previous";n.Week="week";n.Weeks="weeks";n.Weekday="weekday";n.Weekdays="weekdays";n.WeekNumber="week_number";n.WeekNumberHeader="week_number_header";n.YearsDropdown="years_dropdown"}(NM||(NM={}));var kM;!function(n){n.disabled="disabled";n.hidden="hidden";n.outside="outside";n.focused="focused";n.today="today"}(kM||(kM={}));var CM;!function(n){n.range_end="range_end";n.range_middle="range_middle";n.range_start="range_start";n.selected="selected"}(CM||(CM={}));var EM;!function(n){n.weeks_before_enter="weeks_before_enter";n.weeks_before_exit="weeks_before_exit";n.weeks_after_enter="weeks_after_enter";n.weeks_after_exit="weeks_after_exit";n.caption_after_enter="caption_after_enter";n.caption_after_exit="caption_after_exit";n.caption_before_enter="caption_before_enter";n.caption_before_exit="caption_before_exit"}(EM||(EM={}));const SM=5;const AM=4;function getBroadcastWeeksInMonth(n,a){const o=a.startOfMonth(n);const i=o.getDay()>0?o.getDay():7;const u=a.addDays(n,1-i);const d=a.addDays(u,7*SM-1);const m=a.getMonth(n)===a.getMonth(d)?SM:AM;return m}function startOfBroadcastWeek(n,a){const o=a.startOfMonth(n);const i=o.getDay();return 1===i?o:0===i?a.addDays(o,-6):a.addDays(o,-1*(i-1))}function endOfBroadcastWeek(n,a){const o=startOfBroadcastWeek(n,a);const i=getBroadcastWeeksInMonth(n,a);const u=a.addDays(o,7*i-1);return u}class _M{constructor(n,a){this.Date=Date;this.today=()=>this.overrides?.today?this.overrides.today():this.options.timeZone?xM.tz(this.options.timeZone):new this.Date;this.newDate=(n,a,o)=>this.overrides?.newDate?this.overrides.newDate(n,a,o):this.options.timeZone?new xM(n,a,o,this.options.timeZone):new Date(n,a,o);this.addDays=(n,a)=>this.overrides?.addDays?this.overrides.addDays(n,a):addDays(n,a);this.addMonths=(n,a)=>this.overrides?.addMonths?this.overrides.addMonths(n,a):addMonths(n,a);this.addWeeks=(n,a)=>this.overrides?.addWeeks?this.overrides.addWeeks(n,a):addWeeks(n,a);this.addYears=(n,a)=>this.overrides?.addYears?this.overrides.addYears(n,a):addYears(n,a);this.differenceInCalendarDays=(n,a)=>this.overrides?.differenceInCalendarDays?this.overrides.differenceInCalendarDays(n,a):differenceInCalendarDays(n,a);this.differenceInCalendarMonths=(n,a)=>this.overrides?.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(n,a):differenceInCalendarMonths(n,a);this.eachMonthOfInterval=n=>this.overrides?.eachMonthOfInterval?this.overrides.eachMonthOfInterval(n):eachMonthOfInterval(n);this.endOfBroadcastWeek=n=>this.overrides?.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(n):endOfBroadcastWeek(n,this);this.endOfISOWeek=n=>this.overrides?.endOfISOWeek?this.overrides.endOfISOWeek(n):endOfISOWeek(n);this.endOfMonth=n=>this.overrides?.endOfMonth?this.overrides.endOfMonth(n):endOfMonth(n);this.endOfWeek=(n,a)=>this.overrides?.endOfWeek?this.overrides.endOfWeek(n,a):endOfWeek(n,this.options);this.endOfYear=n=>this.overrides?.endOfYear?this.overrides.endOfYear(n):endOfYear(n);this.format=(n,a,o)=>{const i=this.overrides?.format?this.overrides.format(n,a,this.options):format(n,a,this.options);return this.options.numerals&&"latn"!==this.options.numerals?this.replaceDigits(i):i};this.getISOWeek=n=>this.overrides?.getISOWeek?this.overrides.getISOWeek(n):getISOWeek(n);this.getMonth=(n,a)=>this.overrides?.getMonth?this.overrides.getMonth(n,this.options):getMonth(n,this.options);this.getYear=(n,a)=>this.overrides?.getYear?this.overrides.getYear(n,this.options):getYear(n,this.options);this.getWeek=(n,a)=>this.overrides?.getWeek?this.overrides.getWeek(n,this.options):getWeek(n,this.options);this.isAfter=(n,a)=>this.overrides?.isAfter?this.overrides.isAfter(n,a):isAfter(n,a);this.isBefore=(n,a)=>this.overrides?.isBefore?this.overrides.isBefore(n,a):isBefore(n,a);this.isDate=n=>this.overrides?.isDate?this.overrides.isDate(n):isDate(n);this.isSameDay=(n,a)=>this.overrides?.isSameDay?this.overrides.isSameDay(n,a):isSameDay(n,a);this.isSameMonth=(n,a)=>this.overrides?.isSameMonth?this.overrides.isSameMonth(n,a):isSameMonth(n,a);this.isSameYear=(n,a)=>this.overrides?.isSameYear?this.overrides.isSameYear(n,a):isSameYear(n,a);this.max=n=>this.overrides?.max?this.overrides.max(n):max(n);this.min=n=>this.overrides?.min?this.overrides.min(n):min(n);this.setMonth=(n,a)=>this.overrides?.setMonth?this.overrides.setMonth(n,a):setMonth(n,a);this.setYear=(n,a)=>this.overrides?.setYear?this.overrides.setYear(n,a):setYear(n,a);this.startOfBroadcastWeek=(n,a)=>this.overrides?.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(n,this):startOfBroadcastWeek(n,this);this.startOfDay=n=>this.overrides?.startOfDay?this.overrides.startOfDay(n):startOfDay(n);this.startOfISOWeek=n=>this.overrides?.startOfISOWeek?this.overrides.startOfISOWeek(n):startOfISOWeek(n);this.startOfMonth=n=>this.overrides?.startOfMonth?this.overrides.startOfMonth(n):startOfMonth(n);this.startOfWeek=(n,a)=>this.overrides?.startOfWeek?this.overrides.startOfWeek(n,this.options):startOfWeek(n,this.options);this.startOfYear=n=>this.overrides?.startOfYear?this.overrides.startOfYear(n):startOfYear(n);this.options={locale:ZO,...n};this.overrides=a}getDigitMap(){const{numerals:n="latn"}=this.options;const a=new Intl.NumberFormat("en-US",{numberingSystem:n});const o={};for(let i=0;i<10;i++)o[i.toString()]=a.format(i);return o}replaceDigits(n){const a=this.getDigitMap();return n.replace(/\d/g,n=>a[n]||n)}formatNumber(n){return this.replaceDigits(n.toString())}}const TM=new _M;class jM{constructor(n,a,o=TM){this.date=n;this.displayMonth=a;this.outside=Boolean(a&&!o.isSameMonth(n,a));this.dateLib=o}isEqualTo(n){return this.dateLib.isSameDay(n.date,this.date)&&this.dateLib.isSameMonth(n.displayMonth,this.displayMonth)}}class IM{constructor(n,a){this.date=n;this.weeks=a}}class PM{constructor(n,a){this.days=a;this.weekNumber=n}}function rangeIncludesDate(n,a,o=!1,i=TM){let{from:u,to:d}=n;const{differenceInCalendarDays:m,isSameDay:g}=i;if(u&&d){const n=m(d,u)<0;n&&([u,d]=[d,u]);const i=m(a,u)>=(o?1:0)&&m(d,a)>=(o?1:0);return i}return!o&&d?g(d,a):!(o||!u)&&g(u,a)}function isDateInterval(n){return Boolean(n&&"object"==typeof n&&"before"in n&&"after"in n)}function isDateRange(n){return Boolean(n&&"object"==typeof n&&"from"in n)}function isDateAfterType(n){return Boolean(n&&"object"==typeof n&&"after"in n)}function isDateBeforeType(n){return Boolean(n&&"object"==typeof n&&"before"in n)}function isDayOfWeekType(n){return Boolean(n&&"object"==typeof n&&"dayOfWeek"in n)}function isDatesArray(n,a){return Array.isArray(n)&&n.every(a.isDate)}function dateMatchModifiers(n,a,o=TM){const i=Array.isArray(a)?a:[a];const{isSameDay:u,differenceInCalendarDays:d,isAfter:m}=o;return i.some(a=>{if("boolean"==typeof a)return a;if(o.isDate(a))return u(n,a);if(isDatesArray(a,o))return a.includes(n);if(isDateRange(a))return rangeIncludesDate(a,n,!1,o);if(isDayOfWeekType(a))return Array.isArray(a.dayOfWeek)?a.dayOfWeek.includes(n.getDay()):a.dayOfWeek===n.getDay();if(isDateInterval(a)){const o=d(a.before,n);const i=d(a.after,n);const u=o>0;const g=i<0;const y=m(a.before,a.after);return y?g&&u:u||g}return isDateAfterType(a)?d(n,a.after)>0:isDateBeforeType(a)?d(a.before,n)>0:"function"==typeof a&&a(n)})}function createGetModifiers(n,a,o,i,u){const{disabled:d,hidden:m,modifiers:g,showOutsideDays:y,broadcastCalendar:v,today:x}=a;const{isSameDay:N,isSameMonth:k,startOfMonth:E,isBefore:S,endOfMonth:A,isAfter:_}=u;const j=o&&E(o);const I=i&&A(i);const O={[kM.focused]:[],[kM.outside]:[],[kM.disabled]:[],[kM.hidden]:[],[kM.today]:[]};const R={};for(const B of n){const{date:n,displayMonth:a}=B;const o=Boolean(a&&!k(n,a));const i=Boolean(j&&S(n,j));const E=Boolean(I&&_(n,I));const A=Boolean(d&&dateMatchModifiers(n,d,u));const M=Boolean(m&&dateMatchModifiers(n,m,u))||i||E||!v&&!y&&o||v&&!1===y&&o;const z=N(n,x??u.today());o&&O.outside.push(B);A&&O.disabled.push(B);M&&O.hidden.push(B);z&&O.today.push(B);g&&Object.keys(g).forEach(a=>{const o=g?.[a];const i=!!o&&dateMatchModifiers(n,o,u);i&&(R[a]?R[a].push(B):R[a]=[B])})}return n=>{const a={[kM.focused]:!1,[kM.disabled]:!1,[kM.hidden]:!1,[kM.outside]:!1,[kM.today]:!1};const o={};for(const i in O){const o=O[i];a[i]=o.some(a=>a===n)}for(const i in R)o[i]=R[i].some(a=>a===n);return{...a,...o}}}function getClassNamesForModifiers(n,a,o={}){const i=Object.entries(n).filter(([,n])=>!0===n).reduce((n,[i])=>{o[i]?n.push(o[i]):a[kM[i]]?n.push(a[kM[i]]):a[CM[i]]&&n.push(a[CM[i]]);return n},[a[NM.Day]]);return i}function Button$1(n){return it.createElement("button",{...n})}function CaptionLabel(n){return it.createElement("span",{...n})}function Chevron(n){const{size:a=24,orientation:o="left",className:i}=n;return it.createElement("svg",{className:i,width:a,height:a,viewBox:"0 0 24 24"},"up"===o&&it.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),"down"===o&&it.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),"left"===o&&it.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),"right"===o&&it.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function Day(n){const{day:a,modifiers:o,...i}=n;return it.createElement("td",{...i})}function DayButton(n){const{day:a,modifiers:o,...i}=n;const u=it.useRef(null);it.useEffect(()=>{o.focused&&u.current?.focus()},[o.focused]);return it.createElement("button",{ref:u,...i})}function Dropdown(n){const{options:a,className:o,components:i,classNames:u,...d}=n;const m=[u[NM.Dropdown],o].join(" ");const g=a?.find(({value:n})=>n===d.value);return it.createElement("span",{"data-disabled":d.disabled,className:u[NM.DropdownRoot]},it.createElement(i.Select,{className:m,...d},a?.map(({value:n,label:a,disabled:o})=>it.createElement(i.Option,{key:n,value:n,disabled:o},a))),it.createElement("span",{className:u[NM.CaptionLabel],"aria-hidden":!0},g?.label,it.createElement(i.Chevron,{orientation:"down",size:18,className:u[NM.Chevron]})))}function DropdownNav(n){return it.createElement("div",{...n})}function Footer(n){return it.createElement("div",{...n})}function Month(n){const{calendarMonth:a,displayIndex:o,...i}=n;return it.createElement("div",{...i},n.children)}function MonthCaption(n){const{calendarMonth:a,displayIndex:o,...i}=n;return it.createElement("div",{...i})}function MonthGrid(n){return it.createElement("table",{...n})}function Months(n){return it.createElement("div",{...n})}const OM=ot.createContext(void 0);function useDayPicker(){const n=ot.useContext(OM);if(void 0===n)throw new Error("useDayPicker() must be used within a custom component.");return n}function MonthsDropdown(n){const{components:a}=useDayPicker();return it.createElement(a.Dropdown,{...n})}function Nav(n){const{onPreviousClick:a,onNextClick:o,previousMonth:i,nextMonth:u,...d}=n;const{components:m,classNames:g,labels:{labelPrevious:y,labelNext:v}}=useDayPicker();const x=ot.useCallback(n=>{u&&o?.(n)},[u,o]);const N=ot.useCallback(n=>{i&&a?.(n)},[i,a]);return it.createElement("nav",{...d},it.createElement(m.PreviousMonthButton,{type:"button",className:g[NM.PreviousMonthButton],tabIndex:i?void 0:-1,"aria-disabled":!i||void 0,"aria-label":y(i),onClick:N},it.createElement(m.Chevron,{disabled:!i||void 0,className:g[NM.Chevron],orientation:"left"})),it.createElement(m.NextMonthButton,{type:"button",className:g[NM.NextMonthButton],tabIndex:u?void 0:-1,"aria-disabled":!u||void 0,"aria-label":v(u),onClick:x},it.createElement(m.Chevron,{disabled:!u||void 0,orientation:"right",className:g[NM.Chevron]})))}function NextMonthButton(n){const{components:a}=useDayPicker();return it.createElement(a.Button,{...n})}function Option(n){return it.createElement("option",{...n})}function PreviousMonthButton(n){const{components:a}=useDayPicker();return it.createElement(a.Button,{...n})}function Root(n){const{rootRef:a,...o}=n;return it.createElement("div",{...o,ref:a})}function Select(n){return it.createElement("select",{...n})}function Week(n){const{week:a,...o}=n;return it.createElement("tr",{...o})}function Weekday(n){return it.createElement("th",{...n})}function Weekdays(n){return it.createElement("thead",{"aria-hidden":!0},it.createElement("tr",{...n}))}function WeekNumber(n){const{week:a,...o}=n;return it.createElement("th",{...o})}function WeekNumberHeader(n){return it.createElement("th",{...n})}function Weeks(n){return it.createElement("tbody",{...n})}function YearsDropdown(n){const{components:a}=useDayPicker();return it.createElement(a.Dropdown,{...n})}const RM=Object.freeze(Object.defineProperty({__proto__:null,Button:Button$1,CaptionLabel:CaptionLabel,Chevron:Chevron,Day:Day,DayButton:DayButton,Dropdown:Dropdown,DropdownNav:DropdownNav,Footer:Footer,Month:Month,MonthCaption:MonthCaption,MonthGrid:MonthGrid,Months:Months,MonthsDropdown:MonthsDropdown,Nav:Nav,NextMonthButton:NextMonthButton,Option:Option,PreviousMonthButton:PreviousMonthButton,Root:Root,Select:Select,Week:Week,WeekNumber:WeekNumber,WeekNumberHeader:WeekNumberHeader,Weekday:Weekday,Weekdays:Weekdays,Weeks:Weeks,YearsDropdown:YearsDropdown},Symbol.toStringTag,{value:"Module"}));function getComponents(n){return{...RM,...n}}function getDataAttributes(n){const a={"data-mode":n.mode??void 0,"data-required":"required"in n?n.required:void 0,"data-multiple-months":n.numberOfMonths&&n.numberOfMonths>1||void 0,"data-week-numbers":n.showWeekNumber||void 0,"data-broadcast-calendar":n.broadcastCalendar||void 0,"data-nav-layout":n.navLayout||void 0};Object.entries(n).forEach(([n,o])=>{n.startsWith("data-")&&(a[n]=o)});return a}function getDefaultClassNames(){const n={};for(const a in NM)n[NM[a]]=`rdp-${NM[a]}`;for(const a in kM)n[kM[a]]=`rdp-${kM[a]}`;for(const a in CM)n[CM[a]]=`rdp-${CM[a]}`;for(const a in EM)n[EM[a]]=`rdp-${EM[a]}`;return n}function formatCaption(n,a,o){return(o??new _M(a)).format(n,"LLLL y")}const BM=formatCaption;function formatDay(n,a,o){return(o??new _M(a)).format(n,"d")}function formatMonthDropdown(n,a=TM){return a.format(n,"LLLL")}function formatWeekNumber(n,a=TM){return n<10?a.formatNumber(`0${n.toLocaleString()}`):a.formatNumber(`${n.toLocaleString()}`)}function formatWeekNumberHeader(){return""}function formatWeekdayName(n,a,o){return(o??new _M(a)).format(n,"cccccc")}function formatYearDropdown(n,a=TM){return a.format(n,"yyyy")}const MM=formatYearDropdown;const zM=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:formatCaption,formatDay:formatDay,formatMonthCaption:BM,formatMonthDropdown:formatMonthDropdown,formatWeekNumber:formatWeekNumber,formatWeekNumberHeader:formatWeekNumberHeader,formatWeekdayName:formatWeekdayName,formatYearCaption:MM,formatYearDropdown:formatYearDropdown},Symbol.toStringTag,{value:"Module"}));function getFormatters(n){n?.formatMonthCaption&&!n.formatCaption&&(n.formatCaption=n.formatMonthCaption);n?.formatYearCaption&&!n.formatYearDropdown&&(n.formatYearDropdown=n.formatYearCaption);return{...zM,...n}}function getMonthOptions(n,a,o,i,u){const{startOfMonth:d,startOfYear:m,endOfYear:g,eachMonthOfInterval:y,getMonth:v}=u;const x=y({start:m(n),end:g(n)});const N=x.map(n=>{const m=i.formatMonthDropdown(n,u);const g=v(n);const y=a&&n<d(a)||o&&n>d(o)||!1;return{value:g,label:m,disabled:y}});return N}function getStyleForModifiers(n,a={},o={}){let i={...a?.[NM.Day]};Object.entries(n).filter(([,n])=>!0===n).forEach(([n])=>{i={...i,...o?.[n]}});return i}function getWeekdays(n,a,o){const i=n.today();const u=a?n.startOfISOWeek(i):n.startOfWeek(i);const d=[];for(let m=0;m<7;m++){const a=n.addDays(u,m);d.push(a)}return d}function getYearOptions(n,a,o,i){if(!n)return;if(!a)return;const{startOfYear:u,endOfYear:d,addYears:m,getYear:g,isBefore:y,isSameYear:v}=i;const x=u(n);const N=d(a);const k=[];let E=x;for(;y(E,N)||v(E,N);){k.push(E);E=m(E,1)}return k.map(n=>{const a=o.formatYearDropdown(n,i);return{value:g(n),label:a,disabled:!1}})}function labelGrid(n,a,o){return(o??new _M(a)).format(n,"LLLL y")}const FM=labelGrid;function labelGridcell(n,a,o,i){let u=(i??new _M(o)).format(n,"PPPP");a?.today&&(u=`Today, ${u}`);return u}function labelDayButton(n,a,o,i){let u=(i??new _M(o)).format(n,"PPPP");a.today&&(u=`Today, ${u}`);a.selected&&(u=`${u}, selected`);return u}const LM=labelDayButton;function labelNav(){return""}function labelMonthDropdown(n){return"Choose the Month"}function labelNext(n){return"Go to the Next Month"}function labelPrevious(n){return"Go to the Previous Month"}function labelWeekday(n,a,o){return(o??new _M(a)).format(n,"cccc")}function labelWeekNumber(n,a){return`Week ${n}`}function labelWeekNumberHeader(n){return"Week Number"}function labelYearDropdown(n){return"Choose the Year"}const DM=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:FM,labelDay:LM,labelDayButton:labelDayButton,labelGrid:labelGrid,labelGridcell:labelGridcell,labelMonthDropdown:labelMonthDropdown,labelNav:labelNav,labelNext:labelNext,labelPrevious:labelPrevious,labelWeekNumber:labelWeekNumber,labelWeekNumberHeader:labelWeekNumberHeader,labelWeekday:labelWeekday,labelYearDropdown:labelYearDropdown},Symbol.toStringTag,{value:"Module"}));const asHtmlElement=n=>n instanceof HTMLElement?n:null;const queryMonthEls=n=>[...n.querySelectorAll("[data-animated-month]")??[]];const queryMonthEl=n=>asHtmlElement(n.querySelector("[data-animated-month]"));const queryCaptionEl=n=>asHtmlElement(n.querySelector("[data-animated-caption]"));const queryWeeksEl=n=>asHtmlElement(n.querySelector("[data-animated-weeks]"));const queryNavEl=n=>asHtmlElement(n.querySelector("[data-animated-nav]"));const queryWeekdaysEl=n=>asHtmlElement(n.querySelector("[data-animated-weekdays]"));function useAnimation(n,a,{classNames:o,months:i,focused:u,dateLib:d}){const m=ot.useRef(null);const g=ot.useRef(i);const y=ot.useRef(!1);ot.useLayoutEffect(()=>{const v=g.current;g.current=i;if(!(a&&n.current&&n.current instanceof HTMLElement&&0!==i.length&&0!==v.length&&i.length===v.length))return;const x=d.isSameMonth(i[0].date,v[0].date);const N=d.isAfter(i[0].date,v[0].date);const k=N?o[EM.caption_after_enter]:o[EM.caption_before_enter];const E=N?o[EM.weeks_after_enter]:o[EM.weeks_before_enter];const S=m.current;const A=n.current.cloneNode(!0);if(A instanceof HTMLElement){const n=queryMonthEls(A);n.forEach(n=>{if(!(n instanceof HTMLElement))return;const a=queryMonthEl(n);a&&n.contains(a)&&n.removeChild(a);const o=queryCaptionEl(n);o&&o.classList.remove(k);const i=queryWeeksEl(n);i&&i.classList.remove(E)});m.current=A}else m.current=null;if(y.current||x||u)return;const _=S instanceof HTMLElement?queryMonthEls(S):[];const j=queryMonthEls(n.current);if(j&&j.every(n=>n instanceof HTMLElement)&&_&&_.every(n=>n instanceof HTMLElement)){y.current=!0;n.current.style.isolation="isolate";const a=queryNavEl(n.current);a&&(a.style.zIndex="1");j.forEach((i,u)=>{const d=_[u];if(!d)return;i.style.position="relative";i.style.overflow="hidden";const m=queryCaptionEl(i);m&&m.classList.add(k);const g=queryWeeksEl(i);g&&g.classList.add(E);const cleanUp=()=>{y.current=!1;n.current&&(n.current.style.isolation="");a&&(a.style.zIndex="");m&&m.classList.remove(k);g&&g.classList.remove(E);i.style.position="";i.style.overflow="";i.contains(d)&&i.removeChild(d)};d.style.pointerEvents="none";d.style.position="absolute";d.style.overflow="hidden";d.setAttribute("aria-hidden","true");const v=queryWeekdaysEl(d);v&&(v.style.opacity="0");const x=queryCaptionEl(d);if(x){x.classList.add(N?o[EM.caption_before_exit]:o[EM.caption_after_exit]);x.addEventListener("animationend",cleanUp)}const S=queryWeeksEl(d);S&&S.classList.add(N?o[EM.weeks_before_exit]:o[EM.weeks_after_exit]);i.insertBefore(d,i.firstChild)})}})}function getDates(n,a,o,i){const u=n[0];const d=n[n.length-1];const{ISOWeek:m,fixedWeeks:g,broadcastCalendar:y}=o??{};const{addDays:v,differenceInCalendarDays:x,differenceInCalendarMonths:N,endOfBroadcastWeek:k,endOfISOWeek:E,endOfMonth:S,endOfWeek:A,isAfter:_,startOfBroadcastWeek:j,startOfISOWeek:I,startOfWeek:O}=i;const R=y?j(u,i):m?I(u):O(u);const B=y?k(d):m?E(S(d)):A(S(d));const M=x(B,R);const z=N(d,u)+1;const L=[];for(let H=0;H<=M;H++){const n=v(R,H);if(a&&_(n,a))break;L.push(n)}const D=y?35:42;const W=D*z;if(g&&L.length<W){const n=W-L.length;for(let a=0;a<n;a++){const n=v(L[L.length-1],1);L.push(n)}}return L}function getDays(n){const a=[];return n.reduce((n,o)=>{const i=o.weeks.reduce((n,a)=>[...n,...a.days],a);return[...n,...i]},a)}function getDisplayMonths(n,a,o,i){const{numberOfMonths:u=1}=o;const d=[];for(let m=0;m<u;m++){const o=i.addMonths(n,m);if(a&&o>a)break;d.push(o)}return d}function getInitialMonth(n,a,o,i){const{month:u,defaultMonth:d,today:m=i.today(),numberOfMonths:g=1}=n;let y=u||d||m;const{differenceInCalendarMonths:v,addMonths:x,startOfMonth:N}=i;if(o&&v(o,y)<g-1){const n=-1*(g-1);y=x(o,n)}a&&v(y,a)<0&&(y=a);return N(y)}function getMonths(n,a,o,i){const{addDays:u,endOfBroadcastWeek:d,endOfISOWeek:m,endOfMonth:g,endOfWeek:y,getISOWeek:v,getWeek:x,startOfBroadcastWeek:N,startOfISOWeek:k,startOfWeek:E}=i;const S=n.reduce((n,S)=>{const A=o.broadcastCalendar?N(S,i):o.ISOWeek?k(S):E(S);const _=o.broadcastCalendar?d(S):o.ISOWeek?m(g(S)):y(g(S));const j=a.filter(n=>n>=A&&n<=_);const I=o.broadcastCalendar?35:42;if(o.fixedWeeks&&j.length<I){const n=a.filter(n=>{const a=I-j.length;return n>_&&n<=u(_,a)});j.push(...n)}const O=j.reduce((n,a)=>{const u=o.ISOWeek?v(a):x(a);const d=n.find(n=>n.weekNumber===u);const m=new jM(a,S,i);d?d.days.push(m):n.push(new PM(u,[m]));return n},[]);const R=new IM(S,O);n.push(R);return n},[]);return o.reverseMonths?S.reverse():S}function getNavMonths(n,a){let{startMonth:o,endMonth:i}=n;const{startOfYear:u,startOfDay:d,startOfMonth:m,endOfMonth:g,addYears:y,endOfYear:v,newDate:x,today:N}=a;const{fromYear:k,toYear:E,fromMonth:S,toMonth:A}=n;!o&&S&&(o=S);!o&&k&&(o=a.newDate(k,0,1));!i&&A&&(i=A);!i&&E&&(i=x(E,11,31));const _="dropdown"===n.captionLayout||"dropdown-years"===n.captionLayout;o?o=m(o):k?o=x(k,0,1):!o&&_&&(o=u(y(n.today??N(),-100)));i?i=g(i):E?i=x(E,11,31):!i&&_&&(i=v(n.today??N()));return[o?d(o):o,i?d(i):i]}function getNextMonth(n,a,o,i){if(o.disableNavigation)return;const{pagedNavigation:u,numberOfMonths:d=1}=o;const{startOfMonth:m,addMonths:g,differenceInCalendarMonths:y}=i;const v=u?d:1;const x=m(n);if(!a)return g(x,v);const N=y(a,n);return N<d?void 0:g(x,v)}function getPreviousMonth(n,a,o,i){if(o.disableNavigation)return;const{pagedNavigation:u,numberOfMonths:d}=o;const{startOfMonth:m,addMonths:g,differenceInCalendarMonths:y}=i;const v=u?d??1:1;const x=m(n);if(!a)return g(x,-v);const N=y(x,a);return N<=0?void 0:g(x,-v)}function getWeeks(n){const a=[];return n.reduce((n,a)=>[...n,...a.weeks],a)}function useControlledValue(n,a){const[o,i]=ot.useState(n);const u=void 0===a?o:a;return[u,i]}function useCalendar(n,a){const[o,i]=getNavMonths(n,a);const{startOfMonth:u,endOfMonth:d}=a;const m=getInitialMonth(n,o,i,a);const[g,y]=useControlledValue(m,n.month?m:void 0);ot.useEffect(()=>{const u=getInitialMonth(n,o,i,a);y(u)},[n.timeZone]);const v=getDisplayMonths(g,i,n,a);const x=getDates(v,n.endMonth?d(n.endMonth):void 0,n,a);const N=getMonths(v,x,n,a);const k=getWeeks(N);const E=getDays(N);const S=getPreviousMonth(g,o,n,a);const A=getNextMonth(g,i,n,a);const{disableNavigation:_,onMonthChange:j}=n;const isDayInCalendar=n=>k.some(a=>a.days.some(a=>a.isEqualTo(n)));const goToMonth=n=>{if(_)return;let a=u(n);o&&a<u(o)&&(a=u(o));i&&a>u(i)&&(a=u(i));y(a);j?.(a)};const goToDay=n=>{isDayInCalendar(n)||goToMonth(n.date)};const I={months:N,weeks:k,days:E,navStart:o,navEnd:i,previousMonth:S,nextMonth:A,goToMonth:goToMonth,goToDay:goToDay};return I}var $M;!function(n){n[n.Today=0]="Today";n[n.Selected=1]="Selected";n[n.LastFocused=2]="LastFocused";n[n.FocusedModifier=3]="FocusedModifier"}($M||($M={}));function isFocusableDay(n){return!n[kM.disabled]&&!n[kM.hidden]&&!n[kM.outside]}function calculateFocusTarget(n,a,o,i){let u;let d=-1;for(const m of n){const n=a(m);if(isFocusableDay(n))if(n[kM.focused]&&d<$M.FocusedModifier){u=m;d=$M.FocusedModifier}else if(i?.isEqualTo(m)&&d<$M.LastFocused){u=m;d=$M.LastFocused}else if(o(m.date)&&d<$M.Selected){u=m;d=$M.Selected}else if(n[kM.today]&&d<$M.Today){u=m;d=$M.Today}}u||(u=n.find(n=>isFocusableDay(a(n))));return u}function getFocusableDate(n,a,o,i,u,d,m){const{ISOWeek:g,broadcastCalendar:y}=d;const{addDays:v,addMonths:x,addWeeks:N,addYears:k,endOfBroadcastWeek:E,endOfISOWeek:S,endOfWeek:A,max:_,min:j,startOfBroadcastWeek:I,startOfISOWeek:O,startOfWeek:R}=m;const B={day:v,week:N,month:x,year:k,startOfWeek:n=>y?I(n,m):g?O(n):R(n),endOfWeek:n=>y?E(n):g?S(n):A(n)};let M=B[n](o,"after"===a?1:-1);"before"===a&&i?M=_([i,M]):"after"===a&&u&&(M=j([u,M]));return M}function getNextFocus(n,a,o,i,u,d,m,g=0){if(g>365)return;const y=getFocusableDate(n,a,o.date,i,u,d,m);const v=Boolean(d.disabled&&dateMatchModifiers(y,d.disabled,m));const x=Boolean(d.hidden&&dateMatchModifiers(y,d.hidden,m));const N=y;const k=new jM(y,N,m);return v||x?getNextFocus(n,a,k,i,u,d,m,g+1):k}function useFocus(n,a,o,i,u){const{autoFocus:d}=n;const[m,g]=ot.useState();const y=calculateFocusTarget(a.days,o,i||(()=>!1),m);const[v,x]=ot.useState(d?y:void 0);const blur=()=>{g(v);x(void 0)};const moveFocus=(o,i)=>{if(!v)return;const d=getNextFocus(o,i,v,a.navStart,a.navEnd,n,u);if(d){a.goToDay(d);x(d)}};const isFocusTarget=n=>Boolean(y?.isEqualTo(n));const N={isFocusTarget:isFocusTarget,setFocused:x,focused:v,blur:blur,moveFocus:moveFocus};return N}function useMulti(n,a){const{selected:o,required:i,onSelect:u}=n;const[d,m]=useControlledValue(o,u?o:void 0);const g=u?o:d;const{isSameDay:y}=a;const isSelected=n=>g?.some(a=>y(a,n))??!1;const{min:v,max:x}=n;const select=(n,a,o)=>{let d=[...g??[]];if(isSelected(n)){if(g?.length===v)return;if(i&&1===g?.length)return;d=g?.filter(a=>!y(a,n))}else d=g?.length===x?[n]:[...d,n];u||m(d);u?.(d,n,a,o);return d};return{selected:g,select:select,isSelected:isSelected}}function addToRange(n,a,o=0,i=0,u=!1,d=TM){const{from:m,to:g}=a||{};const{isSameDay:y,isAfter:v,isBefore:x}=d;let N;if(m||g){if(m&&!g)N=y(m,n)?u?{from:m,to:void 0}:void 0:x(n,m)?{from:n,to:m}:{from:m,to:n};else if(m&&g)if(y(m,n)&&y(g,n))N=u?{from:m,to:g}:void 0;else if(y(m,n))N={from:m,to:o>0?void 0:n};else if(y(g,n))N={from:n,to:o>0?void 0:n};else if(x(n,m))N={from:n,to:g};else if(v(n,m))N={from:m,to:n};else{if(!v(n,g))throw new Error("Invalid range");N={from:m,to:n}}}else N={from:n,to:o>0?void 0:n};if(N?.from&&N?.to){const a=d.differenceInCalendarDays(N.to,N.from);(i>0&&a>i||o>1&&a<o)&&(N={from:n,to:void 0})}return N}function rangeContainsDayOfWeek(n,a,o=TM){const i=Array.isArray(a)?a:[a];let u=n.from;const d=o.differenceInCalendarDays(n.to,n.from);const m=Math.min(d,6);for(let g=0;g<=m;g++){if(i.includes(u.getDay()))return!0;u=o.addDays(u,1)}return!1}function rangeOverlaps(n,a,o=TM){return rangeIncludesDate(n,a.from,!1,o)||rangeIncludesDate(n,a.to,!1,o)||rangeIncludesDate(a,n.from,!1,o)||rangeIncludesDate(a,n.to,!1,o)}function rangeContainsModifiers(n,a,o=TM){const i=Array.isArray(a)?a:[a];const u=i.filter(n=>"function"!=typeof n);const d=u.some(a=>{if("boolean"==typeof a)return a;if(o.isDate(a))return rangeIncludesDate(n,a,!1,o);if(isDatesArray(a,o))return a.some(a=>rangeIncludesDate(n,a,!1,o));if(isDateRange(a))return!(!a.from||!a.to)&&rangeOverlaps(n,{from:a.from,to:a.to},o);if(isDayOfWeekType(a))return rangeContainsDayOfWeek(n,a.dayOfWeek,o);if(isDateInterval(a)){const i=o.isAfter(a.before,a.after);return i?rangeOverlaps(n,{from:o.addDays(a.after,1),to:o.addDays(a.before,-1)},o):dateMatchModifiers(n.from,a,o)||dateMatchModifiers(n.to,a,o)}return!(!isDateAfterType(a)&&!isDateBeforeType(a))&&(dateMatchModifiers(n.from,a,o)||dateMatchModifiers(n.to,a,o))});if(d)return!0;const m=i.filter(n=>"function"==typeof n);if(m.length){let a=n.from;const i=o.differenceInCalendarDays(n.to,n.from);for(let n=0;n<=i;n++){if(m.some(n=>n(a)))return!0;a=o.addDays(a,1)}}return!1}function useRange(n,a){const{disabled:o,excludeDisabled:i,selected:u,required:d,onSelect:m}=n;const[g,y]=useControlledValue(u,m?u:void 0);const v=m?u:g;const isSelected=n=>v&&rangeIncludesDate(v,n,!1,a);const select=(u,g,x)=>{const{min:N,max:k}=n;const E=u?addToRange(u,v,N,k,d,a):void 0;if(i&&o&&E?.from&&E.to&&rangeContainsModifiers({from:E.from,to:E.to},o,a)){E.from=u;E.to=void 0}m||y(E);m?.(E,u,g,x);return E};return{selected:v,select:select,isSelected:isSelected}}function useSingle(n,a){const{selected:o,required:i,onSelect:u}=n;const[d,m]=useControlledValue(o,u?o:void 0);const g=u?o:d;const{isSameDay:y}=a;const isSelected=n=>!!g&&y(g,n);const select=(n,a,o)=>{let d=n;!i&&g&&g&&y(n,g)&&(d=void 0);u||m(d);u?.(d,n,a,o);return d};return{selected:g,select:select,isSelected:isSelected}}function useSelection(n,a){const o=useSingle(n,a);const i=useMulti(n,a);const u=useRange(n,a);switch(n.mode){case"single":return o;case"multiple":return i;case"range":return u;default:return}}function DayPicker(n){let a=n;if(a.timeZone){a={...n};a.today&&(a.today=new xM(a.today,a.timeZone));a.month&&(a.month=new xM(a.month,a.timeZone));a.defaultMonth&&(a.defaultMonth=new xM(a.defaultMonth,a.timeZone));a.startMonth&&(a.startMonth=new xM(a.startMonth,a.timeZone));a.endMonth&&(a.endMonth=new xM(a.endMonth,a.timeZone));"single"===a.mode&&a.selected?a.selected=new xM(a.selected,a.timeZone):"multiple"===a.mode&&a.selected?a.selected=a.selected?.map(n=>new xM(n,a.timeZone)):"range"===a.mode&&a.selected&&(a.selected={from:a.selected.from?new xM(a.selected.from,a.timeZone):void 0,to:a.selected.to?new xM(a.selected.to,a.timeZone):void 0})}const{components:o,formatters:i,labels:u,dateLib:d,locale:m,classNames:g}=ot.useMemo(()=>{const n={...ZO,...a.locale};const o=new _M({locale:n,weekStartsOn:a.broadcastCalendar?1:a.weekStartsOn,firstWeekContainsDate:a.firstWeekContainsDate,useAdditionalWeekYearTokens:a.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:a.useAdditionalDayOfYearTokens,timeZone:a.timeZone,numerals:a.numerals},a.dateLib);return{dateLib:o,components:getComponents(a.components),formatters:getFormatters(a.formatters),labels:{...DM,...a.labels},locale:n,classNames:{...getDefaultClassNames(),...a.classNames}}},[a.locale,a.broadcastCalendar,a.weekStartsOn,a.firstWeekContainsDate,a.useAdditionalWeekYearTokens,a.useAdditionalDayOfYearTokens,a.timeZone,a.numerals,a.dateLib,a.components,a.formatters,a.labels,a.classNames]);const{captionLayout:y,mode:v,navLayout:x,numberOfMonths:N=1,onDayBlur:k,onDayClick:E,onDayFocus:S,onDayKeyDown:A,onDayMouseEnter:_,onDayMouseLeave:j,onNextClick:I,onPrevClick:O,showWeekNumber:R,styles:B}=a;const{formatCaption:M,formatDay:z,formatMonthDropdown:L,formatWeekNumber:D,formatWeekNumberHeader:W,formatWeekdayName:H,formatYearDropdown:q}=i;const G=useCalendar(a,d);const{days:V,months:Z,navStart:Y,navEnd:J,previousMonth:X,nextMonth:ee,goToMonth:te}=G;const ne=createGetModifiers(V,a,Y,J,d);const{isSelected:re,select:se,selected:ae}=useSelection(a,d)??{};const{blur:oe,focused:ie,isFocusTarget:ce,moveFocus:le,setFocused:ue}=useFocus(a,G,ne,re??(()=>!1),d);const{labelDayButton:de,labelGridcell:he,labelGrid:fe,labelMonthDropdown:pe,labelNav:me,labelPrevious:ge,labelNext:ye,labelWeekday:be,labelWeekNumber:we,labelWeekNumberHeader:xe,labelYearDropdown:Ne}=u;const ke=ot.useMemo(()=>getWeekdays(d,a.ISOWeek),[d,a.ISOWeek]);const Ee=void 0!==v||void 0!==E;const Se=ot.useCallback(()=>{if(X){te(X);O?.(X)}},[X,te,O]);const Ae=ot.useCallback(()=>{if(ee){te(ee);I?.(ee)}},[te,ee,I]);const _e=ot.useCallback((n,a)=>o=>{o.preventDefault();o.stopPropagation();ue(n);se?.(n.date,a,o);E?.(n.date,a,o)},[se,E,ue]);const Te=ot.useCallback((n,a)=>o=>{ue(n);S?.(n.date,a,o)},[S,ue]);const je=ot.useCallback((n,a)=>o=>{oe();k?.(n.date,a,o)},[oe,k]);const Ie=ot.useCallback((n,o)=>i=>{const u={ArrowLeft:[i.shiftKey?"month":"day","rtl"===a.dir?"after":"before"],ArrowRight:[i.shiftKey?"month":"day","rtl"===a.dir?"before":"after"],ArrowDown:[i.shiftKey?"year":"week","after"],ArrowUp:[i.shiftKey?"year":"week","before"],PageUp:[i.shiftKey?"year":"month","before"],PageDown:[i.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(u[i.key]){i.preventDefault();i.stopPropagation();const[n,a]=u[i.key];le(n,a)}A?.(n.date,o,i)},[le,A,a.dir]);const Pe=ot.useCallback((n,a)=>o=>{_?.(n.date,a,o)},[_]);const Oe=ot.useCallback((n,a)=>o=>{j?.(n.date,a,o)},[j]);const Re=ot.useCallback(n=>a=>{const o=Number(a.target.value);const i=d.setMonth(d.startOfMonth(n),o);te(i)},[d,te]);const Be=ot.useCallback(n=>a=>{const o=Number(a.target.value);const i=d.setYear(d.startOfMonth(n),o);te(i)},[d,te]);const{className:Me,style:ze}=ot.useMemo(()=>({className:[g[NM.Root],a.className].filter(Boolean).join(" "),style:{...B?.[NM.Root],...a.style}}),[g,a.className,a.style,B]);const Fe=getDataAttributes(a);const Le=ot.useRef(null);useAnimation(Le,Boolean(a.animate),{classNames:g,months:Z,focused:ie,dateLib:d});const De={dayPickerProps:a,selected:ae,select:se,isSelected:re,months:Z,nextMonth:ee,previousMonth:X,goToMonth:te,getModifiers:ne,components:o,classNames:g,styles:B,labels:u,formatters:i};return it.createElement(OM.Provider,{value:De},it.createElement(o.Root,{rootRef:a.animate?Le:void 0,className:Me,style:ze,dir:a.dir,id:a.id,lang:a.lang,nonce:a.nonce,title:a.title,role:a.role,"aria-label":a["aria-label"],...Fe},it.createElement(o.Months,{className:g[NM.Months],style:B?.[NM.Months]},!a.hideNavigation&&!x&&it.createElement(o.Nav,{"data-animated-nav":a.animate?"true":void 0,className:g[NM.Nav],style:B?.[NM.Nav],"aria-label":me(),onPreviousClick:Se,onNextClick:Ae,previousMonth:X,nextMonth:ee}),Z.map((n,u)=>{const k=getMonthOptions(n.date,Y,J,i,d);const E=getYearOptions(Y,J,i,d);return it.createElement(o.Month,{"data-animated-month":a.animate?"true":void 0,className:g[NM.Month],style:B?.[NM.Month],key:u,displayIndex:u,calendarMonth:n},"around"===x&&!a.hideNavigation&&0===u&&it.createElement(o.PreviousMonthButton,{type:"button",className:g[NM.PreviousMonthButton],tabIndex:X?void 0:-1,"aria-disabled":!X||void 0,"aria-label":ge(X),onClick:Se,"data-animated-button":a.animate?"true":void 0},it.createElement(o.Chevron,{disabled:!X||void 0,className:g[NM.Chevron],orientation:"rtl"===a.dir?"right":"left"})),it.createElement(o.MonthCaption,{"data-animated-caption":a.animate?"true":void 0,className:g[NM.MonthCaption],style:B?.[NM.MonthCaption],calendarMonth:n,displayIndex:u},y?.startsWith("dropdown")?it.createElement(o.DropdownNav,{className:g[NM.Dropdowns],style:B?.[NM.Dropdowns]},"dropdown"===y||"dropdown-months"===y?it.createElement(o.MonthsDropdown,{className:g[NM.MonthsDropdown],"aria-label":pe(),classNames:g,components:o,disabled:Boolean(a.disableNavigation),onChange:Re(n.date),options:k,style:B?.[NM.Dropdown],value:d.getMonth(n.date)}):it.createElement("span",null,L(n.date,d)),"dropdown"===y||"dropdown-years"===y?it.createElement(o.YearsDropdown,{className:g[NM.YearsDropdown],"aria-label":Ne(d.options),classNames:g,components:o,disabled:Boolean(a.disableNavigation),onChange:Be(n.date),options:E,style:B?.[NM.Dropdown],value:d.getYear(n.date)}):it.createElement("span",null,q(n.date,d)),it.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},M(n.date,d.options,d))):it.createElement(o.CaptionLabel,{className:g[NM.CaptionLabel],role:"status","aria-live":"polite"},M(n.date,d.options,d))),"around"===x&&!a.hideNavigation&&u===N-1&&it.createElement(o.NextMonthButton,{type:"button",className:g[NM.NextMonthButton],tabIndex:ee?void 0:-1,"aria-disabled":!ee||void 0,"aria-label":ye(ee),onClick:Ae,"data-animated-button":a.animate?"true":void 0},it.createElement(o.Chevron,{disabled:!ee||void 0,className:g[NM.Chevron],orientation:"rtl"===a.dir?"left":"right"})),u===N-1&&"after"===x&&!a.hideNavigation&&it.createElement(o.Nav,{"data-animated-nav":a.animate?"true":void 0,className:g[NM.Nav],style:B?.[NM.Nav],"aria-label":me(),onPreviousClick:Se,onNextClick:Ae,previousMonth:X,nextMonth:ee}),it.createElement(o.MonthGrid,{role:"grid","aria-multiselectable":"multiple"===v||"range"===v,"aria-label":fe(n.date,d.options,d)||void 0,className:g[NM.MonthGrid],style:B?.[NM.MonthGrid]},!a.hideWeekdays&&it.createElement(o.Weekdays,{"data-animated-weekdays":a.animate?"true":void 0,className:g[NM.Weekdays],style:B?.[NM.Weekdays]},R&&it.createElement(o.WeekNumberHeader,{"aria-label":xe(d.options),className:g[NM.WeekNumberHeader],style:B?.[NM.WeekNumberHeader],scope:"col"},W()),ke.map((n,a)=>it.createElement(o.Weekday,{"aria-label":be(n,d.options,d),className:g[NM.Weekday],key:a,style:B?.[NM.Weekday],scope:"col"},H(n,d.options,d)))),it.createElement(o.Weeks,{"data-animated-weeks":a.animate?"true":void 0,className:g[NM.Weeks],style:B?.[NM.Weeks]},n.weeks.map((n,i)=>it.createElement(o.Week,{className:g[NM.Week],key:n.weekNumber,style:B?.[NM.Week],week:n},R&&it.createElement(o.WeekNumber,{week:n,style:B?.[NM.WeekNumber],"aria-label":we(n.weekNumber,{locale:m}),className:g[NM.WeekNumber],scope:"row",role:"rowheader"},D(n.weekNumber,d)),n.days.map(n=>{const{date:i}=n;const u=ne(n);u[kM.focused]=!u.hidden&&Boolean(ie?.isEqualTo(n));u[CM.selected]=re?.(i)||u.selected;if(isDateRange(ae)){const{from:n,to:a}=ae;u[CM.range_start]=Boolean(n&&a&&d.isSameDay(i,n));u[CM.range_end]=Boolean(n&&a&&d.isSameDay(i,a));u[CM.range_middle]=rangeIncludesDate(ae,i,!0,d)}const m=getStyleForModifiers(u,B,a.modifiersStyles);const y=getClassNamesForModifiers(u,g,a.modifiersClassNames);const v=Ee||u.hidden?void 0:he(i,u,d.options,d);return it.createElement(o.Day,{key:`${d.format(i,"yyyy-MM-dd")}_${d.format(n.displayMonth,"yyyy-MM")}`,day:n,modifiers:u,className:y.join(" "),style:m,role:"gridcell","aria-selected":u.selected||void 0,"aria-label":v,"data-day":d.format(i,"yyyy-MM-dd"),"data-month":n.outside?d.format(i,"yyyy-MM"):void 0,"data-selected":u.selected||void 0,"data-disabled":u.disabled||void 0,"data-hidden":u.hidden||void 0,"data-outside":n.outside||void 0,"data-focused":u.focused||void 0,"data-today":u.today||void 0},!u.hidden&&Ee?it.createElement(o.DayButton,{className:g[NM.DayButton],style:B?.[NM.DayButton],type:"button",day:n,modifiers:u,disabled:u.disabled||void 0,tabIndex:ce(n)?0:-1,"aria-label":de(i,u,d.options,d),onClick:_e(n,u),onBlur:je(n,u),onFocus:Te(n,u),onKeyDown:Ie(n,u),onMouseEnter:Pe(n,u),onMouseLeave:Oe(n,u)},z(i,d.options,d)):!u.hidden&&z(n.date,d.options,d))}))))))})),a.footer&&it.createElement(o.Footer,{className:g[NM.Footer],style:B?.[NM.Footer],role:"status","aria-live":"polite"},a.footer)))}const falsyToString=n=>"boolean"==typeof n?`${n}`:0===n?"0":n;const UM=clsx;const cva=(n,a)=>o=>{var i;if(null==(null==a?void 0:a.variants))return UM(n,null==o?void 0:o.class,null==o?void 0:o.className);const{variants:u,defaultVariants:d}=a;const m=Object.keys(u).map(n=>{const a=null==o?void 0:o[n];const i=null==d?void 0:d[n];if(null===a)return null;const m=falsyToString(a)||falsyToString(i);return u[n][m]});const g=o&&Object.entries(o).reduce((n,a)=>{let[o,i]=a;if(void 0===i)return n;n[o]=i;return n},{});const y=null==a||null===(i=a.compoundVariants)||void 0===i?void 0:i.reduce((n,a)=>{let{class:o,className:i,...u}=a;return Object.entries(u).every(n=>{let[a,o]=n;return Array.isArray(o)?o.includes({...d,...g}[a]):{...d,...g}[a]===o})?[...n,o,i]:n},[]);return UM(n,m,y,null==o?void 0:o.class,null==o?void 0:o.className)};const WM=cva("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Button({className:n,variant:a,size:o,asChild:i=!1,...u}){const d=i?kR:"button";return at.jsx(d,{"data-slot":"button",className:cn2(WM({variant:a,size:o,className:n})),...u})}function Calendar({className:n,classNames:a,showOutsideDays:o=!0,captionLayout:i="label",buttonVariant:u="ghost",formatters:d,components:m,...g}){const y=getDefaultClassNames();return at.jsx(DayPicker,{showOutsideDays:o,className:cn2("bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,n),captionLayout:i,formatters:{formatMonthDropdown:n=>n.toLocaleString("default",{month:"short"}),...d},classNames:{root:cn2("w-fit",y.root),months:cn2("flex gap-4 flex-col md:flex-row relative",y.months),month:cn2("flex flex-col w-full gap-4",y.month),nav:cn2("flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",y.nav),button_previous:cn2(WM({variant:u}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",y.button_previous),button_next:cn2(WM({variant:u}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",y.button_next),month_caption:cn2("flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",y.month_caption),dropdowns:cn2("w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",y.dropdowns),dropdown_root:cn2("relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",y.dropdown_root),dropdown:cn2("absolute inset-0 opacity-0",y.dropdown),caption_label:cn2("select-none font-medium","label"===i?"text-sm":"rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",y.caption_label),table:"w-full border-collapse",weekdays:cn2("flex",y.weekdays),weekday:cn2("text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",y.weekday),week:cn2("flex w-full mt-2",y.week),week_number_header:cn2("select-none w-(--cell-size)",y.week_number_header),week_number:cn2("text-[0.8rem] select-none text-muted-foreground",y.week_number),day:cn2("relative w-full h-full p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",y.day),range_start:cn2("rounded-l-md bg-accent",y.range_start),range_middle:cn2("rounded-none",y.range_middle),range_end:cn2("rounded-r-md bg-accent",y.range_end),today:cn2("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",y.today),outside:cn2("text-muted-foreground aria-selected:text-muted-foreground",y.outside),disabled:cn2("text-muted-foreground opacity-50",y.disabled),hidden:cn2("invisible",y.hidden),...a},components:{Root:({className:n,rootRef:a,...o})=>at.jsx("div",{"data-slot":"calendar",ref:a,className:cn2(n),...o}),Chevron:({className:n,orientation:a,...o})=>"left"===a?at.jsx(C_,{className:cn2("size-4",n),...o}):"right"===a?at.jsx(S_,{className:cn2("size-4",n),...o}):at.jsx(N_,{className:cn2("size-4",n),...o}),DayButton:CalendarDayButton,WeekNumber:({children:n,...a})=>at.jsx("td",{...a,children:at.jsx("div",{className:"flex size-(--cell-size) items-center justify-center text-center",children:n})}),...m},...g})}function CalendarDayButton({className:n,day:a,modifiers:o,...i}){const u=getDefaultClassNames();const d=ot.useRef(null);ot.useEffect(()=>{o.focused&&d.current?.focus()},[o.focused]);return at.jsx(Button,{ref:d,variant:"ghost",size:"icon","data-day":a.date.toLocaleDateString(),"data-selected-single":o.selected&&!o.range_start&&!o.range_end&&!o.range_middle,"data-range-start":o.range_start,"data-range-end":o.range_end,"data-range-middle":o.range_middle,className:cn2("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",u.day,n),...i})}const DateTimePicker=({value:n,onChange:a,disabled:o=!1})=>{const[i,u]=ot.useState("date");const[d,m]=ot.useState(n?new Date(n):null);ot.useEffect(()=>{n&&m(new Date(n))},[n]);const handleDateSelect=n=>{if(!n)return;const o=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),d?.getUTCHours()||0,d?.getUTCMinutes()||0));m(o);u("time");a(o.toISOString())};const handleTimeChange=n=>{const{name:o,value:i}=n.target;const u=d?new Date(d.getTime()):new Date;"hour"===o&&u.setUTCHours(Math.max(0,Math.min(23,Number(i))));"minute"===o&&u.setUTCMinutes(Math.max(0,Math.min(59,Number(i))));m(u);a(u.toISOString())};const formatUTCTime=n=>{if(!n)return"";const a=n.getUTCHours().toString().padStart(2,"0");const o=n.getUTCMinutes().toString().padStart(2,"0");const i=n.getUTCDate().toString().padStart(2,"0");const u=(n.getUTCMonth()+1).toString().padStart(2,"0");const d=n.getUTCFullYear();return`${d}-${u}-${i} ${a}:${o}`};return at.jsxs(Popover,{children:[at.jsx(PopoverTrigger,{asChild:!0,children:at.jsxs("button",{className:cn2("w-full flex justify-between items-center p-1 rounded bg-zinc-800 border border-zinc-600 text-white text-sm",!n&&"text-zinc-500"),disabled:o,children:[n?formatUTCTime(new Date(n))+" UTC":"Pick date & time (UTC)",at.jsx(g_,{className:"ml-2 h-4 w-4 text-zinc-400"})]})}),at.jsxs(PopoverContent,{className:"w-auto bg-zinc-900 border border-zinc-700 text-white",children:["date"===i&&at.jsxs("div",{className:"flex flex-col items-center",children:[at.jsx(Calendar,{mode:"single",selected:d,onSelect:handleDateSelect,className:"bg-zinc-900"}),d&&at.jsx("button",{onClick:()=>u("time"),className:"mt-2 text-xs text-blue-400 hover:underline",children:"Set time for selected date"})]}),"time"===i&&at.jsxs("div",{className:"flex flex-col items-center px-2 py-2 gap-2",children:[at.jsx("div",{className:"text-xs text-zinc-400 mb-1",children:"All times are in UTC"}),at.jsxs("div",{className:"flex gap-2 items-center",children:[at.jsx("label",{className:"text-xs",children:"Hour (UTC):"}),at.jsx("input",{type:"number",name:"hour",min:0,max:23,value:d?.getUTCHours()??0,onChange:handleTimeChange,className:"w-16 p-1 rounded bg-zinc-800 border border-zinc-600 text-white text-sm"}),at.jsx("label",{className:"text-xs",children:"Minute:"}),at.jsx("input",{type:"number",name:"minute",min:0,max:59,value:d?.getUTCMinutes()??0,onChange:handleTimeChange,className:"w-16 p-1 rounded bg-zinc-800 border border-zinc-600 text-white text-sm"})]}),at.jsx("button",{onClick:()=>u("date"),className:"mt-2 text-xs text-blue-400 hover:underline",children:"← Back to date"})]})]})]})};const PhaseSettings=({collectionAddress:n,phases:a,onActivatePhase:o,onRemovePhase:i,nfts:u=[],saleStatus:d,onPauseSale:m,onResumeSale:g})=>{const[y,v]=ot.useState({});const[x,N]=ot.useState({});const[k,E]=ot.useState({visible:!1,message:"",type:"success"});const[S,A]=ot.useState({Whitelist:!1,FCFS:!1,Public:!0});const _=ot.useRef({});const[j,I]=ot.useState(u.length);ot.useEffect(()=>{if(k.visible){const n=setTimeout(()=>E(n=>({...n,visible:!1})),3e3);return()=>clearTimeout(n)}},[k.visible]);const showToast=(n,a="success")=>{E({visible:!0,message:n,type:a})};const O=["Whitelist","FCFS","Public"];const getPrevPhaseKey=n=>O[O.indexOf(n)-1]||null;const getNextPhaseKey=n=>O[O.indexOf(n)+1]||null;const clampToNoOverlap=(n,a)=>{let o=n[a]?.start?new Date(n[a].start):null;let i=n[a]?.end?new Date(n[a].end):null;if(!o||!i)return n;const u=getPrevPhaseKey(a);if(u&&n[u]?.end){const a=new Date(n[u].end);o<a&&(o=new Date(a))}const d=getNextPhaseKey(a);if(d&&n[d]?.start){const a=new Date(n[d].start);i>a&&(i=new Date(a))}i<=o&&(i=new Date(o.getTime()+36e5));n[a].start=new Date(Date.UTC(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate(),o.getUTCHours(),o.getUTCMinutes())).toISOString();n[a].end=new Date(Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes())).toISOString();return n};ot.useEffect(()=>{const handleStorageChange=()=>{const a=JSON.parse(localStorage.getItem(`phases_${n}`))||{};const o=JSON.parse(localStorage.getItem(`collection_${n}_nfts`)||"[]");const i=o.length;I(i);if(a.Public){const o=Object.entries(a).reduce((n,[a,o])=>"Public"===a?n:n+(Number(o.allocated)||0),0);a.Public.allocated=Math.max(0,i-o);a.Public.limit=1;localStorage.setItem(`phases_${n}`,JSON.stringify(a))}else{const o=new Date;const u=new Date(o.getTime()+2592e5);a.Public={price:"0.1",limit:1,allocated:i,start:new Date(Date.UTC(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate(),o.getUTCHours(),o.getUTCMinutes())).toISOString(),end:new Date(Date.UTC(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),u.getUTCHours(),u.getUTCMinutes())).toISOString(),active:!0,isPublic:!0};localStorage.setItem(`phases_${n}`,JSON.stringify(a))}v(a);A({Whitelist:!!a.Whitelist,FCFS:!!a.FCFS,Public:!0})};window.addEventListener("storage",handleStorageChange);const a=setInterval(handleStorageChange,2e3);return()=>{window.removeEventListener("storage",handleStorageChange);clearInterval(a)}},[n]);ot.useEffect(()=>{if(!n)return;const a=JSON.parse(localStorage.getItem(`collection_${n}_nfts`)||"[]");I(a.length);const o=JSON.parse(localStorage.getItem(`phases_${n}`))||{};if(o.Public){const i=Object.entries(o).reduce((n,[a,o])=>"Public"===a?n:n+(Number(o.allocated)||0),0);o.Public.allocated=Math.max(0,a.length-i);o.Public.limit=1;localStorage.setItem(`phases_${n}`,JSON.stringify(o))}else{const i=new Date;const u=new Date(i.getTime()+2592e5);o.Public={price:"0.1",limit:1,allocated:a.length,start:new Date(Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes())).toISOString(),end:new Date(Date.UTC(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),u.getUTCHours(),u.getUTCMinutes())).toISOString(),active:!0,isPublic:!0};localStorage.setItem(`phases_${n}`,JSON.stringify(o))}v(o);A({Whitelist:!!o.Whitelist,FCFS:!!o.FCFS,Public:!0})},[n]);const togglePhase=a=>{"Public"!==a&&A(o=>{const i={...o,[a]:!o[a]};if(i[a]&&!y[a]){const o=new Date;const i=new Date(o.getTime()+36e5);const u=new Date(i.getTime()+36e5);const d=Math.floor(j/3);const m={price:"Whitelist"===a?"0.05":"0.08",allocated:d,start:new Date(Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes())).toISOString(),end:new Date(Date.UTC(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),u.getUTCHours(),u.getUTCMinutes())).toISOString(),active:!1,isPublic:!1};const g={...y,[a]:m};if(g.Public){const n=Number(g.Public.allocated)||0;g.Public.allocated=Math.max(0,n-d);g.Public.start="";g.Public.end=""}v(g);localStorage.setItem(`phases_${n}`,JSON.stringify(g));showToast(`Added ${a} phase. Public phase dates have been reset for easier configuration.`,"success")}if(!i[a]&&y[a]){const o={...y};const i=Number(y[a].allocated)||0;if(o.Public){const n=Number(o.Public.allocated)||0;o.Public.allocated=n+i}delete o[a];v(o);localStorage.setItem(`phases_${n}`,JSON.stringify(o))}return i})};const R=ot.useCallback(async(a,o)=>{_.current[a]&&clearTimeout(_.current[a]);_.current[a]=setTimeout(async()=>{try{await new Promise(n=>setTimeout(n,200));const i={...y,[a]:o};localStorage.setItem(`phases_${n}`,JSON.stringify(i))}catch(i){console.error(`❌ Failed to auto-save ${a} phase:`,i);showToast(`Failed to save ${a} settings`,"error")}},300)},[y,n]);const validatePhaseTime=(n,a,o)=>{const i={};const u=new Date(a).getTime();const d=new Date(o).getTime();if(u>=d){i[n]="Start time must be before end time";return i}Object.entries(y).forEach(([a,o])=>{if(a===n||!o.start||!o.end)return;const m=new Date(o.start).getTime();const g=new Date(o.end).getTime();u<g&&d>m&&(i[n]=`Time overlaps with ${a} phase`)});return i};const handleChange=(n,a,o)=>{if("allocated"===a)if("Public"===n){const n=Object.entries(y).reduce((n,[a,o])=>"Public"===a?n:n+(Number(o.allocated)||0),0);o=Math.max(0,j-n)}else{const a=Number(y[n]?.allocated)||0;const i=Math.max(0,Number(o)||0);const u=i-a;if(y.Public){const n=Number(y.Public.allocated)||0;y.Public.allocated=Math.max(0,n-u)}o=i}"Public"===n&&["price","limit","start","end"].includes(a)&&y[n]&&(y[n].userModified=!0);let i={...y,[n]:{...y[n],[a]:o}};if(("start"===a||"end"===a)&&o){const u=i[n]||{};const d="start"===a?o:u.start;const m="end"===a?o:u.end;if(d&&m){const a=validatePhaseTime(n,d,m);if(a[n]){i=clampToNoOverlap(i,n);showToast(a[n],"error")}}}v(i);R(n,i[n])};const handleToggleActivate=(a,i,u)=>{const d={...y,[a]:{...y[a],active:i}};localStorage.setItem(`phases_${n}`,JSON.stringify(d));v(d);R(a,d[a]);d[a];o&&o(u);showToast(`${a} phase ${i?"activated":"deactivated"}`,"success")};return at.jsxs("div",{className:"space-y-6",children:[d?.isInitialized&&at.jsxs("div",{className:"bg-zinc-800/50 rounded-xl p-6",children:[at.jsxs("div",{className:"flex items-center justify-between",children:[at.jsxs("div",{className:"flex items-center gap-3",children:[at.jsx("div",{className:"w-3 h-3 rounded-full "+(d.isPaused?"bg-red-500":"bg-green-500")}),at.jsxs("span",{className:"text-sm font-medium text-white",children:["Sale Status: ",d.isPaused?"Paused":"Active"]})]}),at.jsx("div",{className:"flex items-center gap-3",children:d.isPaused?at.jsxs("button",{onClick:g,disabled:d.isLoading,className:"flex items-center gap-2 px-4 py-2 bg-green-500/20 hover:bg-green-500/30 text-green-400 rounded-lg transition-colors duration-200 disabled:opacity-50",children:[d.isLoading?at.jsx(dT,{className:"w-4 h-4 animate-spin"}):at.jsx(ET,{className:"w-4 h-4"}),d.isLoading?"Resuming":"Resume Sale"]}):at.jsxs("button",{onClick:m,disabled:d.isLoading,className:"flex items-center gap-2 px-4 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg transition-colors duration-200 disabled:opacity-50",children:[d.isLoading?at.jsx(dT,{className:"w-4 h-4 animate-spin"}):at.jsx(kT,{className:"w-4 h-4"}),d.isLoading?"Pausing":"Pause Sale"]})})]}),d.isPaused&&at.jsxs("div",{className:"mt-4 p-4 bg-yellow-900/20 border border-yellow-500/50 rounded-xl",children:[at.jsxs("div",{className:"flex items-center gap-2 text-yellow-400 mb-2",children:[at.jsx(VT,{size:16}),at.jsx("span",{className:"font-semibold",children:"Sale is Paused"})]}),at.jsx("p",{className:"text-sm text-yellow-300",children:"The sale is currently paused. Users cannot mint NFTs while the sale is paused. You can edit phase settings while paused, then resume the sale when ready."})]})]}),at.jsx("div",{className:"bg-zinc-800/50 rounded-xl p-6",children:at.jsxs("div",{className:"flex items-center justify-between",children:[at.jsxs("div",{children:[at.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Add Phases"}),at.jsxs("div",{className:"flex gap-4",children:[at.jsx("button",{onClick:()=>togglePhase("Whitelist"),disabled:d?.isPaused,className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${S.Whitelist?"bg-gradient-to-r from-blue-500 to-pink-500 text-white shadow-lg":"bg-zinc-700 hover:bg-zinc-600 text-white"} ${d?.isPaused?"opacity-50 cursor-not-allowed":""}`,children:"Whitelist"}),at.jsx("button",{onClick:()=>togglePhase("FCFS"),disabled:d?.isPaused,className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${S.FCFS?"bg-gradient-to-r from-blue-500 to-pink-500 text-white shadow-lg":"bg-zinc-700 hover:bg-zinc-600 text-white"} ${d?.isPaused?"opacity-50 cursor-not-allowed":""}`,children:"FCFS"})]}),at.jsx("p",{className:"text-xs text-zinc-500 mt-2",children:"Click to add/remove phases. Public phase is always available."})]}),at.jsxs("div",{className:"text-right",children:[at.jsxs("p",{className:"text-sm text-zinc-400",children:["Total NFTs (added): ",at.jsx("span",{className:"text-white font-bold",children:j})]}),at.jsxs("p",{className:"text-sm text-zinc-400",children:["Allocated to phases: ",at.jsx("span",{className:"text-white font-bold",children:Object.values(y).reduce((n,a)=>n+(Number(a.allocated)||0),0)})]}),at.jsxs("p",{className:"text-sm text-zinc-400",children:["Unallocated NFTs: ",at.jsx("span",{className:"text-white font-bold",children:j-Object.values(y).reduce((n,a)=>n+(Number(a.allocated)||0),0)})]})]})]})}),at.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(S).map(([n,a])=>{if(!a)return null;const o=y[n]||{};return at.jsxs("div",{className:"bg-zinc-900 rounded-xl p-4 border border-zinc-700",children:[at.jsxs("div",{className:"flex items-center justify-between mb-4",children:[at.jsxs("h4",{className:"text-lg font-semibold text-white",children:[n," Phase"]}),"Public"===n&&at.jsxs("div",{className:"group relative",children:[at.jsxs("div",{className:"text-xs text-blue-400 bg-blue-500/10 px-2 py-1 rounded flex items-center gap-1 cursor-help",children:["Auto-configured",at.jsx(I_,{className:"w-3 h-3 text-blue-400"})]}),at.jsxs("div",{className:"absolute bottom-full right-0 mb-2 px-3 py-2 bg-zinc-900 border border-zinc-700 rounded-lg shadow-xl text-xs text-zinc-300 w-64 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-50",children:[at.jsx("div",{className:"font-semibold text-blue-400 mb-1",children:"Auto-configured Public Phase:"}),at.jsxs("div",{className:"space-y-1",children:[at.jsx("div",{children:"• Price: 0.1 STT (default, editable)"}),at.jsx("div",{children:"• Limit: 1 NFT per wallet (default, editable)"}),at.jsx("div",{children:"• Start: Now (UTC) when you enter this menu (editable)"}),at.jsx("div",{children:"• Duration: 3 days (editable)"}),at.jsx("div",{children:"• Allocation: Automatically calculated based on other phases"})]})]})]})]}),at.jsxs("div",{className:"mb-1",children:[at.jsxs("label",{className:"text-xs mr-1",children:["Price (",at.jsx("img",{src:i_,alt:"Somnia",className:"inline w-4 h-4 mx-1"})," STT)"]}),at.jsx("input",{type:"number",step:"0.001",min:"0",value:o.price||"",onChange:a=>handleChange(n,"price",a.target.value),className:"w-full p-1 rounded bg-zinc-800 border border-zinc-600 text-white text-sm "+(d?.isPaused?"opacity-50 cursor-not-allowed":""),disabled:d?.isPaused})]}),at.jsxs("div",{className:"mb-1",children:[at.jsx("label",{className:"text-xs",children:"Limit per Wallet"}),at.jsx("input",{type:"number",min:0,value:o.limit||"",onChange:a=>handleChange(n,"limit",Math.max(0,a.target.value)),className:"w-full p-1 rounded bg-zinc-800 border border-zinc-600 text-white text-sm "+(d?.isPaused?"opacity-50 cursor-not-allowed":""),disabled:d?.isPaused})]}),at.jsxs("div",{className:"flex flex-col gap-1",children:[at.jsxs("div",{className:"flex items-center gap-1",children:[at.jsx("label",{className:"text-xs w-12",children:"Start"}),at.jsx(DateTimePicker,{value:o.start,onChange:a=>handleChange(n,"start",a),disabled:d?.isPaused})]}),at.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[at.jsx("label",{className:"text-xs w-12",children:"End"}),at.jsx(DateTimePicker,{value:o.end,onChange:a=>handleChange(n,"end",a),disabled:d?.isPaused})]}),x[n]&&at.jsxs("div",{className:"mt-1 p-2 bg-yellow-900/20 border border-yellow-500/50 rounded text-xs text-yellow-400",children:[at.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[at.jsx(VT,{size:12}),at.jsx("span",{className:"font-semibold",children:"Time Warning"})]}),at.jsx("p",{className:"text-xs",children:x[n]}),at.jsxs("div",{className:"flex gap-2 mt-1",children:[at.jsx("button",{onClick:()=>{const a=(()=>{const a=getPrevPhaseKey(n);const o=a&&y[a]?.end?new Date(y[a].end):new Date;const i=new Date(o);const u=new Date(o.getTime()+36e5);return{start:i.toISOString(),end:u.toISOString()}})();handleChange(n,"start",a.start);handleChange(n,"end",a.end)},className:"text-xs text-blue-400 hover:underline",children:"Suggest optimal time"}),at.jsx("button",{onClick:()=>N(a=>{const o={...a};delete o[n];return o}),className:"text-xs text-zinc-400 hover:underline",children:"Dismiss"})]})]})]}),at.jsxs("div",{className:"mb-1 mt-1",children:[at.jsx("label",{className:"text-xs",children:"Allocated NFTs"}),at.jsx("input",{type:"number",min:0,max:j,value:o.allocated||"",onChange:a=>handleChange(n,"allocated",a.target.value),className:"w-full p-1 rounded bg-zinc-800 border border-zinc-600 text-white text-sm "+(d?.isPaused||"Public"===n?"opacity-50 cursor-not-allowed":""),disabled:d?.isPaused||"Public"===n,title:"Public"===n?"Public phase allocation is automatically calculated":""})]}),at.jsx("div",{className:"flex items-center justify-between mt-2",children:at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsxs("div",{className:"flex items-center gap-1",children:[at.jsx("span",{className:"text-xs text-zinc-400",children:o.active?"Active":"Inactive"}),o.active&&at.jsx(T_,{className:"w-3 h-3 text-green-400"})]}),at.jsx(bO,{checked:o.active||!1,onChange:a=>handleToggleActivate(n,a,n),disabled:d?.isPaused,className:`${o.active?"bg-green-500":"bg-zinc-600"} relative inline-flex h-5 w-10 items-center rounded-full transition-colors ${d?.isPaused?"opacity-50 cursor-not-allowed":""}`,children:at.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(o.active?"translate-x-5":"translate-x-1")})})]})})]},n)})}),k.visible&&at.jsx("div",{className:"fixed bottom-24 right-4 p-4 rounded-lg shadow-lg max-w-xs animate-fadeIn cursor-pointer hover:opacity-100 opacity-90 z-50 "+("error"===k.type?"bg-red-800 text-white":"info"===k.type?"bg-blue-800 text-white":"bg-zinc-800 text-white"),children:at.jsx("p",{className:"text-sm",children:k.message})})]})};const PhaseSettingsTab=({collection:n})=>{const[a,o]=ot.useState([]);const[i,u]=ot.useState([]);const[d,m]=ot.useState({visible:!1,message:"",type:"success"});const[g,y]=ot.useState({isInitialized:!1,isPaused:!1,isLoading:!1});ot.useEffect(()=>{if(d.visible){const n=setTimeout(()=>m(n=>({...n,visible:!1})),3e3);return()=>clearTimeout(n)}},[d.visible]);const showToast=(n,a="success")=>{m({visible:!0,message:n,type:a})};const checkSaleStatus=async()=>{if(n?.address)try{y(n=>({...n,isLoading:!0}));const o=new fb("https://dream-rpc.somnia.network/");const i=new Ey(n.address,vI,o);let u=!1;let d=!1;try{"function"==typeof i.initialized&&(u=await i.initialized());u&&"function"==typeof i.paused&&(d=await i.paused())}catch(a){console.log("Contract not fully initialized or pause function not available")}y({isInitialized:u,isPaused:d,isLoading:!1})}catch(a){console.error("Error checking sale status:",a);y(n=>({...n,isLoading:!1}))}};const handlePauseSale=async()=>{if(n?.address)try{y(n=>({...n,isLoading:!0}));const a=new mb(window.ethereum);const o=await a.getSigner();const i=new Ey(n.address,vI,o);const u=await i.owner();const d=await o.getAddress();if(u.toLowerCase()!==d.toLowerCase()){showToast("Only the collection owner can pause the sale","error");return}const m=await i.pause();await m.wait();showToast("Sale paused successfully!","success");await checkSaleStatus()}catch(a){console.error("Error pausing sale:",a);showToast(`Error pausing sale: ${a.message}`,"error")}finally{y(n=>({...n,isLoading:!1}))}};const handleResumeSale=async()=>{if(n?.address)try{y(n=>({...n,isLoading:!0}));const a=new mb(window.ethereum);const o=await a.getSigner();const i=new Ey(n.address,vI,o);const u=await i.owner();const d=await o.getAddress();if(u.toLowerCase()!==d.toLowerCase()){showToast("Only the collection owner can resume the sale","error");return}const m=await i.unpause();await m.wait();showToast("Sale resumed successfully!","success");await checkSaleStatus()}catch(a){console.error("Error resuming sale:",a);showToast(`Error resuming sale: ${a.message}`,"error")}finally{y(n=>({...n,isLoading:!1}))}};const loadNFTs=async()=>{if(n?.address)try{const a=JSON.parse(localStorage.getItem(`collection_${n.address}_nfts`))||[];u(a)}catch(a){console.error("Error loading NFTs:",a)}};const loadPhases=async()=>{if(n?.address)try{const a=JSON.parse(localStorage.getItem(`phases_${n.address}`))||{};const i=Object.entries(a);const u=i.map(([n,a])=>({key:n,enumValue:"Whitelist"===n?1:"FCFS"===n?2:3,...a}));console.log("📋 Loaded phases for collection:",n.address,u);o(u)}catch(a){console.error("Error loading phases:",a);o([])}else o([])};ot.useEffect(()=>{if(n?.address){loadNFTs();loadPhases();checkSaleStatus()}},[n?.address]);const handleRemovePhase=n=>{console.log("Removing phase:",n)};const handleActivatePhase=n=>{console.log("Activating phase:",n)};return n?at.jsxs("div",{className:"space-y-6 pb-24",children:[at.jsx("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 p-8 shadow-2xl",children:at.jsx(PhaseSettings,{collectionAddress:n.address,phases:a,onActivatePhase:handleActivatePhase,onRemovePhase:handleRemovePhase,nfts:i,saleStatus:g,onPauseSale:handlePauseSale,onResumeSale:handleResumeSale})}),d.visible&&at.jsx("div",{className:`fixed bottom-4 right-4 p-4 rounded-lg shadow-lg z-50 ${"success"===d.type?"bg-green-500":"error"===d.type?"bg-red-500":"bg-yellow-500"} text-white`,children:d.message})]}):at.jsx("div",{className:"text-center py-8",children:at.jsx("p",{className:"text-zinc-400",children:"No collection selected"})})};var HM={};var qM={};var GM;var VM;function requireBufferReverse(){if(VM)return GM;VM=1;GM=function(n){var a=new Buffer(n.length);for(var o=0,i=n.length-1;o<=i;++o,--i){a[o]=n[i];a[i]=n[o]}return a};return GM}var KM={exports:{}};function commonjsRequire(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ZM={exports:{}};const YM={};const JM=Object.freeze(Object.defineProperty({__proto__:null,default:YM},Symbol.toStringTag,{value:"Module"}));const QM=getAugmentedNamespace(JM);var XM;function requireCore(){if(XM)return ZM.exports;XM=1;!function(n){!function(a,o){n.exports=o()}(0,function(){var n=n||function(n,a){var o;"undefined"!=typeof window&&window.crypto&&(o=window.crypto);"undefined"!=typeof self&&self.crypto&&(o=self.crypto);"undefined"!=typeof globalThis&&globalThis.crypto&&(o=globalThis.crypto);!o&&"undefined"!=typeof window&&window.msCrypto&&(o=window.msCrypto);!o&&"undefined"!=typeof globalThis&&globalThis.crypto&&(o=globalThis.crypto);if(!o&&"function"==typeof commonjsRequire)try{o=QM}catch(rL){}var cryptoSecureRandomInt=function(){if(o){if("function"==typeof o.getRandomValues)try{return o.getRandomValues(new Uint32Array(1))[0]}catch(rL){}if("function"==typeof o.randomBytes)try{return o.randomBytes(4).readInt32LE()}catch(rL){}}throw new Error("Native crypto module could not be used to get secure random number.")};var i=Object.create||function(){function F2(){}return function(n){var a;F2.prototype=n;a=new F2;F2.prototype=null;return a}}();var u={};var d=u.lib={};var m=d.Base=function(){return{extend:function(n){var a=i(this);n&&a.mixIn(n);a.hasOwnProperty("init")&&this.init!==a.init||(a.init=function(){a.$super.init.apply(this,arguments)});a.init.prototype=a;a.$super=this;return a},create:function(){var n=this.extend();n.init.apply(n,arguments);return n},init:function(){},mixIn:function(n){for(var a in n)n.hasOwnProperty(a)&&(this[a]=n[a]);n.hasOwnProperty("toString")&&(this.toString=n.toString)},clone:function(){return this.init.prototype.extend(this)}}}();var g=d.WordArray=m.extend({init:function(n,o){n=this.words=n||[];this.sigBytes=o!=a?o:4*n.length},toString:function(n){return(n||v).stringify(this)},concat:function(n){var a=this.words;var o=n.words;var i=this.sigBytes;var u=n.sigBytes;this.clamp();if(i%4)for(var d=0;d<u;d++){var m=o[d>>>2]>>>24-d%4*8&255;a[i+d>>>2]|=m<<24-(i+d)%4*8}else for(var g=0;g<u;g+=4)a[i+g>>>2]=o[g>>>2];this.sigBytes+=u;return this},clamp:function(){var a=this.words;var o=this.sigBytes;a[o>>>2]&=4294967295<<32-o%4*8;a.length=n.ceil(o/4)},clone:function(){var n=m.clone.call(this);n.words=this.words.slice(0);return n},random:function(n){var a=[];for(var o=0;o<n;o+=4)a.push(cryptoSecureRandomInt());return new g.init(a,n)}});var y=u.enc={};var v=y.Hex={stringify:function(n){var a=n.words;var o=n.sigBytes;var i=[];for(var u=0;u<o;u++){var d=a[u>>>2]>>>24-u%4*8&255;i.push((d>>>4).toString(16));i.push((15&d).toString(16))}return i.join("")},parse:function(n){var a=n.length;var o=[];for(var i=0;i<a;i+=2)o[i>>>3]|=parseInt(n.substr(i,2),16)<<24-i%8*4;return new g.init(o,a/2)}};var x=y.Latin1={stringify:function(n){var a=n.words;var o=n.sigBytes;var i=[];for(var u=0;u<o;u++){var d=a[u>>>2]>>>24-u%4*8&255;i.push(String.fromCharCode(d))}return i.join("")},parse:function(n){var a=n.length;var o=[];for(var i=0;i<a;i++)o[i>>>2]|=(255&n.charCodeAt(i))<<24-i%4*8;return new g.init(o,a)}};var N=y.Utf8={stringify:function(n){try{return decodeURIComponent(escape(x.stringify(n)))}catch(nL){throw new Error("Malformed UTF-8 data")}},parse:function(n){return x.parse(unescape(encodeURIComponent(n)))}};var k=d.BufferedBlockAlgorithm=m.extend({reset:function(){this._data=new g.init;this._nDataBytes=0},_append:function(n){"string"==typeof n&&(n=N.parse(n));this._data.concat(n);this._nDataBytes+=n.sigBytes},_process:function(a){var o;var i=this._data;var u=i.words;var d=i.sigBytes;var m=this.blockSize;var y=4*m;var v=d/y;v=a?n.ceil(v):n.max((0|v)-this._minBufferSize,0);var x=v*m;var N=n.min(4*x,d);if(x){for(var k=0;k<x;k+=m)this._doProcessBlock(u,k);o=u.splice(0,x);i.sigBytes-=N}return new g.init(o,N)},clone:function(){var n=m.clone.call(this);n._data=this._data.clone();return n},_minBufferSize:0});d.Hasher=k.extend({cfg:m.extend(),init:function(n){this.cfg=this.cfg.extend(n);this.reset()},reset:function(){k.reset.call(this);this._doReset()},update:function(n){this._append(n);this._process();return this},finalize:function(n){n&&this._append(n);var a=this._doFinalize();return a},blockSize:16,_createHelper:function(n){return function(a,o){return new n.init(o).finalize(a)}},_createHmacHelper:function(n){return function(a,o){return new E.HMAC.init(n,o).finalize(a)}}});var E=u.algo={};return u}(Math);return n})}(ZM);return ZM.exports}var ez;function requireSha256(){if(ez)return KM.exports;ez=1;!function(n){!function(a,o){n.exports=o(requireCore())}(0,function(n){!function(a){var o=n;var i=o.lib;var u=i.WordArray;var d=i.Hasher;var m=o.algo;var g=[];var y=[];!function(){function isPrime(n){var o=a.sqrt(n);for(var i=2;i<=o;i++)if(!(n%i))return!1;return!0}function getFractionalBits(n){return 4294967296*(n-(0|n))|0}var n=2;var o=0;for(;o<64;){if(isPrime(n)){o<8&&(g[o]=getFractionalBits(a.pow(n,.5)));y[o]=getFractionalBits(a.pow(n,1/3));o++}n++}}();var v=[];var x=m.SHA256=d.extend({_doReset:function(){this._hash=new u.init(g.slice(0))},_doProcessBlock:function(n,a){var o=this._hash.words;var i=o[0];var u=o[1];var d=o[2];var m=o[3];var g=o[4];var x=o[5];var N=o[6];var k=o[7];for(var E=0;E<64;E++){if(E<16)v[E]=0|n[a+E];else{var S=v[E-15];var A=(S<<25|S>>>7)^(S<<14|S>>>18)^S>>>3;var _=v[E-2];var j=(_<<15|_>>>17)^(_<<13|_>>>19)^_>>>10;v[E]=A+v[E-7]+j+v[E-16]}var I=g&x^~g&N;var O=i&u^i&d^u&d;var R=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22);var B=(g<<26|g>>>6)^(g<<21|g>>>11)^(g<<7|g>>>25);var M=k+B+I+y[E]+v[E];var z=R+O;k=N;N=x;x=g;g=m+M|0;m=d;d=u;u=i;i=M+z|0}o[0]=o[0]+i|0;o[1]=o[1]+u|0;o[2]=o[2]+d|0;o[3]=o[3]+m|0;o[4]=o[4]+g|0;o[5]=o[5]+x|0;o[6]=o[6]+N|0;o[7]=o[7]+k|0},_doFinalize:function(){var n=this._data;var o=n.words;var i=8*this._nDataBytes;var u=8*n.sigBytes;o[u>>>5]|=128<<24-u%32;o[14+(u+64>>>9<<4)]=a.floor(i/4294967296);o[15+(u+64>>>9<<4)]=i;n.sigBytes=4*o.length;this._process();return this._hash},clone:function(){var n=d.clone.call(this);n._hash=this._hash.clone();return n}});o.SHA256=d._createHelper(x);o.HmacSHA256=d._createHmacHelper(x)}(Math);return n.SHA256})}(KM);return KM.exports}var tz={exports:{}};var nz;function requireTreeify(){if(nz)return tz.exports;nz=1;!function(n){!function(a,o){n.exports=o()}(0,function(){function makePrefix(n,a){var o=a?"└":"├";o+=n?"─ ":"──┐";return o}function filterKeys(n,a){var o=[];for(var i in n)n.hasOwnProperty(i)&&(a&&"function"==typeof n[i]||o.push(i));return o}function growBranch(n,a,o,i,u,d,m){var g,y,v="",x=0,N=i.slice(0);if(N.push([a,o])&&i.length>0){i.forEach(function(n,o){o>0&&(v+=(n[1]?" ":"│")+"  ");y||n[0]!==a||(y=!0)});v+=makePrefix(n,o)+n;u&&("object"!=typeof a||a instanceof Date)&&(v+=": "+a);y&&(v+=" (circular ref.)");m(v)}if(!y&&"object"==typeof a){var k=filterKeys(a,d);k.forEach(function(n){g=++x===k.length;growBranch(n,a[n],g,N,u,d,m)})}}var n={};n.asLines=function(n,a,o,i){var u="function"!=typeof o&&o;growBranch(".",n,!1,[],a,u,i||o)};n.asTree=function(n,a,o){var i="";growBranch(".",n,!1,[],a,o,function(n){i+=n+"\n"});return i};return n})}(tz);return tz.exports}var rz={};var sz={exports:{}};var az={exports:{}};var oz;function requireX64Core(){if(oz)return az.exports;oz=1;!function(n){!function(a,o){n.exports=o(requireCore())}(0,function(n){!function(a){var o=n;var i=o.lib;var u=i.Base;var d=i.WordArray;var m=o.x64={};m.Word=u.extend({init:function(n,a){this.high=n;this.low=a}});m.WordArray=u.extend({init:function(n,o){n=this.words=n||[];this.sigBytes=o!=a?o:8*n.length},toX32:function(){var n=this.words;var a=n.length;var o=[];for(var i=0;i<a;i++){var u=n[i];o.push(u.high);o.push(u.low)}return d.create(o,this.sigBytes)},clone:function(){var n=u.clone.call(this);var a=n.words=this.words.slice(0);var o=a.length;for(var i=0;i<o;i++)a[i]=a[i].clone();return n}})}();return n})}(az);return az.exports}var iz={exports:{}};var cz;function requireLibTypedarrays(){if(cz)return iz.exports;cz=1;!function(n){!function(a,o){n.exports=o(requireCore())}(0,function(n){!function(){if("function"==typeof ArrayBuffer){var a=n;var o=a.lib;var i=o.WordArray;var u=i.init;var d=i.init=function(n){n instanceof ArrayBuffer&&(n=new Uint8Array(n));(n instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&n instanceof Uint8ClampedArray||n instanceof Int16Array||n instanceof Uint16Array||n instanceof Int32Array||n instanceof Uint32Array||n instanceof Float32Array||n instanceof Float64Array)&&(n=new Uint8Array(n.buffer,n.byteOffset,n.byteLength));if(n instanceof Uint8Array){var a=n.byteLength;var o=[];for(var i=0;i<a;i++)o[i>>>2]|=n[i]<<24-i%4*8;u.call(this,o,a)}else u.apply(this,arguments)};d.prototype=i}}();return n.lib.WordArray})}(iz);return iz.exports}var lz={exports:{}};var uz;function requireEncUtf16(){if(uz)return lz.exports;uz=1;!function(n){!function(a,o){n.exports=o(requireCore())}(0,function(n){!function(){var a=n;var o=a.lib;var i=o.WordArray;var u=a.enc;u.Utf16=u.Utf16BE={stringify:function(n){var a=n.words;var o=n.sigBytes;var i=[];for(var u=0;u<o;u+=2){var d=a[u>>>2]>>>16-u%4*8&65535;i.push(String.fromCharCode(d))}return i.join("")},parse:function(n){var a=n.length;var o=[];for(var u=0;u<a;u++)o[u>>>1]|=n.charCodeAt(u)<<16-u%2*16;return i.create(o,2*a)}};u.Utf16LE={stringify:function(n){var a=n.words;var o=n.sigBytes;var i=[];for(var u=0;u<o;u+=2){var d=swapEndian(a[u>>>2]>>>16-u%4*8&65535);i.push(String.fromCharCode(d))}return i.join("")},parse:function(n){var a=n.length;var o=[];for(var u=0;u<a;u++)o[u>>>1]|=swapEndian(n.charCodeAt(u)<<16-u%2*16);return i.create(o,2*a)}};function swapEndian(n){return n<<8&4278255360|n>>>8&16711935}}();return n.enc.Utf16})}(lz);return lz.exports}var dz={exports:{}};var hz;function requireEncBase64(){if(hz)return dz.exports;hz=1;!function(n){!function(a,o){n.exports=o(requireCore())}(0,function(n){!function(){var a=n;var o=a.lib;var i=o.WordArray;var u=a.enc;u.Base64={stringify:function(n){var a=n.words;var o=n.sigBytes;var i=this._map;n.clamp();var u=[];for(var d=0;d<o;d+=3){var m=a[d>>>2]>>>24-d%4*8&255;var g=a[d+1>>>2]>>>24-(d+1)%4*8&255;var y=a[d+2>>>2]>>>24-(d+2)%4*8&255;var v=m<<16|g<<8|y;for(var x=0;x<4&&d+.75*x<o;x++)u.push(i.charAt(v>>>6*(3-x)&63))}var N=i.charAt(64);if(N)for(;u.length%4;)u.push(N);return u.join("")},parse:function(n){var a=n.length;var o=this._map;var i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var u=0;u<o.length;u++)i[o.charCodeAt(u)]=u}var d=o.charAt(64);if(d){var m=n.indexOf(d);-1!==m&&(a=m)}return parseLoop(n,a,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function parseLoop(n,a,o){var u=[];var d=0;for(var m=0;m<a;m++)if(m%4){var g=o[n.charCodeAt(m-1)]<<m%4*2;var y=o[n.charCodeAt(m)]>>>6-m%4*2;var v=g|y;u[d>>>2]|=v<<24-d%4*8;d++}return i.create(u,d)}}();return n.enc.Base64})}(dz);return dz.exports}var fz={exports:{}};var pz;function requireEncBase64url(){if(pz)return fz.exports;pz=1;!function(n){!function(a,o){n.exports=o(requireCore())}(0,function(n){!function(){var a=n;var o=a.lib;var i=o.WordArray;var u=a.enc;u.Base64url={stringify:function(n,a){void 0===a&&(a=!0);var o=n.words;var i=n.sigBytes;var u=a?this._safe_map:this._map;n.clamp();var d=[];for(var m=0;m<i;m+=3){var g=o[m>>>2]>>>24-m%4*8&255;var y=o[m+1>>>2]>>>24-(m+1)%4*8&255;var v=o[m+2>>>2]>>>24-(m+2)%4*8&255;var x=g<<16|y<<8|v;for(var N=0;N<4&&m+.75*N<i;N++)d.push(u.charAt(x>>>6*(3-N)&63))}var k=u.charAt(64);if(k)for(;d.length%4;)d.push(k);return d.join("")},parse:function(n,a){void 0===a&&(a=!0);var o=n.length;var i=a?this._safe_map:this._map;var u=this._reverseMap;if(!u){u=this._reverseMap=[];for(var d=0;d<i.length;d++)u[i.charCodeAt(d)]=d}var m=i.charAt(64);if(m){var g=n.indexOf(m);-1!==g&&(o=g)}return parseLoop(n,o,u)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function parseLoop(n,a,o){var u=[];var d=0;for(var m=0;m<a;m++)if(m%4){var g=o[n.charCodeAt(m-1)]<<m%4*2;var y=o[n.charCodeAt(m)]>>>6-m%4*2;var v=g|y;u[d>>>2]|=v<<24-d%4*8;d++}return i.create(u,d)}}();return n.enc.Base64url})}(fz);return fz.exports}var mz={exports:{}};var gz;function requireMd5(){if(gz)return mz.exports;gz=1;!function(n){!function(a,o){n.exports=o(requireCore())}(0,function(n){!function(a){var o=n;var i=o.lib;var u=i.WordArray;var d=i.Hasher;var m=o.algo;var g=[];!function(){for(var n=0;n<64;n++)g[n]=4294967296*a.abs(a.sin(n+1))|0}();var y=m.MD5=d.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(n,a){for(var o=0;o<16;o++){var i=a+o;var u=n[i];n[i]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var d=this._hash.words;var m=n[a+0];var y=n[a+1];var v=n[a+2];var x=n[a+3];var N=n[a+4];var k=n[a+5];var E=n[a+6];var S=n[a+7];var A=n[a+8];var _=n[a+9];var j=n[a+10];var I=n[a+11];var O=n[a+12];var R=n[a+13];var B=n[a+14];var M=n[a+15];var z=d[0];var L=d[1];var D=d[2];var W=d[3];z=FF(z,L,D,W,m,7,g[0]);W=FF(W,z,L,D,y,12,g[1]);D=FF(D,W,z,L,v,17,g[2]);L=FF(L,D,W,z,x,22,g[3]);z=FF(z,L,D,W,N,7,g[4]);W=FF(W,z,L,D,k,12,g[5]);D=FF(D,W,z,L,E,17,g[6]);L=FF(L,D,W,z,S,22,g[7]);z=FF(z,L,D,W,A,7,g[8]);W=FF(W,z,L,D,_,12,g[9]);D=FF(D,W,z,L,j,17,g[10]);L=FF(L,D,W,z,I,22,g[11]);z=FF(z,L,D,W,O,7,g[12]);W=FF(W,z,L,D,R,12,g[13]);D=FF(D,W,z,L,B,17,g[14]);L=FF(L,D,W,z,M,22,g[15]);z=GG(z,L,D,W,y,5,g[16]);W=GG(W,z,L,D,E,9,g[17]);D=GG(D,W,z,L,I,14,g[18]);L=GG(L,D,W,z,m,20,g[19]);z=GG(z,L,D,W,k,5,g[20]);W=GG(W,z,L,D,j,9,g[21]);D=GG(D,W,z,L,M,14,g[22]);L=GG(L,D,W,z,N,20,g[23]);z=GG(z,L,D,W,_,5,g[24]);W=GG(W,z,L,D,B,9,g[25]);D=GG(D,W,z,L,x,14,g[26]);L=GG(L,D,W,z,A,20,g[27]);z=GG(z,L,D,W,R,5,g[28]);W=GG(W,z,L,D,v,9,g[29]);D=GG(D,W,z,L,S,14,g[30]);L=GG(L,D,W,z,O,20,g[31]);z=HH(z,L,D,W,k,4,g[32]);W=HH(W,z,L,D,A,11,g[33]);D=HH(D,W,z,L,I,16,g[34]);L=HH(L,D,W,z,B,23,g[35]);z=HH(z,L,D,W,y,4,g[36]);W=HH(W,z,L,D,N,11,g[37]);D=HH(D,W,z,L,S,16,g[38]);L=HH(L,D,W,z,j,23,g[39]);z=HH(z,L,D,W,R,4,g[40]);W=HH(W,z,L,D,m,11,g[41]);D=HH(D,W,z,L,x,16,g[42]);L=HH(L,D,W,z,E,23,g[43]);z=HH(z,L,D,W,_,4,g[44]);W=HH(W,z,L,D,O,11,g[45]);D=HH(D,W,z,L,M,16,g[46]);L=HH(L,D,W,z,v,23,g[47]);z=II(z,L,D,W,m,6,g[48]);W=II(W,z,L,D,S,10,g[49]);D=II(D,W,z,L,B,15,g[50]);L=II(L,D,W,z,k,21,g[51]);z=II(z,L,D,W,O,6,g[52]);W=II(W,z,L,D,x,10,g[53]);D=II(D,W,z,L,j,15,g[54]);L=II(L,D,W,z,y,21,g[55]);z=II(z,L,D,W,A,6,g[56]);W=II(W,z,L,D,M,10,g[57]);D=II(D,W,z,L,E,15,g[58]);L=II(L,D,W,z,R,21,g[59]);z=II(z,L,D,W,N,6,g[60]);W=II(W,z,L,D,I,10,g[61]);D=II(D,W,z,L,v,15,g[62]);L=II(L,D,W,z,_,21,g[63]);d[0]=d[0]+z|0;d[1]=d[1]+L|0;d[2]=d[2]+D|0;d[3]=d[3]+W|0},_doFinalize:function(){var n=this._data;var o=n.words;var i=8*this._nDataBytes;var u=8*n.sigBytes;o[u>>>5]|=128<<24-u%32;var d=a.floor(i/4294967296);var m=i;o[15+(u+64>>>9<<4)]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8);o[14+(u+64>>>9<<4)]=16711935&(m<<8|m>>>24)|4278255360&(m<<24|m>>>8);n.sigBytes=4*(o.length+1);this._process();var g=this._hash;var y=g.words;for(var v=0;v<4;v++){var x=y[v];y[v]=16711935&(x<<8|x>>>24)|4278255360&(x<<24|x>>>8)}return g},clone:function(){var n=d.clone.call(this);n._hash=this._hash.clone();return n}});function FF(n,a,o,i,u,d,m){var g=n+(a&o|~a&i)+u+m;return(g<<d|g>>>32-d)+a}function GG(n,a,o,i,u,d,m){var g=n+(a&i|o&~i)+u+m;return(g<<d|g>>>32-d)+a}function HH(n,a,o,i,u,d,m){var g=n+(a^o^i)+u+m;return(g<<d|g>>>32-d)+a}function II(n,a,o,i,u,d,m){var g=n+(o^(a|~i))+u+m;return(g<<d|g>>>32-d)+a}o.MD5=d._createHelper(y);o.HmacMD5=d._createHmacHelper(y)}(Math);return n.MD5})}(mz);return mz.exports}var yz={exports:{}};var bz;function requireSha1(){if(bz)return yz.exports;bz=1;!function(n){!function(a,o){n.exports=o(requireCore())}(0,function(n){!function(){var a=n;var o=a.lib;var i=o.WordArray;var u=o.Hasher;var d=a.algo;var m=[];var g=d.SHA1=u.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(n,a){var o=this._hash.words;var i=o[0];var u=o[1];var d=o[2];var g=o[3];var y=o[4];for(var v=0;v<80;v++){if(v<16)m[v]=0|n[a+v];else{var x=m[v-3]^m[v-8]^m[v-14]^m[v-16];m[v]=x<<1|x>>>31}var N=(i<<5|i>>>27)+y+m[v];N+=v<20?1518500249+(u&d|~u&g):v<40?1859775393+(u^d^g):v<60?(u&d|u&g|d&g)-1894007588:(u^d^g)-899497514;y=g;g=d;d=u<<30|u>>>2;u=i;i=N}o[0]=o[0]+i|0;o[1]=o[1]+u|0;o[2]=o[2]+d|0;o[3]=o[3]+g|0;o[4]=o[4]+y|0},_doFinalize:function(){var n=this._data;var a=n.words;var o=8*this._nDataBytes;var i=8*n.sigBytes;a[i>>>5]|=128<<24-i%32;a[14+(i+64>>>9<<4)]=Math.floor(o/4294967296);a[15+(i+64>>>9<<4)]=o;n.sigBytes=4*a.length;this._process();return this._hash},clone:function(){var n=u.clone.call(this);n._hash=this._hash.clone();return n}});a.SHA1=u._createHelper(g);a.HmacSHA1=u._createHmacHelper(g)}();return n.SHA1})}(yz);return yz.exports}var vz={exports:{}};var wz;function requireSha224(){if(wz)return vz.exports;wz=1;!function(n){!function(a,o){n.exports=o(requireCore(),requireSha256())}(0,function(n){!function(){var a=n;var o=a.lib;var i=o.WordArray;var u=a.algo;var d=u.SHA256;var m=u.SHA224=d.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var n=d._doFinalize.call(this);n.sigBytes-=4;return n}});a.SHA224=d._createHelper(m);a.HmacSHA224=d._createHmacHelper(m)}();return n.SHA224})}(vz);return vz.exports}var xz={exports:{}};var Nz;function requireSha512(){if(Nz)return xz.exports;Nz=1;!function(n){!function(a,o){n.exports=o(requireCore(),requireX64Core())}(0,function(n){!function(){var a=n;var o=a.lib;var i=o.Hasher;var u=a.x64;var d=u.Word;var m=u.WordArray;var g=a.algo;function X64Word_create(){return d.create.apply(d,arguments)}var y=[X64Word_create(1116352408,3609767458),X64Word_create(1899447441,602891725),X64Word_create(3049323471,3964484399),X64Word_create(3921009573,2173295548),X64Word_create(961987163,4081628472),X64Word_create(1508970993,3053834265),X64Word_create(2453635748,2937671579),X64Word_create(2870763221,3664609560),X64Word_create(3624381080,2734883394),X64Word_create(310598401,1164996542),X64Word_create(607225278,1323610764),X64Word_create(1426881987,3590304994),X64Word_create(1925078388,4068182383),X64Word_create(2162078206,991336113),X64Word_create(2614888103,633803317),X64Word_create(3248222580,3479774868),X64Word_create(3835390401,2666613458),X64Word_create(4022224774,944711139),X64Word_create(264347078,2341262773),X64Word_create(604807628,2007800933),X64Word_create(770255983,1495990901),X64Word_create(1249150122,1856431235),X64Word_create(1555081692,3175218132),X64Word_create(1996064986,2198950837),X64Word_create(2554220882,3999719339),X64Word_create(2821834349,766784016),X64Word_create(2952996808,2566594879),X64Word_create(3210313671,3203337956),X64Word_create(3336571891,1034457026),X64Word_create(3584528711,2466948901),X64Word_create(113926993,3758326383),X64Word_create(338241895,168717936),X64Word_create(666307205,1188179964),X64Word_create(773529912,1546045734),X64Word_create(1294757372,1522805485),X64Word_create(1396182291,2643833823),X64Word_create(1695183700,2343527390),X64Word_create(1986661051,1014477480),X64Word_create(2177026350,1206759142),X64Word_create(2456956037,344077627),X64Word_create(2730485921,1290863460),X64Word_create(2820302411,3158454273),X64Word_create(3259730800,3505952657),X64Word_create(3345764771,106217008),X64Word_create(3516065817,3606008344),X64Word_create(3600352804,1432725776),X64Word_create(4094571909,1467031594),X64Word_create(275423344,851169720),X64Word_create(430227734,3100823752),X64Word_create(506948616,1363258195),X64Word_create(659060556,3750685593),X64Word_create(883997877,3785050280),X64Word_create(958139571,3318307427),X64Word_create(1322822218,3812723403),X64Word_create(1537002063,2003034995),X64Word_create(1747873779,3602036899),X64Word_create(1955562222,1575990012),X64Word_create(2024104815,1125592928),X64Word_create(2227730452,2716904306),X64Word_create(2361852424,442776044),X64Word_create(2428436474,593698344),X64Word_create(2756734187,3733110249),X64Word_create(3204031479,2999351573),X64Word_create(3329325298,3815920427),X64Word_create(3391569614,3928383900),X64Word_create(3515267271,566280711),X64Word_create(3940187606,3454069534),X64Word_create(4118630271,4000239992),X64Word_create(116418474,1914138554),X64Word_create(174292421,2731055270),X64Word_create(289380356,3203993006),X64Word_create(460393269,320620315),X64Word_create(685471733,587496836),X64Word_create(852142971,1086792851),X64Word_create(1017036298,365543100),X64Word_create(1126000580,2618297676),X64Word_create(1288033470,3409855158),X64Word_create(1501505948,4234509866),X64Word_create(1607167915,987167468),X64Word_create(1816402316,1246189591)];var v=[];!function(){for(var n=0;n<80;n++)v[n]=X64Word_create()}();var x=g.SHA512=i.extend({_doReset:function(){this._hash=new m.init([new d.init(1779033703,4089235720),new d.init(3144134277,2227873595),new d.init(1013904242,4271175723),new d.init(2773480762,1595750129),new d.init(1359893119,2917565137),new d.init(2600822924,725511199),new d.init(528734635,4215389547),new d.init(1541459225,327033209)])},_doProcessBlock:function(n,a){var o=this._hash.words;var i=o[0];var u=o[1];var d=o[2];var m=o[3];var g=o[4];var x=o[5];var N=o[6];var k=o[7];var E=i.high;var S=i.low;var A=u.high;var _=u.low;var j=d.high;var I=d.low;var O=m.high;var R=m.low;var B=g.high;var M=g.low;var z=x.high;var L=x.low;var D=N.high;var W=N.low;var H=k.high;var q=k.low;var G=E;var V=S;var Z=A;var Y=_;var J=j;var X=I;var ee=O;var te=R;var ne=B;var re=M;var se=z;var ae=L;var oe=D;var ie=W;var ce=H;var le=q;for(var ue=0;ue<80;ue++){var de;var he;var fe=v[ue];if(ue<16){he=fe.high=0|n[a+2*ue];de=fe.low=0|n[a+2*ue+1]}else{var pe=v[ue-15];var me=pe.high;var ge=pe.low;var ye=(me>>>1|ge<<31)^(me>>>8|ge<<24)^me>>>7;var be=(ge>>>1|me<<31)^(ge>>>8|me<<24)^(ge>>>7|me<<25);var we=v[ue-2];var xe=we.high;var Ne=we.low;var ke=(xe>>>19|Ne<<13)^(xe<<3|Ne>>>29)^xe>>>6;var Ee=(Ne>>>19|xe<<13)^(Ne<<3|xe>>>29)^(Ne>>>6|xe<<26);var Se=v[ue-7];var Ae=Se.high;var _e=Se.low;var Te=v[ue-16];var je=Te.high;var Ie=Te.low;de=be+_e;he=ye+Ae+(de>>>0<be>>>0?1:0);de+=Ee;he=he+ke+(de>>>0<Ee>>>0?1:0);de+=Ie;he=he+je+(de>>>0<Ie>>>0?1:0);fe.high=he;fe.low=de}var Pe=ne&se^~ne&oe;var Oe=re&ae^~re&ie;var Re=G&Z^G&J^Z&J;var Be=V&Y^V&X^Y&X;var Me=(G>>>28|V<<4)^(G<<30|V>>>2)^(G<<25|V>>>7);var ze=(V>>>28|G<<4)^(V<<30|G>>>2)^(V<<25|G>>>7);var Fe=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9);var Le=(re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9);var De=y[ue];var $e=De.high;var Ue=De.low;var We=le+Le;var He=ce+Fe+(We>>>0<le>>>0?1:0);We+=Oe;He=He+Pe+(We>>>0<Oe>>>0?1:0);We+=Ue;He=He+$e+(We>>>0<Ue>>>0?1:0);We+=de;He=He+he+(We>>>0<de>>>0?1:0);var qe=ze+Be;var Ge=Me+Re+(qe>>>0<ze>>>0?1:0);ce=oe;le=ie;oe=se;ie=ae;se=ne;ae=re;re=te+We|0;ne=ee+He+(re>>>0<te>>>0?1:0)|0;ee=J;te=X;J=Z;X=Y;Z=G;Y=V;V=We+qe|0;G=He+Ge+(V>>>0<We>>>0?1:0)|0}S=i.low=S+V;i.high=E+G+(S>>>0<V>>>0?1:0);_=u.low=_+Y;u.high=A+Z+(_>>>0<Y>>>0?1:0);I=d.low=I+X;d.high=j+J+(I>>>0<X>>>0?1:0);R=m.low=R+te;m.high=O+ee+(R>>>0<te>>>0?1:0);M=g.low=M+re;g.high=B+ne+(M>>>0<re>>>0?1:0);L=x.low=L+ae;x.high=z+se+(L>>>0<ae>>>0?1:0);W=N.low=W+ie;N.high=D+oe+(W>>>0<ie>>>0?1:0);q=k.low=q+le;k.high=H+ce+(q>>>0<le>>>0?1:0)},_doFinalize:function(){var n=this._data;var a=n.words;var o=8*this._nDataBytes;var i=8*n.sigBytes;a[i>>>5]|=128<<24-i%32;a[30+(i+128>>>10<<5)]=Math.floor(o/4294967296);a[31+(i+128>>>10<<5)]=o;n.sigBytes=4*a.length;this._process();var u=this._hash.toX32();return u},clone:function(){var n=i.clone.call(this);n._hash=this._hash.clone();return n},blockSize:32});a.SHA512=i._createHelper(x);a.HmacSHA512=i._createHmacHelper(x)}();return n.SHA512})}(xz);return xz.exports}var kz={exports:{}};var Cz;function requireSha384(){if(Cz)return kz.exports;Cz=1;!function(n){!function(a,o){n.exports=o(requireCore(),requireX64Core(),requireSha512())}(0,function(n){!function(){var a=n;var o=a.x64;var i=o.Word;var u=o.WordArray;var d=a.algo;var m=d.SHA512;var g=d.SHA384=m.extend({_doReset:function(){this._hash=new u.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var n=m._doFinalize.call(this);n.sigBytes-=16;return n}});a.SHA384=m._createHelper(g);a.HmacSHA384=m._createHmacHelper(g)}();return n.SHA384})}(kz);return kz.exports}var Ez={exports:{}};var Sz;function requireSha3(){if(Sz)return Ez.exports;Sz=1;!function(n){!function(a,o){n.exports=o(requireCore(),requireX64Core())}(0,function(n){!function(a){var o=n;var i=o.lib;var u=i.WordArray;var d=i.Hasher;var m=o.x64;var g=m.Word;var y=o.algo;var v=[];var x=[];var N=[];!function(){var n=1,a=0;for(var o=0;o<24;o++){v[n+5*a]=(o+1)*(o+2)/2%64;var i=a%5;var u=(2*n+3*a)%5;n=i;a=u}for(n=0;n<5;n++)for(a=0;a<5;a++)x[n+5*a]=a+(2*n+3*a)%5*5;var d=1;for(var m=0;m<24;m++){var y=0;var k=0;for(var E=0;E<7;E++){if(1&d){var S=(1<<E)-1;S<32?k^=1<<S:y^=1<<S-32}128&d?d=d<<1^113:d<<=1}N[m]=g.create(y,k)}}();var k=[];!function(){for(var n=0;n<25;n++)k[n]=g.create()}();var E=y.SHA3=d.extend({cfg:d.cfg.extend({outputLength:512}),_doReset:function(){var n=this._state=[];for(var a=0;a<25;a++)n[a]=new g.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(n,a){var o=this._state;var i=this.blockSize/2;for(var u=0;u<i;u++){var d=n[a+2*u];var m=n[a+2*u+1];d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8);m=16711935&(m<<8|m>>>24)|4278255360&(m<<24|m>>>8);var g=o[u];g.high^=m;g.low^=d}for(var y=0;y<24;y++){for(var E=0;E<5;E++){var S=0,A=0;for(var _=0;_<5;_++){g=o[E+5*_];S^=g.high;A^=g.low}var j=k[E];j.high=S;j.low=A}for(E=0;E<5;E++){var I=k[(E+4)%5];var O=k[(E+1)%5];var R=O.high;var B=O.low;S=I.high^(R<<1|B>>>31);A=I.low^(B<<1|R>>>31);for(_=0;_<5;_++){g=o[E+5*_];g.high^=S;g.low^=A}}for(var M=1;M<25;M++){g=o[M];var z=g.high;var L=g.low;var D=v[M];if(D<32){S=z<<D|L>>>32-D;A=L<<D|z>>>32-D}else{S=L<<D-32|z>>>64-D;A=z<<D-32|L>>>64-D}var W=k[x[M]];W.high=S;W.low=A}var H=k[0];var q=o[0];H.high=q.high;H.low=q.low;for(E=0;E<5;E++)for(_=0;_<5;_++){M=E+5*_;g=o[M];var G=k[M];var V=k[(E+1)%5+5*_];var Z=k[(E+2)%5+5*_];g.high=G.high^~V.high&Z.high;g.low=G.low^~V.low&Z.low}g=o[0];var Y=N[y];g.high^=Y.high;g.low^=Y.low}},_doFinalize:function(){var n=this._data;var o=n.words;8*this._nDataBytes;var i=8*n.sigBytes;var d=32*this.blockSize;o[i>>>5]|=1<<24-i%32;o[(a.ceil((i+1)/d)*d>>>5)-1]|=128;n.sigBytes=4*o.length;this._process();var m=this._state;var g=this.cfg.outputLength/8;var y=g/8;var v=[];for(var x=0;x<y;x++){var N=m[x];var k=N.high;var E=N.low;k=16711935&(k<<8|k>>>24)|4278255360&(k<<24|k>>>8);E=16711935&(E<<8|E>>>24)|4278255360&(E<<24|E>>>8);v.push(E);v.push(k)}return new u.init(v,g)},clone:function(){var n=d.clone.call(this);var a=n._state=this._state.slice(0);for(var o=0;o<25;o++)a[o]=a[o].clone();return n}});o.SHA3=d._createHelper(E);o.HmacSHA3=d._createHmacHelper(E)}(Math);return n.SHA3})}(Ez);return Ez.exports}var Az={exports:{}};var _z;function requireRipemd160(){if(_z)return Az.exports;_z=1;!function(n){!function(a,o){n.exports=o(requireCore())}(0,function(n){
/** @preserve
            			(c) 2012 by Cédric Mesnil. All rights reserved.
            
            			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
            
            			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
            			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
            
            			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
            			*/
!function(){var a=n;var o=a.lib;var i=o.WordArray;var u=o.Hasher;var d=a.algo;var m=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]);var g=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]);var y=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]);var v=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]);var x=i.create([0,1518500249,1859775393,2400959708,2840853838]);var N=i.create([1352829926,1548603684,1836072691,2053994217,0]);var k=d.RIPEMD160=u.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(n,a){for(var o=0;o<16;o++){var i=a+o;var u=n[i];n[i]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var d=this._hash.words;var k=x.words;var E=N.words;var S=m.words;var A=g.words;var _=y.words;var j=v.words;var I,O,R,B,M;var z,L,D,W,H;z=I=d[0];L=O=d[1];D=R=d[2];W=B=d[3];H=M=d[4];var q;for(o=0;o<80;o+=1){q=I+n[a+S[o]]|0;q+=o<16?f1(O,R,B)+k[0]:o<32?f2(O,R,B)+k[1]:o<48?f3(O,R,B)+k[2]:o<64?f4(O,R,B)+k[3]:f5(O,R,B)+k[4];q|=0;q=rotl(q,_[o]);q=q+M|0;I=M;M=B;B=rotl(R,10);R=O;O=q;q=z+n[a+A[o]]|0;q+=o<16?f5(L,D,W)+E[0]:o<32?f4(L,D,W)+E[1]:o<48?f3(L,D,W)+E[2]:o<64?f2(L,D,W)+E[3]:f1(L,D,W)+E[4];q|=0;q=rotl(q,j[o]);q=q+H|0;z=H;H=W;W=rotl(D,10);D=L;L=q}q=d[1]+R+W|0;d[1]=d[2]+B+H|0;d[2]=d[3]+M+z|0;d[3]=d[4]+I+L|0;d[4]=d[0]+O+D|0;d[0]=q},_doFinalize:function(){var n=this._data;var a=n.words;var o=8*this._nDataBytes;var i=8*n.sigBytes;a[i>>>5]|=128<<24-i%32;a[14+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);n.sigBytes=4*(a.length+1);this._process();var u=this._hash;var d=u.words;for(var m=0;m<5;m++){var g=d[m];d[m]=16711935&(g<<8|g>>>24)|4278255360&(g<<24|g>>>8)}return u},clone:function(){var n=u.clone.call(this);n._hash=this._hash.clone();return n}});function f1(n,a,o){return n^a^o}function f2(n,a,o){return n&a|~n&o}function f3(n,a,o){return(n|~a)^o}function f4(n,a,o){return n&o|a&~o}function f5(n,a,o){return n^(a|~o)}function rotl(n,a){return n<<a|n>>>32-a}a.RIPEMD160=u._createHelper(k);a.HmacRIPEMD160=u._createHmacHelper(k)}();return n.RIPEMD160})}(Az);return Az.exports}var Tz={exports:{}};var jz;function requireHmac(){if(jz)return Tz.exports;jz=1;!function(n){!function(a,o){n.exports=o(requireCore())}(0,function(n){!function(){var a=n;var o=a.lib;var i=o.Base;var u=a.enc;var d=u.Utf8;var m=a.algo;m.HMAC=i.extend({init:function(n,a){n=this._hasher=new n.init;"string"==typeof a&&(a=d.parse(a));var o=n.blockSize;var i=4*o;a.sigBytes>i&&(a=n.finalize(a));a.clamp();var u=this._oKey=a.clone();var m=this._iKey=a.clone();var g=u.words;var y=m.words;for(var v=0;v<o;v++){g[v]^=1549556828;y[v]^=909522486}u.sigBytes=m.sigBytes=i;this.reset()},reset:function(){var n=this._hasher;n.reset();n.update(this._iKey)},update:function(n){this._hasher.update(n);return this},finalize:function(n){var a=this._hasher;var o=a.finalize(n);a.reset();var i=a.finalize(this._oKey.clone().concat(o));return i}})}()})}(Tz);return Tz.exports}var Iz={exports:{}};var Pz;function requirePbkdf2(){if(Pz)return Iz.exports;Pz=1;!function(n){!function(a,o){n.exports=o(requireCore(),requireSha256(),requireHmac())}(0,function(n){!function(){var a=n;var o=a.lib;var i=o.Base;var u=o.WordArray;var d=a.algo;var m=d.SHA256;var g=d.HMAC;var y=d.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:m,iterations:25e4}),init:function(n){this.cfg=this.cfg.extend(n)},compute:function(n,a){var o=this.cfg;var i=g.create(o.hasher,n);var d=u.create();var m=u.create([1]);var y=d.words;var v=m.words;var x=o.keySize;var N=o.iterations;for(;y.length<x;){var k=i.update(a).finalize(m);i.reset();var E=k.words;var S=E.length;var A=k;for(var _=1;_<N;_++){A=i.finalize(A);i.reset();var j=A.words;for(var I=0;I<S;I++)E[I]^=j[I]}d.concat(k);v[0]++}d.sigBytes=4*x;return d}});a.PBKDF2=function(n,a,o){return y.create(o).compute(n,a)}}();return n.PBKDF2})}(Iz);return Iz.exports}var Oz={exports:{}};var Rz;function requireEvpkdf(){if(Rz)return Oz.exports;Rz=1;!function(n){!function(a,o){n.exports=o(requireCore(),requireSha1(),requireHmac())}(0,function(n){!function(){var a=n;var o=a.lib;var i=o.Base;var u=o.WordArray;var d=a.algo;var m=d.MD5;var g=d.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:m,iterations:1}),init:function(n){this.cfg=this.cfg.extend(n)},compute:function(n,a){var o;var i=this.cfg;var d=i.hasher.create();var m=u.create();var g=m.words;var y=i.keySize;var v=i.iterations;for(;g.length<y;){o&&d.update(o);o=d.update(n).finalize(a);d.reset();for(var x=1;x<v;x++){o=d.finalize(o);d.reset()}m.concat(o)}m.sigBytes=4*y;return m}});a.EvpKDF=function(n,a,o){return g.create(o).compute(n,a)}}();return n.EvpKDF})}(Oz);return Oz.exports}var Bz={exports:{}};var Mz;function requireCipherCore(){if(Mz)return Bz.exports;Mz=1;!function(n){!function(a,o){n.exports=o(requireCore(),requireEvpkdf())}(0,function(n){n.lib.Cipher||function(a){var o=n;var i=o.lib;var u=i.Base;var d=i.WordArray;var m=i.BufferedBlockAlgorithm;var g=o.enc;g.Utf8;var y=g.Base64;var v=o.algo;var x=v.EvpKDF;var N=i.Cipher=m.extend({cfg:u.extend(),createEncryptor:function(n,a){return this.create(this._ENC_XFORM_MODE,n,a)},createDecryptor:function(n,a){return this.create(this._DEC_XFORM_MODE,n,a)},init:function(n,a,o){this.cfg=this.cfg.extend(o);this._xformMode=n;this._key=a;this.reset()},reset:function(){m.reset.call(this);this._doReset()},process:function(n){this._append(n);return this._process()},finalize:function(n){n&&this._append(n);var a=this._doFinalize();return a},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function selectCipherStrategy(n){return"string"==typeof n?z:R}return function(n){return{encrypt:function(a,o,i){return selectCipherStrategy(o).encrypt(n,a,o,i)},decrypt:function(a,o,i){return selectCipherStrategy(o).decrypt(n,a,o,i)}}}}()});i.StreamCipher=N.extend({_doFinalize:function(){var n=this._process(!0);return n},blockSize:1});var k=o.mode={};var E=i.BlockCipherMode=u.extend({createEncryptor:function(n,a){return this.Encryptor.create(n,a)},createDecryptor:function(n,a){return this.Decryptor.create(n,a)},init:function(n,a){this._cipher=n;this._iv=a}});var S=k.CBC=function(){var n=E.extend();n.Encryptor=n.extend({processBlock:function(n,a){var o=this._cipher;var i=o.blockSize;xorBlock.call(this,n,a,i);o.encryptBlock(n,a);this._prevBlock=n.slice(a,a+i)}});n.Decryptor=n.extend({processBlock:function(n,a){var o=this._cipher;var i=o.blockSize;var u=n.slice(a,a+i);o.decryptBlock(n,a);xorBlock.call(this,n,a,i);this._prevBlock=u}});function xorBlock(n,o,i){var u;var d=this._iv;if(d){u=d;this._iv=a}else u=this._prevBlock;for(var m=0;m<i;m++)n[o+m]^=u[m]}return n}();var A=o.pad={};var _=A.Pkcs7={pad:function(n,a){var o=4*a;var i=o-n.sigBytes%o;var u=i<<24|i<<16|i<<8|i;var m=[];for(var g=0;g<i;g+=4)m.push(u);var y=d.create(m,i);n.concat(y)},unpad:function(n){var a=255&n.words[n.sigBytes-1>>>2];n.sigBytes-=a}};i.BlockCipher=N.extend({cfg:N.cfg.extend({mode:S,padding:_}),reset:function(){var n;N.reset.call(this);var a=this.cfg;var o=a.iv;var i=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)n=i.createEncryptor;else{n=i.createDecryptor;this._minBufferSize=1}if(this._mode&&this._mode.__creator==n)this._mode.init(this,o&&o.words);else{this._mode=n.call(i,this,o&&o.words);this._mode.__creator=n}},_doProcessBlock:function(n,a){this._mode.processBlock(n,a)},_doFinalize:function(){var n;var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);n=this._process(!0)}else{n=this._process(!0);a.unpad(n)}return n},blockSize:4});var j=i.CipherParams=u.extend({init:function(n){this.mixIn(n)},toString:function(n){return(n||this.formatter).stringify(this)}});var I=o.format={};var O=I.OpenSSL={stringify:function(n){var a;var o=n.ciphertext;var i=n.salt;a=i?d.create([1398893684,1701076831]).concat(i).concat(o):o;return a.toString(y)},parse:function(n){var a;var o=y.parse(n);var i=o.words;if(1398893684==i[0]&&1701076831==i[1]){a=d.create(i.slice(2,4));i.splice(0,4);o.sigBytes-=16}return j.create({ciphertext:o,salt:a})}};var R=i.SerializableCipher=u.extend({cfg:u.extend({format:O}),encrypt:function(n,a,o,i){i=this.cfg.extend(i);var u=n.createEncryptor(o,i);var d=u.finalize(a);var m=u.cfg;return j.create({ciphertext:d,key:o,iv:m.iv,algorithm:n,mode:m.mode,padding:m.padding,blockSize:n.blockSize,formatter:i.format})},decrypt:function(n,a,o,i){i=this.cfg.extend(i);a=this._parse(a,i.format);var u=n.createDecryptor(o,i).finalize(a.ciphertext);return u},_parse:function(n,a){return"string"==typeof n?a.parse(n,this):n}});var B=o.kdf={};var M=B.OpenSSL={execute:function(n,a,o,i,u){i||(i=d.random(8));if(u)m=x.create({keySize:a+o,hasher:u}).compute(n,i);else var m=x.create({keySize:a+o}).compute(n,i);var g=d.create(m.words.slice(a),4*o);m.sigBytes=4*a;return j.create({key:m,iv:g,salt:i})}};var z=i.PasswordBasedCipher=R.extend({cfg:R.cfg.extend({kdf:M}),encrypt:function(n,a,o,i){i=this.cfg.extend(i);var u=i.kdf.execute(o,n.keySize,n.ivSize,i.salt,i.hasher);i.iv=u.iv;var d=R.encrypt.call(this,n,a,u.key,i);d.mixIn(u);return d},decrypt:function(n,a,o,i){i=this.cfg.extend(i);a=this._parse(a,i.format);var u=i.kdf.execute(o,n.keySize,n.ivSize,a.salt,i.hasher);i.iv=u.iv;var d=R.decrypt.call(this,n,a,u.key,i);return d}})}()})}(Bz);return Bz.exports}var zz={exports:{}};var Fz;function requireModeCfb(){if(Fz)return zz.exports;Fz=1;!function(n){!function(a,o){n.exports=o(requireCore(),requireCipherCore())}(0,function(n){n.mode.CFB=function(){var a=n.lib.BlockCipherMode.extend();a.Encryptor=a.extend({processBlock:function(n,a){var o=this._cipher;var i=o.blockSize;generateKeystreamAndEncrypt.call(this,n,a,i,o);this._prevBlock=n.slice(a,a+i)}});a.Decryptor=a.extend({processBlock:function(n,a){var o=this._cipher;var i=o.blockSize;var u=n.slice(a,a+i);generateKeystreamAndEncrypt.call(this,n,a,i,o);this._prevBlock=u}});function generateKeystreamAndEncrypt(n,a,o,i){var u;var d=this._iv;if(d){u=d.slice(0);this._iv=void 0}else u=this._prevBlock;i.encryptBlock(u,0);for(var m=0;m<o;m++)n[a+m]^=u[m]}return a}();return n.mode.CFB})}(zz);return zz.exports}var Lz={exports:{}};var Dz;function requireModeCtr(){if(Dz)return Lz.exports;Dz=1;!function(n){!function(a,o){n.exports=o(requireCore(),requireCipherCore())}(0,function(n){n.mode.CTR=function(){var a=n.lib.BlockCipherMode.extend();var o=a.Encryptor=a.extend({processBlock:function(n,a){var o=this._cipher;var i=o.blockSize;var u=this._iv;var d=this._counter;if(u){d=this._counter=u.slice(0);this._iv=void 0}var m=d.slice(0);o.encryptBlock(m,0);d[i-1]=d[i-1]+1|0;for(var g=0;g<i;g++)n[a+g]^=m[g]}});a.Decryptor=o;return a}();return n.mode.CTR})}(Lz);return Lz.exports}var $z={exports:{}};var Uz;function requireModeCtrGladman(){if(Uz)return $z.exports;Uz=1;!function(n){!function(a,o){n.exports=o(requireCore(),requireCipherCore())}(0,function(n){
/** @preserve
             * Counter block mode compatible with  Dr Brian Gladman fileenc.c
             * derived from CryptoJS.mode.CTR
             * Jan Hruby jhruby.web@gmail.com
             */
n.mode.CTRGladman=function(){var a=n.lib.BlockCipherMode.extend();function incWord(n){if(255&~(n>>24))n+=1<<24;else{var a=n>>16&255;var o=n>>8&255;var i=255&n;if(255===a){a=0;if(255===o){o=0;255===i?i=0:++i}else++o}else++a;n=0;n+=a<<16;n+=o<<8;n+=i}return n}function incCounter(n){0===(n[0]=incWord(n[0]))&&(n[1]=incWord(n[1]));return n}var o=a.Encryptor=a.extend({processBlock:function(n,a){var o=this._cipher;var i=o.blockSize;var u=this._iv;var d=this._counter;if(u){d=this._counter=u.slice(0);this._iv=void 0}incCounter(d);var m=d.slice(0);o.encryptBlock(m,0);for(var g=0;g<i;g++)n[a+g]^=m[g]}});a.Decryptor=o;return a}();return n.mode.CTRGladman})}($z);return $z.exports}var Wz={exports:{}};var Hz;function requireModeOfb(){if(Hz)return Wz.exports;Hz=1;!function(n){!function(a,o){n.exports=o(requireCore(),requireCipherCore())}(0,function(n){n.mode.OFB=function(){var a=n.lib.BlockCipherMode.extend();var o=a.Encryptor=a.extend({processBlock:function(n,a){var o=this._cipher;var i=o.blockSize;var u=this._iv;var d=this._keystream;if(u){d=this._keystream=u.slice(0);this._iv=void 0}o.encryptBlock(d,0);for(var m=0;m<i;m++)n[a+m]^=d[m]}});a.Decryptor=o;return a}();return n.mode.OFB})}(Wz);return Wz.exports}var qz={exports:{}};var Gz;function requireModeEcb(){if(Gz)return qz.exports;Gz=1;!function(n){!function(a,o){n.exports=o(requireCore(),requireCipherCore())}(0,function(n){n.mode.ECB=function(){var a=n.lib.BlockCipherMode.extend();a.Encryptor=a.extend({processBlock:function(n,a){this._cipher.encryptBlock(n,a)}});a.Decryptor=a.extend({processBlock:function(n,a){this._cipher.decryptBlock(n,a)}});return a}();return n.mode.ECB})}(qz);return qz.exports}var Vz={exports:{}};var Kz;function requirePadAnsix923(){if(Kz)return Vz.exports;Kz=1;!function(n){!function(a,o){n.exports=o(requireCore(),requireCipherCore())}(0,function(n){n.pad.AnsiX923={pad:function(n,a){var o=n.sigBytes;var i=4*a;var u=i-o%i;var d=o+u-1;n.clamp();n.words[d>>>2]|=u<<24-d%4*8;n.sigBytes+=u},unpad:function(n){var a=255&n.words[n.sigBytes-1>>>2];n.sigBytes-=a}};return n.pad.Ansix923})}(Vz);return Vz.exports}var Zz={exports:{}};var Yz;function requirePadIso10126(){if(Yz)return Zz.exports;Yz=1;!function(n){!function(a,o){n.exports=o(requireCore(),requireCipherCore())}(0,function(n){n.pad.Iso10126={pad:function(a,o){var i=4*o;var u=i-a.sigBytes%i;a.concat(n.lib.WordArray.random(u-1)).concat(n.lib.WordArray.create([u<<24],1))},unpad:function(n){var a=255&n.words[n.sigBytes-1>>>2];n.sigBytes-=a}};return n.pad.Iso10126})}(Zz);return Zz.exports}var Jz={exports:{}};var Qz;function requirePadIso97971(){if(Qz)return Jz.exports;Qz=1;!function(n){!function(a,o){n.exports=o(requireCore(),requireCipherCore())}(0,function(n){n.pad.Iso97971={pad:function(a,o){a.concat(n.lib.WordArray.create([2147483648],1));n.pad.ZeroPadding.pad(a,o)},unpad:function(a){n.pad.ZeroPadding.unpad(a);a.sigBytes--}};return n.pad.Iso97971})}(Jz);return Jz.exports}var Xz={exports:{}};var eF;function requirePadZeropadding(){if(eF)return Xz.exports;eF=1;!function(n){!function(a,o){n.exports=o(requireCore(),requireCipherCore())}(0,function(n){n.pad.ZeroPadding={pad:function(n,a){var o=4*a;n.clamp();n.sigBytes+=o-(n.sigBytes%o||o)},unpad:function(n){var a=n.words;var o=n.sigBytes-1;for(o=n.sigBytes-1;o>=0;o--)if(a[o>>>2]>>>24-o%4*8&255){n.sigBytes=o+1;break}}};return n.pad.ZeroPadding})}(Xz);return Xz.exports}var tF={exports:{}};var nF;function requirePadNopadding(){if(nF)return tF.exports;nF=1;!function(n){!function(a,o){n.exports=o(requireCore(),requireCipherCore())}(0,function(n){n.pad.NoPadding={pad:function(){},unpad:function(){}};return n.pad.NoPadding})}(tF);return tF.exports}var rF={exports:{}};var sF;function requireFormatHex(){if(sF)return rF.exports;sF=1;!function(n){!function(a,o){n.exports=o(requireCore(),requireCipherCore())}(0,function(n){!function(){var a=n;var o=a.lib;var i=o.CipherParams;var u=a.enc;var d=u.Hex;var m=a.format;m.Hex={stringify:function(n){return n.ciphertext.toString(d)},parse:function(n){var a=d.parse(n);return i.create({ciphertext:a})}}}();return n.format.Hex})}(rF);return rF.exports}var aF={exports:{}};var oF;function requireAes(){if(oF)return aF.exports;oF=1;!function(n){!function(a,o){n.exports=o(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())}(0,function(n){!function(){var a=n;var o=a.lib;var i=o.BlockCipher;var u=a.algo;var d=[];var m=[];var g=[];var y=[];var v=[];var x=[];var N=[];var k=[];var E=[];var S=[];!function(){var n=[];for(var a=0;a<256;a++)n[a]=a<128?a<<1:a<<1^283;var o=0;var i=0;for(a=0;a<256;a++){var u=i^i<<1^i<<2^i<<3^i<<4;u=u>>>8^255&u^99;d[o]=u;m[u]=o;var A=n[o];var _=n[A];var j=n[_];var I=257*n[u]^16843008*u;g[o]=I<<24|I>>>8;y[o]=I<<16|I>>>16;v[o]=I<<8|I>>>24;x[o]=I;I=16843009*j^65537*_^257*A^16843008*o;N[u]=I<<24|I>>>8;k[u]=I<<16|I>>>16;E[u]=I<<8|I>>>24;S[u]=I;if(o){o=A^n[n[n[j^A]]];i^=n[n[i]]}else o=i=1}}();var A=[0,1,2,4,8,16,32,64,128,27,54];var _=u.AES=i.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){var n=this._keyPriorReset=this._key;var a=n.words;var o=n.sigBytes/4;var i=this._nRounds=o+6;var u=4*(i+1);var m=this._keySchedule=[];for(var g=0;g<u;g++)if(g<o)m[g]=a[g];else{x=m[g-1];if(g%o)o>6&&g%o==4&&(x=d[x>>>24]<<24|d[x>>>16&255]<<16|d[x>>>8&255]<<8|d[255&x]);else{x=x<<8|x>>>24;x=d[x>>>24]<<24|d[x>>>16&255]<<16|d[x>>>8&255]<<8|d[255&x];x^=A[g/o|0]<<24}m[g]=m[g-o]^x}var y=this._invKeySchedule=[];for(var v=0;v<u;v++){g=u-v;if(v%4)var x=m[g];else x=m[g-4];y[v]=v<4||g<=4?x:N[d[x>>>24]]^k[d[x>>>16&255]]^E[d[x>>>8&255]]^S[d[255&x]]}}},encryptBlock:function(n,a){this._doCryptBlock(n,a,this._keySchedule,g,y,v,x,d)},decryptBlock:function(n,a){var o=n[a+1];n[a+1]=n[a+3];n[a+3]=o;this._doCryptBlock(n,a,this._invKeySchedule,N,k,E,S,m);o=n[a+1];n[a+1]=n[a+3];n[a+3]=o},_doCryptBlock:function(n,a,o,i,u,d,m,g){var y=this._nRounds;var v=n[a]^o[0];var x=n[a+1]^o[1];var N=n[a+2]^o[2];var k=n[a+3]^o[3];var E=4;for(var S=1;S<y;S++){var A=i[v>>>24]^u[x>>>16&255]^d[N>>>8&255]^m[255&k]^o[E++];var _=i[x>>>24]^u[N>>>16&255]^d[k>>>8&255]^m[255&v]^o[E++];var j=i[N>>>24]^u[k>>>16&255]^d[v>>>8&255]^m[255&x]^o[E++];var I=i[k>>>24]^u[v>>>16&255]^d[x>>>8&255]^m[255&N]^o[E++];v=A;x=_;N=j;k=I}A=(g[v>>>24]<<24|g[x>>>16&255]<<16|g[N>>>8&255]<<8|g[255&k])^o[E++];_=(g[x>>>24]<<24|g[N>>>16&255]<<16|g[k>>>8&255]<<8|g[255&v])^o[E++];j=(g[N>>>24]<<24|g[k>>>16&255]<<16|g[v>>>8&255]<<8|g[255&x])^o[E++];I=(g[k>>>24]<<24|g[v>>>16&255]<<16|g[x>>>8&255]<<8|g[255&N])^o[E++];n[a]=A;n[a+1]=_;n[a+2]=j;n[a+3]=I},keySize:8});a.AES=i._createHelper(_)}();return n.AES})}(aF);return aF.exports}var iF={exports:{}};var cF;function requireTripledes(){if(cF)return iF.exports;cF=1;!function(n){!function(a,o){n.exports=o(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())}(0,function(n){!function(){var a=n;var o=a.lib;var i=o.WordArray;var u=o.BlockCipher;var d=a.algo;var m=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4];var g=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32];var y=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28];var v=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}];var x=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679];var N=d.DES=u.extend({_doReset:function(){var n=this._key;var a=n.words;var o=[];for(var i=0;i<56;i++){var u=m[i]-1;o[i]=a[u>>>5]>>>31-u%32&1}var d=this._subKeys=[];for(var v=0;v<16;v++){var x=d[v]=[];var N=y[v];for(i=0;i<24;i++){x[i/6|0]|=o[(g[i]-1+N)%28]<<31-i%6;x[4+(i/6|0)]|=o[28+(g[i+24]-1+N)%28]<<31-i%6}x[0]=x[0]<<1|x[0]>>>31;for(i=1;i<7;i++)x[i]=x[i]>>>4*(i-1)+3;x[7]=x[7]<<5|x[7]>>>27}var k=this._invSubKeys=[];for(i=0;i<16;i++)k[i]=d[15-i]},encryptBlock:function(n,a){this._doCryptBlock(n,a,this._subKeys)},decryptBlock:function(n,a){this._doCryptBlock(n,a,this._invSubKeys)},_doCryptBlock:function(n,a,o){this._lBlock=n[a];this._rBlock=n[a+1];exchangeLR.call(this,4,252645135);exchangeLR.call(this,16,65535);exchangeRL.call(this,2,858993459);exchangeRL.call(this,8,16711935);exchangeLR.call(this,1,1431655765);for(var i=0;i<16;i++){var u=o[i];var d=this._lBlock;var m=this._rBlock;var g=0;for(var y=0;y<8;y++)g|=v[y][((m^u[y])&x[y])>>>0];this._lBlock=m;this._rBlock=d^g}var N=this._lBlock;this._lBlock=this._rBlock;this._rBlock=N;exchangeLR.call(this,1,1431655765);exchangeRL.call(this,8,16711935);exchangeRL.call(this,2,858993459);exchangeLR.call(this,16,65535);exchangeLR.call(this,4,252645135);n[a]=this._lBlock;n[a+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function exchangeLR(n,a){var o=(this._lBlock>>>n^this._rBlock)&a;this._rBlock^=o;this._lBlock^=o<<n}function exchangeRL(n,a){var o=(this._rBlock>>>n^this._lBlock)&a;this._lBlock^=o;this._rBlock^=o<<n}a.DES=u._createHelper(N);var k=d.TripleDES=u.extend({_doReset:function(){var n=this._key;var a=n.words;if(2!==a.length&&4!==a.length&&a.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var o=a.slice(0,2);var u=a.length<4?a.slice(0,2):a.slice(2,4);var d=a.length<6?a.slice(0,2):a.slice(4,6);this._des1=N.createEncryptor(i.create(o));this._des2=N.createEncryptor(i.create(u));this._des3=N.createEncryptor(i.create(d))},encryptBlock:function(n,a){this._des1.encryptBlock(n,a);this._des2.decryptBlock(n,a);this._des3.encryptBlock(n,a)},decryptBlock:function(n,a){this._des3.decryptBlock(n,a);this._des2.encryptBlock(n,a);this._des1.decryptBlock(n,a)},keySize:6,ivSize:2,blockSize:2});a.TripleDES=u._createHelper(k)}();return n.TripleDES})}(iF);return iF.exports}var lF={exports:{}};var uF;function requireRc4(){if(uF)return lF.exports;uF=1;!function(n){!function(a,o){n.exports=o(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())}(0,function(n){!function(){var a=n;var o=a.lib;var i=o.StreamCipher;var u=a.algo;var d=u.RC4=i.extend({_doReset:function(){var n=this._key;var a=n.words;var o=n.sigBytes;var i=this._S=[];for(var u=0;u<256;u++)i[u]=u;u=0;for(var d=0;u<256;u++){var m=u%o;var g=a[m>>>2]>>>24-m%4*8&255;d=(d+i[u]+g)%256;var y=i[u];i[u]=i[d];i[d]=y}this._i=this._j=0},_doProcessBlock:function(n,a){n[a]^=generateKeystreamWord.call(this)},keySize:8,ivSize:0});function generateKeystreamWord(){var n=this._S;var a=this._i;var o=this._j;var i=0;for(var u=0;u<4;u++){a=(a+1)%256;o=(o+n[a])%256;var d=n[a];n[a]=n[o];n[o]=d;i|=n[(n[a]+n[o])%256]<<24-8*u}this._i=a;this._j=o;return i}a.RC4=i._createHelper(d);var m=u.RC4Drop=d.extend({cfg:d.cfg.extend({drop:192}),_doReset:function(){d._doReset.call(this);for(var n=this.cfg.drop;n>0;n--)generateKeystreamWord.call(this)}});a.RC4Drop=i._createHelper(m)}();return n.RC4})}(lF);return lF.exports}var dF={exports:{}};var hF;function requireRabbit(){if(hF)return dF.exports;hF=1;!function(n){!function(a,o){n.exports=o(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())}(0,function(n){!function(){var a=n;var o=a.lib;var i=o.StreamCipher;var u=a.algo;var d=[];var m=[];var g=[];var y=u.Rabbit=i.extend({_doReset:function(){var n=this._key.words;var a=this.cfg.iv;for(var o=0;o<4;o++)n[o]=16711935&(n[o]<<8|n[o]>>>24)|4278255360&(n[o]<<24|n[o]>>>8);var i=this._X=[n[0],n[3]<<16|n[2]>>>16,n[1],n[0]<<16|n[3]>>>16,n[2],n[1]<<16|n[0]>>>16,n[3],n[2]<<16|n[1]>>>16];var u=this._C=[n[2]<<16|n[2]>>>16,4294901760&n[0]|65535&n[1],n[3]<<16|n[3]>>>16,4294901760&n[1]|65535&n[2],n[0]<<16|n[0]>>>16,4294901760&n[2]|65535&n[3],n[1]<<16|n[1]>>>16,4294901760&n[3]|65535&n[0]];this._b=0;for(o=0;o<4;o++)nextState.call(this);for(o=0;o<8;o++)u[o]^=i[o+4&7];if(a){var d=a.words;var m=d[0];var g=d[1];var y=16711935&(m<<8|m>>>24)|4278255360&(m<<24|m>>>8);var v=16711935&(g<<8|g>>>24)|4278255360&(g<<24|g>>>8);var x=y>>>16|4294901760&v;var N=v<<16|65535&y;u[0]^=y;u[1]^=x;u[2]^=v;u[3]^=N;u[4]^=y;u[5]^=x;u[6]^=v;u[7]^=N;for(o=0;o<4;o++)nextState.call(this)}},_doProcessBlock:function(n,a){var o=this._X;nextState.call(this);d[0]=o[0]^o[5]>>>16^o[3]<<16;d[1]=o[2]^o[7]>>>16^o[5]<<16;d[2]=o[4]^o[1]>>>16^o[7]<<16;d[3]=o[6]^o[3]>>>16^o[1]<<16;for(var i=0;i<4;i++){d[i]=16711935&(d[i]<<8|d[i]>>>24)|4278255360&(d[i]<<24|d[i]>>>8);n[a+i]^=d[i]}},blockSize:4,ivSize:2});function nextState(){var n=this._X;var a=this._C;for(var o=0;o<8;o++)m[o]=a[o];a[0]=a[0]+1295307597+this._b|0;a[1]=a[1]+3545052371+(a[0]>>>0<m[0]>>>0?1:0)|0;a[2]=a[2]+886263092+(a[1]>>>0<m[1]>>>0?1:0)|0;a[3]=a[3]+1295307597+(a[2]>>>0<m[2]>>>0?1:0)|0;a[4]=a[4]+3545052371+(a[3]>>>0<m[3]>>>0?1:0)|0;a[5]=a[5]+886263092+(a[4]>>>0<m[4]>>>0?1:0)|0;a[6]=a[6]+1295307597+(a[5]>>>0<m[5]>>>0?1:0)|0;a[7]=a[7]+3545052371+(a[6]>>>0<m[6]>>>0?1:0)|0;this._b=a[7]>>>0<m[7]>>>0?1:0;for(o=0;o<8;o++){var i=n[o]+a[o];var u=65535&i;var d=i>>>16;var y=((u*u>>>17)+u*d>>>15)+d*d;var v=((4294901760&i)*i|0)+((65535&i)*i|0);g[o]=y^v}n[0]=g[0]+(g[7]<<16|g[7]>>>16)+(g[6]<<16|g[6]>>>16)|0;n[1]=g[1]+(g[0]<<8|g[0]>>>24)+g[7]|0;n[2]=g[2]+(g[1]<<16|g[1]>>>16)+(g[0]<<16|g[0]>>>16)|0;n[3]=g[3]+(g[2]<<8|g[2]>>>24)+g[1]|0;n[4]=g[4]+(g[3]<<16|g[3]>>>16)+(g[2]<<16|g[2]>>>16)|0;n[5]=g[5]+(g[4]<<8|g[4]>>>24)+g[3]|0;n[6]=g[6]+(g[5]<<16|g[5]>>>16)+(g[4]<<16|g[4]>>>16)|0;n[7]=g[7]+(g[6]<<8|g[6]>>>24)+g[5]|0}a.Rabbit=i._createHelper(y)}();return n.Rabbit})}(dF);return dF.exports}var fF={exports:{}};var pF;function requireRabbitLegacy(){if(pF)return fF.exports;pF=1;!function(n){!function(a,o){n.exports=o(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())}(0,function(n){!function(){var a=n;var o=a.lib;var i=o.StreamCipher;var u=a.algo;var d=[];var m=[];var g=[];var y=u.RabbitLegacy=i.extend({_doReset:function(){var n=this._key.words;var a=this.cfg.iv;var o=this._X=[n[0],n[3]<<16|n[2]>>>16,n[1],n[0]<<16|n[3]>>>16,n[2],n[1]<<16|n[0]>>>16,n[3],n[2]<<16|n[1]>>>16];var i=this._C=[n[2]<<16|n[2]>>>16,4294901760&n[0]|65535&n[1],n[3]<<16|n[3]>>>16,4294901760&n[1]|65535&n[2],n[0]<<16|n[0]>>>16,4294901760&n[2]|65535&n[3],n[1]<<16|n[1]>>>16,4294901760&n[3]|65535&n[0]];this._b=0;for(var u=0;u<4;u++)nextState.call(this);for(u=0;u<8;u++)i[u]^=o[u+4&7];if(a){var d=a.words;var m=d[0];var g=d[1];var y=16711935&(m<<8|m>>>24)|4278255360&(m<<24|m>>>8);var v=16711935&(g<<8|g>>>24)|4278255360&(g<<24|g>>>8);var x=y>>>16|4294901760&v;var N=v<<16|65535&y;i[0]^=y;i[1]^=x;i[2]^=v;i[3]^=N;i[4]^=y;i[5]^=x;i[6]^=v;i[7]^=N;for(u=0;u<4;u++)nextState.call(this)}},_doProcessBlock:function(n,a){var o=this._X;nextState.call(this);d[0]=o[0]^o[5]>>>16^o[3]<<16;d[1]=o[2]^o[7]>>>16^o[5]<<16;d[2]=o[4]^o[1]>>>16^o[7]<<16;d[3]=o[6]^o[3]>>>16^o[1]<<16;for(var i=0;i<4;i++){d[i]=16711935&(d[i]<<8|d[i]>>>24)|4278255360&(d[i]<<24|d[i]>>>8);n[a+i]^=d[i]}},blockSize:4,ivSize:2});function nextState(){var n=this._X;var a=this._C;for(var o=0;o<8;o++)m[o]=a[o];a[0]=a[0]+1295307597+this._b|0;a[1]=a[1]+3545052371+(a[0]>>>0<m[0]>>>0?1:0)|0;a[2]=a[2]+886263092+(a[1]>>>0<m[1]>>>0?1:0)|0;a[3]=a[3]+1295307597+(a[2]>>>0<m[2]>>>0?1:0)|0;a[4]=a[4]+3545052371+(a[3]>>>0<m[3]>>>0?1:0)|0;a[5]=a[5]+886263092+(a[4]>>>0<m[4]>>>0?1:0)|0;a[6]=a[6]+1295307597+(a[5]>>>0<m[5]>>>0?1:0)|0;a[7]=a[7]+3545052371+(a[6]>>>0<m[6]>>>0?1:0)|0;this._b=a[7]>>>0<m[7]>>>0?1:0;for(o=0;o<8;o++){var i=n[o]+a[o];var u=65535&i;var d=i>>>16;var y=((u*u>>>17)+u*d>>>15)+d*d;var v=((4294901760&i)*i|0)+((65535&i)*i|0);g[o]=y^v}n[0]=g[0]+(g[7]<<16|g[7]>>>16)+(g[6]<<16|g[6]>>>16)|0;n[1]=g[1]+(g[0]<<8|g[0]>>>24)+g[7]|0;n[2]=g[2]+(g[1]<<16|g[1]>>>16)+(g[0]<<16|g[0]>>>16)|0;n[3]=g[3]+(g[2]<<8|g[2]>>>24)+g[1]|0;n[4]=g[4]+(g[3]<<16|g[3]>>>16)+(g[2]<<16|g[2]>>>16)|0;n[5]=g[5]+(g[4]<<8|g[4]>>>24)+g[3]|0;n[6]=g[6]+(g[5]<<16|g[5]>>>16)+(g[4]<<16|g[4]>>>16)|0;n[7]=g[7]+(g[6]<<8|g[6]>>>24)+g[5]|0}a.RabbitLegacy=i._createHelper(y)}();return n.RabbitLegacy})}(fF);return fF.exports}var mF={exports:{}};var gF;function requireBlowfish(){if(gF)return mF.exports;gF=1;!function(n){!function(a,o){n.exports=o(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())}(0,function(n){!function(){var a=n;var o=a.lib;var i=o.BlockCipher;var u=a.algo;const d=16;const m=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731];const g=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var y={pbox:[],sbox:[]};function F2(n,a){let o=a>>24&255;let i=a>>16&255;let u=a>>8&255;let d=255&a;let m=n.sbox[0][o]+n.sbox[1][i];m^=n.sbox[2][u];m+=n.sbox[3][d];return m}function BlowFish_Encrypt(n,a,o){let i=a;let u=o;let m;for(let g=0;g<d;++g){i^=n.pbox[g];u=F2(n,i)^u;m=i;i=u;u=m}m=i;i=u;u=m;u^=n.pbox[d];i^=n.pbox[d+1];return{left:i,right:u}}function BlowFish_Decrypt(n,a,o){let i=a;let u=o;let m;for(let g=d+1;g>1;--g){i^=n.pbox[g];u=F2(n,i)^u;m=i;i=u;u=m}m=i;i=u;u=m;u^=n.pbox[1];i^=n.pbox[0];return{left:i,right:u}}function BlowFishInit(n,a,o){for(let d=0;d<4;d++){n.sbox[d]=[];for(let a=0;a<256;a++)n.sbox[d][a]=g[d][a]}let i=0;for(let g=0;g<d+2;g++){n.pbox[g]=m[g]^a[i];i++;i>=o&&(i=0)}let u=0;let y=0;let v=0;for(let m=0;m<d+2;m+=2){v=BlowFish_Encrypt(n,u,y);u=v.left;y=v.right;n.pbox[m]=u;n.pbox[m+1]=y}for(let d=0;d<4;d++)for(let a=0;a<256;a+=2){v=BlowFish_Encrypt(n,u,y);u=v.left;y=v.right;n.sbox[d][a]=u;n.sbox[d][a+1]=y}return!0}var v=u.Blowfish=i.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var n=this._keyPriorReset=this._key;var a=n.words;var o=n.sigBytes/4;BlowFishInit(y,a,o)}},encryptBlock:function(n,a){var o=BlowFish_Encrypt(y,n[a],n[a+1]);n[a]=o.left;n[a+1]=o.right},decryptBlock:function(n,a){var o=BlowFish_Decrypt(y,n[a],n[a+1]);n[a]=o.left;n[a+1]=o.right},blockSize:2,keySize:4,ivSize:2});a.Blowfish=i._createHelper(v)}();return n.Blowfish})}(mF);return mF.exports}var yF;function requireCryptoJs(){if(yF)return sz.exports;yF=1;!function(n){!function(a,o){n.exports=o(requireCore(),requireX64Core(),requireLibTypedarrays(),requireEncUtf16(),requireEncBase64(),requireEncBase64url(),requireMd5(),requireSha1(),requireSha256(),requireSha224(),requireSha512(),requireSha384(),requireSha3(),requireRipemd160(),requireHmac(),requirePbkdf2(),requireEvpkdf(),requireCipherCore(),requireModeCfb(),requireModeCtr(),requireModeCtrGladman(),requireModeOfb(),requireModeEcb(),requirePadAnsix923(),requirePadIso10126(),requirePadIso97971(),requirePadZeropadding(),requirePadNopadding(),requireFormatHex(),requireAes(),requireTripledes(),requireRc4(),requireRabbit(),requireRabbitLegacy(),requireBlowfish())}(0,function(n){return n})}(sz);return sz.exports}var bF;function requireBase(){if(bF)return rz;bF=1;var n=rz&&rz.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(rz,"__esModule",{value:!0});rz.Base=void 0;const a=requireBuffer();const o=n(requireCryptoJs());let i=class n{print(){n.print(this)}bufferIndexOf(n,o,i=!1){if(i)return this.binarySearch(n,o,a.Buffer.compare);const eqChecker=(n,a)=>n.equals(a);return this.linearSearch(n,o,eqChecker)}static binarySearch(n,a,o){let i=0;let u=n.length-1;for(;i<=u;){const d=Math.floor((i+u)/2);const m=o(n[d],a);if(0===m){for(let i=d-1;i>=0;i--)if(0!==o(n[i],a))return i+1;return 0}m<0?i=d+1:u=d-1}return-1}binarySearch(a,o,i){return n.binarySearch(a,o,i)}static linearSearch(n,a,o){for(let i=0;i<n.length;i++)if(o(n[i],a))return i;return-1}linearSearch(a,o,i){return n.linearSearch(a,o,i)}static bufferify(i){if(!a.Buffer.isBuffer(i)){if("object"==typeof i&&i.words)return a.Buffer.from(i.toString(o.default.enc.Hex),"hex");if(n.isHexString(i)){const n=i.replace("0x","");const o=n.length%2?"0"+n:n;return a.Buffer.from(o,"hex")}if("string"==typeof i)return a.Buffer.from(i);if("bigint"==typeof i){const n=i.toString(16).length%2?"0"+i.toString(16):i.toString(16);return a.Buffer.from(n,"hex")}if(i instanceof Uint8Array)return a.Buffer.from(i.buffer,i.byteOffset,i.byteLength);if("number"==typeof i){let n=i.toString();n.length%2&&(n=`0${n}`);return a.Buffer.from(n,"hex")}if(ArrayBuffer.isView(i))return a.Buffer.from(i.buffer,i.byteOffset,i.byteLength)}return i}static bufferifyFn(i){if("function"!=typeof i)throw new Error("bufferifyFn expects a function, received: "+typeof i);return u=>{const d=i(u);if(a.Buffer.isBuffer(d))return d;if(n.isHexString(d)){const n=d.replace("0x","");const o=n.length%2?"0"+n:n;return a.Buffer.from(o,"hex")}if("string"==typeof d)return a.Buffer.from(d);if("bigint"==typeof d){const n=d.toString(16).length%2?"0"+d.toString(16):d.toString(16);return a.Buffer.from(n,"hex")}return ArrayBuffer.isView(d)?a.Buffer.from(d.buffer,d.byteOffset,d.byteLength):a.Buffer.from(i(o.default.enc.Hex.parse(u.toString("hex"))).toString(o.default.enc.Hex),"hex")}}bigNumberify(a){return n.bigNumberify(a)}static bigNumberify(o){if("bigint"==typeof o)return o;if("string"==typeof o){if(o.startsWith("0x")&&n.isHexString(o)){const n=o.replace("0x","");const a=n.length%2?"0"+n:n||"0";return BigInt("0x"+a)}return BigInt(o)}if(a.Buffer.isBuffer(o)){const n=o.toString("hex");const a=n.length%2?"0"+n:n||"0";return BigInt("0x"+a)}if(o instanceof Uint8Array){const n=a.Buffer.from(o).toString("hex");const i=n.length%2?"0"+n:n||"0";return BigInt("0x"+i)}if("number"==typeof o)return BigInt(o);throw new Error("cannot bigNumberify")}static isHexString(n){return"string"==typeof n&&/^(0x)?[0-9A-Fa-f]*$/.test(n)}static print(n){console.log(n.toString())}bufferToHex(a,o=!0){return n.bufferToHex(a,o)}static bufferToHex(n,o=!0){return`${o?"0x":""}${(n||a.Buffer.alloc(0)).toString("hex")}`}bufferify(a){return n.bufferify(a)}bufferifyFn(a){return n.bufferifyFn(a)}isHexString(a){return n.isHexString(a)}log2(n){return 1===n?0:1+this.log2(n/2|0)}zip(n,a){return n.map((n,o)=>[n,a[o]])}static hexZeroPad(n,a){return"0x"+n.replace("0x","").padStart(a,"0")}bufferArrayIncludes(n,o){return n.some(n=>n.equals(null!=o?o:a.Buffer.alloc(0)))}};rz.Base=i;rz.default=i;return rz}var vF;function requireMerkleTree(){if(vF)return qM;vF=1;var n=qM&&qM.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(qM,"__esModule",{value:!0});qM.MerkleTree=void 0;const a=requireBuffer();const o=n(requireBufferReverse());const i=n(requireSha256());const u=n(requireTreeify());const d=n(requireBase());let m=class n extends d.default{constructor(n,o=i.default,u={}){super();this.duplicateOdd=!1;this.hashLeaves=!1;this.isBitcoinTree=!1;this.leaves=[];this.layers=[];this.sortLeaves=!1;this.sortPairs=!1;this.sort=!1;this.fillDefaultHash=null;this.complete=!1;if(u.complete){if(u.isBitcoinTree)throw new Error('option "complete" is incompatible with "isBitcoinTree"');if(u.duplicateOdd)throw new Error('option "complete" is incompatible with "duplicateOdd"')}this.isBitcoinTree=!!u.isBitcoinTree;this.hashLeaves=!!u.hashLeaves;this.sortLeaves=!!u.sortLeaves;this.sortPairs=!!u.sortPairs;this.complete=!!u.complete;if(u.fillDefaultHash)if("function"==typeof u.fillDefaultHash)this.fillDefaultHash=u.fillDefaultHash;else{if(!a.Buffer.isBuffer(u.fillDefaultHash)&&"string"!=typeof u.fillDefaultHash)throw new Error('method "fillDefaultHash" must be a function, Buffer, or string');this.fillDefaultHash=(n,a)=>u.fillDefaultHash}this.sort=!!u.sort;if(this.sort){this.sortLeaves=!0;this.sortPairs=!0}this.duplicateOdd=!!u.duplicateOdd;u.concatenator?this.concatenator=u.concatenator:this.concatenator=a.Buffer.concat;if("function"!=typeof o)throw new Error("hashFn must be a function");this.hashFn=this.bufferifyFn(o);this.processLeaves(n)}getOptions(){var n,a;return{complete:this.complete,isBitcoinTree:this.isBitcoinTree,hashLeaves:this.hashLeaves,sortLeaves:this.sortLeaves,sortPairs:this.sortPairs,sort:this.sort,fillDefaultHash:null!==(a=null===(n=this.fillDefaultHash)||void 0===n?void 0:n.toString())&&void 0!==a?a:null,duplicateOdd:this.duplicateOdd}}processLeaves(n){this.hashLeaves&&(n=n.map(this.hashFn));this.leaves=n.map(this.bufferify);this.sortLeaves&&(this.leaves=this.leaves.sort(a.Buffer.compare));if(this.fillDefaultHash)for(let a=this.leaves.length;a<Math.pow(2,Math.ceil(Math.log2(this.leaves.length)));a++)this.leaves.push(this.bufferify(this.fillDefaultHash(a,this.hashFn)));this.createHashes(this.leaves)}createHashes(n){this.layers=[n];for(;n.length>1;){const i=this.layers.length;this.layers.push([]);const u=this.complete&&1===i&&!Number.isInteger(Math.log2(n.length))?2*n.length-Math.pow(2,Math.ceil(Math.log2(n.length))):n.length;for(let d=0;d<n.length;d+=2){if(d>=u){this.layers[i].push(...n.slice(u));break}if(d+1===n.length&&n.length%2==1){const a=n[n.length-1];let u=a;if(this.isBitcoinTree){u=this.hashFn(this.concatenator([o.default(a),o.default(a)]));u=o.default(this.hashFn(u));this.layers[i].push(u);continue}if(!this.duplicateOdd){this.layers[i].push(n[d]);continue}}const m=n[d];const g=d+1===n.length?m:n[d+1];let y=null;y=this.isBitcoinTree?[o.default(m),o.default(g)]:[m,g];this.sortPairs&&y.sort(a.Buffer.compare);let v=this.hashFn(this.concatenator(y));this.isBitcoinTree&&(v=o.default(this.hashFn(v)));this.layers[i].push(v)}n=this.layers[i]}}addLeaf(n,a=!1){a&&(n=this.hashFn(n));this.processLeaves(this.leaves.concat(n))}addLeaves(n,a=!1){a&&(n=n.map(this.hashFn));this.processLeaves(this.leaves.concat(n))}getLeaves(n){if(Array.isArray(n)){if(this.hashLeaves){n=n.map(this.hashFn);this.sortLeaves&&(n=n.sort(a.Buffer.compare))}return this.leaves.filter(a=>-1!==this.bufferIndexOf(n,a,this.sortLeaves))}return this.leaves}removeLeaf(n){if(!this.isValidLeafIndex(n))throw new Error(`"${n}" is not a valid leaf index. Expected to be [0, ${this.getLeafCount()-1}]`);const a=this.leaves.splice(n,1);this.processLeaves(this.leaves);return a[0]}updateLeaf(n,a,o=!1){if(!this.isValidLeafIndex(n))throw new Error(`"${n}" is not a valid leaf index. Expected to be [0, ${this.getLeafCount()-1}]`);o&&(a=this.hashFn(a));this.leaves[n]=a;this.processLeaves(this.leaves)}getLeaf(n){return n<0||n>this.leaves.length-1?a.Buffer.from([]):this.leaves[n]}getLeafIndex(n){n=this.bufferify(n);const a=this.getLeaves();for(let o=0;o<a.length;o++){const i=a[o];if(i.equals(n))return o}return-1}getLeafCount(){return this.leaves.length}getHexLeaves(){return this.leaves.map(n=>this.bufferToHex(n))}static marshalLeaves(a){return JSON.stringify(a.map(a=>n.bufferToHex(a)),null,2)}static unmarshalLeaves(a){let o=null;if("string"==typeof a)o=JSON.parse(a);else{if(!(a instanceof Object))throw new Error("Expected type of string or object");o=a}if(!o)return[];if(!Array.isArray(o))throw new Error("Expected JSON string to be array");return o.map(n.bufferify)}getLayers(){return this.layers}getHexLayers(){return this.layers.reduce((n,a)=>{Array.isArray(a)?n.push(a.map(n=>this.bufferToHex(n))):n.push(a);return n},[])}getLayersFlat(){const n=this.layers.reduce((n,a)=>{Array.isArray(a)?n.unshift(...a):n.unshift(a);return n},[]);n.unshift(a.Buffer.from([0]));return n}getHexLayersFlat(){return this.getLayersFlat().map(n=>this.bufferToHex(n))}getLayerCount(){return this.getLayers().length}getRoot(){return 0===this.layers.length?a.Buffer.from([]):this.layers[this.layers.length-1][0]||a.Buffer.from([])}getHexRoot(){return this.bufferToHex(this.getRoot())}getProof(n,o){if("undefined"==typeof n)throw new Error("leaf is required");n=this.bufferify(n);const i=[];if(!Number.isInteger(o)){o=-1;for(let i=0;i<this.leaves.length;i++)0===a.Buffer.compare(n,this.leaves[i])&&(o=i)}if(o<=-1)return[];for(let a=0;a<this.layers.length;a++){const n=this.layers[a];const u=o%2;const d=u?o-1:this.isBitcoinTree&&o===n.length-1&&a<this.layers.length-1?o:o+1;d<n.length&&i.push({position:u?"left":"right",data:n[d]});o=o/2|0}return i}getHexProof(n,a){return this.getProof(n,a).map(n=>this.bufferToHex(n.data))}getProofs(){const n=[];const a=[];this.getProofsDFS(this.layers.length-1,0,n,a);return a}getProofsDFS(n,a,o,i){const u=a%2;if(-1===n){u||i.push([...o].reverse());return}if(a>=this.layers[n].length)return;const d=this.layers[n];const m=u?a-1:a+1;let g=!1;if(m<d.length){g=!0;o.push({position:u?"left":"right",data:d[m]})}const y=2*a;const v=2*a+1;this.getProofsDFS(n-1,y,o,i);this.getProofsDFS(n-1,v,o,i);g&&o.splice(o.length-1,1)}getHexProofs(){return this.getProofs().map(n=>this.bufferToHex(n.data))}getPositionalHexProof(n,a){return this.getProof(n,a).map(n=>["left"===n.position?0:1,this.bufferToHex(n.data)])}static marshalProof(o){const i=o.map(o=>"string"==typeof o?o:a.Buffer.isBuffer(o)?n.bufferToHex(o):{position:o.position,data:n.bufferToHex(o.data)});return JSON.stringify(i,null,2)}static unmarshalProof(a){let o=null;if("string"==typeof a)o=JSON.parse(a);else{if(!(a instanceof Object))throw new Error("Expected type of string or object");o=a}if(!o)return[];if(!Array.isArray(o))throw new Error("Expected JSON string to be array");return o.map(a=>{if("string"==typeof a)return n.bufferify(a);if(a instanceof Object)return{position:a.position,data:n.bufferify(a.data)};throw new Error("Expected item to be of type string or object")})}static marshalTree(a){const o=a.getHexRoot();const i=a.leaves.map(a=>n.bufferToHex(a));const u=a.getHexLayers();const d=a.getOptions();return JSON.stringify({options:d,root:o,layers:u,leaves:i},null,2)}static unmarshalTree(a,o=i.default,u={}){let d=null;if("string"==typeof a)d=JSON.parse(a);else{if(!(a instanceof Object))throw new Error("Expected type of string or object");d=a}if(!d)throw new Error("could not parse json");u=Object.assign({},d.options||{},u);return new n(d.leaves,o,u)}getProofIndices(n,a){const o=Math.pow(2,a);let i=new Set;for(const y of n){let n=o+y;for(;n>1;){i.add(1^n);n=n/2|0}}const u=n.map(n=>o+n);const d=Array.from(i).sort((n,a)=>n-a).reverse();i=u.concat(d);const m=new Set;const g=[];for(let y of i)if(!m.has(y)){g.push(y);for(;y>1;){m.add(y);if(!m.has(1^y))break;y=y/2|0}}return g.filter(a=>!n.includes(a-o))}getProofIndicesForUnevenTree(n,a){const o=Math.ceil(Math.log2(a));const i=[];for(let m=0;m<o;m++){const n=a%2!=0;n&&i.push({index:m,leavesCount:a});a=Math.ceil(a/2)}const u=[];let d=n;for(let m=0;m<o;m++){const n=d.map(n=>n%2==0?n+1:n-1);let a=n.filter(n=>!d.includes(n));const o=i.find(({index:n})=>n===m);o&&d.includes(o.leavesCount-1)&&(a=a.slice(0,-1));u.push(a);d=[...new Set(d.map(n=>n%2==0?n/2:n%2==0?(n+1)/2:(n-1)/2))]}return u}getMultiProof(n,o){this.complete||console.warn("Warning: For correct multiProofs it's strongly recommended to set complete: true");if(!o){o=n;n=this.getLayersFlat()}const i=this.isUnevenTree();if(i&&o.every(Number.isInteger))return this.getMultiProofForUnevenTree(o);if(!o.every(Number.isInteger)){let n=o;this.sortPairs&&(n=n.sort(a.Buffer.compare));let i=n.map(n=>this.bufferIndexOf(this.leaves,n,this.sortLeaves)).sort((n,a)=>n===a?0:n>a?1:-1);if(!i.every(n=>-1!==n))throw new Error("Element does not exist in Merkle tree");const u=[];const d=[];let m=[];for(let a=0;a<this.layers.length;a++){const n=this.layers[a];for(let a=0;a<i.length;a++){const o=i[a];const g=this.getPairNode(n,o);u.push(n[o]);g&&d.push(g);m.push(o/2|0)}i=m.filter((n,a,o)=>o.indexOf(n)===a);m=[]}return d.filter(n=>!u.includes(n))}return this.getProofIndices(o,Math.log2(n.length/2|0)).map(a=>n[a])}getMultiProofForUnevenTree(n,a){if(!a){a=n;n=this.getLayers()}let o=[];let i=a;for(const u of n){const n=[];for(const o of i){if(o%2==0){const a=o+1;if(!i.includes(a)&&u[a]){n.push(u[a]);continue}}const a=o-1;i.includes(a)||!u[a]||n.push(u[a])}o=o.concat(n);const a=new Set;for(const o of i)o%2!=0?o%2!=0?a.add((o-1)/2):a.add((o+1)/2):a.add(o/2);i=Array.from(a)}return o}getHexMultiProof(n,a){return this.getMultiProof(n,a).map(n=>this.bufferToHex(n))}getProofFlags(n,a){if(!Array.isArray(n)||n.length<=0)throw new Error("Invalid Inputs!");let o;o=n.every(Number.isInteger)?[...n].sort((n,a)=>n===a?0:n>a?1:-1):n.map(n=>this.bufferIndexOf(this.leaves,n,this.sortLeaves)).sort((n,a)=>n===a?0:n>a?1:-1);if(!o.every(n=>-1!==n))throw new Error("Element does not exist in Merkle tree");const i=a.map(n=>this.bufferify(n));const u=[];const d=[];for(let m=0;m<this.layers.length;m++){const n=this.layers[m];o=o.reduce((a,o)=>{const m=u.includes(n[o]);if(!m){const a=this.getPairNode(n,o);const m=this.bufferArrayIncludes(i,n[o])||this.bufferArrayIncludes(i,a);a&&d.push(!m);u.push(n[o]);u.push(a)}a.push(o/2|0);return a},[])}return d}verify(n,i,u){let d=this.bufferify(i);u=this.bufferify(u);if(!Array.isArray(n)||!i||!u)return!1;for(let m=0;m<n.length;m++){const i=n[m];let u=null;let g=null;if("string"==typeof i){u=this.bufferify(i);g=!0}else if(Array.isArray(i)){g=0===i[0];u=this.bufferify(i[1])}else if(a.Buffer.isBuffer(i)){u=i;g=!0}else{if(!(i instanceof Object))throw new Error("Expected node to be of type string or object");u=this.bufferify(i.data);g="left"===i.position}const y=[];if(this.isBitcoinTree){y.push(o.default(d));y[g?"unshift":"push"](o.default(u));d=this.hashFn(this.concatenator(y));d=o.default(this.hashFn(d))}else if(this.sortPairs)if(-1===a.Buffer.compare(d,u)){y.push(d,u);d=this.hashFn(this.concatenator(y))}else{y.push(u,d);d=this.hashFn(this.concatenator(y))}else{y.push(d);y[g?"unshift":"push"](u);d=this.hashFn(this.concatenator(y))}}return 0===a.Buffer.compare(d,u)}verifyMultiProof(n,o,i,u,d){const m=this.isUnevenTree();if(m)return this.verifyMultiProofForUnevenTree(n,o,i,u,d);const g=Math.ceil(Math.log2(u));n=this.bufferify(n);i=i.map(n=>this.bufferify(n));d=d.map(n=>this.bufferify(n));const y={};for(const[a,N]of this.zip(o,i))y[Math.pow(2,g)+a]=N;for(const[a,N]of this.zip(this.getProofIndices(o,g),d))y[a]=N;let v=Object.keys(y).map(n=>+n).sort((n,a)=>n-a);v=v.slice(0,v.length-1);let x=0;for(;x<v.length;){const n=v[x];if(n>=2&&{}.hasOwnProperty.call(y,1^n)){let o=[y[n-n%2],y[n-n%2+1]];this.sortPairs&&(o=o.sort(a.Buffer.compare));const i=o[1]?this.hashFn(this.concatenator(o)):o[0];y[n/2|0]=i;v.push(n/2|0)}x+=1}return!o.length||{}.hasOwnProperty.call(y,1)&&y[1].equals(n)}verifyMultiProofWithFlags(n,o,i,u){n=this.bufferify(n);o=o.map(this.bufferify);i=i.map(this.bufferify);const d=o.length;const m=u.length;const g=[];let y=0;let v=0;let x=0;for(let N=0;N<m;N++){const n=u[N]?y<d?o[y++]:g[v++]:i[x++];const m=y<d?o[y++]:g[v++];const k=[n,m].sort(a.Buffer.compare);g[N]=this.hashFn(this.concatenator(k))}return 0===a.Buffer.compare(g[m-1],n)}verifyMultiProofForUnevenTree(n,a,o,i,u){n=this.bufferify(n);o=o.map(n=>this.bufferify(n));u=u.map(n=>this.bufferify(n));const d=this.calculateRootForUnevenTree(a,o,i,u);return n.equals(d)}getDepth(){return this.getLayers().length-1}getLayersAsObject(){const n=this.getLayers().map(n=>n.map(n=>this.bufferToHex(n,!1)));const a=[];for(let o=0;o<n.length;o++){const i=[];for(let u=0;u<n[o].length;u++){const d={[n[o][u]]:null};if(a.length){d[n[o][u]]={};const i=a.shift();const m=Object.keys(i)[0];d[n[o][u]][m]=i[m];if(a.length){const i=a.shift();const m=Object.keys(i)[0];d[n[o][u]][m]=i[m]}}i.push(d)}a.push(...i)}return a[0]}static verify(a,o,u,d=i.default,m={}){const g=new n([],d,m);return g.verify(a,o,u)}static getMultiProof(a,o){const i=new n([]);return i.getMultiProof(a,o)}resetTree(){this.leaves=[];this.layers=[]}getPairNode(n,a){const o=a%2==0?a+1:a-1;return o<n.length?n[o]:null}toTreeString(){const n=this.getLayersAsObject();return u.default.asTree(n,!0)}toString(){return this.toTreeString()}isUnevenTree(n){const a=(null==n?void 0:n.length)||this.getDepth();return!this.isPowOf2(a)}isPowOf2(n){return n&&!(n&n-1)}isValidLeafIndex(n){return n>=0&&n<this.getLeafCount()}calculateRootForUnevenTree(n,a,o,i){const u=this.zip(n,a).sort(([n],[a])=>n-a);const d=u.map(([n])=>n);const m=this.getProofIndicesForUnevenTree(d,o);let g=0;const y=[];for(let x=0;x<m.length;x++){const n=m[x];const a=g;g+=n.length;y[x]=this.zip(n,i.slice(a,g))}const v=[u];for(let x=0;x<y.length;x++){const n=y[x].concat(v[x]).sort(([n],[a])=>n-a).map(([,n])=>n);const a=v[x].map(([n])=>n);const o=[...new Set(a.map(n=>n%2==0?n/2:n%2==0?(n+1)/2:(n-1)/2))];const i=[];for(let u=0;u<o.length;u++){const a=o[u];const d=n[2*u];const m=n[2*u+1];const g=m?this.hashFn(this.concatenator([d,m])):d;i.push([a,g])}v.push(i)}return v[v.length-1][0][1]}};qM.MerkleTree=m;"undefined"!=typeof window&&(window.MerkleTree=m);qM.default=m;return qM}var wF={};var xF;function requireMerkleMountainRange(){if(xF)return wF;xF=1;var n=wF&&wF.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(wF,"__esModule",{value:!0});wF.MerkleMountainRange=void 0;const a=requireBuffer();const o=n(requireSha256());const i=n(requireBase());let u=class extends i.default{constructor(n=o.default,i=[],u,d,m){super();this.root=a.Buffer.alloc(0);this.size=0;this.width=0;this.hashes={};this.data={};i=i.map(this.bufferify);this.hashFn=this.bufferifyFn(n);this.hashLeafFn=u;this.peakBaggingFn=d;this.hashBranchFn=m;for(const a of i)this.append(a)}append(n){n=this.bufferify(n);const a=this.hashFn(n);const o=this.bufferToHex(a);this.data[o]&&this.bufferToHex(this.hashFn(this.data[o]))===o||(this.data[o]=n);const i=this.hashLeaf(this.size+1,a);this.hashes[this.size+1]=i;this.width+=1;const u=this.getPeakIndexes(this.width);this.size=this.getSize(this.width);const d=[];for(let m=0;m<u.length;m++)d[m]=this._getOrCreateNode(u[m]);this.root=this.peakBagging(this.width,d)}hashLeaf(n,o){o=this.bufferify(o);return this.hashLeafFn?this.bufferify(this.hashLeafFn(n,o)):this.hashFn(a.Buffer.concat([this.bufferify(n),o]))}hashBranch(n,o,i){return this.hashBranchFn?this.bufferify(this.hashBranchFn(n,o,i)):this.hashFn(a.Buffer.concat([this.bufferify(n),this.bufferify(o),this.bufferify(i)]))}getPeaks(){const n=this.getPeakIndexes(this.width);const a=[];for(let o=0;o<n.length;o++)a[o]=this.hashes[n[o]];return a}getLeafIndex(n){return n%2==1?this.getSize(n):this.getSize(n-1)+1}getPeakIndexes(n){const a=this.numOfPeaks(n);const o=[];let i=0;let u=0;for(let d=255;d>0;d--)if(n&1<<d-1){u=u+(1<<d)-1;o[i++]=u;if(o.length>=a)break}if(i!==o.length)throw new Error("invalid bit calculation");return o}numOfPeaks(n){let a=n;let o=0;for(;a>0;){a%2==1&&o++;a>>=1}return o}peakBagging(n,o){const i=this.getSize(n);if(this.numOfPeaks(n)!==o.length)throw new Error("received invalid number of peaks");return 0!==n||o.length?this.peakBaggingFn?this.bufferify(this.peakBaggingFn(i,o)):this.hashFn(a.Buffer.concat([this.bufferify(i),...o.map(this.bufferify)])):a.Buffer.alloc(0)}getSize(n){return(n<<1)-this.numOfPeaks(n)}getRoot(){return this.root}getHexRoot(){return this.bufferToHex(this.getRoot())}getNode(n){return this.hashes[n]}mountainHeight(n){let a=1;for(;1<<a<=n+a;)a++;return a-1}heightAt(n){let a=n;let o=0;let i=0;for(;a>o;){a-=(1<<i)-1;i=this.mountainHeight(a);o=(1<<i)-1}return i-(o-a)}isLeaf(n){return 1===this.heightAt(n)}getChildren(n){const a=n-(1<<this.heightAt(n)-1);const o=n-1;if(a===o)throw new Error("not a parent");return[a,o]}getMerkleProof(n){if(n>this.size)throw new Error("out of range");if(!this.isLeaf(n))throw new Error("not a leaf");const a=this.root;const o=this.width;const i=this.getPeakIndexes(this.width);const u=[];let d=0;for(let x=0;x<i.length;x++){u[x]=this.hashes[i[x]];i[x]>=n&&0===d&&(d=i[x])}let m=0;let g=0;let y=this.heightAt(d);const v=[];for(;d!==n;){y--;[m,g]=this.getChildren(d);d=n<=m?m:g;v[y-1]=this.hashes[n<=m?g:m]}return{root:a,width:o,peakBagging:u,siblings:v}}verify(n,a,o,i,u,d){i=this.bufferify(i);const m=this.getSize(a);if(m<o)throw new Error("index is out of range");if(!n.equals(this.peakBagging(a,u)))throw new Error("invalid root hash from the peaks");let g=0;let y;const v=this.getPeakIndexes(a);for(let A=0;A<v.length;A++)if(v[A]>=o){y=u[A];g=v[A];break}if(!y)throw new Error("target not found");let x=d.length+1;const N=new Array(x);let k=0;let E=0;for(;x>0;){N[--x]=g;if(g===o)break;[k,E]=this.getChildren(g);g=o>k?E:k}let S;for(;x<N.length;){g=N[x];S=0===x?this.hashLeaf(g,this.hashFn(i)):g-1===N[x-1]?this.hashBranch(g,d[x-1],S):this.hashBranch(g,S,d[x-1]);x++}if(!S.equals(y))throw new Error("hashed peak is invalid");return!0}peaksToPeakMap(n,a){const o={};let i=0;let u=0;let d=a.length;for(let m=1;m<=32;m++){i=32-m;u=1<<m-1;o[i]=0!==(n&u)?a[--d]:0}if(0!==d)throw new Error("invalid number of peaks");return o}peakMapToPeaks(n,a){const o=this.numOfPeaks(n);const i=new Array(o);let u=0;for(let d=0;d<32;d++)0!==a[d]&&(i[u++]=a[d]);if(u!==o)throw new Error("invalid number of peaks");return i}peakUpdate(n,a,o){const i={};const u=n+1;let d=this.getLeafIndex(u);let m=this.hashLeaf(d,o);let g=0;let y=0;let v=!1;let x=!1;let N=!1;for(let k=1;k<=32;k++){g=32-k;if(N)i[g]=a[g];else{y=1<<k-1;v=0!==(n&y);x=0!==(u&y);d++;v&&(m=this.hashBranch(d,a[g],m));if(x){i[g]=v?a[g]:m;N=!0}else i[g]=0}}return i}rollUp(n,a,o,i){if(!n.equals(this.peakBagging(a,o)))throw new Error("invalid root hash from the peaks");let u=a;let d=this.peaksToPeakMap(a,o);for(let m=0;m<i.length;m++){d=this.peakUpdate(u,d,i[m]);u++}return this.peakBagging(u,this.peakMapToPeaks(u,d))}_getOrCreateNode(n){if(n>this.size)throw new Error("out of range");if(!this.hashes[n]){const[a,o]=this.getChildren(n);const i=this._getOrCreateNode(a);const u=this._getOrCreateNode(o);this.hashes[n]=this.hashBranch(n,i,u)}return this.hashes[n]}};wF.MerkleMountainRange=u;"undefined"!=typeof window&&(window.MerkleMountainRange=u);wF.default=u;return wF}var NF={};var kF;function requireIncrementalMerkleTree(){if(kF)return NF;kF=1;var n=NF&&NF.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(NF,"__esModule",{value:!0});NF.IncrementalMerkleTree=void 0;const a=n(requireBase());const o=n(requireTreeify());let i=class extends a.default{constructor(n,a){super();this.hashFn=n;a.depth&&(this.depth=a.depth);a.arity&&(this.arity=a.arity);if(this.depth<1)throw new Error("depth must be greater than 0");if(this.arity<1)throw new Error("arity must be greater than 0");const o=[];let i=a.zeroValue;this.zeroValue=i;this.zeroes=[];if(this.depth)for(let u=0;u<this.depth;u++){this.zeroes.push(i);o[u]=[];i=this.hashFn(Array(this.arity).fill(i))}this.nodes=o;this.root=i}getRoot(){return this.root}getHexRoot(){return this.bufferToHex(this.bufferify(this.getRoot()))}insert(n){if(this.depth&&this.arity&&this.nodes[0].length>=this.getMaxLeaves())throw new Error("tree is full");let a=n;let o=this.nodes[0].length;for(let i=0;i<this.depth;i+=1){const n=o%this.arity;const u=o-n;const d=u+this.arity;const m=[];this.nodes[i][o]=a;for(let a=u;a<d;a+=1)a<this.nodes[i].length?m.push(this.nodes[i][a]):m.push(this.zeroes[i]);a=this.hashFn(m);o=Math.floor(o/this.arity)}this.root=a}delete(n){this.update(n,this.zeroValue)}update(n,a){if(n<0||n>=this.nodes[0].length)throw new Error("out of bounds");let o=a;for(let i=0;i<this.depth;i+=1){const a=n%this.arity;const u=n-a;const d=u+this.arity;const m=[];this.nodes[i][n]=o;for(let n=u;n<d;n+=1)n<this.nodes[i].length?m.push(this.nodes[i][n]):m.push(this.zeroes[i]);o=this.hashFn(m);n=Math.floor(n/this.arity)}this.root=o}getDepth(){return this.depth}getArity(){return this.arity}getMaxLeaves(){return Math.pow(this.depth,this.arity)}indexOf(n){return this.nodes[0].indexOf(n)}getLeaves(){const n=this.copyList(this.nodes[0]);const a=this.nodes[0].length;for(let o=a;o<this.getMaxLeaves();o++)n[o]=this.zeroValue;return n}copyList(n){return n.map(n=>BigInt(n))}getLayers(){const n=[];for(const a of this.nodes)n.push(this.copyList(a));if(n[0].length<this.getMaxLeaves()){let a=n[0].length;for(let o=a;o<this.getMaxLeaves();o++)n[0][o]=this.zeroValue;for(let o=0;o<this.depth;o++){const i=a%this.arity;const u=a-i;const d=u+this.arity;for(let a=u;a<d;a++)a>=n[o].length&&(n[o][a]=this.zeroes[o]);a=Math.floor(a/this.arity)}}n.push([this.root]);return n}getHexLayers(){return this.getLayers().reduce((n,a)=>{Array.isArray(a)?n.push(a.map(n=>this.bufferToHex(this.bufferify(n)))):n.push(a);return n},[])}getLayersAsObject(){const n=this.getLayers().map(n=>n.map(n=>this.bufferToHex(this.bufferify(n),!1)));const a=[];for(let o=0;o<n.length;o++){const i=[];for(let u=0;u<n[o].length;u++){const d={[n[o][u]]:null};if(a.length){d[n[o][u]]={};const i=a.shift();const m=Object.keys(i)[0];d[n[o][u]][m]=i[m];if(a.length){const i=a.shift();const m=Object.keys(i)[0];d[n[o][u]][m]=i[m]}}i.push(d)}a.push(...i)}return a[0]}computeRoot(){let n;let a=this.nodes[0].length;for(let o=0;o<this.depth;o+=1){const i=a%this.arity;const u=a-i;const d=u+this.arity;const m=[];for(let n=u;n<d;n+=1)n<this.nodes[o].length?m.push(this.nodes[o][n]):m.push(this.zeroes[o]);n=this.hashFn(m);a=Math.floor(a/this.arity)}return n}getProof(n){if(n<0||n>=this.nodes[0].length)throw new Error("The leaf does not exist in this tree");const a=[];const o=[];const i=n;for(let u=0;u<this.depth;u+=1){const i=n%this.arity;const d=n-i;const m=d+this.arity;o[u]=i;a[u]=[];for(let o=d;o<m;o+=1)o!==n&&(o<this.nodes[u].length?a[u].push(this.nodes[u][o]):a[u].push(this.zeroes[u]));n=Math.floor(n/this.arity)}return{root:this.root,leaf:this.nodes[0][i],pathIndices:o,siblings:a}}verify(n){let a=n.leaf;for(let o=0;o<n.siblings.length;o+=1){const i=n.siblings[o].slice();i.splice(n.pathIndices[o],0,a);a=this.hashFn(i)}return n.root===a}toString(){return this.toTreeString()}toTreeString(){const n=this.getLayersAsObject();return o.default.asTree(n,!0)}};NF.IncrementalMerkleTree=i;"undefined"!=typeof window&&(window.IncrementalMerkleTree=i);NF.default=i;return NF}var CF={};var EF;function requireMerkleSumTree(){if(EF)return CF;EF=1;Object.defineProperty(CF,"__esModule",{value:!0});CF.MerkleSumTree=CF.ProofStep=CF.Leaf=CF.Bucket=void 0;const n=requireBase();class a{constructor(n,a){this.size=BigInt(n);this.hashed=a;this.parent=null;this.left=null;this.right=null}}CF.Bucket=a;class o{constructor(n,a,o){this.hashFn=n;this.rng=a.map(n=>BigInt(n));this.data=o}getBucket(){let n;n=this.data?this.hashFn(this.data):Buffer.alloc(32);return new a(BigInt(this.rng[1])-BigInt(this.rng[0]),n)}}CF.Leaf=o;class i{constructor(n,a){this.bucket=n;this.right=a}}CF.ProofStep=i;let u=class o extends n.Base{constructor(n,i){super();this.leaves=n;this.hashFn=i;o.checkConsecutive(n);this.buckets=[];for(const a of n)this.buckets.push(a.getBucket());let u=[];for(const a of this.buckets)u.push(a);for(;1!==u.length;){const n=[];for(;u.length;)if(u.length>=2){const o=u.shift();const i=u.shift();const d=o.size+i.size;const m=this.hashFn(Buffer.concat([this.sizeToBuffer(o.size),this.bufferify(o.hashed),this.sizeToBuffer(i.size),this.bufferify(i.hashed)]));const g=new a(d,m);i.parent=g;o.parent=i.parent;o.right=i;i.left=o;n.push(g)}else n.push(u.shift());u=n}this.root=u[0]}sizeToBuffer(n){const a=Buffer.alloc(8);const o=new DataView(a.buffer);o.setBigInt64(0,BigInt(n),!1);return a}static checkConsecutive(n){let a=BigInt(0);for(const o of n){if(o.rng[0]!==a)throw new Error("leaf ranges are invalid");a=BigInt(o.rng[1])}}getProof(n){let a=this.buckets[Number(n)];const o=[];for(;a&&a.parent;){const n=!!a.right;const u=a.right?a.right:a.left;a=a.parent;o.push(new i(u,n))}return o}sum(n){let a=BigInt(0);for(const o of n)a+=BigInt(o);return a}verifyProof(n,o,i){const u=[this.sum(i.filter(n=>!n.right).map(n=>n.bucket.size)),BigInt(n.size)-this.sum(i.filter(n=>n.right).map(n=>n.bucket.size))];if(u[0]!==o.rng[0]||u[1]!==o.rng[1])return!1;let d=o.getBucket();let m;for(const g of i){m=g.right?this.hashFn(Buffer.concat([this.sizeToBuffer(d.size),this.bufferify(d.hashed),this.sizeToBuffer(g.bucket.size),this.bufferify(g.bucket.hashed)])):this.hashFn(Buffer.concat([this.sizeToBuffer(g.bucket.size),this.bufferify(g.bucket.hashed),this.sizeToBuffer(d.size),this.bufferify(d.hashed)]));d=new a(BigInt(d.size)+BigInt(g.bucket.size),m)}return d.size===n.size&&d.hashed.toString("hex")===n.hashed.toString("hex")}};CF.MerkleSumTree=u;"undefined"!=typeof window&&(window.MerkleSumTree=u);CF.default=u;return CF}var SF={};var AF;function requireMerkleRadixTree(){if(AF)return SF;AF=1;var n=SF&&SF.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(SF,"__esModule",{value:!0});SF.MerkleRadixTree=void 0;const a=n(requireBase());class o{constructor(n="",a=null,o){this.key=n;this.value=a;this.children=new Map;this.hashFn=o;this.hash=this.computeHash()}computeHash(){let n=this.hashFn("");n=Buffer.concat([n,a.default.bufferify(this.key),null!=this.value?a.default.bufferify(this.value):Buffer.alloc(0)]);for(const a of this.children.values())n=Buffer.concat([n,a.hash]);const o=this.hashFn(n);return o}updateHash(){this.hash=this.computeHash()}}let i=class extends a.default{constructor(n){super();this.hashFn=this.bufferifyFn(n);this.root=new o("",null,this.hashFn)}insert(n,a){let i=this.root;let u=0;for(;n.length>0;){const d=[...i.children.values()].find(a=>n.startsWith(a.key));if(!d){i.children.set(n,new o(n,a,this.hashFn));i.updateHash();return}u=this.commonPrefixLength(n,d.key);if(u!==d.key.length){const m=n.slice(0,u);const g=d.key.slice(u);const y=new o(m,null,this.hashFn);i.children.delete(d.key);i.children.set(m,y);y.children.set(g,d);d.key=g;if(u<n.length){const i=n.slice(u);y.children.set(i,new o(i,a,this.hashFn))}else y.value=a;i.updateHash();y.updateHash();return}i=d;n=n.slice(u)}i.value=a;i.updateHash()}lookup(n){let a=this.root;for(;n.length>0;){const o=[...a.children.values()].find(a=>n.startsWith(a.key));if(!o)return null;const i=this.commonPrefixLength(n,o.key);if(i!==o.key.length)return null;a=o;n=n.slice(i)}return a.value}commonPrefixLength(n,a){let o=0;for(;o<n.length&&o<a.length&&n[o]===a[o];)o++;return o}generateProof(n){let a=this.root;const o=[];for(;n.length>0;){const i=[];for(const o of a.children.values())o.key!==n&&i.push({key:o.key,hash:o.hash});o.push({key:a.key,hash:a.hash,siblings:i});const u=[...a.children.values()].find(a=>n.startsWith(a.key));if(!u)return null;const d=this.commonPrefixLength(n,u.key);if(d!==u.key.length)return null;a=u;n=n.slice(d)}o.push({key:a.key,hash:a.hash,siblings:[]});return o}verifyProof(n,a){if(!n||0===n.length)return!1;let o=n[n.length-1].hash;for(let i=n.length-2;i>=0;i--){const a=n[i];let u=Buffer.concat([this.hashFn(""),this.bufferify(a.key),o]);for(const n of a.siblings)u=Buffer.concat([u,n.hash]);o=this.hashFn(u)}return o.equals(a)}};SF.MerkleRadixTree=i;return SF}var _F={};var TF;function requireUnifiedBinaryTree(){if(TF)return _F;TF=1;!function(n){Object.defineProperty(n,"__esModule",{value:!0});n.UnifiedBinaryTree=n.InternalNode=n.StemNode=n.chunkifyCode=n.getTreeKeyForCodeChunk=n.getTreeKeyForStorageSlot=n.getTreeKeyForCodeHash=n.getTreeKeyForBasicData=n.getTreeKey=n.treeHash=n.oldStyleAddressToAddress32=n.push32=n.push1=n.pushOffset=n.MAIN_STORAGE_OFFSET=n.STEM_SUBTREE_WIDTH=n.CODE_OFFSET=n.HEADER_STORAGE_OFFSET=n.CODE_HASH_LEAF_KEY=n.BASIC_DATA_LEAF_KEY=void 0;const a=requireBuffer();const o=requireBase();n.BASIC_DATA_LEAF_KEY=0;n.CODE_HASH_LEAF_KEY=1;n.HEADER_STORAGE_OFFSET=64;n.CODE_OFFSET=128;n.STEM_SUBTREE_WIDTH=256;n.MAIN_STORAGE_OFFSET=256;n.pushOffset=95;n.push1=n.pushOffset+1;n.push32=n.pushOffset+32;function oldStyleAddressToAddress32(n){if(20!==n.length)throw new Error("Address must be 20 bytes.");return a.Buffer.concat([a.Buffer.alloc(12,0),n])}n.oldStyleAddressToAddress32=oldStyleAddressToAddress32;function treeHash(n,a){return treeHashFn(a)(n)}n.treeHash=treeHash;function treeHashFn(n){return o.Base.bufferifyFn(n)}function getTreeKey(n,o,i,u){if(32!==n.length)throw new Error("Address must be 32 bytes.");const d=treeHashFn(u);const m=a.Buffer.alloc(32,0);m.writeUInt32LE(o,0);const g=d(a.Buffer.concat([n,m]),u).subarray(0,31);return a.Buffer.concat([g,a.Buffer.from([i])])}n.getTreeKey=getTreeKey;function getTreeKeyForBasicData(a,o){return getTreeKey(a,0,n.BASIC_DATA_LEAF_KEY,o)}n.getTreeKeyForBasicData=getTreeKeyForBasicData;function getTreeKeyForCodeHash(a,o){return getTreeKey(a,0,n.CODE_HASH_LEAF_KEY,o)}n.getTreeKeyForCodeHash=getTreeKeyForCodeHash;function getTreeKeyForStorageSlot(a,o,i){let u;u=o<n.CODE_OFFSET-n.HEADER_STORAGE_OFFSET?n.HEADER_STORAGE_OFFSET+o:n.MAIN_STORAGE_OFFSET+o;return getTreeKey(a,Math.floor(u/n.STEM_SUBTREE_WIDTH),u%n.STEM_SUBTREE_WIDTH,i)}n.getTreeKeyForStorageSlot=getTreeKeyForStorageSlot;function getTreeKeyForCodeChunk(a,o,i){const u=n.CODE_OFFSET+o;return getTreeKey(a,Math.floor(u/n.STEM_SUBTREE_WIDTH),u%n.STEM_SUBTREE_WIDTH,i)}n.getTreeKeyForCodeChunk=getTreeKeyForCodeChunk;function chunkifyCode(o){const i=o.length%31;0!==i&&(o=a.Buffer.concat([o,a.Buffer.alloc(31-i,0)]));const u=new Array(o.length+32).fill(0);let d=0;for(;d<o.length;){const a=o[d];let i=0;a>=n.push1&&a<=n.push32&&(i=a-n.pushOffset);d+=1;for(let n=0;n<i;n++)u[d+n]=i-n;d+=i}const m=[];for(let n=0;n<o.length;n+=31){const i=Math.min(u[n],31);const d=a.Buffer.concat([a.Buffer.from([i]),o.slice(n,n+31)]);m.push(d)}return m}n.chunkifyCode=chunkifyCode;class i{constructor(n){this.nodeType="stem";if(31!==n.length)throw new Error("Stem must be 31 bytes.");this.stem=n;this.values=new Array(256).fill(null)}setValue(n,a){if(32!==a.length)throw new Error("Value must be 32 bytes.");this.values[n]=a}}n.StemNode=i;class u{constructor(){this.left=null;this.right=null;this.nodeType="internal"}}n.InternalNode=u;class d{constructor(n){this.root=null;this.hashFn=o.Base.bufferifyFn(n)}insert(n,a){if(32!==n.length)throw new Error("Key must be 32 bytes.");if(32!==a.length)throw new Error("Value must be 32 bytes.");const o=n.slice(0,31);const u=n[31];if(null!==this.root)this.root=this.insertRecursive(this.root,o,u,a,0);else{this.root=new i(o);this.root.setValue(u,a)}}insertRecursive(n,a,o,u,d){if(d>=248)throw new Error("Depth must be less than 248.");if(null===n){const n=new i(a);n.setValue(o,u);return n}const m=this.bytesToBits(a);if(n instanceof i){if(n.stem.equals(a)){n.setValue(o,u);return n}const i=this.bytesToBits(n.stem);return this.splitLeaf(n,m,i,o,u,d)}{const i=m[d];0===i?n.left=this.insertRecursive(n.left,a,o,u,d+1):n.right=this.insertRecursive(n.right,a,o,u,d+1);return n}}bytesToBits(n){const a=[];for(const o of n)for(let n=0;n<8;n++)a.push(o>>7-n&1);return a}bitsToBytes(n){if(n.length%8!=0)throw new Error("Number of bits must be a multiple of 8.");const o=[];for(let a=0;a<n.length;a+=8){let i=0;for(let o=0;o<8;o++)i|=n[a+o]<<7-o;o.push(i)}return a.Buffer.from(o)}hashData(n){const o=a.Buffer.alloc(64,0);const i=a.Buffer.alloc(32,0);if(null===n||n.equals(o))return i;if(32!==n.length&&64!==n.length)throw new Error("Data must be 32 or 64 bytes.");return this.hashFn(n)}merkelize(){const computeMerkle=n=>{const o=a.Buffer.alloc(32,0);if(null===n)return o;if(n instanceof u){const o=computeMerkle(n.left);const i=computeMerkle(n.right);return this.hashData(a.Buffer.concat([o,i]))}const i=n.values.map(n=>this.hashData(n));for(;i.length>1;){const n=[];for(let o=0;o<i.length;o+=2)n.push(this.hashData(a.Buffer.concat([i[o],i[o+1]])));i.splice(0,i.length,...n)}return this.hashData(a.Buffer.concat([n.stem,a.Buffer.from([0]),i[0]]))};return computeMerkle(this.root)}update(n,a){this.insert(n,a)}insertBatch(n){for(const{key:a,value:o}of n)this.insert(a,o)}serialize(){function serializeNode(n){return n?n instanceof i?{nodeType:"stem",stem:n.stem.toString("hex"),values:n.values.map(n=>n?n.toString("hex"):null)}:{nodeType:"internal",left:serializeNode(n.left),right:serializeNode(n.right)}:null}const n={root:serializeNode(this.root)};return a.Buffer.from(JSON.stringify(n),"utf8")}static deserialize(n,o){const m=JSON.parse(n.toString("utf8"));function deserializeNode(n){if(null===n)return null;if("stem"===n.nodeType){const o=new i(a.Buffer.from(n.stem,"hex"));o.values=n.values.map(n=>null!==n?a.Buffer.from(n,"hex"):null);return o}if("internal"===n.nodeType){const a=new u;a.left=deserializeNode(n.left);a.right=deserializeNode(n.right);return a}return null}const g=new d(o);g.root=deserializeNode(m.root);return g}splitLeaf(n,a,o,d,m,g){if(a[g]===o[g]){const i=new u;const y=a[g];0===y?i.left=this.splitLeaf(n,a,o,d,m,g+1):i.right=this.splitLeaf(n,a,o,d,m,g+1);return i}{const o=new u;const y=a[g];const v=this.bitsToBytes(a);const x=new i(v);x.setValue(d,m);if(0===y){o.left=x;o.right=n}else{o.right=x;o.left=n}return o}}}n.UnifiedBinaryTree=d}(_F);return _F}var jF;function requireDist(){if(jF)return HM;jF=1;!function(n){var a=HM&&HM.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(n,"__esModule",{value:!0});n.MerkleTree=void 0;const o=a(requireMerkleTree());n.MerkleTree=o.default;var i=requireMerkleMountainRange();Object.defineProperty(n,"MerkleMountainRange",{enumerable:!0,get:function(){return i.MerkleMountainRange}});var u=requireIncrementalMerkleTree();Object.defineProperty(n,"IncrementalMerkleTree",{enumerable:!0,get:function(){return u.IncrementalMerkleTree}});var d=requireMerkleSumTree();Object.defineProperty(n,"MerkleSumTree",{enumerable:!0,get:function(){return d.MerkleSumTree}});var m=requireMerkleRadixTree();Object.defineProperty(n,"MerkleRadixTree",{enumerable:!0,get:function(){return m.MerkleRadixTree}});var g=requireUnifiedBinaryTree();Object.defineProperty(n,"UnifiedBinaryTree",{enumerable:!0,get:function(){return g.UnifiedBinaryTree}});n.default=o.default}(HM);return HM}var IF=requireDist();const normalizeAddress=n=>{try{return getAddress$1(n.trim())}catch(a){console.warn("Invalid address:",n,a);return n.trim().toLowerCase()}};const hashAddress=n=>{const a=normalizeAddress(n);return keccak256(solidityPacked(["address"],[a]))};const generateMerkleData=n=>{console.log("🔧 === GENERATE MERKLE DATA DEBUG ===");console.log("Original addresses:",n);const a=n.map(normalizeAddress);console.log("Normalized addresses:",a);const o=a.map(hashAddress);console.log("Generated leaves:",o);const i=new IF.MerkleTree(o,keccak256,{sortPairs:!0});const u=i.getHexRoot();const d={};console.log("Generating proofs for each address:");a.forEach(n=>{const a=hashAddress(n);const o=i.getHexProof(a);d[n]=o;console.log(`  ${n}:`,o)});console.log("Final root:",u);console.log("Final proofs object:",d);console.log("🔧 === END GENERATE MERKLE DATA DEBUG ===");return{root:u,proofs:d,tree:i}};const isValidAddress=n=>{try{getAddress$1(n);return!0}catch{return!1}};const validateAddresses=n=>{const a=[];const o=[];n.forEach(n=>{isValidAddress(n)?a.push(normalizeAddress(n)):o.push(n)});return{valid:a,invalid:o}};const ManageWLsTab=({collection:n})=>{const[a,o]=ot.useState("Whitelist");const[i,u]=ot.useState([]);const[d,m]=ot.useState("");const[g,y]=ot.useState([]);const[v,x]=ot.useState(0);const[N,k]=ot.useState({visible:!1,message:"",type:"success"});ot.useEffect(()=>{if(N.visible){const n=setTimeout(()=>k(n=>({...n,visible:!1})),3e3);return()=>clearTimeout(n)}},[N.visible]);const showToast=(n,a="success")=>{k({visible:!0,message:n,type:a})};ot.useEffect(()=>{if(!n?.address)return;const o=JSON.parse(localStorage.getItem(`phases_${n.address}`))||{};x(o[a]?.allocated||0);const i=`${n.address}_${a}_whitelist`;const u=JSON.parse(localStorage.getItem(i))||[];y(u)},[n?.address,a]);const handleFileUpload=n=>{const a=n.target.files[0];if(a){const n=new FileReader;n.onload=n=>{const a=n.target.result;const o=a.split(/\r?\n/).filter(Boolean);u(o)};n.readAsText(a)}};const handleManualInput=n=>{const a=n.target.value;const o=a.split(/\r?\n/).filter(Boolean);u(o)};const handleSave=()=>{const o="Public"===a;const d=g.length+i.length;const{valid:m,invalid:x}=validateAddresses(i);if(x.length>0){showToast(`❌ Invalid addresses found: ${x.join(", ")}`,"error");return}if(!o&&d>v){showToast(`❌ Too many addresses! Allocated: ${v}, Already saved: ${g.length}, New: ${i.length}`,"error");return}const N=Array.from(new Set([...g,...m]));const k=`${n.address}_${a}_whitelist`;localStorage.setItem(k,JSON.stringify(N));y(N);u([]);showToast(`✅ Saved ${N.length} addresses for ${a}`);regenerateProofs(N);!o&&N.length>0&&saveWhitelistToServer(N)};const regenerateProofs=o=>{if(0===o.length)return;const{root:i,proofs:u}=generateMerkleData(o);const d=`${n.address}_${a}_merkle_root`;const m=`${n.address}_${a}_merkle_proofs`;localStorage.setItem(d,i);localStorage.setItem(m,JSON.stringify(u));console.log("✅ Merkle root and proofs saved for",a)};const saveWhitelistToServer=async o=>{try{const i=await fetch("/api/whitelist/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collection:n.address,phase:a,addresses:o})});if(i.ok){const o=await i.json();const u=`${n.address}_${a}_whitelist_ipfs`;localStorage.setItem(u,o.data.ipfsUrl);showToast(`🌐 Whitelist also saved to IPFS (${o.data.addressCount} addresses)`)}else showToast("⚠️ Local storage saved, but IPFS backup failed","warning")}catch(i){console.error("❌ Server save failed:",i);showToast("⚠️ Local storage saved, but IPFS backup failed","warning")}};const removeAddress=o=>{const i=g.filter(n=>n!==o);y(i);const u=`${n.address}_${a}_whitelist`;localStorage.setItem(u,JSON.stringify(i));showToast(`✅ Removed ${o}`);regenerateProofs(i)};const E=g.filter(n=>n.toLowerCase().includes(d.toLowerCase()));return n?at.jsxs("div",{className:"space-y-6 pb-24",children:[at.jsxs("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 p-8 shadow-2xl",children:[at.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Select Phase"}),at.jsxs("div",{className:"flex gap-4",children:[at.jsx("button",{onClick:()=>o("Whitelist"),className:"px-4 py-2 rounded-lg font-medium transition-all duration-200 "+("Whitelist"===a?"bg-gradient-to-r from-blue-500 to-pink-500 text-white shadow-lg":"bg-zinc-700 hover:bg-zinc-600 text-white"),children:"Whitelist"}),at.jsx("button",{onClick:()=>o("FCFS"),className:"px-4 py-2 rounded-lg font-medium transition-all duration-200 "+("FCFS"===a?"bg-gradient-to-r from-blue-500 to-pink-500 text-white shadow-lg":"bg-zinc-700 hover:bg-zinc-600 text-white"),children:"FCFS"})]})]}),at.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[at.jsxs("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 p-6 shadow-2xl",children:[at.jsx("div",{className:"text-2xl font-bold text-blue-400",children:g.length}),at.jsx("div",{className:"text-sm text-zinc-400",children:"Total Addresses"})]}),at.jsxs("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 p-6 shadow-2xl",children:[at.jsx("div",{className:"text-2xl font-bold text-green-400",children:v}),at.jsx("div",{className:"text-sm text-zinc-400",children:"Allocated Slots"})]}),at.jsxs("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 p-6 shadow-2xl",children:[at.jsx("div",{className:"text-2xl font-bold text-pink-400",children:i.length}),at.jsx("div",{className:"text-sm text-zinc-400",children:"New Addresses"})]})]}),at.jsxs("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 p-8 shadow-2xl",children:[at.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Add Addresses"}),at.jsx("div",{className:"mb-4",children:at.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-zinc-700 hover:bg-zinc-600 rounded-lg cursor-pointer transition-colors duration-200",children:[at.jsx(XT,{className:"w-4 h-4"}),"Upload CSV/TXT File",at.jsx("input",{type:"file",accept:".csv,.txt",onChange:handleFileUpload,className:"hidden"})]})}),at.jsxs("div",{className:"mb-4",children:[at.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"Manual Input (one address per line)"}),at.jsx("textarea",{value:i.join("\n"),onChange:handleManualInput,placeholder:"0x1234...\\n0x5678...\\n0x9abc...",className:"w-full h-32 p-3 bg-zinc-900 border border-zinc-700 rounded-lg text-white placeholder-zinc-500 resize-none"})]}),at.jsx("button",{onClick:handleSave,disabled:0===i.length,className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-pink-500 text-white font-semibold rounded-lg hover:shadow-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Addresses"})]}),at.jsxs("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 p-8 shadow-2xl",children:[at.jsxs("div",{className:"flex items-center justify-between mb-4",children:[at.jsx("h4",{className:"text-lg font-semibold text-white",children:"Saved Addresses"}),at.jsx("input",{type:"text",placeholder:"Search addresses...",value:d,onChange:n=>m(n.target.value),className:"px-3 py-1 bg-zinc-900 border border-zinc-700 rounded-lg text-white placeholder-zinc-500 text-sm"})]}),at.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:E.map((n,a)=>at.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-900 rounded-lg",children:[at.jsx("span",{className:"text-sm font-mono text-zinc-300",children:n}),at.jsx("button",{onClick:()=>removeAddress(n),className:"text-red-400 hover:text-red-300 transition-colors duration-200",children:at.jsx(WT,{className:"w-4 h-4"})})]},a))})]}),N.visible&&at.jsx("div",{className:`fixed bottom-4 right-4 p-4 rounded-lg shadow-lg z-50 ${"success"===N.type?"bg-green-500":"error"===N.type?"bg-red-500":"bg-yellow-500"} text-white`,children:N.message})]}):at.jsx("div",{className:"text-center py-8",children:at.jsx("p",{className:"text-zinc-400",children:"No collection selected"})})};const BannerCropEditor=({imageUrl:n,onSave:a,onCancel:o,initialPosition:i="center center",initialFit:u="cover"})=>{const[d,m]=ot.useState({x:50,y:50,width:100,height:100});const[g,y]=ot.useState(!1);const[v,x]=ot.useState({x:0,y:0});const[N,k]=ot.useState(1);const[E,S]=ot.useState(0);const[A,_]=ot.useState(u);const[j,I]=ot.useState({width:0,height:0});const[O,R]=ot.useState([]);const B=ot.useRef(null);const M=ot.useRef(null);const z=[{name:"Desktop Banner",width:1200,height:400,ratio:3,description:"Оптимально для десктопа"},{name:"Mobile Banner",width:800,height:300,ratio:2.67,description:"Для мобильных устройств"},{name:"Wide Banner",width:1600,height:400,ratio:4,description:"Широкий формат"},{name:"Square Banner",width:800,height:800,ratio:1,description:"Квадратный формат"}];ot.useEffect(()=>{if(i){const[n,a]=i.split(" ");const o="left"===n?0:"right"===n?100:50;const u="top"===a?0:"bottom"===a?100:50;m(n=>({...n,x:o,y:u}))}},[i]);ot.useEffect(()=>{_(u)},[u]);ot.useEffect(()=>{if(n){const a=new Image;a.onload=()=>{const n={width:a.naturalWidth,height:a.naturalHeight};I(n);const o=n.width/n.height;const i=[];z.forEach(n=>{const a=Math.abs(o-n.ratio);i.push({...n,score:a,isOptimal:a<.5})});i.sort((n,a)=>n.score-a.score);R(i)};a.src=n}},[n]);const handleMouseDown=n=>{if(!B.current)return;const a=B.current.getBoundingClientRect();const o=(n.clientX-a.left)/a.width*100;const i=(n.clientY-a.top)/a.height*100;y(!0);x({x:o,y:i})};const handleMouseMove=n=>{if(!g||!B.current)return;const a=B.current.getBoundingClientRect();const o=(n.clientX-a.left)/a.width*100;const i=(n.clientY-a.top)/a.height*100;const u=(o-v.x)/N;const d=(i-v.y)/N;m(n=>({...n,x:Math.max(0,Math.min(100,n.x+u)),y:Math.max(0,Math.min(100,n.y+d))}));x({x:o,y:i})};const handleMouseUp=()=>{y(!1)};const handleZoomIn=()=>{k(n=>Math.min(3,n+.1))};const handleZoomOut=()=>{k(n=>Math.max(.5,n-.1))};const handleRotate=()=>{S(n=>(n+90)%360)};const handleReset=()=>{m({x:50,y:50,width:100,height:100});k(1);S(0);_("cover")};const handleAutoOptimize=()=>{if(j.width&&j.height){const n=j.width/j.height;if(n>3){_("cover");k(.8)}else if(n<1){_("cover");k(1.2)}else{_("cover");k(1)}m({x:50,y:50,width:100,height:100});S(0)}};const getPositionString=()=>{const n=d.x<25?"left":d.x>75?"right":"center";const a=d.y<25?"top":d.y>75?"bottom":"center";return`${n} ${a}`};const handleSave=()=>{const n=getPositionString();a({position:n,fit:A,cropArea:d,zoom:N,rotation:E,imageSize:j})};return at.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex justify-center items-center z-[9997] p-4",children:at.jsxs("div",{className:"bg-zinc-900/95 backdrop-blur-md rounded-3xl shadow-2xl max-w-6xl w-full max-h-[90vh] animate-fadeIn border border-zinc-700/30",tabIndex:-1,autoFocus:!0,children:[at.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-zinc-700/30",children:[at.jsx("h3",{className:"text-2xl font-bold text-white",children:"Banner Crop Editor"}),at.jsx("button",{onClick:o,className:"text-zinc-400 hover:text-white transition-all duration-200 hover:scale-110",children:at.jsx(Aj,{size:28})})]}),at.jsxs("div",{className:"p-6",children:[at.jsxs("div",{className:"flex items-center justify-between mb-6",children:[at.jsxs("div",{className:"flex items-center gap-4",children:[at.jsxs("button",{onClick:handleZoomIn,className:"flex items-center gap-2 px-4 py-2 bg-zinc-800 hover:bg-zinc-700 rounded-lg transition-colors",children:[at.jsx($j,{size:16}),at.jsx("span",{className:"text-sm",children:"Zoom In"})]}),at.jsxs("button",{onClick:handleZoomOut,className:"flex items-center gap-2 px-4 py-2 bg-zinc-800 hover:bg-zinc-700 rounded-lg transition-colors",children:[at.jsx(Kj,{size:16}),at.jsx("span",{className:"text-sm",children:"Zoom Out"})]}),at.jsxs("button",{onClick:handleRotate,className:"flex items-center gap-2 px-4 py-2 bg-zinc-800 hover:bg-zinc-700 rounded-lg transition-colors",children:[at.jsx(OT,{size:16}),at.jsx("span",{className:"text-sm",children:"Rotate"})]}),at.jsxs("button",{onClick:handleReset,className:"flex items-center gap-2 px-4 py-2 bg-zinc-800 hover:bg-zinc-700 rounded-lg transition-colors",children:[at.jsx(yT,{size:16}),at.jsx("span",{className:"text-sm",children:"Reset"})]}),at.jsx("button",{onClick:handleAutoOptimize,className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500/20 to-pink-500/20 hover:from-blue-500/30 hover:to-pink-500/30 rounded-lg transition-all duration-300",children:at.jsx("span",{className:"text-sm text-blue-400",children:"Auto Optimize"})})]}),at.jsxs("div",{className:"flex items-center gap-4",children:[at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsx("span",{className:"text-sm text-zinc-400",children:"Fit:"}),at.jsxs("select",{value:A,onChange:n=>_(n.target.value),className:"bg-zinc-800 border border-zinc-600 rounded-lg px-3 py-1 text-sm",children:[at.jsx("option",{value:"cover",children:"Cover"}),at.jsx("option",{value:"contain",children:"Contain"})]})]}),at.jsxs("div",{className:"text-sm text-zinc-400",children:["Zoom: ",Math.round(100*N),"%"]})]})]}),at.jsxs("div",{className:"flex gap-6",children:[at.jsxs("div",{className:"flex-1",children:[at.jsxs("div",{ref:B,className:"relative w-full h-96 bg-zinc-800 rounded-2xl overflow-hidden cursor-move",onMouseDown:handleMouseDown,onMouseMove:handleMouseMove,onMouseUp:handleMouseUp,onMouseLeave:handleMouseUp,children:[at.jsx("div",{className:"relative w-full h-full",style:{transform:`scale(${N})`,transformOrigin:"center center"},children:at.jsx("img",{ref:M,src:n,alt:"Banner",className:`w-full h-full object-${A} transition-all duration-300`,style:{transform:`rotate(${E}deg)`,objectPosition:`${d.x}% ${d.y}%`}})}),at.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[at.jsx("div",{className:"absolute inset-0 bg-black/30"}),at.jsx("div",{className:"absolute inset-0 border-2 border-white/50 border-dashed"})]}),at.jsx("div",{className:"absolute w-4 h-4 bg-pink-500 rounded-full border-2 border-white shadow-lg pointer-events-none",style:{left:`${d.x}%`,top:`${d.y}%`,transform:"translate(-50%, -50%)"}})]}),at.jsx("div",{className:"mt-4 text-center",children:at.jsxs("p",{className:"text-sm text-zinc-400",children:["Drag to move the focus point • Use zoom to see more of the original image • Current position: ",at.jsx("span",{className:"text-pink-400 font-mono",children:getPositionString()})]})})]}),at.jsxs("div",{className:"w-80",children:[at.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Preview"}),at.jsx("div",{className:"w-full h-48 bg-zinc-800 rounded-2xl overflow-hidden",children:at.jsx("img",{src:n,alt:"Banner Preview",className:`w-full h-full object-${A}`,style:{objectPosition:`${d.x}% ${d.y}%`,transform:`scale(${N}) rotate(${E}deg)`,transformOrigin:"center center"}})}),at.jsxs("div",{className:"mt-4 space-y-3",children:[at.jsxs("div",{className:"bg-zinc-800/50 rounded-lg p-3",children:[at.jsx("div",{className:"text-sm text-zinc-400 mb-1",children:"Position"}),at.jsx("div",{className:"text-white font-mono",children:getPositionString()})]}),at.jsxs("div",{className:"bg-zinc-800/50 rounded-lg p-3",children:[at.jsx("div",{className:"text-sm text-zinc-400 mb-1",children:"Fit"}),at.jsx("div",{className:"text-white capitalize",children:A})]}),at.jsxs("div",{className:"bg-zinc-800/50 rounded-lg p-3",children:[at.jsx("div",{className:"text-sm text-zinc-400 mb-1",children:"Zoom"}),at.jsxs("div",{className:"text-white",children:[Math.round(100*N),"%"]})]}),at.jsxs("div",{className:"bg-zinc-800/50 rounded-lg p-3",children:[at.jsx("div",{className:"text-sm text-zinc-400 mb-1",children:"Image Size"}),at.jsxs("div",{className:"text-white",children:[j.width," × ",j.height]})]}),O.length>0&&at.jsxs("div",{className:"bg-zinc-800/50 rounded-lg p-3",children:[at.jsx("div",{className:"text-sm text-zinc-400 mb-2",children:"Recommendations"}),at.jsx("div",{className:"space-y-2",children:O.slice(0,2).map((n,a)=>at.jsxs("div",{className:"text-xs p-2 rounded "+(n.isOptimal?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30"),children:[at.jsx("div",{className:"font-medium",children:n.name}),at.jsxs("div",{className:"text-xs opacity-75",children:[n.width," × ",n.height]}),at.jsx("div",{className:"text-xs opacity-75",children:n.description})]},a))})]})]})]})]}),at.jsxs("div",{className:"flex justify-end gap-4 mt-6 pt-6 border-t border-zinc-700/30",children:[at.jsx("button",{onClick:o,className:"px-6 py-3 bg-zinc-700 hover:bg-zinc-600 text-white rounded-xl transition-colors",children:"Cancel"}),at.jsx("button",{onClick:handleSave,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-pink-500 text-white rounded-xl hover:opacity-90 transition-opacity font-semibold",children:"Save Banner Settings"})]})]})]})})};const PF=new Map;const OF=3e5;const ViewCollectionTab=({collection:n})=>{const[a,o]=ot.useState({website:"",twitter:"",discord:""});const[i,u]=ot.useState([]);const[d,m]=ot.useState(!1);const[g,y]=ot.useState(null);const[v,x]=ot.useState(!1);const[N,k]=ot.useState(!1);const[E,S]=ot.useState({visible:!1,message:"",type:"success"});const[A,_]=ot.useState(null);const[j,I]=ot.useState("");const[O,R]=ot.useState("center center");const[B,M]=ot.useState("contain");const[z,L]=ot.useState(1);const[D,W]=ot.useState(!1);const[H,q]=ot.useState(!1);const[G,V]=ot.useState(!1);ot.useEffect(()=>{if(E.visible){const n=setTimeout(()=>S(n=>({...n,visible:!1})),3e3);return()=>clearTimeout(n)}},[E.visible]);const showToast=(n,a="success")=>{S({visible:!0,message:n,type:a})};const validateBannerUrl=n=>{if(!n)return"";if("string"==typeof n)return n;if("object"==typeof n){const a=n.gatewayUrl||n.url||n.cid||"";console.log("🔧 Extracted banner URL from object:",a);return a}console.warn("🔧 Invalid banner URL type:",typeof n,n);return""};const loadCollectionData=async()=>{if(n)try{const a=localStorage.getItem(`collection_${n.address}_banner`);if(a)try{const o=JSON.parse(a);if("object"==typeof o&&!o.gatewayUrl&&!o.url&&!o.cid){console.log("🧹 Cleaning up corrupted banner data");localStorage.removeItem(`collection_${n.address}_banner`)}}catch(nL){}const i=localStorage.getItem(`collection_${n.address}_banner`);console.log("🔍 Loading saved banner from localStorage:",i);if(i)try{const n=JSON.parse(i);const a=validateBannerUrl(n);I(a);console.log("✅ Set banner URL from localStorage (parsed):",a)}catch(nL){const a=validateBannerUrl(i);I(a);console.log("✅ Set banner URL from localStorage (string):",a)}const u=localStorage.getItem(`collection_${n.address}_banner_position`);console.log("🔍 Loading saved banner position from localStorage:",u);if(u){R(u);console.log("✅ Set banner position from localStorage:",u)}const d=localStorage.getItem(`collection_${n.address}_banner_fit`);console.log("🔍 Loading saved banner fit from localStorage:",d);if(d){M(d);console.log("✅ Set banner fit from localStorage:",d)}const m=localStorage.getItem(`collection_${n.address}_banner_zoom`);console.log("🔍 Loading saved banner zoom from localStorage:",m);if(m){L(parseFloat(m));console.log("✅ Set banner zoom from localStorage:",m)}const g=JSON.parse(localStorage.getItem(`collection_${n.address}_social`)||"{}");o(g)}catch(a){console.error("Error loading collection data:",a)}};ot.useEffect(()=>{loadCollectionData();loadCollectionNFTs()},[n]);const loadCollectionNFTs=async()=>{if(!n){console.log("❌ No collection provided to loadCollectionNFTs");return}console.log("🔄 Starting loadCollectionNFTs for collection:",n.address);const a=`${n.address}_preview`;const o=PF.get(a);if(o&&Date.now()-o.timestamp<OF){console.log("📦 Using cached preview data");u(o.data)}else try{m(!0);console.log("🔄 Loading collection preview...");const o=`collection_${n.address}_nfts`;console.log("🔍 Looking for NFTs in localStorage with key:",o);const i=JSON.parse(localStorage.getItem(o)||"[]");console.log("📦 Found NFTs in localStorage:",i.length,"NFTs");console.log("📋 First few NFTs:",i.slice(0,3));const d=localStorage.getItem(o);console.log("🔍 Raw localStorage data:",d);console.log("🔍 Raw data length:",d?d.length:0);if(i.length>0){console.log("📦 Found NFTs in localStorage, processing images...");console.log("📋 Sample NFT structure:",i[0]);const o=await Promise.all(i.map(async(a,o)=>{console.log(`📝 Processing NFT ${o+1}/${i.length}:`,a.name,"Image:",a.image);try{if(a.image?.startsWith("ipfs://")){console.log(`🔄 Converting IPFS image for ${a.name}`);return{...a,imageUrl:getIpfsUrls(a.image)[0],index:o,name:a.name||`${n.name} #${o+1}`,description:a.description||`NFT #${o+1} from ${n.name}`}}if(!a.image&&a.tokenURI){console.log(`🔄 Fetching metadata for ${a.name} from tokenURI`);try{const i=getIpfsUrls(a.tokenURI);const u=await fetchWithFallback$3(i);console.log(`✅ Metadata fetched for ${a.name}:`,u.name);return{...a,imageUrl:u.image?getIpfsUrls(u.image)[0]:n.cover||"/default-nft.png",index:o,name:a.name||`${n.name} #${o+1}`,description:a.description||`NFT #${o+1} from ${n.name}`}}catch(rL){console.error(`❌ Failed to fetch metadata for ${a.name}:`,rL.message);return{...a,imageUrl:n.cover||"/default-nft.png",index:o,name:a.name||`${n.name} #${o+1}`,description:a.description||`NFT #${o+1} from ${n.name}`}}}if(a.image&&!a.image.startsWith("ipfs://")){console.log(`✅ NFT ${a.name} has direct image URL:`,a.image);return{...a,imageUrl:a.image,index:o,name:a.name||`${n.name} #${o+1}`,description:a.description||`NFT #${o+1} from ${n.name}`}}console.log(`⚠️ Using fallback image for ${a.name}`);return{...a,imageUrl:n.cover||"/default-nft.png",index:o,name:a.name||`${n.name} #${o+1}`,description:a.description||`NFT #${o+1} from ${n.name}`}}catch(rL){console.error(`❌ Error processing NFT ${a.name}:`,rL);return{...a,imageUrl:n.cover||"/default-nft.png",index:o,name:a.name||`${n.name} #${o+1}`,description:a.description||`NFT #${o+1} from ${n.name}`}}}));const d=o.slice(0,20);console.log("🎯 Final preview NFTs:",d.length,"NFTs");console.log("📋 Preview NFTs with imageUrl:",d.map(n=>({name:n.name,imageUrl:n.imageUrl})));PF.set(a,{data:d,timestamp:Date.now()});u(d);console.log("✅ Preview loaded successfully:",d.length,"NFTs")}else{console.log("📭 No NFTs found in localStorage");console.log("🔍 Checking if localStorage key exists but is empty...");const a=Object.keys(localStorage);const o=a.filter(a=>a.includes(n.address));console.log("🔍 All localStorage keys for this collection:",o);const i=a.filter(n=>n.includes("nfts"));console.log("🔍 All NFT-related keys in localStorage:",i);u([])}}catch(i){console.error("❌ Error loading collection preview:",i);showToast("Failed to load collection preview","error")}finally{m(!1)}};ot.useEffect(()=>{n&&loadCollectionNFTs()},[n]);const handleBannerUpload=async a=>{const o=a.target.files[0];if(!o)return;const i=["image/jpeg","image/jpg","image/png","image/gif","image/webp"];if(!i.includes(o.type)){showToast("Please select a valid image file (JPG, PNG, GIF, WebP)","error");return}const u=10485760;if(o.size>u)showToast("File size too large. Please select a file smaller than 10MB","error");else try{m(!0);showToast("Uploading banner...","info");console.log("📤 Uploading banner file:",o.name,o.size,o.type);const a=await uploadFile(o);console.log("✅ Banner uploaded successfully:",a);console.log("🔗 Upload result type:",typeof a);console.log("🔗 Upload result keys:",Object.keys(a||{}));const i=a.gatewayUrl||a.url||a.cid;console.log("🔗 Extracted banner URL:",i);console.log("🔗 Banner URL type:",typeof i);if(!i){console.error("❌ No URL in upload response:",a);throw new Error("No URL returned from upload. Please try again.")}const u=validateBannerUrl(i);I(u);localStorage.setItem(`collection_${n.address}_banner`,u);console.log("💾 Saved banner URL to localStorage:",u);showToast("Banner uploaded successfully!","success")}catch(d){console.error("❌ Error uploading banner:",d);showToast(`Failed to upload banner: ${d.message}`,"error")}finally{m(!1)}};const handleBannerPositionChange=a=>{R(a);localStorage.setItem(`collection_${n.address}_banner_position`,a);console.log("💾 Saved banner position:",a)};const handleBannerFitChange=a=>{M(a);localStorage.setItem(`collection_${n.address}_banner_fit`,a);console.log("💾 Saved banner fit:",a)};const handleBannerZoomChange=a=>{L(a);localStorage.setItem(`collection_${n.address}_banner_zoom`,a.toString());console.log("💾 Saved banner zoom:",a)};const handleBannerCropSave=a=>{R(a.position);M(a.fit);L(a.zoom||1);localStorage.setItem(`collection_${n.address}_banner_position`,a.position);localStorage.setItem(`collection_${n.address}_banner_fit`,a.fit);localStorage.setItem(`collection_${n.address}_banner_zoom`,(a.zoom||1).toString());V(!1);showToast("Banner settings updated","success")};const handleSocialLinkChange=(i,u)=>{const d={...a,[i]:u};o(d);localStorage.setItem(`collection_${n.address}_social`,JSON.stringify(d))};const Z=validateBannerUrl(j);const SalePreview=()=>{if(!n)return null;const safeParseJSON=(n,a)=>{try{const o=JSON.parse(n);return void 0!==o?o:a}catch{return a}};const o=safeParseJSON(localStorage.getItem(`collection_${n.address}_nfts`),[]);const u=safeParseJSON(localStorage.getItem(`phases_${n.address}`),{});const d=o.length;const m=Object.entries(u).map(([n,a])=>({name:n,price:a.price||"0",allocated:a.allocated||0,start:a.start,end:a.end,active:!1!==a.active}));const g=m.reduce((n,a)=>{const o=parseFloat(a.price)||0;const i=parseInt(a.allocated)||0;return n+o*i},0);const y=n.totalSupply||d||0;const v=0;const x="0.0";const N=0;const E={totalSupply:y,totalMinted:v,totalRevenue:x,maxSupply:y,contractBalance:N,potentialRevenue:g.toFixed(2)};console.log("📊 Preview stats (before launch):",E);return at.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-[9997] p-4",children:at.jsxs("div",{className:"bg-zinc-900/95 backdrop-blur-md rounded-3xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto animate-fadeIn border border-zinc-700/30",tabIndex:-1,autoFocus:!0,children:[at.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-zinc-700/30",children:[at.jsx("h3",{className:"text-xl font-bold text-white",children:"Sale Preview"}),at.jsxs("div",{className:"flex items-center gap-3",children:[at.jsxs("button",{onClick:refreshStats,className:"flex items-center gap-2 px-3 py-2 bg-zinc-700 hover:bg-zinc-600 rounded-lg transition-colors duration-200 text-sm",title:"Refresh stats from blockchain",children:[at.jsx(TT,{className:"w-4 h-4"}),"Refresh Stats"]}),at.jsx("button",{onClick:()=>k(!1),className:"text-zinc-400 hover:text-white transition-all duration-200 hover:scale-110",children:at.jsx(Aj,{size:24})})]})]}),at.jsxs("div",{className:"p-6",children:[Z&&at.jsxs("div",{className:"w-full h-[300px] rounded-2xl overflow-hidden mb-8 relative",children:[at.jsx("img",{src:Z,alt:"Collection banner",className:`w-full h-full object-${B} transition-all duration-300`,style:{objectPosition:O,transform:`scale(${z||1})`,imageRendering:Z?.includes(".gif")?"auto":"optimizeQuality"},onError:n=>{console.error("Failed to load banner in preview:",Z);n.target&&(n.target.style.display="none")}}),at.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent pointer-events-none"}),at.jsx("div",{className:"absolute bottom-4 left-4 text-white",children:at.jsxs("div",{className:"text-sm opacity-75",children:["Banner: ",B," • ",O]})})]}),at.jsxs("div",{className:"flex items-start gap-6 mb-8",children:[at.jsx("img",{src:n?.cover||n?.firstNFTImage||o_,alt:n?.name,className:"w-24 h-24 rounded-2xl object-cover border border-zinc-600/30",onError:a=>{console.warn("⚠️ Collection cover failed to load:",a.target.src);n?.firstNFTImage&&n.firstNFTImage!==a.target.src?a.target.src=n.firstNFTImage:a.target.src=o_}}),at.jsxs("div",{className:"flex-1",children:[at.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[at.jsx("h2",{className:"text-3xl font-bold text-white",children:n?.name}),at.jsx("span",{className:"px-2 py-1 bg-green-500/20 text-green-400 text-xs rounded-full",children:"Real Data"})]}),at.jsx("p",{className:"text-zinc-400 text-lg mb-4",children:n?.description||"No description available"}),at.jsxs("div",{className:"flex gap-4 mb-4",children:[a.website&&at.jsx("a",{href:a.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:at.jsx(X_,{size:20})}),a.twitter&&at.jsx("a",{href:a.twitter,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:at.jsx(JT,{size:20})}),a.discord&&at.jsx("a",{href:a.discord,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:at.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.019 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1568 2.4189Z"})})})]}),at.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[at.jsxs("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 p-4 shadow-2xl text-center",children:[at.jsx("div",{className:"text-xl font-bold text-white",children:E.maxSupply}),at.jsx("div",{className:"text-xs text-zinc-400",children:"Max Supply"})]}),at.jsxs("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 p-4 shadow-2xl text-center",children:[at.jsx("div",{className:"text-xl font-bold text-white",children:E.totalMinted}),at.jsx("div",{className:"text-xs text-zinc-400",children:"Minted"})]}),at.jsxs("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 p-4 shadow-2xl text-center",children:[at.jsxs("div",{className:"text-xl font-bold text-white",children:[E.totalRevenue," STT"]}),at.jsx("div",{className:"text-xs text-zinc-400",children:"Revenue"})]}),at.jsxs("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 p-4 shadow-2xl text-center",children:[at.jsxs("div",{className:"text-xl font-bold text-white",children:[E.potentialRevenue," STT"]}),at.jsx("div",{className:"text-xs text-zinc-400",children:"Potential"})]})]})]})]}),at.jsxs("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 p-8 shadow-2xl mb-8",children:[at.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Mint Section"}),at.jsx("div",{className:"w-full h-3 bg-zinc-700 rounded-full mb-6 overflow-hidden",children:at.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-pink-500 relative",style:{width:`${Math.max(0,Math.min(100,E.totalMinted/Math.max(E.maxSupply,1)*100))}%`},children:at.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"})})}),at.jsxs("div",{className:"flex items-center justify-between mb-6",children:[at.jsxs("div",{className:"flex items-center gap-4",children:[at.jsxs("div",{className:"text-center",children:[at.jsx("div",{className:"text-2xl font-bold text-white",children:E.totalMinted}),at.jsx("div",{className:"text-sm text-zinc-400",children:"Minted"})]}),at.jsx("div",{className:"text-zinc-400 text-xl",children:"/"}),at.jsxs("div",{className:"text-center",children:[at.jsx("div",{className:"text-2xl font-bold text-white",children:E.maxSupply}),at.jsx("div",{className:"text-sm text-zinc-400",children:"Total"})]})]}),at.jsxs("div",{className:"text-right",children:[at.jsx("div",{className:"text-sm text-zinc-400 mb-1",children:"Price"}),at.jsxs("div",{className:"flex items-center gap-2 text-xl font-bold text-white",children:[at.jsx("img",{src:i_,alt:"STT",className:"w-5 h-5"}),(()=>{const n=["Whitelist","FCFS","Public"];const a=new Date;for(const i of n){const n=u[i];if(n&&n.price&&n.start&&n.end){const o=new Date(n.start);const i=new Date(n.end);if(a>=o&&a<=i)return n.price;if(a<o)return n.price}}const o=Object.values(u).find(n=>n.price);return o?.price||"0.1"})()," STT"]})]})]}),at.jsx("div",{className:"w-full py-4 bg-zinc-800/50 text-zinc-400 font-bold rounded-xl text-center",children:"Mint button will appear here after launch"})]}),at.jsxs("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 p-8 shadow-2xl mb-8",children:[at.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Sale Phases"}),at.jsxs("div",{className:"space-y-3",children:[Object.entries(u).map(([n,a])=>{const o=new Date(a.start);const i=new Date(a.end);const u=new Date;const d=u>=o&&u<=i;const m=u>i;let g="Upcoming";let y="text-zinc-400";if(d){g="Active";y="text-green-400"}else if(m){g="Ended";y="text-red-400"}return at.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-900 rounded-xl",children:[at.jsxs("div",{children:[at.jsx("div",{className:"font-semibold text-white",children:n}),at.jsxs("div",{className:"text-sm text-zinc-400",children:[a.price," STT • ",a.allocated," NFTs"]}),at.jsxs("div",{className:"text-xs text-zinc-500",children:[o.toLocaleDateString()," - ",i.toLocaleDateString()]})]}),at.jsx("div",{className:`text-sm ${y}`,children:g})]},n)}),0===Object.keys(u).length&&at.jsx("div",{className:"text-center text-zinc-400 py-4",children:"No phases configured yet"})]})]}),at.jsxs("div",{className:"bg-zinc-800/50 rounded-2xl p-6",children:[at.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"NFT Preview"}),at.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[i.slice(0,6).map((n,a)=>at.jsxs("div",{className:"bg-zinc-900 rounded-xl overflow-hidden",children:[at.jsx("img",{src:n.imageUrl||n.image||"/default-nft.png",alt:n.name,className:"w-full h-24 object-cover",onError:n=>{n.target.src="/default-nft.png"}}),at.jsx("div",{className:"p-2",children:at.jsx("p",{className:"text-xs text-white truncate",children:n.name})})]},n.id||a)),i.length>6&&at.jsx("div",{className:"bg-zinc-900 rounded-xl flex items-center justify-center h-24",children:at.jsxs("div",{className:"text-center",children:[at.jsxs("div",{className:"text-lg font-bold text-white",children:["+",i.length-6]}),at.jsx("div",{className:"text-xs text-zinc-400",children:"More"})]})})]})]})]})]})})};const handleDeleteNFT=a=>{const o=i.filter(n=>n.id!==a.id);u(o);const d=JSON.parse(localStorage.getItem(`collection_${n.address}_nfts`)||"[]");const m=d.filter(n=>n.id!==a.id);localStorage.setItem(`collection_${n.address}_nfts`,JSON.stringify(m));const g=`${n.address}_preview`;PF.delete(g);showToast("NFT deleted successfully","success")};const handleRefresh=()=>{loadCollectionNFTs()};const refreshStats=async()=>{if(n?.address)try{showToast("🔄 Refreshing stats from blockchain...","info");const a=new mb(window.ethereum);const o=new Ey(n.address,vI,a);const i=await a.getBalance(n.address);const u=formatUnits(i,18);const[d,m]=await Promise.all([o.totalSupply(),o.maxSupply()]);const g=JSON.parse(localStorage.getItem(`phases_${n.address}`))||{};const y=Object.entries(g).map(([n,a])=>({name:n,price:a.price||"0",allocated:a.allocated||0,start:a.start,end:a.end,active:!1!==a.active}));const v=y.reduce((n,a)=>{const o=parseFloat(a.price)||0;const i=parseInt(a.allocated)||0;return n+o*i},0);const x={totalSupply:Number(m),maxSupply:Number(m),totalRevenue:parseFloat(u).toFixed(3),potentialRevenue:v.toFixed(2),totalMints:Number(d),uniqueHolders:Math.floor(.8*Number(d)),averagePrice:Number(d)>0?(v/Number(d)).toFixed(2):"0",phases:y,contractBalance:parseFloat(u),contractOwner:"",canWithdraw:!1};localStorage.setItem(`collection_${n.address}_real_stats`,JSON.stringify(x));showToast("✅ Stats updated successfully!","success");if(N){k(!1);setTimeout(()=>k(!0),100)}}catch(a){console.error("Error refreshing stats:",a);showToast("❌ Failed to refresh stats","error")}};return n?at.jsxs("div",{className:"space-y-6 pb-24",children:[at.jsxs("div",{className:"bg-zinc-800/50 rounded-xl p-6",children:[at.jsxs("div",{className:"flex items-start justify-between gap-6",children:[at.jsxs("div",{className:"flex items-start gap-6",children:[at.jsx("div",{className:"w-32 h-32 rounded-lg overflow-hidden flex-shrink-0",children:at.jsx("img",{src:n.cover||n.firstNFTImage||"/default-cover.png",alt:"Cover",className:"w-full h-full object-cover",onError:a=>{console.warn("⚠️ Collection cover failed to load:",a.target.src);n.firstNFTImage&&n.firstNFTImage!==a.target.src?a.target.src=n.firstNFTImage:a.target.src="/default-cover.png"}})}),at.jsxs("div",{className:"flex-1",children:[at.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:n.name}),at.jsx("p",{className:"text-zinc-400 mb-4",children:n.description||"No description available"}),at.jsx("p",{className:"text-sm text-zinc-500 font-mono",children:n.address})]})]}),at.jsxs("button",{onClick:()=>k(!0),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl hover:opacity-90 transition-opacity font-semibold shadow-lg",children:[at.jsx(Z_,{className:"w-5 h-5"}),"Preview Sale"]})]}),at.jsxs("div",{className:"bg-zinc-800/50 rounded-xl p-6",children:[at.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Sale Banner"}),at.jsxs("div",{className:"flex items-center gap-6",children:[at.jsxs("div",{className:"w-64 h-32 rounded-xl overflow-hidden bg-zinc-900 border-2 border-dashed border-zinc-600 flex items-center justify-center cursor-pointer transition-all duration-200 hover:border-pink-500/50 hover:bg-zinc-800/50 relative",onDragOver:n=>{n.preventDefault();n.currentTarget.classList.add("border-pink-500","bg-zinc-800/50")},onDragLeave:n=>{n.preventDefault();n.currentTarget.classList.remove("border-pink-500","bg-zinc-800/50")},onDrop:n=>{n.preventDefault();n.currentTarget.classList.remove("border-pink-500","bg-zinc-800/50");const a=n.dataTransfer.files;a.length>0&&handleBannerUpload({target:{files:[a[0]]}})},onClick:()=>!d&&document.getElementById("banner-upload").click(),children:[d&&at.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-10",children:at.jsxs("div",{className:"text-center",children:[at.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-500 mx-auto mb-2"}),at.jsx("p",{className:"text-sm text-white",children:"Uploading..."})]})}),Z?at.jsx("img",{src:Z,alt:"Banner preview",className:`w-full h-full object-${B} transition-all duration-300`,style:{objectPosition:O,transform:`scale(${z})`,imageRendering:Z?.includes(".gif")?"auto":"optimizeQuality"},onError:n=>{console.error("Failed to load banner image:",Z);n.target&&(n.target.style.display="none");n.target&&n.target.nextSibling&&(n.target.nextSibling.style.display="block")}}):null,!Z&&!d&&at.jsxs("div",{className:"text-center",children:[at.jsx(XT,{className:"w-8 h-8 text-zinc-400 mx-auto mb-2"}),at.jsx("p",{className:"text-sm text-zinc-400",children:"Upload banner"}),at.jsx("p",{className:"text-xs text-zinc-500",children:"Recommended: 1200x400px"}),at.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Supports: JPG, PNG, GIF, WebP"})]})]}),at.jsxs("div",{className:"flex-1",children:[at.jsx("input",{type:"file",accept:"image/*,.gif,.webp",onChange:handleBannerUpload,className:"hidden",id:"banner-upload",disabled:d}),at.jsx("label",{htmlFor:"banner-upload",className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg transition-opacity "+(d?"bg-zinc-600 text-zinc-400 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-pink-500 text-white cursor-pointer hover:opacity-90"),children:d?at.jsxs(at.Fragment,{children:[at.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):at.jsxs(at.Fragment,{children:[at.jsx(XT,{className:"w-4 h-4"}),Z?"Change Banner":"Upload Banner"]})}),Z&&at.jsxs(at.Fragment,{children:[at.jsx("button",{onClick:()=>W(!0),className:"ml-3 px-4 py-2 bg-gradient-to-r from-green-500/20 to-blue-500/20 text-green-400 rounded-lg hover:from-green-500/30 hover:to-blue-500/30 transition-all duration-300",children:"Quick Settings"}),at.jsx("button",{onClick:()=>V(!0),className:"ml-3 px-4 py-2 bg-gradient-to-r from-blue-500/20 to-pink-500/20 text-blue-400 rounded-lg hover:from-blue-500/30 hover:to-pink-500/30 transition-all duration-300",children:"Advanced Settings"}),at.jsx("button",{onClick:()=>{I("");localStorage.removeItem(`collection_${n.address}_banner`);localStorage.removeItem(`collection_${n.address}_banner_position`)},className:"ml-3 px-4 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors",children:"Remove"})]})]})]})]}),at.jsxs("div",{className:"bg-zinc-800/50 rounded-xl p-6",children:[at.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Social Links"}),at.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[at.jsxs("div",{children:[at.jsx("label",{className:"block text-sm text-zinc-400 mb-2",children:"Website"}),at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsx(X_,{className:"w-4 h-4 text-zinc-400"}),at.jsx("input",{type:"url",placeholder:"https://your-website.com",value:a.website,onChange:n=>handleSocialLinkChange("website",n.target.value),className:"flex-1 p-2 rounded-lg bg-zinc-900 border border-zinc-600 text-white text-sm focus:outline-none focus:border-pink-500"})]})]}),at.jsxs("div",{children:[at.jsx("label",{className:"block text-sm text-zinc-400 mb-2",children:"Twitter/X"}),at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsx(JT,{className:"w-4 h-4 text-zinc-400"}),at.jsx("input",{type:"url",placeholder:"https://twitter.com/username",value:a.twitter,onChange:n=>handleSocialLinkChange("twitter",n.target.value),className:"flex-1 p-2 rounded-lg bg-zinc-900 border border-zinc-600 text-white text-sm focus:outline-none focus:border-pink-500"})]})]}),at.jsxs("div",{children:[at.jsx("label",{className:"block text-sm text-zinc-400 mb-2",children:"Discord"}),at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsx("svg",{className:"w-4 h-4 text-zinc-400",fill:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.019 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1568 2.4189Z"})}),at.jsx("input",{type:"url",placeholder:"https://discord.gg/invite",value:a.discord,onChange:n=>handleSocialLinkChange("discord",n.target.value),className:"flex-1 p-2 rounded-lg bg-zinc-900 border border-zinc-600 text-white text-sm focus:outline-none focus:border-pink-500"})]})]})]}),at.jsx("p",{className:"text-xs text-zinc-500 mt-2",children:"These links will be displayed on your collection page. Leave empty to hide the icons."})]}),at.jsxs("div",{className:"bg-zinc-800/50 rounded-xl p-6",children:[at.jsxs("div",{className:"flex items-center justify-between mb-4",children:[at.jsx("h4",{className:"text-lg font-semibold text-white",children:"NFT Preview"}),at.jsxs("button",{onClick:handleRefresh,disabled:d,className:"flex items-center gap-2 px-4 py-2 bg-zinc-700 hover:bg-zinc-600 rounded-lg transition-colors duration-200",children:[at.jsx(TT,{className:"w-4 h-4 "+(d?"animate-spin":"")}),"Refresh"]})]}),d?at.jsxs("div",{className:"text-center py-8",children:[at.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-pink-500 border-t-transparent rounded-full mx-auto mb-4"}),at.jsx("p",{className:"text-zinc-400",children:"Loading NFT preview..."})]}):i.length>0?at.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[i.slice(0,5).map((n,a)=>at.jsxs("div",{className:"group relative bg-zinc-900 rounded-xl overflow-hidden cursor-pointer hover:scale-105 transition-all duration-200",onClick:()=>{y(n);x(!0)},children:[at.jsx("img",{src:n.imageUrl||n.image||"/default-nft.png",alt:n.name,className:"w-full h-32 object-cover",onError:n=>{n.target.src="/default-nft.png"}}),at.jsxs("div",{className:"p-3",children:[at.jsx("h5",{className:"text-sm font-semibold text-white truncate",children:n.name}),at.jsx("p",{className:"text-xs text-zinc-400 truncate",children:n.description})]}),at.jsx("button",{onClick:a=>{a.stopPropagation();handleDeleteNFT(n.id)},className:"absolute top-2 right-2 w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center text-xs",children:"×"})]},n.id||a)),i.length>5&&at.jsx("button",{onClick:()=>q(!0),className:"aspect-square rounded-xl border-2 border-dashed border-zinc-600/50 hover:border-pink-500/50 transition-all duration-300 flex items-center justify-center text-zinc-400 hover:text-zinc-300 bg-zinc-900/50 backdrop-blur-sm hover:scale-105 group",children:at.jsxs("div",{className:"text-center group-hover:scale-110 transition-transform duration-300",children:[at.jsx("div",{className:"text-sm font-semibold",children:"More"}),at.jsxs("div",{className:"text-xs",children:["+",i.length-5]})]})})]}):at.jsxs("div",{className:"text-center py-8",children:[at.jsx("p",{className:"text-zinc-400 mb-2",children:"No NFTs found in this collection"}),at.jsx("p",{className:"text-xs text-zinc-500",children:'Upload NFTs in the "Populate Collection" tab'})]})]})]}),N&&at.jsx(SalePreview,{}),v&&g&&at.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-50 p-4",children:at.jsx("div",{className:"bg-zinc-900 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden animate-fadeIn",tabIndex:-1,autoFocus:!0,children:at.jsx("div",{className:"p-6",children:at.jsxs("div",{className:"flex items-start gap-6",children:[at.jsx("div",{className:"w-64 h-64 rounded-lg overflow-hidden flex-shrink-0",children:at.jsx("img",{src:g.imageUrl,alt:g.name,className:"w-full h-full object-cover"})}),at.jsxs("div",{className:"flex-1",children:[at.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:g.name}),at.jsx("p",{className:"text-zinc-400 mb-4",children:g.description}),at.jsxs("div",{className:"space-y-2",children:[at.jsxs("div",{className:"flex justify-between",children:[at.jsx("span",{className:"text-zinc-400",children:"Token ID:"}),at.jsxs("span",{className:"text-white font-mono",children:["#",g.tokenId||g.id]})]}),g.attributes&&g.attributes.length>0&&at.jsxs("div",{children:[at.jsx("span",{className:"text-zinc-400",children:"Attributes:"}),at.jsx("div",{className:"mt-2 space-y-1",children:g.attributes.map((n,a)=>at.jsxs("div",{className:"flex justify-between text-sm",children:[at.jsxs("span",{className:"text-zinc-400",children:[n.trait_type,":"]}),at.jsx("span",{className:"text-white",children:n.value})]},a))})]})]}),at.jsx("div",{className:"mt-6 flex gap-3",children:at.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 bg-zinc-700 hover:bg-zinc-600 rounded-lg transition-colors duration-200",children:"Close"})})]})]})})})}),D&&Z&&at.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-[9997] p-4",children:at.jsx("div",{className:"bg-zinc-900/95 backdrop-blur-xl rounded-3xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto animate-fadeIn border border-zinc-700/30",tabIndex:-1,autoFocus:!0,children:at.jsxs("div",{className:"p-6",children:[at.jsxs("div",{className:"flex items-center justify-between mb-6",children:[at.jsx("h3",{className:"text-2xl font-bold text-white",children:"Banner Display Settings"}),at.jsx("button",{onClick:()=>W(!1),className:"text-zinc-400 hover:text-white transition-all duration-200 hover:scale-110",children:at.jsx(Aj,{size:24})})]}),at.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[at.jsxs("div",{children:[at.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Preview"}),at.jsx("div",{className:"w-full h-64 rounded-xl overflow-hidden bg-zinc-800 border border-zinc-600",children:at.jsx("img",{src:Z,alt:"Banner preview",className:`w-full h-full object-${B} transition-all duration-300`,style:{objectPosition:O,transform:`scale(${z})`,imageRendering:Z?.includes(".gif")?"auto":"optimizeQuality"}})})]}),at.jsxs("div",{children:[at.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Position Settings"}),at.jsxs("div",{className:"space-y-4",children:[at.jsxs("div",{children:[at.jsx("label",{className:"block text-sm text-zinc-400 mb-2",children:"Display Position"}),at.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"top left",label:"Top Left"},{value:"top center",label:"Top Center"},{value:"top right",label:"Top Right"},{value:"center left",label:"Center Left"},{value:"center center",label:"Center Center"},{value:"center right",label:"Center Right"},{value:"bottom left",label:"Bottom Left"},{value:"bottom center",label:"Bottom Center"},{value:"bottom right",label:"Bottom Right"}].map(n=>at.jsx("button",{onClick:()=>handleBannerPositionChange(n.value),className:"p-3 rounded-lg border transition-all duration-200 "+(O===n.value?"border-pink-500 bg-pink-500/20 text-pink-400":"border-zinc-600 bg-zinc-800/50 text-zinc-400 hover:border-zinc-500 hover:bg-zinc-700/50"),children:n.label},n.value))})]}),at.jsxs("div",{children:[at.jsx("label",{className:"block text-sm text-zinc-400 mb-2",children:"Display Fit"}),at.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[at.jsx("button",{onClick:()=>handleBannerFitChange("cover"),className:"p-3 rounded-lg border transition-all duration-200 "+("cover"===B?"border-pink-500 bg-pink-500/20 text-pink-400":"border-zinc-600 bg-zinc-800/50 text-zinc-400 hover:border-zinc-500 hover:bg-zinc-700/50"),children:"Cover (Fill)"}),at.jsx("button",{onClick:()=>handleBannerFitChange("contain"),className:"p-3 rounded-lg border transition-all duration-200 "+("contain"===B?"border-pink-500 bg-pink-500/20 text-pink-400":"border-zinc-600 bg-zinc-800/50 text-zinc-400 hover:border-zinc-500 hover:bg-zinc-700/50"),children:"Contain (Full)"})]})]}),at.jsxs("div",{children:[at.jsx("label",{className:"block text-sm text-zinc-400 mb-2",children:"Zoom Level"}),at.jsxs("div",{className:"space-y-2",children:[at.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:z,onChange:n=>handleBannerZoomChange(parseFloat(n.target.value)),className:"w-full h-2 bg-zinc-700 rounded-lg appearance-none cursor-pointer slider"}),at.jsxs("div",{className:"flex justify-between text-xs text-zinc-400",children:[at.jsx("span",{children:"50%"}),at.jsxs("span",{children:[Math.round(100*z),"%"]}),at.jsx("span",{children:"200%"})]})]})]}),at.jsxs("div",{children:[at.jsx("label",{className:"block text-sm text-zinc-400 mb-2",children:"Current Settings"}),at.jsxs("div",{className:"space-y-2",children:[at.jsxs("div",{className:"p-3 bg-zinc-800/50 rounded-lg border border-zinc-600",children:[at.jsx("div",{className:"text-xs text-zinc-400 mb-1",children:"Position"}),at.jsx("code",{className:"text-pink-400 font-mono",children:O})]}),at.jsxs("div",{className:"p-3 bg-zinc-800/50 rounded-lg border border-zinc-600",children:[at.jsx("div",{className:"text-xs text-zinc-400 mb-1",children:"Fit"}),at.jsx("code",{className:"text-pink-400 font-mono capitalize",children:B})]}),at.jsxs("div",{className:"p-3 bg-zinc-800/50 rounded-lg border border-zinc-600",children:[at.jsx("div",{className:"text-xs text-zinc-400 mb-1",children:"Zoom"}),at.jsxs("code",{className:"text-pink-400 font-mono",children:[Math.round(100*z),"%"]})]})]})]}),at.jsxs("div",{className:"pt-4 space-y-3",children:[at.jsx("button",{onClick:()=>{W(!1);V(!0)},className:"w-full px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl hover:opacity-90 transition-opacity font-semibold",children:"Advanced Crop Editor"}),at.jsx("button",{onClick:()=>W(!1),className:"w-full px-6 py-3 bg-gradient-to-r from-blue-500 to-pink-500 text-white rounded-xl hover:opacity-90 transition-opacity font-semibold",children:"Save Settings"})]})]})]})]})]})})}),G&&Z&&at.jsx(BannerCropEditor,{imageUrl:Z,onSave:handleBannerCropSave,onCancel:()=>V(!1),initialPosition:O,initialFit:B}),H&&at.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex justify-center items-center z-[9997] p-4",children:at.jsx("div",{className:"bg-zinc-900/95 backdrop-blur-md rounded-3xl shadow-2xl max-w-5xl w-full max-h-[85vh] animate-fadeIn border border-zinc-700/30",tabIndex:-1,autoFocus:!0,children:at.jsxs("div",{className:"p-8",children:[at.jsxs("div",{className:"flex items-center justify-between mb-6",children:[at.jsx("h3",{className:"text-2xl font-bold text-white",children:"Collection Gallery"}),at.jsx("button",{onClick:()=>q(!1),className:"text-zinc-400 hover:text-white transition-all duration-200 hover:scale-110",children:at.jsx(Aj,{size:28})})]}),at.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 max-h-[65vh] overflow-y-auto",children:i.map((n,a)=>at.jsxs("button",{onClick:()=>{y(n);q(!1);x(!0)},className:"group",children:[at.jsxs("div",{className:"aspect-square rounded-2xl overflow-hidden border border-zinc-700/30 group-hover:border-pink-500/50 transition-all duration-300 hover:scale-105 bg-zinc-900/50 backdrop-blur-sm shadow-lg",children:[at.jsx("img",{src:n.imageUrl||n.image||"/default-nft.png",alt:n.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",onError:n=>{n.target.src="/default-nft.png"}}),at.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-zinc-900/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),at.jsx("div",{className:"mt-3 text-center",children:at.jsx("div",{className:"text-sm text-white font-medium truncate",children:n.name})})]},n.id||a))})]})})}),E.visible&&at.jsx("div",{className:"fixed bottom-24 right-4 p-4 rounded-lg shadow-lg max-w-xs animate-fadeIn cursor-pointer hover:opacity-100 opacity-90 z-[10000] "+("error"===E.type?"bg-red-800 text-white":"info"===E.type?"bg-blue-800 text-white":"bg-zinc-800 text-white"),children:at.jsx("p",{className:"text-sm",children:E.message})})]}):at.jsx("div",{className:"text-center py-8",children:at.jsx("p",{className:"text-zinc-400",children:"No collection selected"})})};const CollectionStatsTab=({collection:n})=>{const[a,o]=ot.useState(!1);const[i,u]=ot.useState(!1);const[d,m]=ot.useState({visible:!1,message:"",txHash:""});const[g,y]=ot.useState({totalSupply:0,maxSupply:0,totalRevenue:"0",potentialRevenue:"0",totalMints:0,uniqueHolders:0,averagePrice:"0",phases:[],contractBalance:0,contractOwner:"",canWithdraw:!1});ot.useEffect(()=>{if(d.visible){const n=setTimeout(()=>m(n=>({...n,visible:!1})),5e3);return()=>clearTimeout(n)}},[d.visible]);const showToast=(n,a="")=>{m({visible:!0,message:n,txHash:a})};const loadCollectionStats=async()=>{if(n?.address)try{o(!0);const i=new mb(window.ethereum);const u=new Ey(n.address,vI,i);const d=await i.getBalance(n.address);const m=formatUnits(d,18);console.log("🔗 Contract balance (rewards):",m,"STT");const g=JSON.parse(localStorage.getItem(`collection_${n.address}_nfts`)||"[]");console.log("📦 Uploaded NFTs count:",g.length);const v=JSON.parse(localStorage.getItem(`phases_${n.address}`))||{};const x=Object.entries(v).map(([n,a])=>({name:n,price:a.price||"0",allocated:a.allocated||0,start:a.start,end:a.end,active:!1!==a.active}));console.log("📅 Phase stats:",x);const N=x.reduce((n,a)=>{const o=parseFloat(a.price)||0;const i=parseInt(a.allocated)||0;return n+o*i},0);console.log("💰 Potential revenue from phases:",N);let k=null;try{const[n,a]=await Promise.all([u.totalSupply(),u.maxSupply()]);k={totalSupply:Number(n),maxSupply:Number(a),totalMinted:Number(n)};console.log("🔗 Blockchain data:",k)}catch(a){console.log("⚠️ Blockchain data not available (sale might not have started):",a.message);k=null}const E=await u.owner();const S=await i.getSigner();const A=await S.getAddress();const _=E.toLowerCase()===A.toLowerCase();console.log("🔗 Contract owner:",E);console.log("🔗 Current user:",A);console.log("🔗 Can withdraw:",_);const j=k&&k.totalMinted>0;const I={totalSupply:k?k.maxSupply:g.length,maxSupply:k?k.maxSupply:g.length,totalMinted:k?k.totalMinted:0,uploadedNFTs:g.length,totalRevenue:parseFloat(m).toFixed(3),potentialRevenue:N.toFixed(2),uniqueHolders:k?Math.floor(.8*k.totalMinted):0,averagePrice:g.length>0?(N/g.length).toFixed(2):"0",phases:x,contractBalance:parseFloat(m),contractOwner:E,canWithdraw:_,saleHasStarted:j};console.log("💰 Final stats:",I);console.log("🎯 Sale has started:",j);y(I);localStorage.setItem(`collection_${n.address}_real_stats`,JSON.stringify(I))}catch(a){console.error("Error loading collection stats:",a);showToast("Failed to load collection statistics")}finally{o(!1)}};ot.useEffect(()=>{n?.address&&loadCollectionStats()},[n?.address]);const handleWithdrawRewards=async()=>{if(n?.address)try{u(!0);const a=new mb(window.ethereum);const o=await a.getSigner();const i=new Ey(n.address,vI,o);const d=await o.getAddress();const m=await i.owner();if(d.toLowerCase()!==m.toLowerCase()){showToast("❌ Only contract owner can withdraw rewards");return}const g=await a.getBalance(n.address);if(0n===g){showToast("❌ No rewards available to withdraw");return}console.log("💰 Withdrawing balance:",formatUnits(g,18),"STT");const y=await i.withdraw();showToast("⏳ Withdrawing rewards...");await y.wait();showToast("✅ Rewards withdrawn successfully!",y.hash);loadCollectionStats()}catch(a){console.error("Error withdrawing rewards:",a);a.message.includes("user rejected")?showToast("❌ Transaction was cancelled by user"):a.message.includes("insufficient funds")?showToast("❌ Insufficient gas fees for transaction"):a.message.includes("execution reverted")?showToast("❌ Transaction failed - check contract permissions"):showToast(`❌ Failed to withdraw rewards: ${a.message}`)}finally{u(!1)}};const formatDate=n=>{if(!n)return"Not set";const a=new Date(1e3*n);return a.toLocaleDateString()+" "+a.toLocaleTimeString()};return n?at.jsxs("div",{className:"space-y-6",children:[at.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[at.jsxs("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 p-6 shadow-2xl",children:[at.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[at.jsx(b_,{className:"w-5 h-5 text-blue-400"}),at.jsx("span",{className:"text-sm text-zinc-400",children:"Uploaded NFTs"})]}),at.jsx("div",{className:"text-2xl font-bold text-white",children:a?"...":g.uploadedNFTs}),at.jsx("div",{className:"text-xs text-zinc-500 mt-1",children:g.saleHasStarted?"✅ Sale Active":"⏳ Pre-sale"})]}),at.jsxs("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 p-6 shadow-2xl",children:[at.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[at.jsx(qT,{className:"w-5 h-5 text-green-400"}),at.jsx("span",{className:"text-sm text-zinc-400",children:"Available Rewards"})]}),at.jsx("div",{className:"text-2xl font-bold text-white",children:a?"...":`${g.totalRevenue} STT`}),at.jsx("div",{className:"text-xs text-zinc-500 mt-1",children:g.canWithdraw?"✅ Can withdraw":"❌ Not owner"})]}),at.jsxs("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 p-6 shadow-2xl",children:[at.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[at.jsx(fj,{className:"w-5 h-5 text-pink-400"}),at.jsx("span",{className:"text-sm text-zinc-400",children:"Total Mints"})]}),at.jsx("div",{className:"text-2xl font-bold text-white",children:a?"...":g.totalMinted}),at.jsx("div",{className:"text-xs text-zinc-500 mt-1",children:g.saleHasStarted?"🔗 From blockchain":"📦 From uploads"})]}),at.jsxs("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 p-6 shadow-2xl",children:[at.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[at.jsx($_,{className:"w-5 h-5 text-yellow-400"}),at.jsx("span",{className:"text-sm text-zinc-400",children:"Potential Revenue"})]}),at.jsx("div",{className:"text-2xl font-bold text-white",children:a?"...":`${g.potentialRevenue} STT`}),at.jsx("div",{className:"text-xs text-zinc-500 mt-1",children:"From configured phases"})]})]}),at.jsx("div",{className:"flex justify-end",children:at.jsxs("button",{onClick:loadCollectionStats,disabled:a,className:"flex items-center gap-2 px-4 py-2 bg-zinc-700 hover:bg-zinc-600 rounded-lg transition-colors duration-200 disabled:opacity-50",children:[at.jsx(TT,{className:"w-4 h-4 "+(a?"animate-spin":"")}),"Refresh Stats"]})}),at.jsxs("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 p-8 shadow-2xl",children:[at.jsxs("div",{className:"flex items-center justify-between mb-4",children:[at.jsx("h4",{className:"text-lg font-semibold text-white",children:"Phase Configuration"}),at.jsxs("div",{className:"text-sm text-zinc-400",children:[g.phases?.length||0," phases configured"]})]}),g.phases&&g.phases.length>0?at.jsxs("div",{className:"space-y-4",children:[g.phases.map((n,a)=>{const o=Math.floor(Date.now()/1e3);const i=n.active&&n.start<=o&&n.end>=o;const u=n.start>o;const d=n.end<o;return at.jsxs("div",{className:"flex items-center justify-between p-4 bg-zinc-900 rounded-lg",children:[at.jsxs("div",{className:"flex items-center gap-4",children:[at.jsx("div",{className:"w-3 h-3 rounded-full "+(i?"bg-green-500":u?"bg-yellow-500":"bg-gray-500")}),at.jsxs("div",{children:[at.jsx("h5",{className:"font-semibold text-white",children:n.name}),at.jsxs("p",{className:"text-sm text-zinc-400",children:[formatDate(n.start)," - ",formatDate(n.end)]})]})]}),at.jsxs("div",{className:"text-right",children:[at.jsxs("div",{className:"text-lg font-bold text-white",children:[n.price," STT"]}),at.jsxs("div",{className:"text-sm text-zinc-400",children:[n.allocated," NFTs"]}),at.jsxs("div",{className:"text-xs text-zinc-500",children:["Potential: ",(parseFloat(n.price)*n.allocated).toFixed(2)," STT"]}),at.jsx("div",{className:"text-xs mt-1",children:i?at.jsx("span",{className:"text-green-400",children:"● Active"}):u?at.jsx("span",{className:"text-yellow-400",children:"● Upcoming"}):d?at.jsx("span",{className:"text-gray-400",children:"● Ended"}):at.jsx("span",{className:"text-gray-400",children:"● Inactive"})})]})]},a)}),at.jsxs("div",{className:"mt-4 p-4 bg-zinc-900/50 rounded-lg",children:[at.jsxs("div",{className:"flex justify-between items-center",children:[at.jsx("span",{className:"text-sm text-zinc-400",children:"Total Potential Revenue:"}),at.jsxs("span",{className:"text-lg font-bold text-white",children:[g.potentialRevenue," STT"]})]}),at.jsxs("div",{className:"flex justify-between items-center mt-2",children:[at.jsx("span",{className:"text-sm text-zinc-400",children:"Sale Status:"}),at.jsx("span",{className:"text-sm font-medium "+(g.saleHasStarted?"text-green-400":"text-yellow-400"),children:g.saleHasStarted?"Active":"Not Started"})]})]})]}):at.jsxs("div",{className:"text-center py-8",children:[at.jsx("p",{className:"text-zinc-400 mb-2",children:"No phases configured"}),at.jsx("p",{className:"text-xs text-zinc-500",children:'Configure phases in the "Phase Settings" tab to see potential revenue'})]})]}),at.jsxs("div",{className:"bg-zinc-800/50 rounded-xl p-6",children:[at.jsxs("div",{className:"flex items-center justify-between mb-4",children:[at.jsx("h4",{className:"text-lg font-semibold text-white",children:"Rewards & Withdrawals"}),at.jsx("button",{onClick:loadCollectionStats,disabled:a,className:"px-4 py-2 bg-zinc-700 hover:bg-zinc-600 rounded-lg transition-colors duration-200",children:"Refresh"})]}),at.jsxs("div",{className:"space-y-4",children:[at.jsxs("div",{className:"flex items-center justify-between p-4 bg-zinc-900 rounded-lg",children:[at.jsxs("div",{className:"flex items-center gap-3",children:[at.jsx("img",{src:i_,alt:"STT",className:"w-6 h-6"}),at.jsxs("div",{children:[at.jsx("h5",{className:"font-semibold text-white",children:"Contract Balance (Rewards)"}),at.jsx("p",{className:"text-sm text-zinc-400",children:"Money earned from NFT mints"})]})]}),at.jsxs("div",{className:"text-right",children:[at.jsx("div",{className:"text-lg font-bold text-white",children:a?"...":`${g.totalRevenue} STT`}),at.jsx("div",{className:"text-xs text-zinc-500",children:g.canWithdraw?"✅ Can withdraw":"❌ Not owner"})]})]}),at.jsxs("div",{className:"flex items-center justify-between p-4 bg-zinc-900 rounded-lg",children:[at.jsxs("div",{className:"flex items-center gap-3",children:[at.jsx(qT,{className:"w-6 h-6 text-blue-400"}),at.jsxs("div",{children:[at.jsx("h5",{className:"font-semibold text-white",children:"Potential Revenue"}),at.jsx("p",{className:"text-sm text-zinc-400",children:"From configured phases"})]})]}),at.jsx("div",{className:"text-right",children:at.jsx("div",{className:"text-lg font-bold text-white",children:a?"...":`${g.potentialRevenue} STT`})})]}),at.jsxs("div",{className:"flex items-center justify-between p-4 bg-zinc-900 rounded-lg",children:[at.jsxs("div",{className:"flex items-center gap-3",children:[at.jsx(fj,{className:"w-6 h-6 text-green-400"}),at.jsxs("div",{children:[at.jsx("h5",{className:"font-semibold text-white",children:"Total Mints"}),at.jsx("p",{className:"text-sm text-zinc-400",children:"NFTs minted so far"})]})]}),at.jsx("div",{className:"text-right",children:at.jsx("div",{className:"text-lg font-bold text-white",children:a?"...":`${g.totalMinted}/${g.maxSupply}`})})]}),at.jsxs("button",{onClick:handleWithdrawRewards,disabled:i||a||0===parseFloat(g.totalRevenue)||!g.canWithdraw,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-semibold rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[at.jsx(W_,{className:"w-5 h-5"}),i?"Withdrawing...":"Withdraw Rewards"]}),at.jsxs("div",{className:"text-xs text-zinc-500 space-y-1",children:[at.jsx("p",{className:"text-center",children:g.canWithdraw?"✅ You are the contract owner and can withdraw rewards":"❌ Only collection owner can withdraw rewards"}),at.jsxs("p",{className:"text-center",children:["Contract Owner: ",g.contractOwner?`${g.contractOwner.substring(0,6)}...${g.contractOwner.substring(38)}`:"Loading..."]}),at.jsx("p",{className:"text-center",children:at.jsx("a",{href:`https://shannon-explorer.somnia.network/address/${n.address}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"View Contract on Explorer"})})]})]})]}),at.jsxs("div",{className:"bg-zinc-800/50 rounded-xl p-6",children:[at.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Export Data"}),at.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[at.jsxs("button",{onClick:a=>{a.preventDefault();a.stopPropagation();try{const a={collection:n.name,address:n.address,stats:g,timestamp:(new Date).toISOString()};const o=new Blob([JSON.stringify(a,null,2)],{type:"application/json"});const i=URL.createObjectURL(o);const u=document.createElement("a");u.href=i;u.download=`${n.name}_stats.json`;document.body.appendChild(u);u.click();document.body.removeChild(u);URL.revokeObjectURL(i);showToast("✅ Statistics exported successfully")}catch(o){console.error("Export error:",o);showToast("❌ Failed to export statistics")}},className:"flex items-center justify-center gap-2 px-4 py-2 bg-zinc-700 hover:bg-zinc-600 rounded-lg transition-colors duration-200",children:[at.jsx(W_,{className:"w-4 h-4"}),"Export JSON"]}),at.jsxs("button",{onClick:()=>{window.open(`https://shannon-explorer.somnia.network/address/${n.address}`,"_blank")},className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg transition-colors duration-200",children:[at.jsx(V_,{className:"w-4 h-4"}),"View Contract"]})]})]}),d.visible&&at.jsxs("div",{className:"fixed bottom-20 right-4 bg-zinc-900/95 backdrop-blur-md text-white p-4 rounded-xl shadow-2xl max-w-xs animate-fadeIn cursor-pointer hover:opacity-100 opacity-90 border border-zinc-700/50 hover:border-pink-500/50 transition-all duration-300 hover:scale-105",children:[at.jsx("p",{className:"text-sm mb-1",children:d.message}),d.txHash&&at.jsxs("a",{href:`https://shannon-explorer.somnia.network/tx/${d.txHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline flex items-center gap-1 text-sm hover:text-pink-400 transition-colors duration-200",children:[at.jsx(V_,{size:16}),"View Transaction"]})]})]}):at.jsx("div",{className:"text-center py-8",children:at.jsx("p",{className:"text-zinc-400",children:"No collection selected"})})};var RF={exports:{}};
/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var BF;function requireJszip_min(){if(BF)return RF.exports;BF=1;!function(n){!function(a){n.exports=a()}(function(){return function s2(n,a,o){function u2(u,d){if(!a[u]){if(!n[u]){var m="function"==typeof commonjsRequire&&commonjsRequire;if(!d&&m)return m(u,!0);if(i)return i(u,!0);var g=new Error("Cannot find module '"+u+"'");throw g.code="MODULE_NOT_FOUND",g}var y=a[u]={exports:{}};n[u][0].call(y.exports,function(a){var o=n[u][1][a];return u2(o||a)},y,y.exports,s2,n,a,o)}return a[u].exports}for(var i="function"==typeof commonjsRequire&&commonjsRequire,u=0;u<o.length;u++)u2(o[u]);return u2}({1:[function(n,a,o){var i=n("./utils"),u=n("./support"),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.encode=function(n){for(var a,o,u,m,g,y,v,x=[],N=0,k=n.length,E=k,S="string"!==i.getTypeOf(n);N<n.length;)E=k-N,u=S?(a=n[N++],o=N<k?n[N++]:0,N<k?n[N++]:0):(a=n.charCodeAt(N++),o=N<k?n.charCodeAt(N++):0,N<k?n.charCodeAt(N++):0),m=a>>2,g=(3&a)<<4|o>>4,y=1<E?(15&o)<<2|u>>6:64,v=2<E?63&u:64,x.push(d.charAt(m)+d.charAt(g)+d.charAt(y)+d.charAt(v));return x.join("")},o.decode=function(n){var a,o,i,m,g,y,v=0,x=0,N="data:";if(n.substr(0,N.length)===N)throw new Error("Invalid base64 input, it looks like a data url.");var k,E=3*(n=n.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(n.charAt(n.length-1)===d.charAt(64)&&E--,n.charAt(n.length-2)===d.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(k=u.uint8array?new Uint8Array(0|E):new Array(0|E);v<n.length;)a=d.indexOf(n.charAt(v++))<<2|(m=d.indexOf(n.charAt(v++)))>>4,o=(15&m)<<4|(g=d.indexOf(n.charAt(v++)))>>2,i=(3&g)<<6|(y=d.indexOf(n.charAt(v++))),k[x++]=a,64!==g&&(k[x++]=o),64!==y&&(k[x++]=i);return k}},{"./support":30,"./utils":32}],2:[function(n,a,o){var i=n("./external"),u=n("./stream/DataWorker"),d=n("./stream/Crc32Probe"),m=n("./stream/DataLengthProbe");function o3(n,a,o,i,u){this.compressedSize=n,this.uncompressedSize=a,this.crc32=o,this.compression=i,this.compressedContent=u}o3.prototype={getContentWorker:function(){var n=new u(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new m("data_length")),a=this;return n.on("end",function(){if(this.streamInfo.data_length!==a.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),n},getCompressedWorker:function(){return new u(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o3.createWorkerFrom=function(n,a,o){return n.pipe(new d).pipe(new m("uncompressedSize")).pipe(a.compressWorker(o)).pipe(new m("compressedSize")).withStreamInfo("compression",a)},a.exports=o3},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,a,o){var i=n("./stream/GenericWorker");o.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},o.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,a,o){var i=n("./utils");var u=function(){for(var n,a=[],o=0;o<256;o++){n=o;for(var i=0;i<8;i++)n=1&n?3988292384^n>>>1:n>>>1;a[o]=n}return a}();a.exports=function(n,a){return void 0!==n&&n.length?"string"!==i.getTypeOf(n)?function(n,a,o,i){var d=u,m=i+o;n^=-1;for(var g=i;g<m;g++)n=n>>>8^d[255&(n^a[g])];return-1^n}(0|a,n,n.length,0):function(n,a,o,i){var d=u,m=i+o;n^=-1;for(var g=i;g<m;g++)n=n>>>8^d[255&(n^a.charCodeAt(g))];return-1^n}(0|a,n,n.length,0):0}},{"./utils":32}],5:[function(n,a,o){o.base64=!1,o.binary=!1,o.dir=!1,o.createFolders=!0,o.date=null,o.compression=null,o.compressionOptions=null,o.comment=null,o.unixPermissions=null,o.dosPermissions=null},{}],6:[function(n,a,o){var i=null;i="undefined"!=typeof Promise?Promise:n("lie"),a.exports={Promise:i}},{lie:37}],7:[function(n,a,o){var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,u=n("pako"),d=n("./utils"),m=n("./stream/GenericWorker"),g=i?"uint8array":"array";function h2(n,a){m.call(this,"FlateWorker/"+n),this._pako=null,this._pakoAction=n,this._pakoOptions=a,this.meta={}}o.magic="\b\0",d.inherits(h2,m),h2.prototype.processChunk=function(n){this.meta=n.meta,null===this._pako&&this._createPako(),this._pako.push(d.transformTo(g,n.data),!1)},h2.prototype.flush=function(){m.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},h2.prototype.cleanUp=function(){m.prototype.cleanUp.call(this),this._pako=null},h2.prototype._createPako=function(){this._pako=new u[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var n=this;this._pako.onData=function(a){n.push({data:a,meta:n.meta})}},o.compressWorker=function(n){return new h2("Deflate",n)},o.uncompressWorker=function(){return new h2("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,a,o){function A2(n,a){var o,i="";for(o=0;o<a;o++)i+=String.fromCharCode(255&n),n>>>=8;return i}function n32(n,a,o,u,y,v){var x,N,k=n.file,E=n.compression,S=v!==d.utf8encode,A=i.transformTo("string",v(k.name)),_=i.transformTo("string",d.utf8encode(k.name)),j=k.comment,I=i.transformTo("string",v(j)),O=i.transformTo("string",d.utf8encode(j)),R=_.length!==k.name.length,B=O.length!==j.length,M="",z="",L="",D=k.dir,W=k.date,H={crc32:0,compressedSize:0,uncompressedSize:0};a&&!o||(H.crc32=n.crc32,H.compressedSize=n.compressedSize,H.uncompressedSize=n.uncompressedSize);var q=0;a&&(q|=8),S||!R&&!B||(q|=2048);var G=0,V=0;D&&(G|=16),"UNIX"===y?(V=798,G|=function(n,a){var o=n;return n||(o=a?16893:33204),(65535&o)<<16}(k.unixPermissions,D)):(V=20,G|=function(n){return 63&(n||0)}(k.dosPermissions)),x=W.getUTCHours(),x<<=6,x|=W.getUTCMinutes(),x<<=5,x|=W.getUTCSeconds()/2,N=W.getUTCFullYear()-1980,N<<=4,N|=W.getUTCMonth()+1,N<<=5,N|=W.getUTCDate(),R&&(z=A2(1,1)+A2(m(A),4)+_,M+="up"+A2(z.length,2)+z),B&&(L=A2(1,1)+A2(m(I),4)+O,M+="uc"+A2(L.length,2)+L);var Z="";return Z+="\n\0",Z+=A2(q,2),Z+=E.magic,Z+=A2(x,2),Z+=A2(N,2),Z+=A2(H.crc32,4),Z+=A2(H.compressedSize,4),Z+=A2(H.uncompressedSize,4),Z+=A2(A.length,2),Z+=A2(M.length,2),{fileRecord:g.LOCAL_FILE_HEADER+Z+A+M,dirRecord:g.CENTRAL_FILE_HEADER+A2(V,2)+Z+A2(I.length,2)+"\0\0\0\0"+A2(G,4)+A2(u,4)+A+M+I}}var i=n("../utils"),u=n("../stream/GenericWorker"),d=n("../utf8"),m=n("../crc32"),g=n("../signature");function s2(n,a,o,i){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=a,this.zipPlatform=o,this.encodeFileName=i,this.streamFiles=n,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(s2,u),s2.prototype.push=function(n){var a=n.meta.percent||0,o=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(n):(this.bytesWritten+=n.data.length,u.prototype.push.call(this,{data:n.data,meta:{currentFile:this.currentFile,percent:o?(a+100*(o-i-1))/o:100}}))},s2.prototype.openedSource=function(n){this.currentSourceOffset=this.bytesWritten,this.currentFile=n.file.name;var a=this.streamFiles&&!n.file.dir;if(a){var o=n32(n,a,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:o.fileRecord,meta:{percent:0}})}else this.accumulate=!0},s2.prototype.closedSource=function(n){this.accumulate=!1;var a=this.streamFiles&&!n.file.dir,o=n32(n,a,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(o.dirRecord),a)this.push({data:function(n){return g.DATA_DESCRIPTOR+A2(n.crc32,4)+A2(n.compressedSize,4)+A2(n.uncompressedSize,4)}(n),meta:{percent:100}});else for(this.push({data:o.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},s2.prototype.flush=function(){for(var n=this.bytesWritten,a=0;a<this.dirRecords.length;a++)this.push({data:this.dirRecords[a],meta:{percent:100}});var o=this.bytesWritten-n,u=function(n,a,o,u,d){var m=i.transformTo("string",d(u));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+A2(n,2)+A2(n,2)+A2(a,4)+A2(o,4)+A2(m.length,2)+m}(this.dirRecords.length,o,n,this.zipComment,this.encodeFileName);this.push({data:u,meta:{percent:100}})},s2.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},s2.prototype.registerPrevious=function(n){this._sources.push(n);var a=this;return n.on("data",function(n){a.processChunk(n)}),n.on("end",function(){a.closedSource(a.previous.streamInfo),a._sources.length?a.prepareNextSource():a.end()}),n.on("error",function(n){a.error(n)}),this},s2.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},s2.prototype.error=function(n){var a=this._sources;if(!u.prototype.error.call(this,n))return!1;for(var o=0;o<a.length;o++)try{a[o].error(n)}catch(i){}return!0},s2.prototype.lock=function(){u.prototype.lock.call(this);for(var n=this._sources,a=0;a<n.length;a++)n[a].lock()},a.exports=s2},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,a,o){var i=n("../compressions"),u=n("./ZipFileWorker");o.generateWorker=function(n,a,o){var d=new u(a.streamFiles,o,a.platform,a.encodeFileName),m=0;try{n.forEach(function(n,o){m++;var u=function(n,a){var o=n||a,u=i[o];if(!u)throw new Error(o+" is not a valid compression method !");return u}(o.options.compression,a.compression),g=o.options.compressionOptions||a.compressionOptions||{},y=o.dir,v=o.date;o._compressWorker(u,g).withStreamInfo("file",{name:n,dir:y,date:v,comment:o.comment||"",unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions}).pipe(d)}),d.entriesCount=m}catch(g){d.error(g)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,a,o){function n32(){if(!(this instanceof n32))return new n32;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var n=new n32;for(var a in this)"function"!=typeof this[a]&&(n[a]=this[a]);return n}}(n32.prototype=n("./object")).loadAsync=n("./load"),n32.support=n("./support"),n32.defaults=n("./defaults"),n32.version="3.10.1",n32.loadAsync=function(n,a){return(new n32).loadAsync(n,a)},n32.external=n("./external"),a.exports=n32},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,a,o){var i=n("./utils"),u=n("./external"),d=n("./utf8"),m=n("./zipEntries"),g=n("./stream/Crc32Probe"),y=n("./nodejsUtils");function f2(n){return new u.Promise(function(a,o){var i=n.decompressed.getContentWorker().pipe(new g);i.on("error",function(n){o(n)}).on("end",function(){i.streamInfo.crc32!==n.decompressed.crc32?o(new Error("Corrupted zip : CRC32 mismatch")):a()}).resume()})}a.exports=function(n,a){var o=this;return a=i.extend(a||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:d.utf8decode}),y.isNode&&y.isStream(n)?u.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",n,!0,a.optimizedBinaryString,a.base64).then(function(n){var o=new m(a);return o.load(n),o}).then(function(n){var o=[u.Promise.resolve(n)],i=n.files;if(a.checkCRC32)for(var d=0;d<i.length;d++)o.push(f2(i[d]));return u.Promise.all(o)}).then(function(n){for(var u=n.shift(),d=u.files,m=0;m<d.length;m++){var g=d[m],y=g.fileNameStr,v=i.resolve(g.fileNameStr);o.file(v,g.decompressed,{binary:!0,optimizedBinaryString:!0,date:g.date,dir:g.dir,comment:g.fileCommentStr.length?g.fileCommentStr:null,unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions,createFolders:a.createFolders}),g.dir||(o.file(v).unsafeOriginalName=y)}return u.zipComment.length&&(o.comment=u.zipComment),o})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,a,o){var i=n("../utils"),u=n("../stream/GenericWorker");function s2(n,a){u.call(this,"Nodejs stream input adapter for "+n),this._upstreamEnded=!1,this._bindStream(a)}i.inherits(s2,u),s2.prototype._bindStream=function(n){var a=this;(this._stream=n).pause(),n.on("data",function(n){a.push({data:n,meta:{percent:0}})}).on("error",function(n){a.isPaused?this.generatedError=n:a.error(n)}).on("end",function(){a.isPaused?a._upstreamEnded=!0:a.end()})},s2.prototype.pause=function(){return!!u.prototype.pause.call(this)&&(this._stream.pause(),!0)},s2.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},a.exports=s2},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,a,o){var i=n("readable-stream").Readable;function n32(n,a,o){i.call(this,a),this._helper=n;var u=this;n.on("data",function(n,a){u.push(n)||u._helper.pause(),o&&o(a)}).on("error",function(n){u.emit("error",n)}).on("end",function(){u.push(null)})}n("../utils").inherits(n32,i),n32.prototype._read=function(){this._helper.resume()},a.exports=n32},{"../utils":32,"readable-stream":16}],14:[function(n,a,o){a.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(n,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,a);if("number"==typeof n)throw new Error('The "data" argument must not be a number');return new Buffer(n,a)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var a=new Buffer(n);return a.fill(0),a},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&"function"==typeof n.on&&"function"==typeof n.pause&&"function"==typeof n.resume}}},{}],15:[function(n,a,o){function s2(n,a,o){var i,m=u.getTypeOf(a),x=u.extend(o||{},g);x.date=x.date||new Date,null!==x.compression&&(x.compression=x.compression.toUpperCase()),"string"==typeof x.unixPermissions&&(x.unixPermissions=parseInt(x.unixPermissions,8)),x.unixPermissions&&16384&x.unixPermissions&&(x.dir=!0),x.dosPermissions&&16&x.dosPermissions&&(x.dir=!0),x.dir&&(n=g22(n)),x.createFolders&&(i=_2(n))&&b22.call(this,i,!0);var E="string"===m&&!1===x.binary&&!1===x.base64;o&&void 0!==o.binary||(x.binary=!E),(a instanceof y&&0===a.uncompressedSize||x.dir||!a||0===a.length)&&(x.base64=!1,x.binary=!0,a="",x.compression="STORE",m="string");var S=null;S=a instanceof y||a instanceof d?a:N.isNode&&N.isStream(a)?new k(n,a):u.prepareContent(n,a,x.binary,x.optimizedBinaryString,x.base64);var A=new v(n,S,x);this.files[n]=A}var i=n("./utf8"),u=n("./utils"),d=n("./stream/GenericWorker"),m=n("./stream/StreamHelper"),g=n("./defaults"),y=n("./compressedObject"),v=n("./zipObject"),x=n("./generate"),N=n("./nodejsUtils"),k=n("./nodejs/NodejsStreamInputAdapter"),_2=function(n){"/"===n.slice(-1)&&(n=n.substring(0,n.length-1));var a=n.lastIndexOf("/");return 0<a?n.substring(0,a):""},g22=function(n){return"/"!==n.slice(-1)&&(n+="/"),n},b22=function(n,a){return a=void 0!==a?a:g.createFolders,n=g22(n),this.files[n]||s2.call(this,n,null,{dir:!0,createFolders:a}),this.files[n]};function h2(n){return"[object RegExp]"===Object.prototype.toString.call(n)}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(n){var a,o,i;for(a in this.files)i=this.files[a],(o=a.slice(this.root.length,a.length))&&a.slice(0,this.root.length)===this.root&&n(o,i)},filter:function(n){var a=[];return this.forEach(function(o,i){n(o,i)&&a.push(i)}),a},file:function(n,a,o){if(1!==arguments.length)return n=this.root+n,s2.call(this,n,a,o),this;if(h2(n)){var i=n;return this.filter(function(n,a){return!a.dir&&i.test(n)})}var u=this.files[this.root+n];return u&&!u.dir?u:null},folder:function(n){if(!n)return this;if(h2(n))return this.filter(function(a,o){return o.dir&&n.test(a)});var a=this.root+n,o=b22.call(this,a),i=this.clone();return i.root=o.name,i},remove:function(n){n=this.root+n;var a=this.files[n];if(a||("/"!==n.slice(-1)&&(n+="/"),a=this.files[n]),a&&!a.dir)delete this.files[n];else for(var o=this.filter(function(a,o){return o.name.slice(0,n.length)===n}),i=0;i<o.length;i++)delete this.files[o[i].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(n){var a,o={};try{if((o=u.extend(n||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=o.type.toLowerCase(),o.compression=o.compression.toUpperCase(),"binarystring"===o.type&&(o.type="string"),!o.type)throw new Error("No output type specified.");u.checkSupport(o.type),"darwin"!==o.platform&&"freebsd"!==o.platform&&"linux"!==o.platform&&"sunos"!==o.platform||(o.platform="UNIX"),"win32"===o.platform&&(o.platform="DOS");var g=o.comment||this.comment||"";a=x.generateWorker(this,o,g)}catch(y){(a=new d("error")).error(y)}return new m(a,o.type||"string",o.mimeType)},generateAsync:function(n,a){return this.generateInternalStream(n).accumulate(a)},generateNodeStream:function(n,a){return(n=n||{}).type||(n.type="nodebuffer"),this.generateInternalStream(n).toNodejsStream(a)}};a.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,a,o){a.exports=n("stream")},{stream:void 0}],17:[function(n,a,o){var i=n("./DataReader");function i3(n){i.call(this,n);for(var a=0;a<this.data.length;a++)n[a]=255&n[a]}n("../utils").inherits(i3,i),i3.prototype.byteAt=function(n){return this.data[this.zero+n]},i3.prototype.lastIndexOfSignature=function(n){for(var a=n.charCodeAt(0),o=n.charCodeAt(1),i=n.charCodeAt(2),u=n.charCodeAt(3),d=this.length-4;0<=d;--d)if(this.data[d]===a&&this.data[d+1]===o&&this.data[d+2]===i&&this.data[d+3]===u)return d-this.zero;return-1},i3.prototype.readAndCheckSignature=function(n){var a=n.charCodeAt(0),o=n.charCodeAt(1),i=n.charCodeAt(2),u=n.charCodeAt(3),d=this.readData(4);return a===d[0]&&o===d[1]&&i===d[2]&&u===d[3]},i3.prototype.readData=function(n){if(this.checkOffset(n),0===n)return[];var a=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,a},a.exports=i3},{"../utils":32,"./DataReader":18}],18:[function(n,a,o){var i=n("../utils");function i3(n){this.data=n,this.length=n.length,this.index=0,this.zero=0}i3.prototype={checkOffset:function(n){this.checkIndex(this.index+n)},checkIndex:function(n){if(this.length<this.zero+n||n<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+n+"). Corrupted zip ?")},setIndex:function(n){this.checkIndex(n),this.index=n},skip:function(n){this.setIndex(this.index+n)},byteAt:function(){},readInt:function(n){var a,o=0;for(this.checkOffset(n),a=this.index+n-1;a>=this.index;a--)o=(o<<8)+this.byteAt(a);return this.index+=n,o},readString:function(n){return i.transformTo("string",this.readData(n))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var n=this.readInt(4);return new Date(Date.UTC(1980+(n>>25&127),(n>>21&15)-1,n>>16&31,n>>11&31,n>>5&63,(31&n)<<1))}},a.exports=i3},{"../utils":32}],19:[function(n,a,o){var i=n("./Uint8ArrayReader");function i3(n){i.call(this,n)}n("../utils").inherits(i3,i),i3.prototype.readData=function(n){this.checkOffset(n);var a=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,a},a.exports=i3},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,a,o){var i=n("./DataReader");function i3(n){i.call(this,n)}n("../utils").inherits(i3,i),i3.prototype.byteAt=function(n){return this.data.charCodeAt(this.zero+n)},i3.prototype.lastIndexOfSignature=function(n){return this.data.lastIndexOf(n)-this.zero},i3.prototype.readAndCheckSignature=function(n){return n===this.readData(4)},i3.prototype.readData=function(n){this.checkOffset(n);var a=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,a},a.exports=i3},{"../utils":32,"./DataReader":18}],21:[function(n,a,o){var i=n("./ArrayReader");function i3(n){i.call(this,n)}n("../utils").inherits(i3,i),i3.prototype.readData=function(n){if(this.checkOffset(n),0===n)return new Uint8Array(0);var a=this.data.subarray(this.zero+this.index,this.zero+this.index+n);return this.index+=n,a},a.exports=i3},{"../utils":32,"./ArrayReader":17}],22:[function(n,a,o){var i=n("../utils"),u=n("../support"),d=n("./ArrayReader"),m=n("./StringReader"),g=n("./NodeBufferReader"),y=n("./Uint8ArrayReader");a.exports=function(n){var a=i.getTypeOf(n);return i.checkSupport(a),"string"!==a||u.uint8array?"nodebuffer"===a?new g(n):u.uint8array?new y(i.transformTo("uint8array",n)):new d(i.transformTo("array",n)):new m(n)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,a,o){o.LOCAL_FILE_HEADER="PK",o.CENTRAL_FILE_HEADER="PK",o.CENTRAL_DIRECTORY_END="PK",o.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",o.ZIP64_CENTRAL_DIRECTORY_END="PK",o.DATA_DESCRIPTOR="PK\b"},{}],24:[function(n,a,o){var i=n("./GenericWorker"),u=n("../utils");function s2(n){i.call(this,"ConvertWorker to "+n),this.destType=n}u.inherits(s2,i),s2.prototype.processChunk=function(n){this.push({data:u.transformTo(this.destType,n.data),meta:n.meta})},a.exports=s2},{"../utils":32,"./GenericWorker":28}],25:[function(n,a,o){var i=n("./GenericWorker"),u=n("../crc32");function s2(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(s2,i),s2.prototype.processChunk=function(n){this.streamInfo.crc32=u(n.data,this.streamInfo.crc32||0),this.push(n)},a.exports=s2},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,a,o){var i=n("../utils"),u=n("./GenericWorker");function s2(n){u.call(this,"DataLengthProbe for "+n),this.propName=n,this.withStreamInfo(n,0)}i.inherits(s2,u),s2.prototype.processChunk=function(n){if(n){var a=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=a+n.data.length}u.prototype.processChunk.call(this,n)},a.exports=s2},{"../utils":32,"./GenericWorker":28}],27:[function(n,a,o){var i=n("../utils"),u=n("./GenericWorker");function s2(n){u.call(this,"DataWorker");var a=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,n.then(function(n){a.dataIsReady=!0,a.data=n,a.max=n&&n.length||0,a.type=i.getTypeOf(n),a.isPaused||a._tickAndRepeat()},function(n){a.error(n)})}i.inherits(s2,u),s2.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this.data=null},s2.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},s2.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s2.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var n=null,a=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":n=this.data.substring(this.index,a);break;case"uint8array":n=this.data.subarray(this.index,a);break;case"array":case"nodebuffer":n=this.data.slice(this.index,a)}return this.index=a,this.push({data:n,meta:{percent:this.max?this.index/this.max*100:0}})},a.exports=s2},{"../utils":32,"./GenericWorker":28}],28:[function(n,a,o){function n32(n){this.name=n||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n32.prototype={push:function(n){this.emit("data",n)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(n){this.emit("error",n)}return!0},error:function(n){return!this.isFinished&&(this.isPaused?this.generatedError=n:(this.isFinished=!0,this.emit("error",n),this.previous&&this.previous.error(n),this.cleanUp()),!0)},on:function(n,a){return this._listeners[n].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(n,a){if(this._listeners[n])for(var o=0;o<this._listeners[n].length;o++)this._listeners[n][o].call(this,a)},pipe:function(n){return n.registerPrevious(this)},registerPrevious:function(n){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=n.streamInfo,this.mergeStreamInfo(),this.previous=n;var a=this;return n.on("data",function(n){a.processChunk(n)}),n.on("end",function(){a.end()}),n.on("error",function(n){a.error(n)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var n=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),n=!0),this.previous&&this.previous.resume(),!n},flush:function(){},processChunk:function(n){this.push(n)},withStreamInfo:function(n,a){return this.extraStreamInfo[n]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var n in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,n)&&(this.streamInfo[n]=this.extraStreamInfo[n])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var n="Worker "+this.name;return this.previous?this.previous+" -> "+n:n}},a.exports=n32},{}],29:[function(n,a,o){var i=n("../utils"),u=n("./ConvertWorker"),d=n("./GenericWorker"),m=n("../base64"),g=n("../support"),y=n("../external"),v=null;if(g.nodestream)try{v=n("../nodejs/NodejsStreamOutputAdapter")}catch(x){}function l2(n,a){return new y.Promise(function(o,u){var d=[],g=n._internalType,y=n._outputType,v=n._mimeType;n.on("data",function(n,o){d.push(n),a&&a(o)}).on("error",function(n){d=[],u(n)}).on("end",function(){try{var n=function(n,a,o){switch(n){case"blob":return i.newBlob(i.transformTo("arraybuffer",a),o);case"base64":return m.encode(a);default:return i.transformTo(n,a)}}(y,function(n,a){var o,i=0,u=null,d=0;for(o=0;o<a.length;o++)d+=a[o].length;switch(n){case"string":return a.join("");case"array":return Array.prototype.concat.apply([],a);case"uint8array":for(u=new Uint8Array(d),o=0;o<a.length;o++)u.set(a[o],i),i+=a[o].length;return u;case"nodebuffer":return Buffer.concat(a);default:throw new Error("concat : unsupported type '"+n+"'")}}(g,d),v);o(n)}catch(a){u(a)}d=[]}).resume()})}function f2(n,a,o){var m=a;switch(a){case"blob":case"arraybuffer":m="uint8array";break;case"base64":m="string"}try{this._internalType=m,this._outputType=a,this._mimeType=o,i.checkSupport(m),this._worker=n.pipe(new u(m)),n.lock()}catch(g){this._worker=new d("error"),this._worker.error(g)}}f2.prototype={accumulate:function(n){return l2(this,n)},on:function(n,a){var o=this;return"data"===n?this._worker.on(n,function(n){a.call(o,n.data,n.meta)}):this._worker.on(n,function(){i.delay(a,arguments,o)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(n){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new v(this,{objectMode:"nodebuffer"!==this._outputType},n)}},a.exports=f2},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,a,o){if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,o.nodebuffer="undefined"!=typeof Buffer,o.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)o.blob=!1;else{var i=new ArrayBuffer(0);try{o.blob=0===new Blob([i],{type:"application/zip"}).size}catch(d){try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);u.append(i),o.blob=0===u.getBlob("application/zip").size}catch(m){o.blob=!1}}}try{o.nodestream=!!n("readable-stream").Readable}catch(d){o.nodestream=!1}},{"readable-stream":16}],31:[function(n,a,o){for(var i=n("./utils"),u=n("./support"),d=n("./nodejsUtils"),m=n("./stream/GenericWorker"),g=new Array(256),y=0;y<256;y++)g[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;g[254]=g[254]=1;function a22(){m.call(this,"utf-8 decode"),this.leftOver=null}function l2(){m.call(this,"utf-8 encode")}o.utf8encode=function(n){return u.nodebuffer?d.newBufferFrom(n,"utf-8"):function(n){var a,o,i,d,m,g=n.length,y=0;for(d=0;d<g;d++)55296==(64512&(o=n.charCodeAt(d)))&&d+1<g&&56320==(64512&(i=n.charCodeAt(d+1)))&&(o=65536+(o-55296<<10)+(i-56320),d++),y+=o<128?1:o<2048?2:o<65536?3:4;for(a=u.uint8array?new Uint8Array(y):new Array(y),d=m=0;m<y;d++)55296==(64512&(o=n.charCodeAt(d)))&&d+1<g&&56320==(64512&(i=n.charCodeAt(d+1)))&&(o=65536+(o-55296<<10)+(i-56320),d++),o<128?a[m++]=o:(o<2048?a[m++]=192|o>>>6:(o<65536?a[m++]=224|o>>>12:(a[m++]=240|o>>>18,a[m++]=128|o>>>12&63),a[m++]=128|o>>>6&63),a[m++]=128|63&o);return a}(n)},o.utf8decode=function(n){return u.nodebuffer?i.transformTo("nodebuffer",n).toString("utf-8"):function(n){var a,o,u,d,m=n.length,y=new Array(2*m);for(a=o=0;a<m;)if((u=n[a++])<128)y[o++]=u;else if(4<(d=g[u]))y[o++]=65533,a+=d-1;else{for(u&=2===d?31:3===d?15:7;1<d&&a<m;)u=u<<6|63&n[a++],d--;1<d?y[o++]=65533:u<65536?y[o++]=u:(u-=65536,y[o++]=55296|u>>10&1023,y[o++]=56320|1023&u)}return y.length!==o&&(y.subarray?y=y.subarray(0,o):y.length=o),i.applyFromCharCode(y)}(n=i.transformTo(u.uint8array?"uint8array":"array",n))},i.inherits(a22,m),a22.prototype.processChunk=function(n){var a=i.transformTo(u.uint8array?"uint8array":"array",n.data);if(this.leftOver&&this.leftOver.length){if(u.uint8array){var d=a;(a=new Uint8Array(d.length+this.leftOver.length)).set(this.leftOver,0),a.set(d,this.leftOver.length)}else a=this.leftOver.concat(a);this.leftOver=null}var m=function(n,a){var o;for((a=a||n.length)>n.length&&(a=n.length),o=a-1;0<=o&&128==(192&n[o]);)o--;return o<0||0===o?a:o+g[n[o]]>a?o:a}(a),y=a;m!==a.length&&(u.uint8array?(y=a.subarray(0,m),this.leftOver=a.subarray(m,a.length)):(y=a.slice(0,m),this.leftOver=a.slice(m,a.length))),this.push({data:o.utf8decode(y),meta:n.meta})},a22.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=a22,i.inherits(l2,m),l2.prototype.processChunk=function(n){this.push({data:o.utf8encode(n.data),meta:n.meta})},o.Utf8EncodeWorker=l2},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,a,o){var i=n("./support"),u=n("./base64"),d=n("./nodejsUtils"),m=n("./external");function n32(n){return n}function l2(n,a){for(var o=0;o<n.length;++o)a[o]=255&n.charCodeAt(o);return a}n("setimmediate"),o.newBlob=function(n,a){o.checkSupport("blob");try{return new Blob([n],{type:a})}catch(u){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(n),i.getBlob(a)}catch(d){throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(n,a,o){var i=[],u=0,d=n.length;if(d<=o)return String.fromCharCode.apply(null,n);for(;u<d;)"array"===a||"nodebuffer"===a?i.push(String.fromCharCode.apply(null,n.slice(u,Math.min(u+o,d)))):i.push(String.fromCharCode.apply(null,n.subarray(u,Math.min(u+o,d)))),u+=o;return i.join("")},stringifyByChar:function(n){for(var a="",o=0;o<n.length;o++)a+=String.fromCharCode(n[o]);return a},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(n){return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,d.allocBuffer(1)).length}catch(n){return!1}}()}};function s2(n){var a=65536,i=o.getTypeOf(n),u=!0;if("uint8array"===i?u=g.applyCanBeUsed.uint8array:"nodebuffer"===i&&(u=g.applyCanBeUsed.nodebuffer),u)for(;1<a;)try{return g.stringifyByChunk(n,i,a)}catch(d){a=Math.floor(a/2)}return g.stringifyByChar(n)}function f2(n,a){for(var o=0;o<n.length;o++)a[o]=n[o];return a}o.applyFromCharCode=s2;var y={};y.string={string:n32,array:function(n){return l2(n,new Array(n.length))},arraybuffer:function(n){return y.string.uint8array(n).buffer},uint8array:function(n){return l2(n,new Uint8Array(n.length))},nodebuffer:function(n){return l2(n,d.allocBuffer(n.length))}},y.array={string:s2,array:n32,arraybuffer:function(n){return new Uint8Array(n).buffer},uint8array:function(n){return new Uint8Array(n)},nodebuffer:function(n){return d.newBufferFrom(n)}},y.arraybuffer={string:function(n){return s2(new Uint8Array(n))},array:function(n){return f2(new Uint8Array(n),new Array(n.byteLength))},arraybuffer:n32,uint8array:function(n){return new Uint8Array(n)},nodebuffer:function(n){return d.newBufferFrom(new Uint8Array(n))}},y.uint8array={string:s2,array:function(n){return f2(n,new Array(n.length))},arraybuffer:function(n){return n.buffer},uint8array:n32,nodebuffer:function(n){return d.newBufferFrom(n)}},y.nodebuffer={string:s2,array:function(n){return f2(n,new Array(n.length))},arraybuffer:function(n){return y.nodebuffer.uint8array(n).buffer},uint8array:function(n){return f2(n,new Uint8Array(n.length))},nodebuffer:n32},o.transformTo=function(n,a){if(a=a||"",!n)return a;o.checkSupport(n);var i=o.getTypeOf(a);return y[i][n](a)},o.resolve=function(n){for(var a=n.split("/"),o=[],i=0;i<a.length;i++){var u=a[i];"."===u||""===u&&0!==i&&i!==a.length-1||(".."===u?o.pop():o.push(u))}return o.join("/")},o.getTypeOf=function(n){return"string"==typeof n?"string":"[object Array]"===Object.prototype.toString.call(n)?"array":i.nodebuffer&&d.isBuffer(n)?"nodebuffer":i.uint8array&&n instanceof Uint8Array?"uint8array":i.arraybuffer&&n instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(n){if(!i[n.toLowerCase()])throw new Error(n+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(n){var a,o,i="";for(o=0;o<(n||"").length;o++)i+="\\x"+((a=n.charCodeAt(o))<16?"0":"")+a.toString(16).toUpperCase();return i},o.delay=function(n,a,o){setImmediate(function(){n.apply(o||null,a||[])})},o.inherits=function(n,a){function r22(){}r22.prototype=a.prototype,n.prototype=new r22},o.extend=function(){var n,a,o={};for(n=0;n<arguments.length;n++)for(a in arguments[n])Object.prototype.hasOwnProperty.call(arguments[n],a)&&void 0===o[a]&&(o[a]=arguments[n][a]);return o},o.prepareContent=function(n,a,d,g,y){return m.Promise.resolve(a).then(function(n){return i.blob&&(n instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(n)))&&"undefined"!=typeof FileReader?new m.Promise(function(a,o){var i=new FileReader;i.onload=function(n){a(n.target.result)},i.onerror=function(n){o(n.target.error)},i.readAsArrayBuffer(n)}):n}).then(function(a){var v=o.getTypeOf(a);return v?("arraybuffer"===v?a=o.transformTo("uint8array",a):"string"===v&&(y?a=u.decode(a):d&&!0!==g&&(a=function(n){return l2(n,i.uint8array?new Uint8Array(n.length):new Array(n.length))}(a))),a):m.Promise.reject(new Error("Can't read the data of '"+n+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,a,o){var i=n("./reader/readerFor"),u=n("./utils"),d=n("./signature"),m=n("./zipEntry"),g=n("./support");function h2(n){this.files=[],this.loadOptions=n}h2.prototype={checkSignature:function(n){if(!this.reader.readAndCheckSignature(n)){this.reader.index-=4;var a=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+u.pretty(a)+", expected "+u.pretty(n)+")")}},isSignature:function(n,a){var o=this.reader.index;this.reader.setIndex(n);var i=this.reader.readString(4)===a;return this.reader.setIndex(o),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var n=this.reader.readData(this.zipCommentLength),a=g.uint8array?"uint8array":"array",o=u.transformTo(a,n);this.zipComment=this.loadOptions.decodeFileName(o)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var n,a,o,i=this.zip64EndOfCentralSize-44;0<i;)n=this.reader.readInt(2),a=this.reader.readInt(4),o=this.reader.readData(a),this.zip64ExtensibleData[n]={id:n,length:a,value:o}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var n,a;for(n=0;n<this.files.length;n++)a=this.files[n],this.reader.setIndex(a.localHeaderOffset),this.checkSignature(d.LOCAL_FILE_HEADER),a.readLocalPart(this.reader),a.handleUTF8(),a.processAttributes()},readCentralDir:function(){var n;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(d.CENTRAL_FILE_HEADER);)(n=new m({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(n);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var n=this.reader.lastIndexOfSignature(d.CENTRAL_DIRECTORY_END);if(n<0)throw this.isSignature(0,d.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(n);var a=n;if(this.checkSignature(d.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===u.MAX_VALUE_16BITS||this.diskWithCentralDirStart===u.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===u.MAX_VALUE_16BITS||this.centralDirRecords===u.MAX_VALUE_16BITS||this.centralDirSize===u.MAX_VALUE_32BITS||this.centralDirOffset===u.MAX_VALUE_32BITS){if(this.zip64=!0,(n=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(n),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,d.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var o=this.centralDirOffset+this.centralDirSize;this.zip64&&(o+=20,o+=12+this.zip64EndOfCentralSize);var i=a-o;if(0<i)this.isSignature(a,d.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(n){this.reader=i(n)},load:function(n){this.prepareReader(n),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},a.exports=h2},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,a,o){var i=n("./reader/readerFor"),u=n("./utils"),d=n("./compressedObject"),m=n("./crc32"),g=n("./utf8"),y=n("./compressions"),v=n("./support");function l2(n,a){this.options=n,this.loadOptions=a}l2.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(n){var a,o;if(n.skip(22),this.fileNameLength=n.readInt(2),o=n.readInt(2),this.fileName=n.readData(this.fileNameLength),n.skip(o),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(a=function(n){for(var a in y)if(Object.prototype.hasOwnProperty.call(y,a)&&y[a].magic===n)return y[a];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+u.pretty(this.compressionMethod)+" unknown (inner file : "+u.transformTo("string",this.fileName)+")");this.decompressed=new d(this.compressedSize,this.uncompressedSize,this.crc32,a,n.readData(this.compressedSize))},readCentralPart:function(n){this.versionMadeBy=n.readInt(2),n.skip(2),this.bitFlag=n.readInt(2),this.compressionMethod=n.readString(2),this.date=n.readDate(),this.crc32=n.readInt(4),this.compressedSize=n.readInt(4),this.uncompressedSize=n.readInt(4);var a=n.readInt(2);if(this.extraFieldsLength=n.readInt(2),this.fileCommentLength=n.readInt(2),this.diskNumberStart=n.readInt(2),this.internalFileAttributes=n.readInt(2),this.externalFileAttributes=n.readInt(4),this.localHeaderOffset=n.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");n.skip(a),this.readExtraFields(n),this.parseZIP64ExtraField(n),this.fileComment=n.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var n=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==n&&(this.dosPermissions=63&this.externalFileAttributes),3==n&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var n=i(this.extraFields[1].value);this.uncompressedSize===u.MAX_VALUE_32BITS&&(this.uncompressedSize=n.readInt(8)),this.compressedSize===u.MAX_VALUE_32BITS&&(this.compressedSize=n.readInt(8)),this.localHeaderOffset===u.MAX_VALUE_32BITS&&(this.localHeaderOffset=n.readInt(8)),this.diskNumberStart===u.MAX_VALUE_32BITS&&(this.diskNumberStart=n.readInt(4))}},readExtraFields:function(n){var a,o,i,u=n.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});n.index+4<u;)a=n.readInt(2),o=n.readInt(2),i=n.readData(o),this.extraFields[a]={id:a,length:o,value:i};n.setIndex(u)},handleUTF8:function(){var n=v.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=g.utf8decode(this.fileName),this.fileCommentStr=g.utf8decode(this.fileComment);else{var a=this.findExtraFieldUnicodePath();if(null!==a)this.fileNameStr=a;else{var o=u.transformTo(n,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(o)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var d=u.transformTo(n,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(d)}}},findExtraFieldUnicodePath:function(){var n=this.extraFields[28789];if(n){var a=i(n.value);return 1!==a.readInt(1)||m(this.fileName)!==a.readInt(4)?null:g.utf8decode(a.readData(n.length-5))}return null},findExtraFieldUnicodeComment:function(){var n=this.extraFields[25461];if(n){var a=i(n.value);return 1!==a.readInt(1)||m(this.fileComment)!==a.readInt(4)?null:g.utf8decode(a.readData(n.length-5))}return null}},a.exports=l2},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,a,o){function n32(n,a,o){this.name=n,this.dir=o.dir,this.date=o.date,this.comment=o.comment,this.unixPermissions=o.unixPermissions,this.dosPermissions=o.dosPermissions,this._data=a,this._dataBinary=o.binary,this.options={compression:o.compression,compressionOptions:o.compressionOptions}}var i=n("./stream/StreamHelper"),u=n("./stream/DataWorker"),d=n("./utf8"),m=n("./compressedObject"),g=n("./stream/GenericWorker");n32.prototype={internalStream:function(n){var a=null,o="string";try{if(!n)throw new Error("No output type specified.");var u="string"===(o=n.toLowerCase())||"text"===o;"binarystring"!==o&&"text"!==o||(o="string"),a=this._decompressWorker();var m=!this._dataBinary;m&&!u&&(a=a.pipe(new d.Utf8EncodeWorker)),!m&&u&&(a=a.pipe(new d.Utf8DecodeWorker))}catch(y){(a=new g("error")).error(y)}return new i(a,o,"")},async:function(n,a){return this.internalStream(n).accumulate(a)},nodeStream:function(n,a){return this.internalStream(n||"nodebuffer").toNodejsStream(a)},_compressWorker:function(n,a){if(this._data instanceof m&&this._data.compression.magic===n.magic)return this._data.getCompressedWorker();var o=this._decompressWorker();return this._dataBinary||(o=o.pipe(new d.Utf8EncodeWorker)),m.createWorkerFrom(o,n,a)},_decompressWorker:function(){return this._data instanceof m?this._data.getContentWorker():this._data instanceof g?this._data:new u(this._data)}};for(var y=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l2=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},v=0;v<y.length;v++)n32.prototype[y[v]]=l2;a.exports=n32},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,a,o){(function(n){var o,i,u=n.MutationObserver||n.WebKitMutationObserver;if(u){var d=0,m=new u(u22),g=n.document.createTextNode("");m.observe(g,{characterData:!0}),o=function(){g.data=d=++d%2}}else if(n.setImmediate||void 0===n.MessageChannel)o="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var a=n.document.createElement("script");a.onreadystatechange=function(){u22(),a.onreadystatechange=null,a.parentNode.removeChild(a),a=null},n.document.documentElement.appendChild(a)}:function(){setTimeout(u22,0)};else{var y=new n.MessageChannel;y.port1.onmessage=u22,o=function(){y.port2.postMessage(0)}}var v=[];function u22(){var n,a;i=!0;for(var o=v.length;o;){for(a=v,v=[],n=-1;++n<o;)a[n]();o=v.length}i=!1}a.exports=function(n){1!==v.push(n)||i||o()}}).call(this,"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(n,a,o){var i=n("immediate");function u2(){}var u={},d=["REJECTED"],m=["FULFILLED"],g=["PENDING"];function o3(n){if("function"!=typeof n)throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,n!==u2&&d32(this,n)}function h2(n,a,o){this.promise=n,"function"==typeof a&&(this.onFulfilled=a,this.callFulfilled=this.otherCallFulfilled),"function"==typeof o&&(this.onRejected=o,this.callRejected=this.otherCallRejected)}function f2(n,a,o){i(function(){var i;try{i=a(o)}catch(d){return u.reject(n,d)}i===n?u.reject(n,new TypeError("Cannot resolve promise with itself")):u.resolve(n,i)})}function c2(n){var a=n&&n.then;if(n&&("object"==typeof n||"function"==typeof n)&&"function"==typeof a)return function(){a.apply(n,arguments)}}function d32(n,a){var o=!1;function n222(a){o||(o=!0,u.reject(n,a))}function i22(a){o||(o=!0,u.resolve(n,a))}var i=p2(function(){a(i22,n222)});"error"===i.status&&n222(i.value)}function p2(n,a){var o={};try{o.value=n(a),o.status="success"}catch(i){o.status="error",o.value=i}return o}(a.exports=o3).prototype.finally=function(n){if("function"!=typeof n)return this;var a=this.constructor;return this.then(function(o){return a.resolve(n()).then(function(){return o})},function(o){return a.resolve(n()).then(function(){throw o})})},o3.prototype.catch=function(n){return this.then(null,n)},o3.prototype.then=function(n,a){if("function"!=typeof n&&this.state===m||"function"!=typeof a&&this.state===d)return this;var o=new this.constructor(u2);this.state!==g?f2(o,this.state===m?n:a,this.outcome):this.queue.push(new h2(o,n,a));return o},h2.prototype.callFulfilled=function(n){u.resolve(this.promise,n)},h2.prototype.otherCallFulfilled=function(n){f2(this.promise,this.onFulfilled,n)},h2.prototype.callRejected=function(n){u.reject(this.promise,n)},h2.prototype.otherCallRejected=function(n){f2(this.promise,this.onRejected,n)},u.resolve=function(n,a){var o=p2(c2,a);if("error"===o.status)return u.reject(n,o.value);var i=o.value;if(i)d32(n,i);else{n.state=m,n.outcome=a;for(var d=-1,g=n.queue.length;++d<g;)n.queue[d].callFulfilled(a)}return n},u.reject=function(n,a){n.state=d,n.outcome=a;for(var o=-1,i=n.queue.length;++o<i;)n.queue[o].callRejected(a);return n},o3.resolve=function(n){return n instanceof this?n:u.resolve(new this(u2),n)},o3.reject=function(n){var a=new this(u2);return u.reject(a,n)},o3.all=function(n){var a=this;if("[object Array]"!==Object.prototype.toString.call(n))return this.reject(new TypeError("must be an array"));var o=n.length,i=!1;if(!o)return this.resolve([]);var d=new Array(o),m=0,g=-1,y=new this(u2);for(;++g<o;)h22(n[g],g);return y;function h22(n,g){a.resolve(n).then(function(n){d[g]=n,++m!==o||i||(i=!0,u.resolve(y,d))},function(n){i||(i=!0,u.reject(y,n))})}},o3.race=function(n){var a=this;if("[object Array]"!==Object.prototype.toString.call(n))return this.reject(new TypeError("must be an array"));var o=n.length,i=!1;if(!o)return this.resolve([]);var d=-1,m=new this(u2);for(;++d<o;)g=n[d],a.resolve(g).then(function(n){i||(i=!0,u.resolve(m,n))},function(n){i||(i=!0,u.reject(m,n))});var g;return m}},{immediate:36}],38:[function(n,a,o){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),a.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,a,o){var i=n("./zlib/deflate"),u=n("./utils/common"),d=n("./utils/strings"),m=n("./zlib/messages"),g=n("./zlib/zstream"),y=Object.prototype.toString,v=0,x=-1,N=0,k=8;function p2(n){if(!(this instanceof p2))return new p2(n);this.options=u.assign({level:x,method:k,chunkSize:16384,windowBits:15,memLevel:8,strategy:N,to:""},n||{});var a=this.options;a.raw&&0<a.windowBits?a.windowBits=-a.windowBits:a.gzip&&0<a.windowBits&&a.windowBits<16&&(a.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var o=i.deflateInit2(this.strm,a.level,a.method,a.windowBits,a.memLevel,a.strategy);if(o!==v)throw new Error(m[o]);if(a.header&&i.deflateSetHeader(this.strm,a.header),a.dictionary){var E;if(E="string"==typeof a.dictionary?d.string2buf(a.dictionary):"[object ArrayBuffer]"===y.call(a.dictionary)?new Uint8Array(a.dictionary):a.dictionary,(o=i.deflateSetDictionary(this.strm,E))!==v)throw new Error(m[o]);this._dict_set=!0}}function n32(n,a){var o=new p2(a);if(o.push(n,!0),o.err)throw o.msg||m[o.err];return o.result}p2.prototype.push=function(n,a){var o,m,g=this.strm,x=this.options.chunkSize;if(this.ended)return!1;m=a===~~a?a:!0===a?4:0,"string"==typeof n?g.input=d.string2buf(n):"[object ArrayBuffer]"===y.call(n)?g.input=new Uint8Array(n):g.input=n,g.next_in=0,g.avail_in=g.input.length;do{if(0===g.avail_out&&(g.output=new u.Buf8(x),g.next_out=0,g.avail_out=x),1!==(o=i.deflate(g,m))&&o!==v)return this.onEnd(o),!(this.ended=!0);0!==g.avail_out&&(0!==g.avail_in||4!==m&&2!==m)||("string"===this.options.to?this.onData(d.buf2binstring(u.shrinkBuf(g.output,g.next_out))):this.onData(u.shrinkBuf(g.output,g.next_out)))}while((0<g.avail_in||0===g.avail_out)&&1!==o);return 4===m?(o=i.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===v):2!==m||(this.onEnd(v),!(g.avail_out=0))},p2.prototype.onData=function(n){this.chunks.push(n)},p2.prototype.onEnd=function(n){n===v&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg},o.Deflate=p2,o.deflate=n32,o.deflateRaw=function(n,a){return(a=a||{}).raw=!0,n32(n,a)},o.gzip=function(n,a){return(a=a||{}).gzip=!0,n32(n,a)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,a,o){var i=n("./zlib/inflate"),u=n("./utils/common"),d=n("./utils/strings"),m=n("./zlib/constants"),g=n("./zlib/messages"),y=n("./zlib/zstream"),v=n("./zlib/gzheader"),x=Object.prototype.toString;function a22(n){if(!(this instanceof a22))return new a22(n);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},n||{});var a=this.options;a.raw&&0<=a.windowBits&&a.windowBits<16&&(a.windowBits=-a.windowBits,0===a.windowBits&&(a.windowBits=-15)),!(0<=a.windowBits&&a.windowBits<16)||n&&n.windowBits||(a.windowBits+=32),15<a.windowBits&&a.windowBits<48&&!(15&a.windowBits)&&(a.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var o=i.inflateInit2(this.strm,a.windowBits);if(o!==m.Z_OK)throw new Error(g[o]);this.header=new v,i.inflateGetHeader(this.strm,this.header)}function o3(n,a){var o=new a22(a);if(o.push(n,!0),o.err)throw o.msg||g[o.err];return o.result}a22.prototype.push=function(n,a){var o,g,y,v,N,k,E=this.strm,S=this.options.chunkSize,A=this.options.dictionary,_=!1;if(this.ended)return!1;g=a===~~a?a:!0===a?m.Z_FINISH:m.Z_NO_FLUSH,"string"==typeof n?E.input=d.binstring2buf(n):"[object ArrayBuffer]"===x.call(n)?E.input=new Uint8Array(n):E.input=n,E.next_in=0,E.avail_in=E.input.length;do{if(0===E.avail_out&&(E.output=new u.Buf8(S),E.next_out=0,E.avail_out=S),(o=i.inflate(E,m.Z_NO_FLUSH))===m.Z_NEED_DICT&&A&&(k="string"==typeof A?d.string2buf(A):"[object ArrayBuffer]"===x.call(A)?new Uint8Array(A):A,o=i.inflateSetDictionary(this.strm,k)),o===m.Z_BUF_ERROR&&!0===_&&(o=m.Z_OK,_=!1),o!==m.Z_STREAM_END&&o!==m.Z_OK)return this.onEnd(o),!(this.ended=!0);E.next_out&&(0!==E.avail_out&&o!==m.Z_STREAM_END&&(0!==E.avail_in||g!==m.Z_FINISH&&g!==m.Z_SYNC_FLUSH)||("string"===this.options.to?(y=d.utf8border(E.output,E.next_out),v=E.next_out-y,N=d.buf2string(E.output,y),E.next_out=v,E.avail_out=S-v,v&&u.arraySet(E.output,E.output,y,v,0),this.onData(N)):this.onData(u.shrinkBuf(E.output,E.next_out)))),0===E.avail_in&&0===E.avail_out&&(_=!0)}while((0<E.avail_in||0===E.avail_out)&&o!==m.Z_STREAM_END);return o===m.Z_STREAM_END&&(g=m.Z_FINISH),g===m.Z_FINISH?(o=i.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===m.Z_OK):g!==m.Z_SYNC_FLUSH||(this.onEnd(m.Z_OK),!(E.avail_out=0))},a22.prototype.onData=function(n){this.chunks.push(n)},a22.prototype.onEnd=function(n){n===m.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg},o.Inflate=a22,o.inflate=o3,o.inflateRaw=function(n,a){return(a=a||{}).raw=!0,o3(n,a)},o.ungzip=o3},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,a,o){var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;o.assign=function(n){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var o=a.shift();if(o){if("object"!=typeof o)throw new TypeError(o+"must be non-object");for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])}}return n},o.shrinkBuf=function(n,a){return n.length===a?n:n.subarray?n.subarray(0,a):(n.length=a,n)};var u={arraySet:function(n,a,o,i,u){if(a.subarray&&n.subarray)n.set(a.subarray(o,o+i),u);else for(var d=0;d<i;d++)n[u+d]=a[o+d]},flattenChunks:function(n){var a,o,i,u,d,m;for(a=i=0,o=n.length;a<o;a++)i+=n[a].length;for(m=new Uint8Array(i),a=u=0,o=n.length;a<o;a++)d=n[a],m.set(d,u),u+=d.length;return m}},d={arraySet:function(n,a,o,i,u){for(var d=0;d<i;d++)n[u+d]=a[o+d]},flattenChunks:function(n){return[].concat.apply([],n)}};o.setTyped=function(n){n?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,u)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,d))},o.setTyped(i)},{}],42:[function(n,a,o){var i=n("./common"),u=!0,d=!0;try{String.fromCharCode.apply(null,[0])}catch(y){u=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(y){d=!1}for(var m=new i.Buf8(256),g=0;g<256;g++)m[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;function l2(n,a){if(a<65537&&(n.subarray&&d||!n.subarray&&u))return String.fromCharCode.apply(null,i.shrinkBuf(n,a));for(var o="",m=0;m<a;m++)o+=String.fromCharCode(n[m]);return o}m[254]=m[254]=1,o.string2buf=function(n){var a,o,u,d,m,g=n.length,y=0;for(d=0;d<g;d++)55296==(64512&(o=n.charCodeAt(d)))&&d+1<g&&56320==(64512&(u=n.charCodeAt(d+1)))&&(o=65536+(o-55296<<10)+(u-56320),d++),y+=o<128?1:o<2048?2:o<65536?3:4;for(a=new i.Buf8(y),d=m=0;m<y;d++)55296==(64512&(o=n.charCodeAt(d)))&&d+1<g&&56320==(64512&(u=n.charCodeAt(d+1)))&&(o=65536+(o-55296<<10)+(u-56320),d++),o<128?a[m++]=o:(o<2048?a[m++]=192|o>>>6:(o<65536?a[m++]=224|o>>>12:(a[m++]=240|o>>>18,a[m++]=128|o>>>12&63),a[m++]=128|o>>>6&63),a[m++]=128|63&o);return a},o.buf2binstring=function(n){return l2(n,n.length)},o.binstring2buf=function(n){for(var a=new i.Buf8(n.length),o=0,u=a.length;o<u;o++)a[o]=n.charCodeAt(o);return a},o.buf2string=function(n,a){var o,i,u,d,g=a||n.length,y=new Array(2*g);for(o=i=0;o<g;)if((u=n[o++])<128)y[i++]=u;else if(4<(d=m[u]))y[i++]=65533,o+=d-1;else{for(u&=2===d?31:3===d?15:7;1<d&&o<g;)u=u<<6|63&n[o++],d--;1<d?y[i++]=65533:u<65536?y[i++]=u:(u-=65536,y[i++]=55296|u>>10&1023,y[i++]=56320|1023&u)}return l2(y,i)},o.utf8border=function(n,a){var o;for((a=a||n.length)>n.length&&(a=n.length),o=a-1;0<=o&&128==(192&n[o]);)o--;return o<0||0===o?a:o+m[n[o]]>a?o:a}},{"./common":41}],43:[function(n,a,o){a.exports=function(n,a,o,i){for(var u=65535&n,d=n>>>16&65535,m=0;0!==o;){for(o-=m=2e3<o?2e3:o;d=d+(u=u+a[i++]|0)|0,--m;);u%=65521,d%=65521}return u|d<<16}},{}],44:[function(n,a,o){a.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,a,o){var i=function(){for(var n,a=[],o=0;o<256;o++){n=o;for(var i=0;i<8;i++)n=1&n?3988292384^n>>>1:n>>>1;a[o]=n}return a}();a.exports=function(n,a,o,u){var d=i,m=u+o;n^=-1;for(var g=u;g<m;g++)n=n>>>8^d[255&(n^a[g])];return-1^n}},{}],46:[function(n,a,o){var i,u=n("../utils/common"),d=n("./trees"),m=n("./adler32"),g=n("./crc32"),y=n("./messages"),v=0,x=4,N=0,k=-2,E=-1,S=4,A=2,_=8,j=9,I=286,O=30,R=19,B=2*I+1,M=15,z=3,L=258,D=L+z+1,W=42,H=113,q=1,G=2,V=3,Z=4;function R22(n,a){return n.msg=y[a],a}function T2(n){return(n<<1)-(4<n?9:0)}function D2(n){for(var a=n.length;0<=--a;)n[a]=0}function F2(n){var a=n.state,o=a.pending;o>n.avail_out&&(o=n.avail_out),0!==o&&(u.arraySet(n.output,a.pending_buf,a.pending_out,o,n.next_out),n.next_out+=o,a.pending_out+=o,n.total_out+=o,n.avail_out-=o,a.pending-=o,0===a.pending&&(a.pending_out=0))}function N32(n,a){d._tr_flush_block(n,0<=n.block_start?n.block_start:-1,n.strstart-n.block_start,a),n.block_start=n.strstart,F2(n.strm)}function U2(n,a){n.pending_buf[n.pending++]=a}function P2(n,a){n.pending_buf[n.pending++]=a>>>8&255,n.pending_buf[n.pending++]=255&a}function L4(n,a){var o,i,u=n.max_chain_length,d=n.strstart,m=n.prev_length,g=n.nice_match,y=n.strstart>n.w_size-D?n.strstart-(n.w_size-D):0,v=n.window,x=n.w_mask,N=n.prev,k=n.strstart+L,E=v[d+m-1],S=v[d+m];n.prev_length>=n.good_match&&(u>>=2),g>n.lookahead&&(g=n.lookahead);do{if(v[(o=a)+m]===S&&v[o+m-1]===E&&v[o]===v[d]&&v[++o]===v[d+1]){d+=2,o++;do{}while(v[++d]===v[++o]&&v[++d]===v[++o]&&v[++d]===v[++o]&&v[++d]===v[++o]&&v[++d]===v[++o]&&v[++d]===v[++o]&&v[++d]===v[++o]&&v[++d]===v[++o]&&d<k);if(i=L-(k-d),d=k-L,m<i){if(n.match_start=a,g<=(m=i))break;E=v[d+m-1],S=v[d+m]}}}while((a=N[a&x])>y&&0!=--u);return m<=n.lookahead?m:n.lookahead}function j22(n){var a,o,i,d,y,v,x,N,k,E,S=n.w_size;do{if(d=n.window_size-n.lookahead-n.strstart,n.strstart>=S+(S-D)){for(u.arraySet(n.window,n.window,S,S,0),n.match_start-=S,n.strstart-=S,n.block_start-=S,a=o=n.hash_size;i=n.head[--a],n.head[a]=S<=i?i-S:0,--o;);for(a=o=S;i=n.prev[--a],n.prev[a]=S<=i?i-S:0,--o;);d+=S}if(0===n.strm.avail_in)break;if(v=n.strm,x=n.window,N=n.strstart+n.lookahead,k=d,E=void 0,E=v.avail_in,k<E&&(E=k),o=0===E?0:(v.avail_in-=E,u.arraySet(x,v.input,v.next_in,E,N),1===v.state.wrap?v.adler=m(v.adler,x,E,N):2===v.state.wrap&&(v.adler=g(v.adler,x,E,N)),v.next_in+=E,v.total_in+=E,E),n.lookahead+=o,n.lookahead+n.insert>=z)for(y=n.strstart-n.insert,n.ins_h=n.window[y],n.ins_h=(n.ins_h<<n.hash_shift^n.window[y+1])&n.hash_mask;n.insert&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[y+z-1])&n.hash_mask,n.prev[y&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=y,y++,n.insert--,!(n.lookahead+n.insert<z)););}while(n.lookahead<D&&0!==n.strm.avail_in)}function Z2(n,a){for(var o,i;;){if(n.lookahead<D){if(j22(n),n.lookahead<D&&a===v)return q;if(0===n.lookahead)break}if(o=0,n.lookahead>=z&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+z-1])&n.hash_mask,o=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),0!==o&&n.strstart-o<=n.w_size-D&&(n.match_length=L4(n,o)),n.match_length>=z)if(i=d._tr_tally(n,n.strstart-n.match_start,n.match_length-z),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=z){for(n.match_length--;n.strstart++,n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+z-1])&n.hash_mask,o=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart,0!=--n.match_length;);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+1])&n.hash_mask;else i=d._tr_tally(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(i&&(N32(n,!1),0===n.strm.avail_out))return q}return n.insert=n.strstart<z-1?n.strstart:z-1,a===x?(N32(n,!0),0===n.strm.avail_out?V:Z):n.last_lit&&(N32(n,!1),0===n.strm.avail_out)?q:G}function W2(n,a){for(var o,i,u;;){if(n.lookahead<D){if(j22(n),n.lookahead<D&&a===v)return q;if(0===n.lookahead)break}if(o=0,n.lookahead>=z&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+z-1])&n.hash_mask,o=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=z-1,0!==o&&n.prev_length<n.max_lazy_match&&n.strstart-o<=n.w_size-D&&(n.match_length=L4(n,o),n.match_length<=5&&(1===n.strategy||n.match_length===z&&4096<n.strstart-n.match_start)&&(n.match_length=z-1)),n.prev_length>=z&&n.match_length<=n.prev_length){for(u=n.strstart+n.lookahead-z,i=d._tr_tally(n,n.strstart-1-n.prev_match,n.prev_length-z),n.lookahead-=n.prev_length-1,n.prev_length-=2;++n.strstart<=u&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+z-1])&n.hash_mask,o=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),0!=--n.prev_length;);if(n.match_available=0,n.match_length=z-1,n.strstart++,i&&(N32(n,!1),0===n.strm.avail_out))return q}else if(n.match_available){if((i=d._tr_tally(n,0,n.window[n.strstart-1]))&&N32(n,!1),n.strstart++,n.lookahead--,0===n.strm.avail_out)return q}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(i=d._tr_tally(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<z-1?n.strstart:z-1,a===x?(N32(n,!0),0===n.strm.avail_out?V:Z):n.last_lit&&(N32(n,!1),0===n.strm.avail_out)?q:G}function M22(n,a,o,i,u){this.good_length=n,this.max_lazy=a,this.nice_length=o,this.max_chain=i,this.func=u}function H3(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new u.Buf16(2*B),this.dyn_dtree=new u.Buf16(2*(2*O+1)),this.bl_tree=new u.Buf16(2*(2*R+1)),D2(this.dyn_ltree),D2(this.dyn_dtree),D2(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new u.Buf16(M+1),this.heap=new u.Buf16(2*I+1),D2(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new u.Buf16(2*I+1),D2(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function G22(n){var a;return n&&n.state?(n.total_in=n.total_out=0,n.data_type=A,(a=n.state).pending=0,a.pending_out=0,a.wrap<0&&(a.wrap=-a.wrap),a.status=a.wrap?W:H,n.adler=2===a.wrap?0:1,a.last_flush=v,d._tr_init(a),N):R22(n,k)}function K2(n){var a=G22(n);return a===N&&function(n){n.window_size=2*n.w_size,D2(n.head),n.max_lazy_match=i[n.level].max_lazy,n.good_match=i[n.level].good_length,n.nice_match=i[n.level].nice_length,n.max_chain_length=i[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=z-1,n.match_available=0,n.ins_h=0}(n.state),a}function Y2(n,a,o,i,d,m){if(!n)return k;var g=1;if(a===E&&(a=6),i<0?(g=0,i=-i):15<i&&(g=2,i-=16),d<1||j<d||o!==_||i<8||15<i||a<0||9<a||m<0||S<m)return R22(n,k);8===i&&(i=9);var y=new H3;return(n.state=y).strm=n,y.wrap=g,y.gzhead=null,y.w_bits=i,y.w_size=1<<y.w_bits,y.w_mask=y.w_size-1,y.hash_bits=d+7,y.hash_size=1<<y.hash_bits,y.hash_mask=y.hash_size-1,y.hash_shift=~~((y.hash_bits+z-1)/z),y.window=new u.Buf8(2*y.w_size),y.head=new u.Buf16(y.hash_size),y.prev=new u.Buf16(y.w_size),y.lit_bufsize=1<<d+6,y.pending_buf_size=4*y.lit_bufsize,y.pending_buf=new u.Buf8(y.pending_buf_size),y.d_buf=1*y.lit_bufsize,y.l_buf=3*y.lit_bufsize,y.level=a,y.strategy=m,y.method=o,K2(n)}i=[new M22(0,0,0,0,function(n,a){var o=65535;for(o>n.pending_buf_size-5&&(o=n.pending_buf_size-5);;){if(n.lookahead<=1){if(j22(n),0===n.lookahead&&a===v)return q;if(0===n.lookahead)break}n.strstart+=n.lookahead,n.lookahead=0;var i=n.block_start+o;if((0===n.strstart||n.strstart>=i)&&(n.lookahead=n.strstart-i,n.strstart=i,N32(n,!1),0===n.strm.avail_out))return q;if(n.strstart-n.block_start>=n.w_size-D&&(N32(n,!1),0===n.strm.avail_out))return q}return n.insert=0,a===x?(N32(n,!0),0===n.strm.avail_out?V:Z):(n.strstart>n.block_start&&(N32(n,!1),n.strm.avail_out),q)}),new M22(4,4,8,4,Z2),new M22(4,5,16,8,Z2),new M22(4,6,32,32,Z2),new M22(4,4,16,16,W2),new M22(8,16,32,32,W2),new M22(8,16,128,128,W2),new M22(8,32,128,256,W2),new M22(32,128,258,1024,W2),new M22(32,258,258,4096,W2)],o.deflateInit=function(n,a){return Y2(n,a,_,15,8,0)},o.deflateInit2=Y2,o.deflateReset=K2,o.deflateResetKeep=G22,o.deflateSetHeader=function(n,a){return n&&n.state?2!==n.state.wrap?k:(n.state.gzhead=a,N):k},o.deflate=function(n,a){var o,u,m,y;if(!n||!n.state||5<a||a<0)return n?R22(n,k):k;if(u=n.state,!n.output||!n.input&&0!==n.avail_in||666===u.status&&a!==x)return R22(n,0===n.avail_out?-5:k);if(u.strm=n,o=u.last_flush,u.last_flush=a,u.status===W)if(2===u.wrap)n.adler=0,U2(u,31),U2(u,139),U2(u,8),u.gzhead?(U2(u,(u.gzhead.text?1:0)+(u.gzhead.hcrc?2:0)+(u.gzhead.extra?4:0)+(u.gzhead.name?8:0)+(u.gzhead.comment?16:0)),U2(u,255&u.gzhead.time),U2(u,u.gzhead.time>>8&255),U2(u,u.gzhead.time>>16&255),U2(u,u.gzhead.time>>24&255),U2(u,9===u.level?2:2<=u.strategy||u.level<2?4:0),U2(u,255&u.gzhead.os),u.gzhead.extra&&u.gzhead.extra.length&&(U2(u,255&u.gzhead.extra.length),U2(u,u.gzhead.extra.length>>8&255)),u.gzhead.hcrc&&(n.adler=g(n.adler,u.pending_buf,u.pending,0)),u.gzindex=0,u.status=69):(U2(u,0),U2(u,0),U2(u,0),U2(u,0),U2(u,0),U2(u,9===u.level?2:2<=u.strategy||u.level<2?4:0),U2(u,3),u.status=H);else{var E=_+(u.w_bits-8<<4)<<8;E|=(2<=u.strategy||u.level<2?0:u.level<6?1:6===u.level?2:3)<<6,0!==u.strstart&&(E|=32),E+=31-E%31,u.status=H,P2(u,E),0!==u.strstart&&(P2(u,n.adler>>>16),P2(u,65535&n.adler)),n.adler=1}if(69===u.status)if(u.gzhead.extra){for(m=u.pending;u.gzindex<(65535&u.gzhead.extra.length)&&(u.pending!==u.pending_buf_size||(u.gzhead.hcrc&&u.pending>m&&(n.adler=g(n.adler,u.pending_buf,u.pending-m,m)),F2(n),m=u.pending,u.pending!==u.pending_buf_size));)U2(u,255&u.gzhead.extra[u.gzindex]),u.gzindex++;u.gzhead.hcrc&&u.pending>m&&(n.adler=g(n.adler,u.pending_buf,u.pending-m,m)),u.gzindex===u.gzhead.extra.length&&(u.gzindex=0,u.status=73)}else u.status=73;if(73===u.status)if(u.gzhead.name){m=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>m&&(n.adler=g(n.adler,u.pending_buf,u.pending-m,m)),F2(n),m=u.pending,u.pending===u.pending_buf_size)){y=1;break}y=u.gzindex<u.gzhead.name.length?255&u.gzhead.name.charCodeAt(u.gzindex++):0,U2(u,y)}while(0!==y);u.gzhead.hcrc&&u.pending>m&&(n.adler=g(n.adler,u.pending_buf,u.pending-m,m)),0===y&&(u.gzindex=0,u.status=91)}else u.status=91;if(91===u.status)if(u.gzhead.comment){m=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>m&&(n.adler=g(n.adler,u.pending_buf,u.pending-m,m)),F2(n),m=u.pending,u.pending===u.pending_buf_size)){y=1;break}y=u.gzindex<u.gzhead.comment.length?255&u.gzhead.comment.charCodeAt(u.gzindex++):0,U2(u,y)}while(0!==y);u.gzhead.hcrc&&u.pending>m&&(n.adler=g(n.adler,u.pending_buf,u.pending-m,m)),0===y&&(u.status=103)}else u.status=103;if(103===u.status&&(u.gzhead.hcrc?(u.pending+2>u.pending_buf_size&&F2(n),u.pending+2<=u.pending_buf_size&&(U2(u,255&n.adler),U2(u,n.adler>>8&255),n.adler=0,u.status=H)):u.status=H),0!==u.pending){if(F2(n),0===n.avail_out)return u.last_flush=-1,N}else if(0===n.avail_in&&T2(a)<=T2(o)&&a!==x)return R22(n,-5);if(666===u.status&&0!==n.avail_in)return R22(n,-5);if(0!==n.avail_in||0!==u.lookahead||a!==v&&666!==u.status){var S=2===u.strategy?function(n,a){for(var o;;){if(0===n.lookahead&&(j22(n),0===n.lookahead)){if(a===v)return q;break}if(n.match_length=0,o=d._tr_tally(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,o&&(N32(n,!1),0===n.strm.avail_out))return q}return n.insert=0,a===x?(N32(n,!0),0===n.strm.avail_out?V:Z):n.last_lit&&(N32(n,!1),0===n.strm.avail_out)?q:G}(u,a):3===u.strategy?function(n,a){for(var o,i,u,m,g=n.window;;){if(n.lookahead<=L){if(j22(n),n.lookahead<=L&&a===v)return q;if(0===n.lookahead)break}if(n.match_length=0,n.lookahead>=z&&0<n.strstart&&(i=g[u=n.strstart-1])===g[++u]&&i===g[++u]&&i===g[++u]){m=n.strstart+L;do{}while(i===g[++u]&&i===g[++u]&&i===g[++u]&&i===g[++u]&&i===g[++u]&&i===g[++u]&&i===g[++u]&&i===g[++u]&&u<m);n.match_length=L-(m-u),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=z?(o=d._tr_tally(n,1,n.match_length-z),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(o=d._tr_tally(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),o&&(N32(n,!1),0===n.strm.avail_out))return q}return n.insert=0,a===x?(N32(n,!0),0===n.strm.avail_out?V:Z):n.last_lit&&(N32(n,!1),0===n.strm.avail_out)?q:G}(u,a):i[u.level].func(u,a);if(S!==V&&S!==Z||(u.status=666),S===q||S===V)return 0===n.avail_out&&(u.last_flush=-1),N;if(S===G&&(1===a?d._tr_align(u):5!==a&&(d._tr_stored_block(u,0,0,!1),3===a&&(D2(u.head),0===u.lookahead&&(u.strstart=0,u.block_start=0,u.insert=0))),F2(n),0===n.avail_out))return u.last_flush=-1,N}return a!==x?N:u.wrap<=0?1:(2===u.wrap?(U2(u,255&n.adler),U2(u,n.adler>>8&255),U2(u,n.adler>>16&255),U2(u,n.adler>>24&255),U2(u,255&n.total_in),U2(u,n.total_in>>8&255),U2(u,n.total_in>>16&255),U2(u,n.total_in>>24&255)):(P2(u,n.adler>>>16),P2(u,65535&n.adler)),F2(n),0<u.wrap&&(u.wrap=-u.wrap),0!==u.pending?N:1)},o.deflateEnd=function(n){var a;return n&&n.state?(a=n.state.status)!==W&&69!==a&&73!==a&&91!==a&&103!==a&&a!==H&&666!==a?R22(n,k):(n.state=null,a===H?R22(n,-3):N):k},o.deflateSetDictionary=function(n,a){var o,i,d,g,y,v,x,E,S=a.length;if(!n||!n.state)return k;if(2===(g=(o=n.state).wrap)||1===g&&o.status!==W||o.lookahead)return k;for(1===g&&(n.adler=m(n.adler,a,S,0)),o.wrap=0,S>=o.w_size&&(0===g&&(D2(o.head),o.strstart=0,o.block_start=0,o.insert=0),E=new u.Buf8(o.w_size),u.arraySet(E,a,S-o.w_size,o.w_size,0),a=E,S=o.w_size),y=n.avail_in,v=n.next_in,x=n.input,n.avail_in=S,n.next_in=0,n.input=a,j22(o);o.lookahead>=z;){for(i=o.strstart,d=o.lookahead-(z-1);o.ins_h=(o.ins_h<<o.hash_shift^o.window[i+z-1])&o.hash_mask,o.prev[i&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=i,i++,--d;);o.strstart=i,o.lookahead=z-1,j22(o)}return o.strstart+=o.lookahead,o.block_start=o.strstart,o.insert=o.lookahead,o.lookahead=0,o.match_length=o.prev_length=z-1,o.match_available=0,n.next_in=v,n.input=x,n.avail_in=y,o.wrap=g,N},o.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,a,o){a.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,a,o){a.exports=function(n,a){var o,i,u,d,m,g,y,v,x,N,k,E,S,A,_,j,I,O,R,B,M,z,L,D,W;o=n.state,i=n.next_in,D=n.input,u=i+(n.avail_in-5),d=n.next_out,W=n.output,m=d-(a-n.avail_out),g=d+(n.avail_out-257),y=o.dmax,v=o.wsize,x=o.whave,N=o.wnext,k=o.window,E=o.hold,S=o.bits,A=o.lencode,_=o.distcode,j=(1<<o.lenbits)-1,I=(1<<o.distbits)-1;e:do{S<15&&(E+=D[i++]<<S,S+=8,E+=D[i++]<<S,S+=8),O=A[E&j];t:for(;;){if(E>>>=R=O>>>24,S-=R,0==(R=O>>>16&255))W[d++]=65535&O;else{if(!(16&R)){if(!(64&R)){O=A[(65535&O)+(E&(1<<R)-1)];continue t}if(32&R){o.mode=12;break e}n.msg="invalid literal/length code",o.mode=30;break e}B=65535&O,(R&=15)&&(S<R&&(E+=D[i++]<<S,S+=8),B+=E&(1<<R)-1,E>>>=R,S-=R),S<15&&(E+=D[i++]<<S,S+=8,E+=D[i++]<<S,S+=8),O=_[E&I];n:for(;;){if(E>>>=R=O>>>24,S-=R,!(16&(R=O>>>16&255))){if(!(64&R)){O=_[(65535&O)+(E&(1<<R)-1)];continue n}n.msg="invalid distance code",o.mode=30;break e}if(M=65535&O,S<(R&=15)&&(E+=D[i++]<<S,(S+=8)<R&&(E+=D[i++]<<S,S+=8)),y<(M+=E&(1<<R)-1)){n.msg="invalid distance too far back",o.mode=30;break e}if(E>>>=R,S-=R,(R=d-m)<M){if(x<(R=M-R)&&o.sane){n.msg="invalid distance too far back",o.mode=30;break e}if(L=k,(z=0)===N){if(z+=v-R,R<B){for(B-=R;W[d++]=k[z++],--R;);z=d-M,L=W}}else if(N<R){if(z+=v+N-R,(R-=N)<B){for(B-=R;W[d++]=k[z++],--R;);if(z=0,N<B){for(B-=R=N;W[d++]=k[z++],--R;);z=d-M,L=W}}}else if(z+=N-R,R<B){for(B-=R;W[d++]=k[z++],--R;);z=d-M,L=W}for(;2<B;)W[d++]=L[z++],W[d++]=L[z++],W[d++]=L[z++],B-=3;B&&(W[d++]=L[z++],1<B&&(W[d++]=L[z++]))}else{for(z=d-M;W[d++]=W[z++],W[d++]=W[z++],W[d++]=W[z++],2<(B-=3););B&&(W[d++]=W[z++],1<B&&(W[d++]=W[z++]))}break}}break}}while(i<u&&d<g);i-=B=S>>3,E&=(1<<(S-=B<<3))-1,n.next_in=i,n.next_out=d,n.avail_in=i<u?u-i+5:5-(i-u),n.avail_out=d<g?g-d+257:257-(d-g),o.hold=E,o.bits=S}},{}],49:[function(n,a,o){var i=n("../utils/common"),u=n("./adler32"),d=n("./crc32"),m=n("./inffast"),g=n("./inftrees"),y=1,v=2,x=0,N=-2,k=1,E=852,S=592;function L4(n){return(n>>>24&255)+(n>>>8&65280)+((65280&n)<<8)+((255&n)<<24)}function s2(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a22(n){var a;return n&&n.state?(a=n.state,n.total_in=n.total_out=a.total=0,n.msg="",a.wrap&&(n.adler=1&a.wrap),a.mode=k,a.last=0,a.havedict=0,a.dmax=32768,a.head=null,a.hold=0,a.bits=0,a.lencode=a.lendyn=new i.Buf32(E),a.distcode=a.distdyn=new i.Buf32(S),a.sane=1,a.back=-1,x):N}function o3(n){var a;return n&&n.state?((a=n.state).wsize=0,a.whave=0,a.wnext=0,a22(n)):N}function h2(n,a){var o,i;return n&&n.state?(i=n.state,a<0?(o=0,a=-a):(o=1+(a>>4),a<48&&(a&=15)),a&&(a<8||15<a)?N:(null!==i.window&&i.wbits!==a&&(i.window=null),i.wrap=o,i.wbits=a,o3(n))):N}function u22(n,a){var o,i;return n?(i=new s2,(n.state=i).window=null,(o=h2(n,a))!==x&&(n.state=null),o):N}var A,_,j=!0;function j22(n){if(j){var a;for(A=new i.Buf32(512),_=new i.Buf32(32),a=0;a<144;)n.lens[a++]=8;for(;a<256;)n.lens[a++]=9;for(;a<280;)n.lens[a++]=7;for(;a<288;)n.lens[a++]=8;for(g(y,n.lens,0,288,A,0,n.work,{bits:9}),a=0;a<32;)n.lens[a++]=5;g(v,n.lens,0,32,_,0,n.work,{bits:5}),j=!1}n.lencode=A,n.lenbits=9,n.distcode=_,n.distbits=5}function Z2(n,a,o,u){var d,m=n.state;return null===m.window&&(m.wsize=1<<m.wbits,m.wnext=0,m.whave=0,m.window=new i.Buf8(m.wsize)),u>=m.wsize?(i.arraySet(m.window,a,o-m.wsize,m.wsize,0),m.wnext=0,m.whave=m.wsize):(u<(d=m.wsize-m.wnext)&&(d=u),i.arraySet(m.window,a,o-u,d,m.wnext),(u-=d)?(i.arraySet(m.window,a,o-u,u,0),m.wnext=u,m.whave=m.wsize):(m.wnext+=d,m.wnext===m.wsize&&(m.wnext=0),m.whave<m.wsize&&(m.whave+=d))),0}o.inflateReset=o3,o.inflateReset2=h2,o.inflateResetKeep=a22,o.inflateInit=function(n){return u22(n,15)},o.inflateInit2=u22,o.inflate=function(n,a){var o,E,S,A,_,j,I,O,R,B,M,z,L,D,W,H,q,G,V,Z,Y,J,X,ee,te=0,ne=new i.Buf8(4),re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!n||!n.state||!n.output||!n.input&&0!==n.avail_in)return N;12===(o=n.state).mode&&(o.mode=13),_=n.next_out,S=n.output,I=n.avail_out,A=n.next_in,E=n.input,j=n.avail_in,O=o.hold,R=o.bits,B=j,M=I,J=x;e:for(;;)switch(o.mode){case k:if(0===o.wrap){o.mode=13;break}for(;R<16;){if(0===j)break e;j--,O+=E[A++]<<R,R+=8}if(2&o.wrap&&35615===O){ne[o.check=0]=255&O,ne[1]=O>>>8&255,o.check=d(o.check,ne,2,0),R=O=0,o.mode=2;break}if(o.flags=0,o.head&&(o.head.done=!1),!(1&o.wrap)||(((255&O)<<8)+(O>>8))%31){n.msg="incorrect header check",o.mode=30;break}if(8!=(15&O)){n.msg="unknown compression method",o.mode=30;break}if(R-=4,Y=8+(15&(O>>>=4)),0===o.wbits)o.wbits=Y;else if(Y>o.wbits){n.msg="invalid window size",o.mode=30;break}o.dmax=1<<Y,n.adler=o.check=1,o.mode=512&O?10:12,R=O=0;break;case 2:for(;R<16;){if(0===j)break e;j--,O+=E[A++]<<R,R+=8}if(o.flags=O,8!=(255&o.flags)){n.msg="unknown compression method",o.mode=30;break}if(57344&o.flags){n.msg="unknown header flags set",o.mode=30;break}o.head&&(o.head.text=O>>8&1),512&o.flags&&(ne[0]=255&O,ne[1]=O>>>8&255,o.check=d(o.check,ne,2,0)),R=O=0,o.mode=3;case 3:for(;R<32;){if(0===j)break e;j--,O+=E[A++]<<R,R+=8}o.head&&(o.head.time=O),512&o.flags&&(ne[0]=255&O,ne[1]=O>>>8&255,ne[2]=O>>>16&255,ne[3]=O>>>24&255,o.check=d(o.check,ne,4,0)),R=O=0,o.mode=4;case 4:for(;R<16;){if(0===j)break e;j--,O+=E[A++]<<R,R+=8}o.head&&(o.head.xflags=255&O,o.head.os=O>>8),512&o.flags&&(ne[0]=255&O,ne[1]=O>>>8&255,o.check=d(o.check,ne,2,0)),R=O=0,o.mode=5;case 5:if(1024&o.flags){for(;R<16;){if(0===j)break e;j--,O+=E[A++]<<R,R+=8}o.length=O,o.head&&(o.head.extra_len=O),512&o.flags&&(ne[0]=255&O,ne[1]=O>>>8&255,o.check=d(o.check,ne,2,0)),R=O=0}else o.head&&(o.head.extra=null);o.mode=6;case 6:if(1024&o.flags&&(j<(z=o.length)&&(z=j),z&&(o.head&&(Y=o.head.extra_len-o.length,o.head.extra||(o.head.extra=new Array(o.head.extra_len)),i.arraySet(o.head.extra,E,A,z,Y)),512&o.flags&&(o.check=d(o.check,E,z,A)),j-=z,A+=z,o.length-=z),o.length))break e;o.length=0,o.mode=7;case 7:if(2048&o.flags){if(0===j)break e;for(z=0;Y=E[A+z++],o.head&&Y&&o.length<65536&&(o.head.name+=String.fromCharCode(Y)),Y&&z<j;);if(512&o.flags&&(o.check=d(o.check,E,z,A)),j-=z,A+=z,Y)break e}else o.head&&(o.head.name=null);o.length=0,o.mode=8;case 8:if(4096&o.flags){if(0===j)break e;for(z=0;Y=E[A+z++],o.head&&Y&&o.length<65536&&(o.head.comment+=String.fromCharCode(Y)),Y&&z<j;);if(512&o.flags&&(o.check=d(o.check,E,z,A)),j-=z,A+=z,Y)break e}else o.head&&(o.head.comment=null);o.mode=9;case 9:if(512&o.flags){for(;R<16;){if(0===j)break e;j--,O+=E[A++]<<R,R+=8}if(O!==(65535&o.check)){n.msg="header crc mismatch",o.mode=30;break}R=O=0}o.head&&(o.head.hcrc=o.flags>>9&1,o.head.done=!0),n.adler=o.check=0,o.mode=12;break;case 10:for(;R<32;){if(0===j)break e;j--,O+=E[A++]<<R,R+=8}n.adler=o.check=L4(O),R=O=0,o.mode=11;case 11:if(0===o.havedict)return n.next_out=_,n.avail_out=I,n.next_in=A,n.avail_in=j,o.hold=O,o.bits=R,2;n.adler=o.check=1,o.mode=12;case 12:if(5===a||6===a)break e;case 13:if(o.last){O>>>=7&R,R-=7&R,o.mode=27;break}for(;R<3;){if(0===j)break e;j--,O+=E[A++]<<R,R+=8}switch(o.last=1&O,R-=1,3&(O>>>=1)){case 0:o.mode=14;break;case 1:if(j22(o),o.mode=20,6!==a)break;O>>>=2,R-=2;break e;case 2:o.mode=17;break;case 3:n.msg="invalid block type",o.mode=30}O>>>=2,R-=2;break;case 14:for(O>>>=7&R,R-=7&R;R<32;){if(0===j)break e;j--,O+=E[A++]<<R,R+=8}if((65535&O)!=(O>>>16^65535)){n.msg="invalid stored block lengths",o.mode=30;break}if(o.length=65535&O,R=O=0,o.mode=15,6===a)break e;case 15:o.mode=16;case 16:if(z=o.length){if(j<z&&(z=j),I<z&&(z=I),0===z)break e;i.arraySet(S,E,A,z,_),j-=z,A+=z,I-=z,_+=z,o.length-=z;break}o.mode=12;break;case 17:for(;R<14;){if(0===j)break e;j--,O+=E[A++]<<R,R+=8}if(o.nlen=257+(31&O),O>>>=5,R-=5,o.ndist=1+(31&O),O>>>=5,R-=5,o.ncode=4+(15&O),O>>>=4,R-=4,286<o.nlen||30<o.ndist){n.msg="too many length or distance symbols",o.mode=30;break}o.have=0,o.mode=18;case 18:for(;o.have<o.ncode;){for(;R<3;){if(0===j)break e;j--,O+=E[A++]<<R,R+=8}o.lens[re[o.have++]]=7&O,O>>>=3,R-=3}for(;o.have<19;)o.lens[re[o.have++]]=0;if(o.lencode=o.lendyn,o.lenbits=7,X={bits:o.lenbits},J=g(0,o.lens,0,19,o.lencode,0,o.work,X),o.lenbits=X.bits,J){n.msg="invalid code lengths set",o.mode=30;break}o.have=0,o.mode=19;case 19:for(;o.have<o.nlen+o.ndist;){for(;H=(te=o.lencode[O&(1<<o.lenbits)-1])>>>16&255,q=65535&te,!((W=te>>>24)<=R);){if(0===j)break e;j--,O+=E[A++]<<R,R+=8}if(q<16)O>>>=W,R-=W,o.lens[o.have++]=q;else{if(16===q){for(ee=W+2;R<ee;){if(0===j)break e;j--,O+=E[A++]<<R,R+=8}if(O>>>=W,R-=W,0===o.have){n.msg="invalid bit length repeat",o.mode=30;break}Y=o.lens[o.have-1],z=3+(3&O),O>>>=2,R-=2}else if(17===q){for(ee=W+3;R<ee;){if(0===j)break e;j--,O+=E[A++]<<R,R+=8}R-=W,Y=0,z=3+(7&(O>>>=W)),O>>>=3,R-=3}else{for(ee=W+7;R<ee;){if(0===j)break e;j--,O+=E[A++]<<R,R+=8}R-=W,Y=0,z=11+(127&(O>>>=W)),O>>>=7,R-=7}if(o.have+z>o.nlen+o.ndist){n.msg="invalid bit length repeat",o.mode=30;break}for(;z--;)o.lens[o.have++]=Y}}if(30===o.mode)break;if(0===o.lens[256]){n.msg="invalid code -- missing end-of-block",o.mode=30;break}if(o.lenbits=9,X={bits:o.lenbits},J=g(y,o.lens,0,o.nlen,o.lencode,0,o.work,X),o.lenbits=X.bits,J){n.msg="invalid literal/lengths set",o.mode=30;break}if(o.distbits=6,o.distcode=o.distdyn,X={bits:o.distbits},J=g(v,o.lens,o.nlen,o.ndist,o.distcode,0,o.work,X),o.distbits=X.bits,J){n.msg="invalid distances set",o.mode=30;break}if(o.mode=20,6===a)break e;case 20:o.mode=21;case 21:if(6<=j&&258<=I){n.next_out=_,n.avail_out=I,n.next_in=A,n.avail_in=j,o.hold=O,o.bits=R,m(n,M),_=n.next_out,S=n.output,I=n.avail_out,A=n.next_in,E=n.input,j=n.avail_in,O=o.hold,R=o.bits,12===o.mode&&(o.back=-1);break}for(o.back=0;H=(te=o.lencode[O&(1<<o.lenbits)-1])>>>16&255,q=65535&te,!((W=te>>>24)<=R);){if(0===j)break e;j--,O+=E[A++]<<R,R+=8}if(H&&!(240&H)){for(G=W,V=H,Z=q;H=(te=o.lencode[Z+((O&(1<<G+V)-1)>>G)])>>>16&255,q=65535&te,!(G+(W=te>>>24)<=R);){if(0===j)break e;j--,O+=E[A++]<<R,R+=8}O>>>=G,R-=G,o.back+=G}if(O>>>=W,R-=W,o.back+=W,o.length=q,0===H){o.mode=26;break}if(32&H){o.back=-1,o.mode=12;break}if(64&H){n.msg="invalid literal/length code",o.mode=30;break}o.extra=15&H,o.mode=22;case 22:if(o.extra){for(ee=o.extra;R<ee;){if(0===j)break e;j--,O+=E[A++]<<R,R+=8}o.length+=O&(1<<o.extra)-1,O>>>=o.extra,R-=o.extra,o.back+=o.extra}o.was=o.length,o.mode=23;case 23:for(;H=(te=o.distcode[O&(1<<o.distbits)-1])>>>16&255,q=65535&te,!((W=te>>>24)<=R);){if(0===j)break e;j--,O+=E[A++]<<R,R+=8}if(!(240&H)){for(G=W,V=H,Z=q;H=(te=o.distcode[Z+((O&(1<<G+V)-1)>>G)])>>>16&255,q=65535&te,!(G+(W=te>>>24)<=R);){if(0===j)break e;j--,O+=E[A++]<<R,R+=8}O>>>=G,R-=G,o.back+=G}if(O>>>=W,R-=W,o.back+=W,64&H){n.msg="invalid distance code",o.mode=30;break}o.offset=q,o.extra=15&H,o.mode=24;case 24:if(o.extra){for(ee=o.extra;R<ee;){if(0===j)break e;j--,O+=E[A++]<<R,R+=8}o.offset+=O&(1<<o.extra)-1,O>>>=o.extra,R-=o.extra,o.back+=o.extra}if(o.offset>o.dmax){n.msg="invalid distance too far back",o.mode=30;break}o.mode=25;case 25:if(0===I)break e;if(z=M-I,o.offset>z){if((z=o.offset-z)>o.whave&&o.sane){n.msg="invalid distance too far back",o.mode=30;break}L=z>o.wnext?(z-=o.wnext,o.wsize-z):o.wnext-z,z>o.length&&(z=o.length),D=o.window}else D=S,L=_-o.offset,z=o.length;for(I<z&&(z=I),I-=z,o.length-=z;S[_++]=D[L++],--z;);0===o.length&&(o.mode=21);break;case 26:if(0===I)break e;S[_++]=o.length,I--,o.mode=21;break;case 27:if(o.wrap){for(;R<32;){if(0===j)break e;j--,O|=E[A++]<<R,R+=8}if(M-=I,n.total_out+=M,o.total+=M,M&&(n.adler=o.check=o.flags?d(o.check,S,M,_-M):u(o.check,S,M,_-M)),M=I,(o.flags?O:L4(O))!==o.check){n.msg="incorrect data check",o.mode=30;break}R=O=0}o.mode=28;case 28:if(o.wrap&&o.flags){for(;R<32;){if(0===j)break e;j--,O+=E[A++]<<R,R+=8}if(O!==(4294967295&o.total)){n.msg="incorrect length check",o.mode=30;break}R=O=0}o.mode=29;case 29:J=1;break e;case 30:J=-3;break e;case 31:return-4;default:return N}return n.next_out=_,n.avail_out=I,n.next_in=A,n.avail_in=j,o.hold=O,o.bits=R,(o.wsize||M!==n.avail_out&&o.mode<30&&(o.mode<27||4!==a))&&Z2(n,n.output,n.next_out,M-n.avail_out)?(o.mode=31,-4):(B-=n.avail_in,M-=n.avail_out,n.total_in+=B,n.total_out+=M,o.total+=M,o.wrap&&M&&(n.adler=o.check=o.flags?d(o.check,S,M,n.next_out-M):u(o.check,S,M,n.next_out-M)),n.data_type=o.bits+(o.last?64:0)+(12===o.mode?128:0)+(20===o.mode||15===o.mode?256:0),(0==B&&0===M||4===a)&&J===x&&(J=-5),J)},o.inflateEnd=function(n){if(!n||!n.state)return N;var a=n.state;return a.window&&(a.window=null),n.state=null,x},o.inflateGetHeader=function(n,a){var o;return n&&n.state&&2&(o=n.state).wrap?((o.head=a).done=!1,x):N},o.inflateSetDictionary=function(n,a){var o,i=a.length;return n&&n.state?0!==(o=n.state).wrap&&11!==o.mode?N:11===o.mode&&u(1,a,i,0)!==o.check?-3:Z2(n,a,i,i)?(o.mode=31,-4):(o.havedict=1,x):N},o.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,a,o){var i=n("../utils/common"),u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],g=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];a.exports=function(n,a,o,y,v,x,N,k){var E,S,A,_,j,I,O,R,B,M=k.bits,z=0,L=0,D=0,W=0,H=0,q=0,G=0,V=0,Z=0,Y=0,J=null,X=0,ee=new i.Buf16(16),te=new i.Buf16(16),ne=null,re=0;for(z=0;z<=15;z++)ee[z]=0;for(L=0;L<y;L++)ee[a[o+L]]++;for(H=M,W=15;1<=W&&0===ee[W];W--);if(W<H&&(H=W),0===W)return v[x++]=20971520,v[x++]=20971520,k.bits=1,0;for(D=1;D<W&&0===ee[D];D++);for(H<D&&(H=D),z=V=1;z<=15;z++)if(V<<=1,(V-=ee[z])<0)return-1;if(0<V&&(0===n||1!==W))return-1;for(te[1]=0,z=1;z<15;z++)te[z+1]=te[z]+ee[z];for(L=0;L<y;L++)0!==a[o+L]&&(N[te[a[o+L]]++]=L);if(I=0===n?(J=ne=N,19):1===n?(J=u,X-=257,ne=d,re-=257,256):(J=m,ne=g,-1),z=D,j=x,G=L=Y=0,A=-1,_=(Z=1<<(q=H))-1,1===n&&852<Z||2===n&&592<Z)return 1;for(;;){for(O=z-G,B=N[L]<I?(R=0,N[L]):N[L]>I?(R=ne[re+N[L]],J[X+N[L]]):(R=96,0),E=1<<z-G,D=S=1<<q;v[j+(Y>>G)+(S-=E)]=O<<24|R<<16|B,0!==S;);for(E=1<<z-1;Y&E;)E>>=1;if(0!==E?(Y&=E-1,Y+=E):Y=0,L++,0==--ee[z]){if(z===W)break;z=a[o+N[L]]}if(H<z&&(Y&_)!==A){for(0===G&&(G=H),j+=D,V=1<<(q=z-G);q+G<W&&!((V-=ee[q+G])<=0);)q++,V<<=1;if(Z+=1<<q,1===n&&852<Z||2===n&&592<Z)return 1;v[A=Y&_]=H<<24|q<<16|j-x}}return 0!==Y&&(v[j+Y]=z-G<<24|64<<16),k.bits=H,0}},{"../utils/common":41}],51:[function(n,a,o){a.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,a,o){var i=n("../utils/common"),u=0,d=1;function n32(n){for(var a=n.length;0<=--a;)n[a]=0}var m=0,g=29,y=256,v=y+1+g,x=30,N=19,k=2*v+1,E=15,S=16,A=7,_=256,j=16,I=17,O=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],B=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],L=new Array(2*(v+2));n32(L);var D=new Array(2*x);n32(D);var W=new Array(512);n32(W);var H=new Array(256);n32(H);var q=new Array(g);n32(q);var G,V,Z,Y=new Array(x);function D2(n,a,o,i,u){this.static_tree=n,this.extra_bits=a,this.extra_base=o,this.elems=i,this.max_length=u,this.has_stree=n&&n.length}function F2(n,a){this.dyn_tree=n,this.max_code=0,this.stat_desc=a}function N32(n){return n<256?W[n]:W[256+(n>>>7)]}function U2(n,a){n.pending_buf[n.pending++]=255&a,n.pending_buf[n.pending++]=a>>>8&255}function P2(n,a,o){n.bi_valid>S-o?(n.bi_buf|=a<<n.bi_valid&65535,U2(n,n.bi_buf),n.bi_buf=a>>S-n.bi_valid,n.bi_valid+=o-S):(n.bi_buf|=a<<n.bi_valid&65535,n.bi_valid+=o)}function L4(n,a,o){P2(n,o[2*a],o[2*a+1])}function j22(n,a){for(var o=0;o|=1&n,n>>>=1,o<<=1,0<--a;);return o>>>1}function Z2(n,a,o){var i,u,d=new Array(E+1),m=0;for(i=1;i<=E;i++)d[i]=m=m+o[i-1]<<1;for(u=0;u<=a;u++){var g=n[2*u+1];0!==g&&(n[2*u]=j22(d[g]++,g))}}function W2(n){var a;for(a=0;a<v;a++)n.dyn_ltree[2*a]=0;for(a=0;a<x;a++)n.dyn_dtree[2*a]=0;for(a=0;a<N;a++)n.bl_tree[2*a]=0;n.dyn_ltree[2*_]=1,n.opt_len=n.static_len=0,n.last_lit=n.matches=0}function M22(n){8<n.bi_valid?U2(n,n.bi_buf):0<n.bi_valid&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0}function H3(n,a,o,i){var u=2*a,d=2*o;return n[u]<n[d]||n[u]===n[d]&&i[a]<=i[o]}function G22(n,a,o){for(var i=n.heap[o],u=o<<1;u<=n.heap_len&&(u<n.heap_len&&H3(a,n.heap[u+1],n.heap[u],n.depth)&&u++,!H3(a,i,n.heap[u],n.depth));)n.heap[o]=n.heap[u],o=u,u<<=1;n.heap[o]=i}function K2(n,a,o){var i,u,d,m,g=0;if(0!==n.last_lit)for(;i=n.pending_buf[n.d_buf+2*g]<<8|n.pending_buf[n.d_buf+2*g+1],u=n.pending_buf[n.l_buf+g],g++,0===i?L4(n,u,a):(L4(n,(d=H[u])+y+1,a),0!==(m=R[d])&&P2(n,u-=q[d],m),L4(n,d=N32(--i),o),0!==(m=B[d])&&P2(n,i-=Y[d],m)),g<n.last_lit;);L4(n,_,a)}function Y2(n,a){var o,i,u,d=a.dyn_tree,m=a.stat_desc.static_tree,g=a.stat_desc.has_stree,y=a.stat_desc.elems,v=-1;for(n.heap_len=0,n.heap_max=k,o=0;o<y;o++)0!==d[2*o]?(n.heap[++n.heap_len]=v=o,n.depth[o]=0):d[2*o+1]=0;for(;n.heap_len<2;)d[2*(u=n.heap[++n.heap_len]=v<2?++v:0)]=1,n.depth[u]=0,n.opt_len--,g&&(n.static_len-=m[2*u+1]);for(a.max_code=v,o=n.heap_len>>1;1<=o;o--)G22(n,d,o);for(u=y;o=n.heap[1],n.heap[1]=n.heap[n.heap_len--],G22(n,d,1),i=n.heap[1],n.heap[--n.heap_max]=o,n.heap[--n.heap_max]=i,d[2*u]=d[2*o]+d[2*i],n.depth[u]=(n.depth[o]>=n.depth[i]?n.depth[o]:n.depth[i])+1,d[2*o+1]=d[2*i+1]=u,n.heap[1]=u++,G22(n,d,1),2<=n.heap_len;);n.heap[--n.heap_max]=n.heap[1],function(n,a){var o,i,u,d,m,g,y=a.dyn_tree,v=a.max_code,x=a.stat_desc.static_tree,N=a.stat_desc.has_stree,S=a.stat_desc.extra_bits,A=a.stat_desc.extra_base,_=a.stat_desc.max_length,j=0;for(d=0;d<=E;d++)n.bl_count[d]=0;for(y[2*n.heap[n.heap_max]+1]=0,o=n.heap_max+1;o<k;o++)_<(d=y[2*y[2*(i=n.heap[o])+1]+1]+1)&&(d=_,j++),y[2*i+1]=d,v<i||(n.bl_count[d]++,m=0,A<=i&&(m=S[i-A]),g=y[2*i],n.opt_len+=g*(d+m),N&&(n.static_len+=g*(x[2*i+1]+m)));if(0!==j){do{for(d=_-1;0===n.bl_count[d];)d--;n.bl_count[d]--,n.bl_count[d+1]+=2,n.bl_count[_]--,j-=2}while(0<j);for(d=_;0!==d;d--)for(i=n.bl_count[d];0!==i;)v<(u=n.heap[--o])||(y[2*u+1]!==d&&(n.opt_len+=(d-y[2*u+1])*y[2*u],y[2*u+1]=d),i--)}}(n,a),Z2(d,v,n.bl_count)}function X22(n,a,o){var i,u,d=-1,m=a[1],g=0,y=7,v=4;for(0===m&&(y=138,v=3),a[2*(o+1)+1]=65535,i=0;i<=o;i++)u=m,m=a[2*(i+1)+1],++g<y&&u===m||(g<v?n.bl_tree[2*u]+=g:0!==u?(u!==d&&n.bl_tree[2*u]++,n.bl_tree[2*j]++):g<=10?n.bl_tree[2*I]++:n.bl_tree[2*O]++,d=u,v=(g=0)===m?(y=138,3):u===m?(y=6,3):(y=7,4))}function V22(n,a,o){var i,u,d=-1,m=a[1],g=0,y=7,v=4;for(0===m&&(y=138,v=3),i=0;i<=o;i++)if(u=m,m=a[2*(i+1)+1],!(++g<y&&u===m)){if(g<v)for(;L4(n,u,n.bl_tree),0!=--g;);else 0!==u?(u!==d&&(L4(n,u,n.bl_tree),g--),L4(n,j,n.bl_tree),P2(n,g-3,2)):g<=10?(L4(n,I,n.bl_tree),P2(n,g-3,3)):(L4(n,O,n.bl_tree),P2(n,g-11,7));d=u,v=(g=0)===m?(y=138,3):u===m?(y=6,3):(y=7,4)}}n32(Y);var J=!1;function J2(n,a,o,u){P2(n,(m<<1)+(u?1:0),3),function(n,a,o){M22(n),U2(n,o),U2(n,~o),i.arraySet(n.pending_buf,n.window,a,o,n.pending),n.pending+=o}(n,a,o)}o._tr_init=function(n){J||(function(){var n,a,o,i,u,d=new Array(E+1);for(i=o=0;i<g-1;i++)for(q[i]=o,n=0;n<1<<R[i];n++)H[o++]=i;for(H[o-1]=i,i=u=0;i<16;i++)for(Y[i]=u,n=0;n<1<<B[i];n++)W[u++]=i;for(u>>=7;i<x;i++)for(Y[i]=u<<7,n=0;n<1<<B[i]-7;n++)W[256+u++]=i;for(a=0;a<=E;a++)d[a]=0;for(n=0;n<=143;)L[2*n+1]=8,n++,d[8]++;for(;n<=255;)L[2*n+1]=9,n++,d[9]++;for(;n<=279;)L[2*n+1]=7,n++,d[7]++;for(;n<=287;)L[2*n+1]=8,n++,d[8]++;for(Z2(L,v+1,d),n=0;n<x;n++)D[2*n+1]=5,D[2*n]=j22(n,5);G=new D2(L,R,y+1,v,E),V=new D2(D,B,0,x,E),Z=new D2(new Array(0),M,0,N,A)}(),J=!0),n.l_desc=new F2(n.dyn_ltree,G),n.d_desc=new F2(n.dyn_dtree,V),n.bl_desc=new F2(n.bl_tree,Z),n.bi_buf=0,n.bi_valid=0,W2(n)},o._tr_stored_block=J2,o._tr_flush_block=function(n,a,o,i){var m,g,v=0;0<n.level?(2===n.strm.data_type&&(n.strm.data_type=function(n){var a,o=4093624447;for(a=0;a<=31;a++,o>>>=1)if(1&o&&0!==n.dyn_ltree[2*a])return u;if(0!==n.dyn_ltree[18]||0!==n.dyn_ltree[20]||0!==n.dyn_ltree[26])return d;for(a=32;a<y;a++)if(0!==n.dyn_ltree[2*a])return d;return u}(n)),Y2(n,n.l_desc),Y2(n,n.d_desc),v=function(n){var a;for(X22(n,n.dyn_ltree,n.l_desc.max_code),X22(n,n.dyn_dtree,n.d_desc.max_code),Y2(n,n.bl_desc),a=N-1;3<=a&&0===n.bl_tree[2*z[a]+1];a--);return n.opt_len+=3*(a+1)+5+5+4,a}(n),m=n.opt_len+3+7>>>3,(g=n.static_len+3+7>>>3)<=m&&(m=g)):m=g=o+5,o+4<=m&&-1!==a?J2(n,a,o,i):4===n.strategy||g===m?(P2(n,2+(i?1:0),3),K2(n,L,D)):(P2(n,4+(i?1:0),3),function(n,a,o,i){var u;for(P2(n,a-257,5),P2(n,o-1,5),P2(n,i-4,4),u=0;u<i;u++)P2(n,n.bl_tree[2*z[u]+1],3);V22(n,n.dyn_ltree,a-1),V22(n,n.dyn_dtree,o-1)}(n,n.l_desc.max_code+1,n.d_desc.max_code+1,v+1),K2(n,n.dyn_ltree,n.dyn_dtree)),W2(n),i&&M22(n)},o._tr_tally=function(n,a,o){return n.pending_buf[n.d_buf+2*n.last_lit]=a>>>8&255,n.pending_buf[n.d_buf+2*n.last_lit+1]=255&a,n.pending_buf[n.l_buf+n.last_lit]=255&o,n.last_lit++,0===a?n.dyn_ltree[2*o]++:(n.matches++,a--,n.dyn_ltree[2*(H[o]+y+1)]++,n.dyn_dtree[2*N32(a)]++),n.last_lit===n.lit_bufsize-1},o._tr_align=function(n){P2(n,2,3),L4(n,_,L),function(n){16===n.bi_valid?(U2(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):8<=n.bi_valid&&(n.pending_buf[n.pending++]=255&n.bi_buf,n.bi_buf>>=8,n.bi_valid-=8)}(n)}},{"../utils/common":41}],53:[function(n,a,o){a.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,a,o){(function(n){!function(n,a){if(!n.setImmediate){var o,i,u,d,m=1,g={},y=!1,v=n.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(n);x=x&&x.setTimeout?x:n,o="[object process]"==={}.toString.call(n.process)?function(n){process.nextTick(function(){c2(n)})}:function(){if(n.postMessage&&!n.importScripts){var a=!0,o=n.onmessage;return n.onmessage=function(){a=!1},n.postMessage("","*"),n.onmessage=o,a}}()?(d="setImmediate$"+Math.random()+"$",n.addEventListener?n.addEventListener("message",d32,!1):n.attachEvent("onmessage",d32),function(a){n.postMessage(d+a,"*")}):n.MessageChannel?((u=new MessageChannel).port1.onmessage=function(n){c2(n.data)},function(n){u.port2.postMessage(n)}):v&&"onreadystatechange"in v.createElement("script")?(i=v.documentElement,function(n){var a=v.createElement("script");a.onreadystatechange=function(){c2(n),a.onreadystatechange=null,i.removeChild(a),a=null},i.appendChild(a)}):function(n){setTimeout(c2,0,n)},x.setImmediate=function(n){"function"!=typeof n&&(n=new Function(""+n));for(var a=new Array(arguments.length-1),i=0;i<a.length;i++)a[i]=arguments[i+1];var u={callback:n,args:a};return g[m]=u,o(m),m++},x.clearImmediate=f2}function f2(n){delete g[n]}function c2(n){if(y)setTimeout(c2,0,n);else{var o=g[n];if(o){y=!0;try{!function(n){var o=n.callback,i=n.args;switch(i.length){case 0:o();break;case 1:o(i[0]);break;case 2:o(i[0],i[1]);break;case 3:o(i[0],i[1],i[2]);break;default:o.apply(a,i)}}(o)}finally{f2(n),y=!1}}}}function d32(a){a.source===n&&"string"==typeof a.data&&0===a.data.indexOf(d)&&c2(+a.data.slice(d.length))}}("undefined"==typeof self?void 0===n?this:n:self)}).call(this,"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)})}(RF);return RF.exports}var MF=requireJszip_min();const zF=getDefaultExportFromCjs(MF);const LaunchButtonWithChecklist=({collection:n})=>{const[a,o]=ot.useState({metadataReady:!1,bannerReady:!1,nftsReady:!1,phasesReady:!1,whitelistReady:!1,allReady:!1});const[i,u]=ot.useState(!1);const[d,m]=ot.useState(!1);const[g,y]=ot.useState(0);const[v,x]=ot.useState(!1);const[N,k]=ot.useState({visible:!1,message:"",txHash:""});const[E,S]=ot.useState("");const[A,_]=ot.useState(!1);const[j,I]=ot.useState(!1);const[O,R]=ot.useState(!1);const[B,M]=ot.useState(!1);const[z,L]=ot.useState(!1);const D=ot.useRef(null);const W=useNavigate();const{switchNetwork:H}=useReownWallet();ot.useEffect(()=>{if(N.visible){const n=setTimeout(()=>k(n=>({...n,visible:!1})),5e3);return()=>clearTimeout(n)}},[N.visible]);ot.useEffect(()=>{if(i){const n=document.querySelector('[data-modal="launch-checklist"]');n&&n.focus()}},[i]);ot.useEffect(()=>{const handleEscape=n=>{"Escape"===n.key&&i&&u(!1)};if(i){document.addEventListener("keydown",handleEscape);return()=>document.removeEventListener("keydown",handleEscape)}},[i]);const showToast=(n,a="")=>{k({visible:!0,message:n,txHash:a})};const safeParseJSON=(n,a)=>{try{const o=JSON.parse(n);return void 0!==o?o:a}catch{return a}};const checkBasicRequirements=async(n,a,o)=>{const i=a.length;let u=0;let d=!0;Object.values(o).forEach(n=>{u+=Number(n.allocated)||0});u!==i&&(d=!1);let m=!0;["Whitelist","FCFS"].forEach(a=>{const i=o[a];if(i&&Number(i.allocated)>0){const o=safeParseJSON(localStorage.getItem(`${n.address}_${a}_whitelist`),[]);(!Array.isArray(o)||o.length<Number(i.allocated))&&(m=!1)}});const g=localStorage.getItem(`collection_${n.address}_banner`);let y=!(!n.metadata&&!n.metadataContent);const v=localStorage.getItem(`collection_${n.address}_metadata`);if(v){y=!0;console.log("✅ Found metadata in localStorage")}try{const a=new fb("https://dream-rpc.somnia.network/");const o=new Ey(n.address,vI,a);const i=await o.contractURI();if(i&&""!==i){y=!0;console.log("✅ Found contractURI in blockchain:",i)}const u=await o.baseTokenURI();if(u&&""!==u){y=!0;console.log("✅ Found baseTokenURI in blockchain:",u)}}catch(x){console.log("Could not check blockchain metadata:",x.message)}console.log("🔍 Metadata check result:",{hasMetadata:y,hasLocalMetadata:!!n.metadata,hasMetadataContent:!!n.metadataContent,hasLocalStorageMetadata:!!v});return{metadataReady:y,bannerReady:!!g,nftsReady:Array.isArray(a)&&a.length>0,phasesReady:o&&Object.keys(o).length>0&&d,whitelistReady:m}};const checkBlockchainStatus=async(n,a)=>{try{const i=new fb("https://dream-rpc.somnia.network/");const u=new Ey(n.address,vI,i);let d=!1;let m=0;let g=!1;try{const n=await u.baseTokenURI();d=n&&""!==n;if(d){m=await u.totalSupply();const n=Math.floor(Date.now()/1e3);a&&Object.keys(a).length>0&&(g=Object.values(a).some(a=>{if(!a.start||!a.end)return!1;const o=Math.floor(new Date(a.start).getTime()/1e3);const i=Math.floor(new Date(a.end).getTime()/1e3);return n>=o&&n<=i}));try{if("function"==typeof u.isSaleActive){const n=await u.isSaleActive();g=g||n}}catch(o){console.log("Could not check isSaleActive:",o.message)}try{const n=await u.revealed();g=!!(n&&m>0&&g)}catch(o){console.log("Could not check revealed status:",o.message)}}}catch(o){console.log("Error checking blockchain status:",o.message)}console.log("🔍 Blockchain status check result:",{address:n.address,isInitialized:d,totalMinted:Number(m),hasActivePhase:g,phasesCount:a?Object.keys(a).length:0,currentPath:window.location.pathname});return{isInitialized:d,totalMinted:Number(m),isSaleActive:g,canResume:d&&!g}}catch(o){console.error("Error checking blockchain status:",o);return{isInitialized:!1,totalMinted:0,isSaleActive:!1,canResume:!1}}};const checkResumeMode=async n=>{try{const o=new fb("https://dream-rpc.somnia.network/");const i=new Ey(n.address,vI,o);const u=await i.baseTokenURI();const d=await i.maxSupply();const m=await i.contractURI();let g=0;try{g="function"==typeof i.getPhasesCount?await i.getPhasesCount():0}catch(a){console.log("Could not get phases count from contract:",a.message);g=0}const y=safeParseJSON(localStorage.getItem(`phases_${n.address}`),{});const v=Object.values(y).filter(n=>n.active).length;const x=[];u||x.push("Set baseURI");d&&0!==d||x.push("Set maxSupply");m||x.push("Set contractURI");Number(g)<v&&x.push(`Add ${v-Number(g)} phases`);const N=x.length>0;const k=u||d>0||m;return{canResume:N||k,resumeSteps:x}}catch(a){console.log("Error checking resume mode:",a.message);return{canResume:!1,resumeSteps:[]}}};const checkAllStatus=async()=>{I(!0);try{const a=safeParseJSON(localStorage.getItem(`collection_${n.address}`),null);const i=a||n;const u=safeParseJSON(localStorage.getItem(`collection_${i.address}_nfts`),[]);const d=safeParseJSON(localStorage.getItem(`phases_${i.address}`),{});const m=await checkBasicRequirements(i,u,d);const g=await checkBlockchainStatus(i,d);console.log("🔍 Sale active check:",{isSaleActive:g.isSaleActive,currentPath:window.location.pathname,isInDashboard:"/dashboard"===window.location.pathname||"/create-dreams"===window.location.pathname});if(g.isSaleActive){const n=window.location.pathname;const a="/dashboard"===n||"/create-dreams"===n;if(a){R(!0);return}R(!0);showToast("🔄 Sale is already active! Redirecting to collection page...");setTimeout(()=>W(`/launchpad/collection/${i.address}`),2e3);return}g.isInitialized&&!g.isSaleActive&&console.log("✅ Collection is initialized but sale is not active - showing resume button");let y={canResume:!1,resumeSteps:[]};g.isInitialized&&(y=await checkResumeMode(i));const v={...m,blockchainStatus:g,resumeInfo:y};v.canLaunch=!g.isInitialized&&Object.values(m).every(Boolean);v.allReady=v.canLaunch||g.isInitialized&&y.canResume||g.isInitialized&&!g.isSaleActive||y.canResume;console.log("🎯 Final checks result:",{address:i.address,canLaunch:v.canLaunch,isInitialized:g.isInitialized,canResume:y.canResume,isSaleActive:g.isSaleActive,allReady:v.allReady,basicChecks:Object.values(m),resumeSteps:y.resumeSteps});console.log("🎯 Button visibility logic:",{canLaunch:v.canLaunch,isInitializedAndCanResume:g.isInitialized&&y.canResume,isInitializedAndNotActive:g.isInitialized&&!g.isSaleActive,resumeInfoCanResume:y.canResume,finalAllReady:v.allReady});o(v);return v}finally{I(!1)}};const uploadWithRetry=async(n,a,o=3)=>{for(let i=0;i<o;i++)try{if(A)throw new Error("Operation cancelled");return await fetch(n,a)}catch(rL){if(i===o-1)throw rL;await new Promise(n=>setTimeout(n,1e3*(i+1)))}};const getApiBase2=()=>{try{const n="undefined"!=typeof window;const a=n&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname);const o=n&&"5173"===String(window.location.port);if(a&&o)return"";const i="http://localhost:3000";if(i&&"string"==typeof i&&i.trim()){const n=i.trim().replace(/\/$/,"");if(/^https?:\/\//i.test(n))return n}}catch{}return""};const buildApiUrl2=n=>{const a=getApiBase2();const o=n.startsWith("/")?n:`/${n}`;return a?`${a}${o}`:o};const resetState=()=>{m(!1);y(0);S("");_(!1);if(D.current){D.current.abort();D.current=null}};const handleLaunch=async()=>{let a=null;try{m(!0);y(10);S("Checking collection data...");D.current=new AbortController;const d=safeParseJSON(localStorage.getItem(`collection_${n.address}`),null);const g=d||n;if(!g||!g.address)throw new Error("Invalid collection data: missing address");if(!isAddress(g.address))throw new Error(`Invalid contract address: ${g.address}`);try{const n=await(async()=>{try{return await(H?.(Jj))}catch{return{success:!1}}})();n?.success||await ensureSomniaNetwork()}catch(nL){showToast("❌ Please switch to Somnia Testnet to launch the sale");resetState();return}const v=new mb(window.ethereum);const N=await v.getSigner();const k=new Ey(g.address,[...vI,"function setAdmin(address user, bool enabled) external","function isAdmin(address user) view returns (bool)","function owner() view returns (address)"],N);if(!k)throw new Error("Failed to initialize contract");let E=!1;try{const n=await k.baseTokenURI();const a=n&&""!==n;if(a){const n=await checkResumeMode(g);if(!n.canResume)throw new Error("Collection already fully launched");E=!0;showToast("🔄 Resume mode: continuing from where you left off...")}}catch(o){console.log("Contract not initialized or error checking status:",o.message)}const A=safeParseJSON(localStorage.getItem(`collection_${g.address}_nfts`),[]);if(!Array.isArray(A)||0===A.length)throw new Error("No NFTs found in collection");for(const n of A)if(!n.image)throw new Error(`NFT ${n.name} has no image URL`);if(!E){y(20);S("Generating metadata zip...");a=new zF;A.forEach((n,o)=>{const i={name:String(n.name||`NFT #${o+1}`),description:String(n.description||""),image:String(n.image),attributes:Array.isArray(n.attributes)?n.attributes.map(n=>({trait_type:String(n.trait_type||""),value:String(n.value||"")})):[]};if(!i.image)throw new Error(`NFT ${o+1} has no image URL`);if(!i.image.startsWith("ipfs://")&&!i.image.startsWith("http"))throw new Error(`Invalid image URL format for NFT ${o+1}: ${i.image}`);a.file(`${o}.json`,JSON.stringify(i,null,2))});const n=await a.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}});if(n.size>104857600)throw new Error("Metadata folder is too large (max 100MB)");y(30);S("Uploading metadata folder to IPFS...");const o=new FormData;o.append("folder",n,"metadata.zip");const i=await uploadWithRetry(buildApiUrl2("/api/upload-metadata-folder"),{method:"POST",body:o,signal:D.current.signal});if(!i.ok){const n=await i.json();throw new Error(n.error||"Metadata folder upload failed")}const u=await i.json();if(!u.cid)throw new Error("No CID returned from server");const d=u.url;if(!d.startsWith("ipfs://"))throw new Error("Invalid baseURI format");y(40);S("Setting baseURI in contract...");const m=await k.setBaseURI(d);showToast("⏳ Setting baseURI...",m.hash);await m.wait();const g=A.length;const v=await k.setMaxSupply(g);showToast("⏳ Setting maxSupply...",v.hash);y(45);S("Setting maxSupply in contract...");await v.wait()}y(50);S("Adding phases to contract...");const _=safeParseJSON(localStorage.getItem(`phases_${g.address}`),{});if(!_||0===Object.keys(_).length)throw new Error("No phases found");const j=Object.keys(_);let I=0;for(const n of j){const a=_[n];if(!a||!1===a.active)continue;const i="Public"===n;let u="0x"+"0".repeat(64);if(!i){const a=safeParseJSON(localStorage.getItem(`${g.address}_${n}_whitelist`),[]);if(a.length>0){const i=a.map(n=>{try{return getAddress$1(n.trim())}catch(o){return n.trim().toLowerCase()}});const d=i.map(n=>keccak256(solidityPacked(["address"],[n])));const m=new IF.MerkleTree(d,keccak256,{sortPairs:!0});u=m.getHexRoot();const y={};i.forEach(n=>{const a=keccak256(solidityPacked(["address"],[n]));let o=m.getHexProof(a);0===o.length&&1===i.length&&(o=[]);y[n]=o});localStorage.setItem(`${g.address}_${n}_whitelist_proofs`,JSON.stringify(y));localStorage.setItem(`${g.address}_${n}_whitelist_root`,u)}}const d=Math.floor(new Date(a.start).getTime()/1e3);const m=Math.floor(new Date(a.end).getTime()/1e3);const v=parseUnits$1(a.price||"0",18);const x=Number(a.limit)||0;try{const a=await k.addPhase(d,m,v,x,u,i);showToast(`⏳ Adding phase ${n}...`,a.hash);y(50+Math.floor(10*(I+1)/j.length));await a.wait()}catch(nL){console.error("Phase addition failed:",nL);showToast(`❌ Error adding phase ${n}: ${nL.message}`);throw nL}I++}y(65);S("Uploading collection metadata to IPFS...");const O=safeParseJSON(localStorage.getItem(`collection_${g.address}`),null);console.log("🔍 Loading metadata - collectionData:",O);const R=safeParseJSON(localStorage.getItem("dreava_collections"),[]);const B=R&&Array.isArray(R)?R.find(n=>n.address===g.address):null;const M=safeParseJSON(localStorage.getItem(`collection_${g.address}_social`),{});const z="undefined"!=typeof window?window.localStorage.getItem(`collection_${g.address}_banner`):"";const L={...B,...O,...g};console.log("🔍 Loading metadata - meta:",L);const q={name:L.name||g.name||"Untitled Collection",description:L.description||g.description||"A unique NFT collection",image:L.image||g.image||L.cover||g.cover||"",banner:z||L.banner||g.banner||"",external_link:L.external_link||M.website||"",website:M.website||void 0,twitter:M.twitter||void 0,discord:M.discord||void 0,royaltyRecipient:L.royaltyRecipient||"",royaltyPercent:L.royaltyPercent||0,nfts:Array.isArray(A)?A.map((n,a)=>({name:n.name||`NFT #${a+1}`,tokenURI:`${g.metadata||g.baseTokenURI||"ipfs://cid"}/${a}`,image:n.image||n.image_url||""})):[],phases:_&&"object"==typeof _?Object.entries(_).reduce((n,[a,o])=>{if(!o||!o.active)return n;n[a]={price:o.price,limit:o.limit,start:Math.floor(new Date(o.start).getTime()/1e3),end:Math.floor(new Date(o.end).getTime()/1e3),allocated:o.allocated,isPublic:"Public"===a};return n},{}):{}};console.log("📤 Uploading metadata to server...");console.log("📤 Metadata to upload:",q);let G;try{G=await fetch("/api/upload-metadata",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({metadata:q})});console.log("📤 Fetch completed, status:",G.status)}catch(i){console.error("❌ Fetch error:",i);throw i}console.log("📤 Upload response status:",G.status);if(!G.ok){const n=await G.text();console.error("❌ Upload failed:",n);throw new Error(`Metadata upload failed: ${G.status} ${n}`)}const V=await G.json();console.log("✅ Upload response data:",V);const Z=V.url||(V.cid?`ipfs://${V.cid}`:null);if(!Z)throw new Error("No IPFS URI returned from server");y(80);S("Updating contractURI in contract...");const Y=await k.setContractURI(Z);showToast("⏳ Updating contractURI...",Y.hash);await Y.wait();y(90);S("Revealing collection...");try{const n=await N.getAddress();const a=await k.isAdmin(n);const o=await k.owner();if(!a&&n.toLowerCase()!==o.toLowerCase()){if(n.toLowerCase()!==o.toLowerCase())throw new Error("User does not have admin permissions on this contract");{const a=await k.setAdmin(n,!0);await a.wait()}}const i=await k.setRevealed(!0);showToast("⏳ Revealing collection...",i.hash);await i.wait();const u=await k.revealed();if(!u)throw new Error("Reveal transaction succeeded but revealed status is still false")}catch(u){console.error("Error revealing collection:",u);u.message&&u.message.includes("Not admin")?showToast("❌ Permission denied: You are not an admin of this contract"):showToast("❌ Error revealing collection: "+(u.message||u))}y(100);S("Launch complete!");x(!0);const J=await k.revealed();showToast(J?"✅ Collection launched and revealed! Redirecting to collection page...":"✅ Collection launched! Redirecting to collection page...",Y.hash);setTimeout(()=>W(`/launchpad/collection/${g.address}`),3e3)}catch(rL){console.error("❌ Launch error:",rL);showToast(`❌ Launch error: ${rL.message}`);resetState()}finally{a=null}};ot.useEffect(()=>()=>{resetState()},[]);ot.useEffect(()=>{n?.address&&checkAllStatus()},[n?.address]);return O?at.jsxs(at.Fragment,{children:[at.jsxs("button",{onClick:()=>M(!0),className:"px-4 py-2 rounded text-sm font-semibold transition shadow-md flex items-center gap-2 bg-gradient-to-r from-green-500 to-emerald-500 hover:opacity-90",children:[at.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),"Share"]}),B&&xb.createPortal(at.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-50 p-4",children:at.jsxs("div",{className:"bg-zinc-900/95 backdrop-blur-md rounded-3xl shadow-2xl max-w-md w-full animate-fadeIn border border-zinc-700/30",children:[at.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-zinc-700/30",children:[at.jsx("h3",{className:"text-xl font-bold text-white",children:"Share Collection"}),at.jsx("button",{onClick:()=>M(!1),className:"text-zinc-400 hover:text-white transition-all duration-200 hover:scale-110",children:at.jsx(Aj,{size:24})})]}),at.jsxs("div",{className:"p-6 space-y-6",children:[at.jsxs("div",{className:"flex items-center gap-4 p-4 bg-zinc-800/30 rounded-2xl border border-zinc-700/30",children:[at.jsx("img",{src:n.cover||n.firstNFTImage||n.image||"/default-cover.png",alt:n.name,className:"w-16 h-16 rounded-xl object-cover border border-zinc-600/30",onError:a=>{console.warn("⚠️ Collection cover failed to load:",a.target.src);n.firstNFTImage&&n.firstNFTImage!==a.target.src?a.target.src=n.firstNFTImage:a.target.src="/default-cover.png"}}),at.jsxs("div",{children:[at.jsx("h4",{className:"text-lg font-semibold text-white",children:n.name}),at.jsx("p",{className:"text-sm text-zinc-400",children:"Collection is live! 🚀"})]})]}),at.jsxs("div",{children:[at.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-3",children:"Collection Link"}),at.jsxs("div",{className:"flex items-center gap-3",children:[at.jsx("input",{type:"text",value:`${window.location.origin}/launchpad/collection/${n.address}`,readOnly:!0,className:"flex-1 p-3 bg-zinc-800/30 border border-zinc-700/30 rounded-xl text-white text-sm focus:outline-none focus:border-pink-500/50 transition-colors truncate",style:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),at.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/launchpad/collection/${n.address}`);L(!0);setTimeout(()=>L(!1),2e3)},className:"px-4 py-3 rounded-xl font-semibold transition-all duration-200 hover:scale-105 flex-shrink-0 "+(z?"bg-green-600 text-white":"bg-zinc-700/50 hover:bg-zinc-600/50 text-white"),children:z?"Copied!":"Copy"})]}),at.jsx("div",{className:"mt-2",children:at.jsxs("details",{className:"group",children:[at.jsx("summary",{className:"text-xs text-zinc-400 cursor-pointer hover:text-zinc-300 transition-colors",children:"Show full URL"}),at.jsx("div",{className:"mt-2 p-2 bg-zinc-800/20 rounded-lg border border-zinc-700/30",children:at.jsx("p",{className:"text-xs text-zinc-300 break-all",children:`${window.location.origin}/launchpad/collection/${n.address}`})})]})})]}),at.jsxs("div",{children:[at.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-3",children:"Share on Twitter"}),at.jsx("div",{className:"bg-zinc-800/30 rounded-2xl p-4 border border-zinc-700/30 mb-4",children:at.jsxs("p",{className:"text-sm text-zinc-300 mb-3",children:['"I just launched my NFT collection "',n.name,'" on Dreava Art! 🚀',at.jsx("br",{}),at.jsx("br",{}),"Check it out: ",at.jsx("span",{className:"break-all text-blue-400",children:`${window.location.origin}/launchpad/collection/${n.address}`}),at.jsx("br",{}),at.jsx("br",{}),"Try it yourself, it's really simple! ✨\""]})}),at.jsxs("a",{href:`https://twitter.com/intent/tweet?text=${encodeURIComponent(`I just launched my NFT collection "${n.name}" on Dreava Art! 🚀\n\nCheck it out: ${window.location.origin}/launchpad/collection/${n.address}\n\nTry it yourself, it's really simple! ✨`)}`,target:"_blank",rel:"noopener noreferrer",className:"w-full py-3 px-6 rounded-2xl bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold hover:from-blue-600 hover:to-blue-700 transition-all duration-300 hover:scale-105 shadow-2xl hover:shadow-blue-500/25 flex items-center justify-center gap-2",children:[at.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})}),"Tweet"]})]})]})]})}),document.body)]}):at.jsxs(at.Fragment,{children:[at.jsx("button",{onClick:()=>checkAllStatus().then(()=>u(!0)),disabled:j,className:"px-4 py-2 rounded text-sm font-semibold transition shadow-md flex items-center gap-2 "+(j?"bg-zinc-600 text-zinc-400 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-pink-500 hover:opacity-90"),children:j?at.jsxs(at.Fragment,{children:[at.jsx(dT,{className:"animate-spin",size:16}),"Checking..."]}):"Launch Sale"}),i&&xb.createPortal(at.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md flex justify-center items-center z-[999999] p-4",children:at.jsxs("div",{className:"bg-gradient-to-br from-zinc-900/95 to-zinc-800/95 backdrop-blur-xl rounded-3xl shadow-2xl max-w-lg w-full animate-fadeIn border border-zinc-700/50 relative overflow-hidden transform transition-all duration-300 hover:scale-[1.02]",tabIndex:-1,autoFocus:!0,"data-modal":"launch-checklist",children:[at.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10 animate-pulse"}),at.jsxs("div",{className:"relative z-10 p-6",children:[at.jsx("button",{className:"absolute top-3 right-3 text-zinc-400 hover:text-red-400 transition-all duration-200 hover:scale-110",onClick:()=>u(!1),children:at.jsx(Aj,{size:18})}),v?at.jsxs("div",{className:"text-center py-6",children:[at.jsx(xT,{size:56,className:"text-pink-500 animate-bounce mx-auto mb-3"}),at.jsx("h3",{className:"text-2xl font-bold mb-3 bg-gradient-to-r from-green-400 to-lime-400 bg-clip-text text-transparent",children:"🎉 Sale Launched!"}),at.jsx("p",{className:"text-base text-zinc-300 mb-5",children:"Your collection has been successfully launched and is now available for minting!"}),at.jsxs("div",{className:"flex gap-2 justify-center",children:[at.jsx("button",{onClick:()=>W("/launchpad"),className:"px-5 py-2.5 rounded-xl bg-gradient-to-r from-blue-500 to-pink-500 hover:opacity-90 text-white font-semibold transition-all duration-300",children:"Go to Launchpad"}),at.jsx("button",{onClick:()=>u(!1),className:"px-5 py-2.5 rounded-xl bg-zinc-700 hover:bg-zinc-600 text-white font-semibold transition-all duration-300",children:"Close"})]})]}):at.jsxs(at.Fragment,{children:[at.jsxs("div",{className:"flex items-center justify-between mb-4",children:[at.jsx("h3",{className:"text-xl font-bold bg-gradient-to-r from-[#FF0080] to-[#00A3FF] bg-clip-text text-transparent",children:"Launch Checklist"}),at.jsxs("button",{onClick:checkAllStatus,disabled:j,className:"flex items-center gap-2 px-2.5 py-1.5 bg-zinc-700 hover:bg-zinc-600 rounded-lg transition-colors text-xs",title:"Refresh status",children:[j?at.jsx(dT,{className:"animate-spin",size:12}):at.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),j?"Checking...":"Refresh"]})]}),at.jsxs("div",{className:"grid grid-cols-1 gap-3 mb-4",children:[at.jsx("div",{className:(a.metadataReady?"bg-green-900/20 border-green-500/50 text-green-300":"bg-red-900/20 border-red-500/50 text-red-300")+" p-3 rounded-xl border transition-all",children:at.jsxs("div",{className:"flex items-center gap-3",children:[a.metadataReady?at.jsx(T_,{className:"text-green-400",size:18}):at.jsx("div",{className:"w-4.5 h-4.5 rounded-full border-2 border-red-400"}),at.jsxs("div",{children:[at.jsx("h4",{className:"font-semibold text-sm",children:"Metadata"}),at.jsx("p",{className:"text-xs opacity-80",children:a.metadataReady?"Collection metadata ready":"Missing collection metadata"})]})]})}),at.jsx("div",{className:(a.bannerReady?"bg-green-900/20 border-green-500/50 text-green-300":"bg-red-900/20 border-red-500/50 text-red-300")+" p-3 rounded-xl border transition-all",children:at.jsxs("div",{className:"flex items-center gap-3",children:[a.bannerReady?at.jsx(T_,{className:"text-green-400",size:18}):at.jsx("div",{className:"w-4.5 h-4.5 rounded-full border-2 border-red-400"}),at.jsxs("div",{children:[at.jsx("h4",{className:"font-semibold text-sm",children:"Banner"}),at.jsx("p",{className:"text-xs opacity-80",children:a.bannerReady?"Banner image ready":"Missing banner image"})]})]})}),at.jsx("div",{className:(a.nftsReady?"bg-green-900/20 border-green-500/50 text-green-300":"bg-red-900/20 border-red-500/50 text-red-300")+" p-3 rounded-xl border transition-all",children:at.jsxs("div",{className:"flex items-center gap-3",children:[a.nftsReady?at.jsx(T_,{className:"text-green-400",size:18}):at.jsx("div",{className:"w-4.5 h-4.5 rounded-full border-2 border-red-400"}),at.jsxs("div",{children:[at.jsx("h4",{className:"font-semibold text-sm",children:"NFTs"}),at.jsx("p",{className:"text-xs opacity-80",children:a.nftsReady?"NFTs uploaded and ready":"No NFTs found in collection"})]})]})}),at.jsx("div",{className:(a.phasesReady?"bg-green-900/20 border-green-500/50 text-green-300":"bg-red-900/20 border-red-500/50 text-red-300")+" p-3 rounded-xl border transition-all",children:at.jsxs("div",{className:"flex items-center gap-3",children:[a.phasesReady?at.jsx(T_,{className:"text-green-400",size:18}):at.jsx("div",{className:"w-4.5 h-4.5 rounded-full border-2 border-red-400"}),at.jsxs("div",{children:[at.jsx("h4",{className:"font-semibold text-sm",children:"Phases"}),at.jsx("p",{className:"text-xs opacity-80",children:a.phasesReady?"Sale phases configured":"Missing or incomplete phase configuration"})]})]})}),at.jsx("div",{className:(a.whitelistReady?"bg-green-900/20 border-green-500/50 text-green-300":"bg-red-900/20 border-red-500/50 text-red-300")+" p-3 rounded-xl border transition-all",children:at.jsxs("div",{className:"flex items-center gap-3",children:[a.whitelistReady?at.jsx(T_,{className:"text-green-400",size:18}):at.jsx("div",{className:"w-4.5 h-4.5 rounded-full border-2 border-red-400"}),at.jsxs("div",{children:[at.jsx("h4",{className:"font-semibold text-sm",children:"Whitelist"}),at.jsx("p",{className:"text-xs opacity-80",children:a.whitelistReady?"Whitelist addresses ready":"Missing whitelist addresses for private phases"})]})]})})]}),d&&at.jsxs("div",{className:"mb-4",children:[at.jsxs("div",{className:"flex items-center justify-between mb-2",children:[at.jsx("span",{className:"text-xs font-medium text-zinc-300",children:"Launch Progress"}),at.jsxs("span",{className:"text-xs text-zinc-400",children:[g,"%"]})]}),at.jsx("div",{className:"w-full bg-zinc-700 rounded-full h-2 overflow-hidden",children:at.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-pink-500 h-2 transition-all duration-500 ease-out",style:{width:`${g}%`}})}),at.jsx("p",{className:"text-xs text-zinc-400 mt-2",children:E})]}),at.jsxs("div",{className:"flex gap-2",children:[a.allReady&&!d&&at.jsxs("button",{onClick:handleLaunch,disabled:d,className:"flex-1 py-2.5 px-4 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 hover:opacity-90 text-white text-sm font-semibold transition-all duration-300 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[at.jsx(T_,{size:16}),a.blockchainStatus?.isInitialized?"Resume Launch":"Confirm Launch"]}),at.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2.5 rounded-xl bg-zinc-700 hover:bg-zinc-600 text-white text-sm font-semibold transition-all duration-300",children:"Close"})]}),a.resumeInfo?.canResume&&at.jsxs("div",{className:"mt-3 p-3 bg-blue-900/20 border border-blue-500/50 rounded-xl",children:[at.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[at.jsx(VT,{className:"text-blue-400",size:14}),at.jsx("h4",{className:"font-semibold text-blue-300 text-sm",children:"Resume Mode"})]}),at.jsx("p",{className:"text-xs text-blue-200 mb-2",children:"Collection is partially initialized. You can resume from where you left off."}),at.jsxs("div",{className:"text-xs text-blue-300",children:[at.jsx("p",{children:"Steps to complete:"}),at.jsx("ul",{className:"list-disc list-inside mt-1 space-y-1",children:a.resumeInfo.resumeSteps.map((n,a)=>at.jsx("li",{children:n},a))})]})]}),!a.allReady&&at.jsx("div",{className:"mt-3 p-3 bg-red-900/20 border border-red-500/50 rounded-xl",children:at.jsx("p",{className:"text-xs text-red-300",children:"Please complete all checklist items before launching the sale."})})]})]})]})}),document.body),N.visible&&xb.createPortal(at.jsxs("div",{className:"fixed bottom-6 right-6 bg-zinc-800 text-white p-4 rounded-xl shadow-2xl max-w-sm animate-fadeIn border border-zinc-700/50 backdrop-blur-xl z-[999999]",children:[at.jsx("p",{className:"text-sm mb-2",children:N.message}),N.txHash&&at.jsxs("a",{href:`https://shannon-explorer.somnia.network/tx/${N.txHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline flex items-center gap-2 text-sm",children:[at.jsx(V_,{size:16}),"View Transaction"]})]}),document.body)]})};const CollectionManager=({collection:n})=>{const[a,o]=ot.useState(0);const i=[{id:0,name:"Phase Settings",icon:zT},{id:1,name:"Manage WLs",icon:fj},{id:2,name:"View Collection",icon:iT},{id:3,name:"Stats",icon:b_}];return n?n.address?at.jsxs("div",{className:"space-y-6",children:[at.jsxs("div",{className:"flex items-center justify-between p-6 bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 shadow-2xl",children:[at.jsxs("div",{className:"flex items-center gap-4",children:[at.jsx("img",{src:n.cover||n.firstNFTImage||o_,alt:"cover",className:"w-24 h-24 object-cover rounded-xl border border-zinc-700",onError:a=>{console.warn("⚠️ Collection cover failed to load:",a.target.src);n.firstNFTImage&&n.firstNFTImage!==a.target.src?a.target.src=n.firstNFTImage:a.target.src=o_}}),at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-semibold text-white",children:n.name||"Unnamed Collection"}),at.jsx("p",{className:"text-zinc-400 text-sm",children:n.address})]})]}),at.jsxs("div",{className:"flex items-center gap-3",children:[at.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-zinc-700/50 rounded-lg",children:[at.jsx(IT,{className:"w-4 h-4 text-zinc-400"}),at.jsx("span",{className:"text-sm text-zinc-400",children:"Ready to launch?"})]}),at.jsx(LaunchButtonWithChecklist,{collection:n})]})]}),at.jsxs("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 shadow-2xl overflow-hidden",children:[at.jsx("div",{className:"flex border-b border-zinc-700",children:i.map(n=>{const i=n.icon;return at.jsxs("button",{onClick:()=>o(n.id),className:"flex-1 flex items-center justify-center gap-2 py-4 px-6 font-medium transition-all duration-200 "+(a===n.id?"text-white border-b-2 border-pink-500 bg-gradient-to-r from-pink-500/10 to-blue-500/10":"text-zinc-400 hover:text-zinc-300 hover:bg-zinc-800/50"),children:[at.jsx(i,{className:"w-5 h-5"}),at.jsx("span",{children:n.name})]},n.id)})}),at.jsxs("div",{className:"p-6",children:[0===a&&at.jsx("div",{className:"animate-fadeIn",children:at.jsx(PhaseSettingsTab,{collection:n})}),1===a&&at.jsx("div",{className:"animate-fadeIn",children:at.jsx(ManageWLsTab,{collection:n})}),2===a&&at.jsx("div",{className:"animate-fadeIn",children:at.jsx(ViewCollectionTab,{collection:n})}),3===a&&at.jsx("div",{className:"animate-fadeIn",children:at.jsx(CollectionStatsTab,{collection:n})})]})]})]}):at.jsx("div",{className:"text-center py-12",children:at.jsx("p",{className:"text-zinc-400",children:"Invalid collection data"})}):at.jsx("div",{className:"text-center py-12",children:at.jsx("p",{className:"text-zinc-400",children:"Please select a collection to manage"})})};const CreateDreams=()=>{const[n,a]=ot.useState(0);const[o,i]=ot.useState(null);const[u,d]=ot.useState(0);const[m,g]=ot.useState(null);const[y,v]=ot.useState(null);const x=[{id:0,name:"Collection Identity"},{id:1,name:"Populate Collection"},{id:2,name:"Studio Dashboard"}];const handleTabChange=n=>{a(n);if(1===n){i(null);d(0)}};const handleCollectionSelect=n=>{console.log("🎯 Selected collection:",n);if(n&&n.address){i(n);v(null)}else console.error("Invalid collection selected:",n)};const handleCreateNewCollection=()=>{a(0);i(null)};const handleCollectionCreated=n=>{console.log("🎉 Collection created successfully:",n);if(n){try{const a=JSON.parse(localStorage.getItem("dreava_collections")||"[]");const o=a.some(a=>a&&a.address&&a.address.toLowerCase()===n.address.toLowerCase());o||localStorage.setItem("dreava_collections",JSON.stringify([n,...a]))}catch{}try{window.ethereum&&window.ethereum.request({method:"eth_accounts"}).then(a=>{const o=a&&a[0];if(o){const a=`dreava_user_collections_${o.toLowerCase()}`;const i=localStorage.getItem(a);const u=i?JSON.parse(i):{ts:Date.now(),collections:[]};const d=Array.isArray(u.collections)?u.collections:[];const m=new Map(d.map(n=>[n.address?.toLowerCase(),n]));m.set(n.address.toLowerCase(),n);localStorage.setItem(a,JSON.stringify({ts:Date.now(),collections:Array.from(m.values())}))}}).catch(()=>{})}catch{}setTimeout(()=>{g(n);i(n);a(1);console.log("✅ Switched to Populate Collection tab with selected collection:",n.name)},300)}else console.error("❌ No collection data received")};const handleNFTUploadSuccess=n=>{console.log("🎉 NFT upload successful:",n);n&&("single"===n.type?console.log(`✅ Single NFT "${n.nft.name}" uploaded successfully`):"multiple"===n.type&&console.log(`✅ ${n.totalUploaded} NFTs uploaded successfully, ${n.totalFailed} failed`));setTimeout(()=>{a(2);v(n)},300)};return at.jsxs("div",{className:"min-h-screen bg-black text-white",children:[at.jsx(BackgroundCircles,{}),at.jsx("div",{className:"bg-zinc-900 border-b border-zinc-800 relative z-10",children:at.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:at.jsx("div",{className:"flex items-center justify-between",children:at.jsxs("div",{children:[at.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-[#00A3FF] to-[#FF1CF7] bg-clip-text text-transparent",children:"Create Your Dreams"}),at.jsx("p",{className:"text-zinc-400 text-sm mt-1",children:"Build, populate, and manage your NFT collections"})]})})})}),at.jsx("div",{className:"bg-zinc-900 border-b border-zinc-800 relative z-10",children:at.jsx("div",{className:"max-w-7xl mx-auto px-6",children:at.jsx("div",{className:"flex",children:x.map(a=>at.jsx("button",{onClick:()=>handleTabChange(a.id),className:"py-4 px-6 font-medium transition-all duration-200 border-b-2 "+(n===a.id?"text-white border-pink-500 bg-gradient-to-r from-pink-500/10 to-blue-500/10":"text-zinc-400 border-transparent hover:text-zinc-300 hover:bg-zinc-800/50"),children:a.name},a.id))})})}),at.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8 pb-24 relative z-10",children:at.jsxs("div",{className:"animate-fadeIn",children:[0===n&&at.jsx("div",{children:at.jsx(CreateCollection,{onSuccess:handleCollectionCreated})}),1===n&&at.jsx("div",{className:"max-w-4xl mx-auto",children:o?at.jsxs("div",{className:"space-y-6",children:[at.jsxs("div",{className:"flex items-center justify-between",children:[at.jsxs("div",{className:"flex items-center gap-4",children:[at.jsxs("div",{className:"w-16 h-16 rounded-xl overflow-hidden border border-zinc-700/30 bg-zinc-800 flex-shrink-0",children:[o.cover||o.image||o.banner?at.jsx("img",{src:o.cover||o.image||o.banner,alt:o.name,className:"w-full h-full object-cover",onError:n=>{n.target.style.display="none";n.target.nextSibling.style.display="flex"}}):null,at.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{display:o.cover||o.image||o.banner?"none":"flex"},children:at.jsx("div",{className:"w-8 h-8 bg-zinc-600 rounded-lg flex items-center justify-center",children:at.jsx("svg",{className:"w-4 h-4 text-zinc-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})})]}),at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-semibold text-white",children:"Populate Collection"}),at.jsxs("p",{className:"text-zinc-400",children:["Selected: ",o.name,m&&m.address===o.address&&at.jsx("span",{className:"ml-2 text-green-400 text-sm",children:"✨ Newly Created"})]})]})]}),at.jsx("button",{onClick:()=>i(null),className:"text-zinc-400 hover:text-white transition-colors",children:"Change Collection"})]}),at.jsxs("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 p-8 shadow-2xl",children:[at.jsxs("div",{className:"flex border-b border-zinc-700 mb-6",children:[at.jsxs("button",{onClick:()=>d(0),className:"flex-1 flex items-center justify-center gap-2 py-4 px-6 font-medium transition-all duration-200 "+(0===u?"text-white border-b-2 border-pink-500 bg-gradient-to-r from-pink-500/10 to-blue-500/10":"text-zinc-400 hover:text-zinc-300 hover:bg-zinc-800/50"),children:[at.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),at.jsx("span",{children:"Single NFT"})]}),at.jsxs("button",{onClick:()=>d(1),className:"flex-1 flex items-center justify-center gap-2 py-4 px-6 font-medium transition-all duration-200 "+(1===u?"text-white border-b-2 border-pink-500 bg-gradient-to-r from-pink-500/10 to-blue-500/10":"text-zinc-400 hover:text-zinc-300 hover:bg-zinc-800/50"),children:[at.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),at.jsx("span",{children:"Multiple NFTs"})]})]}),at.jsx("div",{children:at.jsxs("div",{className:"animate-fadeIn",children:[0===u&&at.jsx(SingleNFT,{collection:o,onSuccess:handleNFTUploadSuccess}),1===u&&at.jsx(MultipleNFT,{collection:o,onSuccess:handleNFTUploadSuccess})]})})]})]}):at.jsxs("div",{className:"py-12",children:[at.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Populate Collection"}),at.jsx("p",{className:"text-zinc-400 mb-6",children:"Select a collection to add NFTs"}),at.jsx(CollectionSelector,{onSelect:handleCollectionSelect,showCreateButton:!0,onCreateNew:handleCreateNewCollection})]})}),2===n&&at.jsx("div",{className:"max-w-4xl mx-auto",children:o?at.jsxs("div",{className:"space-y-6",children:[at.jsxs("div",{className:"flex items-center justify-between",children:[at.jsxs("div",{className:"flex items-center gap-4",children:[at.jsxs("div",{className:"w-16 h-16 rounded-xl overflow-hidden border border-zinc-700/30 bg-zinc-800 flex-shrink-0",children:[o.cover||o.image||o.banner?at.jsx("img",{src:o.cover||o.image||o.banner,alt:o.name,className:"w-full h-full object-cover",onError:n=>{n.target.style.display="none";n.target.nextSibling.style.display="flex"}}):null,at.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{display:o.cover||o.image||o.banner?"none":"flex"},children:at.jsx("div",{className:"w-8 h-8 bg-zinc-600 rounded-lg flex items-center justify-center",children:at.jsx("svg",{className:"w-4 h-4 text-zinc-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 00-2-2V6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})})]}),at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-semibold text-white",children:"Studio Dashboard"}),at.jsxs("p",{className:"text-zinc-400",children:["Selected: ",o.name,y&&y.collection&&y.collection.address===o.address&&at.jsxs("span",{className:"ml-2 text-green-400 text-sm",children:["✨ Recently Uploaded ","single"===y.type?"NFT":`${y.totalUploaded} NFTs`]})]})]})]}),at.jsx("button",{onClick:()=>i(null),className:"text-zinc-400 hover:text-white transition-colors",children:"Change Collection"})]}),at.jsx("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 p-8 shadow-2xl",children:at.jsx(CollectionManager,{collection:o})})]}):at.jsxs("div",{className:"py-12",children:[at.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Studio Dashboard"}),at.jsx("p",{className:"text-zinc-400 mb-6",children:"Select a collection to manage"}),at.jsx(CollectionSelector,{onSelect:handleCollectionSelect,showCreateButton:!0,onCreateNew:handleCreateNewCollection})]})})]})})]})};const Launchpad=()=>at.jsxs("div",{className:"relative min-h-screen bg-[#0d0d0d] text-white font-sans pt-20 px-6 overflow-hidden",children:[at.jsx("div",{className:"absolute inset-0 w-full h-full pointer-events-none select-none z-0"}),at.jsxs("div",{className:"relative z-10 max-w-5xl mx-auto text-center",children:[at.jsx("h1",{className:"text-[50px] md:text-[60px] font-bold bg-gradient-to-r from-[#FF0080] via-[#367aff] to-[#00A3FF] bg-clip-text text-transparent mb-6",children:"Welcome to the Dreava Launchpad"}),at.jsx("p",{className:"text-lg md:text-xl text-zinc-400 mb-12",children:"We're not just building a marketplace — we're building a movement. Here, NFTs unlock worlds, ideas, and the next chapter of the digital revolution."}),at.jsxs("div",{className:"grid md:grid-cols-3 gap-8 text-left",children:[at.jsxs("div",{className:"bg-zinc-900 rounded-2xl p-6 border border-zinc-700 shadow-lg",children:[at.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Beyond Art & Collectibles"}),at.jsx("p",{className:"text-sm text-zinc-400",children:"Each collection is a living ecosystem, where holders gain access to real utility, exclusive spaces, and transformative opportunities."})]}),at.jsxs("div",{className:"bg-zinc-900 rounded-2xl p-6 border border-zinc-700 shadow-lg",children:[at.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Fuelled by Purpose"}),at.jsx("p",{className:"text-sm text-zinc-400",children:"Our token isn't for speculation. It's the engine of governance, rewards, and platform growth — designed for those who build and believe."})]}),at.jsxs("div",{className:"bg-zinc-900 rounded-2xl p-6 border border-zinc-700 shadow-lg",children:[at.jsx("h3",{className:"text-xl font-semibold mb-2",children:"A Community That Leads"}),at.jsx("p",{className:"text-sm text-zinc-400",children:"OG holders form the core circle, influencing the direction of Dreava and opening doors for emerging creators and projects."})]})]}),at.jsx("div",{className:"mt-12 pb-24 md:pb-0",children:at.jsx(sv,{to:"/active-sales",className:"inline-block px-8 py-4 rounded-xl bg-gradient-to-r from-[#00A3FF] to-[#FF1CF7] text-white font-semibold shadow-md hover:opacity-90 transition transform active:scale-95",children:"Enter the World of Possibilities"})})]})]});const Marketplace=()=>at.jsx("main",{className:"min-h-screen flex items-center justify-center bg-black text-white",children:at.jsx("h1",{className:"text-4xl font-bold",children:"Marketplace — Coming Soon 🚧"})});const LF="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20width='100%25'%20height='100%25'%20viewBox='0%200%2059%2052'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xml:space='preserve'%20xmlns:serif='http://www.serif.com/'%20style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;'%3e%3cg%20transform='matrix(1,0,0,1,-3025.41,-4174.8)'%3e%3cg%20transform='matrix(0.996682,0,0,0.994293,2101.56,3817.07)'%3e%3cg%20transform='matrix(0.0662647,0,0,0.954192,909.302,337.43)'%3e%3cg%3e%3cpath%20d='M1151.78,37.052C1151.78,29.535%201064.12,23.433%20956.144,23.433L461.607,23.433C353.633,23.433%20265.972,29.535%20265.972,37.052L265.972,64.289C265.972,71.806%20353.633,77.908%20461.607,77.908L956.144,77.908C1064.12,77.908%201151.78,71.806%201151.78,64.289L1151.78,37.052Z'%20style='fill:rgb(39,39,42);'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3cg%20transform='matrix(0.996682,0,0,0.994293,2101.56,3807.07)'%3e%3cg%20id='drag-drop-svgrepo-com.svg'%20transform='matrix(0.0510569,0,0,0.0511795,956.276,395.837)'%3e%3cg%20transform='matrix(1,0,0,1,-400,-400)'%3e%3cg%3e%3crect%20x='0'%20y='0'%20width='800'%20height='800'%20style='fill:none;fill-rule:nonzero;'/%3e%3cpath%20d='M533.333,433.333L765.467,568.733L666.367,597.067L737.2,719.767L679.467,753.1L608.633,630.433L534.533,702.1L533.333,433.333ZM466.667,200L533.333,200L533.333,266.667L700,266.667C718.286,266.667%20733.333,281.714%20733.333,300L733.333,433.333L666.667,433.333L666.667,333.333L333.333,333.333L333.333,666.667L466.667,666.667L466.667,733.333L300,733.333C281.714,733.333%20266.667,718.286%20266.667,700L266.667,533.333L200,533.333L200,466.667L266.667,466.667L266.667,300C266.667,281.714%20281.714,266.667%20300,266.667L466.667,266.667L466.667,200ZM133.333,466.667L133.333,533.333L66.667,533.333L66.667,466.667L133.333,466.667ZM133.333,333.333L133.333,400L66.667,400L66.667,333.333L133.333,333.333ZM133.333,200L133.333,266.667L66.667,266.667L66.667,200L133.333,200ZM133.333,66.667L133.333,133.333L66.667,133.333L66.667,66.667L133.333,66.667ZM266.667,66.667L266.667,133.333L200,133.333L200,66.667L266.667,66.667ZM400,66.667L400,133.333L333.333,133.333L333.333,66.667L400,66.667ZM533.333,66.667L533.333,133.333L466.667,133.333L466.667,66.667L533.333,66.667Z'%20style='fill:white;fill-rule:nonzero;'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";const DF="/assets/UploadJson-DUhld9f3.svg";const JsonUploadPage=()=>{const[n,a]=ot.useState(null);const[o,i]=ot.useState([]);const[u,d]=ot.useState("");const[m,g]=ot.useState(!1);const handleJsonUpload=async n=>{if(n){a(n);try{const a=await n.text();const o=JSON.parse(a);if(!Array.isArray(o))throw new Error("Invalid JSON: expected an array of NFT metadata");i(o)}catch(rL){console.error(rL);d("❌ Failed to parse JSON")}}};const mintAllFromJson=async()=>{try{if(!window.ethereum)throw new Error("Wallet not detected");const n=new mb(window.ethereum);const a=await n.getSigner();for(const i of o){d(`Uploading metadata: ${i.name||"Untitled"}`);const n=await fetch("https://api.pinata.cloud/pinning/pinJSONToIPFS",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mb3JtYXRpb24iOnsiaWQiOiJmMDQxYjk4My0zODk3LTQzOWEtOThhYi0wMTdmN2MyZjIwYzMiLCJlbWFpbCI6ImJ1bGF2aW5hZnJlZWxhbmNlQGdtYWlsLmNvbSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJwaW5fcG9saWN5Ijp7InJlZ2lvbnMiOlt7ImRlc2lyZWRSZXBsaWNhdGlvbkNvdW50IjoxLCJpZCI6IkZSQTEifSx7ImRlc2lyZWRSZXBsaWNhdGlvbkNvdW50IjoxLCJpZCI6Ik5ZQzEifV0sInZlcnNpb24iOjF9LCJtZmFfZW5hYmxlZCI6ZmFsc2UsInN0YXR1cyI6IkFDVElWRSJ9LCJhdXRoZW50aWNhdGlvblR5cGUiOiJzY29wZWRLZXkiLCJzY29wZWRLZXlLZXkiOiJiYTg2ZDQzOThjOGY5MWY5Mjg2YiIsInNjb3BlZEtleVNlY3JldCI6ImJmMGJhOThkOTU4MzY1NTBjZWU0OGNjNjM0ZjBkZGVlMWFmODJlNTZhMjJkNWI3YTVlMGJhZmUwZTkxNmYyNDkiLCJleHAiOjE3NzkzODkyNDl9.tM3vC2lxATC_UWUISCQN8vDdMfms0HuCpmcZTaqC2Hg"},body:JSON.stringify(i)});const{IpfsHash:o}=await n.json();const u=`ipfs://${o}`;const m=new Ey(i.contractAddress,vI,a);const g=await m.mintPublic(await a.getAddress(),u);await g.wait()}d("✅ All NFTs minted")}catch(rL){console.error(rL);d(`❌ Error: ${rL.message}`)}};const handleDrop=n=>{n.preventDefault();g(!1);const a=n.dataTransfer.files[0];a&&"application/json"===a.type&&handleJsonUpload(a)};return at.jsx("div",{className:"w-[780px] mx-auto text-white font-sans",children:at.jsxs("div",{className:"border border-zinc-700 bg-zinc-900 rounded-2xl p-8",children:[at.jsx("h2",{className:"text-[28px] font-bold bg-gradient-to-r from-blue-500 to-pink-500 bg-clip-text text-transparent leading-none mb-[6px]",children:"Pro Upload (JSON)"}),at.jsx("p",{className:"text-zinc-400 mb-[16px] text-sm leading-snug",children:"Upload your structured NFT metadata using a JSON file for advanced batch minting."}),!n&&at.jsxs("div",{onDragOver:n=>{n.preventDefault();g(!0)},onDragLeave:()=>g(!1),onDrop:handleDrop,className:"border border-dashed rounded-xl p-8 text-center mb-8 transition-colors duration-150 "+(m?"border-pink-500 bg-zinc-800":"border-zinc-700 bg-zinc-900"),children:[at.jsx("img",{src:LF,alt:"Upload Icon",className:"mx-auto mb-6 w-10 h-10"}),at.jsx("p",{className:"text-sm font-medium mb-1 text-white",children:"Drag & drop your JSON file here"}),at.jsx("p",{className:"text-xs text-zinc-500 mb-4",children:"or use the button below to upload"}),at.jsxs("ul",{className:"text-xs text-left mx-auto max-w-md text-zinc-500 space-y-1 mb-6",children:[at.jsxs("li",{children:["• Format: ",at.jsx("code",{children:".json"})]}),at.jsx("li",{children:"• Must be an array of metadata objects"}),at.jsx("li",{children:"• Recommended: IPFS image links"}),at.jsx("li",{children:"• Max file size: 5MB"}),at.jsxs("li",{children:["• Each object must include a ",at.jsx("code",{children:"contractAddress"})]})]}),at.jsxs("label",{className:"inline-block cursor-pointer",children:[at.jsx("img",{src:DF,alt:"Upload JSON",className:"w-[160px]"}),at.jsx("input",{type:"file",accept:"application/json",onChange:n=>handleJsonUpload(n.target.files[0]),className:"hidden"})]})]}),o.length>0&&at.jsxs("div",{className:"space-y-4",children:[at.jsxs("p",{className:"text-sm text-zinc-300",children:["Detected ",o.length," NFTs from JSON"]}),at.jsx("button",{onClick:mintAllFromJson,className:"w-full py-3 rounded-lg bg-gradient-to-r from-[#00A3FF] to-[#FF1CF7] text-white font-semibold text-sm shadow-md active:scale-95 transition",children:"Mint All from JSON"})]}),u&&at.jsx("p",{className:"text-sm text-center text-zinc-400 mt-6",children:u})]})})};const $F="0xb7C9318Ac06AA59fE3cDD8342769361bB0Cc3d09";const fetchWithFallback$1=async n=>{for(const a of n)try{const n=await fetch(a);if(n.ok)return await n.json()}catch{}throw new Error("All IPFS gateways failed")};const MyStudio=()=>{const[n,a]=ot.useState([]);const o=useNavigate();ot.useEffect(()=>{const loadCollections=async()=>{try{const n=new mb(window.ethereum);const o=await n.getSigner();const i=await o.getAddress();const u=new Ey($F,xI,n);const d=await u.getUserCollections(i);const m=await Promise.all(d.map(async a=>{try{const o=new Ey(a,vI,n);const u=await o.owner();if(u.toLowerCase()!==i.toLowerCase()){console.warn(`Skipping ${a} because owner mismatch`);return null}const d=await o.name();let m="";let g="";try{g=await o.contractURI();console.log(`Contract ${a} returned contractURI: '${g}'`)}catch(rL){console.warn(`No contractURI() on contract ${a}:`,rL)}if(g&&""!==g){const n=getIpfsUrls(g);try{const o=await fetchWithFallback$1(n);if(o.image){const n=getIpfsUrls(o.image);m=n[0]}else console.warn(`No image field in metadata for ${a}`)}catch(rL){console.warn(`Failed to fetch metadata JSON for ${a}:`,rL)}}else console.warn(`Metadata URI is empty for contract ${a}`);return{address:a,name:d,cover:m||o_,createdAt:"-",views:Math.floor(500*Math.random()),revenue:(10*Math.random()).toFixed(2)}}catch(o){console.error(`Error processing contract ${a}:`,o);return null}}));const g=m.filter(n=>null!==n);a(g)}catch(rL){console.error("Failed to load collections:",rL)}};loadCollections()},[]);const handleManage=n=>{o(`/manage/${n}`)};return at.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-12 text-white font-sans relative z-10",children:[at.jsxs("div",{className:"mb-12 text-center",children:[at.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-[#FF0080] via-[#367aff] to-[#00A3FF] bg-clip-text text-transparent mb-3",children:"My Studio"}),at.jsx("p",{className:"text-zinc-400 mt-2 max-w-2xl mx-auto text-base",children:"Welcome, Creator. Here, you are more than an artist — you are a storyteller, a world-builder, a gatekeeper to dreams."})]}),0===n.length?at.jsxs("div",{className:"text-center text-zinc-500",children:[at.jsx("p",{className:"mb-4",children:"You haven't created any collections yet."}),at.jsx(sv,{to:"/explore#create",className:"inline-block px-8 py-3 rounded-xl bg-gradient-to-r from-[#00A3FF] to-[#FF1CF7] text-white font-semibold shadow-md hover:opacity-90 transition",children:"Create Your First Collection"})]}):at.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map((n,a)=>at.jsx("div",{className:"relative h-[420px] rounded-2xl shadow-lg hover:scale-105 transform transition duration-300 overflow-hidden border border-zinc-700",style:{backgroundImage:`url(${n.cover||n.firstNFTImage||"/default-cover.png"})`,backgroundSize:"cover",backgroundPosition:"center"},children:at.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/60 to-transparent p-4 flex flex-col justify-end",children:[at.jsx("h3",{className:"text-lg font-semibold mb-1 truncate",title:n.name,children:n.name}),at.jsxs("p",{className:"text-zinc-400 text-xs mb-2",children:["Created on ",n.createdAt||"Unknown"]}),at.jsxs("div",{className:"text-xs text-zinc-400 mb-3 space-y-1",children:[at.jsxs("p",{children:["Views: ",at.jsx("span",{className:"text-white font-medium",children:n.views})]}),at.jsxs("p",{children:["Revenue: ",at.jsxs("span",{className:"text-white font-medium",children:["Ξ ",n.revenue]})]})]}),at.jsxs("div",{className:"flex gap-2",children:[at.jsxs("button",{onClick:()=>handleManage(n.address),className:"flex-1 py-2 text-sm rounded-lg bg-zinc-800 border border-zinc-600 hover:bg-zinc-700 transition relative group",children:["Manage",at.jsx("span",{className:"absolute left-1/2 transform -translate-x-1/2 -bottom-8 bg-zinc-700 text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition",children:"Set prices, phases, analytics"})]}),at.jsx("div",{className:"flex-1",children:at.jsx(LaunchButtonWithChecklist,{collection:n})})]})]})},a))})]})};const TruncatedText$1=({text:n,maxLines:a=1,className:o=""})=>{const[i,u]=ot.useState(!1);const d=ot.useRef(null);ot.useEffect(()=>{const handleClickOutside=n=>{i&&d.current&&!d.current.contains(n.target)&&u(!1)};document.addEventListener("mousedown",handleClickOutside);return()=>document.removeEventListener("mousedown",handleClickOutside)},[i]);if(!n)return null;const m=1===a?50:100;const g=n.length>m;return g?at.jsxs("div",{className:"relative",ref:d,children:[at.jsxs("div",{className:`${o} flex items-start`,children:[at.jsx("span",{className:"flex-1 truncate",children:n.substring(0,m)}),at.jsx("button",{onClick:n=>{n.stopPropagation();u(!i)},className:"ml-1 text-blue-400 hover:text-blue-300 cursor-pointer flex-shrink-0",children:"..."})]}),i&&at.jsx("div",{className:"absolute bg-zinc-900 border border-zinc-700 rounded-lg p-3 shadow-lg z-50 backdrop-blur-sm",style:{top:"-10px",right:"0px",width:"280px",maxHeight:"150px",overflow:"auto"},children:at.jsx("p",{className:"text-gray-300 text-sm leading-relaxed whitespace-pre-wrap break-words",children:n})})]}):at.jsx("div",{className:o,children:n})};const TabBar=({activeTab:n,setActiveTab:a})=>at.jsx("div",{className:"bg-zinc-900 border-b border-zinc-800 relative z-10",children:at.jsx("div",{className:"max-w-7xl mx-auto px-6",children:at.jsxs("div",{className:"flex",children:[at.jsx("button",{onClick:()=>a("completed"),className:"py-4 px-6 font-medium transition-all duration-200 border-b-2 cursor-pointer "+("completed"===n?"text-white border-pink-500 bg-gradient-to-r from-pink-500/10 to-blue-500/10":"text-zinc-400 border-transparent hover:text-zinc-300 hover:bg-zinc-800/50"),children:"Completed Sales"}),at.jsx("button",{onClick:()=>a("active"),className:"py-4 px-6 font-medium transition-all duration-200 border-b-2 cursor-pointer "+("active"===n?"text-white border-pink-500 bg-gradient-to-r from-pink-500/10 to-blue-500/10":"text-zinc-400 border-transparent hover:text-zinc-300 hover:bg-zinc-800/50"),children:"Active Sales"}),at.jsx("button",{onClick:()=>a("upcoming"),className:"py-4 px-6 font-medium transition-all duration-200 border-b-2 cursor-pointer "+("upcoming"===n?"text-white border-pink-500 bg-gradient-to-r from-pink-500/10 to-blue-500/10":"text-zinc-400 border-transparent hover:text-zinc-300 hover:bg-zinc-800/50"),children:"Upcoming Sales"})]})})});const ActiveSales=({portalVideo:n,portalHoverVideo:a})=>{const{collections:o,loading:i,error:u}=useActiveCollections();const[d,m]=ot.useState(0);const[g,y]=ot.useState("active");const[v,x]=ot.useState({});const[N,k]=ot.useState(!1);ot.useMemo(()=>window.innerWidth<768,[]);ot.useMemo(()=>window.innerWidth>=768&&window.innerWidth<1024,[]);const E=ot.useMemo(()=>{if(!o||0===o.length)return[];const n=[];o.slice(0,10).forEach(a=>{a.cover&&n.push(a.cover);a.bannerImage&&n.push(a.bannerImage);a.firstNFTImage&&n.push(a.firstNFTImage)});return[...new Set(n)]},[o]);const S=Math.floor(Date.now()/1e3);const A=Math.floor(new Date("2025-06-29T00:00:00Z").getTime()/1e3);const isSaleEnded=n=>{const a=n.phases||{};const o=Object.values(a).length>0&&Object.values(a).every(n=>Number(n.end)<S);return n.soldOut||o};const isActiveSale=n=>n&&Object.values(n).some(n=>Number(n.start)<=S&&S<=Number(n.end));const isUpcomingSale=n=>n&&Object.values(n).some(n=>Number(n.start)>S);const getPhases=n=>{const a=n.phases||n.metadata?.phases||{};return a};const getLastPhaseEnd=n=>{const a=getPhases(n);return a&&0!==Object.values(a).length?Math.max(...Object.values(a).map(n=>Number(n.end))):0};const _=o.filter(n=>{const a=getPhases(n);if("completed"===g)return isSaleEnded(n)&&getLastPhaseEnd(n)>=A;if("active"===g)return isActiveSale(a)&&!isSaleEnded(n);if("upcoming"===g){const o=isUpcomingSale(a);const i=isActiveSale(a);return o&&!i&&!isSaleEnded(n)}return!1});ot.useEffect(()=>{m(0)},[g,_.length]);if(i)return at.jsxs("div",{className:"min-h-screen bg-black text-white",children:[at.jsx(TabBar,{activeTab:g,setActiveTab:y}),at.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8 relative z-10",children:at.jsx("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:at.jsx(LoadingSpinner,{message:"Loading active sales",showLogo:!0,size:"default",showProgress:!1,showDots:!1})})})]});if(u)return at.jsxs("div",{className:"min-h-screen bg-black text-white",children:[at.jsx(TabBar,{activeTab:g,setActiveTab:y}),at.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8 relative z-10",children:at.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:[at.jsx(LoadingSpinner,{message:`Error loading collections: ${u}`,showLogo:!0,size:"default",showProgress:!1,showDots:!1}),at.jsx("p",{className:"text-zinc-400 text-sm mt-4",children:"The indexer may not be running yet."})]})})]});if(0===_.length){const getMessage=()=>"active"===g?"No active sales at the moment":"upcoming"===g?"No upcoming sales at the moment":"No completed sales yet";return at.jsxs("div",{className:"min-h-screen bg-black text-white",children:[at.jsx(TabBar,{activeTab:g,setActiveTab:y}),at.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8 relative z-10",children:at.jsx("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:at.jsx(LoadingSpinner,{message:getMessage(),showLogo:!0,size:"default",showProgress:!1,showDots:!1})})})]})}const prevSlide=()=>{m(n=>{const a=n-3;return a<0?Math.max(0,_.length-3):a})};const nextSlide=()=>{m(n=>{const a=n+3;return a>=_.length?0:a})};const j=_.slice(d,d+3);return at.jsxs("div",{className:"min-h-screen bg-black text-white",children:[at.jsx(TabBar,{activeTab:g,setActiveTab:y}),at.jsx("div",{className:"max-w-6xl mx-auto px-6 py-8",children:at.jsxs("div",{className:"animate-fadeIn",children:[at.jsx(PerformanceMonitor$1,{onMetrics:x,showUI:!1}),E.length>0&&at.jsx(ImagePreloader,{images:E,priority:!0,onComplete:()=>k(!0),onProgress:(n,a)=>{n===a&&k(!0)}}),at.jsxs("div",{className:"text-center mb-8",children:[at.jsxs("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-500 to-pink-500 bg-clip-text text-transparent leading-none mb-4",children:["active"===g&&"Active Sales","upcoming"===g&&"Upcoming Sales","completed"===g&&"Completed Sales"]}),at.jsxs("p",{className:"text-zinc-400 text-lg",children:["active"===g&&"Discover and mint from the latest NFT collections","upcoming"===g&&"Get ready for these exciting upcoming launches","completed"===g&&"Explore completed sales and their achievements"]})]}),at.jsxs("div",{className:"relative",children:[at.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:j.map((o,i)=>at.jsx(CollectionCard,{collection:o,portalVideo:n,portalHoverVideo:a,isSaleEnded:isSaleEnded,getPhases:getPhases,now:S,isUpcoming:"upcoming"===g},o.address))}),_.length>3&&at.jsxs(at.Fragment,{children:[at.jsx("button",{onClick:prevSlide,className:"absolute top-1/2 left-[-20px] transform -translate-y-1/2 bg-zinc-800 bg-opacity-60 hover:bg-opacity-80 rounded-full p-2 z-10",children:at.jsx("img",{src:iI,alt:"Previous",className:"w-6 h-6 opacity-80 hover:opacity-100"})}),at.jsx("button",{onClick:nextSlide,className:"absolute top-1/2 right-[-20px] transform -translate-y-1/2 bg-zinc-800 bg-opacity-60 hover:bg-opacity-80 rounded-full p-2 z-10",children:at.jsx("img",{src:cI,alt:"Next",className:"w-6 h-6 opacity-80 hover:opacity-100"})})]}),_.length>3&&at.jsx("div",{className:"flex justify-center mt-8",children:at.jsx("div",{className:"flex gap-2",children:Array.from({length:Math.ceil(_.length/3)}).map((n,a)=>at.jsx("button",{onClick:()=>m(3*a),className:"w-3 h-3 rounded-full transition-all duration-200 "+(Math.floor(d/3)===a?"bg-gradient-to-r from-blue-500 to-pink-500":"bg-zinc-600 hover:bg-zinc-500")},a))})})]})]})})]})};const CollectionCard=({collection:n,portalVideo:a,portalHoverVideo:o,isSaleEnded:i,getPhases:u,now:d,isUpcoming:m=!1})=>{const g=useNavigate();const[y,v]=ot.useState(!1);const[x,N]=ot.useState(!1);const k=u(n);const E=Object.entries(k).find(([,n])=>{const a=Number(n.start);const o=Number(n.end);return a<=d&&d<=o});const S=Object.values(k).filter(n=>{const a=Number(n.start);return a>d});const A=S.length>0?S.reduce((n,a)=>{const o=Number(n.start);const i=Number(a.start);return o<i?n:a}):null;const handleHoverStart=()=>{x||v(!0)};const handleHoverEnd=()=>{v(!1)};const handleHoverVideoEnd=()=>{N(!0)};ot.useEffect(()=>{N(!1);v(!1)},[n]);const _=n.description||n.metadata?.description||"No description provided.";const j=E?E[1].price:"0";const I=i(n);return at.jsxs("div",{className:"bg-[#111] p-4 rounded-2xl text-white shadow-lg border border-zinc-800/50 h-[480px] flex flex-col cursor-pointer hover:scale-105 transition-all duration-300",onMouseEnter:handleHoverStart,onMouseLeave:handleHoverEnd,onClick:()=>g(`/launchpad/collection/${n.address}`),children:[at.jsxs("div",{className:"relative mb-4 flex-shrink-0 h-64 overflow-hidden rounded-xl",children:[at.jsx("video",{src:a,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover"}),y&&!x&&at.jsx("video",{src:o,autoPlay:!0,muted:!0,playsInline:!0,onEnded:handleHoverVideoEnd,className:"absolute inset-0 w-full h-full object-cover"}),x&&at.jsx("img",{src:n.cover||n.firstNFTImage||o_,alt:n.name,className:"absolute inset-0 w-full h-full object-contain bg-zinc-900 transition-opacity duration-700",style:{objectFit:"contain",objectPosition:"center"},onError:a=>{n.firstNFTImage&&n.firstNFTImage!==a.currentTarget.src?a.currentTarget.src=n.firstNFTImage:a.currentTarget.src=o_}}),at.jsx("div",{className:"absolute top-3 right-3",children:i(n)?at.jsx("span",{className:"px-2 py-1 bg-red-500/80 text-white text-xs rounded-full",children:"Ended"}):E?at.jsxs("span",{className:"px-2 py-1 bg-green-500/80 text-white text-xs rounded-full flex items-center gap-1",children:[at.jsx($T,{size:12}),"Active"]}):A?at.jsx("span",{className:"px-2 py-1 bg-yellow-500/80 text-white text-xs rounded-full",children:"Upcoming"}):at.jsx("span",{className:"px-2 py-1 bg-zinc-500/80 text-white text-xs rounded-full",children:"Paused"})})]}),at.jsxs("div",{className:"flex-1 flex flex-col",children:[at.jsx("h3",{className:"text-lg font-bold bg-gradient-to-r from-pink-500 to-blue-500 bg-clip-text text-transparent mb-2",children:n.name}),at.jsx("div",{className:"mb-3 flex-1",children:at.jsx(TruncatedText$1,{text:_,maxLines:1,className:"text-sm text-zinc-400"})}),at.jsxs("div",{className:"flex justify-between text-sm text-zinc-300 mb-2",children:[m||!E&&!I?at.jsx("span",{}):at.jsxs("span",{className:"flex items-center gap-1",children:[at.jsx(fj,{size:12}),n.minted||0," / ",n.totalSupply||0]}),at.jsxs("span",{className:"flex items-center gap-1",children:[at.jsx("img",{src:i_,alt:"STT",className:"w-3 h-3"}),j," STT"]})]}),at.jsx("div",{className:"mb-3",children:i(n)?at.jsx("span",{className:"text-red-400 text-xs font-medium",children:"Sale ended"}):E?at.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[at.jsx(z_,{size:12,className:"text-pink-400"}),at.jsx("span",{className:"text-pink-400",children:"Ends in:"}),at.jsx(bI,{date:1e3*Number(E[1].end),renderer:({days:n,hours:a,minutes:o,seconds:i})=>at.jsxs("span",{className:"text-white font-mono",children:[n>0?`${n}d `:"",a,"h ",o,"m ",i,"s"]})})]}):A?at.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[at.jsx(z_,{size:12,className:"text-yellow-400"}),at.jsx("span",{className:"text-yellow-400",children:"Starts in:"}),at.jsx(bI,{date:1e3*Number(A.start),renderer:({days:n,hours:a,minutes:o,seconds:i})=>at.jsxs("span",{className:"text-white font-mono",children:[n>0?`${n}d `:"",a,"h ",o,"m ",i,"s"]})})]}):at.jsx("span",{className:"text-zinc-400 text-xs",children:"No active phase"})}),at.jsxs("button",{className:"w-full py-2.5 bg-gradient-to-r from-blue-500 to-pink-500 hover:opacity-90 text-white rounded-xl font-semibold transition-all duration-200 flex items-center justify-center gap-2 text-sm",children:[at.jsx("span",{children:"Enter Portal"}),at.jsx(p_,{size:14})]})]})]})};const CollectionMetadataEditor=({collection:n})=>{const[a,o]=ot.useState("");const[i,u]=ot.useState("");const[d,m]=ot.useState(0);const[g,y]=ot.useState("");const[v,x]=ot.useState("");const[N,k]=ot.useState(null);const[E,S]=ot.useState(!1);const[A,_]=ot.useState("");const[j,I]=ot.useState(0);const[O,R]=ot.useState(!1);ot.useEffect(()=>{const loadCollectionMetadata=async()=>{o(n.description||"");u(n.external_link||"");m(n.royaltyPercent||0);y(n.royaltyRecipient||"");let a=!1;if(n.image&&""!==n.image.trim()){x(getIpfsUrls(n.image)[0]);a=!0}try{const i=new mb(window.ethereum);const d=new Ey(n.address,["function contractURI() public view returns (string)"],i);const g=await d.contractURI();if(!g)return;const v=getIpfsUrls(g)[0];const N=await fetch(v);if(!N.ok)throw new Error(`HTTP ${N.status}`);const k=await N.json();!n.description&&k.description&&o(k.description);!n.external_link&&k.external_link&&u(k.external_link);!n.royaltyPercent&&k.royaltyPercent&&m(k.royaltyPercent);!n.royaltyRecipient&&k.royaltyRecipient&&y(k.royaltyRecipient);!a&&k.image&&x(getIpfsUrls(k.image)[0])}catch(rL){console.warn("Could not load image or metadata from contractURI:",rL)}};loadCollectionMetadata()},[n]);const handleCoverChange=n=>{const a=n.target.files[0];if(a){k(a);x(URL.createObjectURL(a))}};const uploadToBackend=async n=>{const a=new FormData;a.append("file",n);const o=await fetch("/api/pin-file",{method:"POST",body:a});const i=await o.json();return i.ipfsUri};const handleSaveMetadata=async()=>{try{S(!0);R(!0);_("Uploading cover image...");I(20);let o="";o=N?await uploadToBackend(N):v||(n.image?n.image:"");_("Uploading metadata...");I(50);const u={name:n.name,description:a,image:o,external_link:i,royaltyRecipient:g,royaltyPercent:d};const m=await fetch("/api/pin-json",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({metadata:u})});if(!m.ok)throw new Error(`Server error: ${m.status}`);const y=await m.json();const x=y.ipfsUri;_("Signing transaction...");I(75);const k=new mb(window.ethereum);const E=await k.getSigner();const A=new Ey(n.address,["function setContractURI(string uri) external"],E);const j=await A.setContractURI(x);await j.wait();const O=JSON.parse(localStorage.getItem("dreava_collections"))||[];const B=O.map(a=>a.address===n.address?{...a,image:o}:a);localStorage.setItem("dreava_collections",JSON.stringify(B));_("✅ Metadata updated successfully!");I(100)}catch(rL){console.error("Error updating metadata:",rL);_(`❌ Error: ${rL.message}`);I(0)}finally{S(!1)}};return at.jsxs("div",{className:"w-full mx-auto text-white pt-[8px] font-sans",children:[at.jsx("h2",{className:"text-[24px] font-bold bg-gradient-to-r from-blue-500 to-pink-500 bg-clip-text text-transparent leading-none mb-[6px]",children:"Edit Collection Metadata"}),at.jsxs("div",{className:"mb-[20px] flex gap-[24px] items-start",children:[at.jsxs("div",{className:"flex flex-col",children:[at.jsx("label",{className:"text-[13px] font-medium mb-[6px] text-white",children:"Cover Image"}),at.jsxs("label",{htmlFor:"cover-upload",className:"w-[160px] h-[144px] bg-zinc-900 border border-zinc-600 rounded-xl flex-shrink-0 flex items-center justify-center cursor-pointer overflow-hidden",children:[v?at.jsx("img",{src:v||n.firstNFTImage||o_,alt:"preview",className:"w-full h-full object-cover",onError:a=>{console.warn("⚠️ Cover preview failed to load:",a.target.src);n.firstNFTImage&&n.firstNFTImage!==a.target.src?a.target.src=n.firstNFTImage:a.target.src=o_}}):at.jsx("img",{src:"/src/assets/upload-icon.svg",alt:"icon",className:"w-8 h-8 opacity-70"}),at.jsx("input",{id:"cover-upload",type:"file",accept:"image/*",onChange:handleCoverChange,className:"hidden"})]})]}),at.jsxs("div",{className:"flex-1",children:[at.jsx("label",{className:"text-[13px] font-medium mb-[4px] block text-white",children:"Description"}),at.jsx("textarea",{value:a,onChange:n=>o(n.target.value),className:"w-full p-3 rounded-xl bg-zinc-800 border border-zinc-600 text-white h-[144px] placeholder:text-zinc-500 text-sm"})]})]}),at.jsx("label",{className:"text-[13px] font-medium mb-[4px] block text-white",children:"Website"}),at.jsx("input",{type:"text",value:i,onChange:n=>u(n.target.value),placeholder:"https://yourwebsite.com",className:"w-full p-3 mb-[16px] rounded-xl bg-zinc-800 border border-zinc-600 text-white placeholder:text-zinc-500 text-sm"}),at.jsx("label",{className:"text-[13px] font-medium mb-[4px] block text-white",children:"Royalty Recipient"}),at.jsx("input",{type:"text",value:g,onChange:n=>y(n.target.value),className:"w-full p-3 mb-[12px] rounded-xl bg-zinc-800 border border-zinc-600 text-white text-sm"}),at.jsx("label",{className:"text-[13px] font-medium mb-[4px] block text-white",children:"Royalty Percent (%)"}),at.jsx("input",{type:"number",min:0,max:100,value:d,onChange:n=>m(parseFloat(n.target.value)),className:"w-full p-3 mb-[20px] rounded-xl bg-zinc-800 border border-zinc-600 text-white text-sm"}),at.jsx("button",{onClick:handleSaveMetadata,disabled:E,className:"w-full py-[12px] mb-[24px] rounded-xl bg-gradient-to-r from-[#00A3FF] to-[#FF1CF7] text-white font-semibold text-sm transition-transform active:scale-95 shadow-md",children:E?"Saving...":"Save Metadata"}),O&&at.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-[9997]",children:at.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-lg max-w-lg w-full text-center relative animate-fadeIn",tabIndex:-1,autoFocus:!0,children:[at.jsx("button",{className:"absolute top-2 right-2 text-zinc-400 hover:text-red-400",onClick:()=>R(!1),children:at.jsx(Aj,{size:20})}),at.jsx("h3",{className:"text-2xl font-bold mb-4 bg-gradient-to-r from-pink-500 to-blue-500 bg-clip-text text-transparent",children:"Update Progress"}),at.jsxs("div",{className:"w-full bg-zinc-700 rounded-full h-5 mb-4 relative",children:[at.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-pink-500 h-5 rounded-full transition-all duration-500",style:{width:`${j}%`}}),at.jsxs("span",{className:"absolute inset-0 flex justify-center items-center text-sm text-white font-semibold",children:[j,"%"]})]}),at.jsx("p",{className:"text-sm text-white mb-2",children:A}),at.jsx("button",{onClick:()=>R(!1),className:"w-full mt-4 py-2 rounded bg-zinc-700 hover:bg-zinc-600 text-white text-sm",children:"Close"})]})})]})};const BannerSvg=({onClick:n,...a})=>at.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1298 321",className:"w-full h-full select-none",...a,children:[at.jsx("path",{fill:"#18181B",stroke:"#fff",strokeWidth:"0.21",d:"M3700.67 5315.2c0-4.89-9.98-8.86-22.27-8.86H2427.64c-12.29 0-22.27 3.97-22.27 8.86v108.87c0 4.89 9.98 8.86 22.27 8.86H3678.4c12.29 0 22.27-3.97 22.27-8.86z",transform:"matrix(1 0 0 2.51285 -2404.344 -13332.957)"}),at.jsxs("g",{onClick:n,style:{cursor:"pointer"},children:[at.jsx("path",{fill:"url(#_Linear1)",d:"M1151.78 37.052c0-7.517-22.03-13.619-49.17-13.619H315.136c-27.134 0-49.164 6.102-49.164 13.619v27.237c0 7.517 22.03 13.619 49.164 13.619h787.474c27.14 0 49.17-6.102 49.17-13.619z",transform:"matrix(.19462 0 0 .7026 509.37 217.825)"}),at.jsx("path",{fill:"#fff",d:"M580.64 243.342c0 .614.012 12.652.012 13.856 0 .695.56 1.256 1.25 1.256s1.249-.56 1.249-1.256l-.011-13.856a1.25 1.25 0 0 0-2.5 0\n           M571.246 255.048l.011 8.38c0 .69.56 1.252 1.25 1.252s1.249-.561 1.249-1.253l-.011-8.379c0-.692-.56-1.252-1.25-1.252s-1.25.56-1.25 1.252\n           M589.813 255.048c0 .371.012 7.651.012 8.38 0 .69.559 1.252 1.25 1.252.69 0 1.249-.561 1.249-1.253 0-.728-.012-8.008-.012-8.379 0-.692-.559-1.252-1.25-1.252-.69 0-1.249.56-1.249 1.252"}),at.jsx("path",{fill:"#fff",d:"m591.037 262.378-18.422.011a1.249 1.249 0 1 0 0 2.5c1.6 0 17.607-.012 18.422-.012a1.249 1.249 0 1 0 0-2.499\n           M581.062 243.84c.576.577 5.494 5.179 5.72 5.396.491.485 1.285.471 1.77-.02a1.253 1.253 0 0 0-.028-1.771c-.218-.211-5.115-4.792-5.684-5.361a1.24 1.24 0 0 0-1.764-.007 1.245 1.245 0 0 0-.014 1.763"}),at.jsx("path",{fill:"#fff",d:"M581.026 242.084c-.57.569-5.466 5.15-5.684 5.36a1.253 1.253 0 0 0-.028 1.771 1.253 1.253 0 0 0 1.77.021c.225-.217 5.143-4.82 5.72-5.396a1.245 1.245 0 0 0-.015-1.763 1.24 1.24 0 0 0-1.763.007"}),at.jsxs("text",{x:"89.146",y:"37.587",fill:"#fff",fontFamily:"'MalgunGothicBold', 'Malgun Gothic', sans-serif",fontSize:"20.831",fontWeight:"700",transform:"matrix(.87238 0 0 .87238 523.736 227.42)",style:{userSelect:"none",pointerEvents:"none"},children:["Uplo",at.jsx("tspan",{x:"135.802px 147.113px",y:"37.587px 37.587px",children:"ad"})," image"]})]}),at.jsx("text",{x:"89.146",y:"37.587",fill:"url(#_Linear2)",fontFamily:"'MalgunGothicBold', 'Malgun Gothic', sans-serif",fontSize:"17.828",fontWeight:"700",transform:"translate(-21.81 6.162)scale(2.16747)",children:"You’re reading this headline – so will everyone else!"}),at.jsx("text",{x:"89.146",y:"37.587",fill:"#fff",fontFamily:"'MalgunGothicBold', 'Malgun Gothic', sans-serif",fontSize:"17.828",fontWeight:"700",transform:"matrix(1.33415 0 0 1.33415 132.84 96.885)",children:"This is your one and only chance to make a dazzling first impression!"}),at.jsx("text",{x:"89.146",y:"37.587",fill:"#fff",fillOpacity:"0.5",fontFamily:"'MalgunGothic', 'Malgun Gothic', sans-serif",fontSize:"9.637",transform:"translate(186.088 127.78)scale(1.45279)",children:"Recommended: 1200x400px, JPG or PNG. Choose a bold, eye-catching visual that represents your story."}),at.jsxs("defs",{children:[at.jsxs("linearGradient",{id:"_Linear1",x1:"0",x2:"1",y1:"0",y2:"0",gradientTransform:"matrix(885.808 0 0 54.4748 265.972 50.67)",gradientUnits:"userSpaceOnUse",children:[at.jsx("stop",{offset:"0",stopColor:"#45B4EF"}),at.jsx("stop",{offset:"0.5",stopColor:"#572BF6"}),at.jsx("stop",{offset:"1",stopColor:"#D11399"})]}),at.jsxs("linearGradient",{id:"_Linear2",x1:"0",x2:"1",y1:"0",y2:"0",gradientTransform:"matrix(130.74 0 0 13.7626 89.86 30.933)",gradientUnits:"userSpaceOnUse",children:[at.jsx("stop",{offset:"0",stopColor:"#45B4EF"}),at.jsx("stop",{offset:"0.19",stopColor:"#572BF6"}),at.jsx("stop",{offset:"0.62",stopColor:"#B01AB2"}),at.jsx("stop",{offset:"1",stopColor:"#D11399"})]})]})]});const Banner=({imageUrl:n,onUpload:a,onRemove:o})=>{const i=ot.useRef(null);const handleFileSelect=n=>{const o=n.target.files[0];o&&a(o)};const handleDrop=n=>{n.preventDefault();const o=n.dataTransfer.files[0];o&&a(o)};const handleClick=()=>{i.current?.click()};return at.jsx("div",{className:"relative h-[320px] w-full rounded-2xl overflow-hidden shadow-lg mb-8 group",onDrop:handleDrop,onDragOver:n=>n.preventDefault(),children:n?at.jsxs(at.Fragment,{children:[at.jsx("img",{src:n,alt:"Banner",className:"w-full h-full object-cover"}),at.jsx("button",{onClick:o,className:"absolute top-2 right-2 z-10 bg-zinc-800 hover:bg-red-600 text-white rounded-full p-1 transition",title:"Delete banner",children:"✕"})]}):at.jsxs(at.Fragment,{children:[at.jsx("div",{className:"absolute inset-0 z-0",onClick:handleClick,children:at.jsx(BannerSvg,{className:"w-full h-full cursor-pointer select-none"})}),at.jsx("input",{ref:i,type:"file",accept:"image/*",onChange:handleFileSelect,className:"hidden"})]})})};const ManageCollection=()=>{const{address:n}=useParams();const a=useNavigate();const[o,i]=ot.useState(null);const[u,d]=ot.useState(null);ot.useEffect(()=>{const loadCollectionData=async()=>{const a=JSON.parse(localStorage.getItem("dreava_collections"))||[];const o=a.find(a=>a.address===n);if(o){i(o);o.banner&&d(o.banner);try{const a=new mb(window.ethereum);const o=new Ey(n,["function contractURI() public view returns (string)"],a);const u=await o.contractURI();if(u&&u.startsWith("ipfs://")){const n=getIpfsUrls(u);const a=await fetch(n[0]);const o=await a.json();i(n=>({...n,description:o.description||"",seller_fee_basis_points:o.seller_fee_basis_points||0,fee_recipient:o.fee_recipient||"",banner:n.banner||""}))}}catch(rL){console.error("Failed to fetch contract metadata:",rL)}}};loadCollectionData()},[n]);const updateCollectionBanner=a=>{const o=JSON.parse(localStorage.getItem("dreava_collections"))||[];const u=o.map(o=>o.address===n?{...o,banner:a}:o);localStorage.setItem("dreava_collections",JSON.stringify(u));i(n=>({...n,banner:a}))};const handleBannerUpload=async n=>{if(n)try{const a=new FormData;a.append("file",n);const o=await fetch("/api/pin-file",{method:"POST",body:a});if(!o.ok)throw new Error(`Upload failed: ${o.status}`);const i=await o.json();if(!i.gatewayUrl)throw new Error("No URL returned from server");d(i.gatewayUrl);updateCollectionBanner(i.gatewayUrl)}catch(rL){console.error("Banner upload error:",rL);alert("Failed to upload banner. Please try again.")}};const handleRemoveBanner=()=>{if(window.confirm("Are you sure you want to delete the banner?")){d(null);updateCollectionBanner(null)}};const goToEditNFTs=()=>a(`/edit-nfts/${n}`);const goToEditPhases=()=>a(`/edit-phases/${n}`);const goToManageWLs=()=>a(`/manage-wls/${n}`);return o?at.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-12 text-white font-sans",children:[at.jsx(Banner,{imageUrl:u,onUpload:handleBannerUpload,onRemove:handleRemoveBanner}),at.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[at.jsx("img",{src:o.cover||o.firstNFTImage||"/default-cover.png",alt:o.name,className:"w-16 h-16 rounded-xl object-cover border border-zinc-600/30",onError:n=>{console.warn("⚠️ Collection cover failed to load:",n.target.src);o.firstNFTImage&&o.firstNFTImage!==n.target.src?n.target.src=o.firstNFTImage:n.target.src="/default-cover.png"}}),at.jsxs("div",{children:[at.jsx("h1",{className:"text-2xl font-bold text-white",children:o.name}),at.jsx("p",{className:"text-zinc-400",children:o.address})]})]}),at.jsx(CollectionMetadataEditor,{collection:o}),at.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-10",children:[at.jsx("button",{onClick:goToEditPhases,className:"w-full py-3 rounded-lg bg-zinc-800 border border-zinc-600 hover:bg-zinc-700 transition",children:"Edit Phases"}),at.jsx("button",{onClick:goToManageWLs,className:"w-full py-3 rounded-lg bg-zinc-800 border border-zinc-600 hover:bg-zinc-700 transition",children:"Manage WLs"}),at.jsx("button",{onClick:goToEditNFTs,className:"w-full py-3 rounded-lg bg-zinc-800 border border-zinc-600 hover:bg-zinc-700 transition",children:"View NFTs"}),at.jsx(LaunchButtonWithChecklist,{collection:o})]})]}):at.jsx("div",{className:"text-center text-zinc-400 mt-20",children:"Collection not found."})};const UF=[{key:"Whitelist",enumValue:1},{key:"FCFS",enumValue:2},{key:"Public",enumValue:3}];const WF=["Public"];const fetchWithFallback=async n=>{for(const a of n)try{const n=await fetch(a);if(n.ok)return await n.json()}catch{}throw new Error("All IPFS gateways failed")};const PhaseSettingsWrapper=()=>{const{address:n}=useParams();const a=useNavigate();const[o,i]=ot.useState([]);const[u,d]=ot.useState([]);const[m,g]=ot.useState(!1);const[y,v]=ot.useState("");const[x,N]=ot.useState({visible:!1,message:"",type:"success"});const[k,E]=ot.useState(!1);const[S,A]=ot.useState(!1);ot.useEffect(()=>{if(x.visible){const n=setTimeout(()=>N(n=>({...n,visible:!1})),3e3);return()=>clearTimeout(n)}},[x.visible]);const showToast=(n,a="success")=>{N({visible:!0,message:n,type:a})};const checkCollectionStatus=async()=>{if(n)try{const o=new fb("https://dream-rpc.somnia.network/");const i=new Ey(n,vI,o);let u=!1;try{"function"==typeof i.initialized&&(u=await i.initialized())}catch(a){console.log("Contract not initialized yet")}E(u);console.log("Collection launch status:",u)}catch(a){console.error("Error checking collection status:",a)}};const handleStopSale=async()=>{if(n)try{A(!0);const a=new mb(window.ethereum);const o=await a.getSigner();const i=new Ey(n,vI,o);const u=await o.getAddress();const d=await i.isAdmin(u);const m=await i.owner();if(!d&&u.toLowerCase()!==m.toLowerCase()){showToast("❌ You do not have permission to stop this sale","error");return}const g=JSON.parse(localStorage.getItem(`phases_${n}`))||{};const y={};Object.keys(g).forEach(n=>{y[n]={...g[n],active:!1}});localStorage.setItem(`phases_${n}`,JSON.stringify(y));showToast("✅ Sale stopped successfully! All phases are now inactive.","success");E(!1);setTimeout(()=>{window.location.reload()},2e3)}catch(a){console.error("Error stopping sale:",a);showToast(`❌ Error stopping sale: ${a.message}`,"error")}finally{A(!1)}};ot.useEffect(()=>{const a=JSON.parse(localStorage.getItem("dreava_collections"))||[];const o=a.find(a=>a.address===n);o&&v(o.name);const u=JSON.parse(localStorage.getItem(`collection_${n}_phases`))||[];const m=u.some(n=>"Public"===n.key);if(!m){u.push({key:"Public",enumValue:3});localStorage.setItem(`collection_${n}_phases`,JSON.stringify(u))}i(u);const loadNFTs=async()=>{const a=JSON.parse(localStorage.getItem(`collection_${n}_nfts`))||[];const o=await Promise.all(a.map(async(n,a)=>{let o={...n,id:n.id??`nft-${a}`};o.image?.startsWith("ipfs://")&&(o.image=getIpfsUrls(o.image)[0]);if(!o.image&&o.tokenURI)try{const n=getIpfsUrls(o.tokenURI);const a=await fetchWithFallback(n);o.image=a.image?getIpfsUrls(a.image)[0]:o.image}catch{}return o}));const i=Array.from(new Map(o.map(n=>[n.id,n])).values());d(i);localStorage.setItem(`collection_${n}_nfts`,JSON.stringify(i))};loadNFTs();checkCollectionStatus()},[n]);const handleAddPhase=a=>{const u=[...o,a];i(u);localStorage.setItem(`collection_${n}_phases`,JSON.stringify(u));g(!1);showToast(`✅ Phase "${a.key}" added.`)};const handleRemovePhase=a=>{if(WF.includes(a)){showToast(`❌ Cannot remove required phase "${a}"`,"error");return}const u=o.filter(n=>n.key!==a);i(u);localStorage.setItem(`collection_${n}_phases`,JSON.stringify(u));showToast(`ℹ️ Phase "${a}" removed.`,"info")};const handleActivatePhase=a=>{const u=JSON.parse(localStorage.getItem(`phases_${n}`))||{};console.log("Current saved phases:",u);const d=UF.find(n=>n.enumValue===a)?.key;if(!d)return;const m=u[d]?.active;m&&Object.keys(u).forEach(n=>{if(n!==d&&u[n]?.active){u[n].active=!1;console.log(`Deactivating phase ${n} to activate ${d}`)}});const g=o.map(n=>n.key===d?{...n,active:u[d]?.active||!1}:n);console.log("Updated phases:",g);console.log("Phase settings:",u);i(g);localStorage.setItem(`collection_${n}_phases`,JSON.stringify(g));localStorage.setItem(`phases_${n}`,JSON.stringify(u));showToast(`🚀 Phase ${d} ${m?"activated":"deactivated"}!`)};const getSortedPhases=()=>{const n=[{key:"Whitelist",priority:1},{key:"FCFS",priority:2},{key:"Public",priority:3}];return n.filter(n=>o.some(a=>a.key===n.key)).map(n=>o.find(a=>a.key===n.key)).filter(Boolean)};const _=UF.filter(n=>!o.some(a=>a.key===n.key));const j=getSortedPhases();return at.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-8 text-white font-sans",children:[at.jsxs("div",{className:"flex justify-between items-center mb-6",children:[at.jsx("button",{onClick:()=>a(-1),className:"px-4 py-2 rounded bg-zinc-700 hover:bg-zinc-600 text-sm",children:"← Back"}),at.jsxs("div",{className:"flex gap-2",children:[k&&at.jsx("button",{onClick:handleStopSale,disabled:S,className:"px-4 py-2 rounded bg-red-600 hover:bg-red-700 text-sm flex items-center gap-2",children:S?at.jsxs(at.Fragment,{children:[at.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Stopping..."]}):at.jsxs(at.Fragment,{children:[at.jsx(O_,{size:16}),"Stop Sale"]})}),at.jsxs("div",{className:"relative",children:[at.jsx("button",{onClick:()=>g(!m),className:"px-4 py-2 rounded bg-gradient-to-r from-blue-500 to-pink-500 hover:opacity-90 text-sm",disabled:0===_.length||k,children:"+ Add Phase"}),m&&at.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-zinc-800 border border-zinc-600 rounded shadow-lg z-10",children:0===_.length?at.jsx("div",{className:"px-4 py-2 text-sm text-zinc-400",children:"All phases added"}):_.map(n=>at.jsx("button",{onClick:()=>handleAddPhase(n),className:"w-full text-left px-4 py-2 hover:bg-zinc-700 text-sm",children:n.key},n.key))})]})]})]}),at.jsxs("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-pink-500 to-blue-500 bg-clip-text text-transparent",children:["Configure Phases for ",y||"Your Collection"]}),at.jsx("p",{className:"text-zinc-400 mb-6",children:"Set prices, limits, and timings for each sale phase. Public phase is required. Only one phase can be active at a time."}),0===j.length?at.jsx("p",{className:"text-zinc-400",children:"No phases configured. Public phase will be added automatically."}):at.jsx(PhaseSettings,{collectionAddress:n,phases:j,onActivatePhase:handleActivatePhase,onRemovePhase:handleRemovePhase,nfts:u,isCollectionLaunched:k}),x.visible&&at.jsx("div",{className:"fixed bottom-24 right-4 p-4 rounded-lg shadow-lg max-w-xs animate-fadeIn cursor-pointer hover:opacity-100 opacity-90 z-50 "+("error"===x.type?"bg-red-800 text-white":"info"===x.type?"bg-blue-800 text-white":"bg-zinc-800 text-white"),children:at.jsx("p",{className:"text-sm",children:x.message})})]})};const ManageWLs=()=>{const{address:n}=useParams();const a=useNavigate();const[o,i]=ot.useState("Whitelist");const[u,d]=ot.useState([]);const[m,g]=ot.useState("");const[y,v]=ot.useState([]);const[x,N]=ot.useState(0);const[k,E]=ot.useState({visible:!1,message:"",type:"success"});ot.useEffect(()=>{if(k.visible){const n=setTimeout(()=>E(n=>({...n,visible:!1})),3e3);return()=>clearTimeout(n)}},[k.visible]);const showToast=(n,a="success")=>{E({visible:!0,message:n,type:a})};ot.useEffect(()=>{const a=JSON.parse(localStorage.getItem(`phases_${n}`))||{};N(a[o]?.allocated||0);const i=`${n}_${o}_whitelist`;const u=JSON.parse(localStorage.getItem(i))||[];v(u)},[n,o]);const handleFileUpload=n=>{const a=n.target.files[0];if(a){const n=new FileReader;n.onload=n=>{const a=n.target.result;const o=a.split(/\r?\n/).filter(Boolean);d(o)};n.readAsText(a)}};const handleManualInput=n=>{const a=n.target.value;console.log("🔍 === MANUAL INPUT DEBUG ===");console.log("Raw text:",a);console.log("Text length:",a.length);console.log("Text char codes:",Array.from(a).map(n=>n.charCodeAt(0)));const o=a.split(/\r?\n/).filter(Boolean);console.log("Split lines:",o);console.log("Lines count:",o.length);console.log("Each line:",o.map((n,a)=>({index:a,line:n,length:n.length,trimmed:n.trim()})));const i=o.map(n=>n.trim()).filter(n=>n.length>0).filter(n=>{try{getAddress(n);return!0}catch(a){console.warn("Invalid Ethereum address:",n,a.message);return!1}});console.log("Cleaned and validated lines:",i);console.log("🔍 === END MANUAL INPUT DEBUG ===");d(i)};const regenerateProofs=a=>{if("Public"===o||0===a.length)return;console.log("🌳 === MERKLE DEBUG ===");console.log("Input addresses:",a);console.log("Phase:",o);const{root:i,proofs:u}=generateMerkleData(a);console.log("Generated root:",i);console.log("Generated proofs for each address:");Object.entries(u).forEach(([n,a])=>{console.log(`  ${n}:`,a)});const d=`${n}_${o}_whitelist_proofs`;const m=`${n}_${o}_whitelist_root`;localStorage.setItem(d,JSON.stringify(u));localStorage.setItem(m,i);console.log("Merkle root:",i);console.log("Merkle proofs regenerated:",u);console.log("🌳 === END MERKLE DEBUG ===")};const handleSave=()=>{const a="Public"===o;const i=y.length+u.length;console.log("💾 === SAVE DEBUG ===");console.log("Phase:",o);console.log("Is public phase:",a);console.log("Allocated slots:",x);console.log("Saved addresses count:",y.length);console.log("New addresses count:",u.length);console.log("Total addresses:",i);console.log("New addresses:",u);console.log("Saved addresses:",y);const m=u.filter(n=>{try{getAddress(n);return!1}catch{return!0}});if(m.length>0){showToast(`❌ Invalid addresses found: ${m.join(", ")}`,"error");return}if(!a&&i>x){showToast(`❌ Too many addresses! Allocated: ${x}, Already saved: ${y.length}, New: ${u.length}`,"error");return}const g=Array.from(new Set([...y,...u]));console.log("Combined addresses (unique):",g);console.log("Combined count:",g.length);const N=`${n}_${o}_whitelist`;localStorage.setItem(N,JSON.stringify(g));v(g);d([]);showToast(`✅ Saved ${g.length} addresses for ${o}`);regenerateProofs(g);console.log("💾 === END SAVE DEBUG ===")};const S=y.filter(n=>n.includes(m));return at.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-8 pb-24 text-white font-sans",children:[at.jsx("button",{onClick:()=>a(-1),className:"px-4 py-2 rounded bg-zinc-700 hover:bg-zinc-600 text-sm mb-4",children:"← Back"}),at.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Manage Whitelists"}),at.jsxs("div",{className:"mb-6",children:[at.jsx("label",{className:"block mb-2 text-sm font-medium text-white",children:"Select Phase"}),at.jsxs("select",{value:o,onChange:n=>i(n.target.value),className:"w-full p-3 rounded-lg bg-zinc-800 border border-zinc-600 focus:border-blue-500 focus:outline-none transition-colors text-white",children:[at.jsx("option",{value:"Whitelist",children:"Whitelist"}),at.jsx("option",{value:"FCFS",children:"FCFS"})]})]}),at.jsxs("div",{className:"mb-6 p-4 bg-zinc-900 rounded-lg border border-zinc-700",children:[at.jsx("h3",{className:"text-lg font-semibold mb-3 text-white",children:"Phase Information"}),at.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[at.jsxs("div",{className:"text-center p-3 bg-zinc-800 rounded-lg",children:[at.jsx("div",{className:"text-zinc-400 mb-1",children:"Allocated Slots"}),at.jsx("div",{className:"text-xl font-bold text-blue-400",children:"Public"===o?"∞":x})]}),at.jsxs("div",{className:"text-center p-3 bg-zinc-800 rounded-lg",children:[at.jsx("div",{className:"text-zinc-400 mb-1",children:"Saved Addresses"}),at.jsx("div",{className:"text-xl font-bold text-green-400",children:y.length})]}),at.jsxs("div",{className:"text-center p-3 bg-zinc-800 rounded-lg",children:[at.jsx("div",{className:"text-zinc-400 mb-1",children:"Remaining Slots"}),at.jsx("div",{className:"text-xl font-bold text-pink-400",children:"Public"===o?"∞":Math.max(x-y.length,0)})]})]})]}),at.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[at.jsxs("div",{children:[at.jsx("h2",{className:"text-xl font-bold mb-4 text-white",children:"Upload Addresses"}),at.jsxs("div",{className:"mb-4",children:[at.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Upload Addresses"}),at.jsxs("div",{className:"relative",children:[at.jsx("input",{type:"file",accept:".csv,.txt",onChange:handleFileUpload,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",id:"file-upload"}),at.jsxs("label",{htmlFor:"file-upload",className:"flex items-center justify-center w-full h-12 px-4 py-2 rounded-lg bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 hover:opacity-90 text-white font-semibold text-sm cursor-pointer transition-all duration-200 border border-transparent hover:border-white/20",children:[at.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:at.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),"Upload .CSV/.TXT"]})]})]}),at.jsxs("div",{className:"mb-4",children:[at.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Or Paste Addresses"}),at.jsx("textarea",{rows:6,placeholder:"Paste addresses (one per line)",onChange:handleManualInput,className:"w-full p-3 rounded-lg bg-zinc-800 border border-zinc-600 focus:border-blue-500 focus:outline-none transition-colors"})]}),at.jsx("button",{onClick:handleSave,className:"w-full py-3 rounded-lg bg-gradient-to-r from-blue-500 to-pink-500 hover:opacity-90 text-white font-semibold transition-all duration-200",children:"Save List"})]}),at.jsxs("div",{children:[at.jsx("h2",{className:"text-xl font-bold mb-4 text-white",children:"Saved Addresses"}),at.jsxs("div",{className:"mb-4",children:[at.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Search Addresses"}),at.jsx("input",{type:"text",placeholder:"Search address",value:m,onChange:n=>g(n.target.value),className:"w-full p-3 rounded-lg bg-zinc-800 border border-zinc-600 focus:border-blue-500 focus:outline-none transition-colors text-sm"})]}),at.jsx("div",{className:"bg-zinc-900 rounded-lg border border-zinc-700 max-h-64 overflow-y-auto",children:0===S.length?at.jsx("div",{className:"p-4 text-center text-zinc-500 text-sm",children:"No matching addresses"}):at.jsx("ul",{className:"text-sm",children:S.map((a,i)=>at.jsxs("li",{className:"flex justify-between items-center border-b border-zinc-700 py-3 px-4 hover:bg-zinc-800 transition-colors",children:[at.jsx("span",{className:"font-mono text-xs",children:a}),at.jsx("button",{onClick:()=>{const i=y.filter(n=>n!==a);v(i);localStorage.setItem(`${n}_${o}_whitelist`,JSON.stringify(i));regenerateProofs(i);showToast(`✅ Removed address: ${a}`)},className:"text-xs text-red-400 hover:text-red-300 hover:underline transition-colors",children:"Remove"})]},i))})})]})]}),k.visible&&at.jsx("div",{className:"fixed bottom-24 right-4 p-4 rounded-lg shadow-lg max-w-xs animate-fadeIn cursor-pointer hover:opacity-100 opacity-90 z-50 "+("error"===k.type?"bg-red-800 text-white":"bg-zinc-800 text-white"),children:at.jsx("p",{className:"text-sm",children:k.message})})]})};const EditNFTs=()=>{const{address:n}=useParams();const a=useNavigate();const[o,i]=ot.useState([]);const[u,d]=ot.useState({});const[m,g]=ot.useState([]);const[y,v]=ot.useState("all");const[x,N]=ot.useState("auto");const[k,E]=ot.useState({totalSupply:0,minted:0,remaining:0,revenue:"0 STT",phaseBreakdown:[],blockchainStats:null});const[S,A]=ot.useState(!1);const[_,j]=ot.useState(!0);const[I,O]=ot.useState(!1);const[R,B]=ot.useState(!1);const[M,z]=ot.useState(null);const[L,D]=ot.useState(!1);const[W,H]=ot.useState(null);const autoDistributeNFTs=(n,a)=>{if(!n.length||!a)return n;console.log("🔄 Starting auto-distribution with:",{totalNFTs:n.length,phases:Object.keys(a),phaseAllocations:Object.entries(a).map(([n,a])=>({key:n,allocated:a.allocated||0,active:a.active}))});let o=0;const i=[...n];const u=["Whitelist","FCFS","Public"];for(const d of u){const n=a[d];if(!n||!n.active){console.log(`⏭️ Skipping ${d} - not active or not found`);continue}const u=n.allocated||0;console.log(`📊 Processing ${d}: allocated ${u} NFTs, starting from index ${o}`);for(let a=0;a<u&&o<i.length;a++){const a=i[o];if(a){i[o]={...a,phaseKey:d,price:n.price||0,distributionType:"auto",originalIndex:o};console.log(`✅ Assigned NFT ${o} (${a.name}) to ${d} phase`)}o++}}for(let d=o;d<i.length;d++){const n=i[d];if(n){i[d]={...n,phaseKey:"unassigned",price:0,distributionType:"auto",originalIndex:d};console.log(`⚠️ NFT ${d} (${n.name}) marked as unassigned`)}}console.log("🎉 Auto-distribution complete. Summary:",{totalProcessed:i.length,byPhase:Object.entries(a).reduce((n,[a,o])=>{n[a]=i.filter(n=>n.phaseKey===a).length;return n},{}),unassigned:i.filter(n=>"unassigned"===n.phaseKey).length});return i};const validateDistribution=(n,a)=>{const o=Object.values(a).reduce((n,a)=>n+(a.allocated||0),0);const i=n.length;const u=n.filter(n=>"unassigned"!==n.phaseKey).length;console.log("🔍 Distribution validation:",{totalNFTs:i,totalAllocated:o,assignedNFTs:u,unassigned:i-u,phases:Object.entries(a).map(([a,o])=>({key:a,allocated:o.allocated||0,actual:n.filter(n=>n.phaseKey===a).length}))});if(o!==u){console.warn("⚠️ Distribution mismatch detected!");console.warn(`Expected ${o} assigned NFTs, but found ${u}`)}return{isValid:o===u,totalNFTs:i,totalAllocated:o,assignedNFTs:u,unassigned:i-u}};const calculateCollectionStats=async(n,a)=>{const o=n.length;const i=await fetchBlockchainStats();const u=i?i.totalSupply:0;const d=o-u;const m=i?i.currentPhase:0;const g=await calculateTotalProfit();const y=Object.entries(a).map(([a,i])=>{const u=n.filter(n=>n.phaseKey===a);const d=u.length*(i.price||0);return{name:a,allocated:i.allocated||0,actual:u.length,price:i.price||0,revenue:d,percentage:o>0?u.length/o*100:0}});const v=y.reduce((n,a)=>n+a.revenue,0);const x=validateDistribution(n,a);return{totalSupply:o,minted:u,remaining:d,currentPhase:m,revenue:`${v} STT`,phaseBreakdown:y,validation:x,blockchainStats:i,profitData:g}};const getPhaseColor=n=>{switch(n){case"Whitelist":return"border-blue-500 bg-blue-50";case"FCFS":return"border-purple-500 bg-purple-50";case"Public":return"border-pink-500 bg-pink-50";default:return"border-gray-300 bg-gray-50"}};const getIpfsUrls2=n=>{if(!n)return[];if(n.startsWith("ipfs://")){const a=n.replace("ipfs://","");return[`https://gateway.pinata.cloud/ipfs/${a}`,`https://ipfs.io/ipfs/${a}`,`https://cloudflare-ipfs.com/ipfs/${a}`]}return[n]};const fetchWithFallback2=async n=>{for(const a of n)try{const n=await fetch(a);if(n.ok)return await n.json()}catch{}throw new Error("All IPFS gateways failed")};ot.useEffect(()=>{const fetchNFTs=async()=>{console.log("🔍 Fetching NFTs for collection:",n);const a=JSON.parse(localStorage.getItem(`collection_${n}_nfts`))||[];console.log("📦 Found stored NFTs:",a.length);if(0===a.length){console.log("⚠️ No NFTs found in localStorage for collection:",n);i([]);return}console.log("🖼️ Processing NFT images...");const o=await Promise.all(a.map(async(n,o)=>{console.log(`📝 Processing NFT ${o+1}/${a.length}:`,n.name);try{if(n.image?.startsWith("ipfs://")){console.log(`🔄 Converting IPFS image for ${n.name}`);return{...n,image:getIpfsUrls2(n.image)[0]}}if(!n.image&&n.tokenURI){console.log(`🔄 Fetching metadata for ${n.name} from tokenURI`);try{const a=getIpfsUrls2(n.tokenURI);const o=await fetchWithFallback2(a);console.log(`✅ Metadata fetched for ${n.name}:`,o.name);return{...n,image:o.image?getIpfsUrls2(o.image)[0]:n.image}}catch(rL){console.error(`❌ Failed to fetch metadata for ${n.name}:`,rL.message);return n}}console.log(`✅ NFT ${n.name} processed successfully`);return n}catch(rL){console.error(`❌ Error processing NFT ${n.name}:`,rL);return n}}));console.log("🎉 All NFTs processed. Setting state with:",o.length,"NFTs");i(o);localStorage.setItem(`collection_${n}_nfts`,JSON.stringify(o))};fetchNFTs();const a=JSON.parse(localStorage.getItem(`phases_${n}`))||{};console.log("📋 Found phases:",a);d(a);checkCollectionLaunchStatus()},[n]);ot.useEffect(()=>{const updateStats=async()=>{if(o.length>0&&Object.keys(u).length>0){console.log("🔄 Auto-distributing NFTs based on phases...");const a=autoDistributeNFTs(o,u);i(a);localStorage.setItem(`collection_${n}_nfts`,JSON.stringify(a));const d=await calculateCollectionStats(a,u);E(d)}};updateStats()},[u,n]);const handleDeleteNFT=a=>{const u=o.filter((n,o)=>o!==a);i(u);localStorage.setItem(`collection_${n}_nfts`,JSON.stringify(u));D(!1);H(null)};const handlePreview=()=>{a(`/preview/${n}`)};const checkCollectionLaunchStatus=async()=>{try{j(!0);const a=new mb(window.ethereum);const o=new Ey(n,["function contractURI() public view returns (string)","function baseTokenURI() public view returns (string)","function maxSupply() public view returns (uint256)","function phases(uint256) public view returns (uint256 start, uint256 end, uint256 price, uint256 maxPerWallet, bytes32 merkleRoot, bool isPublic)","function phases(uint256) public view returns (tuple(uint256,uint256,uint256,uint256,bytes32,bool))"],a);const i=await o.contractURI();const u=await o.baseTokenURI();const d=await o.maxSupply();const m=i&&""!==i&&u&&""!==u;console.log("🔍 Collection launch status check:",{address:n,contractURI:i||"empty",baseTokenURI:u||"empty",maxSupply:d.toString(),isLaunched:m});A(m);return m}catch(a){console.error("❌ Error checking collection launch status:",a);A(!1);return!1}finally{j(!1)}};const fetchBlockchainStats=async()=>{try{const o=new mb(window.ethereum);const i=new Ey(n,["function totalSupply() public view returns (uint256)","function maxSupply() public view returns (uint256)","function phases(uint256) public view returns (uint256 start, uint256 end, uint256 price, uint256 maxPerWallet, bytes32 merkleRoot, bool isPublic)","function mintedPerWallet(address, uint256) public view returns (uint256)","function currentPhase() public view returns (uint256)","function owner() public view returns (address)","function balanceOf(address) public view returns (uint256)"],o);const u=await i.totalSupply();const d=await i.maxSupply();const m=3;const g=[];let y=-1;const v=Math.floor(Date.now()/1e3);for(let n=0;n<m;n++)try{const a=await i.phases(n);const o={phaseId:n,start:Number(a.start),end:Number(a.end),price:formatUnits(a.price,18),maxPerWallet:Number(a.maxPerWallet),isPublic:a.isPublic,merkleRoot:a.merkleRoot,isActive:v>=Number(a.start)&&v<=Number(a.end)};g.push(o);o.isActive&&(y=n)}catch(a){console.log(`Phase ${n} not found or not accessible`)}if(-1===y)for(let n=0;n<g.length;n++)if(v<g[n].start){y=n;break}console.log("🔗 Blockchain stats fetched:",{totalSupply:u.toString(),maxSupply:d.toString(),currentActivePhase:y,currentTime:v,phaseStats:g.map(n=>({phaseId:n.phaseId,start:new Date(1e3*n.start).toISOString(),end:new Date(1e3*n.end).toISOString(),isActive:n.isActive,price:n.price}))});return{totalSupply:Number(u),maxSupply:Number(d),remaining:Number(d)-Number(u),currentPhase:y,phaseStats:g}}catch(a){console.error("❌ Error fetching blockchain stats:",a);return null}};const calculateTotalProfit=async()=>{try{const o=new mb(window.ethereum);const i=new Ey(n,["function totalSupply() public view returns (uint256)","function phases(uint256) public view returns (uint256 start, uint256 end, uint256 price, uint256 maxPerWallet, bytes32 merkleRoot, bool isPublic)","function mintedPerWallet(address, uint256) public view returns (uint256)"],o);const u=await i.totalSupply();const d=Number(u);if(0===d)return{totalProfit:0,profitInSTT:"0 STT",profitInUSD:"$0",averagePrice:0};const m=[];const g=3;for(let n=0;n<g;n++)try{const a=await i.phases(n);m.push({phaseId:n,price:formatUnits(a.price,18)})}catch(a){console.log(`Phase ${n} not accessible`)}const y=m.length>0?m.reduce((n,a)=>n+parseFloat(a.price),0)/m.length:0;const v=d*y;const x=.1;const N=v*x;console.log("💰 Profit calculation:",{mintedCount:d,averagePrice:y,totalProfit:v,profitInUSD:N,phasePrices:m});return{totalProfit:v,profitInSTT:`${v.toFixed(2)} STT`,profitInUSD:`$${N.toFixed(2)}`,averagePrice:y,mintedCount:d}}catch(a){console.error("❌ Error calculating profit:",a);return{totalProfit:0,profitInSTT:"0 STT",profitInUSD:"$0",averagePrice:0,mintedCount:0}}};return at.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-8 pb-24",children:[at.jsxs("div",{className:"flex justify-between items-center mb-6",children:[at.jsx("button",{onClick:()=>a(-1),className:"px-4 py-2 rounded bg-zinc-700 hover:bg-zinc-600 text-sm",children:"Back"}),at.jsxs("div",{className:"flex gap-2",children:[at.jsx("button",{onClick:async()=>{const n=await calculateCollectionStats(o,u);E(n)},className:"px-4 py-2 rounded bg-blue-600 hover:bg-blue-500 text-sm",children:"Reveal"}),at.jsx("button",{onClick:handlePreview,className:"px-4 py-2 rounded bg-gradient-to-r from-blue-500 to-pink-500 hover:opacity-90 text-sm",children:"Preview Storefront"})]})]}),_?at.jsx("div",{className:"mb-6 p-4 bg-zinc-900 rounded-lg border border-zinc-700",children:at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),at.jsx("span",{className:"text-sm text-zinc-400",children:"Checking collection status..."})]})}):S?at.jsxs("div",{className:"mb-6 p-4 bg-yellow-900/20 rounded-lg border border-yellow-500",children:[at.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[at.jsx("span",{className:"text-yellow-400 text-lg",children:"⚠️"}),at.jsx("span",{className:"text-yellow-400 font-semibold",children:"Collection Already Launched"})]}),at.jsxs("div",{className:"text-sm text-yellow-300",children:[at.jsx("p",{children:"This collection has been launched and is now live. NFT distribution cannot be changed as it affects the minting process."}),at.jsx("p",{className:"mt-2",children:"• NFT phases are locked to prevent minting conflicts"}),at.jsx("p",{children:"• Only viewing and analytics are available"}),at.jsx("p",{children:"• To make changes, you would need to create a new collection"})]})]}):at.jsxs("div",{className:"mb-6 p-4 bg-blue-900/20 rounded-lg border border-blue-500",children:[at.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[at.jsx("span",{className:"text-blue-400 text-lg",children:"📝"}),at.jsx("span",{className:"text-blue-400 font-semibold",children:"Collection Not Launched"})]}),at.jsxs("div",{className:"text-sm text-blue-300",children:[at.jsx("p",{children:"You can still configure NFT distribution and phases before launching the collection."}),at.jsx("p",{className:"mt-2",children:"• NFT distribution is automatically updated when you change phase settings"}),at.jsx("p",{children:"• Edit individual NFT metadata (name, description, image)"}),at.jsx("p",{children:"• Configure phase settings (prices, allocations, timing)"}),at.jsx("p",{children:"• Once launched, NFT distribution becomes locked"})]})]}),at.jsxs("div",{className:"mb-6 rounded-lg border "+(I?"bg-purple-900/10 border-purple-500 shadow-purple-500/20":"bg-zinc-800 border-zinc-600"),children:[at.jsx("div",{onClick:()=>O(!I),className:"p-4 border-b border-zinc-700/50 cursor-pointer transition-all duration-200 hover:scale-[1.01] hover:shadow-lg "+(I?"hover:bg-purple-900/20":"hover:bg-zinc-700 hover:border-zinc-500"),children:at.jsxs("div",{className:"flex justify-between items-center",children:[at.jsxs("div",{className:"flex gap-6 text-sm",children:[at.jsxs("div",{children:[at.jsx("span",{className:"text-zinc-400",children:"Total NFTs:"}),at.jsx("span",{className:"text-white font-semibold ml-1",children:o.length})]}),at.jsxs("div",{children:[at.jsx("span",{className:"text-zinc-400",children:"Assigned:"}),at.jsx("span",{className:"text-green-400 font-semibold ml-1",children:o.filter(n=>"unassigned"!==n.phaseKey).length})]}),at.jsxs("div",{children:[at.jsx("span",{className:"text-zinc-400",children:"Unassigned:"}),at.jsx("span",{className:"text-red-400 font-semibold ml-1",children:o.filter(n=>"unassigned"===n.phaseKey).length})]}),at.jsxs("div",{className:"flex items-center gap-1",children:[at.jsx("span",{className:"text-zinc-400",children:"Status:"}),k.validation?.isValid?at.jsx("span",{className:"text-green-400 text-xs",children:"✅ Complete"}):at.jsx("span",{className:"text-yellow-400 text-xs",children:"⚠️ Incomplete"})]})]}),at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsx("div",{className:"text-xs text-zinc-500",children:I?"Click to hide detailed analytics":"Click to show detailed analytics"}),at.jsx("span",{className:"text-xs transition-transform duration-200 "+(I?"rotate-180":""),children:"▼"})]})]})}),I&&at.jsxs("div",{className:"p-4 animate-slideDown",children:[at.jsxs("div",{className:"flex justify-between items-center mb-4",children:[at.jsx("h3",{className:"text-lg font-semibold text-white",children:"Detailed Analytics"}),at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsx("span",{className:"text-xs text-zinc-500",children:k.blockchainStats?"🔗 Live blockchain data":"📱 Local data"}),at.jsxs("span",{className:"text-xs text-zinc-400",children:["Last updated: ",(new Date).toLocaleTimeString()]})]})]}),k.validation&&at.jsxs("div",{className:"mb-4 p-3 rounded-lg border "+(k.validation.isValid?"bg-green-900/20 border-green-500":"bg-red-900/20 border-red-500"),children:[at.jsx("div",{className:"flex items-center gap-2 mb-2",children:at.jsxs("span",{className:"text-sm font-semibold "+(k.validation.isValid?"text-green-400":"text-red-400"),children:[k.validation.isValid?"✅":"⚠️"," Distribution Status"]})}),at.jsxs("div",{className:"text-xs text-zinc-400",children:[at.jsxs("div",{children:["Total NFTs: ",k.validation.totalNFTs]}),at.jsxs("div",{children:["Allocated: ",k.validation.assignedNFTs]}),at.jsxs("div",{children:["Unassigned: ",k.validation.unassigned]}),!k.validation.isValid&&at.jsx("div",{className:"text-red-400 mt-1",children:"⚠️ Distribution mismatch! Some NFTs are not properly assigned to phases."})]}),at.jsxs("div",{className:"mt-3 pt-3 border-t border-zinc-700/50",children:[at.jsx("div",{className:"text-xs text-zinc-400 mb-2",children:"Collection Quality Score:"}),(()=>{const n=o.length;const a=o.filter(n=>n.description).length;const i=o.filter(n=>n.attributes?.length>0).length;const u=o.filter(n=>n.phaseKey&&"unassigned"!==n.phaseKey).length;const d=Math.round(100*(a/n*.3+i/n*.4+u/n*.3));const getQualityColor=n=>n>=80?"text-green-400":n>=60?"text-yellow-400":"text-red-400";return at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsxs("span",{className:`text-sm font-semibold ${getQualityColor(d)}`,children:[d,"/100"]}),at.jsx("div",{className:"flex-1 bg-zinc-700 rounded-full h-2",children:at.jsx("div",{className:"h-2 rounded-full transition-all "+(d>=80?"bg-green-500":d>=60?"bg-yellow-500":"bg-red-500"),style:{width:`${d}%`}})}),at.jsx("span",{className:"text-xs text-zinc-500",children:d>=80?"Excellent":d>=60?"Good":"Needs Work"})]})})()]}),k.blockchainStats?.phaseStats&&at.jsxs("div",{className:"mt-3 pt-3 border-t border-zinc-700/50",children:[at.jsx("div",{className:"text-xs text-zinc-400 mb-2",children:"Blockchain Phase Status:"}),k.blockchainStats.phaseStats.map((n,a)=>at.jsxs("div",{className:"text-xs text-zinc-400 mb-1",children:[at.jsxs("span",{className:"font-semibold "+(n.isActive?"text-green-400":"text-zinc-500"),children:["Phase ",n.phaseId," (",0===a?"Whitelist":1===a?"FCFS":"Public","):"]}),at.jsxs("span",{className:"ml-2",children:[n.isActive?"🟢 Active":"⚪ Inactive"," | Price: ",n.price," STT |",new Date(1e3*n.start).toLocaleDateString()," - ",new Date(1e3*n.end).toLocaleDateString()]})]},a))]})]}),at.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 text-sm mb-4",children:[at.jsxs("div",{className:"text-center p-3 bg-zinc-800 rounded-lg",children:[at.jsx("div",{className:"text-zinc-400 mb-1",children:"Total Supply"}),at.jsx("div",{className:"text-xl font-bold text-blue-400",children:k.totalSupply}),at.jsxs("div",{className:"text-xs text-zinc-500",children:["Max: ",k.blockchainStats?.maxSupply||"N/A"]})]}),at.jsxs("div",{className:"text-center p-3 bg-zinc-800 rounded-lg",children:[at.jsx("div",{className:"text-zinc-400 mb-1",children:"Minted"}),at.jsx("div",{className:"text-xl font-bold text-green-400",children:k.minted}),at.jsxs("div",{className:"text-xs text-zinc-500",children:[k.totalSupply>0?(k.minted/k.totalSupply*100).toFixed(1):0,"% sold"]})]}),at.jsxs("div",{className:"text-center p-3 bg-zinc-800 rounded-lg",children:[at.jsx("div",{className:"text-zinc-400 mb-1",children:"Remaining"}),at.jsx("div",{className:"text-xl font-bold text-pink-400",children:k.remaining}),at.jsx("div",{className:"text-xs text-zinc-500",children:"Available to mint"})]}),at.jsxs("div",{className:"text-center p-3 bg-zinc-800 rounded-lg",children:[at.jsx("div",{className:"text-zinc-400 mb-1",children:"Current Phase"}),at.jsx("div",{className:"text-xl font-bold text-yellow-400",children:0===k.currentPhase?"Whitelist":1===k.currentPhase?"FCFS":2===k.currentPhase?"Public":-1===k.currentPhase?"None":"N/A"}),at.jsx("div",{className:"text-xs text-zinc-500",children:k.currentPhase>=0?`Phase ${k.currentPhase}`:"No active phase"})]}),at.jsxs("div",{className:"text-center p-3 bg-zinc-800 rounded-lg",children:[at.jsx("div",{className:"text-zinc-400 mb-1",children:"Total Profit"}),at.jsx("div",{className:"text-xl font-bold text-emerald-400",children:k.profitData?.profitInSTT||"0 STT"}),at.jsx("div",{className:"text-xs text-zinc-500",children:k.profitData?.profitInUSD||"$0"})]})]}),at.jsxs("div",{children:[at.jsx("h4",{className:"text-md font-semibold mb-2 text-white",children:"Phase Distribution"}),at.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:k.phaseBreakdown.map(n=>at.jsxs("div",{className:"p-3 bg-zinc-800 rounded-lg",children:[at.jsxs("div",{className:"flex justify-between items-center mb-1",children:[at.jsx("span",{className:"font-semibold text-white",children:n.name}),at.jsxs("span",{className:"text-sm text-zinc-400",children:[n.percentage.toFixed(1),"%"]})]}),at.jsxs("div",{className:"text-sm text-zinc-400",children:[n.actual," / ",n.allocated," NFTs"]}),at.jsxs("div",{className:"text-sm text-zinc-400",children:[n.price," STT each"]}),at.jsxs("div",{className:"text-sm text-green-400 font-semibold",children:[n.revenue," STT total"]})]},n.name))})]})]})]}),at.jsxs("div",{className:"mb-4 flex gap-4",children:[at.jsxs("button",{onClick:()=>v("all"),className:`px-4 py-2 rounded ${"all"===y?"bg-zinc-700":"bg-zinc-800"} text-sm`,children:["All (",o.length,")"]}),at.jsxs("button",{onClick:()=>v("Whitelist"),className:`px-4 py-2 rounded ${"Whitelist"===y?"bg-blue-600":"bg-zinc-800"} text-sm`,children:["Whitelist (",o.filter(n=>"Whitelist"===n.phaseKey).length,")"]}),at.jsxs("button",{onClick:()=>v("FCFS"),className:`px-4 py-2 rounded ${"FCFS"===y?"bg-purple-600":"bg-zinc-800"} text-sm`,children:["FCFS (",o.filter(n=>"FCFS"===n.phaseKey).length,")"]}),at.jsxs("button",{onClick:()=>v("Public"),className:`px-4 py-2 rounded ${"Public"===y?"bg-pink-600":"bg-zinc-800"} text-sm`,children:["Public (",o.filter(n=>"Public"===n.phaseKey).length,")"]}),at.jsxs("button",{onClick:()=>v("unassigned"),className:`px-4 py-2 rounded ${"unassigned"===y?"bg-gray-600":"bg-zinc-800"} text-sm`,children:["Unassigned (",o.filter(n=>"unassigned"===n.phaseKey).length,")"]})]}),at.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:o.map((n,a)=>"all"!==y&&n.phaseKey!==y?null:at.jsxs("div",{className:`relative bg-zinc-900 rounded-xl border-2 p-3 ${getPhaseColor(n.phaseKey)}`,children:[at.jsx("img",{src:n.image?.replace("ipfs://","https://ipfs.io/ipfs/"),alt:n.name,className:"rounded mb-2 w-full h-40 object-cover"}),at.jsx("h3",{className:"text-sm font-semibold mb-1",children:n.name}),at.jsxs("div",{className:"mb-2",children:[at.jsxs("div",{className:"text-xs text-zinc-400 mb-1",children:[at.jsx("span",{className:"font-semibold",children:"Phase:"})," ",n.phaseKey||"Unassigned"]}),at.jsxs("div",{className:"text-xs text-zinc-400 mb-1",children:[at.jsx("span",{className:"font-semibold",children:"Price:"})," ",n.price||0," STT"]}),at.jsxs("div",{className:"text-xs text-zinc-400 mb-1",children:[at.jsx("span",{className:"font-semibold",children:"Type:"})," ",n.distributionType||"auto"]}),at.jsxs("div",{className:"text-xs text-zinc-500 mb-2",children:[at.jsx("span",{className:"font-semibold",children:"Index:"})," ",a]})]}),at.jsx("div",{className:"flex justify-between items-center",children:at.jsxs("div",{className:"flex gap-1",children:[at.jsx("button",{onClick:()=>{z(n);B(!0)},className:"px-2 py-1 rounded text-xs bg-blue-600 hover:bg-blue-500 text-white",title:"View NFT details",children:"Details"}),at.jsx("button",{onClick:()=>{H({nft:n,index:a});D(!0)},disabled:S,className:"px-2 py-1 rounded text-xs text-white "+(S?"bg-zinc-700 text-zinc-400 cursor-not-allowed":"bg-red-600 hover:bg-red-500"),title:"Delete NFT from collection",children:"Delete"})]})})]},n.id))}),R&&M&&at.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50",children:at.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-lg max-w-md w-full text-center animate-fadeIn relative",children:[at.jsx("button",{className:"absolute top-2 right-2 text-zinc-400 hover:text-red-400",onClick:()=>B(!1),children:"✕"}),at.jsx("h3",{className:"text-2xl font-bold mb-4 bg-gradient-to-r from-[#FF0080] to-[#00A3FF] bg-clip-text text-transparent",children:"NFT Details"}),at.jsxs("div",{className:"mb-4",children:[at.jsx("img",{src:M.image?.replace("ipfs://","https://ipfs.io/ipfs/"),alt:M.name,className:"w-32 h-32 object-cover rounded-lg mx-auto mb-3"}),at.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:M.name})]}),at.jsxs("div",{className:"text-left text-sm space-y-2 mb-4",children:[at.jsxs("div",{className:"flex justify-between",children:[at.jsx("span",{className:"text-zinc-400",children:"Phase:"}),at.jsx("span",{className:"text-white font-medium",children:M.phaseKey||"Unassigned"})]}),at.jsxs("div",{className:"flex justify-between",children:[at.jsx("span",{className:"text-zinc-400",children:"Price:"}),at.jsxs("span",{className:"text-white font-medium",children:[M.price||0," STT"]})]}),at.jsxs("div",{className:"flex justify-between",children:[at.jsx("span",{className:"text-zinc-400",children:"Distribution:"}),at.jsx("span",{className:"text-white font-medium",children:M.distributionType||"auto"})]}),M.description&&at.jsxs("div",{className:"mt-3 pt-3 border-t border-zinc-700",children:[at.jsx("span",{className:"text-zinc-400 block mb-1",children:"Description:"}),at.jsx("span",{className:"text-white text-sm",children:M.description})]}),M.attributes&&M.attributes.length>0&&at.jsxs("div",{className:"mt-3 pt-3 border-t border-zinc-700",children:[at.jsxs("span",{className:"text-zinc-400 block mb-2",children:["Attributes (",M.attributes.length,"):"]}),at.jsx("div",{className:"space-y-1",children:M.attributes.map((n,a)=>at.jsxs("div",{className:"flex justify-between text-xs",children:[at.jsxs("span",{className:"text-zinc-400",children:[n.trait_type,":"]}),at.jsx("span",{className:"text-white",children:n.value})]},a))})]})]}),at.jsx("button",{onClick:()=>B(!1),className:"w-full py-2 rounded bg-zinc-700 hover:bg-zinc-600 text-white text-sm",children:"Close"})]})}),L&&W&&at.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50",children:at.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-lg max-w-md w-full text-center animate-fadeIn relative",children:[at.jsx("button",{className:"absolute top-2 right-2 text-zinc-400 hover:text-red-400",onClick:()=>{D(!1);H(null)},children:"✕"}),at.jsx("h3",{className:"text-2xl font-bold mb-4 bg-gradient-to-r from-red-500 to-pink-500 bg-clip-text text-transparent",children:"⚠️ Delete NFT"}),at.jsxs("div",{className:"mb-4",children:[at.jsx("img",{src:W.nft.image?.replace("ipfs://","https://ipfs.io/ipfs/"),alt:W.nft.name,className:"w-24 h-24 object-cover rounded-lg mx-auto mb-3"}),at.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:W.nft.name})]}),at.jsxs("div",{className:"text-center text-sm space-y-2 mb-6",children:[at.jsx("p",{className:"text-zinc-300",children:"Are you sure you want to delete this NFT from your collection?"}),at.jsx("p",{className:"text-red-400 text-xs",children:"This action cannot be undone. The NFT will be permanently removed."})]}),at.jsxs("div",{className:"flex gap-3",children:[at.jsx("button",{onClick:()=>{D(!1);H(null)},className:"flex-1 py-2 rounded bg-zinc-700 hover:bg-zinc-600 text-white text-sm",children:"Cancel"}),at.jsx("button",{onClick:()=>handleDeleteNFT(W.index),className:"flex-1 py-2 rounded bg-red-600 hover:bg-red-500 text-white text-sm font-medium",children:"Delete NFT"})]})]})})]})};ot.lazy(()=>__vitePreload(()=>n(()=>import("./VirtualList-yZ8rWXJ5-DCcLzWuZ.js"),__vite__mapDeps([2,1])),__vite__mapDeps([3,1,2])));const formatPrice=n=>{const a=Number(n);return isFinite(a)?0===a?"0":a>=1?a.toLocaleString(void 0,{maximumFractionDigits:2}):a>=.1?a.toLocaleString(void 0,{maximumFractionDigits:3}):a>=.01?a.toLocaleString(void 0,{maximumFractionDigits:4}):a.toLocaleString(void 0,{maximumFractionDigits:6}):"0"};const safeToString=n=>{if(null==n)return"0";if("string"==typeof n)return n;if("number"==typeof n)return n.toString();if("bigint"==typeof n)return n.toString();try{return String(n)}catch{return"0"}};const HF="0xb7C9318Ac06AA59fE3cDD8342769361bB0Cc3d09";let qF=[];let GF=!1;const processRequestQueue=async()=>{if(!GF&&0!==qF.length){GF=!0;for(;qF.length>0;){const a=qF.splice(0,5);try{await Promise.allSettled(a.map(n=>n()))}catch(n){console.error("Batch request error:",n)}await new Promise(n=>setTimeout(n,100))}GF=!1}};const queueRequest=n=>new Promise((a,o)=>{qF.push(async()=>{try{const o=await n();a(o)}catch(i){o(i)}});processRequestQueue()});const VF=new Map;const KF=6e5;const checkIfFactoryCollectionOptimized=async n=>{try{if(!n||!window.ethereum)return!1;const a=`factory_collections_${Date.now()}`;const o=VF.get(a);if(o&&Date.now()-o.timestamp<KF)return o.collections.includes(n.toLowerCase());const i=await queueRequest(async()=>{const o=new fb("https://dream-rpc.somnia.network/");const i=new Ey(HF,xI,o);const u=await i.getAllCollections();VF.set(a,{collections:u.map(n=>n.toLowerCase()),timestamp:Date.now()});return u.map(n=>n.toLowerCase()).includes(n.toLowerCase())});return i}catch(a){console.error("❌ Error checking factory collection:",a);return!1}};const ZF=new Map;const YF=18e5;const getNFTImageUrlOptimized=async(n,a)=>{try{const i=`${a}_${n.id}_image`;const u=ZF.get(i);if(u&&Date.now()-u.timestamp<YF)return u.url;const d=await checkIfFactoryCollectionOptimized(a);if(d&&a&&n.id)try{const o=await queueRequest(async()=>{const o=new fb("https://dream-rpc.somnia.network/");const u=new Ey(a,["function tokenURI(uint256 tokenId) view returns (string)","function ownerOf(uint256 tokenId) view returns (address)"],o);const d="string"==typeof n.id?parseInt(n.id,10):n.id;try{const n=await u.ownerOf(d);if(n===hp){console.log(`Token ${d} doesn't exist yet`);return null}}catch(g){console.log(`Token ${d} doesn't exist yet:`,g.message);return null}const m=await u.tokenURI(d);if(m){let n=m;m.startsWith("ipfs://")&&(n=m.replace("ipfs://","https://gateway.lighthouse.storage/ipfs/"));const a=await Promise.race([fetch(n),new Promise((n,a)=>setTimeout(()=>a(new Error("Metadata fetch timeout")),2e3))]);if(a.ok){const n=await a.json();if(n.image){let a=n.image;a.startsWith("ipfs://")&&(a=a.replace("ipfs://","https://gateway.lighthouse.storage/ipfs/"));ZF.set(i,{url:a,timestamp:Date.now()});return a}}}return null});if(o)return o}catch(o){console.error("Error fetching factory NFT image:",o)}let m=n.image||n.image_url||n.media_url||"";!m&&n.metadata?.image&&(m=n.metadata.image);if(m){m.startsWith("ipfs://")&&(m=d?m.replace("ipfs://","https://gateway.lighthouse.storage/ipfs/"):m.replace("ipfs://","https://ipfs.io/ipfs/"));ZF.set(i,{url:m,timestamp:Date.now()});return m}return null}catch(o){console.error("Error getting NFT image URL:",o);return null}};const MintPage=()=>{const{address:n}=useParams();const a=useNavigate();const[o,i]=ot.useState(null);const[u,d]=ot.useState(!0);const[m,g]=ot.useState({visible:!1,message:"",txHash:""});const{address:y,isConnected:v}=useReownWallet();const writeContractAsync=async n=>{if(!window.ethereum)throw new Error("Wallet not connected");const a=new mb(window.ethereum);const o=await a.getSigner();const i=new Ey(n.address,n.abi,o);const u={...n.value>0?{value:n.value}:{},...n.gasSettings||{}};const d=await i[n.functionName](...n.args,u);return d.hash};const[x,N]=ot.useState(null);const[k,E]=ot.useState(0);const[S,A]=ot.useState([]);const[_,j]=ot.useState({isWhitelisted:!1});const[I,O]=ot.useState(!1);const[R,B]=ot.useState(null);const[M,z]=ot.useState(null);const[L,D]=ot.useState(0);const[W,H]=ot.useState(!1);const[q,G]=ot.useState({});const[V,Z]=ot.useState(!1);const Y=ot.useMemo(()=>window.innerWidth<768,[]);const J=ot.useMemo(()=>window.innerWidth>=768&&window.innerWidth<1024,[]);const[X,ee]=ot.useState(!1);const[te,ne]=ot.useState(1);const[re,se]=ot.useState("0");const[ae,oe]=ot.useState(!1);const[ie,ce]=ot.useState(!1);const[le,ue]=ot.useState(!1);const[de,he]=ot.useState(null);const[fe,pe]=ot.useState(!1);const[me,ge]=ot.useState(!1);const[ye,be]=ot.useState(!1);const[we,xe]=ot.useState([]);const[Ne,ke]=ot.useState(!1);const[Ee,Se]=ot.useState({website:"",twitter:"",discord:""});const[Ae,_e]=ot.useState(new Map);const Te=ot.useMemo(()=>{if(!o)return[];const n=[];o.cover&&n.push(o.cover);o.bannerImage&&n.push(o.bannerImage);o.banner&&n.push(o.banner);return[...new Set(n)]},[o]);const je=ot.useMemo(()=>we&&0!==we.length?we.slice(0,6).map(n=>n.image).filter(Boolean):[],[we]);const Ie=ot.useMemo(()=>o&&o.totalSupply?Math.min(100,Math.round(k/o.totalSupply*100)):0,[o,k]);ot.useMemo(()=>o&&o.phases?Object.entries(o.phases):[],[o,o?.phases]);const Pe=ot.useMemo(()=>safeToString(M||(x&&x[1]?x[1].price:"0")),[M,x]);const Oe=ot.useMemo(()=>formatPrice(Pe),[Pe]);const loadSocialLinks=async()=>{if(o?.address)try{let n={};o.external_link&&(n.website=o.external_link);if(o.metadata){o.metadata.website&&(n.website=o.metadata.website);o.metadata.twitter&&(n.twitter=o.metadata.twitter);o.metadata.discord&&(n.discord=o.metadata.discord);o.metadata.external_link&&!n.website&&(n.website=o.metadata.external_link)}const a=JSON.parse(localStorage.getItem(`collection_${o.address}_social`)||"{}");const i={...a,...n};console.log("🔍 Loading social links:",{fromMetadata:n,fromLocalStorage:a,combined:i});Se(i)}catch(n){console.error("Error loading social links:",n)}};ot.useEffect(()=>{o?.address&&loadSocialLinks()},[o?.address]);const loadCollectionNFTs=async()=>{if(!o)return;const n=`${o.address}_preview`;const a=Ae.get(n);if(a&&Date.now()-a.timestamp<3e5){console.log("📦 Using cached preview data");xe(a.data)}else try{ke(!0);console.log("🔄 Loading collection preview...");const createPlaceholderNFTs=(n=20)=>{const a=[];for(let i=0;i<n;i++)a.push({id:i,tokenId:i,name:`${o.name} #${i+1}`,description:`NFT #${i+1} from ${o.name}`,image:o.cover,isPlaceholder:!0});return a};const a=createPlaceholderNFTs(20);xe(a);console.log("🚀 Showing placeholder NFTs instantly");try{if(o.metadata&&o.metadata.nfts){console.log("📦 Found NFTs in metadata, loading images in background...");const loadImageWithTimeout=async(n,a)=>{try{const i=`nft_image_${n.tokenId||n.id||a}`;const u=Ae.get(i);if(u&&Date.now()-u.timestamp<6e5){console.log("📦 Using cached NFT image:",i);return{...n,id:n.tokenId||n.id||a,image:u.data,name:n.name||`${o.name} #${n.tokenId||n.id||a+1}`,description:n.description||`NFT #${n.tokenId||n.id||a+1} from ${o.name}`,isPlaceholder:!1}}const d=await Promise.race([getNFTImageUrlOptimized(n,o.address),new Promise((n,a)=>setTimeout(()=>a(new Error("Image load timeout")),1500))]);d&&_e(n=>new Map(n.set(i,{data:d,timestamp:Date.now()})));return{...n,id:n.tokenId||n.id||a,image:d||o.cover,name:n.name||`${o.name} #${n.tokenId||n.id||a+1}`,description:n.description||`NFT #${n.tokenId||n.id||a+1} from ${o.name}`,isPlaceholder:!1}}catch(i){console.warn(`Failed to load image for NFT ${a}:`,i);return{...n,id:n.tokenId||n.id||a,image:o.cover,name:n.name||`${o.name} #${n.tokenId||n.id||a+1}`,description:n.description||`NFT #${n.tokenId||n.id||a+1} from ${o.name}`,isPlaceholder:!1}}};const a=o.metadata.nfts.slice(0,20);const i=a.map((n,a)=>loadImageWithTimeout(n,a).catch(i=>{console.warn(`Failed to load NFT ${a}:`,i);return{...n,id:n.tokenId||n.id||a,image:o.cover,name:n.name||`${o.name} #${n.tokenId||n.id||a+1}`,description:n.description||`NFT #${n.tokenId||n.id||a+1} from ${o.name}`,isPlaceholder:!1}}));const u=await Promise.allSettled(i);const d=u.filter(n=>"fulfilled"===n.status).map(n=>n.value);xe(d);console.log("✅ All NFT images loaded");_e(a=>new Map(a.set(n,{data:d,timestamp:Date.now()})));ke(!1);return}}catch(i){console.warn("⚠️ Failed to load real images, keeping placeholders:",i)}console.log("ℹ️ Using placeholder NFTs as fallback");xe(a);_e(o=>new Map(o.set(n,{data:a,timestamp:Date.now()})));ke(!1);return}catch(i){console.error("Error loading collection NFTs:",i);xe([])}finally{ke(!1)}};const clearPreviewCache=()=>{_e(new Map);xe([]);loadCollectionNFTs()};const clearAllCaches=()=>{_e(new Map);ZF.clear();VF.clear();qF=[];xe([]);console.log("🧹 All caches cleared")};ot.useEffect(()=>{const checkMemoryUsage=()=>{if(ZF.size>1e3||VF.size>100){console.warn("⚠️ High cache usage detected, clearing old entries...");clearAllCaches()}};const n=setInterval(checkMemoryUsage,6e4);return()=>clearInterval(n)},[]);ot.useEffect(()=>{o&&loadCollectionNFTs()},[o]);ot.useEffect(()=>{v&&ae&&oe(!1)},[v,ae]);ot.useEffect(()=>{if(m.visible){const n=setTimeout(()=>g(n=>({...n,visible:!1})),5e3);return()=>clearTimeout(n)}},[m.visible]);const showToast=(n,a="")=>{g({visible:!0,message:n,txHash:a})};ot.useEffect(()=>{if(x&&x[1]){const n=M||x[1].price||"0";const a=(parseFloat(n)*te).toFixed(4);se(a)}},[te,x,M]);const openMintModal=()=>{if(v)if(x)if(x[1]&&(x[1].isPublic||_?.isWhitelisted))if(W)showToast("❌ Collection is sold out!");else if(Re>0&&L>=Re)showToast("❌ You have reached the wallet limit for this phase.");else{ne(1);ee(!0)}else showToast("❌ You are not whitelisted for this phase.");else showToast("❌ No active phase at the moment.");else oe(!0)};const closeMintModal=()=>{ee(!1);ne(1);oe(!1)};const handleQuantityChange=n=>{if(!x||!x[1])return;const a=x[1].maxPerWallet||0;const o=a>0?a-L:999;const i=Math.min(o,10);n>=1&&n<=i&&ne(n)};const getMaxQuantity=()=>{if(!x||!x[1])return 1;const n=x[1].maxPerWallet||0;const a=n>0?n-L:999;return Math.min(a,10)};const handleMintFromModal=async()=>{if(x&&v){try{const n=await(async()=>{try{return await(switchNetwork?.(50312))}catch{return{success:!1}}})();n?.success||await ensureSomniaNetwork()}catch(nL){showToast("❌ Please switch to Somnia Testnet to mint.");return}try{ce(!0);const n=await handleMintWithQuantity(te);if(n.success){showToast("✅ Mint successful!",n.txHash);closeMintModal()}else showToast(`❌ Mint failed: ${n.error}`)}catch(n){console.error("❌ Mint failed with exception:",n);showToast("❌ Mint failed. Please try again.")}finally{ce(!1)}}};const handleMintWithQuantity=async(n=1)=>{if(!v)return{success:!1,error:"Please connect your wallet first!"};try{const n=await(async()=>{try{return await(switchNetwork?.(50312))}catch{return{success:!1}}})();n?.success||await ensureSomniaNetwork()}catch(nL){return{success:!1,error:"Please switch to Somnia Testnet to mint."}}if(!o)return{success:!1,error:"No collection loaded."};if(!x||!x[1])return{success:!1,error:"No active phase."};const[a,i]=x;if(!i||!i.isPublic&&!_?.isWhitelisted)return{success:!1,error:"You are not whitelisted for this phase."};if(W)return{success:!1,error:"Collection is sold out!"};if(L+n>i.maxPerWallet&&i.maxPerWallet>0)return{success:!1,error:"You would exceed the wallet limit for this phase!"};let u;if(M&&!isNaN(M)){u=parseEther((parseFloat(M)*n).toString());console.log("💰 Using price from contract:",M,"STT")}else if(i.price&&!isNaN(i.price)){u=parseEther((parseFloat(i.price)*n).toString());console.log("💰 Using price from UI:",i.price,"STT")}else{u=parseEther("0");console.log("💰 Free mint detected")}if(void 0===u)return{success:!1,error:"Could not determine mint price. Please refresh the page."};let d=S||[];i.isPublic&&(d=[]);try{const a=await writeContractAsync({chainId:50312,address:o.address,abi:vI,functionName:"mint",args:[n,d],...u>0?{value:u}:{}});console.log("✅ Mint transaction sent:",a);const i=new fb("https://dream-rpc.somnia.network/");let y=null;let v=3;for(;v>0&&!y;)try{y=await i.waitForTransaction(a,1,3e4);break}catch(m){console.warn(`Transaction confirmation attempt ${4-v} failed:`,m);v--;if(v>0)await new Promise(n=>setTimeout(n,2e3));else try{y=await i.getTransactionReceipt(a)}catch(g){throw m}}if(1===y.status){showToast("✅ Mint successful!",a);E(a=>a+n);D(a=>a+n);setTimeout(async()=>{await Promise.all([checkSoldOut(),checkWalletLimit()])},2e3);return{success:!0,txHash:a}}return{success:!1,error:"Mint transaction failed on-chain"}}catch(rL){console.error("❌ Mint Error:",rL);console.error("❌ Error details:",{message:rL.message,code:rL.code,data:rL.data,stack:rL.stack});return rL.message&&rL.message.includes("Not whitelisted")?{success:!1,error:"Not whitelisted for this phase"}:rL.message&&rL.message.includes("Wrong price")?{success:!1,error:"Wrong price. Please refresh the page."}:rL.message&&rL.message.includes("Phase not active")?{success:!1,error:"Phase is not active"}:rL.message&&rL.message.includes("insufficient funds")?{success:!1,error:"Insufficient funds for minting"}:rL.message&&rL.message.includes("user rejected")?{success:!1,error:"Transaction was rejected by user"}:{success:!1,error:`Mint failed: ${rL.message}`}}};const checkWalletLimit=async()=>{if(y&&o&&x&&x[1])try{const u=new fb("https://dream-rpc.somnia.network/");const d=new Ey(o.address,vI,u);const[m,g]=x;console.log("🔍 Checking wallet limit for:",{user:y,collection:o.address,phase:m,phaseName:g.name});let v=null;let N=0;try{if("function"==typeof d.phases){v=await d.phases(m);N=Number(v.maxPerWallet);console.log("✅ Got phase data from contract:",{start:Number(v.start),end:Number(v.end),price:formatEther(v.price),maxPerWallet:N,merkleRoot:v.merkleRoot})}else console.log("ℹ️ phases function not available in contract")}catch(n){console.warn("⚠️ Could not get phase data from contract:",n.message)}if(!v||0===N){console.log("🔄 Falling back to localStorage data");const n=JSON.parse(localStorage.getItem(`phases_${o.address}`)||"{}");const a=Object.entries(n);const i=a[m];if(i){N=Number(i[1].limit)||0;console.log("📦 Using localStorage limit:",N)}}console.log("📊 Final wallet limit:",N);if(0===N){console.log("ℹ️ Wallet limit is 0, treating as unlimited");D(0);return}try{if("function"==typeof d.mintedPerWallet){const n=await d.mintedPerWallet(y,m);console.log("✅ mintedPerWallet function exists, result:",Number(n));D(Number(n));return}console.log("ℹ️ mintedPerWallet function not available in contract")}catch(a){console.warn("⚠️ mintedPerWallet function failed:",a)}try{const n=await d.balanceOf(y);console.log("🔄 Using balanceOf as fallback:",Number(n));if(Number(n)>N&&N>0){console.warn("🚨 WARNING: User balance exceeds wallet limit! This suggests:");console.warn("   - User minted in multiple phases");console.warn("   - Or limit was changed after mint");console.warn("   - Or we are checking wrong phase")}D(Number(n));return}catch(i){console.warn("⚠️ balanceOf function also failed:",i)}console.log("ℹ️ Could not determine wallet limit, assuming unlimited");D(0)}catch(n){console.error("❌ Could not check wallet limit:",n);D(0)}};const checkSoldOut=async()=>{if(o)try{const n=new fb("https://dream-rpc.somnia.network/");const a=new Ey(o.address,vI,n);const i=await a.totalSupply();const u=await a.maxSupply();const d=Number(i)>=Number(u);H(d);console.log("🔍 Sold out check:",{totalSupply:Number(i),maxSupply:Number(u),soldOut:d})}catch(n){console.warn("⚠️ Could not check sold out status:",n);H(!1)}};const analyzeContract=async()=>{if(o)try{const a=new fb("https://dream-rpc.somnia.network/");const i=new Ey(o.address,vI,a);console.log("🔍 Analyzing contract functions for:",o.address);const u=["mintedPerWallet","balanceOf","totalSupply","maxSupply","currentPhase","phases"];for(const o of u)try{if("mintedPerWallet"===o&&x&&x[1]){const[n]=x;await i.mintedPerWallet(y,n);console.log(`✅ ${o} function exists`)}else if("balanceOf"===o&&y){await i.balanceOf(y);console.log(`✅ ${o} function exists`)}else if("totalSupply"===o){await i.totalSupply();console.log(`✅ ${o} function exists`)}else if("maxSupply"===o){await i.maxSupply();console.log(`✅ ${o} function exists`)}else if("currentPhase"===o){await i.currentPhase();console.log(`✅ ${o} function exists`)}else if("phases"===o&&x&&x[1]){const[n]=x;await i.phases(n);console.log(`✅ ${o} function exists`)}}catch(n){console.log(`❌ ${o} function not available:`,n.message)}}catch(n){console.error("❌ Failed to analyze contract:",n)}};ot.useEffect(()=>{o&&y&&analyzeContract()},[o,y]);const checkPhaseHistory=async()=>{if(o)try{const a=new fb("https://dream-rpc.somnia.network/");const i=new Ey(o.address,vI,a);console.log("🔍 Checking phase history for:",o.address);const u=await i.currentPhase();console.log("📊 Current phase from contract:",Number(u));const d=o.phases?Object.entries(o.phases):[];console.log("📊 All phases from metadata:",d.length);for(let o=0;o<d.length;o++)try{const[a,u]=d[o];console.log(`📊 Phase ${o}: ${a}`,{start:new Date(1e3*Number(u.start)).toLocaleString(),end:new Date(1e3*Number(u.end)).toLocaleString(),maxPerWallet:u.maxPerWallet,limit:u.limit,price:u.price,isPublic:"0x0000000000000000000000000000000000000000000000000000000000000000"===u.merkleRoot});try{const n=await i.mintedPerWallet(y,o);console.log(`   User minted in phase ${o}:`,Number(n))}catch(n){console.log(`   Could not check user minted in phase ${o}:`,n.message)}try{const n=await i.phases(o);console.log(`   Contract phase ${o} data:`,{start:Number(n.start),end:Number(n.end),price:formatEther(n.price),maxPerWallet:Number(n.maxPerWallet),merkleRoot:n.merkleRoot,isPublic:"0x0000000000000000000000000000000000000000000000000000000000000000"===n.merkleRoot})}catch(n){console.log(`   Could not get contract phase ${o} data:`,n.message)}}catch(n){console.log(`   Could not get phase ${o} data:`,n.message)}try{const a=await i.balanceOf(y);console.log("📊 Total user balance:",Number(a));try{const a=await i.balanceOf(y);console.log("📊 User owns",Number(a),"tokens");for(let o=0;o<Math.min(Number(a),5);o++)try{const n=await i.tokenOfOwnerByIndex(y,o);console.log(`   Token ${o}: ID ${Number(n)}`)}catch(n){console.log(`   Could not get token ${o}:`,n.message)}}catch(n){console.log("Could not get token details:",n.message)}}catch(n){console.log("Could not get user balance:",n.message)}}catch(n){console.error("❌ Failed to check phase history:",n)}};ot.useEffect(()=>{o&&y&&checkPhaseHistory()},[o,y]);ot.useEffect(()=>{const loadCollection=async()=>{try{console.log("🔍 Loading collection for address:",n);if(!n){console.error("❌ No address provided");d(!1);return}const y=new fb("https://dream-rpc.somnia.network/");try{const a=await y.getCode(n);if("0x"===a)throw new Error("No contract deployed at this address");console.log("✅ Contract exists at address")}catch(a){console.error("❌ Contract check failed:",a);throw new Error("Invalid contract address")}const v=new Ey(n,vI,y);console.log("🔍 Contract initialized, fetching data...");let x="Unknown Collection";try{x=await v.name();console.log("🔍 Collection name:",x)}catch(o){console.warn("⚠️ Failed to get name from contract:",o)}let N="";try{N=await v.contractURI();console.log("🔍 Metadata URI:",N)}catch(u){console.warn("⚠️ Failed to get contractURI:",u)}let k={};if(N&&""!==N)try{const n=getIpfsUrls(N);console.log("🔍 IPFS URLs:",n);k=await fetchWithFallback$3(n);console.log("🔍 Fetched metadata:",k)}catch(m){console.error("❌ Failed to fetch metadata:",m);k={}}else console.log("⚠️ No metadata URI found");let E=0;try{E=await v.maxSupply();console.log("🔍 Max supply:",E)}catch(g){console.warn("⚠️ Failed to get maxSupply:",g)}const S="center center";const A="cover";const _={address:n,name:x,cover:k.image?getIpfsUrls(k.image)[0]:o_,description:k.description||"No description provided.",phases:k.phases||{},totalSupply:Number(E),minted:k.minted||0,banner:k.banner?getIpfsUrls(k.banner)[0]:null,bannerPosition:S,bannerFit:A,external_link:k.external_link||"",metadata:k};try{const a=localStorage.getItem(`collection_${n}_banner`);a&&(_.banner=a)}catch{}i(_)}catch(rL){console.error("❌ Failed to load collection:",rL);console.error("❌ Error details:",{message:rL.message,code:rL.code,data:rL.data});try{const a=JSON.parse(localStorage.getItem("dreava_collections"))||[];const o=a.find(a=>a.address===n);if(o){const a=localStorage.getItem(`collection_${n}_banner`);const u=localStorage.getItem(`collection_${n}_banner_position`)||"center center";const d=localStorage.getItem(`collection_${n}_banner_fit`)||"cover";const m={address:n,name:o.name||"Unknown Collection",cover:o.cover||o_,description:o.description||"No description provided.",phases:o.phases||{},totalSupply:o.totalSupply||0,minted:o.minted||0,banner:a||null,bannerPosition:u,bannerFit:d,external_link:o.external_link||""};i(m)}else console.error("❌ Collection not found in localStorage either")}catch(y){console.error("❌ Failed to load from localStorage:",y)}}finally{d(!1)}};loadCollection();loadSocialLinks()},[n]);ot.useEffect(()=>{if(!o)return;const getContractData=async()=>{try{const u=new fb("https://dream-rpc.somnia.network/");const d=new Ey(n,vI,u);let m=0;try{m=await d.currentPhase();B(Number(m));console.log("🔍 Current phase from contract:",m)}catch(a){console.warn("⚠️ Failed to get currentPhase:",a);B(0)}if(m>0)try{const n=await d.phases(m-1);const a=formatEther(n.price);z(a);console.log("🔍 Price from contract:",a)}catch(o){console.warn("⚠️ Failed to get phase price:",o);z(null)}else z(null);try{const n=await d.totalSupply();E(Number(n));console.log("🔍 Total minted from contract:",n)}catch(i){console.warn("⚠️ Failed to get totalSupply:",i)}}catch(rL){console.error("❌ Failed to get contract data:",rL)}};getContractData();const a=setInterval(getContractData,3e4);return()=>clearInterval(a)},[o,n]);ot.useEffect(()=>{if(!o||!y)return;const checkStatus=async()=>{await Promise.all([checkWalletLimit(),checkSoldOut()])};checkStatus();const n=setInterval(checkStatus,3e4);return()=>clearInterval(n)},[o,y,x]);ot.useEffect(()=>{if(!o)return;const updateActivePhase=()=>{const n=Math.floor(Date.now()/1e3);const a=o.phases?Object.entries(o.phases):[];let i=null;let u=null;a.forEach(([a,o],d)=>{const m=Number(o.start);const g=Number(o.end);if(m<=n&&n<=g){i=o;u=d}});if(i){const n="0x0000000000000000000000000000000000000000000000000000000000000000"===i.merkleRoot||i.isPublic;const a={name:i.name||`Phase ${u}`,start:Number(i.start),end:Number(i.end),price:i.price,maxPerWallet:Me&&Me[u]||i.maxPerWallet||1,merkleRoot:i.merkleRoot,isPublic:n};N([u,a])}else N(null)};updateActivePhase();const n=setInterval(updateActivePhase,3e4);return()=>clearInterval(n)},[o]);ot.useEffect(()=>{if(!x||!y||!o){j({isWhitelisted:!1});A([]);return}const[n,a]=x;if(a.isPublic){j({isWhitelisted:!0});A([]);return}const fetchProof=async()=>{try{O(!0);let a=o.phases?Object.entries(o.phases):[];const i=a[n]?a[n][0]:"Whitelist";console.log("🔍 Checking whitelist for:",{address:y,collection:o.address,phase:i});const u=await fetch(`/api/whitelist/check?collection=${o.address}&phase=${i}`);if(u.ok){const n=await u.json();console.log("🔍 Whitelist check result:",n);if(n.exists){const n=await fetch("/api/whitelist/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:y,collection:o.address,phase:i})});console.log("🔍 Whitelist verify response status:",n.status);if(n.ok){const a=await n.json();console.log("🔍 Whitelist verify response data:",a);if(a.isWhitelisted&&a.proof&&Array.isArray(a.proof)){console.log("✅ User is whitelisted, proof:",a.proof);A(a.proof);j({isWhitelisted:!0})}else{console.log("❌ User is not whitelisted or no proof");A([]);j({isWhitelisted:!1})}}else{console.log("❌ Whitelist verify request failed");A([]);j({isWhitelisted:!1})}}else{console.log("❌ Whitelist does not exist for this phase");A([]);j({isWhitelisted:!1})}}else{console.log("❌ Whitelist check request failed");A([]);j({isWhitelisted:!1})}}catch(a){console.error("Error fetching whitelist proof:",a);A([]);j({isWhitelisted:!1})}finally{O(!1)}};fetchProof()},[x?.[0],x?.[1]?.name,y,o?.address]);const getWalletLimit=async()=>{if(!o||!x||!x[1])return 0;try{const a=new fb("https://dream-rpc.somnia.network/");const i=new Ey(o.address,vI,a);const[u]=x;try{if("function"==typeof i.phases){const n=await i.phases(u);const a=Number(n.maxPerWallet);if(a>0)return a}}catch(n){console.warn("Could not get phase data from contract:",n.message)}const d=JSON.parse(localStorage.getItem(`phases_${o.address}`)||"{}");const m=Object.entries(d);const g=m[u];return g&&Number(g[1].limit)||0}catch(n){console.error("Error getting wallet limit:",n);return 0}};const[Re,Be]=ot.useState(0);const[Me,ze]=ot.useState({});ot.useEffect(()=>{o&&x&&x[1]&&getWalletLimit().then(Be)},[o,x]);const fetchContractPhaseLimits=async()=>{if(o)try{const a=new fb("https://dream-rpc.somnia.network/");const i=new Ey(o.address,vI,a);const u={};const d=o.phases?Object.entries(o.phases):[];for(let m=0;m<d.length;m++)try{if("function"==typeof i.phases){const n=await i.phases(m);const a=Number(n.maxPerWallet);u[m]=a;console.log(`Phase ${m} wallet limit from contract:`,a)}}catch(n){console.warn(`Could not get phase ${m} limit from contract:`,n.message);const a=JSON.parse(localStorage.getItem(`phases_${o.address}`)||"{}");const i=Object.entries(a);i[m]&&(u[m]=Number(i[m][1].limit)||0)}ze(u)}catch(n){console.error("Error fetching contract phase limits:",n)}};ot.useEffect(()=>{o&&fetchContractPhaseLimits()},[o]);ot.useEffect(()=>{if(o&&Me&&Object.keys(Me).length>0){const updateActivePhase=()=>{const n=Math.floor(Date.now()/1e3);const a=o.phases?Object.entries(o.phases):[];let i=null;let u=null;a.forEach(([a,o],d)=>{const m=Number(o.start);const g=Number(o.end);if(m<=n&&n<=g){i=o;u=d}});if(i){const n="0x0000000000000000000000000000000000000000000000000000000000000000"===i.merkleRoot||i.isPublic;const a={name:i.name||`Phase ${u}`,start:Number(i.start),end:Number(i.end),price:i.price,maxPerWallet:Me[u]||i.maxPerWallet||1,merkleRoot:i.merkleRoot,isPublic:n};N([u,a])}};updateActivePhase()}},[o,Me]);const getSortedPhases=()=>{if(!o||!o.phases)return[];const n=Object.entries(o.phases);const a=Math.floor(Date.now()/1e3);const i=[{key:"Whitelist",priority:1},{key:"FCFS",priority:2},{key:"Public",priority:3}];const u=new Map;n.forEach(([n,a],o)=>{u.set(n,{...a,originalIndex:o,name:n})});const d=i.filter(n=>u.has(n.key)).map(n=>{const o=u.get(n.key);const i=Number(o.start);const d=Number(o.end);const m=i<=a&&a<=d;const g="0x0000000000000000000000000000000000000000000000000000000000000000"===o.merkleRoot||o.isPublic;return{...o,name:n.key,originalIndex:o.originalIndex,isActive:m,isPublic:g,priority:n.priority}}).sort((n,a)=>n.priority-a.priority);return d};const checkLocalStoragePhases=()=>{if(o)try{console.log("🔍 Checking localStorage phase data for:",o.address);const n=JSON.parse(localStorage.getItem(`phases_${o.address}`)||"{}");console.log("📊 Phases from localStorage:",n);Object.entries(n).forEach(([n,a])=>{console.log(`📊 Phase "${n}" from localStorage:`,{start:a.start,end:a.end,price:a.price,limit:a.limit,maxPerWallet:a.maxPerWallet,allocated:a.allocated,active:a.active});if(!a.limit||0===a.limit){console.warn(`⚠️ WARNING: Phase "${n}" has no limit or limit is 0!`);console.warn("   This means unlimited minting per wallet.")}});const a=JSON.parse(localStorage.getItem(`collection_${o.address}`)||"{}");console.log("📊 Collection data from localStorage:",a)}catch(n){console.error("❌ Failed to check localStorage phases:",n)}};ot.useEffect(()=>{o&&checkLocalStoragePhases()},[o]);ot.useEffect(()=>{if(o&&o.name){document.title=`${o.name} - Dreava Launchpad`;const n=document.querySelector('meta[name="description"]');n&&n.setAttribute("content",o.description||`Check out ${o.name} NFT collection on Dreava Launchpad`);const a=document.querySelector('meta[property="og:title"]');a&&a.setAttribute("content",`${o.name} - Dreava Launchpad`);const i=document.querySelector('meta[property="og:description"]');i&&i.setAttribute("content",o.description||`Check out ${o.name} NFT collection on Dreava Launchpad`);const u=document.querySelector('meta[property="og:image"]');if(u&&o.banner){u.setAttribute("content",o.banner);console.log("🔍 Set OG image to:",o.banner)}const d=document.querySelector('meta[property="og:url"]');d&&d.setAttribute("content",window.location.href);const m=document.querySelector('meta[property="twitter:title"]');m&&m.setAttribute("content",`${o.name} - Dreava Launchpad`);const g=document.querySelector('meta[property="twitter:description"]');g&&g.setAttribute("content",o.description||`Check out ${o.name} NFT collection on Dreava Launchpad`);const y=document.querySelector('meta[property="twitter:image"]');if(y&&o.banner){y.setAttribute("content",o.banner);console.log("🔍 Set Twitter image to:",o.banner)}const v=document.querySelector('meta[property="twitter:url"]');v&&v.setAttribute("content",window.location.href)}return()=>{document.title="Dreava Launchpad";const n=document.querySelector('meta[name="description"]');n&&n.setAttribute("content","Dreava Launchpad - NFT Launchpad Platform")}},[o]);return u?at.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:at.jsx(LoadingSpinner,{message:"Loading collection",showLogo:!0,size:"large",showProgress:!1,showDots:!1})}):o?at.jsxs("div",{className:"min-h-screen bg-black text-white",children:[at.jsx(BackgroundCircles,{}),at.jsxs("div",{className:"relative h-[400px] w-full overflow-hidden shadow-2xl border-b border-zinc-700/30 bg-zinc-900/80 backdrop-blur-sm z-10",children:[(()=>{const n=localStorage.getItem(`collection_${o.address}_banner`);const a=o.metadata?.banner?getIpfsUrls(o.metadata.banner)[0]:null;const i=o.banner?o.banner.startsWith("ipfs://")?getIpfsUrls(o.banner)[0]:o.banner:null;const u=n||a||i||null;const d=localStorage.getItem(`collection_${o.address}_banner_position`)||"center center";const m=localStorage.getItem(`collection_${o.address}_banner_fit`)||"cover";console.log("🔍 CollectionMintPage Banner debug:",{bannerLocal:n,bannerMeta:a,bannerApi:i,resolvedBanner:u,collectionCover:o.cover,collectionBannerImage:o.bannerImage});return u?at.jsx("img",{src:u,alt:"banner",className:"absolute inset-0 w-full h-full object-cover",style:{objectPosition:d,objectFit:m},onError:n=>{console.warn("⚠️ Banner image failed to load:",u);n.target.style.display="none";const a=n.target.nextElementSibling;a&&(a.style.display="flex")}}):null})(),at.jsxs("div",{className:"flex items-center justify-center h-full w-full "+(o.banner?"hidden":""),style:{display:o.banner?"none":"flex"},children:[at.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-800 via-zinc-900 to-black"}),at.jsxs("div",{className:"relative z-10 text-center text-white",children:[at.jsx("div",{className:"text-4xl font-bold mb-4 bg-gradient-to-r from-blue-500 to-pink-500 bg-clip-text text-transparent",children:o.name}),at.jsx("div",{className:"text-xl text-zinc-300 mb-2",children:o.description?o.description.slice(0,100)+"...":"Amazing NFT Collection"}),at.jsx("div",{className:"text-zinc-400",children:"Discover and mint unique NFTs"})]})]}),at.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-zinc-900/60 via-zinc-900/20 to-transparent"}),at.jsx("button",{onClick:()=>a(-1),className:"absolute top-6 left-6 px-4 py-2 rounded-xl bg-black/40 backdrop-blur-sm border border-white/20 text-white hover:bg-black/60 hover:border-white/30 transition-all duration-300 hover:scale-105 z-20",children:"← Back"})]}),at.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-6 pb-24 relative z-10",children:[at.jsx(PerformanceMonitor$1,{onMetrics:G,showUI:!1}),Te.length>0&&at.jsx(ImagePreloader,{images:Te,priority:!0,onComplete:()=>Z(!0),onProgress:(n,a)=>{n===a&&Z(!0)}}),je.length>0&&at.jsx(ImagePreloader,{images:je,priority:!1,onComplete:()=>console.log("NFT preview images preloaded"),onProgress:(n,a)=>{console.log(`NFT preview: ${n}/${a} images loaded`)}}),at.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[at.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[at.jsx("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 p-6",children:at.jsxs("div",{className:"flex items-start gap-6",children:[at.jsx("div",{className:"w-24 h-24 rounded-2xl border-2 border-zinc-700/50 shadow-xl overflow-hidden bg-zinc-900/80 backdrop-blur-sm flex-shrink-0",children:at.jsx(LazyImage,{src:o.cover||o.firstNFTImage||"/default-cover.png",alt:"cover",className:"w-full h-full object-cover",priority:!0,sizes:"96px",onError:n=>{console.warn("⚠️ Cover image failed to load:",o.cover);o.firstNFTImage&&o.firstNFTImage!==n.target.src?n.target.src=o.firstNFTImage:n.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTYiIGhlaWdodD0iOTYiIHZpZXdCb3g9IjAgMCA5NiA5NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9Ijk2IiBoZWlnaHQ9Ijk2IiBmaWxsPSIjMzM0MTU1Ii8+CjxjaXJjbGUgY3g9IjQ4IiBjeT0iNDgiIHI9IjI0IiBmaWxsPSIjNjY3MzgwIi8+Cjwvc3ZnPgo="}})}),at.jsxs("div",{className:"flex-1 min-w-0",children:[at.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[at.jsx("h1",{className:"text-2xl font-bold text-white truncate",children:o.name}),at.jsx(T_,{className:"w-6 h-6 text-green-400 flex-shrink-0"})]}),at.jsx("p",{className:"text-zinc-300 text-sm mb-4 leading-relaxed",children:o.description}),at.jsxs("div",{className:"flex items-center gap-3",children:[Ee.website&&at.jsx("a",{href:Ee.website,target:"_blank",rel:"noopener noreferrer",className:"w-8 h-8 rounded-lg bg-zinc-800/50 hover:bg-zinc-700/50 transition-all duration-200 hover:scale-110 flex items-center justify-center",children:at.jsx(X_,{className:"w-4 h-4 text-zinc-400"})}),Ee.twitter&&at.jsx("a",{href:Ee.twitter,target:"_blank",rel:"noopener noreferrer",className:"w-8 h-8 rounded-lg bg-zinc-800/50 hover:bg-zinc-700/50 transition-all duration-200 hover:scale-110 flex items-center justify-center",children:at.jsx("svg",{className:"w-4 h-4 text-zinc-400",fill:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})})}),Ee.discord&&at.jsx("a",{href:Ee.discord,target:"_blank",rel:"noopener noreferrer",className:"w-8 h-8 rounded-lg bg-zinc-800/50 hover:bg-zinc-700/50 transition-all duration-200 hover:scale-110 flex items-center justify-center",children:at.jsx("svg",{className:"w-4 h-4 text-zinc-400",fill:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.019 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1568 2.4189Z"})})}),at.jsx("a",{href:`https://shannon-explorer.somnia.network/address/${o.address}`,target:"_blank",rel:"noopener noreferrer",className:"w-8 h-8 rounded-lg bg-zinc-800/50 hover:bg-zinc-700/50 transition-all duration-200 hover:scale-110 flex items-center justify-center",children:at.jsx(V_,{className:"w-4 h-4 text-zinc-400"})}),at.jsx("button",{onClick:()=>ge(!0),className:"w-8 h-8 rounded-lg bg-zinc-800/50 hover:bg-zinc-700/50 transition-all duration-200 hover:scale-110 flex items-center justify-center",title:"Share collection",children:at.jsx("svg",{className:"w-4 h-4 text-zinc-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})})})]})]})]})}),at.jsxs("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 p-6",children:[at.jsxs("div",{className:"flex items-center justify-between mb-6",children:[at.jsxs("div",{className:"flex items-center gap-4",children:[at.jsxs("div",{className:"text-center",children:[at.jsx("div",{className:"text-2xl font-bold text-white",children:k}),at.jsx("div",{className:"text-sm text-zinc-400",children:"Minted"})]}),at.jsx("div",{className:"text-zinc-400 text-xl",children:"/"}),at.jsxs("div",{className:"text-center",children:[at.jsx("div",{className:"text-2xl font-bold text-white",children:o.totalSupply}),at.jsx("div",{className:"text-sm text-zinc-400",children:"Total"})]})]}),x&&at.jsxs("div",{className:"text-right",children:[at.jsx("div",{className:"text-sm text-zinc-400 mb-1",children:"Price"}),at.jsxs("div",{className:"flex items-center gap-2 text-xl font-bold text-white whitespace-nowrap",children:[at.jsx("img",{src:i_,alt:"STT",className:"w-5 h-5"})," ",Oe," STT"]})]})]}),at.jsx("div",{className:"w-full h-3 bg-zinc-800/50 rounded-full mb-6 overflow-hidden",children:at.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-pink-500 relative",style:{width:`${Ie}%`},children:at.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"})})}),W?at.jsxs("div",{className:"text-center mb-6",children:[at.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-red-500 via-pink-500 to-red-600 bg-clip-text text-transparent mb-2",children:"SOLD OUT!"}),at.jsx("div",{className:"text-zinc-400 text-sm",children:"All NFTs have been minted"})]}):x&&x[1]?at.jsxs("div",{className:"text-center mb-6",children:[at.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[at.jsx(z_,{className:"w-4 h-4 text-pink-400 animate-pulse"}),at.jsx("span",{className:"text-base font-semibold text-white",children:at.jsx(bI,{date:1e3*Number(x[1].end),renderer:({days:n,hours:a,minutes:o,seconds:i})=>at.jsxs("span",{children:[n>0?`${n}d `:"",a,"h ",o,"m ",i,"s"]})})})]}),at.jsx("div",{className:"text-zinc-400 text-sm",children:"Time remaining"})]}):at.jsx("div",{className:"text-center mb-6",children:at.jsx("div",{className:"text-base font-semibold text-zinc-400",children:"No active phase at the moment"})}),at.jsxs("div",{className:"text-center",children:[at.jsxs("button",{onClick:openMintModal,disabled:!x||I||W||Re>0&&L>=Re||!x?.[1]?.isPublic&&!_?.isWhitelisted,className:"w-full px-8 py-4 rounded-2xl text-white font-bold text-lg shadow-2xl transition-all duration-300 active:scale-95 relative overflow-hidden group "+(W||Re>0&&L>=Re||!x||I||!x?.[1]?.isPublic&&!_?.isWhitelisted?"bg-zinc-700 text-zinc-400 cursor-not-allowed opacity-50":"bg-gradient-to-r from-[#00A3FF] to-[#FF1CF7] hover:from-[#0095E6] hover:to-[#E61CC7] hover:shadow-pink-500/25 hover:scale-105"),children:[at.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),at.jsx("span",{className:"relative z-10",children:I?"Checking whitelist...":W?"Sold Out":Re>0&&L>=Re?"Wallet Limit Reached":x&&x[1]?`Mint for ${Oe} STT`:"Mint Now"})]}),!_?.isWhitelisted&&!I&&!x?.[1]?.isPublic&&at.jsx("div",{className:"mt-3 text-red-400 text-sm",children:"You are not whitelisted for this phase"}),_?.isWhitelisted&&!I&&!x?.[1]?.isPublic&&at.jsx("div",{className:"mt-3 text-green-400 text-sm",children:"✅ You are whitelisted for this phase!"}),I&&at.jsx("div",{className:"mt-3",children:at.jsx(LoadingSpinner,{message:"Verifying whitelist",showLogo:!1,size:"small",showProgress:!1,showDots:!1})})]})]}),at.jsxs("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 p-6",children:[at.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Phases"}),(()=>{const n=getSortedPhases();return 0===n.length?at.jsx("div",{className:"text-center text-zinc-400 text-sm",children:"No phases defined"}):at.jsx("div",{className:"space-y-3",children:n.map((n,a)=>{const o=x&&x[1]&&x[0]===n.originalIndex;n.isActive;const i=Me[n.originalIndex]??0;return at.jsxs("div",{className:"p-4 rounded-xl border transition-all duration-300 "+(o?"bg-gradient-to-r from-green-900/20 to-emerald-900/20 border-green-500/50":"bg-zinc-800/30 border-zinc-700/50"),children:[at.jsxs("div",{className:"flex items-center justify-between mb-2",children:[at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsx("div",{className:"w-2 h-2 rounded-full "+(o?"bg-green-500 animate-pulse":"bg-zinc-500")}),at.jsx("div",{className:"font-semibold text-white text-sm",children:n.name})]}),o&&at.jsx("span",{className:"text-xs bg-green-600 px-2 py-1 rounded-full text-white",children:"LIVE"})]}),at.jsxs("div",{className:"flex items-center justify-between text-sm",children:[at.jsxs("div",{className:"flex items-center gap-2 text-white whitespace-nowrap",children:[at.jsx("img",{src:i_,alt:"STT",className:"w-4 h-4"})," ",formatPrice(n.price)," STT"]}),at.jsxs("div",{className:"text-zinc-400",children:[0===i?"∞":i," per wallet"]})]}),at.jsxs("div",{className:"text-xs text-zinc-400 mt-1",children:[new Date(1e3*Number(n.start)).toLocaleDateString()," - ",new Date(1e3*Number(n.end)).toLocaleDateString()]})]},a)})})})()]})]}),at.jsx("div",{className:"lg:col-span-1",children:we.length>0&&at.jsxs("div",{className:"bg-zinc-900/50 backdrop-blur-sm rounded-3xl border border-zinc-700/30 p-6 lg:sticky lg:top-8",children:[at.jsxs("div",{className:"flex items-center justify-between mb-4",children:[at.jsx("h3",{className:"text-lg font-bold text-white",children:"Collection Preview"}),at.jsx("button",{onClick:clearPreviewCache,className:"text-zinc-400 hover:text-white transition-colors",title:"Refresh preview",children:"↻"})]}),Ne&&at.jsx(LoadingSpinner,{message:"Loading preview",showLogo:!1,size:"small",showProgress:!1,showDots:!1}),at.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[we.slice(0,5).map((n,a)=>at.jsxs("button",{onClick:()=>{he(n);ue(!0)},className:"group",children:[at.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden border border-zinc-700/50 hover:border-pink-500/50 transition-all duration-300 hover:scale-105 bg-zinc-900/50 backdrop-blur-sm relative",children:[at.jsx(LazyImage,{src:n.image,alt:n.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",priority:a<3,sizes:Y?"50vw":"25vw",onError:a=>{console.warn("⚠️ NFT preview image failed to load:",n.image);a.target.src=o.cover}}),n.isPlaceholder&&at.jsx("div",{className:"absolute inset-0 bg-zinc-800/80 flex items-center justify-center",children:at.jsxs("div",{className:"text-center",children:[at.jsx("div",{className:"w-6 h-6 border-2 border-zinc-600 border-t-pink-500 rounded-full animate-spin mx-auto mb-2"}),at.jsx("div",{className:"text-xs text-zinc-400",children:"Loading..."})]})}),at.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-zinc-900/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),at.jsx("div",{className:"mt-1 text-center",children:at.jsx("div",{className:"text-xs text-white font-medium truncate"})})]},a)),we.length>5&&at.jsx("button",{onClick:()=>pe(!0),className:"aspect-square rounded-lg border-2 border-dashed border-zinc-600/50 hover:border-pink-500/50 transition-all duration-300 flex items-center justify-center text-zinc-400 hover:text-zinc-300 bg-zinc-900/50 backdrop-blur-sm hover:scale-105 group",children:at.jsxs("div",{className:"text-center group-hover:scale-110 transition-transform duration-300",children:[at.jsx("div",{className:"text-sm font-semibold",children:"More"}),at.jsxs("div",{className:"text-xs",children:["+",we.length-5]})]})})]})]})})]})]}),X&&at.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-50 p-4",children:at.jsxs("div",{className:"bg-zinc-900/95 backdrop-blur-md rounded-3xl shadow-2xl max-w-lg w-full animate-fadeIn border border-zinc-700/30",children:[at.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-zinc-700/30",children:[at.jsx("h3",{className:"text-xl font-bold text-white",children:"Mint NFT"}),at.jsx("button",{onClick:closeMintModal,className:"text-zinc-400 hover:text-white transition-all duration-200 hover:scale-110",children:at.jsx(Aj,{size:24})})]}),at.jsxs("div",{className:"p-6",children:[at.jsxs("div",{className:"flex items-center gap-4 mb-6 p-4 bg-zinc-800/30 rounded-2xl border border-zinc-700/30",children:[at.jsx("div",{className:"relative mb-6 flex-shrink-0 h-56",children:at.jsx("img",{src:o.cover||o.firstNFTImage||"/default-cover.png",alt:o.name,className:"w-full h-full object-cover rounded-xl",onError:n=>{console.warn("⚠️ Collection cover failed to load:",n.target.src);o.firstNFTImage&&o.firstNFTImage!==n.target.src?n.target.src=o.firstNFTImage:n.target.src="/default-cover.png"}})}),at.jsxs("div",{children:[at.jsx("h4",{className:"text-lg font-semibold text-white",children:o.name}),at.jsxs("p",{className:"text-sm text-zinc-400",children:[k," / ",o.totalSupply," minted"]})]})]}),at.jsxs("div",{className:"mb-6",children:[at.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-3",children:"Quantity"}),at.jsxs("div",{className:"flex items-center justify-between bg-zinc-800/30 rounded-2xl p-4 border border-zinc-700/30",children:[at.jsx("button",{onClick:()=>handleQuantityChange(te-1),disabled:te<=1,className:"w-12 h-12 rounded-xl bg-zinc-700/50 hover:bg-zinc-600/50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center transition-all duration-200 hover:scale-105",children:at.jsx(mT,{size:20})}),at.jsx("span",{className:"text-2xl font-bold text-white px-6",children:te}),at.jsx("button",{onClick:()=>handleQuantityChange(te+1),disabled:te>=getMaxQuantity(),className:"w-12 h-12 rounded-xl bg-zinc-700/50 hover:bg-zinc-600/50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center transition-all duration-200 hover:scale-105",children:at.jsx(AT,{size:20})})]}),at.jsxs("p",{className:"text-xs text-zinc-400 mt-2",children:["Max: ",getMaxQuantity()," per transaction"]})]}),at.jsxs("div",{className:"bg-zinc-800/30 rounded-2xl p-6 mb-6 border border-zinc-700/30",children:[at.jsxs("div",{className:"flex justify-between items-center mb-3",children:[at.jsx("span",{className:"text-zinc-400",children:"Price per NFT:"}),at.jsx("div",{className:"flex items-center gap-2 min-w-0",children:at.jsxs("span",{className:"font-semibold text-white whitespace-nowrap flex items-center gap-1",children:[at.jsx("img",{src:i_,alt:"STT",className:"w-5 h-5 flex-shrink-0"})," ",Oe," STT"]})})]}),at.jsxs("div",{className:"flex justify-between items-center mb-3",children:[at.jsx("span",{className:"text-zinc-400",children:"Quantity:"}),at.jsx("span",{className:"text-white",children:te})]}),at.jsx("div",{className:"border-t border-zinc-700/30 pt-3",children:at.jsxs("div",{className:"flex justify-between items-center",children:[at.jsx("span",{className:"text-lg font-semibold text-white",children:"Total:"}),at.jsx("div",{className:"flex items-center gap-2 min-w-0",children:at.jsxs("span",{className:"text-xl font-bold text-white whitespace-nowrap flex items-center gap-1",children:[at.jsx("img",{src:i_,alt:"STT",className:"w-6 h-6 flex-shrink-0"})," ",re," STT"]})})]})})]}),at.jsxs("button",{onClick:handleMintFromModal,disabled:ie,className:"w-full py-4 rounded-2xl bg-gradient-to-r from-[#00A3FF] to-[#FF1CF7] text-white font-semibold hover:from-[#0095E6] hover:to-[#E61CC7] disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 hover:scale-105 shadow-2xl hover:shadow-pink-500/25 relative overflow-hidden group",children:[at.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),at.jsx("span",{className:"relative z-10",children:ie?"⏳ Processing...":`Mint ${te} NFT${te>1?"s":""}`})]})]})]})}),ae&&at.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-50 p-4",children:at.jsx("div",{className:"bg-zinc-900/95 backdrop-blur-md rounded-3xl shadow-2xl max-w-md w-full animate-fadeIn border border-zinc-700/30",children:at.jsxs("div",{className:"p-8 text-center",children:[at.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-6 shadow-2xl animate-pulse",children:at.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),at.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:"Connect Wallet"}),at.jsx("p",{className:"text-zinc-400 mb-8 text-lg",children:"Please connect your wallet to mint NFTs from this collection"}),at.jsxs("div",{className:"flex gap-4",children:[at.jsx("button",{onClick:()=>oe(!1),className:"flex-1 py-3 px-6 rounded-2xl bg-zinc-700/50 text-white hover:bg-zinc-600/50 transition-all duration-200 hover:scale-105",children:"Cancel"}),at.jsxs("button",{onClick:()=>{oe(!1);const n=document.querySelector("[data-wallet-connect]");n&&n.click()},className:"flex-1 py-3 px-6 rounded-2xl bg-gradient-to-r from-blue-500 to-pink-500 text-white font-semibold hover:from-[#0095E6] hover:to-[#E61CC7] transition-all duration-300 hover:scale-105 shadow-2xl hover:shadow-pink-500/25 relative overflow-hidden group",children:[at.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),at.jsx("span",{className:"relative z-10",children:"Connect Wallet"})]})]})]})})}),le&&de&&at.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex justify-center items-center z-50 p-4",children:at.jsx("div",{className:"bg-zinc-900/95 backdrop-blur-md rounded-3xl shadow-2xl max-w-3xl w-full animate-fadeIn border border-zinc-700/30",children:at.jsxs("div",{className:"p-8",children:[at.jsxs("div",{className:"flex items-center justify-between mb-6",children:[at.jsx("h3",{className:"text-2xl font-bold text-white",children:de.name}),at.jsx("button",{onClick:()=>{ue(!1);he(null)},className:"text-zinc-400 hover:text-white transition-all duration-200 hover:scale-110",children:at.jsx(Aj,{size:28})})]}),at.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[at.jsx("div",{className:"flex-1",children:at.jsx("div",{className:"rounded-2xl overflow-hidden border border-zinc-700/30 shadow-2xl",children:at.jsx("img",{src:de.image,alt:de.name,className:"w-full rounded-2xl object-cover hover:scale-105 transition-transform duration-500",onError:n=>{n.target.src=o.cover}})})}),at.jsxs("div",{className:"flex-1",children:[at.jsx("h4",{className:"text-xl font-semibold text-white mb-3",children:de.name}),at.jsx("p",{className:"text-zinc-300 text-base mb-6",children:de.description||`NFT from ${o.name} collection`}),de.attributes&&de.attributes.length>0&&at.jsxs("div",{children:[at.jsx("h5",{className:"text-lg font-semibold text-zinc-300 mb-4",children:"Attributes"}),at.jsx("div",{className:"grid grid-cols-2 gap-3",children:de.attributes.map((n,a)=>at.jsxs("div",{className:"bg-zinc-800/30 rounded-xl p-3 border border-zinc-700/30 hover:border-pink-500/50 transition-all duration-200 hover:scale-105",children:[at.jsx("div",{className:"text-sm text-zinc-400 mb-1",children:n.trait_type}),at.jsx("div",{className:"text-base text-white font-semibold",children:n.value})]},a))})]})]})]})]})})}),fe&&at.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex justify-center items-center z-50 p-4",children:at.jsx("div",{className:"bg-zinc-900/95 backdrop-blur-md rounded-3xl shadow-2xl max-w-5xl w-full max-h-[85vh] animate-fadeIn border border-zinc-700/30",children:at.jsxs("div",{className:"p-8",children:[at.jsxs("div",{className:"flex items-center justify-between mb-6",children:[at.jsx("h3",{className:"text-2xl font-bold text-white",children:"Collection Gallery"}),at.jsx("button",{onClick:()=>pe(!1),className:"text-zinc-400 hover:text-white transition-all duration-200 hover:scale-110",children:at.jsx(Aj,{size:28})})]}),at.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 max-h-[65vh] overflow-y-auto",children:we.map((n,a)=>at.jsxs("button",{onClick:()=>{he(n);pe(!1);ue(!0)},className:"group",children:[at.jsxs("div",{className:"aspect-square rounded-2xl overflow-hidden border border-zinc-700/30 group-hover:border-pink-500/50 transition-all duration-300 hover:scale-105 bg-zinc-900/50 backdrop-blur-sm shadow-lg relative",children:[at.jsx(LazyImage,{src:n.image,alt:n.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",priority:a<12,sizes:Y?"50vw":J?"25vw":"16vw",onError:a=>{console.warn("⚠️ More NFTs modal image failed to load:",n.image);a.target.src=o.cover}}),n.isPlaceholder&&at.jsx("div",{className:"absolute inset-0 bg-zinc-800/80 flex items-center justify-center",children:at.jsxs("div",{className:"text-center",children:[at.jsx("div",{className:"w-8 h-8 border-2 border-zinc-600 border-t-pink-500 rounded-full animate-spin mx-auto mb-2"}),at.jsx("div",{className:"text-sm text-zinc-400",children:"Loading..."})]})}),at.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-zinc-900/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),at.jsx("div",{className:"mt-3 text-center",children:at.jsx("div",{className:"text-sm text-white font-medium truncate",children:n.name})})]},a))})]})})}),m.visible&&at.jsxs("div",{className:"fixed bottom-20 right-4 bg-zinc-900/95 backdrop-blur-md text-white p-4 rounded-xl shadow-2xl max-w-xs animate-fadeIn cursor-pointer hover:opacity-100 opacity-90 border border-zinc-700/50 hover:border-pink-500/50 transition-all duration-300 hover:scale-105 z-50",children:[at.jsx("p",{className:"text-sm mb-1",children:m.message}),m.txHash&&at.jsxs("a",{href:`https://shannon-explorer.somnia.network/tx/${m.txHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline flex items-center gap-1 text-sm hover:text-pink-400 transition-colors duration-200",children:[at.jsx(V_,{size:16}),"View Transaction"]})]}),me&&at.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-50 p-4",children:at.jsxs("div",{className:"bg-zinc-900/95 backdrop-blur-md rounded-3xl shadow-2xl max-w-md w-full animate-fadeIn border border-zinc-700/30",children:[at.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-zinc-700/30",children:[at.jsx("h3",{className:"text-xl font-bold text-white",children:"Share Collection"}),at.jsx("button",{onClick:()=>ge(!1),className:"text-zinc-400 hover:text-white transition-all duration-200 hover:scale-110",children:at.jsx(Aj,{size:24})})]}),at.jsxs("div",{className:"p-6 space-y-6",children:[at.jsxs("div",{className:"flex items-center gap-4 p-4 bg-zinc-800/30 rounded-2xl border border-zinc-700/30",children:[at.jsx("div",{className:"relative mb-6 flex-shrink-0 h-56",children:at.jsx("img",{src:o.cover||o.firstNFTImage||"/default-cover.png",alt:o.name,className:"w-full h-full object-cover rounded-xl",onError:n=>{console.warn("⚠️ Collection cover failed to load:",n.target.src);o.firstNFTImage&&o.firstNFTImage!==n.target.src?n.target.src=o.firstNFTImage:n.target.src="/default-cover.png"}})}),at.jsxs("div",{children:[at.jsx("h4",{className:"text-lg font-semibold text-white",children:o.name}),at.jsxs("p",{className:"text-sm text-zinc-400",children:[k," / ",o.totalSupply," minted"]})]})]}),at.jsxs("div",{children:[at.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-3",children:"Collection Link"}),at.jsxs("div",{className:"flex items-center gap-3",children:[at.jsx("input",{type:"text",value:window.location.href,readOnly:!0,className:"flex-1 p-3 bg-zinc-800/30 border border-zinc-700/30 rounded-xl text-white text-sm focus:outline-none focus:border-pink-500/50 transition-colors truncate",style:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),at.jsx("button",{onClick:()=>{navigator.clipboard.writeText(window.location.href);be(!0);setTimeout(()=>be(!1),2e3)},className:"px-4 py-3 rounded-xl font-semibold transition-all duration-200 hover:scale-105 flex-shrink-0 "+(ye?"bg-green-600 text-white":"bg-zinc-700/50 hover:bg-zinc-600/50 text-white"),children:ye?"Copied!":"Copy"})]}),at.jsx("div",{className:"mt-2",children:at.jsxs("details",{className:"group",children:[at.jsx("summary",{className:"text-xs text-zinc-400 cursor-pointer hover:text-zinc-300 transition-colors",children:"Show full URL"}),at.jsx("div",{className:"mt-2 p-2 bg-zinc-800/20 rounded-lg border border-zinc-700/30",children:at.jsx("p",{className:"text-xs text-zinc-300 break-all",children:window.location.href})})]})})]}),at.jsxs("div",{children:[at.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-3",children:"Share on Twitter"}),at.jsx("div",{className:"bg-zinc-800/30 rounded-2xl p-4 border border-zinc-700/30 mb-4",children:at.jsxs("p",{className:"text-sm text-zinc-300 mb-3",children:['"I just created my NFT collection "',o.name,'" on Dreava Art! 🚀',at.jsx("br",{}),at.jsx("br",{}),"Check it out: ",at.jsx("span",{className:"break-all text-blue-400",children:window.location.href}),at.jsx("br",{}),at.jsx("br",{}),"Try it yourself, it's really simple! ✨\""]})}),at.jsxs("a",{href:`https://twitter.com/intent/tweet?text=${encodeURIComponent(`I just created my NFT collection "${o.name}" on Dreava Art! 🚀\n\nCheck it out: ${window.location.href}\n\nTry it yourself, it's really simple! ✨`)}`,target:"_blank",rel:"noopener noreferrer",className:"w-full py-3 px-6 rounded-2xl bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold hover:from-blue-600 hover:to-blue-700 transition-all duration-300 hover:scale-105 shadow-2xl hover:shadow-blue-500/25 flex items-center justify-center gap-2",children:[at.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})}),"Tweet"]})]})]})]})})]}):at.jsx("div",{className:"text-center text-zinc-400 mt-20",children:"Collection not found."})};const JF="0xb7C9318Ac06AA59fE3cDD8342769361bB0Cc3d09";const probeContentType=async n=>{try{const a=await fetch(n,{method:"HEAD"});if(a.ok)return(a.headers.get("Content-Type")||"").toLowerCase()}catch{}return""};const getImageUrl=async n=>{try{console.log("🖼️ === getImageUrl DEBUG START ===");console.log("NFT:",n.id,n.collectionName);let i=n.image||n.image_url||n.media_url||"";console.log("Direct image URL:",i);const u=n.contractAddress||n.token?.address;const d=await checkIfFactoryCollection(u)||n.isFactoryNFT;console.log("Is Factory NFT:",d);console.log("Contract Address:",u);const m="string"==typeof n.id?parseInt(n.id,10):n.id;if(d&&u&&null!=m)try{const n=new fb("https://dream-rpc.somnia.network/");const a=new Ey(u,["function contractURI() view returns (string)"],n);const o=await a.contractURI();if(o&&"string"==typeof o){const n=gatewayFallbacks(o,!0);let a=null;for(const o of n)try{const n=await fetch(o);if(n.ok){a=await n.json();break}}catch{}if(a){if(Array.isArray(a.nfts)){const n=a.nfts.find(n=>{const a=n?.tokenURI||n?.tokenUri;if("string"!=typeof a)return!1;const o=a.replace(/\.json$/i,"");return o.endsWith(`/${m}`)});const o=n?.image||n?.image_url;if(o){const n=o.startsWith("ipfs://")?toPreferredGateway(o,!0):o;console.log("✅ contractURI.nfts image:",n);return n}}const n=a.image||a.banner||a.image_url;if(n){const a=n.startsWith("ipfs://")?toPreferredGateway(n,!0):n;console.log("✅ contractURI collection image/banner:",a);i=i||a}}}}catch(nL){console.warn("contractURI image resolution failed:",nL.message)}if(!i&&d&&u&&void 0!==n.id&&null!==n.id){console.log("🏭 Factory NFT detected, fetching token metadata from contract...");try{const n=new fb("https://dream-rpc.somnia.network/");const o=new Ey(u,["function tokenURI(uint256 tokenId) view returns (string)"],n);const i=m;console.log("Calling tokenURI with tokenId:",i);const d=await o.tokenURI(i);console.log("Contract tokenURI result:",d);if(d){const n=gatewayFallbacks(d,!0);try{let a=null;for(const o of n)try{const n=await fetch(o);if(n.ok){a=await n.json();break}}catch{}if(!a&&!/\.json$/i.test(d)){const n=gatewayFallbacks(d+".json",!0);for(const o of n)try{const n=await fetch(o);if(n.ok){a=await n.json();break}}catch{}}if(a){console.log("✅ Token metadata fetched:",a);let n=a.image||a.animation_url||a.image_url;n&&n.startsWith("ipfs://")&&(n=toPreferredGateway(n,!0));if(n){console.log("✅ Using token metadata media URL:",n);return n}}}catch(a){console.error("❌ Error fetching token metadata:",a)}let o=toPreferredGateway(d,!0);if(/\.(png|jpg|jpeg|gif|webp|svg|mp4|webm)$/i.test(o))return o;{const n=[o+".gif",o+".png",o+".webp",o+".jpg",o];for(const a of n)try{const n=await fetch(a,{method:"HEAD"});if(n.ok)return a}catch{}for(const a of n)try{const n=await fetch(a);if(n.ok)return a}catch{}}}}catch(o){console.error("❌ Error fetching tokenURI from contract:",o)}}if(!i&&d&&u&&null!=m)try{const n=new fb("https://dream-rpc.somnia.network/");const a=new Ey(u,["function baseTokenURI() view returns (string)"],n);const o=await a.baseTokenURI();if(o&&"string"==typeof o){const n=toPreferredGateway(o.endsWith("/")?o:o+"/",!0);const a=n+String(m);const i=[a+".gif",a+".png",a+".webp",a+".jpg"];for(const o of i)try{const n=await fetch(o,{method:"HEAD"});if(n.ok){console.log("✅ baseTokenURI image:",o);return o}}catch{}for(const o of i)try{const n=await fetch(o);if(n.ok){console.log("✅ baseTokenURI image (GET):",o);return o}}catch{}}}catch(nL){console.warn("baseTokenURI probing failed:",nL.message)}if(!i&&n.metadata?.image){i=n.metadata.image;console.log("Using metadata image:",i)}if(!i&&n.token_instances&&n.token_instances.length>0){const a=n.token_instances[0];if(a.image){i=a.image;console.log("Using token instance image:",i)}else if(a.image_url){i=a.image_url;console.log("Using token instance image_url:",i)}}if(!i&&n.token?.image){i=n.token.image;console.log("Using token image:",i)}else if(!i&&n.token?.image_url){i=n.token.image_url;console.log("Using token image_url:",i)}if(i){console.log("Processing image URL:",i);if(i.startsWith("ipfs://")){const n=gatewayFallbacks(i,d);try{const a=await fetchFirstOk(n,{method:"HEAD"});i=a.url}catch{i=toPreferredGateway(i,d)}}if(d&&!/\.(png|jpg|jpeg|gif|webp|svg|mp4|webm)$/i.test(i))try{const n=await probeContentType(i);if(!n){const n=[".gif",".png",".webp",".jpg"];for(const a of n){const n=i+a;try{const a=await fetch(n,{method:"HEAD"});if(a.ok){i=n;break}}catch{}}}}catch{}console.log("✅ Final image URL:",i);return i}console.log("❌ No image URL found");console.log("🖼️ === getImageUrl DEBUG END ===");return null}catch(i){console.error("❌ Error getting image URL:",i);return null}};const NFTMedia=({nft:n})=>{console.log("🎨 NFTMedia component called for:",n.id,n.collectionName);const[a,o]=ot.useState(null);const[i,u]=ot.useState(!0);const[d,m]=ot.useState(null);ot.useEffect(()=>{const loadImage=async()=>{console.log("🔄 NFTMedia loadImage started for:",n.id,n.collectionName);try{u(!0);m(null);console.log("📞 Calling getImageUrl for:",n.id);const a=await getImageUrl(n);console.log("📞 getImageUrl returned:",a);if(a){console.log("✅ Setting image URL:",a);o(a);const n=new Image;n.onload=()=>{console.log("✅ Image loaded successfully:",a)};n.onerror=()=>{console.error("❌ Image failed to load:",a);m("Image failed to load")};n.src=a}else{console.log("❌ No image URL found");m("Image not found")}}catch(rL){console.error("❌ Error loading image:",rL);m("Failed to load image")}finally{u(!1)}};loadImage()},[n]);if(i)return at.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200",children:at.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})});if(d||!a)return at.jsx("div",{className:"w-full h-full flex items-center justify-center bg-zinc-700",children:at.jsxs("div",{className:"text-center",children:[at.jsx("img",{src:o_,alt:"Logo",className:"w-16 h-16 mx-auto mb-2"}),at.jsx("div",{className:"text-sm text-zinc-300",children:"No Image"}),d&&at.jsx("div",{className:"text-xs text-zinc-400 mt-1",children:d})]})});const g=/\.(mp4|webm|mov|avi|mkv)(\?|$)/i.test(a||"");return g?at.jsx("video",{src:a,className:"w-full h-full object-cover",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,onError:()=>m("Failed to load video")}):at.jsx("img",{src:a,alt:n.metadata?.name||n.name||`NFT #${n.id}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",onLoad:()=>console.log("✅ Image loaded in component:",a),onError:n=>{console.error("❌ Image error in component:",a);n.target.style.display="none";m("Failed to load image")}})};const NFTCard=({nft:n})=>{try{const[a,o]=ot.useState(null);const[i,u]=ot.useState(!1);const[d,m]=ot.useState(n.collectionName||n.collection?.name||n.contractName||"Unknown Collection");const[g,y]=ot.useState(!1);ot.useEffect(()=>{const loadCollectionInfo=async()=>{const a=n.token?.address;const o=await checkIfFactoryCollection(a);y(o||n.isFactoryNFT);if(o||n.isFactoryNFT){const a=n.collectionName||n.token?.name||"Unknown Collection";m(a)}};loadCollectionInfo()},[n]);const getBaseURI=async()=>{if(!n.token?.address||!n.id)return null;try{u(!0);const a=new fb("https://dream-rpc.somnia.network/");const o=new Ey(n.token.address,["function tokenURI(uint256 tokenId) view returns (string)"],a);const i="string"==typeof n.id?parseInt(n.id,10):n.id;const d=await o.tokenURI(i);if(d&&d.includes("/")){const n=d.lastIndexOf("/");const a=d.substring(0,n+1);console.log("Extracted baseURI:",a);return a}return d}catch(a){console.error("Error getting baseURI:",a);return null}finally{u(!1)}};ot.useEffect(()=>{n.token?.address&&n.id&&getBaseURI().then(a=>{o(a);console.log("Loaded baseURI for NFT",n.id,":",a);console.log("Is Factory NFT (by address):",g?"yes":"no")})},[n.token?.address,n.id]);return at.jsxs("div",{className:"group relative bg-zinc-900 rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300 hover:-translate-y-2 border border-zinc-800",children:[at.jsxs("div",{className:"relative w-full aspect-square",children:[at.jsx(NFTMedia,{nft:n}),g&&at.jsx("div",{className:"absolute bottom-3 left-3",style:{zIndex:30},children:at.jsx("span",{className:"px-3 py-1 text-xs font-bold rounded-full bg-blue-500 text-white shadow-lg",children:"dreava.art"})})]}),at.jsxs("div",{className:"p-4 bg-zinc-900",children:[at.jsxs("div",{className:"flex items-center justify-between mb-2",children:[at.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-500 text-white",children:d}),at.jsxs("span",{className:"text-xs text-zinc-400 font-medium",children:["#",n.id]})]}),at.jsx("h3",{className:"font-bold text-white text-lg mb-2 line-clamp-1",children:n.metadata?.name||n.name||n.title||`NFT #${n.id}`}),at.jsxs("div",{className:"flex items-center justify-between text-sm text-zinc-400 mb-3",children:[at.jsx("span",{className:"font-medium",children:n.tokenType||"ERC-721"}),n.value&&"1"!==n.value&&at.jsxs("span",{className:"bg-zinc-800 px-2 py-1 rounded text-xs font-medium text-zinc-300",children:["x",n.value]})]}),n.description&&at.jsx("p",{className:"text-xs text-zinc-500 line-clamp-2 mb-3",children:n.description}),at.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-zinc-800",children:[at.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-500 text-white",children:"Owned"}),at.jsxs("div",{className:"flex gap-1",children:[at.jsx("button",{className:"p-1.5 rounded-full bg-zinc-800 hover:bg-zinc-700 transition-colors",onClick:async()=>{console.log("🔍 === NFT DEBUG INFO ===");console.log("NFT ID:",n.id);console.log("NFT Name:",n.name||n.metadata?.name);console.log("Collection Name:",n.collectionName);console.log("Collection Address:",n.token?.address);console.log("Contract Address:",n.contractAddress);console.log("Token URI:",n.token_uri||n.tokenURI);console.log("Is Factory NFT (from API):",n.isFactoryNFT);console.log("Factory Address:",JF);const a=n.contractAddress||n.token?.address;const o=await checkIfFactoryCollection(a);console.log("Is Factory NFT (from factory check):",o);if(o&&a){console.log("🏭 === TESTING EXISTING MYNFTS LOGIC ===");try{const o=new fb("https://dream-rpc.somnia.network/");const i=new Ey(a,["function tokenURI(uint256 tokenId) view returns (string)","function baseTokenURI() view returns (string)"],o);const u=await i.baseTokenURI();console.log("Contract baseTokenURI:",u);const d="string"==typeof n.id?parseInt(n.id,10):n.id;console.log("Calling tokenURI with tokenId:",d);const m=await i.tokenURI(d);console.log("TokenURI result:",m);if(m&&m.includes("/")){const n=m.lastIndexOf("/");const a=m.substring(0,n+1);console.log("Extracted baseURI:",a);let o=a+d+".png";console.log("Built image URL:",o);if(o.startsWith("ipfs://")){o=o.replace("ipfs://","https://gateway.lighthouse.storage/ipfs/");console.log("Converted IPFS URL:",o)}console.log("✅ Existing MyNFTs logic image URL:",o)}else{console.log("❌ No baseURI extracted from tokenURI");console.log("❌ This suggests the contract baseURI is not set correctly")}}catch(rL){console.error("❌ Error testing existing MyNFTs logic:",rL)}console.log("🏭 === END TESTING EXISTING MYNFTS LOGIC ===")}if(o&&a){console.log("🏭 === TESTING WORKING FACTORY LOGIC ===");try{const o=new fb("https://dream-rpc.somnia.network/");const i=new Ey(a,["function contractURI() view returns (string)","function tokenURI(uint256 tokenId) view returns (string)"],o);const u=await i.contractURI();console.log("Contract URI:",u);if(u&&""!==u){let n=[u];if(u.startsWith("ipfs://")){const a=u.replace("ipfs://","");n=[`https://gateway.lighthouse.storage/ipfs/${a}`]}console.log("Metadata URLs:",n);let a=null;for(const o of n)try{const n=await fetch(o);if(n.ok){a=await n.json();console.log("✅ Metadata fetched:",a);break}}catch(rL){console.warn("❌ Failed to fetch from:",o,rL.message)}if(a&&a.image){let n=a.image;if(n.startsWith("ipfs://")){const a=n.replace("ipfs://","");n=`https://gateway.lighthouse.storage/ipfs/${a}`}console.log("✅ Working logic image URL:",n)}else console.log("❌ No image in metadata")}else console.log("❌ Empty contractURI");console.log("🔍 Testing tokenURI for token ID:",n.id);const d="string"==typeof n.id?parseInt(n.id,10):n.id;const m=await i.tokenURI(d);console.log("Token URI:",m);if(m&&""!==m){let n=[m];if(m.startsWith("ipfs://")){const a=m.replace("ipfs://","");n=[`https://gateway.lighthouse.storage/ipfs/${a}`]}console.log("Token metadata URLs:",n);let a=null;for(const o of n)try{const n=await fetch(o);if(n.ok){a=await n.json();console.log("✅ Token metadata fetched:",a);break}}catch(rL){console.warn("❌ Failed to fetch token metadata from:",o,rL.message)}if(a&&a.image){let n=a.image;if(n.startsWith("ipfs://")){const a=n.replace("ipfs://","");n=`https://gateway.lighthouse.storage/ipfs/${a}`}console.log("✅ Token image URL:",n)}else console.log("❌ No image in token metadata")}}catch(rL){console.error("❌ Error testing factory logic:",rL)}console.log("🏭 === END TESTING WORKING FACTORY LOGIC ===")}try{const a=new fb("https://dream-rpc.somnia.network/");const o=new Ey(n.token?.address,["function baseTokenURI() view returns (string)","function revealed() view returns (bool)","function tokenURI(uint256) view returns (string)","function ownerOf(uint256) view returns (address)"],a);const i="string"==typeof n.id?parseInt(n.id,10):n.id;const u=await o.baseTokenURI();console.log("baseTokenURI():",u);const d=await o.revealed();console.log("revealed():",d);const m=await o.tokenURI(i);console.log(`tokenURI(${i}):`,m);const g=await o.ownerOf(i);console.log(`ownerOf(${i}):`,g)}catch(rL){console.error("Error analyzing NFT contract state:",rL)}console.log("Full NFT Data:",n);console.log("Token Data:",n.token);console.log("Metadata:",n.metadata);console.log("🔍 === END NFT DEBUG ===")},title:"Debug NFT",children:at.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-zinc-400",children:[at.jsx("circle",{cx:"12",cy:"12",r:"3"}),at.jsx("path",{d:"M12 1v6m0 6v6"}),at.jsx("path",{d:"M21 12h-6m-6 0H3"})]})}),at.jsx("button",{className:"p-1.5 rounded-full bg-zinc-800 hover:bg-zinc-700 transition-colors",children:at.jsx(aT,{size:14,className:"text-zinc-400"})}),at.jsx("button",{className:"p-1.5 rounded-full bg-zinc-800 hover:bg-zinc-700 transition-colors",children:at.jsx(LT,{size:14,className:"text-zinc-400"})}),at.jsx("button",{className:"p-1.5 rounded-full bg-zinc-800 hover:bg-zinc-700 transition-colors",children:at.jsx(q_,{size:14,className:"text-zinc-400"})})]})]})]})]})}catch(rL){console.error("Error in NFTCard:",rL);return at.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-gray-200 shadow-sm",children:[at.jsx("div",{className:"text-red-500 font-medium",children:"Error rendering NFT card"}),at.jsxs("div",{className:"text-gray-500 text-sm",children:["ID: ",n?.id||"unknown"]})]})}};const checkIfFactoryCollection=async n=>{try{if(!n)return!1;const a=new fb("https://dream-rpc.somnia.network/");const o=new Ey(JF,xI,a);const i=await o.getAllCollections();const u=i.map(n=>n.toLowerCase()).includes(n.toLowerCase());console.log("🏭 Factory check for",n,":",{allCollections:i,isFactoryNFT:u});return u}catch(a){console.error("❌ Error checking factory collection:",a);return!1}};const MyNFTs=()=>{const{address:n,isConnected:a}=useReownWallet();const[o,i]=ot.useState([]);const[u,d]=ot.useState(!0);const[m,g]=ot.useState(null);const[y,v]=ot.useState("");const[x,N]=ot.useState("all");const[k,E]=ot.useState("newest");const[S,A]=ot.useState("grid");const[_,j]=ot.useState(!1);ot.useEffect(()=>{const n=new URLSearchParams(window.location.search);const a=n.get("nftId");const o=n.get("contract");const i=n.get("nftName");const u=n.get("collection");if(a||o||i||u){console.log("🔍 Auto-search params from URL:",{nftId:a,contract:o,nftName:i,collection:u});i&&v(i);u&&"all"!==u&&N(u);const n=window.location.pathname;window.history.replaceState({},"",n)}},[]);const I=["all",...new Set(o.map(n=>n.collectionName).filter(Boolean))];const O=o.filter(n=>{const a=""===y||n.metadata?.name?.toLowerCase().includes(y.toLowerCase())||n.collectionName?.toLowerCase().includes(y.toLowerCase());const o="all"===x||n.collectionName===x;return a&&o}).sort((n,a)=>{switch(k){case"newest":return new Date(a.created_at||0)-new Date(n.created_at||0);case"oldest":return new Date(n.created_at||0)-new Date(a.created_at||0);case"name":return(n.metadata?.name||"").localeCompare(a.metadata?.name||"");case"collection":return(n.collectionName||"").localeCompare(a.collectionName||"");default:return 0}});ot.useEffect(()=>{const fetchNFTs=async()=>{if(n)try{d(!0);g(null);console.log("Fetching NFTs for address:",n);const fetchWithRetry=async(n,a=3)=>{for(let o=0;o<a;o++)try{const i=await fetch(n);if(i.ok)return i;if(503===i.status){console.log(`API returned 503, retrying in ${2*(o+1)} seconds... (attempt ${o+1}/${a})`);await new Promise(n=>setTimeout(n,2e3*(o+1)));continue}throw new Error(`HTTP ${i.status}: ${i.statusText}`)}catch(rL){if(o===a-1)throw rL;console.log(`Fetch attempt ${o+1} failed, retrying...`);await new Promise(n=>setTimeout(n,1e3))}};const a=await fetchWithRetry(`https://somnia.w3us.site/api/v2/addresses/${n}/nft/collections?type=ERC-721%2CERC-404%2CERC-1155`);if(!a)throw new Error("API server is completely unavailable");const o=await a.json();console.log("API Response:",o);if(!o.items||!Array.isArray(o.items))throw new Error("Invalid API response format");let u=o.items.flatMap(n=>n.token_instances&&Array.isArray(n.token_instances)?n.token_instances.map(a=>({...a,id:a.id,collectionName:n.token?.name||"Unknown",collectionSymbol:n.token?.symbol||"",tokenType:n.token?.type||"ERC-721",token:n.token||{},isFactoryNFT:n.token?.address?.toLowerCase()===JF.toLowerCase()})):[]);if(!u||0===u.length)try{const a=await fetch(`https://somnia.w3us.site/api/v2/addresses/${n}/nft/tokens?type=ERC-721%2CERC-404%2CERC-1155`);if(a.ok){const n=await a.json();Array.isArray(n.items)&&(u=n.items.map(n=>({...n,id:n.id,collectionName:n.token?.name||"Unknown",collectionSymbol:n.token?.symbol||"",tokenType:n.token?.type||"ERC-721",token:n.token||{},isFactoryNFT:n.token?.address?.toLowerCase()===JF.toLowerCase()})))}}catch(nL){console.warn("Fallback token fetch failed:",nL.message)}const m=u.filter(Boolean);const y=m.filter((n,a,o)=>a===o.findIndex(a=>String(a.id)===String(n.id)&&(a.token?.address||a.contractAddress||"").toLowerCase()===(n.token?.address||n.contractAddress||"").toLowerCase()));console.log("All NFTs (merged):",y.length);i(y);(async()=>{try{const a=new fb("https://dream-rpc.somnia.network/");const o=new Ey(JF,xI,a);const u=await o.getAllCollections();let d=u;if(u.length>250){const n=u.slice(0,50);const a=u.slice(-200);const o=new Set;d=[...n,...a].filter(n=>{const a=n.toLowerCase();if(o.has(a))return!1;o.add(a);return!0})}const m=[];for(const i of d)try{const o=new Ey(i,["function tokenURI(uint256 tokenId) view returns (string)","function balanceOf(address owner) view returns (uint256)","function tokenOfOwnerByIndex(address owner, uint256 index) view returns (uint256)","function contractURI() view returns (string)","function ownerOf(uint256 tokenId) view returns (address)"],a);let u=0;try{u=Number(await o.balanceOf(n))}catch{u=0}if(!u||u<=0)continue;const d=[];for(let a=0;a<Math.min(u,10);a++)try{const i=await o.tokenOfOwnerByIndex(n,a);d.push(Number(i))}catch{}if(0===d.length)try{let m=200;try{const n=new Ey(i,["function totalSupply() view returns (uint256)","function nextTokenId() view returns (uint256)","function currentIndex() view returns (uint256)"],a);try{const a=await n.totalSupply();a&&(m=Math.min(1e3,Number(a)))}catch{}try{const a=await n.nextTokenId();a&&(m=Math.min(1e3,Math.max(m,Number(a))))}catch{}try{const a=await n.currentIndex();a&&(m=Math.min(1e3,Math.max(m,Number(a))))}catch{}}catch{}for(let a=0;a<m&&d.length<u&&d.length<20;a++)try{const i=await o.ownerOf(a);i&&i.toLowerCase()===n.toLowerCase()&&d.push(a)}catch{}}catch{}if(0===d.length)try{const a=await o.contractURI();if(a&&"string"==typeof a){const i=gatewayFallbacks(a,!0);let u=null;for(const n of i)try{const a=await fetch(n);if(a.ok){u=await a.json();break}}catch{}const m=Array.isArray(u?.nfts)?u.nfts:[];for(let a=0;a<Math.min(m.length,50)&&d.length<20;a++){const i=m[a];const u=i?.tokenURI||i?.tokenUri||"";if("string"==typeof u&&u.includes("/")){const a=u.substring(u.lastIndexOf("/")+1).replace(/\.json$/i,"");const i=Number(a);if(!Number.isNaN(i))try{const a=await o.ownerOf(i);a&&a.toLowerCase()===n.toLowerCase()&&d.push(i)}catch{}}}}}catch{}for(const n of d)try{const a=await o.tokenURI(n);const u=gatewayFallbacks(a,!0);let d=null;for(const n of u)try{const a=await fetch(n,{method:"HEAD"});if(a.ok){d=n;break}}catch{}if(!d)for(const n of u)try{const a=await fetch(n);if(a.ok){d=n;break}}catch{}if(!d)continue;let g=null;try{const n=await fetch(d);n.ok&&(g=await n.json())}catch{}const y=g?.image||g?.animation_url||g?.image_url;const v=y?toPreferredGateway(y,!0):null;const x={id:n,metadata:g||{},collectionName:"Factory Collection",tokenType:"ERC-721",token:{address:i,name:"Factory Collection",type:"ERC-721"},isFactoryNFT:!0};v&&(x.metadata.image=v);m.push(x)}catch{}}catch{}m.length&&i(n=>{const a=[...n,...m];return a.filter((n,a,o)=>a===o.findIndex(a=>String(a.id)===String(n.id)&&(a.token?.address||a.contractAddress||"").toLowerCase()===(n.token?.address||n.contractAddress||"").toLowerCase()))})}catch(nL){console.warn("Background factory fallback failed:",nL.message)}})()}catch(rL){console.error("Error fetching NFTs:",rL);rL.message.includes("503")?g("NFT API server is temporarily unavailable. Please try again in a few minutes."):rL.message.includes("Failed to fetch")||rL.message.includes("completely unavailable")?g("NFT API server is currently down. Please try again later."):rL.message.includes("Cannot read properties of undefined")?g("NFT API server is not responding. Please try again in a few minutes."):g(`Failed to load NFTs: ${rL.message}`);i([])}finally{d(!1)}};n&&fetchNFTs()},[n]);return a?u?at.jsx("div",{className:"min-h-screen bg-zinc-950 p-6",children:at.jsx("div",{className:"max-w-7xl mx-auto",children:at.jsxs("div",{className:"animate-pulse",children:[at.jsx("div",{className:"h-8 bg-zinc-800 rounded-lg mb-8 w-48"}),at.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:[...Array(10)].map((n,a)=>at.jsx("div",{className:"bg-zinc-900 rounded-2xl h-80"},a))})]})})}):m?at.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center",children:at.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[at.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-red-500 to-pink-500 rounded-full flex items-center justify-center",children:at.jsx("div",{className:"w-12 h-12 bg-white rounded-full"})}),at.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Unable to Load NFTs"}),at.jsx("p",{className:"text-zinc-400 mb-6",children:m}),at.jsxs("div",{className:"space-y-3",children:[at.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:from-blue-600 hover:to-purple-600 transition-all duration-200",children:"Try Again"}),at.jsxs("div",{className:"text-xs text-zinc-500",children:[at.jsx("p",{children:"If the problem persists, the NFT API server might be temporarily down."}),at.jsx("p",{className:"mt-1",children:"You can check your NFTs directly on the blockchain explorer."})]})]})]})}):at.jsx("div",{className:"min-h-screen bg-zinc-950",children:at.jsxs("div",{className:"max-w-7xl mx-auto p-6 pb-28",children:[at.jsxs("div",{className:"mb-8",children:[at.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"My NFT Collection"}),at.jsxs("p",{className:"text-zinc-400",children:[O.length," NFT",1!==O.length?"s":""," in your collection"]})]}),at.jsxs("div",{className:"mb-6 space-y-4",children:[at.jsxs("div",{className:"relative",children:[at.jsx(BT,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-zinc-400",size:20}),at.jsx("input",{type:"text",placeholder:"Search NFTs or collections...",value:y,onChange:n=>v(n.target.value),className:"w-full pl-10 pr-4 py-3 bg-zinc-900 border border-zinc-800 rounded-xl text-white placeholder-zinc-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm"})]}),at.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[at.jsx("select",{value:x,onChange:n=>N(n.target.value),className:"px-4 py-2 bg-zinc-900 border border-zinc-800 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm",children:I.map(n=>at.jsx("option",{value:n,children:"all"===n?"All Collections":n},n))}),at.jsxs("select",{value:k,onChange:n=>E(n.target.value),className:"px-4 py-2 bg-zinc-900 border border-zinc-800 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm",children:[at.jsx("option",{value:"newest",children:"Newest First"}),at.jsx("option",{value:"oldest",children:"Oldest First"}),at.jsx("option",{value:"name",children:"Name A-Z"}),at.jsx("option",{value:"collection",children:"Collection A-Z"})]}),at.jsxs("div",{className:"flex bg-zinc-900 border border-zinc-800 rounded-lg p-1 shadow-sm",children:[at.jsx("button",{onClick:()=>A("grid"),className:"p-2 rounded-md transition-colors "+("grid"===S?"bg-blue-500 text-white shadow-sm":"text-zinc-400 hover:text-white hover:bg-zinc-800"),children:at.jsx(tT,{size:16})}),at.jsx("button",{onClick:()=>A("list"),className:"p-2 rounded-md transition-colors "+("list"===S?"bg-blue-500 text-white shadow-sm":"text-zinc-400 hover:text-white hover:bg-zinc-800"),children:at.jsx(lT,{size:16})})]})]})]}),0===O.length?at.jsxs("div",{className:"text-center py-20",children:[at.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-zinc-800 to-zinc-700 rounded-full flex items-center justify-center",children:at.jsx("div",{className:"w-12 h-12 bg-zinc-600 rounded-full opacity-50"})}),at.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No NFTs Found"}),at.jsx("p",{className:"text-zinc-400",children:y||"all"!==x?"Try adjusting your filters":"You don't have any NFTs yet"})]}):at.jsx("div",{className:"grid gap-6 "+("grid"===S?"grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5":"grid-cols-1"),children:O.map((n,a)=>{try{return at.jsx(NFTCard,{nft:n},`${n.token?.address}-${n.id}-${a}`)}catch(rL){console.error("Error rendering NFT card:",rL,n);return at.jsxs("div",{className:"bg-zinc-900 rounded-2xl p-4 border border-zinc-800 shadow-sm",children:[at.jsx("div",{className:"text-red-500 font-medium",children:"Error rendering NFT"}),at.jsxs("div",{className:"text-zinc-500 text-sm",children:["ID: ",n.id]})]},`error-${a}`)}})})]})}):at.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center",children:at.jsxs("div",{className:"text-center",children:[at.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:at.jsx("div",{className:"w-12 h-12 bg-white rounded-full"})}),at.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Connect Your Wallet"}),at.jsx("p",{className:"text-zinc-400",children:"Connect your wallet to view your NFT collection"})]})})};const toPreferredGateway=(n,a)=>{if("string"!=typeof n)return n;if(n.startsWith("ipfs://")){const o=n.replace("ipfs://","");return a?`https://gateway.lighthouse.storage/ipfs/${o}`:`https://ipfs.io/ipfs/${o}`}return n};const gatewayFallbacks=(n,a)=>{if("string"!=typeof n)return[n];if(n.startsWith("ipfs://")){const o=n.replace("ipfs://","");const i=a?`https://gateway.lighthouse.storage/ipfs/${o}`:`https://ipfs.io/ipfs/${o}`;return[i,`https://gateway.lighthouse.storage/ipfs/${o}`,`https://cloudflare-ipfs.com/ipfs/${o}`,`https://ipfs.io/ipfs/${o}`]}return[n]};const fetchFirstOk=async(n,a)=>{for(const o of n)try{const n=await fetch(o,a);if(n.ok)return n}catch{}throw new Error("All gateways failed")};const QF="/assets/somniaquest-CJkHo6hu.png";const TruncatedText=({text:n,maxLines:a=3,className:o=""})=>{const[i,u]=ot.useState(!1);const[d,m]=ot.useState(!1);const[g,y]=ot.useState(n);const v=ot.useRef(null);const x=ot.useRef(null);ot.useEffect(()=>{if(v.current){const n=parseInt(window.getComputedStyle(v.current).lineHeight);const o=n*a;m(v.current.scrollHeight>o)}},[n,a]);ot.useEffect(()=>{const handleClickOutside=n=>{i&&!x.current?.contains(n.target)&&u(!1)};document.addEventListener("mousedown",handleClickOutside);return()=>document.removeEventListener("mousedown",handleClickOutside)},[i]);const truncateTextForButton=(n,a)=>{const o=n.split(" ");const i=document.createElement("p");i.style.cssText="\n      position: absolute;\n      visibility: hidden;\n      white-space: pre-wrap;\n      word-wrap: break-word;\n      font-size: 16px;\n      line-height: 1.5;\n      width: calc(100% - 32px);\n      max-width: calc(100% - 32px);\n    ";document.body.appendChild(i);const u=parseInt(window.getComputedStyle(i).lineHeight);const d=u*a;let m=n;for(let g=o.length;g>0;g--){const n=o.slice(0,g).join(" ");i.textContent=n;if(i.scrollHeight<=d){m=n;break}}document.body.removeChild(i);return m};ot.useEffect(()=>{y(d?truncateTextForButton(n,a):n)},[n,d,a]);return d?at.jsxs("div",{className:"relative h-[72px]",children:[at.jsx("div",{className:"overflow-hidden h-full",children:at.jsx("p",{className:o,style:{width:"calc(100% - 32px)"},children:g})}),at.jsx("button",{ref:x,onClick:()=>u(!i),className:"absolute bottom-0 right-0 bg-zinc-800 hover:bg-zinc-700 rounded-full w-6 h-6 flex items-center justify-center text-xs transition-colors z-10",title:"Show full text",children:"⋯"}),i&&at.jsx("div",{className:"fixed bg-zinc-900 border border-zinc-700 rounded-lg p-3 shadow-lg max-w-xs z-50",style:{top:x.current?x.current.getBoundingClientRect().bottom+5:0,left:x.current?x.current.getBoundingClientRect().left-200:0},children:at.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:n})})]}):at.jsx("p",{ref:v,className:o,children:n})};const TruncatedTitle=({text:n,maxLines:a=3,onClick:o})=>{const[i,u]=ot.useState(!1);const[d,m]=ot.useState(!1);const[g,y]=ot.useState(n);const v=ot.useRef(null);const x=ot.useRef(null);ot.useEffect(()=>{if(v.current){const n=parseInt(window.getComputedStyle(v.current).lineHeight);const o=n*a;m(v.current.scrollHeight>o)}},[n,a]);ot.useEffect(()=>{const handleClickOutside=n=>{i&&!x.current?.contains(n.target)&&u(!1)};document.addEventListener("mousedown",handleClickOutside);return()=>document.removeEventListener("mousedown",handleClickOutside)},[i]);const truncateTextForButton=(n,a)=>{const o=n.split(" ");const i=document.createElement("h3");i.style.cssText="\n      position: absolute;\n      visibility: hidden;\n      white-space: pre-wrap;\n      word-wrap: break-word;\n      font-size: 24px;\n      line-height: 1.5;\n      font-weight: bold;\n      width: calc(100% - 32px);\n    ";document.body.appendChild(i);const u=parseInt(window.getComputedStyle(i).lineHeight);const d=u*a;let m=n;for(let g=o.length;g>0;g--){const n=o.slice(0,g).join(" ");i.textContent=n;if(i.scrollHeight<=d){m=n;break}}document.body.removeChild(i);return m};ot.useEffect(()=>{y(d?truncateTextForButton(n,a):n)},[n,d,a]);return at.jsxs("div",{className:"relative h-[72px]",children:[at.jsx("div",{className:"overflow-hidden h-full",children:at.jsx("h3",{ref:v,onClick:o,className:"text-2xl font-bold text-white cursor-pointer hover:text-blue-400 transition-colors",style:d?{width:"calc(100% - 32px)"}:{},children:d?g:n})}),d&&at.jsx("button",{ref:x,onClick:n=>{n.stopPropagation();u(!i)},className:"absolute bottom-0 right-0 bg-zinc-800 hover:bg-zinc-700 rounded-full w-6 h-6 flex items-center justify-center text-xs transition-colors z-10",title:"Show full title",children:"⋯"}),i&&at.jsx("div",{className:"fixed bg-zinc-900 border border-zinc-700 rounded-lg p-3 shadow-lg max-w-xs z-50",style:{top:x.current?x.current.getBoundingClientRect().bottom+5:0,left:x.current?x.current.getBoundingClientRect().left-200:0},children:at.jsx("h3",{className:"text-white text-lg font-bold",children:n})})]})};const SomniaQuest=()=>{const[n,a]=ot.useState([]);const[o,i]=ot.useState(0);const[u,d]=ot.useState(!1);const[m,g]=ot.useState(null);const[y,v]=ot.useState([]);const[x,N]=ot.useState(!1);const[k,E]=ot.useState(!1);const[S,A]=ot.useState(0);const[_,j]=ot.useState({totalRequests:0,successfulMints:0,failedMints:0,queueLength:0,averageProcessingTime:0});const[I,O]=ot.useState({});const[R,B]=ot.useState({});const[M,z]=ot.useState(!1);const[L,D]=ot.useState(!1);const[W,H]=ot.useState(null);const[q,G]=ot.useState(1);const[V,Z]=ot.useState("0");const[Y,J]=ot.useState(!1);const[X,ee]=ot.useState({visible:!1,message:"",txHash:""});const[te,ne]=ot.useState(0);const re=useNavigate();const{address:se,isConnected:ae,switchNetwork:oe}=useReownWallet();const{collections:ie,loading:ce,error:le,refetch:ue}=useActiveCollections();const writeContractAsync=async n=>{if(!window.ethereum)throw new Error("Wallet not connected");try{const n=await(async()=>{try{return await(oe?.(Jj))}catch{return{success:!1}}})();n?.success||await ensureSomniaNetwork()}catch(nL){throw new Error("Please switch to Somnia Testnet")}const a=new mb(window.ethereum);const o=await a.getSigner();const i=new Ey(n.address,n.abi,o);const u={...n.value>0?{value:n.value}:{},...n.gasSettings||{}};const d=await i[n.functionName](...n.args,u);return d.hash};const de={BASE_GAS_LIMIT:3e5,MAX_GAS_LIMIT:5e5,GAS_LIMIT:3e6,MAX_GAS_PRICE_GWEI:50,WARNING_GAS_PRICE_GWEI:20,PRICE_MULTIPLIER:1.2,RETRY_ATTEMPTS:5,RETRY_DELAY:1e3};const he=ot.useMemo(()=>ie&&0!==ie.length?ie.map(n=>{const getPhases=n=>n.phases||n.metadata?.phases||{};const a=getPhases(n);const o=Math.floor(Date.now()/1e3);const i=[{key:"Whitelist",priority:1},{key:"FCFS",priority:2},{key:"Public",priority:3}];const u=new Map;Object.entries(a).forEach(([n,a])=>{u.set(n,{...a,name:n})});const d=i.filter(n=>u.has(n.key)).map(n=>{const a=u.get(n.key);const i=Number(a.start);const d=Number(a.end);const m=i<=o&&o<=d;const g="0x0000000000000000000000000000000000000000000000000000000000000000"===a.merkleRoot||a.isPublic;return{...a,name:n.key,isActive:m,isPublic:g,priority:n.priority}}).sort((n,a)=>n.priority-a.priority);const m=d.find(n=>n.isActive);return{...n,maxSupply:n.totalSupply||n.maxSupply||0,minted:n.minted||0,activePhase:m?{name:m.name,start:Number(m.start),end:Number(m.end),price:m.price,maxPerWallet:Number(m.maxPerWallet)||1,merkleRoot:m.merkleRoot,isPublic:m.isPublic}:null,sortedPhases:d}}):[],[ie]);ot.useEffect(()=>{if(X.visible){const n=setTimeout(()=>ee(n=>({...n,visible:!1})),5e3);return()=>clearTimeout(n)}},[X.visible]);const showToast=(n,a="")=>{ee({visible:!0,message:n,txHash:a})};const refreshCollectionData=async n=>{try{a(a=>a.map(a=>a.address===n?{...a,minted:a.minted+1}:a));B(a=>({...a,[n]:(a[n]||0)+1}));console.log("✅ Collection data updated locally for:",n);setTimeout(()=>{ue();checkWalletLimits()},1e3)}catch(o){console.error("❌ Failed to update collection data:",o)}};ot.useEffect(()=>{a(he)},[he]);ot.useEffect(()=>{u&&m&&he.length>0&&checkWalletLimits()},[u,m,he]);ot.useEffect(()=>()=>{v([]);N(!1);E(!1)},[]);ot.useEffect(()=>{d(ae);g(se)},[ae,se]);ot.useEffect(()=>{if(W&&W.activePhase){const n=W.activePhase.price||"0";const a=(parseFloat(n)*q).toFixed(4);Z(a)}},[q,W]);const checkWalletLimits=async()=>{if(m&&u)try{const i=new fb("https://dream-rpc.somnia.network/");const u={};console.log("🔍 Checking wallet limits for user:",m);for(const g of he)if(g.activePhase)try{const o=new Ey(g.address,vI,i);const d=g.phases||g.metadata?.phases||{};const y=Object.entries(d);const v=y.findIndex(([,n])=>{const a=Number(n.start);const o=Number(n.end);const i=Math.floor(Date.now()/1e3);return a<=i&&i<=o});console.log(`🔍 Collection ${g.name} (${g.address}):`,{activePhaseIndex:v,maxPerWallet:g.activePhase.maxPerWallet});if(v>=0)try{const n=await o.mintedPerPhase(v,m);console.log(`✅ mintedPerPhase exists for ${g.name}:`,Number(n));u[g.address]=Number(n)}catch(n){console.warn(`⚠️ mintedPerPhase failed for ${g.name}:`,n);try{const n=await o.balanceOf(m);console.log(`🔄 Fallback balanceOf for ${g.name}:`,Number(n));u[g.address]=Number(n)}catch(a){console.warn(`⚠️ balanceOf also failed for ${g.name}:`,a);u[g.address]=0}}else{console.log(`⚠️ No active phase found for ${g.name}`);u[g.address]=0}}catch(o){console.warn(`⚠️ Could not check wallet limit for ${g.address}:`,o);u[g.address]=0}console.log("📊 Final user minted counts:",u);B(u);const d=Object.entries(u).some(([n,a])=>{const o=he.find(a=>a.address===n);if(!o||!o.activePhase)return!1;const i=o.activePhase.maxPerWallet||0;return i>0&&a>=i});z(d)}catch(o){console.error("❌ Failed to check wallet limits:",o)}};const openMintModal=n=>{if(u){H(n);G(1);D(!0)}else J(!0)};const closeMintModal=()=>{D(!1);H(null);G(1);J(!1)};const handleQuantityChange=n=>{if(!W)return;const a=W.activePhase?.maxPerWallet||0;const o=R[W.address]||0;const i=a>0?a-o:999;const u=Math.min(i,10);n>=1&&n<=u&&G(n)};const getMaxQuantity=n=>{if(!n||!n.activePhase)return 1;const a=n.activePhase.maxPerWallet||0;const o=R[n.address]||0;const i=a>0?a-o:999;return Math.min(i,10)};const handleMintFromModal=async()=>{if(W&&u)try{E(!0);const n=await mintWithEscalation(W,q);if(n.success){showToast("✅ Mint successful!",n.txHash);await refreshCollectionData(W.address);closeMintModal()}else showToast("❌ Mint failed. Please try again.")}catch(n){console.error("❌ Mint failed:",n);showToast("❌ Mint failed. Please try again.")}finally{E(!1)}};const mintWithEscalation=async(n,a=1)=>{if(!n||!n.activePhase)return{success:!1,error:"No active phase"};if(!u||!m)return{success:!1,error:"Wallet not connected"};const o=3;let i=null;for(let u=1;u<=o;u++)try{console.log(`🚀 Mint attempt ${u}/${o} for ${n.name}`);console.log("📊 Collection details:",{address:n.address,activePhase:n.activePhase,price:n.activePhase.price,isPublic:n.activePhase.isPublic});const i=await getCompetitiveGasSettings(u);console.log("⛽ Gas settings:",i);const v=n.activePhase.price||"0";const x=parseEther((parseFloat(v)*a).toString());console.log("💰 Price calculation:",{price:v,quantity:a,value:x.toString()});let N=[];if(!n.activePhase.isPublic){const a=Object.keys(n.phases||{}).find(a=>{const o=n.phases[a];return o&&Number(o.start)<=Math.floor(Date.now()/1e3)&&Math.floor(Date.now()/1e3)<=Number(o.end)});if(a){const o=`${n.address}_${a}_whitelist_proofs`;const i=JSON.parse(localStorage.getItem(o)||"{}");N=i[m]||[];console.log("🔐 Whitelist proof:",N)}}console.log("📝 Transaction parameters:",{address:n.address,functionName:"mint",args:[a,N],value:x.toString(),gasSettings:i});const k=await writeContractAsync({chainId:50312,address:n.address,abi:vI,functionName:"mint",args:[a,N],...x>0?{value:x}:{},...i});console.log("✅ Mint transaction sent:",k);const E=new fb("https://dream-rpc.somnia.network/");let S=null;let A=3;for(;A>0&&!S;)try{S=await E.waitForTransaction(k,1,3e4);break}catch(d){console.warn(`Transaction confirmation attempt ${4-A} failed:`,d);A--;if(A>0)await new Promise(n=>setTimeout(n,2e3));else try{S=await E.getTransactionReceipt(k)}catch(g){throw d}}if(1===S.status){console.log("✅ Mint successful!");try{await fetch("/api/quest/record-action",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({walletAddress:m,actionType:"nft_minted",data:{collectionAddress:n.address,collectionName:n.name,quantity:a,txHash:k,price:n.activePhase?.price||"0"}})})}catch(y){console.warn("⚠️ Failed to record quest action:",y)}return{success:!0,txHash:k}}throw new Error("Transaction failed on-chain")}catch(v){console.error(`❌ Mint attempt ${u} failed:`,v);console.error("❌ Error details:",{message:v.message,code:v.code,data:v.data,transaction:v.transaction});i=v;if(u<o){const n=1e3*u;console.log(`⏳ Waiting ${n}ms before retry...`);await new Promise(a=>setTimeout(a,n))}}console.error("❌ All mint attempts failed");return{success:!1,error:i?.message||"Mint failed"}};const getCompetitiveGasSettings=async(n=1)=>{try{const a=new fb("https://dream-rpc.somnia.network/");const o=await a.getFeeData();const i=y.length;let u=de.PRICE_MULTIPLIER;i>100?u*=1.5:i>50?u*=1.3:i>20&&(u*=1.2);u*=1+.2*(n-1);if(o.maxFeePerGas&&o.maxPriorityFeePerGas){const n=Number(o.maxFeePerGas);const a=Number(o.maxPriorityFeePerGas);return{maxFeePerGas:Math.ceil(n*u),maxPriorityFeePerGas:Math.ceil(a*u),gasLimit:de.GAS_LIMIT}}{const n=Number(o.gasPrice);const a=Math.ceil(n*u);const i=parseUnits$1(de.MAX_GAS_PRICE_GWEI.toString(),"gwei");const d=Math.min(a,Number(i));return{gasPrice:d,gasLimit:de.GAS_LIMIT}}}catch(a){console.error("❌ Error getting gas settings:",a);return{gasLimit:de.GAS_LIMIT}}};const formatTimeLeft=n=>{const a=Date.now();const o=n-a;if(o<=0)return"Ended";const i=Math.floor(o/864e5);const u=Math.floor(o%864e5/36e5);const d=Math.floor(o%36e5/6e4);const m=Math.floor(o%6e4/1e3);return`${i}d ${u}h ${d}m ${m}s`};const nextSlide=()=>{ne(a=>(a+1)%n.length)};const prevSlide=()=>{ne(a=>(a-1+n.length)%n.length)};return ce?at.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:at.jsxs("div",{className:"text-center",children:[at.jsx("div",{className:"w-16 h-16 border-4 border-[#42C9EE] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),at.jsx("p",{className:"text-zinc-400",children:"Loading Quest Collections..."})]})}):le?at.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:at.jsxs("div",{className:"text-center",children:[at.jsxs("p",{className:"text-red-400 mb-4",children:["Error loading collections: ",le]}),at.jsx("button",{onClick:()=>ue(),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Retry"})]})}):at.jsxs("div",{className:"min-h-screen bg-black text-white",children:[at.jsx("div",{className:"relative py-8",children:at.jsxs("div",{className:"relative bg-black border border-white/20 rounded-2xl p-8 mx-auto max-w-5xl",children:[at.jsx("img",{src:QF,alt:"Bird with Trophy",className:"absolute -left-8 -bottom-20 w-30 md:w-36"}),at.jsxs("div",{className:"max-w-2xl mx-auto text-center",children:[at.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-500 via-pink-500 to-purple-500 mb-6",children:"Somnia Quest"}),at.jsxs("p",{className:"text-base md:text-lg text-white leading-relaxed max-w-xl mx-auto",children:["Animate your unique PFP, turn it into an NFT, and earn rewards!",at.jsx("br",{}),"Be creative. The more people mint your NFT, the higher your chances.",at.jsx("br",{}),"Winners with the most mints will receive USDC rewards, karma points from dreava.art."]}),at.jsx(sv,{to:"/explore#create",className:"mt-6 inline-block py-[10px] px-6 rounded-lg bg-gradient-to-r from-[#00A3FF] to-[#FF1CF7] text-white font-semibold text-sm transition-transform active:scale-95 shadow-md",children:"Create collection"})]})]})}),at.jsxs("div",{className:"mx-auto max-w-5xl pb-20 mt-8",children:[at.jsxs("div",{className:"relative",children:[at.jsx("button",{onClick:prevSlide,className:"absolute -left-12 top-1/2 transform -translate-y-1/2 z-10 bg-black/50 rounded-full p-2 hover:bg-black/70 transition",children:at.jsx("img",{src:iI,alt:"Previous",className:"w-6 h-6"})}),at.jsx("button",{onClick:nextSlide,className:"absolute -right-12 top-1/2 transform -translate-y-1/2 z-10 bg-black/50 rounded-full p-2 hover:bg-black/70 transition",children:at.jsx("img",{src:cI,alt:"Next",className:"w-6 h-6"})}),at.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:n.slice(te,te+3).map((n,a)=>{const o=n&&n.maxSupply?Math.min(100,Math.round(n.minted/n.maxSupply*100)):0;const i=n.activePhase?n.activePhase.price:"0";const getWalletLimit=()=>{if(!n.activePhase)return 0;const a=n.phases||n.metadata?.phases||{};const o=Object.entries(a);const i=o.findIndex(([,n])=>{const a=Number(n.start);const o=Number(n.end);const i=Math.floor(Date.now()/1e3);return a<=i&&i<=o});if(i>=0){const a=`${n.address}_${i}`;return I[a]??n.activePhase.maxPerWallet??0}return n.activePhase.maxPerWallet??0};const u=getWalletLimit();const d=R[n.address]||0;const m=u>0&&d>=u;return at.jsxs("div",{className:"bg-[#111] p-8 rounded-2xl text-white shadow-lg border border-zinc-800/50 h-[650px] flex flex-col",children:[at.jsx("div",{className:"relative mb-6 flex-shrink-0 h-56",children:at.jsx("img",{src:n.cover||n.firstNFTImage||"/default-cover.png",alt:n.name,className:"w-full h-full object-cover rounded-xl",onError:a=>{console.warn("⚠️ Collection cover failed to load:",a.target.src);n.firstNFTImage&&n.firstNFTImage!==a.target.src?a.target.src=n.firstNFTImage:a.target.src="/default-cover.png"}})}),at.jsxs("div",{className:"flex justify-between items-start mb-3 flex-shrink-0 h-[72px]",children:[at.jsx("div",{className:"flex-1 mr-2",children:at.jsx(TruncatedTitle,{text:n.name,onClick:()=>re(`/launchpad/collection/${n.address}`)})}),at.jsx("span",{className:"text-blue-400 text-2xl flex-shrink-0",children:"✔"})]}),at.jsx("div",{className:"mb-3 flex-shrink-0 h-[72px]",children:at.jsx(TruncatedText,{text:n.description,className:"text-base text-gray-400"})}),at.jsxs("div",{className:"flex justify-between text-base text-gray-300 mb-3 flex-shrink-0 h-6",children:[at.jsxs("span",{children:["Supply: ",n.minted," / ",n.maxSupply]}),at.jsxs("span",{className:"flex items-center gap-1",children:["Price:",at.jsx("img",{src:i_,alt:"STT",className:"w-4 h-4"}),i," STT"]})]}),at.jsx("div",{className:"w-full h-3 bg-zinc-800 rounded-full mb-4 overflow-hidden flex-shrink-0",children:at.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-pink-500",style:{width:`${o}%`}})}),at.jsx("div",{className:"mb-4 flex-shrink-0 h-6",children:n.activePhase&&at.jsxs("p",{className:"text-base text-pink-400",children:["Ends in: ",formatTimeLeft(1e3*Number(n.activePhase.end))]})}),at.jsxs("div",{className:"mt-auto flex-shrink-0",children:[y.length>1&&at.jsxs("div",{className:"mb-2 text-center",children:[at.jsxs("p",{className:"text-sm text-yellow-400",children:["⏳ Queue: ",y.length," pending"]}),_.totalRequests>0&&at.jsxs("p",{className:"text-xs text-green-400",children:["Success Rate: ",Math.round(_.successfulMints/_.totalRequests*100),"%"]}),at.jsxs("div",{className:"mt-1",children:[at.jsx("div",{className:"w-full bg-zinc-800 rounded-full h-2",children:at.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-pink-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(100,_.successfulMints/Math.max(_.totalRequests,1)*100)}%`}})}),at.jsxs("p",{className:"text-xs text-zinc-400 mt-1",children:["Progress: ",Math.round(_.successfulMints/Math.max(_.totalRequests,1)*100),"%"]})]})]}),y.length>20&&at.jsx("div",{className:"mb-2 text-center",children:at.jsx("p",{className:"text-sm text-red-400 animate-pulse",children:"🔥 HOT SALE - High demand detected!"})}),at.jsx("button",{onClick:()=>openMintModal(n),disabled:!n.activePhase||!n.activePhase.isPublic||n.minted>=n.maxSupply||k||x||m,className:"w-full py-[10px] rounded-lg font-semibold text-white transition-all duration-200 "+(k||x?"bg-zinc-600 text-zinc-300 cursor-not-allowed":n.minted>=n.maxSupply||m?"bg-zinc-700 text-zinc-400 cursor-not-allowed":n.activePhase&&n.activePhase.isPublic?"bg-gradient-to-r from-[#00A3FF] to-[#FF1CF7] hover:opacity-90 shadow-md":"bg-zinc-700 text-zinc-400 cursor-not-allowed"),children:k||x?"⏳ Processing...":n.minted>=n.maxSupply||m?"Minted":n.activePhase&&n.activePhase.isPublic?`Mint for ${i} STT`:n.activePhase&&!n.activePhase.isPublic?"Whitelist Only":"No active phase"}),n.minted>=n.maxSupply&&at.jsx("div",{className:"mt-2 text-center",children:at.jsx("p",{className:"text-sm text-red-400",children:"Collection is sold out!"})}),m&&n.minted<n.maxSupply&&at.jsx("div",{className:"mt-2 text-center",children:at.jsxs("p",{className:"text-sm text-yellow-400",children:["Wallet limit reached (",d,"/",0===u?"∞":u,")"]})}),0===u&&at.jsx("div",{className:"mt-2 text-center",children:at.jsx("p",{className:"text-sm text-blue-400",children:"Unlimited minting per wallet"})}),at.jsx("a",{href:`https://shannon-explorer.somnia.network/address/${n.address}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-400 underline mt-4 block text-center hover:text-blue-300 transition-colors",children:"View Contract"})]})]},n.address)})})]}),at.jsxs("div",{className:"mt-20 text-center",children:[at.jsx("h2",{className:"text-3xl font-bold text-white mb-8",children:"Somnia Rewards"}),at.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[at.jsxs("div",{className:"bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 p-6 rounded-lg",children:[at.jsx("div",{className:"text-2xl font-bold text-white mb-2",children:"USDC"}),at.jsx("div",{className:"text-white text-sm",children:"from Somnia Network"})]}),at.jsxs("div",{className:"bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 p-6 rounded-lg",children:[at.jsx("div",{className:"text-2xl font-bold text-white mb-2",children:"Karma Points"}),at.jsx("div",{className:"text-white text-sm",children:"from dreava.art"})]}),at.jsxs("div",{className:"bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 p-6 rounded-lg",children:[at.jsx("div",{className:"text-2xl font-bold text-white mb-2",children:"Roles on Discord"}),at.jsx("div",{className:"text-white text-sm",children:"from dreava.art"})]})]})]}),at.jsxs("div",{className:"mt-20 text-center",children:[at.jsx("h2",{className:"text-3xl font-bold text-white mb-8",children:"How to Join the Quest:"}),at.jsx("div",{className:"bg-black/40 border border-white/10 rounded-lg p-8",children:at.jsxs("ul",{className:"text-left space-y-4",children:[at.jsxs("li",{className:"flex items-start gap-3",children:[at.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"}),at.jsx("span",{className:"text-white",children:"Follow Somnia and Dreava.art on Discord and Twitter"})]}),at.jsxs("li",{className:"flex items-start gap-3",children:[at.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"}),at.jsx("span",{className:"text-white",children:"Animate your unique PFP — creativity is highly encouraged"})]}),at.jsxs("li",{className:"flex items-start gap-3",children:[at.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"}),at.jsx("span",{className:"text-white",children:"Upload your animated NFT to the Dreava.art launchpad"})]})]})})]})]}),L&&W&&at.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",children:at.jsxs("div",{className:"bg-zinc-900 rounded-2xl shadow-2xl max-w-md w-full animate-fadeIn",children:[at.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-zinc-700",children:[at.jsx("h3",{className:"text-xl font-bold text-white",children:"Mint NFT"}),at.jsx("button",{onClick:closeMintModal,className:"text-zinc-400 hover:text-white transition-colors",children:at.jsx(Aj,{size:24})})]}),at.jsxs("div",{className:"p-6",children:[at.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[at.jsx("img",{src:W.cover,alt:W.name,className:"w-16 h-16 rounded-lg object-cover"}),at.jsxs("div",{children:[at.jsx("h4",{className:"text-lg font-semibold text-white",children:W.name}),at.jsxs("p",{className:"text-sm text-zinc-400",children:[W.minted," / ",W.maxSupply," minted"]})]})]}),at.jsxs("div",{className:"mb-6",children:[at.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-3",children:"Quantity"}),at.jsxs("div",{className:"flex items-center justify-between bg-zinc-800 rounded-lg p-3",children:[at.jsx("button",{onClick:()=>handleQuantityChange(q-1),disabled:q<=1,className:"w-10 h-10 rounded-lg bg-zinc-700 hover:bg-zinc-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:at.jsx(mT,{size:20})}),at.jsx("span",{className:"text-xl font-bold text-white px-4",children:q}),at.jsx("button",{onClick:()=>handleQuantityChange(q+1),disabled:q>=getMaxQuantity(W),className:"w-10 h-10 rounded-lg bg-zinc-700 hover:bg-zinc-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:at.jsx(AT,{size:20})})]}),at.jsxs("p",{className:"text-xs text-zinc-400 mt-2",children:["Max: ",getMaxQuantity(W)," per transaction"]})]}),at.jsxs("div",{className:"bg-zinc-800 rounded-lg p-4 mb-6",children:[at.jsxs("div",{className:"flex justify-between items-center mb-2",children:[at.jsx("span",{className:"text-zinc-400",children:"Price per NFT:"}),at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsx("img",{src:i_,alt:"STT",className:"w-5 h-5"}),at.jsxs("span",{className:"font-semibold text-white",children:[W.activePhase?.price||"0"," STT"]})]})]}),at.jsxs("div",{className:"flex justify-between items-center mb-2",children:[at.jsx("span",{className:"text-zinc-400",children:"Quantity:"}),at.jsx("span",{className:"text-white",children:q})]}),at.jsx("div",{className:"border-t border-zinc-700 pt-2",children:at.jsxs("div",{className:"flex justify-between items-center",children:[at.jsx("span",{className:"text-lg font-semibold text-white",children:"Total:"}),at.jsxs("div",{className:"flex items-center gap-2",children:[at.jsx("img",{src:i_,alt:"STT",className:"w-6 h-6"}),at.jsxs("span",{className:"text-xl font-bold text-white",children:[V," STT"]})]})]})})]}),at.jsx("button",{onClick:handleMintFromModal,disabled:k,className:"w-full py-3 rounded-lg bg-gradient-to-r from-[#00A3FF] to-[#FF1CF7] text-white font-semibold hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:k?"⏳ Processing...":`Mint ${q} NFT${q>1?"s":""}`})]})]})}),Y&&at.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",children:at.jsx("div",{className:"bg-zinc-900 rounded-2xl shadow-2xl max-w-md w-full animate-fadeIn",children:at.jsxs("div",{className:"p-6 text-center",children:[at.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4",children:at.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:at.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),at.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Connect Wallet"}),at.jsx("p",{className:"text-zinc-400 mb-6",children:"Please connect your wallet to mint NFTs"}),at.jsxs("div",{className:"flex gap-3",children:[at.jsx("button",{onClick:()=>J(!1),className:"flex-1 py-2 px-4 rounded-lg bg-zinc-700 text-white hover:bg-zinc-600 transition-colors",children:"Cancel"}),at.jsx("button",{onClick:()=>{J(!1);const n=document.querySelector("[data-wallet-connect]");n&&n.click()},className:"flex-1 py-2 px-4 rounded-lg bg-gradient-to-r from-blue-500 to-pink-500 text-white font-semibold hover:opacity-90 transition-all duration-200",children:"Connect Wallet"})]})]})})}),X.visible&&at.jsxs("div",{className:"fixed bottom-20 right-4 bg-zinc-800 text-white p-4 rounded-lg shadow-lg max-w-xs animate-fadeIn cursor-pointer hover:opacity-100 opacity-90",children:[at.jsx("p",{className:"text-sm mb-1",children:X.message}),X.txHash&&at.jsxs("a",{href:`https://shannon-explorer.somnia.network/tx/${X.txHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline flex items-center gap-1 text-sm",children:[at.jsx(V_,{size:16}),"View Transaction"]})]})]})};const PrivacyPolicy=()=>at.jsx("div",{className:"min-h-screen bg-gradient-to-br from-zinc-900 via-zinc-800 to-zinc-900 text-white",children:at.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12",children:[at.jsxs("div",{className:"mb-8",children:[at.jsx(sv,{to:"/",className:"inline-flex items-center text-blue-400 hover:text-blue-300 mb-6",children:"← Back to Home"}),at.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-400 to-pink-400 bg-clip-text text-transparent mb-4",children:"Privacy Policy"}),at.jsxs("p",{className:"text-zinc-400 text-lg",children:["Last updated: ",(new Date).toLocaleDateString()]})]}),at.jsxs("div",{className:"space-y-8 text-zinc-300 leading-relaxed",children:[at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"1. Introduction"}),at.jsx("p",{children:'Dreava Art NFT Launchpad ("we," "our," or "us") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our NFT marketplace and related services.'})]}),at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"2. Information We Collect"}),at.jsxs("div",{className:"space-y-4",children:[at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"2.1 Personal Information"}),at.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[at.jsx("li",{children:"Wallet addresses and public keys"}),at.jsx("li",{children:"Email addresses (if provided)"}),at.jsx("li",{children:"Username or display names"}),at.jsx("li",{children:"Profile information and avatars"})]})]}),at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"2.2 Transaction Data"}),at.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[at.jsx("li",{children:"NFT minting transactions"}),at.jsx("li",{children:"Purchase and sale history"}),at.jsx("li",{children:"Bidding and auction data"}),at.jsx("li",{children:"Gas fees and transaction hashes"})]})]}),at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"2.3 Technical Information"}),at.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[at.jsx("li",{children:"IP addresses and device information"}),at.jsx("li",{children:"Browser type and version"}),at.jsx("li",{children:"Operating system"}),at.jsx("li",{children:"Usage analytics and performance data"})]})]})]})]}),at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"3. How We Use Your Information"}),at.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[at.jsx("li",{children:"Provide and maintain our NFT marketplace services"}),at.jsx("li",{children:"Process transactions and verify ownership"}),at.jsx("li",{children:"Facilitate communication between users"}),at.jsx("li",{children:"Improve our platform and user experience"}),at.jsx("li",{children:"Comply with legal obligations and prevent fraud"}),at.jsx("li",{children:"Send important updates and notifications"})]})]}),at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"4. Information Sharing"}),at.jsx("p",{className:"mb-4",children:"We do not sell, trade, or rent your personal information to third parties. We may share your information in the following circumstances:"}),at.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[at.jsx("li",{children:"With your explicit consent"}),at.jsx("li",{children:"To comply with legal requirements or court orders"}),at.jsx("li",{children:"To protect our rights, property, or safety"}),at.jsx("li",{children:"With service providers who assist in our operations"}),at.jsx("li",{children:"In connection with a business transfer or merger"})]})]}),at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"5. Blockchain Transparency"}),at.jsx("p",{children:"Please note that blockchain transactions are inherently public and transparent. Information such as wallet addresses, transaction amounts, and NFT ownership is publicly visible on the blockchain and cannot be deleted or modified."})]}),at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"6. Cookies and Tracking"}),at.jsx("p",{className:"mb-4",children:"We use cookies and similar technologies to enhance your experience:"}),at.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[at.jsx("li",{children:"Essential cookies for platform functionality"}),at.jsx("li",{children:"Analytics cookies to understand usage patterns"}),at.jsx("li",{children:"Preference cookies to remember your settings"}),at.jsx("li",{children:"Security cookies to protect against fraud"})]})]}),at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"7. Data Security"}),at.jsx("p",{children:"We implement industry-standard security measures to protect your information, including encryption, secure servers, and regular security audits. However, no method of transmission over the internet is 100% secure."})]}),at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"8. Your Rights"}),at.jsx("p",{className:"mb-4",children:"You have the following rights regarding your personal information:"}),at.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[at.jsx("li",{children:"Access and review your personal data"}),at.jsx("li",{children:"Request correction of inaccurate information"}),at.jsx("li",{children:"Request deletion of your personal data (where applicable)"}),at.jsx("li",{children:"Object to processing of your data"}),at.jsx("li",{children:"Data portability"}),at.jsx("li",{children:"Withdraw consent at any time"})]})]}),at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"9. Children's Privacy"}),at.jsx("p",{children:"Our services are not intended for children under 13 years of age. We do not knowingly collect personal information from children under 13. If you are a parent or guardian and believe your child has provided us with personal information, please contact us immediately."})]}),at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"10. International Transfers"}),at.jsx("p",{children:"Your information may be transferred to and processed in countries other than your own. We ensure appropriate safeguards are in place to protect your information in accordance with this Privacy Policy."})]}),at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"11. Changes to This Policy"}),at.jsx("p",{children:'We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last updated" date. Your continued use of our services after any changes constitutes acceptance of the updated policy.'})]}),at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"12. Contact Us"}),at.jsx("p",{className:"mb-4",children:"If you have any questions about this Privacy Policy or our data practices, please contact us:"}),at.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg",children:[at.jsxs("p",{children:[at.jsx("strong",{children:"Email:"})," privacy@dreava.art"]}),at.jsxs("p",{children:[at.jsx("strong",{children:"Discord:"})," ",at.jsx("a",{href:"https://discord.gg/R24uFV3k8b",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:"Join our Discord"})]}),at.jsxs("p",{children:[at.jsx("strong",{children:"Twitter:"})," ",at.jsx("a",{href:"https://x.com/dreava_art",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:"@dreava_art"})]})]})]})]})]})});const TermsOfService=()=>at.jsx("div",{className:"min-h-screen bg-gradient-to-br from-zinc-900 via-zinc-800 to-zinc-900 text-white",children:at.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-12",children:[at.jsxs("div",{className:"mb-8",children:[at.jsx(sv,{to:"/",className:"inline-flex items-center text-blue-400 hover:text-blue-300 mb-6",children:"← Back to Home"}),at.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-400 to-pink-400 bg-clip-text text-transparent mb-4",children:"Terms of Service"}),at.jsxs("p",{className:"text-zinc-400 text-lg",children:["Last updated: ",(new Date).toLocaleDateString()]})]}),at.jsxs("div",{className:"space-y-8 text-zinc-300 leading-relaxed",children:[at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"1. Acceptance of Terms"}),at.jsx("p",{children:'By accessing and using Dreava Art NFT Launchpad ("the Platform"), you accept and agree to be bound by the terms and provision of this agreement. If you do not agree to abide by the above, please do not use this service.'})]}),at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"2. Description of Service"}),at.jsx("p",{className:"mb-4",children:"Dreava Art NFT Launchpad is a decentralized platform that enables users to:"}),at.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[at.jsx("li",{children:"Create and deploy NFT collections"}),at.jsx("li",{children:"Mint NFTs from various collections"}),at.jsx("li",{children:"Participate in whitelist and public sales"}),at.jsx("li",{children:"Manage NFT metadata and distribution"}),at.jsx("li",{children:"Interact with smart contracts on the Somnia network"})]})]}),at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"3. User Accounts and Responsibilities"}),at.jsxs("div",{className:"space-y-4",children:[at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"3.1 Account Creation"}),at.jsx("p",{children:"To use our services, you must connect a compatible cryptocurrency wallet. You are responsible for maintaining the security of your wallet and private keys."})]}),at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"3.2 User Conduct"}),at.jsx("p",{className:"mb-2",children:"You agree not to:"}),at.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[at.jsx("li",{children:"Use the platform for any illegal or unauthorized purpose"}),at.jsx("li",{children:"Violate any applicable laws or regulations"}),at.jsx("li",{children:"Infringe upon intellectual property rights"}),at.jsx("li",{children:"Attempt to gain unauthorized access to our systems"}),at.jsx("li",{children:"Interfere with or disrupt the platform's operation"}),at.jsx("li",{children:"Create or distribute harmful content or malware"})]})]})]})]}),at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"4. NFT Creation and Minting"}),at.jsxs("div",{className:"space-y-4",children:[at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"4.1 Collection Creation"}),at.jsx("p",{children:"When creating NFT collections, you represent and warrant that you have all necessary rights to the content you upload and that it does not infringe on any third-party rights."})]}),at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"4.2 Content Guidelines"}),at.jsx("p",{className:"mb-2",children:"All content must comply with our community standards:"}),at.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[at.jsx("li",{children:"No explicit, violent, or harmful content"}),at.jsx("li",{children:"No copyright or trademark infringement"}),at.jsx("li",{children:"No impersonation of others"}),at.jsx("li",{children:"No spam or misleading information"})]})]}),at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"4.3 Minting Process"}),at.jsx("p",{children:"Minting NFTs requires payment of gas fees and any applicable platform fees. All transactions are irreversible once confirmed on the blockchain."})]})]})]}),at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"5. Smart Contracts and Blockchain"}),at.jsxs("div",{className:"space-y-4",children:[at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"5.1 Smart Contract Risks"}),at.jsx("p",{children:"Our platform interacts with smart contracts on the Somnia blockchain. While we strive for security, smart contracts may contain bugs or vulnerabilities. You acknowledge these risks and use the platform at your own discretion."})]}),at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"5.2 Blockchain Transactions"}),at.jsx("p",{children:"All transactions are recorded on the blockchain and are publicly visible. We cannot reverse or modify blockchain transactions once they are confirmed."})]}),at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"5.3 Network Issues"}),at.jsx("p",{children:"We are not responsible for network congestion, delays, or failures on the Somnia network or any other blockchain network that may affect transaction processing."})]})]})]}),at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"6. Fees and Payments"}),at.jsxs("div",{className:"space-y-4",children:[at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"6.1 Platform Fees"}),at.jsx("p",{children:"We may charge fees for certain services, including but not limited to collection creation, whitelist management, and premium features. All fees are clearly displayed before transaction confirmation."})]}),at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"6.2 Gas Fees"}),at.jsx("p",{children:"Users are responsible for paying gas fees required for blockchain transactions. Gas fees are determined by network conditions and are not controlled by our platform."})]}),at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"6.3 Payment Methods"}),at.jsx("p",{children:"All payments must be made in STT (Somnia Token) or other supported cryptocurrencies. We do not accept traditional fiat currencies."})]})]})]}),at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"7. Intellectual Property"}),at.jsxs("div",{className:"space-y-4",children:[at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"7.1 Platform Rights"}),at.jsx("p",{children:"The platform, including its design, code, and content, is owned by Dreava Art and is protected by intellectual property laws. You may not copy, modify, or distribute our platform without permission."})]}),at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"7.2 User Content"}),at.jsx("p",{children:"You retain ownership of your NFT content. By using our platform, you grant us a limited license to display and promote your content as part of our services."})]})]})]}),at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"8. Privacy and Data Protection"}),at.jsx("p",{children:"Your privacy is important to us. Please review our Privacy Policy, which also governs your use of the platform, to understand our practices regarding the collection and use of your information."})]}),at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"9. Disclaimers and Limitations"}),at.jsxs("div",{className:"space-y-4",children:[at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"9.1 Service Availability"}),at.jsx("p",{children:"We strive to maintain high availability but do not guarantee uninterrupted access to our services. We may temporarily suspend services for maintenance or updates."})]}),at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"9.2 No Investment Advice"}),at.jsx("p",{children:"Our platform is not a financial advisor. NFT values are volatile and can fluctuate significantly. You should conduct your own research and consider consulting with financial professionals."})]}),at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"9.3 Limitation of Liability"}),at.jsx("p",{children:"To the maximum extent permitted by law, Dreava Art shall not be liable for any indirect, incidental, special, consequential, or punitive damages arising from your use of the platform."})]})]})]}),at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"10. Indemnification"}),at.jsx("p",{children:"You agree to indemnify and hold harmless Dreava Art, its officers, directors, employees, and agents from any claims, damages, losses, or expenses arising from your use of the platform or violation of these terms."})]}),at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"11. Termination"}),at.jsxs("div",{className:"space-y-4",children:[at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"11.1 Termination by User"}),at.jsx("p",{children:"You may stop using our services at any time. However, blockchain transactions cannot be reversed."})]}),at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"11.2 Termination by Platform"}),at.jsx("p",{children:"We may terminate or suspend your access to the platform immediately, without prior notice, for conduct that we believe violates these terms or is harmful to other users or the platform."})]})]})]}),at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"12. Governing Law and Disputes"}),at.jsxs("div",{className:"space-y-4",children:[at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"12.1 Governing Law"}),at.jsx("p",{children:"These terms shall be governed by and construed in accordance with the laws of the jurisdiction where Dreava Art is incorporated, without regard to conflict of law principles."})]}),at.jsxs("div",{children:[at.jsx("h3",{className:"text-xl font-medium text-white mb-2",children:"12.2 Dispute Resolution"}),at.jsx("p",{children:"Any disputes arising from these terms or your use of the platform shall be resolved through binding arbitration in accordance with the rules of the relevant arbitration association."})]})]})]}),at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"13. Changes to Terms"}),at.jsx("p",{children:"We reserve the right to modify these terms at any time. We will notify users of significant changes through the platform or other reasonable means. Your continued use of the platform after changes constitutes acceptance of the updated terms."})]}),at.jsxs("section",{children:[at.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"14. Contact Information"}),at.jsx("p",{className:"mb-4",children:"If you have any questions about these Terms of Service, please contact us:"}),at.jsxs("div",{className:"bg-zinc-800 p-4 rounded-lg",children:[at.jsxs("p",{children:[at.jsx("strong",{children:"Email:"})," legal@dreava.art"]}),at.jsxs("p",{children:[at.jsx("strong",{children:"Discord:"})," ",at.jsx("a",{href:"https://discord.gg/R24uFV3k8b",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:"Join our Discord"})]}),at.jsxs("p",{children:[at.jsx("strong",{children:"Twitter:"})," ",at.jsx("a",{href:"https://x.com/dreava_art",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:"@dreava_art"})]})]})]})]})]})});const XF="/assets/IMG_6919-DMw4xPz9.MOV";const eL="/assets/IMG_6924-CH2EN6pR.MOV";function App(){const[n,a]=ot.useState(!0);const[o,i]=ot.useState(!1);ot.useEffect(()=>{const n=sessionStorage.getItem("dreava_loaded");if(n){a(!1);i(!0)}},[]);const handleLoadingComplete=()=>{a(!1);i(!0);sessionStorage.setItem("dreava_loaded","true")};return at.jsx(ReownProvider,{children:at.jsx(SearchProvider,{children:at.jsx(BrowserRouter,{children:at.jsxs("div",{className:"flex flex-col min-h-screen bg-black text-white relative overflow-x-hidden",children:[n&&!o&&at.jsx(LoadingScreen,{onLoadingComplete:handleLoadingComplete}),at.jsx(BackgroundCircles,{}),at.jsx(Header,{}),at.jsx(WalletStatusMonitor,{enabled:"true"===localStorage.getItem("showWalletMonitor")}),at.jsx(DebugLoader,{enabled:"true"===localStorage.getItem("showDebugLoader")}),at.jsx("div",{className:"flex-grow",children:at.jsxs(Routes,{children:[at.jsx(Route,{path:"/",element:at.jsx(Home,{})}),at.jsx(Route,{path:"/explore",element:at.jsx(Explore,{})}),at.jsx(Route,{path:"/create-nfts",element:at.jsx(CreateNFTs,{})}),at.jsx(Route,{path:"/create-dreams",element:at.jsx(CreateDreams,{})}),at.jsx(Route,{path:"/launchpad",element:at.jsx(Launchpad,{})}),at.jsx(Route,{path:"/marketplace",element:at.jsx(Marketplace,{})}),at.jsx(Route,{path:"/json-upload",element:at.jsx(JsonUploadPage,{})}),at.jsx(Route,{path:"/dashboard",element:at.jsx(MyStudio,{})}),at.jsx(Route,{path:"/launchpad/active-sales",element:at.jsx(ActiveSales,{portalVideo:XF,portalHoverVideo:eL,showBaseVideoAlways:!0})}),at.jsx(Route,{path:"/active-sales",element:at.jsx(ActiveSales,{portalVideo:XF,portalHoverVideo:eL,showBaseVideoAlways:!0})}),at.jsx(Route,{path:"/manage/:address",element:at.jsx(ManageCollection,{})}),at.jsx(Route,{path:"/edit-phases/:address",element:at.jsx(PhaseSettingsWrapper,{})}),at.jsx(Route,{path:"/manage-wls/:address",element:at.jsx(ManageWLs,{})}),at.jsx(Route,{path:"/edit-nfts/:address",element:at.jsx(EditNFTs,{})}),at.jsx(Route,{path:"/launchpad/collection/:address",element:at.jsx(MintPage,{})}),at.jsx(Route,{path:"/my-nfts",element:at.jsx(MyNFTs,{})}),at.jsx(Route,{path:"/somnia-quest",element:at.jsx(SomniaQuest,{})}),at.jsx(Route,{path:"/privacy",element:at.jsx(PrivacyPolicy,{})}),at.jsx(Route,{path:"/terms",element:at.jsx(TermsOfService,{})}),at.jsx(Route,{path:"/test",element:at.jsx(TestPage,{})}),at.jsx(Route,{path:"/simple",element:at.jsx(SimpleTestPage,{})}),at.jsx(Route,{path:"/reown-test",element:at.jsx(ReownTest,{})})]})}),at.jsx(Footer$1,{})]})})})})}const tL=new Uc({defaultOptions:{queries:{retry:3,retryDelay:1e3,staleTime:3e4,gcTime:3e5}}});wb.createRoot(document.getElementById("root")).render(at.jsx(it.StrictMode,{children:at.jsx(ReownProvider,{children:at.jsx(QueryClientProvider,{client:tL,children:at.jsx(App,{})})})}));export{trim as $,createClient as A,ot as B,slice$1 as C,keccak256$1 as D,pad$2 as E,hexToString as F,vs as G,getChainId$1 as H,tc as I,createNonceManager as J,serializeErc6492Signature as K,getAction$1 as L,parseAbi as M,stringToBytes as N,hexToBytes$1 as O,stringify$1$1 as P,Cr as Q,lc as R,observe as S,poll as T,parseAccount as U,concat$1 as V,estimateFeesPerGas as W,prepareAuthorization as X,serializeStateOverride as Y,An as Z,__vitePreload as _,decodeAbiParameters as a,dt as a0,formatLog$1 as a1,formatTransactionReceipt$1 as a2,prettyPrint as a3,formatGwei as a4,decodeErrorResult as a5,da as a6,ua as a7,la as a8,encodeAbiParameters as a9,stringToHex as aa,size$4 as ab,parseSignature as ac,encodePacked as ad,requireEventemitter3 as ae,QM as af,getAugmentedNamespace as ag,requireEvents as ah,requireBuffer as ai,CB as aj,encodeFunctionData as b,createConnector as c,Li as d,Tr as e,hashMessage as f,getAddress$2 as g,hashTypedData as h,injected as i,hexToNumber$1 as j,at as k,isAddressEqual as l,defineChain$1 as m,numberToHex as n,createPublicClient as o,http as p,isAddress$1 as q,isHex as r,getCode as s,toHex as t,decodeFunctionData as u,readContract$1 as v,withTimeout$1 as w,waitForCallsStatus as x,hexToBigInt as y,getDefaultExportFromCjs as z};
//# sourceMappingURL=index-DI5Oa0Wo.js.map
