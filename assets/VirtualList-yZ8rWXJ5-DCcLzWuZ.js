import{B as e,k as t}from"./index-DI5Oa0Wo.js";import"./wagmi-Cp7MbjcB.js";const VirtualList=({items:s=[],itemHeight:n=200,containerHeight:r=600,overscan:a=5,renderItem:i,className:l="",onScroll:c=null,keyExtractor:o=(e,t)=>t})=>{const[m,u]=e.useState(0);const h=e.useRef(null);const d=e.useRef(null);const g=e.useMemo(()=>{const e=Math.max(0,Math.floor(m/n)-a);const t=Math.min(s.length-1,Math.ceil((m+r)/n)+a);return{startIndex:e,endIndex:t}},[m,r,n,a,s.length]);const x=e.useMemo(()=>{const{startIndex:e,endIndex:t}=g;return s.slice(e,t+1).map((t,s)=>({item:t,index:e+s,style:{position:"absolute",top:(e+s)*n,height:n,width:"100%"}}))},[s,g,n]);const v=e.useCallback(e=>{const t=e.target.scrollTop;u(t);c&&c(t)},[c]);const p=e.useCallback(e=>{d.current||(d.current=requestAnimationFrame(()=>{v(e);d.current=null}))},[v]);e.useEffect(()=>{const e=h.current;if(e){e.addEventListener("scroll",p,{passive:!0});return()=>{e.removeEventListener("scroll",p);d.current&&cancelAnimationFrame(d.current)}}},[p]);const f=s.length*n;return t.jsx("div",{ref:h,className:`overflow-auto ${l}`,style:{height:r},onScroll:p,children:t.jsx("div",{style:{height:f,position:"relative"},children:x.map(({item:e,index:s,style:n})=>t.jsx("div",{style:n,children:i(e,s)},o(e,s)))})})};const VirtualImageList=({images:s=[],itemHeight:n=200,containerHeight:r=600,renderImage:a,className:i=""})=>{const[l,c]=e.useState(new Set);e.useCallback(e=>{c(t=>new Set(t).add(e))},[]);const o=e.useCallback((e,s)=>t.jsxs("div",{className:"relative",children:[a(e,s,l.has(s)),!l.has(s)&&t.jsx("div",{className:"absolute inset-0 bg-zinc-800 animate-pulse",style:{height:n}})]}),[a,l,n]);return t.jsx(VirtualList,{items:s,itemHeight:n,containerHeight:r,renderItem:o,className:i,keyExtractor:(e,t)=>`image-${t}-${e.src||e}`})};export{VirtualImageList,VirtualList as default};
//# sourceMappingURL=VirtualList-yZ8rWXJ5-DCcLzWuZ.js.map
