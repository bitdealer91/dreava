{"version":3,"file":"serviceWorkerCache-BN3PYH06-COMpp69h.js","sources":["../../assets/serviceWorkerCache-BN3PYH06.js"],"sourcesContent":["class l{constructor(){this.cacheName=\"dreava-upload-cache-v1\",this.initialized=!1,this.init()}async init(){try{\"serviceWorker\"in navigator&&(await this.registerServiceWorker(),this.initialized=!0)}catch{}}async registerServiceWorker(){try{return location.hostname===\"localhost\"||location.port?null:await navigator.serviceWorker.register(\"/sw.js\",{scope:\"/\"})}catch(e){return console.warn(\"ServiceWorker registration skipped/failed:\",e),null}}async cacheUpload(e,t){if(this.initialized)try{const a=await caches.open(this.cacheName),r=`upload_${await this.generateFileHash(e)}`,i=new Response(JSON.stringify(t),{headers:{\"Content-Type\":\"application/json\",\"Cache-Control\":\"max-age=86400\"}});return await a.put(r,i),r}catch{}}async getCachedUpload(e){if(!this.initialized)return null;try{const t=await caches.open(this.cacheName),c=`upload_${await this.generateFileHash(e)}`,r=await t.match(c);return r?await r.json():null}catch{return null}}async cacheMetadata(e,t){if(this.initialized)try{const a=await caches.open(this.cacheName),c=`metadata_${e}`,r=new Response(JSON.stringify(t),{headers:{\"Content-Type\":\"application/json\",\"Cache-Control\":\"max-age=3600\"}});return await a.put(c,r),c}catch{}}async getCachedMetadata(e){if(!this.initialized)return null;try{const t=await caches.open(this.cacheName),a=`metadata_${e}`,c=await t.match(a);return c?await c.json():null}catch{return null}}async clearCache(){if(this.initialized)try{const e=await caches.open(this.cacheName),t=await e.keys();for(const a of t)await e.delete(a)}catch{}}async getCacheStats(){if(!this.initialized)return null;try{const e=await caches.open(this.cacheName),t=await e.keys();let a=0;for(const c of t){const r=await e.match(c);if(r){const i=await r.blob();a+=i.size}}return{entries:t.length,totalSize:a,cacheName:this.cacheName}}catch{return null}}async generateFileHash(e){return new Promise(t=>{const a=new FileReader;a.onload=c=>{const r=c.target.result;crypto.subtle.digest(\"SHA-256\",r).then(i=>{const n=Array.from(new Uint8Array(i)).map(s=>s.toString(16).padStart(2,\"0\")).join(\"\");t(n)})},a.readAsArrayBuffer(e)})}async cacheNetworkResponse(e,t){if(this.initialized)try{await(await caches.open(this.cacheName)).put(e,t.clone())}catch{}}async getCachedNetworkResponse(e){if(!this.initialized)return null;try{const a=await(await caches.open(this.cacheName)).match(e);return a||null}catch{return null}}}export{l as ServiceWorkerCache};\n//# sourceMappingURL=serviceWorkerCache-BN3PYH06.js.map\n"],"names":["l","e","a","r","i","c","n"],"mappings":"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"}