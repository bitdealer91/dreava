var t=Object.defineProperty;var __typeError=t=>{throw TypeError(t)};var __defNormalProp=(e,r,i)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i;var __publicField=(t,e,r)=>__defNormalProp(t,"symbol"!=typeof e?e+"":e,r);var __accessCheck=(t,e,r)=>e.has(t)||__typeError("Cannot "+r);var __privateGet=(t,e,r)=>(__accessCheck(t,e,"read from private field"),r?r.call(t):e.get(t));var __privateAdd=(t,e,r)=>e.has(t)?__typeError("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r);var __privateSet=(t,e,r,i)=>(__accessCheck(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r);var __privateMethod=(t,e,r)=>(__accessCheck(t,e,"access private method"),r);var __privateWrapper=(t,e,r,i)=>({set _(i){__privateSet(t,e,i,r)},get _(){return __privateGet(t,e,i)}});var e,r,i,a,o,c,l,u,f,d,g,p,m,y,w,A,E,v,k,B,x,P,N,I,C,T,O,R,S,U,L,F,M,D,H,G,_,Q,z,j,V,W,J,K,q,Z,Y,X,$,tt,et,nt,rt,st,it,at,ot,ct,lt,ut,ht,ft,dt,gt,pt,mt,yt,wt,At,bt,Et,vt,kt,Bt,xt,Pt,Nt,It,Ct,Tt,Ot,Rt,St,Ut,Lt,Ft,Mt,Dt,Ht,Gt,_t,Qt,zt,jt,Vt,Wt,Jt,Kt,qt,Zt,Yt,Xt,$t,te,ee,ne,re,se,ie,ae,oe,ce,le,ue,he,fe,de,ge,pe,me,ye,we,Ae,be,Ee,ve,ke,Be,xe,Pe,Ne,Ie,Ce,Te,Oe,Re,Se,Ue,Le,Fe,Me,De,He,Ge,_e,Qe,ze,je,Ve,We,Je,Ke,qe,Ze,Ye,Xe,$e,tn,en,nn,rn,sn,an,on,cn,ln,un,hn,fn,dn,gn,pn,mn,yn,wn;const An="6.15.0";function checkType(t,e,r){const i=e.split("|").map(t=>t.trim());for(let o=0;o<i.length;o++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const a=new Error(`invalid value for type ${e}`);a.code="INVALID_ARGUMENT";a.argument=`value.${r}`;a.value=t;throw a}async function resolveProperties(t){const e=Object.keys(t);const r=await Promise.all(e.map(e=>Promise.resolve(t[e])));return r.reduce((t,r,i)=>{t[e[i]]=r;return t},{})}function defineProperties(t,e,r){for(let i in e){let a=e[i];const o=r?r[i]:null;o&&checkType(a,o,i);Object.defineProperty(t,i,{enumerable:!0,value:a,writable:!1})}}function stringify(t,e){if(null==t)return"null";null==e&&(e=new Set);if("object"==typeof t){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(t=>stringify(t,e)).join(", ")+" ]";if(t instanceof Uint8Array){const e="0123456789abcdef";let r="0x";for(let i=0;i<t.length;i++){r+=e[t[i]>>4];r+=e[15&t[i]]}return r}if("object"==typeof t&&"function"==typeof t.toJSON)return stringify(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const r=Object.keys(t);r.sort();return"{ "+r.map(r=>`${stringify(r,e)}: ${stringify(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function isError(t,e){return t&&t.code===e}function isCallException(t){return isError(t,"CALL_EXCEPTION")}function makeError(t,e,r){let i=t;{const i=[];if(r){if("message"in r||"code"in r||"name"in r)throw new Error(`value will overwrite populated values: ${stringify(r)}`);for(const t in r){if("shortMessage"===t)continue;const e=r[t];i.push(t+"="+stringify(e))}}i.push(`code=${e}`);i.push(`version=${An}`);i.length&&(t+=" ("+i.join(", ")+")")}let a;switch(e){case"INVALID_ARGUMENT":a=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":a=new RangeError(t);break;default:a=new Error(t)}defineProperties(a,{code:e});r&&Object.assign(a,r);null==a.shortMessage&&defineProperties(a,{shortMessage:i});return a}function assert(t,e,r,i){if(!t)throw makeError(e,r,i)}function assertArgument(t,e,r,i){assert(t,e,"INVALID_ARGUMENT",{argument:r,value:i})}function assertArgumentCount(t,e,r){null==r&&(r="");r&&(r=": "+r);assert(t>=e,"missing argument"+r,"MISSING_ARGUMENT",{count:t,expectedCount:e});assert(t<=e,"too many arguments"+r,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test"!=="test".normalize(e))throw new Error("bad");if("NFD"===e){const t=String.fromCharCode(233).normalize("NFD");const e=String.fromCharCode(101,769);if(t!==e)throw new Error("broken")}t.push(e)}catch(r){}return t},[]);function assertPrivate(t,e,r){null==r&&(r="");if(t!==e){let t=r,e="new";if(r){t+=".";e+=" "+r}assert(!1,`private constructor; use ${t}from* methods`,"UNSUPPORTED_OPERATION",{operation:e})}}function _getBytes(t,e,r){if(t instanceof Uint8Array)return r?new Uint8Array(t):t;if("string"==typeof t&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const e=new Uint8Array((t.length-2)/2);let r=2;for(let i=0;i<e.length;i++){e[i]=parseInt(t.substring(r,r+2),16);r+=2}return e}assertArgument(!1,"invalid BytesLike value",e||"value",t)}function getBytes(t,e){return _getBytes(t,e,!1)}function getBytesCopy(t,e){return _getBytes(t,e,!0)}function isHexString(t,e){return!("string"!=typeof t||!t.match(/^0x[0-9A-Fa-f]*$/))&&(("number"!=typeof e||t.length===2+2*e)&&(!0!==e||t.length%2==0))}function isBytesLike(t){return isHexString(t,!0)||t instanceof Uint8Array}const bn="0123456789abcdef";function hexlify(t){const e=getBytes(t);let r="0x";for(let i=0;i<e.length;i++){const t=e[i];r+=bn[(240&t)>>4]+bn[15&t]}return r}function concat(t){return"0x"+t.map(t=>hexlify(t).substring(2)).join("")}function dataLength(t){return isHexString(t,!0)?(t.length-2)/2:getBytes(t).length}function dataSlice(t,e,r){const i=getBytes(t);null!=r&&r>i.length&&assert(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:i,length:i.length,offset:r});return hexlify(i.slice(null==e?0:e,null==r?i.length:r))}function zeroPad(t,e,r){const i=getBytes(t);assert(e>=i.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(i),length:e,offset:e+1});const a=new Uint8Array(e);a.fill(0);r?a.set(i,e-i.length):a.set(i,0);return hexlify(a)}function zeroPadValue(t,e){return zeroPad(t,e,!0)}function zeroPadBytes(t,e){return zeroPad(t,e,!1)}const En=BigInt(0);const vn=BigInt(1);const kn=9007199254740991;function fromTwos(t,e){const r=getUint(t,"value");const i=BigInt(getNumber(e,"width"));assert(r>>i===En,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t});if(r>>i-vn){const t=(vn<<i)-vn;return-((~r&t)+vn)}return r}function toTwos(t,e){let r=getBigInt(t,"value");const i=BigInt(getNumber(e,"width"));const a=vn<<i-vn;if(r<En){r=-r;assert(r<=a,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const e=(vn<<i)-vn;return(~r&e)+vn}assert(r<a,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return r}function mask(t,e){const r=getUint(t,"value");const i=BigInt(getNumber(e,"bits"));return r&(vn<<i)-vn}function getBigInt(t,e){switch(typeof t){case"bigint":return t;case"number":assertArgument(Number.isInteger(t),"underflow",e||"value",t);assertArgument(t>=-kn&&t<=kn,"overflow",e||"value",t);return BigInt(t);case"string":try{if(""===t)throw new Error("empty string");return"-"===t[0]&&"-"!==t[1]?-BigInt(t.substring(1)):BigInt(t)}catch(r){assertArgument(!1,`invalid BigNumberish string: ${r.message}`,e||"value",t)}}assertArgument(!1,"invalid BigNumberish value",e||"value",t)}function getUint(t,e){const r=getBigInt(t,e);assert(r>=En,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t});return r}const Bn="0123456789abcdef";function toBigInt(t){if(t instanceof Uint8Array){let e="0x0";for(const r of t){e+=Bn[r>>4];e+=Bn[15&r]}return BigInt(e)}return getBigInt(t)}function getNumber(t,e){switch(typeof t){case"bigint":assertArgument(t>=-kn&&t<=kn,"overflow",e||"value",t);return Number(t);case"number":assertArgument(Number.isInteger(t),"underflow",e||"value",t);assertArgument(t>=-kn&&t<=kn,"overflow",e||"value",t);return t;case"string":try{if(""===t)throw new Error("empty string");return getNumber(BigInt(t),e)}catch(r){assertArgument(!1,`invalid numeric string: ${r.message}`,e||"value",t)}}assertArgument(!1,"invalid numeric value",e||"value",t)}function toNumber(t){return getNumber(toBigInt(t))}function toBeHex(t,e){const r=getUint(t,"value");let i=r.toString(16);if(null==e)i.length%2&&(i="0"+i);else{const r=getNumber(e,"width");assert(2*r>=i.length,`value exceeds width (${r} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});for(;i.length<2*r;)i="0"+i}return"0x"+i}function toBeArray(t){const e=getUint(t,"value");if(e===En)return new Uint8Array([]);let r=e.toString(16);r.length%2&&(r="0"+r);const i=new Uint8Array(r.length/2);for(let a=0;a<i.length;a++){const t=2*a;i[a]=parseInt(r.substring(t,t+2),16)}return i}function toQuantity(t){let e=hexlify(isBytesLike(t)?t:toBeArray(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);""===e&&(e="0");return"0x"+e}const xn="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const Pn=BigInt(58);function encodeBase58(t){const e=getBytes(t);let r=toBigInt(e);let i="";for(;r;){i=xn[Number(r%Pn)]+i;r/=Pn}for(let a=0;a<e.length&&!e[a];a++)i=xn[0]+i;return i}function decodeBase64(t){t=atob(t);const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return getBytes(e)}function encodeBase64(t){const e=getBytes(t);let r="";for(let i=0;i<e.length;i++)r+=String.fromCharCode(e[i]);return btoa(r)}class Nn{constructor(t,r,i){__publicField(this,"filter");__publicField(this,"emitter");__privateAdd(this,e);__privateSet(this,e,r);defineProperties(this,{emitter:t,filter:i})}async removeListener(){null!=__privateGet(this,e)&&await this.emitter.off(this.filter,__privateGet(this,e))}}e=new WeakMap;function errorFunc(t,e,r,i,a){assertArgument(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function ignoreFunc(t,e,r,i,a){if("BAD_PREFIX"===t||"UNEXPECTED_CONTINUE"===t){let t=0;for(let i=e+1;i<r.length&&r[i]>>6==2;i++)t++;return t}return"OVERRUN"===t?r.length-e-1:0}function replaceFunc(t,e,r,i,a){if("OVERLONG"===t){assertArgument("number"==typeof a,"invalid bad code point for replacement","badCodepoint",a);i.push(a);return 0}i.push(65533);return ignoreFunc(t,e,r)}const In=Object.freeze({error:errorFunc,ignore:ignoreFunc,replace:replaceFunc});function getUtf8CodePoints(t,e){null==e&&(e=In.error);const r=getBytes(t,"bytes");const i=[];let a=0;for(;a<r.length;){const t=r[a++];if(!(t>>7)){i.push(t);continue}let o=null;let c=null;if(192==(224&t)){o=1;c=127}else if(224==(240&t)){o=2;c=2047}else{if(240!=(248&t)){a+=e(128==(192&t)?"UNEXPECTED_CONTINUE":"BAD_PREFIX",a-1,r,i);continue}o=3;c=65535}if(a-1+o>=r.length){a+=e("OVERRUN",a-1,r,i);continue}let l=t&(1<<8-o-1)-1;for(let u=0;u<o;u++){let t=r[a];if(128!=(192&t)){a+=e("MISSING_CONTINUE",a,r,i);l=null;break}l=l<<6|63&t;a++}null!==l&&(l>1114111?a+=e("OUT_OF_RANGE",a-1-o,r,i,l):l>=55296&&l<=57343?a+=e("UTF16_SURROGATE",a-1-o,r,i,l):l<=c?a+=e("OVERLONG",a-1-o,r,i,l):i.push(l))}return i}function toUtf8Bytes(t,e){assertArgument("string"==typeof t,"invalid string value","str",t);let r=[];for(let i=0;i<t.length;i++){const e=t.charCodeAt(i);if(e<128)r.push(e);else if(e<2048){r.push(e>>6|192);r.push(63&e|128)}else if(55296==(64512&e)){i++;const a=t.charCodeAt(i);assertArgument(i<t.length&&56320==(64512&a),"invalid surrogate pair","str",t);const o=65536+((1023&e)<<10)+(1023&a);r.push(o>>18|240);r.push(o>>12&63|128);r.push(o>>6&63|128);r.push(63&o|128)}else{r.push(e>>12|224);r.push(e>>6&63|128);r.push(63&e|128)}}return new Uint8Array(r)}function _toUtf8String(t){return t.map(t=>{if(t<=65535)return String.fromCharCode(t);t-=65536;return String.fromCharCode(55296+(t>>10&1023),56320+(1023&t))}).join("")}function toUtf8String(t,e){return _toUtf8String(getUtf8CodePoints(t,e))}function createGetUrl(t){async function getUrl(e,r){assert(null==r||!r.cancelled,"request cancelled before sending","CANCELLED");const i=e.url.split(":")[0].toLowerCase();assert("http"===i||"https"===i,`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"});assert("https"===i||!e.credentials||e.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let a=null;const o=new AbortController;const c=setTimeout(()=>{a=makeError("request timeout","TIMEOUT");o.abort()},e.timeout);r&&r.addListener(()=>{a=makeError("request cancelled","CANCELLED");o.abort()});const l=Object.assign({},t,{method:e.method,headers:new Headers(Array.from(e)),body:e.body||void 0,signal:o.signal});let u;try{u=await fetch(e.url,l)}catch(p){clearTimeout(c);if(a)throw a;throw p}clearTimeout(c);const f={};u.headers.forEach((t,e)=>{f[e.toLowerCase()]=t});const d=await u.arrayBuffer();const g=null==d?null:new Uint8Array(d);return{statusCode:u.status,statusMessage:u.statusText,headers:f,body:g}}return getUrl}const Cn=12;const Tn=250;let On=createGetUrl();const Rn=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i");const Sn=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let Un=!1;async function dataGatewayFunc(t,e){try{const e=t.match(Rn);if(!e)throw new Error("invalid data");return new _n(200,"OK",{"content-type":e[1]||"text/plain"},e[2]?decodeBase64(e[3]):unpercent(e[3]))}catch(r){return new _n(599,"BAD REQUEST (invalid data: URI)",{},null,new Hn(t))}}function getIpfsGatewayFunc(t){async function gatewayIpfs(e,r){try{const r=e.match(Sn);if(!r)throw new Error("invalid link");return new Hn(`${t}${r[2]}`)}catch(i){return new _n(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Hn(e))}}return gatewayIpfs}const Ln={data:dataGatewayFunc,ipfs:getIpfsGatewayFunc("https://gateway.ipfs.io/ipfs/")};const Fn=new WeakMap;class Mn{constructor(t){__privateAdd(this,r);__privateAdd(this,i);__privateSet(this,r,[]);__privateSet(this,i,!1);Fn.set(t,()=>{if(!__privateGet(this,i)){__privateSet(this,i,!0);for(const t of __privateGet(this,r))setTimeout(()=>{t()},0);__privateSet(this,r,[])}})}addListener(t){assert(!__privateGet(this,i),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"});__privateGet(this,r).push(t)}get cancelled(){return __privateGet(this,i)}checkSignal(){assert(!this.cancelled,"cancelled","CANCELLED",{})}}r=new WeakMap;i=new WeakMap;function checkSignal(t){if(null==t)throw new Error("missing signal; should not happen");t.checkSignal();return t}const Dn=class t{constructor(t){__privateAdd(this,k);__privateAdd(this,a);__privateAdd(this,o);__privateAdd(this,c);__privateAdd(this,l);__privateAdd(this,u);__privateAdd(this,f);__privateAdd(this,d);__privateAdd(this,g);__privateAdd(this,p);__privateAdd(this,m);__privateAdd(this,y);__privateAdd(this,w);__privateAdd(this,A);__privateAdd(this,E);__privateAdd(this,v);__privateSet(this,f,String(t));__privateSet(this,a,!1);__privateSet(this,o,!0);__privateSet(this,c,{});__privateSet(this,l,"");__privateSet(this,u,3e5);__privateSet(this,E,{slotInterval:Tn,maxAttempts:Cn});__privateSet(this,v,null)}get url(){return __privateGet(this,f)}set url(t){__privateSet(this,f,String(t))}get body(){return null==__privateGet(this,d)?null:new Uint8Array(__privateGet(this,d))}set body(t){if(null==t){__privateSet(this,d,void 0);__privateSet(this,g,void 0)}else if("string"==typeof t){__privateSet(this,d,toUtf8Bytes(t));__privateSet(this,g,"text/plain")}else if(t instanceof Uint8Array){__privateSet(this,d,t);__privateSet(this,g,"application/octet-stream")}else{if("object"!=typeof t)throw new Error("invalid body");__privateSet(this,d,toUtf8Bytes(JSON.stringify(t)));__privateSet(this,g,"application/json")}}hasBody(){return null!=__privateGet(this,d)}get method(){return __privateGet(this,l)?__privateGet(this,l):this.hasBody()?"POST":"GET"}set method(t){null==t&&(t="");__privateSet(this,l,String(t).toUpperCase())}get headers(){const t=Object.assign({},__privateGet(this,c));__privateGet(this,p)&&(t.authorization=`Basic ${encodeBase64(toUtf8Bytes(__privateGet(this,p)))}`);this.allowGzip&&(t["accept-encoding"]="gzip");null==t["content-type"]&&__privateGet(this,g)&&(t["content-type"]=__privateGet(this,g));this.body&&(t["content-length"]=String(this.body.length));return t}getHeader(t){return this.headers[t.toLowerCase()]}setHeader(t,e){__privateGet(this,c)[String(t).toLowerCase()]=String(e)}clearHeaders(){__privateSet(this,c,{})}[Symbol.iterator](){const t=this.headers;const e=Object.keys(t);let r=0;return{next:()=>{if(r<e.length){const i=e[r++];return{value:[i,t[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return __privateGet(this,p)||null}setCredentials(t,e){assertArgument(!t.match(/:/),"invalid basic authentication username","username","[REDACTED]");__privateSet(this,p,`${t}:${e}`)}get allowGzip(){return __privateGet(this,o)}set allowGzip(t){__privateSet(this,o,!!t)}get allowInsecureAuthentication(){return!!__privateGet(this,a)}set allowInsecureAuthentication(t){__privateSet(this,a,!!t)}get timeout(){return __privateGet(this,u)}set timeout(t){assertArgument(t>=0,"timeout must be non-zero","timeout",t);__privateSet(this,u,t)}get preflightFunc(){return __privateGet(this,m)||null}set preflightFunc(t){__privateSet(this,m,t)}get processFunc(){return __privateGet(this,y)||null}set processFunc(t){__privateSet(this,y,t)}get retryFunc(){return __privateGet(this,w)||null}set retryFunc(t){__privateSet(this,w,t)}get getUrlFunc(){return __privateGet(this,v)||On}set getUrlFunc(t){__privateSet(this,v,t)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${__privateGet(this,d)?hexlify(__privateGet(this,d)):"null"}>`}setThrottleParams(t){null!=t.slotInterval&&(__privateGet(this,E).slotInterval=t.slotInterval);null!=t.maxAttempts&&(__privateGet(this,E).maxAttempts=t.maxAttempts)}send(){assert(null==__privateGet(this,A),"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"});__privateSet(this,A,new Mn(this));return __privateMethod(this,k,B).call(this,0,getTime$1()+this.timeout,0,this,new _n(0,"",{},null,this))}cancel(){assert(null!=__privateGet(this,A),"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const t=Fn.get(this);if(!t)throw new Error("missing signal; should not happen");t()}redirect(e){const r=this.url.split(":")[0].toLowerCase();const i=e.split(":")[0].toLowerCase();assert("GET"===this.method&&("https"!==r||"http"!==i)&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const a=new t(e);a.method="GET";a.allowGzip=this.allowGzip;a.timeout=this.timeout;__privateSet(a,c,Object.assign({},__privateGet(this,c)));__privateGet(this,d)&&__privateSet(a,d,new Uint8Array(__privateGet(this,d)));__privateSet(a,g,__privateGet(this,g));return a}clone(){const e=new t(this.url);__privateSet(e,l,__privateGet(this,l));__privateGet(this,d)&&__privateSet(e,d,__privateGet(this,d));__privateSet(e,g,__privateGet(this,g));__privateSet(e,c,Object.assign({},__privateGet(this,c)));__privateSet(e,p,__privateGet(this,p));this.allowGzip&&(e.allowGzip=!0);e.timeout=this.timeout;this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0);__privateSet(e,m,__privateGet(this,m));__privateSet(e,y,__privateGet(this,y));__privateSet(e,w,__privateGet(this,w));__privateSet(e,E,Object.assign({},__privateGet(this,E)));__privateSet(e,v,__privateGet(this,v));return e}static lockConfig(){Un=!0}static getGateway(t){return Ln[t.toLowerCase()]||null}static registerGateway(t,e){t=t.toLowerCase();if("http"===t||"https"===t)throw new Error(`cannot intercept ${t}; use registerGetUrl`);if(Un)throw new Error("gateways locked");Ln[t]=e}static registerGetUrl(t){if(Un)throw new Error("gateways locked");On=t}static createGetUrlFunc(t){return createGetUrl(t)}static createDataGateway(){return dataGatewayFunc}static createIpfsGatewayFunc(t){return getIpfsGatewayFunc(t)}};a=new WeakMap;o=new WeakMap;c=new WeakMap;l=new WeakMap;u=new WeakMap;f=new WeakMap;d=new WeakMap;g=new WeakMap;p=new WeakMap;m=new WeakMap;y=new WeakMap;w=new WeakMap;A=new WeakMap;E=new WeakMap;v=new WeakMap;k=new WeakSet;B=async function(t,e,r,i,a){var o,c,l;if(t>=__privateGet(this,E).maxAttempts)return a.makeServerError("exceeded maximum retry limit");assert(getTime$1()<=e,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i});r>0&&await wait(r);let u=this.clone();const f=(u.url.split(":")[0]||"").toLowerCase();if(f in Ln){const t=await Ln[f](u.url,checkSignal(__privateGet(i,A)));if(t instanceof _n){let e=t;if(this.processFunc){checkSignal(__privateGet(i,A));try{e=await this.processFunc(u,e)}catch(p){null!=p.throttle&&"number"==typeof p.stall||e.makeServerError("error in post-processing function",p).assertOk()}}return e}u=t}this.preflightFunc&&(u=await this.preflightFunc(u));const d=await this.getUrlFunc(u,checkSignal(__privateGet(i,A)));let g=new _n(d.statusCode,d.statusMessage,d.headers,d.body,i);if(301===g.statusCode||302===g.statusCode){try{const r=g.headers.location||"";return __privateMethod(o=u.redirect(r),k,B).call(o,t+1,e,0,i,g)}catch(p){}return g}if(429===g.statusCode&&(null==this.retryFunc||await this.retryFunc(u,g,t))){const r=g.headers["retry-after"];let a=__privateGet(this,E).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));"string"==typeof r&&r.match(/^[1-9][0-9]*$/)&&(a=parseInt(r));return __privateMethod(c=u.clone(),k,B).call(c,t+1,e,a,i,g)}if(this.processFunc){checkSignal(__privateGet(i,A));try{g=await this.processFunc(u,g)}catch(p){null!=p.throttle&&"number"==typeof p.stall||g.makeServerError("error in post-processing function",p).assertOk();let r=__privateGet(this,E).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));p.stall>=0&&(r=p.stall);return __privateMethod(l=u.clone(),k,B).call(l,t+1,e,r,i,g)}}return g};let Hn=Dn;const Gn=class t{constructor(t,e,r,i,a){__privateAdd(this,x);__privateAdd(this,P);__privateAdd(this,N);__privateAdd(this,I);__privateAdd(this,C);__privateAdd(this,T);__privateSet(this,x,t);__privateSet(this,P,e);__privateSet(this,N,Object.keys(r).reduce((t,e)=>{t[e.toLowerCase()]=String(r[e]);return t},{}));__privateSet(this,I,null==i?null:new Uint8Array(i));__privateSet(this,C,a||null);__privateSet(this,T,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${__privateGet(this,I)?hexlify(__privateGet(this,I)):"null"}>`}get statusCode(){return __privateGet(this,x)}get statusMessage(){return __privateGet(this,P)}get headers(){return Object.assign({},__privateGet(this,N))}get body(){return null==__privateGet(this,I)?null:new Uint8Array(__privateGet(this,I))}get bodyText(){try{return null==__privateGet(this,I)?"":toUtf8String(__privateGet(this,I))}catch(t){assert(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(t){assert(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const t=this.headers;const e=Object.keys(t);let r=0;return{next:()=>{if(r<e.length){const i=e[r++];return{value:[i,t[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,r){let i;if(e)i=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`;else{e=`${this.statusCode} ${this.statusMessage}`;i=`CLIENT ESCALATED SERVER ERROR (${e})`}const a=new t(599,i,this.headers,this.body,__privateGet(this,C)||void 0);__privateSet(a,T,{message:e,error:r});return a}throwThrottleError(t,e){null==e?e=-1:assertArgument(Number.isInteger(e)&&e>=0,"invalid stall timeout","stall",e);const r=new Error(t||"throttling requests");defineProperties(r,{stall:e,throttle:!0});throw r}getHeader(t){return this.headers[t.toLowerCase()]}hasBody(){return null!=__privateGet(this,I)}get request(){return __privateGet(this,C)}ok(){return""===__privateGet(this,T).message&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:t,error:e}=__privateGet(this,T);""===t&&(t=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{__privateGet(this,I)&&(i=toUtf8String(__privateGet(this,I)))}catch(a){}assert(!1,t,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:e,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};x=new WeakMap;P=new WeakMap;N=new WeakMap;I=new WeakMap;C=new WeakMap;T=new WeakMap;let _n=Gn;function getTime$1(){return(new Date).getTime()}function unpercent(t){return toUtf8Bytes(t.replace(/%([0-9a-f][0-9a-f])/gi,(t,e)=>String.fromCharCode(parseInt(e,16))))}function wait(t){return new Promise(e=>setTimeout(e,t))}const Qn=BigInt(-1);const zn=BigInt(0);const jn=BigInt(1);const Vn=BigInt(5);const Wn={};let Jn="0000";for(;Jn.length<80;)Jn+=Jn;function getTens(t){let e=Jn;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function checkValue(t,e,r){const i=BigInt(e.width);if(e.signed){const e=jn<<i-jn;assert(null==r||t>=-e&&t<e,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:t});t=t>zn?fromTwos(mask(t,i),i):-fromTwos(mask(-t,i),i)}else{const e=jn<<i;assert(null==r||t>=0&&t<e,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:t});t=(t%e+e)%e&e-jn}return t}function getFormat(t){"number"==typeof t&&(t=`fixed128x${t}`);let e=!0;let r=128;let i=18;if("string"==typeof t)if("fixed"===t);else if("ufixed"===t)e=!1;else{const a=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);assertArgument(a,"invalid fixed format","format",t);e="u"!==a[1];r=parseInt(a[2]);i=parseInt(a[3])}else if(t){const a=t;const check=(t,e,r)=>{if(null==a[t])return r;assertArgument(typeof a[t]===e,"invalid fixed format ("+t+" not "+e+")","format."+t,a[t]);return a[t]};e=check("signed","boolean",e);r=check("width","number",r);i=check("decimals","number",i)}assertArgument(r%8==0,"invalid FixedNumber width (not byte aligned)","format.width",r);assertArgument(i<=80,"invalid FixedNumber decimals (too large)","format.decimals",i);const a=(e?"":"u")+"fixed"+String(r)+"x"+String(i);return{signed:e,width:r,decimals:i,name:a}}function toString(t,e){let r="";if(t<zn){r="-";t*=Qn}let i=t.toString();if(0===e)return r+i;for(;i.length<=e;)i=Jn+i;const a=i.length-e;i=i.substring(0,a)+"."+i.substring(a);for(;"0"===i[0]&&"."!==i[1];)i=i.substring(1);for(;"0"===i[i.length-1]&&"."!==i[i.length-2];)i=i.substring(0,i.length-1);return r+i}const Kn=class t{constructor(t,e,r){__privateAdd(this,U);__publicField(this,"format");__privateAdd(this,O);__privateAdd(this,R);__privateAdd(this,S);__publicField(this,"_value");assertPrivate(t,Wn,"FixedNumber");__privateSet(this,R,e);__privateSet(this,O,r);const i=toString(e,r.decimals);defineProperties(this,{format:r.name,_value:i});__privateSet(this,S,getTens(r.decimals))}get signed(){return __privateGet(this,O).signed}get width(){return __privateGet(this,O).width}get decimals(){return __privateGet(this,O).decimals}get value(){return __privateGet(this,R)}addUnsafe(t){return __privateMethod(this,U,M).call(this,t)}add(t){return __privateMethod(this,U,M).call(this,t,"add")}subUnsafe(t){return __privateMethod(this,U,D).call(this,t)}sub(t){return __privateMethod(this,U,D).call(this,t,"sub")}mulUnsafe(t){return __privateMethod(this,U,H).call(this,t)}mul(t){return __privateMethod(this,U,H).call(this,t,"mul")}mulSignal(t){__privateMethod(this,U,L).call(this,t);const e=__privateGet(this,R)*__privateGet(t,R);assert(e%__privateGet(this,S)===zn,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this});return __privateMethod(this,U,F).call(this,e/__privateGet(this,S),"mulSignal")}divUnsafe(t){return __privateMethod(this,U,G).call(this,t)}div(t){return __privateMethod(this,U,G).call(this,t,"div")}divSignal(t){assert(__privateGet(t,R)!==zn,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this});__privateMethod(this,U,L).call(this,t);const e=__privateGet(this,R)*__privateGet(this,S);assert(e%__privateGet(t,R)===zn,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this});return __privateMethod(this,U,F).call(this,e/__privateGet(t,R),"divSignal")}cmp(t){let e=this.value,r=t.value;const i=this.decimals-t.decimals;i>0?r*=getTens(i):i<0&&(e*=getTens(-i));return e<r?-1:e>r?1:0}eq(t){return 0===this.cmp(t)}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=__privateGet(this,R);__privateGet(this,R)<zn&&(t-=__privateGet(this,S)-jn);t=__privateGet(this,R)/__privateGet(this,S)*__privateGet(this,S);return __privateMethod(this,U,F).call(this,t,"floor")}ceiling(){let t=__privateGet(this,R);__privateGet(this,R)>zn&&(t+=__privateGet(this,S)-jn);t=__privateGet(this,R)/__privateGet(this,S)*__privateGet(this,S);return __privateMethod(this,U,F).call(this,t,"ceiling")}round(e){null==e&&(e=0);if(e>=this.decimals)return this;const r=this.decimals-e;const i=Vn*getTens(r-1);let a=this.value+i;const o=getTens(r);a=a/o*o;checkValue(a,__privateGet(this,O),"round");return new t(Wn,a,__privateGet(this,O))}isZero(){return __privateGet(this,R)===zn}isNegative(){return __privateGet(this,R)<zn}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return t.fromString(this.toString(),e)}static fromValue(e,r,i){const a=null==r?0:getNumber(r);const o=getFormat(i);let c=getBigInt(e,"value");const l=a-o.decimals;if(l>0){const t=getTens(l);assert(c%t===zn,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e});c/=t}else l<0&&(c*=getTens(-l));checkValue(c,o,"fromValue");return new t(Wn,c,o)}static fromString(e,r){const i=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);assertArgument(i&&i[2].length+i[3].length>0,"invalid FixedNumber string value","value",e);const a=getFormat(r);let o=i[2]||"0",c=i[3]||"";for(;c.length<a.decimals;)c+=Jn;assert(c.substring(a.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e});c=c.substring(0,a.decimals);const l=BigInt(i[1]+o+c);checkValue(l,a,"fromString");return new t(Wn,l,a)}static fromBytes(e,r){let i=toBigInt(getBytes(e,"value"));const a=getFormat(r);a.signed&&(i=fromTwos(i,a.width));checkValue(i,a,"fromBytes");return new t(Wn,i,a)}};O=new WeakMap;R=new WeakMap;S=new WeakMap;U=new WeakSet;L=function(t){assertArgument(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)};F=function(t,e){t=checkValue(t,__privateGet(this,O),e);return new Kn(Wn,t,__privateGet(this,O))};M=function(t,e){__privateMethod(this,U,L).call(this,t);return __privateMethod(this,U,F).call(this,__privateGet(this,R)+__privateGet(t,R),e)};D=function(t,e){__privateMethod(this,U,L).call(this,t);return __privateMethod(this,U,F).call(this,__privateGet(this,R)-__privateGet(t,R),e)};H=function(t,e){__privateMethod(this,U,L).call(this,t);return __privateMethod(this,U,F).call(this,__privateGet(this,R)*__privateGet(t,R)/__privateGet(this,S),e)};G=function(t,e){assert(__privateGet(t,R)!==zn,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this});__privateMethod(this,U,L).call(this,t);return __privateMethod(this,U,F).call(this,__privateGet(this,R)*__privateGet(this,S)/__privateGet(t,R),e)};let qn=Kn;function hexlifyByte(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function unarrayifyInteger(t,e,r){let i=0;for(let a=0;a<r;a++)i=256*i+t[e+a];return i}function _decodeChildren(t,e,r,i){const a=[];for(;r<e+1+i;){const o=_decode(t,r);a.push(o.result);r+=o.consumed;assert(r<=e+1+i,"child data too short","BUFFER_OVERRUN",{buffer:t,length:i,offset:e})}return{consumed:1+i,result:a}}function _decode(t,e){assert(0!==t.length,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const checkOffset=e=>{assert(e<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:e})};if(t[e]>=248){const r=t[e]-247;checkOffset(e+1+r);const i=unarrayifyInteger(t,e+1,r);checkOffset(e+1+r+i);return _decodeChildren(t,e,e+1+r,r+i)}if(t[e]>=192){const r=t[e]-192;checkOffset(e+1+r);return _decodeChildren(t,e,e+1,r)}if(t[e]>=184){const r=t[e]-183;checkOffset(e+1+r);const i=unarrayifyInteger(t,e+1,r);checkOffset(e+1+r+i);const a=hexlify(t.slice(e+1+r,e+1+r+i));return{consumed:1+r+i,result:a}}if(t[e]>=128){const r=t[e]-128;checkOffset(e+1+r);const i=hexlify(t.slice(e+1,e+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:hexlifyByte(t[e])}}function decodeRlp(t){const e=getBytes(t,"data");const r=_decode(e,0);assertArgument(r.consumed===e.length,"unexpected junk after rlp payload","data",t);return r.result}function arrayifyInteger(t){const e=[];for(;t;){e.unshift(255&t);t>>=8}return e}function _encode(t){if(Array.isArray(t)){let e=[];t.forEach(function(t){e=e.concat(_encode(t))});if(e.length<=55){e.unshift(192+e.length);return e}const r=arrayifyInteger(e.length);r.unshift(247+r.length);return r.concat(e)}const e=Array.prototype.slice.call(getBytes(t,"object"));if(1===e.length&&e[0]<=127)return e;if(e.length<=55){e.unshift(128+e.length);return e}const r=arrayifyInteger(e.length);r.unshift(183+r.length);return r.concat(e)}const Zn="0123456789abcdef";function encodeRlp(t){let e="0x";for(const r of _encode(t)){e+=Zn[r>>4];e+=Zn[15&r]}return e}const Yn=["wei","kwei","mwei","gwei","szabo","finney","ether"];function formatUnits(t,e){let r=18;r=getNumber(e,"unit");return qn.fromValue(t,r,{decimals:r,width:512}).toString()}function parseUnits$1(t,e){assertArgument("string"==typeof t,"value must be a string","value",t);let r=18;if("string"==typeof e){const t=Yn.indexOf(e);assertArgument(t>=0,"invalid unit","unit",e);r=3*t}else null!=e&&(r=getNumber(e,"unit"));return qn.fromString(t,{decimals:r,width:512}).value}function formatEther(t){return formatUnits(t,18)}function parseEther(t){return parseUnits$1(t,18)}const Xn=32;const $n=new Uint8Array(Xn);const tr=["then"];const er={};const nr=new WeakMap;function getNames(t){return nr.get(t)}function setNames(t,e){nr.set(t,e)}function throwError(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);r.error=e;throw r}function toObject(t,e,r){return t.indexOf(null)>=0?e.map((t,e)=>t instanceof sr?toObject(getNames(t),t,r):t):t.reduce((t,i,a)=>{let o=e.getValue(i);if(!(i in t)){r&&o instanceof sr&&(o=toObject(getNames(o),o,r));t[i]=o}return t},{})}const rr=class t extends Array{constructor(...t){const e=t[0];let r=t[1];let i=(t[2]||[]).slice();let a=!0;if(e!==er){r=t;i=[];a=!1}super(r.length);__privateAdd(this,_);r.forEach((t,e)=>{this[e]=t});const o=i.reduce((t,e)=>{"string"==typeof e&&t.set(e,(t.get(e)||0)+1);return t},new Map);setNames(this,Object.freeze(r.map((t,e)=>{const r=i[e];return null!=r&&1===o.get(r)?r:null})));__privateSet(this,_,[]);null==__privateGet(this,_)&&void __privateGet(this,_);if(!a)return;Object.freeze(this);const c=new Proxy(this,{get:(t,e,r)=>{if("string"==typeof e){if(e.match(/^[0-9]+$/)){const r=getNumber(e,"%index");if(r<0||r>=this.length)throw new RangeError("out of result range");const i=t[r];i instanceof Error&&throwError(`index ${r}`,i);return i}if(tr.indexOf(e)>=0)return Reflect.get(t,e,r);const i=t[e];if(i instanceof Function)return function(...e){return i.apply(this===r?t:this,e)};if(!(e in t))return t.getValue.apply(this===r?t:this,[e])}return Reflect.get(t,e,r)}});setNames(c,getNames(this));return c}toArray(e){const r=[];this.forEach((i,a)=>{i instanceof Error&&throwError(`index ${a}`,i);e&&i instanceof t&&(i=i.toArray(e));r.push(i)});return r}toObject(t){const e=getNames(this);return e.reduce((r,i,a)=>{assert(null!=i,`value at index ${a} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"});return toObject(e,this,t)},{})}slice(e,r){null==e&&(e=0);if(e<0){e+=this.length;e<0&&(e=0)}null==r&&(r=this.length);if(r<0){r+=this.length;r<0&&(r=0)}r>this.length&&(r=this.length);const i=getNames(this);const a=[],o=[];for(let t=e;t<r;t++){a.push(this[t]);o.push(i[t])}return new t(er,a,o)}filter(e,r){const i=getNames(this);const a=[],o=[];for(let t=0;t<this.length;t++){const c=this[t];c instanceof Error&&throwError(`index ${t}`,c);if(e.call(r,c,t,this)){a.push(c);o.push(i[t])}}return new t(er,a,o)}map(t,e){const r=[];for(let i=0;i<this.length;i++){const a=this[i];a instanceof Error&&throwError(`index ${i}`,a);r.push(t.call(e,a,i,this))}return r}getValue(t){const e=getNames(this).indexOf(t);if(-1===e)return;const r=this[e];r instanceof Error&&throwError(`property ${JSON.stringify(t)}`,r.error);return r}static fromItems(e,r){return new t(er,e,r)}};_=new WeakMap;let sr=rr;function getValue$1(t){let e=toBeArray(t);assert(e.length<=Xn,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:Xn,offset:e.length});e.length!==Xn&&(e=getBytesCopy(concat([$n.slice(e.length%Xn),e])));return e}class ir{constructor(t,e,r,i){__publicField(this,"name");__publicField(this,"type");__publicField(this,"localName");__publicField(this,"dynamic");defineProperties(this,{name:t,type:e,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(t,e){assertArgument(!1,t,this.localName,e)}}class ar{constructor(){__privateAdd(this,j);__privateAdd(this,Q);__privateAdd(this,z);__privateSet(this,Q,[]);__privateSet(this,z,0)}get data(){return concat(__privateGet(this,Q))}get length(){return __privateGet(this,z)}appendWriter(t){return __privateMethod(this,j,V).call(this,getBytesCopy(t.data))}writeBytes(t){let e=getBytesCopy(t);const r=e.length%Xn;r&&(e=getBytesCopy(concat([e,$n.slice(r)])));return __privateMethod(this,j,V).call(this,e)}writeValue(t){return __privateMethod(this,j,V).call(this,getValue$1(t))}writeUpdatableValue(){const t=__privateGet(this,Q).length;__privateGet(this,Q).push($n);__privateSet(this,z,__privateGet(this,z)+Xn);return e=>{__privateGet(this,Q)[t]=getValue$1(e)}}}Q=new WeakMap;z=new WeakMap;j=new WeakSet;V=function(t){__privateGet(this,Q).push(t);__privateSet(this,z,__privateGet(this,z)+t.length);return t.length};const or=class t{constructor(t,e,r){__privateAdd(this,Y);__publicField(this,"allowLoose");__privateAdd(this,W);__privateAdd(this,J);__privateAdd(this,K);__privateAdd(this,q);__privateAdd(this,Z);defineProperties(this,{allowLoose:!!e});__privateSet(this,W,getBytesCopy(t));__privateSet(this,K,0);__privateSet(this,q,null);__privateSet(this,Z,null!=r?r:1024);__privateSet(this,J,0)}get data(){return hexlify(__privateGet(this,W))}get dataLength(){return __privateGet(this,W).length}get consumed(){return __privateGet(this,J)}get bytes(){return new Uint8Array(__privateGet(this,W))}subReader(e){const r=new t(__privateGet(this,W).slice(__privateGet(this,J)+e),this.allowLoose,__privateGet(this,Z));__privateSet(r,q,this);return r}readBytes(t,e){let r=__privateMethod(this,Y,$).call(this,0,t,!!e);__privateMethod(this,Y,X).call(this,t);__privateSet(this,J,__privateGet(this,J)+r.length);return r.slice(0,t)}readValue(){return toBigInt(this.readBytes(Xn))}readIndex(){return toNumber(this.readBytes(Xn))}};W=new WeakMap;J=new WeakMap;K=new WeakMap;q=new WeakMap;Z=new WeakMap;Y=new WeakSet;X=function(t){var e;if(__privateGet(this,q))return __privateMethod(e=__privateGet(this,q),Y,X).call(e,t);__privateSet(this,K,__privateGet(this,K)+t);assert(__privateGet(this,Z)<1||__privateGet(this,K)<=__privateGet(this,Z)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${__privateGet(this,Z)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:getBytesCopy(__privateGet(this,W)),offset:__privateGet(this,J),length:t,info:{bytesRead:__privateGet(this,K),dataLength:this.dataLength}})};$=function(t,e,r){let i=Math.ceil(e/Xn)*Xn;__privateGet(this,J)+i>__privateGet(this,W).length&&(this.allowLoose&&r&&__privateGet(this,J)+e<=__privateGet(this,W).length?i=e:assert(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:getBytesCopy(__privateGet(this,W)),length:__privateGet(this,W).length,offset:__privateGet(this,J)+i}));return __privateGet(this,W).slice(__privateGet(this,J),__privateGet(this,J)+i)};let cr=or;function number(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function bytes(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function hash(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");number(t.outputLen);number(t.blockLen)}function exists(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function output(t,e){bytes(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const lr="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const u8a$1=t=>t instanceof Uint8Array;const u32=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));const createView=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);const rotr=(t,e)=>t<<32-e|t>>>e;const ur=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];if(!ur)throw new Error("Non little-endian hardware is not supported");function utf8ToBytes$1(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function toBytes(t){"string"==typeof t&&(t=utf8ToBytes$1(t));if(!u8a$1(t))throw new Error("expected Uint8Array, got "+typeof t);return t}function concatBytes$1(...t){const e=new Uint8Array(t.reduce((t,e)=>t+e.length,0));let r=0;t.forEach(t=>{if(!u8a$1(t))throw new Error("Uint8Array expected");e.set(t,r);r+=t.length});return e}class hr{clone(){return this._cloneInto()}}function wrapConstructor(t){const hashC=e=>t().update(toBytes(e)).digest();const e=t();hashC.outputLen=e.outputLen;hashC.blockLen=e.blockLen;hashC.create=()=>t();return hashC}function randomBytes(t=32){if(lr&&"function"==typeof lr.getRandomValues)return lr.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class fr extends hr{constructor(t,e){super();this.finished=!1;this.destroyed=!1;hash(t);const r=toBytes(e);this.iHash=t.create();if("function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen;this.outputLen=this.iHash.outputLen;const i=this.blockLen;const a=new Uint8Array(i);a.set(r.length>i?t.create().update(r).digest():r);for(let o=0;o<a.length;o++)a[o]^=54;this.iHash.update(a);this.oHash=t.create();for(let o=0;o<a.length;o++)a[o]^=106;this.oHash.update(a);a.fill(0)}update(t){exists(this);this.iHash.update(t);return this}digestInto(t){exists(this);bytes(t,this.outputLen);this.finished=!0;this.iHash.digestInto(t);this.oHash.update(t);this.oHash.digestInto(t);this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);this.digestInto(t);return t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:i,destroyed:a,blockLen:o,outputLen:c}=this;t;t.finished=i;t.destroyed=a;t.blockLen=o;t.outputLen=c;t.oHash=e._cloneInto(t.oHash);t.iHash=r._cloneInto(t.iHash);return t}destroy(){this.destroyed=!0;this.oHash.destroy();this.iHash.destroy()}}const hmac=(t,e,r)=>new fr(t,e).update(r).digest();hmac.create=(t,e)=>new fr(t,e);function setBigUint64(t,e,r,i){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,i);const a=BigInt(32);const o=BigInt(4294967295);const c=Number(r>>a&o);const l=Number(r&o);const u=i?4:0;const f=i?0:4;t.setUint32(e+u,c,i);t.setUint32(e+f,l,i)}class dr extends hr{constructor(t,e,r,i){super();this.blockLen=t;this.outputLen=e;this.padOffset=r;this.isLE=i;this.finished=!1;this.length=0;this.pos=0;this.destroyed=!1;this.buffer=new Uint8Array(t);this.view=createView(this.buffer)}update(t){exists(this);const{view:e,buffer:r,blockLen:i}=this;t=toBytes(t);const a=t.length;for(let o=0;o<a;){const c=Math.min(i-this.pos,a-o);if(c===i){const e=createView(t);for(;i<=a-o;o+=i)this.process(e,o);continue}r.set(t.subarray(o,o+c),this.pos);this.pos+=c;o+=c;if(this.pos===i){this.process(e,0);this.pos=0}}this.length+=t.length;this.roundClean();return this}digestInto(t){exists(this);output(t,this);this.finished=!0;const{buffer:e,view:r,blockLen:i,isLE:a}=this;let{pos:o}=this;e[o++]=128;this.buffer.subarray(o).fill(0);if(this.padOffset>i-o){this.process(r,0);o=0}for(let d=o;d<i;d++)e[d]=0;setBigUint64(r,i-8,BigInt(8*this.length),a);this.process(r,0);const c=createView(t);const l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4;const f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)c.setUint32(4*d,f[d],a)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);this.destroy();return r}_cloneInto(t){t||(t=new this.constructor);t.set(...this.get());const{blockLen:e,buffer:r,length:i,finished:a,destroyed:o,pos:c}=this;t.length=i;t.pos=c;t.finished=a;t.destroyed=o;i%e&&t.buffer.set(r);return t}}const Chi=(t,e,r)=>t&e^~t&r;const Maj=(t,e,r)=>t&e^t&r^e&r;const gr=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);const pr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);const mr=new Uint32Array(64);class yr extends dr{constructor(){super(64,32,8,!1);this.A=0|pr[0];this.B=0|pr[1];this.C=0|pr[2];this.D=0|pr[3];this.E=0|pr[4];this.F=0|pr[5];this.G=0|pr[6];this.H=0|pr[7]}get(){const{A:t,B:e,C:r,D:i,E:a,F:o,G:c,H:l}=this;return[t,e,r,i,a,o,c,l]}set(t,e,r,i,a,o,c,l){this.A=0|t;this.B=0|e;this.C=0|r;this.D=0|i;this.E=0|a;this.F=0|o;this.G=0|c;this.H=0|l}process(t,e){for(let d=0;d<16;d++,e+=4)mr[d]=t.getUint32(e,!1);for(let d=16;d<64;d++){const t=mr[d-15];const e=mr[d-2];const r=rotr(t,7)^rotr(t,18)^t>>>3;const i=rotr(e,17)^rotr(e,19)^e>>>10;mr[d]=i+mr[d-7]+r+mr[d-16]|0}let{A:r,B:i,C:a,D:o,E:c,F:l,G:u,H:f}=this;for(let d=0;d<64;d++){const t=rotr(c,6)^rotr(c,11)^rotr(c,25);const e=f+t+Chi(c,l,u)+gr[d]+mr[d]|0;const g=rotr(r,2)^rotr(r,13)^rotr(r,22);const p=g+Maj(r,i,a)|0;f=u;u=l;l=c;c=o+e|0;o=a;a=i;i=r;r=e+p|0}r=r+this.A|0;i=i+this.B|0;a=a+this.C|0;o=o+this.D|0;c=c+this.E|0;l=l+this.F|0;u=u+this.G|0;f=f+this.H|0;this.set(r,i,a,o,c,l,u,f)}roundClean(){mr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0);this.buffer.fill(0)}}const wr=wrapConstructor(()=>new yr);const Ar=BigInt(2**32-1);const br=BigInt(32);function fromBig(t,e=!1){return e?{h:Number(t&Ar),l:Number(t>>br&Ar)}:{h:0|Number(t>>br&Ar),l:0|Number(t&Ar)}}function split$1(t,e=!1){let r=new Uint32Array(t.length);let i=new Uint32Array(t.length);for(let a=0;a<t.length;a++){const{h:o,l:c}=fromBig(t[a],e);[r[a],i[a]]=[o,c]}return[r,i]}const toBig=(t,e)=>BigInt(t>>>0)<<br|BigInt(e>>>0);const shrSH=(t,e,r)=>t>>>r;const shrSL=(t,e,r)=>t<<32-r|e>>>r;const rotrSH=(t,e,r)=>t>>>r|e<<32-r;const rotrSL=(t,e,r)=>t<<32-r|e>>>r;const rotrBH=(t,e,r)=>t<<64-r|e>>>r-32;const rotrBL=(t,e,r)=>t>>>r-32|e<<64-r;const rotr32H=(t,e)=>e;const rotr32L=(t,e)=>t;const rotlSH=(t,e,r)=>t<<r|e>>>32-r;const rotlSL=(t,e,r)=>e<<r|t>>>32-r;const rotlBH=(t,e,r)=>e<<r-32|t>>>64-r;const rotlBL=(t,e,r)=>t<<r-32|e>>>64-r;function add(t,e,r,i){const a=(e>>>0)+(i>>>0);return{h:t+r+(a/2**32|0)|0,l:0|a}}const add3L=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0);const add3H=(t,e,r,i)=>e+r+i+(t/2**32|0)|0;const add4L=(t,e,r,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(i>>>0);const add4H=(t,e,r,i,a)=>e+r+i+a+(t/2**32|0)|0;const add5L=(t,e,r,i,a)=>(t>>>0)+(e>>>0)+(r>>>0)+(i>>>0)+(a>>>0);const add5H=(t,e,r,i,a,o)=>e+r+i+a+o+(t/2**32|0)|0;const Er={fromBig:fromBig,split:split$1,toBig:toBig,shrSH:shrSH,shrSL:shrSL,rotrSH:rotrSH,rotrSL:rotrSL,rotrBH:rotrBH,rotrBL:rotrBL,rotr32H:rotr32H,rotr32L:rotr32L,rotlSH:rotlSH,rotlSL:rotlSL,rotlBH:rotlBH,rotlBL:rotlBL,add:add,add3L:add3L,add3H:add3H,add4L:add4L,add4H:add4H,add5H:add5H,add5L:add5L};const[vr,kr]=(()=>Er.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))();const Br=new Uint32Array(80);const xr=new Uint32Array(80);class Pr extends dr{constructor(){super(128,64,16,!1);this.Ah=1779033703;this.Al=-205731576;this.Bh=-1150833019;this.Bl=-2067093701;this.Ch=1013904242;this.Cl=-23791573;this.Dh=-1521486534;this.Dl=1595750129;this.Eh=1359893119;this.El=-1377402159;this.Fh=-1694144372;this.Fl=725511199;this.Gh=528734635;this.Gl=-79577749;this.Hh=1541459225;this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:i,Ch:a,Cl:o,Dh:c,Dl:l,Eh:u,El:f,Fh:d,Fl:g,Gh:p,Gl:m,Hh:y,Hl:w}=this;return[t,e,r,i,a,o,c,l,u,f,d,g,p,m,y,w]}set(t,e,r,i,a,o,c,l,u,f,d,g,p,m,y,w){this.Ah=0|t;this.Al=0|e;this.Bh=0|r;this.Bl=0|i;this.Ch=0|a;this.Cl=0|o;this.Dh=0|c;this.Dl=0|l;this.Eh=0|u;this.El=0|f;this.Fh=0|d;this.Fl=0|g;this.Gh=0|p;this.Gl=0|m;this.Hh=0|y;this.Hl=0|w}process(t,e){for(let v=0;v<16;v++,e+=4){Br[v]=t.getUint32(e);xr[v]=t.getUint32(e+=4)}for(let v=16;v<80;v++){const t=0|Br[v-15];const e=0|xr[v-15];const r=Er.rotrSH(t,e,1)^Er.rotrSH(t,e,8)^Er.shrSH(t,e,7);const i=Er.rotrSL(t,e,1)^Er.rotrSL(t,e,8)^Er.shrSL(t,e,7);const a=0|Br[v-2];const o=0|xr[v-2];const c=Er.rotrSH(a,o,19)^Er.rotrBH(a,o,61)^Er.shrSH(a,o,6);const l=Er.rotrSL(a,o,19)^Er.rotrBL(a,o,61)^Er.shrSL(a,o,6);const u=Er.add4L(i,l,xr[v-7],xr[v-16]);const f=Er.add4H(u,r,c,Br[v-7],Br[v-16]);Br[v]=0|f;xr[v]=0|u}let{Ah:r,Al:i,Bh:a,Bl:o,Ch:c,Cl:l,Dh:u,Dl:f,Eh:d,El:g,Fh:p,Fl:m,Gh:y,Gl:w,Hh:A,Hl:E}=this;for(let v=0;v<80;v++){const t=Er.rotrSH(d,g,14)^Er.rotrSH(d,g,18)^Er.rotrBH(d,g,41);const e=Er.rotrSL(d,g,14)^Er.rotrSL(d,g,18)^Er.rotrBL(d,g,41);const k=d&p^~d&y;const B=g&m^~g&w;const x=Er.add5L(E,e,B,kr[v],xr[v]);const P=Er.add5H(x,A,t,k,vr[v],Br[v]);const N=0|x;const I=Er.rotrSH(r,i,28)^Er.rotrBH(r,i,34)^Er.rotrBH(r,i,39);const C=Er.rotrSL(r,i,28)^Er.rotrBL(r,i,34)^Er.rotrBL(r,i,39);const T=r&a^r&c^a&c;const O=i&o^i&l^o&l;A=0|y;E=0|w;y=0|p;w=0|m;p=0|d;m=0|g;({h:d,l:g}=Er.add(0|u,0|f,0|P,0|N));u=0|c;f=0|l;c=0|a;l=0|o;a=0|r;o=0|i;const R=Er.add3L(N,C,O);r=Er.add3H(R,P,I,T);i=0|R}({h:r,l:i}=Er.add(0|this.Ah,0|this.Al,0|r,0|i));({h:a,l:o}=Er.add(0|this.Bh,0|this.Bl,0|a,0|o));({h:c,l:l}=Er.add(0|this.Ch,0|this.Cl,0|c,0|l));({h:u,l:f}=Er.add(0|this.Dh,0|this.Dl,0|u,0|f));({h:d,l:g}=Er.add(0|this.Eh,0|this.El,0|d,0|g));({h:p,l:m}=Er.add(0|this.Fh,0|this.Fl,0|p,0|m));({h:y,l:w}=Er.add(0|this.Gh,0|this.Gl,0|y,0|w));({h:A,l:E}=Er.add(0|this.Hh,0|this.Hl,0|A,0|E));this.set(r,i,a,o,c,l,u,f,d,g,p,m,y,w,A,E)}roundClean(){Br.fill(0);xr.fill(0)}destroy(){this.buffer.fill(0);this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Nr=wrapConstructor(()=>new Pr);function getGlobal(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof globalThis)return globalThis;throw new Error("unable to locate global object")}const Ir=getGlobal();Ir.crypto||Ir.msCrypto;function createHash(t){switch(t){case"sha256":return wr.create();case"sha512":return Nr.create()}assertArgument(!1,"invalid hashing algorithm name","algorithm",t)}const[Cr,Tr,Or]=[[],[],[]];const Rr=BigInt(0);const Sr=BigInt(1);const Ur=BigInt(2);const Lr=BigInt(7);const Fr=BigInt(256);const Mr=BigInt(113);for(let Bc=0,xc=Sr,Pc=1,Nc=0;Bc<24;Bc++){[Pc,Nc]=[Nc,(2*Pc+3*Nc)%5];Cr.push(2*(5*Nc+Pc));Tr.push((Bc+1)*(Bc+2)/2%64);let t=Rr;for(let e=0;e<7;e++){xc=(xc<<Sr^(xc>>Lr)*Mr)%Fr;xc&Ur&&(t^=Sr<<(Sr<<BigInt(e))-Sr)}Or.push(t)}const[Dr,Hr]=split$1(Or,!0);const rotlH=(t,e,r)=>r>32?rotlBH(t,e,r):rotlSH(t,e,r);const rotlL=(t,e,r)=>r>32?rotlBL(t,e,r):rotlSL(t,e,r);function keccakP(t,e=24){const r=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let i=0;i<10;i++)r[i]=t[i]^t[i+10]^t[i+20]^t[i+30]^t[i+40];for(let i=0;i<10;i+=2){const e=(i+8)%10;const a=(i+2)%10;const o=r[a];const c=r[a+1];const l=rotlH(o,c,1)^r[e];const u=rotlL(o,c,1)^r[e+1];for(let r=0;r<50;r+=10){t[i+r]^=l;t[i+r+1]^=u}}let e=t[2];let a=t[3];for(let r=0;r<24;r++){const i=Tr[r];const o=rotlH(e,a,i);const c=rotlL(e,a,i);const l=Cr[r];e=t[l];a=t[l+1];t[l]=o;t[l+1]=c}for(let i=0;i<50;i+=10){for(let e=0;e<10;e++)r[e]=t[i+e];for(let e=0;e<10;e++)t[i+e]^=~r[(e+2)%10]&r[(e+4)%10]}t[0]^=Dr[i];t[1]^=Hr[i]}r.fill(0)}class Gr extends hr{constructor(t,e,r,i=!1,a=24){super();this.blockLen=t;this.suffix=e;this.outputLen=r;this.enableXOF=i;this.rounds=a;this.pos=0;this.posOut=0;this.finished=!1;this.destroyed=!1;number(r);if(0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200);this.state32=u32(this.state)}keccak(){keccakP(this.state32,this.rounds);this.posOut=0;this.pos=0}update(t){exists(this);const{blockLen:e,state:r}=this;t=toBytes(t);const i=t.length;for(let a=0;a<i;){const o=Math.min(e-this.pos,i-a);for(let e=0;e<o;e++)r[this.pos++]^=t[a++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:i}=this;t[r]^=e;128&e&&r===i-1&&this.keccak();t[i-1]^=128;this.keccak()}writeInto(t){exists(this,!1);bytes(t);this.finish();const e=this.state;const{blockLen:r}=this;for(let i=0,a=t.length;i<a;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,a-i);t.set(e.subarray(this.posOut,this.posOut+o),i);this.posOut+=o;i+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){number(t);return this.xofInto(new Uint8Array(t))}digestInto(t){output(t,this);if(this.finished)throw new Error("digest() was already called");this.writeInto(t);this.destroy();return t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0;this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:i,rounds:a,enableXOF:o}=this;t||(t=new Gr(e,r,i,o,a));t.state32.set(this.state32);t.pos=this.pos;t.posOut=this.posOut;t.finished=this.finished;t.rounds=a;t.suffix=r;t.outputLen=i;t.enableXOF=o;t.destroyed=this.destroyed;return t}}const gen=(t,e,r)=>wrapConstructor(()=>new Gr(e,t,r));const _r=gen(1,136,32);let Qr=!1;const _keccak256=function(t){return _r(t)};let zr=_keccak256;function keccak256(t){const e=getBytes(t,"data");return hexlify(zr(e))}keccak256._=_keccak256;keccak256.lock=function(){Qr=!0};keccak256.register=function(t){if(Qr)throw new TypeError("keccak256 is locked");zr=t};Object.freeze(keccak256);const _sha256=function(t){return createHash("sha256").update(t).digest()};let jr=_sha256;let Vr=!1;function sha256(t){const e=getBytes(t,"data");return hexlify(jr(e))}sha256._=_sha256;sha256.lock=function(){Vr=!0};sha256.register=function(t){if(Vr)throw new Error("sha256 is locked");jr=t};Object.freeze(sha256);Object.freeze(sha256);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Wr=BigInt(0);const Jr=BigInt(1);const Kr=BigInt(2);const u8a=t=>t instanceof Uint8Array;const qr=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bytesToHex(t){if(!u8a(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=qr[t[r]];return e}function numberToHexUnpadded(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function hexToNumber(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":`0x${t}`)}function hexToBytes(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(e/2);for(let i=0;i<r.length;i++){const e=2*i;const a=t.slice(e,e+2);const o=Number.parseInt(a,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");r[i]=o}return r}function bytesToNumberBE(t){return hexToNumber(bytesToHex(t))}function bytesToNumberLE(t){if(!u8a(t))throw new Error("Uint8Array expected");return hexToNumber(bytesToHex(Uint8Array.from(t).reverse()))}function numberToBytesBE(t,e){return hexToBytes(t.toString(16).padStart(2*e,"0"))}function numberToBytesLE(t,e){return numberToBytesBE(t,e).reverse()}function numberToVarBytesBE(t){return hexToBytes(numberToHexUnpadded(t))}function ensureBytes(t,e,r){let i;if("string"==typeof e)try{i=hexToBytes(e)}catch(o){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${o}`)}else{if(!u8a(e))throw new Error(`${t} must be hex string or Uint8Array`);i=Uint8Array.from(e)}const a=i.length;if("number"==typeof r&&a!==r)throw new Error(`${t} expected ${r} bytes, got ${a}`);return i}function concatBytes(...t){const e=new Uint8Array(t.reduce((t,e)=>t+e.length,0));let r=0;t.forEach(t=>{if(!u8a(t))throw new Error("Uint8Array expected");e.set(t,r);r+=t.length});return e}function equalBytes(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function utf8ToBytes(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function bitLen(t){let e;for(e=0;t>Wr;t>>=Jr,e+=1);return e}function bitGet(t,e){return t>>BigInt(e)&Jr}const bitSet=(t,e,r)=>t|(r?Jr:Wr)<<BigInt(e);const bitMask=t=>(Kr<<BigInt(t-1))-Jr;const u8n=t=>new Uint8Array(t);const u8fr=t=>Uint8Array.from(t);function createHmacDrbg(t,e,r){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let i=u8n(t);let a=u8n(t);let o=0;const reset=()=>{i.fill(1);a.fill(0);o=0};const h=(...t)=>r(a,i,...t);const reseed=(t=u8n())=>{a=h(u8fr([0]),t);i=h();if(0!==t.length){a=h(u8fr([1]),t);i=h()}};const gen2=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const r=[];for(;t<e;){i=h();const e=i.slice();r.push(e);t+=i.length}return concatBytes(...r)};const genUntil=(t,e)=>{reset();reseed(t);let r;for(;!(r=e(gen2()));)reseed();reset();return r};return genUntil}const Zr={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function validateObject(t,e,r={}){const checkField=(e,r,i)=>{const a=Zr[r];if("function"!=typeof a)throw new Error(`Invalid validator "${r}", expected function`);const o=t[e];if(!(i&&void 0===o||a(o,t)))throw new Error(`Invalid param ${String(e)}=${o} (${typeof o}), expected ${r}`)};for(const[i,a]of Object.entries(e))checkField(i,a,!1);for(const[i,a]of Object.entries(r))checkField(i,a,!0);return t}const Yr=Object.freeze(Object.defineProperty({__proto__:null,bitGet:bitGet,bitLen:bitLen,bitMask:bitMask,bitSet:bitSet,bytesToHex:bytesToHex,bytesToNumberBE:bytesToNumberBE,bytesToNumberLE:bytesToNumberLE,concatBytes:concatBytes,createHmacDrbg:createHmacDrbg,ensureBytes:ensureBytes,equalBytes:equalBytes,hexToBytes:hexToBytes,hexToNumber:hexToNumber,numberToBytesBE:numberToBytesBE,numberToBytesLE:numberToBytesLE,numberToHexUnpadded:numberToHexUnpadded,numberToVarBytesBE:numberToVarBytesBE,utf8ToBytes:utf8ToBytes,validateObject:validateObject},Symbol.toStringTag,{value:"Module"}));
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xr=BigInt(0),$r=BigInt(1),ts=BigInt(2),es=BigInt(3);const ns=BigInt(4),rs=BigInt(5),ss=BigInt(8);BigInt(9);BigInt(16);function mod(t,e){const r=t%e;return r>=Xr?r:e+r}function pow(t,e,r){if(r<=Xr||e<Xr)throw new Error("Expected power/modulo > 0");if(r===$r)return Xr;let i=$r;for(;e>Xr;){e&$r&&(i=i*t%r);t=t*t%r;e>>=$r}return i}function pow2(t,e,r){let i=t;for(;e-- >Xr;){i*=i;i%=r}return i}function invert(t,e){if(t===Xr||e<=Xr)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=mod(t,e);let i=e;let a=Xr,o=$r;for(;r!==Xr;){const t=i/r;const e=i%r;const c=a-o*t;i=r,r=e,a=o,o=c}const c=i;if(c!==$r)throw new Error("invert: does not exist");return mod(a,e)}function tonelliShanks(t){const e=(t-$r)/ts;let r,i,a;for(r=t-$r,i=0;r%ts===Xr;r/=ts,i++);for(a=ts;a<t&&pow(a,e,t)!==t-$r;a++);if(1===i){const e=(t+$r)/ns;return function(t,r){const i=t.pow(r,e);if(!t.eql(t.sqr(i),r))throw new Error("Cannot find square root");return i}}const o=(r+$r)/ts;return function(t,c){if(t.pow(c,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let l=i;let u=t.pow(t.mul(t.ONE,a),r);let f=t.pow(c,o);let d=t.pow(c,r);for(;!t.eql(d,t.ONE);){if(t.eql(d,t.ZERO))return t.ZERO;let e=1;for(let i=t.sqr(d);e<l&&!t.eql(i,t.ONE);e++)i=t.sqr(i);const r=t.pow(u,$r<<BigInt(l-e-1));u=t.sqr(r);f=t.mul(f,r);d=t.mul(d,u);l=e}return f}}function FpSqrt(t){if(t%ns===es){const e=(t+$r)/ns;return function(t,r){const i=t.pow(r,e);if(!t.eql(t.sqr(i),r))throw new Error("Cannot find square root");return i}}if(t%ss===rs){const e=(t-rs)/ss;return function(t,r){const i=t.mul(r,ts);const a=t.pow(i,e);const o=t.mul(r,a);const c=t.mul(t.mul(o,ts),a);const l=t.mul(o,t.sub(c,t.ONE));if(!t.eql(t.sqr(l),r))throw new Error("Cannot find square root");return l}}return tonelliShanks(t)}const is=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"};const r=is.reduce((t,e)=>{t[e]="function";return t},e);return validateObject(t,r)}function FpPow(t,e,r){if(r<Xr)throw new Error("Expected power > 0");if(r===Xr)return t.ONE;if(r===$r)return e;let i=t.ONE;let a=e;for(;r>Xr;){r&$r&&(i=t.mul(i,a));a=t.sqr(a);r>>=$r}return i}function FpInvertBatch(t,e){const r=new Array(e.length);const i=e.reduce((e,i,a)=>{if(t.is0(i))return e;r[a]=e;return t.mul(e,i)},t.ONE);const a=t.inv(i);e.reduceRight((e,i,a)=>{if(t.is0(i))return e;r[a]=t.mul(e,r[a]);return t.mul(e,i)},a);return r}function nLength(t,e){const r=void 0!==e?e:t.toString(2).length;const i=Math.ceil(r/8);return{nBitLength:r,nByteLength:i}}function Field(t,e,r=!1,i={}){if(t<=Xr)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:a,nByteLength:o}=nLength(t,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const c=FpSqrt(t);const l=Object.freeze({ORDER:t,BITS:a,BYTES:o,MASK:bitMask(a),ZERO:Xr,ONE:$r,create:e=>mod(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("Invalid field element: expected bigint, got "+typeof e);return Xr<=e&&e<t},is0:t=>t===Xr,isOdd:t=>(t&$r)===$r,neg:e=>mod(-e,t),eql:(t,e)=>t===e,sqr:e=>mod(e*e,t),add:(e,r)=>mod(e+r,t),sub:(e,r)=>mod(e-r,t),mul:(e,r)=>mod(e*r,t),pow:(t,e)=>FpPow(l,t,e),div:(e,r)=>mod(e*invert(r,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>invert(e,t),sqrt:i.sqrt||(t=>c(l,t)),invertBatch:t=>FpInvertBatch(l,t),cmov:(t,e,r)=>r?e:t,toBytes:t=>r?numberToBytesLE(t,o):numberToBytesBE(t,o),fromBytes:t=>{if(t.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${t.length}`);return r?bytesToNumberLE(t):bytesToNumberBE(t)}});return Object.freeze(l)}function getFieldBytesLength(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function getMinHashLength(t){const e=getFieldBytesLength(t);return e+Math.ceil(e/2)}function mapHashToField(t,e,r=!1){const i=t.length;const a=getFieldBytesLength(e);const o=getMinHashLength(e);if(i<16||i<o||i>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${i}`);const c=r?bytesToNumberBE(t):bytesToNumberLE(t);const l=mod(c,e-$r)+$r;return r?numberToBytesLE(l,a):numberToBytesBE(l,a)}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const as=BigInt(0);const os=BigInt(1);function wNAF(t,e){const constTimeNegate=(t,e)=>{const r=e.negate();return t?r:e};const opts=t=>{const r=Math.ceil(e/t)+1;const i=2**(t-1);return{windows:r,windowSize:i}};return{constTimeNegate:constTimeNegate,unsafeLadder(e,r){let i=t.ZERO;let a=e;for(;r>as;){r&os&&(i=i.add(a));a=a.double();r>>=os}return i},precomputeWindow(t,e){const{windows:r,windowSize:i}=opts(e);const a=[];let o=t;let c=o;for(let l=0;l<r;l++){c=o;a.push(c);for(let t=1;t<i;t++){c=c.add(o);a.push(c)}o=c.double()}return a},wNAF(e,r,i){const{windows:a,windowSize:o}=opts(e);let c=t.ZERO;let l=t.BASE;const u=BigInt(2**e-1);const f=2**e;const d=BigInt(e);for(let t=0;t<a;t++){const e=t*o;let a=Number(i&u);i>>=d;if(a>o){a-=f;i+=os}const g=e;const p=e+Math.abs(a)-1;const m=t%2!=0;const y=a<0;0===a?l=l.add(constTimeNegate(m,r[g])):c=c.add(constTimeNegate(y,r[p]))}return{p:c,f:l}},wNAFCached(t,e,r,i){const a=t._WINDOW_SIZE||1;let o=e.get(t);if(!o){o=this.precomputeWindow(t,a);1!==a&&e.set(t,i(o))}return this.wNAF(a,o,r)}}}function validateBasic(t){validateField(t.Fp);validateObject(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"});return Object.freeze({...nLength(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function validatePointOpts(t){const e=validateBasic(t);validateObject(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:i,a:a}=e;if(r){if(!i.eql(a,i.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:cs,hexToBytes:ls}=Yr;const us={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(t){const{Err:e}=us;if(t.length<2||2!==t[0])throw new e("Invalid signature integer tag");const r=t[1];const i=t.subarray(2,r+2);if(!r||i.length!==r)throw new e("Invalid signature integer: wrong length");if(128&i[0])throw new e("Invalid signature integer: negative");if(0===i[0]&&!(128&i[1]))throw new e("Invalid signature integer: unnecessary leading zero");return{d:cs(i),l:t.subarray(r+2)}},toSig(t){const{Err:e}=us;const r="string"==typeof t?ls(t):t;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let i=r.length;if(i<2||48!=r[0])throw new e("Invalid signature tag");if(r[1]!==i-2)throw new e("Invalid signature: incorrect length");const{d:a,l:o}=us._parseInt(r.subarray(2));const{d:c,l:l}=us._parseInt(o);if(l.length)throw new e("Invalid signature: left bytes after parsing");return{r:a,s:c}},hexFromSig(t){const slice=t=>8&Number.parseInt(t[0],16)?"00"+t:t;const h=t=>{const e=t.toString(16);return 1&e.length?`0${e}`:e};const e=slice(h(t.s));const r=slice(h(t.r));const i=e.length/2;const a=r.length/2;const o=h(i);const c=h(a);return`30${h(a+i+4)}02${c}${r}02${o}${e}`}};const hs=BigInt(0),fs=BigInt(1);BigInt(2);const ds=BigInt(3);BigInt(4);function weierstrassPoints(t){const e=validatePointOpts(t);const{Fp:r}=e;const i=e.toBytes||((t,e,i)=>{const a=e.toAffine();return concatBytes(Uint8Array.from([4]),r.toBytes(a.x),r.toBytes(a.y))});const a=e.fromBytes||(t=>{const e=t.subarray(1);const i=r.fromBytes(e.subarray(0,r.BYTES));const a=r.fromBytes(e.subarray(r.BYTES,2*r.BYTES));return{x:i,y:a}});function weierstrassEquation(t){const{a:i,b:a}=e;const o=r.sqr(t);const c=r.mul(o,t);return r.add(r.add(c,r.mul(t,i)),a)}if(!r.eql(r.sqr(e.Gy),weierstrassEquation(e.Gx)))throw new Error("bad generator point: equation left != right");function isWithinCurveOrder(t){return"bigint"==typeof t&&hs<t&&t<e.n}function assertGE(t){if(!isWithinCurveOrder(t))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function normPrivateKeyToScalar(t){const{allowedPrivateKeyLengths:r,nByteLength:i,wrapPrivateKey:a,n:o}=e;if(r&&"bigint"!=typeof t){t instanceof Uint8Array&&(t=bytesToHex(t));if("string"!=typeof t||!r.includes(t.length))throw new Error("Invalid key");t=t.padStart(2*i,"0")}let c;try{c="bigint"==typeof t?t:bytesToNumberBE(ensureBytes("private key",t,i))}catch(l){throw new Error(`private key must be ${i} bytes, hex or bigint, not ${typeof t}`)}a&&(c=mod(c,o));assertGE(c);return c}const o=new Map;function assertPrjPoint(t){if(!(t instanceof c))throw new Error("ProjectivePoint expected")}class c{constructor(t,e,i){this.px=t;this.py=e;this.pz=i;if(null==t||!r.isValid(t))throw new Error("x required");if(null==e||!r.isValid(e))throw new Error("y required");if(null==i||!r.isValid(i))throw new Error("z required")}static fromAffine(t){const{x:e,y:i}=t||{};if(!t||!r.isValid(e)||!r.isValid(i))throw new Error("invalid affine point");if(t instanceof c)throw new Error("projective point not allowed");const is0=t=>r.eql(t,r.ZERO);return is0(e)&&is0(i)?c.ZERO:new c(e,i,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=r.invertBatch(t.map(t=>t.pz));return t.map((t,r)=>t.toAffine(e[r])).map(c.fromAffine)}static fromHex(t){const e=c.fromAffine(a(ensureBytes("pointHex",t)));e.assertValidity();return e}static fromPrivateKey(t){return c.BASE.multiply(normPrivateKeyToScalar(t))}_setWindowSize(t){this._WINDOW_SIZE=t;o.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:t,y:i}=this.toAffine();if(!r.isValid(t)||!r.isValid(i))throw new Error("bad point: x or y not FE");const a=r.sqr(i);const o=weierstrassEquation(t);if(!r.eql(a,o))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:t}=this.toAffine();if(r.isOdd)return!r.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){assertPrjPoint(t);const{px:e,py:i,pz:a}=this;const{px:o,py:c,pz:l}=t;const u=r.eql(r.mul(e,l),r.mul(o,a));const f=r.eql(r.mul(i,l),r.mul(c,a));return u&&f}negate(){return new c(this.px,r.neg(this.py),this.pz)}double(){const{a:t,b:i}=e;const a=r.mul(i,ds);const{px:o,py:l,pz:u}=this;let f=r.ZERO,d=r.ZERO,g=r.ZERO;let p=r.mul(o,o);let m=r.mul(l,l);let y=r.mul(u,u);let w=r.mul(o,l);w=r.add(w,w);g=r.mul(o,u);g=r.add(g,g);f=r.mul(t,g);d=r.mul(a,y);d=r.add(f,d);f=r.sub(m,d);d=r.add(m,d);d=r.mul(f,d);f=r.mul(w,f);g=r.mul(a,g);y=r.mul(t,y);w=r.sub(p,y);w=r.mul(t,w);w=r.add(w,g);g=r.add(p,p);p=r.add(g,p);p=r.add(p,y);p=r.mul(p,w);d=r.add(d,p);y=r.mul(l,u);y=r.add(y,y);p=r.mul(y,w);f=r.sub(f,p);g=r.mul(y,m);g=r.add(g,g);g=r.add(g,g);return new c(f,d,g)}add(t){assertPrjPoint(t);const{px:i,py:a,pz:o}=this;const{px:l,py:u,pz:f}=t;let d=r.ZERO,g=r.ZERO,p=r.ZERO;const m=e.a;const y=r.mul(e.b,ds);let w=r.mul(i,l);let A=r.mul(a,u);let E=r.mul(o,f);let v=r.add(i,a);let k=r.add(l,u);v=r.mul(v,k);k=r.add(w,A);v=r.sub(v,k);k=r.add(i,o);let B=r.add(l,f);k=r.mul(k,B);B=r.add(w,E);k=r.sub(k,B);B=r.add(a,o);d=r.add(u,f);B=r.mul(B,d);d=r.add(A,E);B=r.sub(B,d);p=r.mul(m,k);d=r.mul(y,E);p=r.add(d,p);d=r.sub(A,p);p=r.add(A,p);g=r.mul(d,p);A=r.add(w,w);A=r.add(A,w);E=r.mul(m,E);k=r.mul(y,k);A=r.add(A,E);E=r.sub(w,E);E=r.mul(m,E);k=r.add(k,E);w=r.mul(A,k);g=r.add(g,w);w=r.mul(B,k);d=r.mul(v,d);d=r.sub(d,w);w=r.mul(v,A);p=r.mul(B,p);p=r.add(p,w);return new c(d,g,p)}subtract(t){return this.add(t.negate())}is0(){return this.equals(c.ZERO)}wNAF(t){return u.wNAFCached(this,o,t,t=>{const e=r.invertBatch(t.map(t=>t.pz));return t.map((t,r)=>t.toAffine(e[r])).map(c.fromAffine)})}multiplyUnsafe(t){const i=c.ZERO;if(t===hs)return i;assertGE(t);if(t===fs)return this;const{endo:a}=e;if(!a)return u.unsafeLadder(this,t);let{k1neg:o,k1:l,k2neg:f,k2:d}=a.splitScalar(t);let g=i;let p=i;let m=this;for(;l>hs||d>hs;){l&fs&&(g=g.add(m));d&fs&&(p=p.add(m));m=m.double();l>>=fs;d>>=fs}o&&(g=g.negate());f&&(p=p.negate());p=new c(r.mul(p.px,a.beta),p.py,p.pz);return g.add(p)}multiply(t){assertGE(t);let i=t;let a,o;const{endo:l}=e;if(l){const{k1neg:t,k1:e,k2neg:f,k2:d}=l.splitScalar(i);let{p:g,f:p}=this.wNAF(e);let{p:m,f:y}=this.wNAF(d);g=u.constTimeNegate(t,g);m=u.constTimeNegate(f,m);m=new c(r.mul(m.px,l.beta),m.py,m.pz);a=g.add(m);o=p.add(y)}else{const{p:t,f:e}=this.wNAF(i);a=t;o=e}return c.normalizeZ([a,o])[0]}multiplyAndAddUnsafe(t,e,r){const i=c.BASE;const mul=(t,e)=>e!==hs&&e!==fs&&t.equals(i)?t.multiply(e):t.multiplyUnsafe(e);const a=mul(this,e).add(mul(t,r));return a.is0()?void 0:a}toAffine(t){const{px:e,py:i,pz:a}=this;const o=this.is0();null==t&&(t=o?r.ONE:r.inv(a));const c=r.mul(e,t);const l=r.mul(i,t);const u=r.mul(a,t);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw new Error("invZ was invalid");return{x:c,y:l}}isTorsionFree(){const{h:t,isTorsionFree:r}=e;if(t===fs)return!0;if(r)return r(c,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:r}=e;return t===fs?this:r?r(c,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){this.assertValidity();return i(c,this,t)}toHex(t=!0){return bytesToHex(this.toRawBytes(t))}}c.BASE=new c(e.Gx,e.Gy,r.ONE);c.ZERO=new c(r.ZERO,r.ONE,r.ZERO);const l=e.nBitLength;const u=wNAF(c,e.endo?Math.ceil(l/2):l);return{CURVE:e,ProjectivePoint:c,normPrivateKeyToScalar:normPrivateKeyToScalar,weierstrassEquation:weierstrassEquation,isWithinCurveOrder:isWithinCurveOrder}}function validateOpts(t){const e=validateBasic(t);validateObject(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"});return Object.freeze({lowS:!0,...e})}function weierstrass(t){const e=validateOpts(t);const{Fp:r,n:i}=e;const a=r.BYTES+1;const o=2*r.BYTES+1;function isValidFieldElement(t){return hs<t&&t<r.ORDER}function modN(t){return mod(t,i)}function invN(t){return invert(t,i)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:f}=weierstrassPoints({...e,toBytes(t,e,i){const a=e.toAffine();const o=r.toBytes(a.x);const c=concatBytes;return i?c(Uint8Array.from([e.hasEvenY()?2:3]),o):c(Uint8Array.from([4]),o,r.toBytes(a.y))},fromBytes(t){const e=t.length;const i=t[0];const c=t.subarray(1);if(e!==a||2!==i&&3!==i){if(e===o&&4===i){const t=r.fromBytes(c.subarray(0,r.BYTES));const e=r.fromBytes(c.subarray(r.BYTES,2*r.BYTES));return{x:t,y:e}}throw new Error(`Point of length ${e} was invalid. Expected ${a} compressed bytes or ${o} uncompressed bytes`)}{const t=bytesToNumberBE(c);if(!isValidFieldElement(t))throw new Error("Point is not on curve");const e=u(t);let a=r.sqrt(e);const o=(a&fs)===fs;const l=!(1&~i);l!==o&&(a=r.neg(a));return{x:t,y:a}}}});const numToNByteStr=t=>bytesToHex(numberToBytesBE(t,e.nByteLength));function isBiggerThanHalfOrder(t){const e=i>>fs;return t>e}function normalizeS(t){return isBiggerThanHalfOrder(t)?modN(-t):t}const slcNum=(t,e,r)=>bytesToNumberBE(t.slice(e,r));class d{constructor(t,e,r){this.r=t;this.s=e;this.recovery=r;this.assertValidity()}static fromCompact(t){const r=e.nByteLength;t=ensureBytes("compactSignature",t,2*r);return new d(slcNum(t,0,r),slcNum(t,r,2*r))}static fromDER(t){const{r:e,s:r}=us.toSig(ensureBytes("DER",t));return new d(e,r)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(t){return new d(this.r,this.s,t)}recoverPublicKey(t){const{r:i,s:a,recovery:o}=this;const l=m(ensureBytes("msgHash",t));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const u=2===o||3===o?i+e.n:i;if(u>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const f=1&o?"03":"02";const d=c.fromHex(f+numToNByteStr(u));const g=invN(u);const p=modN(-l*g);const y=modN(a*g);const w=c.BASE.multiplyAndAddUnsafe(d,p,y);if(!w)throw new Error("point at infinify");w.assertValidity();return w}hasHighS(){return isBiggerThanHalfOrder(this.s)}normalizeS(){return this.hasHighS()?new d(this.r,modN(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes(this.toDERHex())}toDERHex(){return us.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hexToBytes(this.toCompactHex())}toCompactHex(){return numToNByteStr(this.r)+numToNByteStr(this.s)}}const g={isValidPrivateKey(t){try{l(t);return!0}catch(e){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const t=getMinHashLength(e.n);return mapHashToField(e.randomBytes(t),e.n)},precompute(t=8,e=c.BASE){e._setWindowSize(t);e.multiply(BigInt(3));return e}};function getPublicKey(t,e=!0){return c.fromPrivateKey(t).toRawBytes(e)}function isProbPub(t){const e=t instanceof Uint8Array;const r="string"==typeof t;const i=(e||r)&&t.length;return e?i===a||i===o:r?i===2*a||i===2*o:t instanceof c}function getSharedSecret(t,e,r=!0){if(isProbPub(t))throw new Error("first arg must be private key");if(!isProbPub(e))throw new Error("second arg must be public key");const i=c.fromHex(e);return i.multiply(l(t)).toRawBytes(r)}const p=e.bits2int||function(t){const r=bytesToNumberBE(t);const i=8*t.length-e.nBitLength;return i>0?r>>BigInt(i):r};const m=e.bits2int_modN||function(t){return modN(p(t))};const y=bitMask(e.nBitLength);function int2octets(t){if("bigint"!=typeof t)throw new Error("bigint expected");if(!(hs<=t&&t<y))throw new Error(`bigint expected < 2^${e.nBitLength}`);return numberToBytesBE(t,e.nByteLength)}function prepSig(t,i,a=w){if(["recovered","canonical"].some(t=>t in a))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:u}=e;let{lowS:g,prehash:y,extraEntropy:A}=a;null==g&&(g=!0);t=ensureBytes("msgHash",t);y&&(t=ensureBytes("prehashed msgHash",o(t)));const E=m(t);const v=l(i);const k=[int2octets(v),int2octets(E)];if(null!=A){const t=!0===A?u(r.BYTES):A;k.push(ensureBytes("extraEntropy",t))}const B=concatBytes(...k);const x=E;function k2sig(t){const e=p(t);if(!f(e))return;const r=invN(e);const i=c.BASE.multiply(e).toAffine();const a=modN(i.x);if(a===hs)return;const o=modN(r*modN(x+a*v));if(o===hs)return;let l=(i.x===a?0:2)|Number(i.y&fs);let u=o;if(g&&isBiggerThanHalfOrder(o)){u=normalizeS(o);l^=1}return new d(a,u,l)}return{seed:B,k2sig:k2sig}}const w={lowS:e.lowS,prehash:!1};const A={lowS:e.lowS,prehash:!1};function sign(t,r,i=w){const{seed:a,k2sig:o}=prepSig(t,r,i);const c=e;const l=createHmacDrbg(c.hash.outputLen,c.nByteLength,c.hmac);return l(a,o)}c.BASE._setWindowSize(8);function verify(t,r,i,a=A){const o=t;r=ensureBytes("msgHash",r);i=ensureBytes("publicKey",i);if("strict"in a)throw new Error("options.strict was renamed to lowS");const{lowS:l,prehash:u}=a;let f;let g;try{if("string"==typeof o||o instanceof Uint8Array)try{f=d.fromDER(o)}catch(P){if(!(P instanceof us.Err))throw P;f=d.fromCompact(o)}else{if("object"!=typeof o||"bigint"!=typeof o.r||"bigint"!=typeof o.s)throw new Error("PARSE");{const{r:t,s:e}=o;f=new d(t,e)}}g=c.fromHex(i)}catch(N){if("PARSE"===N.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(l&&f.hasHighS())return!1;u&&(r=e.hash(r));const{r:p,s:y}=f;const w=m(r);const E=invN(y);const v=modN(w*E);const k=modN(p*E);const B=c.BASE.multiplyAndAddUnsafe(g,v,k)?.toAffine();if(!B)return!1;const x=modN(B.x);return x===p}return{CURVE:e,getPublicKey:getPublicKey,getSharedSecret:getSharedSecret,sign:sign,verify:verify,ProjectivePoint:c,Signature:d,utils:g}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function getHash(t){return{hash:t,hmac:(e,...r)=>hmac(t,e,concatBytes$1(...r)),randomBytes:randomBytes}}function createCurve(t,e){const create=e=>weierstrass({...t,...getHash(e)});return Object.freeze({...create(e),create:create})}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gs=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f");const ps=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");const ms=BigInt(1);const ys=BigInt(2);const divNearest=(t,e)=>(t+e/ys)/e;function sqrtMod(t){const e=gs;const r=BigInt(3),i=BigInt(6),a=BigInt(11),o=BigInt(22);const c=BigInt(23),l=BigInt(44),u=BigInt(88);const f=t*t*t%e;const d=f*f*t%e;const g=pow2(d,r,e)*d%e;const p=pow2(g,r,e)*d%e;const m=pow2(p,ys,e)*f%e;const y=pow2(m,a,e)*m%e;const w=pow2(y,o,e)*y%e;const A=pow2(w,l,e)*w%e;const E=pow2(A,u,e)*A%e;const v=pow2(E,l,e)*w%e;const k=pow2(v,r,e)*d%e;const B=pow2(k,c,e)*y%e;const x=pow2(B,i,e)*f%e;const P=pow2(x,ys,e);if(!ws.eql(ws.sqr(P),t))throw new Error("Cannot find square root");return P}const ws=Field(gs,void 0,void 0,{sqrt:sqrtMod});const As=createCurve({a:BigInt(0),b:BigInt(7),Fp:ws,n:ps,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=ps;const r=BigInt("0x3086d221a7d46bcde86c90e49284eb15");const i=-ms*BigInt("0xe4437ed6010e88286f547fa90abfe4c3");const a=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8");const o=r;const c=BigInt("0x100000000000000000000000000000000");const l=divNearest(o*t,e);const u=divNearest(-i*t,e);let f=mod(t-l*r-u*a,e);let d=mod(-l*i-u*o,e);const g=f>c;const p=d>c;g&&(f=e-f);p&&(d=e-d);if(f>c||d>c)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:g,k1:f,k2neg:p,k2:d}}}},wr);BigInt(0);As.ProjectivePoint;const bs="0x0000000000000000000000000000000000000000";const Es="0x0000000000000000000000000000000000000000000000000000000000000000";const vs=BigInt(0);const ks=BigInt(1);const Bs=BigInt(2);const xs=BigInt(27);const Ps=BigInt(28);const Ns=BigInt(35);const Is={};function toUint256(t){return zeroPadValue(toBeArray(t),32)}const Cs=class t{constructor(t,e,r,i){__privateAdd(this,tt);__privateAdd(this,et);__privateAdd(this,nt);__privateAdd(this,rt);assertPrivate(t,Is,"Signature");__privateSet(this,tt,e);__privateSet(this,et,r);__privateSet(this,nt,i);__privateSet(this,rt,null)}get r(){return __privateGet(this,tt)}set r(t){assertArgument(32===dataLength(t),"invalid r","value",t);__privateSet(this,tt,hexlify(t))}get s(){assertArgument(parseInt(__privateGet(this,et).substring(0,3))<8,"non-canonical s; use ._s","s",__privateGet(this,et));return __privateGet(this,et)}set s(t){assertArgument(32===dataLength(t),"invalid s","value",t);__privateSet(this,et,hexlify(t))}get _s(){return __privateGet(this,et)}isValid(){return parseInt(__privateGet(this,et).substring(0,3))<8}get v(){return __privateGet(this,nt)}set v(t){const e=getNumber(t,"value");assertArgument(27===e||28===e,"invalid v","v",t);__privateSet(this,nt,e)}get networkV(){return __privateGet(this,rt)}get legacyChainId(){const e=this.networkV;return null==e?null:t.getChainId(e)}get yParity(){return 27===this.v?0:1}get yParityAndS(){const t=getBytes(this.s);this.yParity&&(t[0]|=128);return hexlify(t)}get compactSerialized(){return concat([this.r,this.yParityAndS])}get serialized(){return concat([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new t(Is,this.r,this._s,this.v);this.networkV&&__privateSet(e,rt,this.networkV);return e}toJSON(){const t=this.networkV;return{_type:"signature",networkV:null!=t?t.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(t){const e=getBigInt(t,"v");if(e==xs||e==Ps)return vs;assertArgument(e>=Ns,"invalid EIP-155 v","v",t);return(e-Ns)/Bs}static getChainIdV(t,e){return getBigInt(t)*Bs+BigInt(35+e-27)}static getNormalizedV(t){const e=getBigInt(t);if(e===vs||e===xs)return 27;if(e===ks||e===Ps)return 28;assertArgument(e>=Ns,"invalid v","v",t);return e&ks?27:28}static from(e){function assertError(t,r){assertArgument(t,r,"signature",e)}if(null==e)return new t(Is,Es,Es,27);if("string"==typeof e){const r=getBytes(e,"signature");if(64===r.length){const e=hexlify(r.slice(0,32));const i=r.slice(32,64);const a=128&i[0]?28:27;i[0]&=127;return new t(Is,e,hexlify(i),a)}if(65===r.length){const e=hexlify(r.slice(0,32));const i=hexlify(r.slice(32,64));const a=t.getNormalizedV(r[64]);return new t(Is,e,i,a)}assertError(!1,"invalid raw signature length")}if(e instanceof t)return e.clone();const r=e.r;assertError(null!=r,"missing r");const i=toUint256(r);const a=function(t,e){if(null!=t)return toUint256(t);if(null!=e){assertError(isHexString(e,32),"invalid yParityAndS");const t=getBytes(e);t[0]&=127;return hexlify(t)}assertError(!1,"missing s")}(e.s,e.yParityAndS);const{networkV:o,v:c}=function(e,r,i){if(null!=e){const r=getBigInt(e);return{networkV:r>=Ns?r:void 0,v:t.getNormalizedV(r)}}if(null!=r){assertError(isHexString(r,32),"invalid yParityAndS");return{v:128&getBytes(r)[0]?28:27}}if(null!=i){switch(getNumber(i,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}assertError(!1,"invalid yParity")}assertError(!1,"missing v")}(e.v,e.yParityAndS,e.yParity);const l=new t(Is,i,a,c);o&&__privateSet(l,rt,o);assertError(null==e.yParity||getNumber(e.yParity,"sig.yParity")===l.yParity,"yParity mismatch");assertError(null==e.yParityAndS||e.yParityAndS===l.yParityAndS,"yParityAndS mismatch");return l}};tt=new WeakMap;et=new WeakMap;nt=new WeakMap;rt=new WeakMap;let Ts=Cs;const Os=class t{constructor(t){__privateAdd(this,st);assertArgument(32===dataLength(t),"invalid private key","privateKey","[REDACTED]");__privateSet(this,st,hexlify(t))}get privateKey(){return __privateGet(this,st)}get publicKey(){return t.computePublicKey(__privateGet(this,st))}get compressedPublicKey(){return t.computePublicKey(__privateGet(this,st),!0)}sign(t){assertArgument(32===dataLength(t),"invalid digest length","digest",t);const e=As.sign(getBytesCopy(t),getBytesCopy(__privateGet(this,st)),{lowS:!0});return Ts.from({r:toBeHex(e.r,32),s:toBeHex(e.s,32),v:e.recovery?28:27})}computeSharedSecret(e){const r=t.computePublicKey(e);return hexlify(As.getSharedSecret(getBytesCopy(__privateGet(this,st)),getBytes(r),!1))}static computePublicKey(t,e){let r=getBytes(t,"key");if(32===r.length){const t=As.getPublicKey(r,!!e);return hexlify(t)}if(64===r.length){const t=new Uint8Array(65);t[0]=4;t.set(r,1);r=t}const i=As.ProjectivePoint.fromHex(r);return hexlify(i.toRawBytes(e))}static recoverPublicKey(t,e){assertArgument(32===dataLength(t),"invalid digest length","digest",t);const r=Ts.from(e);let i=As.Signature.fromCompact(getBytesCopy(concat([r.r,r.s])));i=i.addRecoveryBit(r.yParity);const a=i.recoverPublicKey(getBytesCopy(t));assertArgument(null!=a,"invalid signature for digest","signature",e);return"0x"+a.toHex(!1)}static addPoints(e,r,i){const a=As.ProjectivePoint.fromHex(t.computePublicKey(e).substring(2));const o=As.ProjectivePoint.fromHex(t.computePublicKey(r).substring(2));return"0x"+a.add(o).toHex(!!i)}};st=new WeakMap;let Rs=Os;const Ss=BigInt(0);const Us=BigInt(36);function getChecksumAddress(t){t=t.toLowerCase();const e=t.substring(2).split("");const r=new Uint8Array(40);for(let a=0;a<40;a++)r[a]=e[a].charCodeAt(0);const i=getBytes(keccak256(r));for(let a=0;a<40;a+=2){i[a>>1]>>4>=8&&(e[a]=e[a].toUpperCase());(15&i[a>>1])>=8&&(e[a+1]=e[a+1].toUpperCase())}return"0x"+e.join("")}const Ls={};for(let Bc=0;Bc<10;Bc++)Ls[String(Bc)]=String(Bc);for(let Bc=0;Bc<26;Bc++)Ls[String.fromCharCode(65+Bc)]=String(10+Bc);const Fs=15;function ibanChecksum(t){t=t.toUpperCase();t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(t=>Ls[t]).join("");for(;e.length>=Fs;){let t=e.substring(0,Fs);e=parseInt(t,10)%97+e.substring(t.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}const Ms=function(){const t={};for(let e=0;e<36;e++){const r="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[r]=BigInt(e)}return t}();function fromBase36(t){t=t.toLowerCase();let e=Ss;for(let r=0;r<t.length;r++)e=e*Us+Ms[t[r]];return e}function getAddress(t){assertArgument("string"==typeof t,"invalid address","address",t);if(t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=getChecksumAddress(t);assertArgument(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t);return e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){assertArgument(t.substring(2,4)===ibanChecksum(t),"bad icap checksum","address",t);let e=fromBase36(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return getChecksumAddress("0x"+e)}assertArgument(!1,"invalid address","address",t)}function getCreateAddress(t){const e=getAddress(t.from);const r=getBigInt(t.nonce,"tx.nonce");let i=r.toString(16);i="0"===i?"0x":i.length%2?"0x0"+i:"0x"+i;return getAddress(dataSlice(keccak256(encodeRlp([e,i])),12))}function isAddressable(t){return t&&"function"==typeof t.getAddress}function isAddress(t){try{getAddress(t);return!0}catch(e){}return!1}async function checkAddress(t,e){const r=await e;if(null==r||"0x0000000000000000000000000000000000000000"===r){assert("string"!=typeof t,"unconfigured name","UNCONFIGURED_NAME",{value:t});assertArgument(!1,"invalid AddressLike value; did not resolve to a value address","target",t)}return getAddress(r)}function resolveAddress(t,e){if("string"==typeof t){if(t.match(/^0x[0-9a-f]{40}$/i))return getAddress(t);assert(null!=e,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"});return checkAddress(t,e.resolveName(t))}if(isAddressable(t))return checkAddress(t,t.getAddress());if(t&&"function"==typeof t.then)return checkAddress(t,t);assertArgument(!1,"unsupported addressable value","target",t)}const Ds={};function n(t,e){let r=!1;if(e<0){r=!0;e*=-1}return new _s(Ds,`${r?"":"u"}int${e}`,t,{signed:r,width:e})}function b(t,e){return new _s(Ds,`bytes${e||""}`,t,{size:e})}const Hs=Symbol.for("_ethers_typed");const Gs=class t{constructor(t,e,r,i){__publicField(this,"type");__publicField(this,"value");__privateAdd(this,it);__publicField(this,"_typedSymbol");null==i&&(i=null);assertPrivate(Ds,t,"Typed");defineProperties(this,{_typedSymbol:Hs,type:e,value:r});__privateSet(this,it,i);this.format()}format(){if("array"===this.type)throw new Error("");if("dynamicArray"===this.type)throw new Error("");return"tuple"===this.type?`tuple(${this.value.map(t=>t.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return __privateGet(this,it)}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===__privateGet(this,it)?-1:!1===__privateGet(this,it)?this.value.length:null}static from(e,r){return new t(Ds,e,r)}static uint8(t){return n(t,8)}static uint16(t){return n(t,16)}static uint24(t){return n(t,24)}static uint32(t){return n(t,32)}static uint40(t){return n(t,40)}static uint48(t){return n(t,48)}static uint56(t){return n(t,56)}static uint64(t){return n(t,64)}static uint72(t){return n(t,72)}static uint80(t){return n(t,80)}static uint88(t){return n(t,88)}static uint96(t){return n(t,96)}static uint104(t){return n(t,104)}static uint112(t){return n(t,112)}static uint120(t){return n(t,120)}static uint128(t){return n(t,128)}static uint136(t){return n(t,136)}static uint144(t){return n(t,144)}static uint152(t){return n(t,152)}static uint160(t){return n(t,160)}static uint168(t){return n(t,168)}static uint176(t){return n(t,176)}static uint184(t){return n(t,184)}static uint192(t){return n(t,192)}static uint200(t){return n(t,200)}static uint208(t){return n(t,208)}static uint216(t){return n(t,216)}static uint224(t){return n(t,224)}static uint232(t){return n(t,232)}static uint240(t){return n(t,240)}static uint248(t){return n(t,248)}static uint256(t){return n(t,256)}static uint(t){return n(t,256)}static int8(t){return n(t,-8)}static int16(t){return n(t,-16)}static int24(t){return n(t,-24)}static int32(t){return n(t,-32)}static int40(t){return n(t,-40)}static int48(t){return n(t,-48)}static int56(t){return n(t,-56)}static int64(t){return n(t,-64)}static int72(t){return n(t,-72)}static int80(t){return n(t,-80)}static int88(t){return n(t,-88)}static int96(t){return n(t,-96)}static int104(t){return n(t,-104)}static int112(t){return n(t,-112)}static int120(t){return n(t,-120)}static int128(t){return n(t,-128)}static int136(t){return n(t,-136)}static int144(t){return n(t,-144)}static int152(t){return n(t,-152)}static int160(t){return n(t,-160)}static int168(t){return n(t,-168)}static int176(t){return n(t,-176)}static int184(t){return n(t,-184)}static int192(t){return n(t,-192)}static int200(t){return n(t,-200)}static int208(t){return n(t,-208)}static int216(t){return n(t,-216)}static int224(t){return n(t,-224)}static int232(t){return n(t,-232)}static int240(t){return n(t,-240)}static int248(t){return n(t,-248)}static int256(t){return n(t,-256)}static int(t){return n(t,-256)}static bytes1(t){return b(t,1)}static bytes2(t){return b(t,2)}static bytes3(t){return b(t,3)}static bytes4(t){return b(t,4)}static bytes5(t){return b(t,5)}static bytes6(t){return b(t,6)}static bytes7(t){return b(t,7)}static bytes8(t){return b(t,8)}static bytes9(t){return b(t,9)}static bytes10(t){return b(t,10)}static bytes11(t){return b(t,11)}static bytes12(t){return b(t,12)}static bytes13(t){return b(t,13)}static bytes14(t){return b(t,14)}static bytes15(t){return b(t,15)}static bytes16(t){return b(t,16)}static bytes17(t){return b(t,17)}static bytes18(t){return b(t,18)}static bytes19(t){return b(t,19)}static bytes20(t){return b(t,20)}static bytes21(t){return b(t,21)}static bytes22(t){return b(t,22)}static bytes23(t){return b(t,23)}static bytes24(t){return b(t,24)}static bytes25(t){return b(t,25)}static bytes26(t){return b(t,26)}static bytes27(t){return b(t,27)}static bytes28(t){return b(t,28)}static bytes29(t){return b(t,29)}static bytes30(t){return b(t,30)}static bytes31(t){return b(t,31)}static bytes32(t){return b(t,32)}static address(e){return new t(Ds,"address",e)}static bool(e){return new t(Ds,"bool",!!e)}static bytes(e){return new t(Ds,"bytes",e)}static string(e){return new t(Ds,"string",e)}static array(t,e){throw new Error("not implemented yet")}static tuple(t,e){throw new Error("not implemented yet")}static overrides(e){return new t(Ds,"overrides",Object.assign({},e))}static isTyped(t){return t&&"object"==typeof t&&"_typedSymbol"in t&&t._typedSymbol===Hs}static dereference(e,r){if(t.isTyped(e)){if(e.type!==r)throw new Error(`invalid type: expecetd ${r}, got ${e.type}`);return e.value}return e}};it=new WeakMap;let _s=Gs;class Qs extends ir{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){let r=_s.dereference(e,"string");try{r=getAddress(r)}catch(i){return this._throwError(i.message,e)}return t.writeValue(r)}decode(t){return getAddress(toBeHex(t.readValue(),20))}}class zs extends ir{constructor(t){super(t.name,t.type,"_",t.dynamic);__publicField(this,"coder");this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,e){return this.coder.encode(t,e)}decode(t){return this.coder.decode(t)}}function pack(t,e,r){let i=[];if(Array.isArray(r))i=r;else if(r&&"object"==typeof r){let t={};i=e.map(e=>{const i=e.localName;assert(i,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:e},value:r});assert(!t[i],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:e},value:r});t[i]=!0;return r[i]})}else assertArgument(!1,"invalid tuple value","tuple",r);assertArgument(e.length===i.length,"types/value length mismatch","tuple",r);let a=new ar;let o=new ar;let c=[];e.forEach((t,e)=>{let r=i[e];if(t.dynamic){let e=o.length;t.encode(o,r);let i=a.writeUpdatableValue();c.push(t=>{i(t+e)})}else t.encode(a,r)});c.forEach(t=>{t(a.length)});let l=t.appendWriter(a);l+=t.appendWriter(o);return l}function unpack(t,e){let r=[];let i=[];let a=t.subReader(0);e.forEach(e=>{let o=null;if(e.dynamic){let r=t.readIndex();let i=a.subReader(r);try{o=e.decode(i)}catch(c){if(isError(c,"BUFFER_OVERRUN"))throw c;o=c;o.baseType=e.name;o.name=e.localName;o.type=e.type}}else try{o=e.decode(t)}catch(c){if(isError(c,"BUFFER_OVERRUN"))throw c;o=c;o.baseType=e.name;o.name=e.localName;o.type=e.type}if(null==o)throw new Error("investigate");r.push(o);i.push(e.localName||null)});return sr.fromItems(r,i)}class js extends ir{constructor(t,e,r){const i=t.type+"["+(e>=0?e:"")+"]";const a=-1===e||t.dynamic;super("array",i,r,a);__publicField(this,"coder");__publicField(this,"length");defineProperties(this,{coder:t,length:e})}defaultValue(){const t=this.coder.defaultValue();const e=[];for(let r=0;r<this.length;r++)e.push(t);return e}encode(t,e){const r=_s.dereference(e,"array");Array.isArray(r)||this._throwError("expected array value",r);let i=this.length;if(-1===i){i=r.length;t.writeValue(r.length)}assertArgumentCount(r.length,i,"coder array"+(this.localName?" "+this.localName:""));let a=[];for(let o=0;o<r.length;o++)a.push(this.coder);return pack(t,a,r)}decode(t){let e=this.length;if(-1===e){e=t.readIndex();assert(e*Xn<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:e*Xn,length:t.dataLength})}let r=[];for(let i=0;i<e;i++)r.push(new zs(this.coder));return unpack(t,r)}}class Vs extends ir{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){const r=_s.dereference(e,"bool");return t.writeValue(r?1:0)}decode(t){return!!t.readValue()}}class Ws extends ir{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=getBytesCopy(e);let r=t.writeValue(e.length);r+=t.writeBytes(e);return r}decode(t){return t.readBytes(t.readIndex(),!0)}}class Js extends Ws{constructor(t){super("bytes",t)}decode(t){return hexlify(super.decode(t))}}class Ks extends ir{constructor(t,e){let r="bytes"+String(t);super(r,r,e,!1);__publicField(this,"size");defineProperties(this,{size:t},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(t,e){let r=getBytesCopy(_s.dereference(e,this.type));r.length!==this.size&&this._throwError("incorrect data length",e);return t.writeBytes(r)}decode(t){return hexlify(t.readBytes(this.size))}}const qs=new Uint8Array([]);class Zs extends ir{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){null!=e&&this._throwError("not null",e);return t.writeBytes(qs)}decode(t){t.readBytes(0);return null}}const Ys=BigInt(0);const Xs=BigInt(1);const $s=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class ti extends ir{constructor(t,e,r){const i=(e?"int":"uint")+8*t;super(i,i,r,!1);__publicField(this,"size");__publicField(this,"signed");defineProperties(this,{size:t,signed:e},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,e){let r=getBigInt(_s.dereference(e,this.type));let i=mask($s,8*Xn);if(this.signed){let t=mask(i,8*this.size-1);(r>t||r<-(t+Xs))&&this._throwError("value out-of-bounds",e);r=toTwos(r,8*Xn)}else(r<Ys||r>mask(i,8*this.size))&&this._throwError("value out-of-bounds",e);return t.writeValue(r)}decode(t){let e=mask(t.readValue(),8*this.size);this.signed&&(e=fromTwos(e,8*this.size));return e}}class ei extends Ws{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,toUtf8Bytes(_s.dereference(e,"string")))}decode(t){return toUtf8String(super.decode(t))}}class ni extends ir{constructor(t,e){let r=!1;const i=[];t.forEach(t=>{t.dynamic&&(r=!0);i.push(t.type)});const a="tuple("+i.join(",")+")";super("tuple",a,e,r);__publicField(this,"coders");defineProperties(this,{coders:Object.freeze(t.slice())})}defaultValue(){const t=[];this.coders.forEach(e=>{t.push(e.defaultValue())});const e=this.coders.reduce((t,e)=>{const r=e.localName;if(r){t[r]||(t[r]=0);t[r]++}return t},{});this.coders.forEach((r,i)=>{let a=r.localName;if(a&&1===e[a]){"length"===a&&(a="_length");null==t[a]&&(t[a]=t[i])}});return Object.freeze(t)}encode(t,e){const r=_s.dereference(e,"tuple");return pack(t,this.coders,r)}decode(t){return unpack(t,this.coders)}}function accessSetify(t,e){return{address:getAddress(t),storageKeys:e.map((t,e)=>{assertArgument(isHexString(t,32),"invalid slot",`storageKeys[${e}]`,t);return t.toLowerCase()})}}function accessListify(t){if(Array.isArray(t))return t.map((e,r)=>{if(Array.isArray(e)){assertArgument(2===e.length,"invalid slot set",`value[${r}]`,e);return accessSetify(e[0],e[1])}assertArgument(null!=e&&"object"==typeof e,"invalid address-slot set","value",t);return accessSetify(e.address,e.storageKeys)});assertArgument(null!=t&&"object"==typeof t,"invalid access list","value",t);const e=Object.keys(t).map(e=>{const r=t[e].reduce((t,e)=>{t[e]=!0;return t},{});return accessSetify(e,Object.keys(r).sort())});e.sort((t,e)=>t.address.localeCompare(e.address));return e}function authorizationify(t){return{address:getAddress(t.address),nonce:getBigInt(null!=t.nonce?t.nonce:0),chainId:getBigInt(null!=t.chainId?t.chainId:0),signature:Ts.from(t.signature)}}function computeAddress(t){let e;e="string"==typeof t?Rs.computePublicKey(t,!1):t.publicKey;return getAddress(keccak256("0x"+e.substring(4)).substring(26))}function recoverAddress(t,e){return computeAddress(Rs.recoverPublicKey(t,e))}const ri=BigInt(0);const si=BigInt(2);const ii=BigInt(27);const ai=BigInt(28);const oi=BigInt(35);const ci=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const li=131072;function getKzgLibrary(t){const blobToKzgCommitment=e=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&"function"==typeof t.blobToKzgCommitment)return getBytes(t.blobToKzgCommitment(hexlify(e)))}else if("blobToKzgCommitment"in t&&"function"==typeof t.blobToKzgCommitment)return getBytes(t.blobToKzgCommitment(e));if("blobToKZGCommitment"in t&&"function"==typeof t.blobToKZGCommitment)return getBytes(t.blobToKZGCommitment(hexlify(e)));assertArgument(!1,"unsupported KZG library","kzg",t)};const computeBlobKzgProof=(e,r)=>{if("computeBlobProof"in t&&"function"==typeof t.computeBlobProof)return getBytes(t.computeBlobProof(hexlify(e),hexlify(r)));if("computeBlobKzgProof"in t&&"function"==typeof t.computeBlobKzgProof)return t.computeBlobKzgProof(e,r);if("computeBlobKZGProof"in t&&"function"==typeof t.computeBlobKZGProof)return getBytes(t.computeBlobKZGProof(hexlify(e),hexlify(r)));assertArgument(!1,"unsupported KZG library","kzg",t)};return{blobToKzgCommitment:blobToKzgCommitment,computeBlobKzgProof:computeBlobKzgProof}}function getVersionedHash(t,e){let r=t.toString(16);for(;r.length<2;)r="0"+r;r+=sha256(e).substring(4);return"0x"+r}function handleAddress(t){return"0x"===t?null:getAddress(t)}function handleAccessList(t,e){try{return accessListify(t)}catch(r){assertArgument(!1,r.message,e,t)}}function handleAuthorizationList(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const e=[];for(let r=0;r<t.length;r++){const i=t[r];if(!Array.isArray(i))throw new Error(`authorization[${r}]: invalid array`);if(6!==i.length)throw new Error(`authorization[${r}]: wrong length`);if(!i[1])throw new Error(`authorization[${r}]: null address`);e.push({address:handleAddress(i[1]),nonce:handleUint(i[2],"nonce"),chainId:handleUint(i[0],"chainId"),signature:Ts.from({yParity:handleNumber(i[3],"yParity"),r:zeroPadValue(i[4],32),s:zeroPadValue(i[5],32)})})}return e}catch(r){assertArgument(!1,r.message,e,t)}}function handleNumber(t,e){return"0x"===t?0:getNumber(t,e)}function handleUint(t,e){if("0x"===t)return ri;const r=getBigInt(t,e);assertArgument(r<=ci,"value exceeds uint size",e,r);return r}function formatNumber(t,e){const r=getBigInt(t,"value");const i=toBeArray(r);assertArgument(i.length<=32,"value too large",`tx.${e}`,r);return i}function formatAccessList(t){return accessListify(t).map(t=>[t.address,t.storageKeys])}function formatAuthorizationList(t){return t.map(t=>[formatNumber(t.chainId,"chainId"),t.address,formatNumber(t.nonce,"nonce"),formatNumber(t.signature.yParity,"yParity"),toBeArray(t.signature.r),toBeArray(t.signature.s)])}function formatHashes(t,e){assertArgument(Array.isArray(t),`invalid ${e}`,"value",t);for(let r=0;r<t.length;r++)assertArgument(isHexString(t[r],32),"invalid ${ param } hash",`value[${r}]`,t[r]);return t}function _parseLegacy(t){const e=decodeRlp(t);assertArgument(Array.isArray(e)&&(9===e.length||6===e.length),"invalid field count for legacy transaction","data",t);const r={type:0,nonce:handleNumber(e[0],"nonce"),gasPrice:handleUint(e[1],"gasPrice"),gasLimit:handleUint(e[2],"gasLimit"),to:handleAddress(e[3]),value:handleUint(e[4],"value"),data:hexlify(e[5]),chainId:ri};if(6===e.length)return r;const i=handleUint(e[6],"v");const a=handleUint(e[7],"r");const o=handleUint(e[8],"s");if(a===ri&&o===ri)r.chainId=i;else{let t=(i-oi)/si;t<ri&&(t=ri);r.chainId=t;assertArgument(t!==ri||i===ii||i===ai,"non-canonical legacy v","v",e[6]);r.signature=Ts.from({r:zeroPadValue(e[7],32),s:zeroPadValue(e[8],32),v:i})}return r}function _serializeLegacy(t,e){const r=[formatNumber(t.nonce,"nonce"),formatNumber(t.gasPrice||0,"gasPrice"),formatNumber(t.gasLimit,"gasLimit"),t.to||"0x",formatNumber(t.value,"value"),t.data];let i=ri;if(t.chainId!=ri){i=getBigInt(t.chainId,"tx.chainId");assertArgument(!e||null==e.networkV||e.legacyChainId===i,"tx.chainId/sig.v mismatch","sig",e)}else if(t.signature){const e=t.signature.legacyChainId;null!=e&&(i=e)}if(!e){if(i!==ri){r.push(toBeArray(i));r.push("0x");r.push("0x")}return encodeRlp(r)}let a=BigInt(27+e.yParity);i!==ri?a=Ts.getChainIdV(i,e.v):BigInt(e.v)!==a&&assertArgument(!1,"tx.chainId/sig.v mismatch","sig",e);r.push(toBeArray(a));r.push(toBeArray(e.r));r.push(toBeArray(e.s));return encodeRlp(r)}function _parseEipSignature(t,e){let r;try{r=handleNumber(e[0],"yParity");if(0!==r&&1!==r)throw new Error("bad yParity")}catch(c){assertArgument(!1,"invalid yParity","yParity",e[0])}const i=zeroPadValue(e[1],32);const a=zeroPadValue(e[2],32);const o=Ts.from({r:i,s:a,yParity:r});t.signature=o}function _parseEip1559(t){const e=decodeRlp(getBytes(t).slice(1));assertArgument(Array.isArray(e)&&(9===e.length||12===e.length),"invalid field count for transaction type: 2","data",hexlify(t));const r={type:2,chainId:handleUint(e[0],"chainId"),nonce:handleNumber(e[1],"nonce"),maxPriorityFeePerGas:handleUint(e[2],"maxPriorityFeePerGas"),maxFeePerGas:handleUint(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:handleUint(e[4],"gasLimit"),to:handleAddress(e[5]),value:handleUint(e[6],"value"),data:hexlify(e[7]),accessList:handleAccessList(e[8],"accessList")};if(9===e.length)return r;_parseEipSignature(r,e.slice(9));return r}function _serializeEip1559(t,e){const r=[formatNumber(t.chainId,"chainId"),formatNumber(t.nonce,"nonce"),formatNumber(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(t.maxFeePerGas||0,"maxFeePerGas"),formatNumber(t.gasLimit,"gasLimit"),t.to||"0x",formatNumber(t.value,"value"),t.data,formatAccessList(t.accessList||[])];if(e){r.push(formatNumber(e.yParity,"yParity"));r.push(toBeArray(e.r));r.push(toBeArray(e.s))}return concat(["0x02",encodeRlp(r)])}function _parseEip2930(t){const e=decodeRlp(getBytes(t).slice(1));assertArgument(Array.isArray(e)&&(8===e.length||11===e.length),"invalid field count for transaction type: 1","data",hexlify(t));const r={type:1,chainId:handleUint(e[0],"chainId"),nonce:handleNumber(e[1],"nonce"),gasPrice:handleUint(e[2],"gasPrice"),gasLimit:handleUint(e[3],"gasLimit"),to:handleAddress(e[4]),value:handleUint(e[5],"value"),data:hexlify(e[6]),accessList:handleAccessList(e[7],"accessList")};if(8===e.length)return r;_parseEipSignature(r,e.slice(8));return r}function _serializeEip2930(t,e){const r=[formatNumber(t.chainId,"chainId"),formatNumber(t.nonce,"nonce"),formatNumber(t.gasPrice||0,"gasPrice"),formatNumber(t.gasLimit,"gasLimit"),t.to||"0x",formatNumber(t.value,"value"),t.data,formatAccessList(t.accessList||[])];if(e){r.push(formatNumber(e.yParity,"recoveryParam"));r.push(toBeArray(e.r));r.push(toBeArray(e.s))}return concat(["0x01",encodeRlp(r)])}function _parseEip4844(t){let e=decodeRlp(getBytes(t).slice(1));let r="3";let i=null;if(4===e.length&&Array.isArray(e[0])){r="3 (network format)";const t=e[1],a=e[2],o=e[3];assertArgument(Array.isArray(t),"invalid network format: blobs not an array","fields[1]",t);assertArgument(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a);assertArgument(Array.isArray(o),"invalid network format: proofs not an array","fields[3]",o);assertArgument(t.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e);assertArgument(t.length===o.length,"invalid network format: blobs/proofs length mismatch","fields",e);i=[];for(let r=0;r<e[1].length;r++)i.push({data:t[r],commitment:a[r],proof:o[r]});e=e[0]}assertArgument(Array.isArray(e)&&(11===e.length||14===e.length),`invalid field count for transaction type: ${r}`,"data",hexlify(t));const a={type:3,chainId:handleUint(e[0],"chainId"),nonce:handleNumber(e[1],"nonce"),maxPriorityFeePerGas:handleUint(e[2],"maxPriorityFeePerGas"),maxFeePerGas:handleUint(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:handleUint(e[4],"gasLimit"),to:handleAddress(e[5]),value:handleUint(e[6],"value"),data:hexlify(e[7]),accessList:handleAccessList(e[8],"accessList"),maxFeePerBlobGas:handleUint(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};i&&(a.blobs=i);assertArgument(null!=a.to,`invalid address for transaction type: ${r}`,"data",t);assertArgument(Array.isArray(a.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let o=0;o<a.blobVersionedHashes.length;o++)assertArgument(isHexString(a.blobVersionedHashes[o],32),`invalid blobVersionedHash at index ${o}: must be length 32`,"data",t);if(11===e.length)return a;_parseEipSignature(a,e.slice(11));return a}function _serializeEip4844(t,e,r){const i=[formatNumber(t.chainId,"chainId"),formatNumber(t.nonce,"nonce"),formatNumber(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(t.maxFeePerGas||0,"maxFeePerGas"),formatNumber(t.gasLimit,"gasLimit"),t.to||bs,formatNumber(t.value,"value"),t.data,formatAccessList(t.accessList||[]),formatNumber(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),formatHashes(t.blobVersionedHashes||[],"blobVersionedHashes")];if(e){i.push(formatNumber(e.yParity,"yParity"));i.push(toBeArray(e.r));i.push(toBeArray(e.s));if(r)return concat(["0x03",encodeRlp([i,r.map(t=>t.data),r.map(t=>t.commitment),r.map(t=>t.proof)])])}return concat(["0x03",encodeRlp(i)])}function _parseEip7702(t){const e=decodeRlp(getBytes(t).slice(1));assertArgument(Array.isArray(e)&&(10===e.length||13===e.length),"invalid field count for transaction type: 4","data",hexlify(t));const r={type:4,chainId:handleUint(e[0],"chainId"),nonce:handleNumber(e[1],"nonce"),maxPriorityFeePerGas:handleUint(e[2],"maxPriorityFeePerGas"),maxFeePerGas:handleUint(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:handleUint(e[4],"gasLimit"),to:handleAddress(e[5]),value:handleUint(e[6],"value"),data:hexlify(e[7]),accessList:handleAccessList(e[8],"accessList"),authorizationList:handleAuthorizationList(e[9],"authorizationList")};if(10===e.length)return r;_parseEipSignature(r,e.slice(10));return r}function _serializeEip7702(t,e){const r=[formatNumber(t.chainId,"chainId"),formatNumber(t.nonce,"nonce"),formatNumber(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(t.maxFeePerGas||0,"maxFeePerGas"),formatNumber(t.gasLimit,"gasLimit"),t.to||"0x",formatNumber(t.value,"value"),t.data,formatAccessList(t.accessList||[]),formatAuthorizationList(t.authorizationList||[])];if(e){r.push(formatNumber(e.yParity,"yParity"));r.push(toBeArray(e.r));r.push(toBeArray(e.s))}return concat(["0x04",encodeRlp(r)])}const ui=class t{constructor(){__privateAdd(this,kt);__privateAdd(this,at);__privateAdd(this,ot);__privateAdd(this,ct);__privateAdd(this,lt);__privateAdd(this,ut);__privateAdd(this,ht);__privateAdd(this,ft);__privateAdd(this,dt);__privateAdd(this,gt);__privateAdd(this,pt);__privateAdd(this,mt);__privateAdd(this,yt);__privateAdd(this,wt);__privateAdd(this,At);__privateAdd(this,bt);__privateAdd(this,Et);__privateAdd(this,vt);__privateSet(this,at,null);__privateSet(this,ot,null);__privateSet(this,lt,0);__privateSet(this,ut,ri);__privateSet(this,ht,null);__privateSet(this,ft,null);__privateSet(this,dt,null);__privateSet(this,ct,"0x");__privateSet(this,gt,ri);__privateSet(this,pt,ri);__privateSet(this,mt,null);__privateSet(this,yt,null);__privateSet(this,wt,null);__privateSet(this,At,null);__privateSet(this,bt,null);__privateSet(this,Et,null);__privateSet(this,vt,null)}get type(){return __privateGet(this,at)}set type(t){switch(t){case null:__privateSet(this,at,null);break;case 0:case"legacy":__privateSet(this,at,0);break;case 1:case"berlin":case"eip-2930":__privateSet(this,at,1);break;case 2:case"london":case"eip-1559":__privateSet(this,at,2);break;case 3:case"cancun":case"eip-4844":__privateSet(this,at,3);break;case 4:case"pectra":case"eip-7702":__privateSet(this,at,4);break;default:assertArgument(!1,"unsupported transaction type","type",t)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const t=__privateGet(this,ot);return null==t&&3===this.type?bs:t}set to(t){__privateSet(this,ot,null==t?null:getAddress(t))}get nonce(){return __privateGet(this,lt)}set nonce(t){__privateSet(this,lt,getNumber(t,"value"))}get gasLimit(){return __privateGet(this,ut)}set gasLimit(t){__privateSet(this,ut,getBigInt(t))}get gasPrice(){const t=__privateGet(this,ht);return null!=t||0!==this.type&&1!==this.type?t:ri}set gasPrice(t){__privateSet(this,ht,null==t?null:getBigInt(t,"gasPrice"))}get maxPriorityFeePerGas(){const t=__privateGet(this,ft);return null==t?2===this.type||3===this.type?ri:null:t}set maxPriorityFeePerGas(t){__privateSet(this,ft,null==t?null:getBigInt(t,"maxPriorityFeePerGas"))}get maxFeePerGas(){const t=__privateGet(this,dt);return null==t?2===this.type||3===this.type?ri:null:t}set maxFeePerGas(t){__privateSet(this,dt,null==t?null:getBigInt(t,"maxFeePerGas"))}get data(){return __privateGet(this,ct)}set data(t){__privateSet(this,ct,hexlify(t))}get value(){return __privateGet(this,gt)}set value(t){__privateSet(this,gt,getBigInt(t,"value"))}get chainId(){return __privateGet(this,pt)}set chainId(t){__privateSet(this,pt,getBigInt(t))}get signature(){return __privateGet(this,mt)||null}set signature(t){__privateSet(this,mt,null==t?null:Ts.from(t))}get accessList(){const t=__privateGet(this,yt)||null;return null==t?1===this.type||2===this.type||3===this.type?[]:null:t}set accessList(t){__privateSet(this,yt,null==t?null:accessListify(t))}get authorizationList(){const t=__privateGet(this,vt)||null;return null==t&&4===this.type?[]:t}set authorizationList(t){__privateSet(this,vt,null==t?null:t.map(t=>authorizationify(t)))}get maxFeePerBlobGas(){const t=__privateGet(this,wt);return null==t&&3===this.type?ri:t}set maxFeePerBlobGas(t){__privateSet(this,wt,null==t?null:getBigInt(t,"maxFeePerBlobGas"))}get blobVersionedHashes(){let t=__privateGet(this,At);return null==t&&3===this.type?[]:t}set blobVersionedHashes(t){if(null!=t){assertArgument(Array.isArray(t),"blobVersionedHashes must be an Array","value",t);t=t.slice();for(let e=0;e<t.length;e++)assertArgument(isHexString(t[e],32),"invalid blobVersionedHash",`value[${e}]`,t[e])}__privateSet(this,At,t)}get blobs(){return null==__privateGet(this,Et)?null:__privateGet(this,Et).map(t=>Object.assign({},t))}set blobs(t){if(null==t){__privateSet(this,Et,null);return}const e=[];const r=[];for(let i=0;i<t.length;i++){const a=t[i];if(isBytesLike(a)){assert(__privateGet(this,bt),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let t=getBytes(a);assertArgument(t.length<=li,"blob is too large",`blobs[${i}]`,a);if(t.length!==li){const e=new Uint8Array(li);e.set(t);t=e}const o=__privateGet(this,bt).blobToKzgCommitment(t);const c=hexlify(__privateGet(this,bt).computeBlobKzgProof(t,o));e.push({data:hexlify(t),commitment:hexlify(o),proof:c});r.push(getVersionedHash(1,o))}else{const t=hexlify(a.commitment);e.push({data:hexlify(a.data),commitment:t,proof:hexlify(a.proof)});r.push(getVersionedHash(1,t))}}__privateSet(this,Et,e);__privateSet(this,At,r)}get kzg(){return __privateGet(this,bt)}set kzg(t){__privateSet(this,bt,null==t?null:getKzgLibrary(t))}get hash(){return null==this.signature?null:keccak256(__privateMethod(this,kt,Bt).call(this,!0,!1))}get unsignedHash(){return keccak256(this.unsignedSerialized)}get from(){return null==this.signature?null:recoverAddress(this.unsignedHash,this.signature)}get fromPublicKey(){return null==this.signature?null:Rs.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}get serialized(){return __privateMethod(this,kt,Bt).call(this,!0,!0)}get unsignedSerialized(){return __privateMethod(this,kt,Bt).call(this,!1,!1)}inferType(){const t=this.inferTypes();return t.indexOf(2)>=0?2:t.pop()}inferTypes(){const t=null!=this.gasPrice;const e=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas;const r=null!=this.accessList;const i=null!=__privateGet(this,wt)||__privateGet(this,At);null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&assert(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this});assert(!e||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this});assert(0!==this.type||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const a=[];if(null!=this.type)a.push(this.type);else if(this.authorizationList&&this.authorizationList.length)a.push(4);else if(e)a.push(2);else if(t){a.push(1);r||a.push(0)}else if(r){a.push(1);a.push(2)}else if(i&&this.to)a.push(3);else{a.push(0);a.push(1);a.push(2);a.push(3)}a.sort();return a}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}clone(){return t.from(this)}toJSON(){const s=t=>null==t?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:s(this.gasLimit),gasPrice:s(this.gasPrice),maxPriorityFeePerGas:s(this.maxPriorityFeePerGas),maxFeePerGas:s(this.maxFeePerGas),value:s(this.value),chainId:s(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(null==e)return new t;if("string"==typeof e){const r=getBytes(e);if(r[0]>=127)return t.from(_parseLegacy(r));switch(r[0]){case 1:return t.from(_parseEip2930(r));case 2:return t.from(_parseEip1559(r));case 3:return t.from(_parseEip4844(r));case 4:return t.from(_parseEip7702(r))}assert(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const r=new t;null!=e.type&&(r.type=e.type);null!=e.to&&(r.to=e.to);null!=e.nonce&&(r.nonce=e.nonce);null!=e.gasLimit&&(r.gasLimit=e.gasLimit);null!=e.gasPrice&&(r.gasPrice=e.gasPrice);null!=e.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=e.maxPriorityFeePerGas);null!=e.maxFeePerGas&&(r.maxFeePerGas=e.maxFeePerGas);null!=e.maxFeePerBlobGas&&(r.maxFeePerBlobGas=e.maxFeePerBlobGas);null!=e.data&&(r.data=e.data);null!=e.value&&(r.value=e.value);null!=e.chainId&&(r.chainId=e.chainId);null!=e.signature&&(r.signature=Ts.from(e.signature));null!=e.accessList&&(r.accessList=e.accessList);null!=e.authorizationList&&(r.authorizationList=e.authorizationList);null!=e.blobVersionedHashes&&(r.blobVersionedHashes=e.blobVersionedHashes);null!=e.kzg&&(r.kzg=e.kzg);null!=e.blobs&&(r.blobs=e.blobs);if(null!=e.hash){assertArgument(r.isSigned(),"unsigned transaction cannot define '.hash'","tx",e);assertArgument(r.hash===e.hash,"hash mismatch","tx",e)}if(null!=e.from){assertArgument(r.isSigned(),"unsigned transaction cannot define '.from'","tx",e);assertArgument(r.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)}return r}};at=new WeakMap;ot=new WeakMap;ct=new WeakMap;lt=new WeakMap;ut=new WeakMap;ht=new WeakMap;ft=new WeakMap;dt=new WeakMap;gt=new WeakMap;pt=new WeakMap;mt=new WeakMap;yt=new WeakMap;wt=new WeakMap;At=new WeakMap;bt=new WeakMap;Et=new WeakMap;vt=new WeakMap;kt=new WeakSet;Bt=function(t,e){assert(!t||null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=t?this.signature:null;switch(this.inferType()){case 0:return _serializeLegacy(this,r);case 1:return _serializeEip2930(this,r);case 2:return _serializeEip1559(this,r);case 3:return _serializeEip4844(this,r,e?this.blobs:null);case 4:return _serializeEip7702(this,r)}assert(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let hi=ui;function id(t){return keccak256(toUtf8Bytes(t))}var fi="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";const di=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]);const gi=4;function decode_arithmetic(t){let e=0;function u16(){return t[e++]<<8|t[e++]}let r=u16();let i=1;let a=[0,1];for(let k=1;k<r;k++)a.push(i+=u16());let o=u16();let c=e;e+=o;let l=0;let u=0;function read_bit(){if(0==l){u=u<<8|t[e++];l=8}return u>>--l&1}const f=31;const d=2**f;const g=d>>>1;const p=g>>1;const m=d-1;let y=0;for(let k=0;k<f;k++)y=y<<1|read_bit();let w=[];let A=0;let E=d;for(;;){let t=Math.floor(((y-A+1)*i-1)/E);let e=0;let o=r;for(;o-e>1;){let r=e+o>>>1;t<a[r]?o=r:e=r}if(0==e)break;w.push(e);let c=A+Math.floor(E*a[e]/i);let l=A+Math.floor(E*a[e+1]/i)-1;for(;0==((c^l)&g);){y=y<<1&m|read_bit();c=c<<1&m;l=l<<1&m|1}for(;c&~l&p;){y=y&g|y<<1&m>>>1|read_bit();c=c<<1^g;l=(l^g)<<1|g|1}A=c;E=1+l-c}let v=r-4;return w.map(e=>{switch(e-v){case 3:return v+65792+(t[c++]<<16|t[c++]<<8|t[c++]);case 2:return v+256+(t[c++]<<8|t[c++]);case 1:return v+t[c++];default:return e-1}})}function read_payload(t){let e=0;return()=>t[e++]}function read_compressed_payload(t){return read_payload(decode_arithmetic(unsafe_atob(t)))}function unsafe_atob(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((t,r)=>e[t.charCodeAt(0)]=r);let r=t.length;let i=new Uint8Array(6*r>>3);for(let a=0,o=0,c=0,l=0;a<r;a++){l=l<<6|e[t.charCodeAt(a)];c+=6;c>=8&&(i[o++]=l>>(c-=8))}return i}function signed(t){return 1&t?~t>>1:t>>1}function read_deltas(t,e){let r=Array(t);for(let i=0,a=0;i<t;i++)r[i]=a+=signed(e());return r}function read_sorted(t,e=0){let r=[];for(;;){let i=t();let a=t();if(!a)break;e+=i;for(let t=0;t<a;t++)r.push(e+t);e+=a+1}return r}function read_sorted_arrays(t){return read_array_while(()=>{let e=read_sorted(t);if(e.length)return e})}function read_mapped(t){let e=[];for(;;){let r=t();if(0==r)break;e.push(read_linear_table(r,t))}for(;;){let r=t()-1;if(r<0)break;e.push(read_replacement_table(r,t))}return e.flat()}function read_array_while(t){let e=[];for(;;){let r=t(e.length);if(!r)break;e.push(r)}return e}function read_transposed(t,e,r){let i=Array(t).fill().map(()=>[]);for(let a=0;a<e;a++)read_deltas(t,r).forEach((t,e)=>i[e].push(t));return i}function read_linear_table(t,e){let r=1+e();let i=e();let a=read_array_while(e);let o=read_transposed(a.length,1+t,e);return o.flatMap((t,e)=>{let[o,...c]=t;return Array(a[e]).fill().map((t,e)=>{let a=e*i;return[o+e*r,c.map(t=>t+a)]})})}function read_replacement_table(t,e){let r=1+e();let i=read_transposed(r,1+t,e);return i.map(t=>[t[0],t.slice(1)])}function read_trie(t){let e=[];let r=read_sorted(t);expand(decode([]),[]);return e;function decode(e){let i=t();let a=read_array_while(()=>{let e=read_sorted(t).map(t=>r[t]);if(e.length)return decode(e)});return{S:i,B:a,Q:e}}function expand({S:t,B:r},i,a){if(!(4&t&&a===i[i.length-1])){2&t&&(a=i[i.length-1]);1&t&&e.push(i);for(let t of r)for(let e of t.Q)expand(t,[...i,e],a)}}}function hex_cp(t){return t.toString(16).toUpperCase().padStart(2,"0")}function quote_cp(t){return`{${hex_cp(t)}}`}function explode_cp(t){let e=[];for(let r=0,i=t.length;r<i;){let i=t.codePointAt(r);r+=i<65536?1:2;e.push(i)}return e}function str_from_cps(t){const e=4096;let r=t.length;if(r<e)return String.fromCodePoint(...t);let i=[];for(let a=0;a<r;)i.push(String.fromCodePoint(...t.slice(a,a+=e)));return i.join("")}function compare_arrays(t,e){let r=t.length;let i=r-e.length;for(let a=0;0==i&&a<r;a++)i=t[a]-e[a];return i}var pi="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";const mi=44032;const yi=4352;const wi=4449;const Ai=4519;const bi=19;const Ei=21;const vi=28;const ki=Ei*vi;const Bi=bi*ki;const xi=mi+Bi;const Pi=yi+bi;const Ni=wi+Ei;const Ii=Ai+vi;function unpack_cc(t){return t>>24&255}function unpack_cp(t){return 16777215&t}let Ci,Ti,Oi,Ri;function init$1(){let t=read_compressed_payload(pi);Ci=new Map(read_sorted_arrays(t).flatMap((t,e)=>t.map(t=>[t,e+1<<24])));Ti=new Set(read_sorted(t));Oi=new Map;Ri=new Map;for(let[e,r]of read_mapped(t)){if(!Ti.has(e)&&2==r.length){let[t,i]=r;let a=Ri.get(t);if(!a){a=new Map;Ri.set(t,a)}a.set(i,e)}Oi.set(e,r.reverse())}}function is_hangul(t){return t>=mi&&t<xi}function compose_pair(t,e){if(t>=yi&&t<Pi&&e>=wi&&e<Ni)return mi+(t-yi)*ki+(e-wi)*vi;if(is_hangul(t)&&e>Ai&&e<Ii&&(t-mi)%vi==0)return t+(e-Ai);{let r=Ri.get(t);if(r){r=r.get(e);if(r)return r}return-1}}function decomposed(t){Ci||init$1();let e=[];let r=[];let i=!1;function add2(t){let r=Ci.get(t);if(r){i=!0;t|=r}e.push(t)}for(let a of t)for(;;){if(a<128)e.push(a);else if(is_hangul(a)){let t=a-mi;let e=t/ki|0;let r=t%ki/vi|0;let i=t%vi;add2(yi+e);add2(wi+r);i>0&&add2(Ai+i)}else{let t=Oi.get(a);t?r.push(...t):add2(a)}if(!r.length)break;a=r.pop()}if(i&&e.length>1){let t=unpack_cc(e[0]);for(let r=1;r<e.length;r++){let i=unpack_cc(e[r]);if(0==i||t<=i){t=i;continue}let a=r-1;for(;;){let r=e[a+1];e[a+1]=e[a];e[a]=r;if(!a)break;t=unpack_cc(e[--a]);if(t<=i)break}t=unpack_cc(e[r])}}return e}function composed_from_decomposed(t){let e=[];let r=[];let i=-1;let a=0;for(let o of t){let t=unpack_cc(o);let c=unpack_cp(o);if(-1==i)0==t?i=c:e.push(c);else if(a>0&&a>=t){if(0==t){e.push(i,...r);r.length=0;i=c}else r.push(c);a=t}else{let o=compose_pair(i,c);if(o>=0)i=o;else if(0==a&&0==t){e.push(i);i=c}else{r.push(c);a=t}}}i>=0&&e.push(i,...r);return e}function nfd(t){return decomposed(t).map(unpack_cp)}function nfc(t){return composed_from_decomposed(decomposed(t))}const Si=45;const Ui=".";const Li=65039;const Fi=1;const Array_from=t=>Array.from(t);function group_has_cp(t,e){return t.P.has(e)||t.Q.has(e)}class Mi extends Array{get is_emoji(){return!0}}let Di,Hi,Gi,_i,Qi,zi,ji,Vi,Wi,Ji,Ki;function init(){if(Di)return;let t=read_compressed_payload(fi);const read_sorted_array=()=>read_sorted(t);const read_sorted_set=()=>new Set(read_sorted_array());const set_add_many=(t,e)=>e.forEach(e=>t.add(e));Di=new Map(read_mapped(t));Hi=read_sorted_set();Gi=read_sorted_array();_i=new Set(read_sorted_array().map(t=>Gi[t]));Gi=new Set(Gi);Qi=read_sorted_set();read_sorted_set();let e=read_sorted_arrays(t);let r=t();const read_chunked=()=>{let t=new Set;read_sorted_array().forEach(r=>set_add_many(t,e[r]));set_add_many(t,read_sorted_array());return t};zi=read_array_while(e=>{let i=read_array_while(t).map(t=>t+96);if(i.length){let a=e>=r;i[0]-=32;i=str_from_cps(i);a&&(i=`Restricted[${i}]`);let o=read_chunked();let c=read_chunked();let l=!t();return{N:i,P:o,Q:c,M:l,R:a}}});ji=read_sorted_set();Vi=new Map;let i=read_sorted_array().concat(Array_from(ji)).sort((t,e)=>t-e);i.forEach((e,r)=>{let a=t();let o=i[r]=a?i[r-a]:{V:[],M:new Map};o.V.push(e);ji.has(e)||Vi.set(e,o)});for(let{V:o,M:c}of new Set(Vi.values())){let t=[];for(let r of o){let e=zi.filter(t=>group_has_cp(t,r));let i=t.find(({G:t})=>e.some(e=>t.has(e)));if(!i){i={G:new Set,V:[]};t.push(i)}i.V.push(r);set_add_many(i.G,e)}let e=t.flatMap(t=>Array_from(t.G));for(let{G:r,V:i}of t){let t=new Set(e.filter(t=>!r.has(t)));for(let e of i)c.set(e,t)}}Wi=new Set;let a=new Set;const add_to_union=t=>Wi.has(t)?a.add(t):Wi.add(t);for(let o of zi){for(let t of o.P)add_to_union(t);for(let t of o.Q)add_to_union(t)}for(let o of Wi)Vi.has(o)||a.has(o)||Vi.set(o,Fi);set_add_many(Wi,nfd(Wi));Ji=read_trie(t).map(t=>Mi.from(t)).sort(compare_arrays);Ki=new Map;for(let o of Ji){let t=[Ki];for(let e of o){let r=t.map(t=>{let r=t.get(e);if(!r){r=new Map;t.set(e,r)}return r});e===Li?t.push(...r):t=r}for(let e of t)e.V=o}}function quoted_cp(t){return(should_escape(t)?"":`${bidi_qq(safe_str_from_cps([t]))} `)+quote_cp(t)}function bidi_qq(t){return`"${t}"`}function check_label_extension(t){if(t.length>=4&&t[2]==Si&&t[3]==Si)throw new Error(`invalid label extension: "${str_from_cps(t.slice(0,4))}"`)}function check_leading_underscore(t){const e=95;for(let r=t.lastIndexOf(e);r>0;)if(t[--r]!==e)throw new Error("underscore allowed only at start")}function check_fenced(t){let e=t[0];let r=di.get(e);if(r)throw error_placement(`leading ${r}`);let i=t.length;let a=-1;for(let o=1;o<i;o++){e=t[o];let i=di.get(e);if(i){if(a==o)throw error_placement(`${r} + ${i}`);a=o+1;r=i}}if(a==i)throw error_placement(`trailing ${r}`)}function safe_str_from_cps(t,e=1/0,r=quote_cp){let i=[];is_combining_mark(t[0])&&i.push("");if(t.length>e){e>>=1;t=[...t.slice(0,e),8230,...t.slice(-e)]}let a=0;let o=t.length;for(let c=0;c<o;c++){let e=t[c];if(should_escape(e)){i.push(str_from_cps(t.slice(a,c)));i.push(r(e));a=c+1}}i.push(str_from_cps(t.slice(a,o)));return i.join("")}function is_combining_mark(t){init();return Gi.has(t)}function should_escape(t){init();return Qi.has(t)}function ens_normalize(t){return flatten(split(t,nfc,filter_fe0f))}function split(t,e,r){if(!t)return[];init();let i=0;return t.split(Ui).map(t=>{let a=explode_cp(t);let o={input:a,offset:i};i+=a.length+1;try{let t=o.tokens=tokens_from_str(a,e,r);let i=t.length;let c;if(!i)throw new Error("empty label");let l=o.output=t.flat();check_leading_underscore(l);let u=o.emoji=i>1||t[0].is_emoji;if(!u&&l.every(t=>t<128)){check_label_extension(l);c="ASCII"}else{let e=t.flatMap(t=>t.is_emoji?[]:t);if(e.length){if(Gi.has(l[0]))throw error_placement("leading combining mark");for(let e=1;e<i;e++){let r=t[e];if(!r.is_emoji&&Gi.has(r[0]))throw error_placement(`emoji + combining mark: "${str_from_cps(t[e-1])} + ${safe_str_from_cps([r[0]])}"`)}check_fenced(l);let r=Array_from(new Set(e));let[a]=determine_group(r);check_group(a,e);check_whole(a,r);c=a.N}else c="Emoji"}o.type=c}catch(c){o.error=c}return o})}function check_whole(t,e){let r;let i=[];for(let a of e){let t=Vi.get(a);if(t===Fi)return;if(t){let e=t.M.get(a);r=r?r.filter(t=>e.has(t)):Array_from(e);if(!r.length)return}else i.push(a)}if(r)for(let a of r)if(i.every(t=>group_has_cp(a,t)))throw new Error(`whole-script confusable: ${t.N}/${a.N}`)}function determine_group(t){let e=zi;for(let r of t){let t=e.filter(t=>group_has_cp(t,r));if(!t.length)throw zi.some(t=>group_has_cp(t,r))?error_group_member(e[0],r):error_disallowed(r);e=t;if(1==t.length)break}return e}function flatten(t){return t.map(({input:e,error:r,output:i})=>{if(r){let i=r.message;throw new Error(1==t.length?i:`Invalid label ${bidi_qq(safe_str_from_cps(e,63))}: ${i}`)}return str_from_cps(i)}).join(Ui)}function error_disallowed(t){return new Error(`disallowed character: ${quoted_cp(t)}`)}function error_group_member(t,e){let r=quoted_cp(e);let i=zi.find(t=>t.P.has(e));i&&(r=`${i.N} ${r}`);return new Error(`illegal mixture: ${t.N} + ${r}`)}function error_placement(t){return new Error(`illegal placement: ${t}`)}function check_group(t,e){for(let r of e)if(!group_has_cp(t,r))throw error_group_member(t,r);if(t.M){let t=nfd(e);for(let e=1,r=t.length;e<r;e++)if(_i.has(t[e])){let i=e+1;for(let a;i<r&&_i.has(a=t[i]);i++)for(let r=e;r<i;r++)if(t[r]==a)throw new Error(`duplicate non-spacing marks: ${quoted_cp(a)}`);if(i-e>gi)throw new Error(`excessive non-spacing marks: ${bidi_qq(safe_str_from_cps(t.slice(e-1,i)))} (${i-e}/${gi})`);e=i}}}function tokens_from_str(t,e,r){let i=[];let a=[];t=t.slice().reverse();for(;t.length;){let o=consume_emoji_reversed(t);if(o){if(a.length){i.push(e(a));a=[]}i.push(r(o))}else{let e=t.pop();if(Wi.has(e))a.push(e);else{let t=Di.get(e);if(t)a.push(...t);else if(!Hi.has(e))throw error_disallowed(e)}}}a.length&&i.push(e(a));return i}function filter_fe0f(t){return t.filter(t=>t!=Li)}function consume_emoji_reversed(t,e){let r=Ki;let i;let a=t.length;for(;a;){r=r.get(t[--a]);if(!r)break;let{V:e}=r;if(e){i=e;t.length=a}}return i}const qi=new Uint8Array(32);qi.fill(0);function checkComponent(t){assertArgument(0!==t.length,"invalid ENS name; empty component","comp",t);return t}function ensNameSplit(t){const e=toUtf8Bytes(ensNormalize(t));const r=[];if(0===t.length)return r;let i=0;for(let a=0;a<e.length;a++){const t=e[a];if(46===t){r.push(checkComponent(e.slice(i,a)));i=a+1}}assertArgument(i<e.length,"invalid ENS name; empty component","name",t);r.push(checkComponent(e.slice(i)));return r}function ensNormalize(t){try{if(0===t.length)throw new Error("empty label");return ens_normalize(t)}catch(e){assertArgument(!1,`invalid ENS name (${e.message})`,"name",t)}}function namehash(t){assertArgument("string"==typeof t,"invalid ENS name; not a string","name",t);assertArgument(t.length,"invalid ENS name (empty label)","name",t);let e=qi;const r=ensNameSplit(t);for(;r.length;)e=keccak256(concat([e,keccak256(r.pop())]));return hexlify(e)}function dnsEncode(t,e){const r=e;assertArgument(r<=255,"DNS encoded label cannot exceed 255","length",r);return hexlify(concat(ensNameSplit(t).map(e=>{assertArgument(e.length<=r,`label ${JSON.stringify(t)} exceeds ${r} bytes`,"name",t);const i=new Uint8Array(e.length+1);i.set(e,1);i[0]=i.length-1;return i})))+"00"}const Zi=new RegExp("^bytes([0-9]+)$");const Yi=new RegExp("^(u?int)([0-9]*)$");const Xi=new RegExp("^(.*)\\[([0-9]*)\\]$");function _pack(t,e,r){switch(t){case"address":return getBytes(r?zeroPadValue(e,32):getAddress(e));case"string":return toUtf8Bytes(e);case"bytes":return getBytes(e);case"bool":e=e?"0x01":"0x00";return getBytes(r?zeroPadValue(e,32):e)}let i=t.match(Yi);if(i){let a="int"===i[1];let o=parseInt(i[2]||"256");assertArgument((!i[2]||i[2]===String(o))&&o%8==0&&0!==o&&o<=256,"invalid number type","type",t);r&&(o=256);a&&(e=toTwos(e,o));return getBytes(zeroPadValue(toBeArray(e),o/8))}i=t.match(Zi);if(i){const a=parseInt(i[1]);assertArgument(String(a)===i[1]&&0!==a&&a<=32,"invalid bytes type","type",t);assertArgument(dataLength(e)===a,`invalid value for ${t}`,"value",e);return r?getBytes(zeroPadBytes(e,32)):e}i=t.match(Xi);if(i&&Array.isArray(e)){const r=i[1];const a=parseInt(i[2]||String(e.length));assertArgument(a===e.length,`invalid array length for ${t}`,"value",e);const o=[];e.forEach(function(t){o.push(_pack(r,t,!0))});return getBytes(concat(o))}assertArgument(!1,"invalid type","type",t)}function solidityPacked(t,e){assertArgument(t.length===e.length,"wrong number of values; expected ${ types.length }","values",e);const r=[];t.forEach(function(t,i){r.push(_pack(t,e[i]))});return hexlify(concat(r))}const $i=new Uint8Array(32);$i.fill(0);const ta=BigInt(-1);const ea=BigInt(0);const na=BigInt(1);const ra=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function hexPadRight(t){const e=getBytes(t);const r=e.length%32;return r?concat([e,$i.slice(r)]):hexlify(e)}const sa=toBeHex(na,32);const ia=toBeHex(ea,32);const aa={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"};const oa=["name","version","chainId","verifyingContract","salt"];function checkString(t){return function(e){assertArgument("string"==typeof e,`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e);return e}}const ca={name:checkString("name"),version:checkString("version"),chainId:function(t){const e=getBigInt(t,"domain.chainId");assertArgument(e>=0,"invalid chain ID","domain.chainId",t);return Number.isSafeInteger(e)?Number(e):toQuantity(e)},verifyingContract:function(t){try{return getAddress(t).toLowerCase()}catch(e){}assertArgument(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=getBytes(t,"domain.salt");assertArgument(32===e.length,'invalid domain value "salt"',"domain.salt",t);return hexlify(e)}};function getBaseEncoder(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const r=""===e[1];const i=parseInt(e[2]);assertArgument(i%8==0&&0!==i&&i<=256&&e[2]===String(i),"invalid numeric width","type",t);const a=mask(ra,r?i-1:i);const o=r?(a+na)*ta:ea;return function(e){const i=getBigInt(e,"value");assertArgument(i>=o&&i<=a,`value out-of-bounds for ${t}`,"value",i);return toBeHex(r?toTwos(i,256):i,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);assertArgument(0!==r&&r<=32&&e[1]===String(r),"invalid bytes width","type",t);return function(e){const i=getBytes(e);assertArgument(i.length===r,`invalid length for ${t}`,"value",e);return hexPadRight(e)}}}switch(t){case"address":return function(t){return zeroPadValue(getAddress(t),32)};case"bool":return function(t){return t?sa:ia};case"bytes":return function(t){return keccak256(t)};case"string":return function(t){return id(t)}}return null}function encodeType(t,e){return`${t}(${e.map(({name:t,type:e})=>e+" "+t).join(",")})`}function splitArray(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}const la=class t{constructor(t){__privateAdd(this,It);__publicField(this,"primaryType");__privateAdd(this,xt);__privateAdd(this,Pt);__privateAdd(this,Nt);__privateSet(this,Pt,new Map);__privateSet(this,Nt,new Map);const e=new Map;const r=new Map;const i=new Map;const a={};Object.keys(t).forEach(o=>{a[o]=t[o].map(({name:e,type:r})=>{let{base:i,index:a}=splitArray(r);"int"!==i||t.int||(i="int256");"uint"!==i||t.uint||(i="uint256");return{name:e,type:i+(a||"")}});e.set(o,new Set);r.set(o,[]);i.set(o,new Set)});__privateSet(this,xt,JSON.stringify(a));for(const c in a){const i=new Set;for(const o of a[c]){assertArgument(!i.has(o.name),`duplicate variable name ${JSON.stringify(o.name)} in ${JSON.stringify(c)}`,"types",t);i.add(o.name);const a=splitArray(o.type).base;assertArgument(a!==c,`circular type reference to ${JSON.stringify(a)}`,"types",t);const l=getBaseEncoder(a);if(!l){assertArgument(r.has(a),`unknown type ${JSON.stringify(a)}`,"types",t);r.get(a).push(c);e.get(c).add(a)}}}const o=Array.from(r.keys()).filter(t=>0===r.get(t).length);assertArgument(0!==o.length,"missing primary type","types",t);assertArgument(1===o.length,`ambiguous primary types or unused types: ${o.map(t=>JSON.stringify(t)).join(", ")}`,"types",t);defineProperties(this,{primaryType:o[0]});function checkCircular(a,o){assertArgument(!o.has(a),`circular type reference to ${JSON.stringify(a)}`,"types",t);o.add(a);for(const t of e.get(a))if(r.has(t)){checkCircular(t,o);for(const e of o)i.get(e).add(t)}o.delete(a)}checkCircular(this.primaryType,new Set);for(const[c,l]of i){const t=Array.from(l);t.sort();__privateGet(this,Pt).set(c,encodeType(c,a[c])+t.map(t=>encodeType(t,a[t])).join(""))}}get types(){return JSON.parse(__privateGet(this,xt))}getEncoder(t){let e=__privateGet(this,Nt).get(t);if(!e){e=__privateMethod(this,It,Ct).call(this,t);__privateGet(this,Nt).set(t,e)}return e}encodeType(t){const e=__privateGet(this,Pt).get(t);assertArgument(e,`unknown type: ${JSON.stringify(t)}`,"name",t);return e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return keccak256(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,r){{const i=getBaseEncoder(t);if(i)return r(t,e)}const i=splitArray(t).array;if(i){assertArgument(-1===i.count||i.count===e.length,`array length mismatch; expected length ${i.count}`,"value",e);return e.map(t=>this._visit(i.prefix,t,r))}const a=this.types[t];if(a)return a.reduce((t,{name:i,type:a})=>{t[i]=this._visit(a,e[i],r);return t},{});assertArgument(!1,`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(e){return new t(e)}static getPrimaryType(e){return t.from(e).primaryType}static hashStruct(e,r,i){return t.from(r).hashStruct(e,i)}static hashDomain(e){const r=[];for(const t in e){if(null==e[t])continue;const i=aa[t];assertArgument(i,`invalid typed-data domain key: ${JSON.stringify(t)}`,"domain",e);r.push({name:t,type:i})}r.sort((t,e)=>oa.indexOf(t.name)-oa.indexOf(e.name));return t.hashStruct("EIP712Domain",{EIP712Domain:r},e)}static encode(e,r,i){return concat(["0x1901",t.hashDomain(e),t.from(r).hash(i)])}static hash(e,r,i){return keccak256(t.encode(e,r,i))}static async resolveNames(e,r,i,a){e=Object.assign({},e);for(const t in e)null==e[t]&&delete e[t];const o={};e.verifyingContract&&!isHexString(e.verifyingContract,20)&&(o[e.verifyingContract]="0x");const c=t.from(r);c.visit(i,(t,e)=>{"address"!==t||isHexString(e,20)||(o[e]="0x");return e});for(const t in o)o[t]=await a(t);e.verifyingContract&&o[e.verifyingContract]&&(e.verifyingContract=o[e.verifyingContract]);i=c.visit(i,(t,e)=>"address"===t&&o[e]?o[e]:e);return{domain:e,value:i}}static getPayload(e,r,i){t.hashDomain(e);const a={};const o=[];oa.forEach(t=>{const r=e[t];if(null!=r){a[t]=ca[t](r);o.push({name:t,type:aa[t]})}});const c=t.from(r);r=c.types;const l=Object.assign({},r);assertArgument(null==l.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",r);l.EIP712Domain=o;c.encode(i);return{types:l,domain:a,primaryType:c.primaryType,message:c.visit(i,(t,e)=>{if(t.match(/^bytes(\d*)/))return hexlify(getBytes(e));if(t.match(/^u?int/))return getBigInt(e).toString();switch(t){case"address":return e.toLowerCase();case"bool":return!!e;case"string":assertArgument("string"==typeof e,"invalid string","value",e);return e}assertArgument(!1,"unsupported type","type",t)})}}};xt=new WeakMap;Pt=new WeakMap;Nt=new WeakMap;It=new WeakSet;Ct=function(t){{const e=getBaseEncoder(t);if(e)return e}const e=splitArray(t).array;if(e){const t=e.prefix;const r=this.getEncoder(t);return i=>{assertArgument(-1===e.count||e.count===i.length,`array length mismatch; expected length ${e.count}`,"value",i);let a=i.map(r);__privateGet(this,Pt).has(t)&&(a=a.map(keccak256));return keccak256(concat(a))}}const r=this.types[t];if(r){const e=id(__privateGet(this,Pt).get(t));return t=>{const i=r.map(({name:e,type:r})=>{const i=this.getEncoder(r)(t[e]);return __privateGet(this,Pt).has(r)?keccak256(i):i});i.unshift(e);return concat(i)}}assertArgument(!1,`unknown type: ${t}`,"type",t)};let ua=la;function setify(t){const e=new Set;t.forEach(t=>e.add(t));return Object.freeze(e)}const ha="external public payable override";const fa=setify(ha.split(" "));const da="constant external internal payable private public pure view override";const ga=setify(da.split(" "));const pa="constructor error event fallback function receive struct";const ma=setify(pa.split(" "));const ya="calldata memory storage payable indexed";const wa=setify(ya.split(" "));const Aa="tuple returns";const ba=[pa,ya,Aa,da].join(" ");const Ea=setify(ba.split(" "));const va={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"};const ka=new RegExp("^(\\s*)");const Ba=new RegExp("^([0-9]+)");const xa=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)");const Pa=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$");const Na=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");const Ia=class t{constructor(t){__privateAdd(this,Rt);__privateAdd(this,Tt);__privateAdd(this,Ot);__privateSet(this,Tt,0);__privateSet(this,Ot,t.slice())}get offset(){return __privateGet(this,Tt)}get length(){return __privateGet(this,Ot).length-__privateGet(this,Tt)}clone(){return new t(__privateGet(this,Ot))}reset(){__privateSet(this,Tt,0)}popKeyword(t){const e=this.peek();if("KEYWORD"!==e.type||!t.has(e.text))throw new Error(`expected keyword ${e.text}`);return this.pop().text}popType(t){if(this.peek().type!==t){const e=this.peek();throw new Error(`expected ${t}; got ${e.type} ${JSON.stringify(e.text)}`)}return this.pop().text}popParen(){const t=this.peek();if("OPEN_PAREN"!==t.type)throw new Error("bad start");const e=__privateMethod(this,Rt,St).call(this,__privateGet(this,Tt)+1,t.match+1);__privateSet(this,Tt,t.match+1);return e}popParams(){const t=this.peek();if("OPEN_PAREN"!==t.type)throw new Error("bad start");const e=[];for(;__privateGet(this,Tt)<t.match-1;){const t=this.peek().linkNext;e.push(__privateMethod(this,Rt,St).call(this,__privateGet(this,Tt)+1,t));__privateSet(this,Tt,t)}__privateSet(this,Tt,t.match+1);return e}peek(){if(__privateGet(this,Tt)>=__privateGet(this,Ot).length)throw new Error("out-of-bounds");return __privateGet(this,Ot)[__privateGet(this,Tt)]}peekKeyword(t){const e=this.peekType("KEYWORD");return null!=e&&t.has(e)?e:null}peekType(t){if(0===this.length)return null;const e=this.peek();return e.type===t?e.text:null}pop(){const t=this.peek();__privateWrapper(this,Tt)._++;return t}toString(){const t=[];for(let e=__privateGet(this,Tt);e<__privateGet(this,Ot).length;e++){const r=__privateGet(this,Ot)[e];t.push(`${r.type}:${r.text}`)}return`<TokenString ${t.join(" ")}>`}};Tt=new WeakMap;Ot=new WeakMap;Rt=new WeakSet;St=function(t=0,e=0){return new Ia(__privateGet(this,Ot).slice(t,e).map(e=>Object.freeze(Object.assign({},e,{match:e.match-t,linkBack:e.linkBack-t,linkNext:e.linkNext-t}))))};let Ca=Ia;function lex(t){const e=[];const throwError2=e=>{const r=a<t.length?JSON.stringify(t[a]):"$EOI";throw new Error(`invalid token ${r} at ${a}: ${e}`)};let r=[];let i=[];let a=0;for(;a<t.length;){let o=t.substring(a);let c=o.match(ka);if(c){a+=c[1].length;o=t.substring(a)}const l={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:a,value:-1};e.push(l);let u=va[o[0]]||"";if(u){l.type=u;l.text=o[0];a++;if("OPEN_PAREN"===u){r.push(e.length-1);i.push(e.length-1)}else if("CLOSE_PAREN"==u){0===r.length&&throwError2("no matching open bracket");l.match=r.pop();e[l.match].match=e.length-1;l.depth--;l.linkBack=i.pop();e[l.linkBack].linkNext=e.length-1}else if("COMMA"===u){l.linkBack=i.pop();e[l.linkBack].linkNext=e.length-1;i.push(e.length-1)}else if("OPEN_BRACKET"===u)l.type="BRACKET";else if("CLOSE_BRACKET"===u){let t=e.pop().text;if(e.length>0&&"NUMBER"===e[e.length-1].type){const r=e.pop().text;t=r+t;e[e.length-1].value=getNumber(r)}if(0===e.length||"BRACKET"!==e[e.length-1].type)throw new Error("missing opening bracket");e[e.length-1].text+=t}}else{c=o.match(xa);if(c){l.text=c[1];a+=l.text.length;if(Ea.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(Na)){l.type="TYPE";continue}l.type="ID"}else{c=o.match(Ba);if(!c)throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${a}`);l.text=c[1];l.type="NUMBER";a+=l.text.length}}}return new Ca(e.map(t=>Object.freeze(t)))}function allowSingle(t,e){let r=[];for(const i in e.keys())t.has(i)&&r.push(i);if(r.length>1)throw new Error(`conflicting types: ${r.join(", ")}`)}function consumeName(t,e){if(e.peekKeyword(ma)){const r=e.pop().text;if(r!==t)throw new Error(`expected ${t}, got ${r}`)}return e.popType("ID")}function consumeKeywords(t,e){const r=new Set;for(;;){const i=t.peekType("KEYWORD");if(null==i||e&&!e.has(i))break;t.pop();if(r.has(i))throw new Error(`duplicate keywords: ${JSON.stringify(i)}`);r.add(i)}return Object.freeze(r)}function consumeMutability(t){let e=consumeKeywords(t,ga);allowSingle(e,setify("constant payable nonpayable".split(" ")));allowSingle(e,setify("pure view payable nonpayable".split(" ")));return e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function consumeParams(t,e){return t.popParams().map(t=>_a.from(t,e))}function consumeGas(t){if(t.peekType("AT")){t.pop();if(t.peekType("NUMBER"))return getBigInt(t.pop().text);throw new Error("invalid gas")}return null}function consumeEoi(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const Ta=new RegExp(/^(.*)\[([0-9]*)\]$/);function verifyBasicType(t){const e=t.match(Na);assertArgument(e,"invalid type","type",t);if("uint"===t)return"uint256";if("int"===t)return"int256";if(e[2]){const r=parseInt(e[2]);assertArgument(0!==r&&r<=32,"invalid bytes length","type",t)}else if(e[3]){const r=parseInt(e[3]);assertArgument(0!==r&&r<=256&&r%8==0,"invalid numeric width","type",t)}return t}const Oa={};const Ra=Symbol.for("_ethers_internal");const Sa="_ParamTypeInternal";const Ua="_ErrorInternal";const La="_EventInternal";const Fa="_ConstructorInternal";const Ma="_FallbackInternal";const Da="_FunctionInternal";const Ha="_StructInternal";const Ga=class t{constructor(t,e,r,i,a,o,c,l){__privateAdd(this,Ut);__publicField(this,"name");__publicField(this,"type");__publicField(this,"baseType");__publicField(this,"indexed");__publicField(this,"components");__publicField(this,"arrayLength");__publicField(this,"arrayChildren");assertPrivate(t,Oa,"ParamType");Object.defineProperty(this,Ra,{value:Sa});o&&(o=Object.freeze(o.slice()));if("array"===i){if(null==c||null==l)throw new Error("")}else if(null!=c||null!=l)throw new Error("");if("tuple"===i){if(null==o)throw new Error("")}else if(null!=o)throw new Error("");defineProperties(this,{name:e,type:r,baseType:i,indexed:a,components:o,arrayLength:c,arrayChildren:l})}format(t){null==t&&(t="sighash");if("json"===t){const e=this.name||"";if(this.isArray()){const t=JSON.parse(this.arrayChildren.format("json"));t.name=e;t.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`;return JSON.stringify(t)}const r={type:"tuple"===this.baseType?"tuple":this.type,name:e};"boolean"==typeof this.indexed&&(r.indexed=this.indexed);this.isTuple()&&(r.components=this.components.map(e=>JSON.parse(e.format(t))));return JSON.stringify(r)}let e="";if(this.isArray()){e+=this.arrayChildren.format(t);e+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`}else this.isTuple()?e+="("+this.components.map(e=>e.format(t)).join("full"===t?", ":",")+")":e+=this.type;if("sighash"!==t){!0===this.indexed&&(e+=" indexed");"full"===t&&this.name&&(e+=" "+this.name)}return e}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(t,e){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return t.map(t=>r.arrayChildren.walk(t,e))}if(this.isTuple()){if(!Array.isArray(t))throw new Error("invalid tuple value");if(t.length!==this.components.length)throw new Error("array is wrong length");const r=this;return t.map((t,i)=>r.components[i].walk(t,e))}return e(this.type,t)}async walkAsync(t,e){const r=[];const i=[t];__privateMethod(this,Ut,Lt).call(this,r,t,e,t=>{i[0]=t});r.length&&await Promise.all(r);return i[0]}static from(e,r){if(t.isParamType(e))return e;if("string"==typeof e)try{return t.from(lex(e),r)}catch(l){assertArgument(!1,"invalid param type","obj",e)}else if(e instanceof Ca){let i="",a="";let o=null;if(consumeKeywords(e,setify(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")){a="tuple";o=e.popParams().map(e=>t.from(e));i=`tuple(${o.map(t=>t.format()).join(",")})`}else{i=verifyBasicType(e.popType("TYPE"));a=i}let c=null;let l=null;for(;e.length&&e.peekType("BRACKET");){const r=e.pop();c=new t(Oa,"",i,a,null,o,l,c);l=r.value;i+=r.text;a="array";o=null}let u=null;const f=consumeKeywords(e,wa);if(f.has("indexed")){if(!r)throw new Error("");u=!0}const d=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new t(Oa,d,i,a,u,o,l,c)}const i=e.name;assertArgument(!i||"string"==typeof i&&i.match(Pa),"invalid name","obj.name",i);let a=e.indexed;if(null!=a){assertArgument(r,"parameter cannot be indexed","obj.indexed",e.indexed);a=!!a}let o=e.type;let c=o.match(Ta);if(c){const r=parseInt(c[2]||"-1");const l=t.from({type:c[1],components:e.components});return new t(Oa,i||"",o,"array",a,null,r,l)}if("tuple"===o||o.startsWith("tuple(")||o.startsWith("(")){const r=null!=e.components?e.components.map(e=>t.from(e)):null;const c=new t(Oa,i||"",o,"tuple",a,r,null,null);return c}o=verifyBasicType(e.type);return new t(Oa,i||"",o,o,a,null,null,null)}static isParamType(t){return t&&t[Ra]===Sa}};Ut=new WeakSet;Lt=function(t,e,r,i){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw new Error("array is wrong length");const a=this.arrayChildren;const o=e.slice();o.forEach((e,i)=>{var c;__privateMethod(c=a,Ut,Lt).call(c,t,e,r,t=>{o[i]=t})});i(o);return}if(this.isTuple()){const a=this.components;let o;if(Array.isArray(e))o=e.slice();else{if(null==e||"object"!=typeof e)throw new Error("invalid tuple value");o=a.map(t=>{if(!t.name)throw new Error("cannot use object value with unnamed components");if(!(t.name in e))throw new Error(`missing value for component ${t.name}`);return e[t.name]})}if(o.length!==this.components.length)throw new Error("array is wrong length");o.forEach((e,i)=>{var c;__privateMethod(c=a[i],Ut,Lt).call(c,t,e,r,t=>{o[i]=t})});i(o);return}const a=r(this.type,e);a.then?t.push(async function(){i(await a)}()):i(a)};let _a=Ga;class Qa{constructor(t,e,r){__publicField(this,"type");__publicField(this,"inputs");assertPrivate(t,Oa,"Fragment");r=Object.freeze(r.slice());defineProperties(this,{type:e,inputs:r})}static from(t){if("string"==typeof t){try{Qa.from(JSON.parse(t))}catch(e){}return Qa.from(lex(t))}if(t instanceof Ca){const e=t.peekKeyword(ma);switch(e){case"constructor":return Wa.from(t);case"error":return ja.from(t);case"event":return Va.from(t);case"fallback":case"receive":return Ja.from(t);case"function":return Ka.from(t);case"struct":return qa.from(t)}}else if("object"==typeof t){switch(t.type){case"constructor":return Wa.from(t);case"error":return ja.from(t);case"event":return Va.from(t);case"fallback":case"receive":return Ja.from(t);case"function":return Ka.from(t);case"struct":return qa.from(t)}assert(!1,`unsupported type: ${t.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}assertArgument(!1,"unsupported frgament object","obj",t)}static isConstructor(t){return Wa.isFragment(t)}static isError(t){return ja.isFragment(t)}static isEvent(t){return Va.isFragment(t)}static isFunction(t){return Ka.isFragment(t)}static isStruct(t){return qa.isFragment(t)}}class za extends Qa{constructor(t,e,r,i){super(t,e,i);__publicField(this,"name");assertArgument("string"==typeof r&&r.match(Pa),"invalid identifier","name",r);i=Object.freeze(i.slice());defineProperties(this,{name:r})}}function joinParams(t,e){return"("+e.map(e=>e.format(t)).join("full"===t?", ":",")+")"}class ja extends za{constructor(t,e,r){super(t,"error",e,r);Object.defineProperty(this,Ra,{value:Ua})}get selector(){return id(this.format("sighash")).substring(0,10)}format(t){null==t&&(t="sighash");if("json"===t)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(e=>JSON.parse(e.format(t)))});const e=[];"sighash"!==t&&e.push("error");e.push(this.name+joinParams(t,this.inputs));return e.join(" ")}static from(t){if(ja.isFragment(t))return t;if("string"==typeof t)return ja.from(lex(t));if(t instanceof Ca){const e=consumeName("error",t);const r=consumeParams(t);consumeEoi(t);return new ja(Oa,e,r)}return new ja(Oa,t.name,t.inputs?t.inputs.map(_a.from):[])}static isFragment(t){return t&&t[Ra]===Ua}}class Va extends za{constructor(t,e,r,i){super(t,"event",e,r);__publicField(this,"anonymous");Object.defineProperty(this,Ra,{value:La});defineProperties(this,{anonymous:i})}get topicHash(){return id(this.format("sighash"))}format(t){null==t&&(t="sighash");if("json"===t)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(e=>JSON.parse(e.format(t)))});const e=[];"sighash"!==t&&e.push("event");e.push(this.name+joinParams(t,this.inputs));"sighash"!==t&&this.anonymous&&e.push("anonymous");return e.join(" ")}static getTopicHash(t,e){e=(e||[]).map(t=>_a.from(t));const r=new Va(Oa,t,e,!1);return r.topicHash}static from(t){if(Va.isFragment(t))return t;if("string"==typeof t)try{return Va.from(lex(t))}catch(e){assertArgument(!1,"invalid event fragment","obj",t)}else if(t instanceof Ca){const e=consumeName("event",t);const r=consumeParams(t,!0);const i=!!consumeKeywords(t,setify(["anonymous"])).has("anonymous");consumeEoi(t);return new Va(Oa,e,r,i)}return new Va(Oa,t.name,t.inputs?t.inputs.map(t=>_a.from(t,!0)):[],!!t.anonymous)}static isFragment(t){return t&&t[Ra]===La}}class Wa extends Qa{constructor(t,e,r,i,a){super(t,e,r);__publicField(this,"payable");__publicField(this,"gas");Object.defineProperty(this,Ra,{value:Fa});defineProperties(this,{payable:i,gas:a})}format(t){assert(null!=t&&"sighash"!==t,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"});if("json"===t)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(e=>JSON.parse(e.format(t)))});const e=[`constructor${joinParams(t,this.inputs)}`];this.payable&&e.push("payable");null!=this.gas&&e.push(`@${this.gas.toString()}`);return e.join(" ")}static from(t){if(Wa.isFragment(t))return t;if("string"==typeof t)try{return Wa.from(lex(t))}catch(e){assertArgument(!1,"invalid constuctor fragment","obj",t)}else if(t instanceof Ca){consumeKeywords(t,setify(["constructor"]));const e=consumeParams(t);const r=!!consumeKeywords(t,fa).has("payable");const i=consumeGas(t);consumeEoi(t);return new Wa(Oa,"constructor",e,r,i)}return new Wa(Oa,"constructor",t.inputs?t.inputs.map(_a.from):[],!!t.payable,null!=t.gas?t.gas:null)}static isFragment(t){return t&&t[Ra]===Fa}}class Ja extends Qa{constructor(t,e,r){super(t,"fallback",e);__publicField(this,"payable");Object.defineProperty(this,Ra,{value:Ma});defineProperties(this,{payable:r})}format(t){const e=0===this.inputs.length?"receive":"fallback";if("json"===t){const t=this.payable?"payable":"nonpayable";return JSON.stringify({type:e,stateMutability:t})}return`${e}()${this.payable?" payable":""}`}static from(t){if(Ja.isFragment(t))return t;if("string"==typeof t)try{return Ja.from(lex(t))}catch(e){assertArgument(!1,"invalid fallback fragment","obj",t)}else if(t instanceof Ca){const e=t.toString();const r=t.peekKeyword(setify(["fallback","receive"]));assertArgument(r,"type must be fallback or receive","obj",e);const i=t.popKeyword(setify(["fallback","receive"]));if("receive"===i){const e=consumeParams(t);assertArgument(0===e.length,"receive cannot have arguments","obj.inputs",e);consumeKeywords(t,setify(["payable"]));consumeEoi(t);return new Ja(Oa,[],!0)}let a=consumeParams(t);a.length?assertArgument(1===a.length&&"bytes"===a[0].type,"invalid fallback inputs","obj.inputs",a.map(t=>t.format("minimal")).join(", ")):a=[_a.from("bytes")];const o=consumeMutability(t);assertArgument("nonpayable"===o||"payable"===o,"fallback cannot be constants","obj.stateMutability",o);if(consumeKeywords(t,setify(["returns"])).has("returns")){const e=consumeParams(t);assertArgument(1===e.length&&"bytes"===e[0].type,"invalid fallback outputs","obj.outputs",e.map(t=>t.format("minimal")).join(", "))}consumeEoi(t);return new Ja(Oa,a,"payable"===o)}if("receive"===t.type)return new Ja(Oa,[],!0);if("fallback"===t.type){const e=[_a.from("bytes")];const r="payable"===t.stateMutability;return new Ja(Oa,e,r)}assertArgument(!1,"invalid fallback description","obj",t)}static isFragment(t){return t&&t[Ra]===Ma}}class Ka extends za{constructor(t,e,r,i,a,o){super(t,"function",e,i);__publicField(this,"constant");__publicField(this,"outputs");__publicField(this,"stateMutability");__publicField(this,"payable");__publicField(this,"gas");Object.defineProperty(this,Ra,{value:Da});a=Object.freeze(a.slice());const c="view"===r||"pure"===r;const l="payable"===r;defineProperties(this,{constant:c,gas:o,outputs:a,payable:l,stateMutability:r})}get selector(){return id(this.format("sighash")).substring(0,10)}format(t){null==t&&(t="sighash");if("json"===t)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(e=>JSON.parse(e.format(t))),outputs:this.outputs.map(e=>JSON.parse(e.format(t)))});const e=[];"sighash"!==t&&e.push("function");e.push(this.name+joinParams(t,this.inputs));if("sighash"!==t){"nonpayable"!==this.stateMutability&&e.push(this.stateMutability);if(this.outputs&&this.outputs.length){e.push("returns");e.push(joinParams(t,this.outputs))}null!=this.gas&&e.push(`@${this.gas.toString()}`)}return e.join(" ")}static getSelector(t,e){e=(e||[]).map(t=>_a.from(t));const r=new Ka(Oa,t,"view",e,[],null);return r.selector}static from(t){if(Ka.isFragment(t))return t;if("string"==typeof t)try{return Ka.from(lex(t))}catch(r){assertArgument(!1,"invalid function fragment","obj",t)}else if(t instanceof Ca){const e=consumeName("function",t);const r=consumeParams(t);const i=consumeMutability(t);let a=[];consumeKeywords(t,setify(["returns"])).has("returns")&&(a=consumeParams(t));const o=consumeGas(t);consumeEoi(t);return new Ka(Oa,e,i,r,a,o)}let e=t.stateMutability;if(null==e){e="payable";if("boolean"==typeof t.constant){e="view";if(!t.constant){e="payable";"boolean"!=typeof t.payable||t.payable||(e="nonpayable")}}else"boolean"!=typeof t.payable||t.payable||(e="nonpayable")}return new Ka(Oa,t.name,e,t.inputs?t.inputs.map(_a.from):[],t.outputs?t.outputs.map(_a.from):[],null!=t.gas?t.gas:null)}static isFragment(t){return t&&t[Ra]===Da}}class qa extends za{constructor(t,e,r){super(t,"struct",e,r);Object.defineProperty(this,Ra,{value:Ha})}format(){throw new Error("@TODO")}static from(t){if("string"==typeof t)try{return qa.from(lex(t))}catch(e){assertArgument(!1,"invalid struct fragment","obj",t)}else if(t instanceof Ca){const e=consumeName("struct",t);const r=consumeParams(t);consumeEoi(t);return new qa(Oa,e,r)}return new qa(Oa,t.name,t.inputs?t.inputs.map(_a.from):[])}static isFragment(t){return t&&t[Ra]===Ha}}const Za=new Map;Za.set(0,"GENERIC_PANIC");Za.set(1,"ASSERT_FALSE");Za.set(17,"OVERFLOW");Za.set(18,"DIVIDE_BY_ZERO");Za.set(33,"ENUM_RANGE_ERROR");Za.set(34,"BAD_STORAGE_DATA");Za.set(49,"STACK_UNDERFLOW");Za.set(50,"ARRAY_RANGE_ERROR");Za.set(65,"OUT_OF_MEMORY");Za.set(81,"UNINITIALIZED_FUNCTION_CALL");const Ya=new RegExp(/^bytes([0-9]*)$/);const Xa=new RegExp(/^(u?int)([0-9]*)$/);let $a=null;let to=1024;function getBuiltinCallException(t,e,r,i){let a="missing revert data";let o=null;const c=null;let l=null;if(r){a="execution reverted";const t=getBytes(r);r=hexlify(r);if(0===t.length){a+=" (no data present; likely require(false) occurred";o="require(false)"}else if(t.length%32!=4)a+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===hexlify(t.slice(0,4)))try{o=i.decode(["string"],t.slice(4))[0];l={signature:"Error(string)",name:"Error",args:[o]};a+=`: ${JSON.stringify(o)}`}catch(f){a+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===hexlify(t.slice(0,4)))try{const e=Number(i.decode(["uint256"],t.slice(4))[0]);l={signature:"Panic(uint256)",name:"Panic",args:[e]};o=`Panic due to ${Za.get(e)||"UNKNOWN"}(${e})`;a+=`: ${o}`}catch(f){a+=" (could not decode panic code)"}else a+=" (unknown custom error)"}const u={to:e.to?getAddress(e.to):null,data:e.data||"0x"};e.from&&(u.from=getAddress(e.from));return makeError(a,"CALL_EXCEPTION",{action:t,data:r,reason:o,transaction:u,invocation:c,revert:l})}const eo=class t{constructor(){__privateAdd(this,Ft)}getDefaultValue(t){const e=t.map(t=>__privateMethod(this,Ft,Mt).call(this,_a.from(t)));const r=new ni(e,"_");return r.defaultValue()}encode(t,e){assertArgumentCount(e.length,t.length,"types/values length mismatch");const r=t.map(t=>__privateMethod(this,Ft,Mt).call(this,_a.from(t)));const i=new ni(r,"_");const a=new ar;i.encode(a,e);return a.data}decode(t,e,r){const i=t.map(t=>__privateMethod(this,Ft,Mt).call(this,_a.from(t)));const a=new ni(i,"_");return a.decode(new cr(e,r,to))}static _setDefaultMaxInflation(t){assertArgument("number"==typeof t&&Number.isInteger(t),"invalid defaultMaxInflation factor","value",t);to=t}static defaultAbiCoder(){null==$a&&($a=new t);return $a}static getBuiltinCallException(e,r,i){return getBuiltinCallException(e,r,i,t.defaultAbiCoder())}};Ft=new WeakSet;Mt=function(t){if(t.isArray())return new js(__privateMethod(this,Ft,Mt).call(this,t.arrayChildren),t.arrayLength,t.name);if(t.isTuple())return new ni(t.components.map(t=>__privateMethod(this,Ft,Mt).call(this,t)),t.name);switch(t.baseType){case"address":return new Qs(t.name);case"bool":return new Vs(t.name);case"string":return new ei(t.name);case"bytes":return new Js(t.name);case"":return new Zs(t.name)}let e=t.type.match(Xa);if(e){let r=parseInt(e[2]||"256");assertArgument(0!==r&&r<=256&&r%8==0,"invalid "+e[1]+" bit length","param",t);return new ti(r/8,"int"===e[1],t.name)}e=t.type.match(Ya);if(e){let r=parseInt(e[1]);assertArgument(0!==r&&r<=32,"invalid bytes length","param",t);return new Ks(r,t.name)}assertArgument(!1,"invalid type","type",t.type)};let no=eo;class ro{constructor(t,e,r){__publicField(this,"fragment");__publicField(this,"name");__publicField(this,"signature");__publicField(this,"topic");__publicField(this,"args");const i=t.name,a=t.format();defineProperties(this,{fragment:t,name:i,signature:a,topic:e,args:r})}}class so{constructor(t,e,r,i){__publicField(this,"fragment");__publicField(this,"name");__publicField(this,"args");__publicField(this,"signature");__publicField(this,"selector");__publicField(this,"value");const a=t.name,o=t.format();defineProperties(this,{fragment:t,name:a,args:r,signature:o,selector:e,value:i})}}class io{constructor(t,e,r){__publicField(this,"fragment");__publicField(this,"name");__publicField(this,"args");__publicField(this,"signature");__publicField(this,"selector");const i=t.name,a=t.format();defineProperties(this,{fragment:t,name:i,args:r,signature:a,selector:e})}}class ao{constructor(t){__publicField(this,"hash");__publicField(this,"_isIndexed");defineProperties(this,{hash:t,_isIndexed:!0})}static isIndexed(t){return!(!t||!t._isIndexed)}}const oo={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"};const co={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";t>=0&&t<=255&&oo[t.toString()]&&(e=oo[t.toString()]);return`reverted with panic code 0x${t.toString(16)} (${e})`}}};const lo=class t{constructor(t){__privateAdd(this,Qt);__publicField(this,"fragments");__publicField(this,"deploy");__publicField(this,"fallback");__publicField(this,"receive");__privateAdd(this,Dt);__privateAdd(this,Ht);__privateAdd(this,Gt);__privateAdd(this,_t);let e=[];e="string"==typeof t?JSON.parse(t):t;__privateSet(this,Gt,new Map);__privateSet(this,Dt,new Map);__privateSet(this,Ht,new Map);const r=[];for(const c of e)try{r.push(Qa.from(c))}catch(o){console.log(`[Warning] Invalid Fragment ${JSON.stringify(c)}:`,o.message)}defineProperties(this,{fragments:Object.freeze(r)});let i=null;let a=!1;__privateSet(this,_t,this.getAbiCoder());this.fragments.forEach((t,e)=>{let r;switch(t.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}defineProperties(this,{deploy:t});return;case"fallback":if(0===t.inputs.length)a=!0;else{assertArgument(!i||t.payable!==i.payable,"conflicting fallback fragments",`fragments[${e}]`,t);i=t;a=i.payable}return;case"function":r=__privateGet(this,Gt);break;case"event":r=__privateGet(this,Ht);break;case"error":r=__privateGet(this,Dt);break;default:return}const o=t.format();r.has(o)||r.set(o,t)});this.deploy||defineProperties(this,{deploy:Wa.from("constructor()")});defineProperties(this,{fallback:i,receive:a})}format(t){const e=t?"minimal":"full";const r=this.fragments.map(t=>t.format(e));return r}formatJson(){const t=this.fragments.map(t=>t.format("json"));return JSON.stringify(t.map(t=>JSON.parse(t)))}getAbiCoder(){return no.defaultAbiCoder()}getFunctionName(t){const e=__privateMethod(this,Qt,zt).call(this,t,null,!1);assertArgument(e,"no matching function","key",t);return e.name}hasFunction(t){return!!__privateMethod(this,Qt,zt).call(this,t,null,!1)}getFunction(t,e){return __privateMethod(this,Qt,zt).call(this,t,e||null,!0)}forEachFunction(t){const e=Array.from(__privateGet(this,Gt).keys());e.sort((t,e)=>t.localeCompare(e));for(let r=0;r<e.length;r++){const i=e[r];t(__privateGet(this,Gt).get(i),r)}}getEventName(t){const e=__privateMethod(this,Qt,jt).call(this,t,null,!1);assertArgument(e,"no matching event","key",t);return e.name}hasEvent(t){return!!__privateMethod(this,Qt,jt).call(this,t,null,!1)}getEvent(t,e){return __privateMethod(this,Qt,jt).call(this,t,e||null,!0)}forEachEvent(t){const e=Array.from(__privateGet(this,Ht).keys());e.sort((t,e)=>t.localeCompare(e));for(let r=0;r<e.length;r++){const i=e[r];t(__privateGet(this,Ht).get(i),r)}}getError(t,e){if(isHexString(t)){const e=t.toLowerCase();if(co[e])return ja.from(co[e].signature);for(const t of __privateGet(this,Dt).values())if(e===t.selector)return t;return null}if(-1===t.indexOf("(")){const e=[];for(const[r,i]of __privateGet(this,Dt))r.split("(")[0]===t&&e.push(i);if(0===e.length)return"Error"===t?ja.from("error Error(string)"):"Panic"===t?ja.from("error Panic(uint256)"):null;if(e.length>1){const r=e.map(t=>JSON.stringify(t.format())).join(", ");assertArgument(!1,`ambiguous error description (i.e. ${r})`,"name",t)}return e[0]}t=ja.from(t).format();if("Error(string)"===t)return ja.from("error Error(string)");if("Panic(uint256)"===t)return ja.from("error Panic(uint256)");const r=__privateGet(this,Dt).get(t);return r||null}forEachError(t){const e=Array.from(__privateGet(this,Dt).keys());e.sort((t,e)=>t.localeCompare(e));for(let r=0;r<e.length;r++){const i=e[r];t(__privateGet(this,Dt).get(i),r)}}_decodeParams(t,e){return __privateGet(this,_t).decode(t,e)}_encodeParams(t,e){return __privateGet(this,_t).encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){if("string"==typeof t){const e=this.getError(t);assertArgument(e,"unknown error","fragment",t);t=e}assertArgument(dataSlice(e,0,4)===t.selector,`data signature does not match error ${t.name}.`,"data",e);return this._decodeParams(t.inputs,dataSlice(e,4))}encodeErrorResult(t,e){if("string"==typeof t){const e=this.getError(t);assertArgument(e,"unknown error","fragment",t);t=e}return concat([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionData(t,e){if("string"==typeof t){const e=this.getFunction(t);assertArgument(e,"unknown function","fragment",t);t=e}assertArgument(dataSlice(e,0,4)===t.selector,`data signature does not match function ${t.name}.`,"data",e);return this._decodeParams(t.inputs,dataSlice(e,4))}encodeFunctionData(t,e){if("string"==typeof t){const e=this.getFunction(t);assertArgument(e,"unknown function","fragment",t);t=e}return concat([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionResult(t,e){if("string"==typeof t){const e=this.getFunction(t);assertArgument(e,"unknown function","fragment",t);t=e}let r="invalid length for result data";const i=getBytesCopy(e);if(i.length%32==0)try{return __privateGet(this,_t).decode(t.outputs,i)}catch(a){r="could not decode result data"}assert(!1,r,"BAD_DATA",{value:hexlify(i),info:{method:t.name,signature:t.format()}})}makeError(t,e){const r=getBytes(t,"data");const i=no.getBuiltinCallException("call",e,r);const a="execution reverted (unknown custom error)";if(i.message.startsWith(a)){const t=hexlify(r.slice(0,4));const e=this.getError(t);if(e)try{const t=__privateGet(this,_t).decode(e.inputs,r.slice(4));i.revert={name:e.name,signature:e.format(),args:t};i.reason=i.revert.signature;i.message=`execution reverted: ${i.reason}`}catch(c){i.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(e);o&&(i.invocation={method:o.name,signature:o.signature,args:o.args});return i}encodeFunctionResult(t,e){if("string"==typeof t){const e=this.getFunction(t);assertArgument(e,"unknown function","fragment",t);t=e}return hexlify(__privateGet(this,_t).encode(t.outputs,e||[]))}encodeFilterTopics(t,e){if("string"==typeof t){const e=this.getEvent(t);assertArgument(e,"unknown event","eventFragment",t);t=e}assert(e.length<=t.inputs.length,`too many arguments for ${t.format()}`,"UNEXPECTED_ARGUMENT",{count:e.length,expectedCount:t.inputs.length});const r=[];t.anonymous||r.push(t.topicHash);const encodeTopic=(t,e)=>{if("string"===t.type)return id(e);if("bytes"===t.type)return keccak256(hexlify(e));"bool"===t.type&&"boolean"==typeof e?e=e?"0x01":"0x00":t.type.match(/^u?int/)?e=toBeHex(e):t.type.match(/^bytes/)?e=zeroPadBytes(e,32):"address"===t.type&&__privateGet(this,_t).encode(["address"],[e]);return zeroPadValue(hexlify(e),32)};e.forEach((e,i)=>{const a=t.inputs[i];a.indexed?null==e?r.push(null):"array"===a.baseType||"tuple"===a.baseType?assertArgument(!1,"filtering with tuples or arrays not supported","contract."+a.name,e):Array.isArray(e)?r.push(e.map(t=>encodeTopic(a,t))):r.push(encodeTopic(a,e)):assertArgument(null==e,"cannot filter non-indexed parameters; must be null","contract."+a.name,e)});for(;r.length&&null===r[r.length-1];)r.pop();return r}encodeEventLog(t,e){if("string"==typeof t){const e=this.getEvent(t);assertArgument(e,"unknown event","eventFragment",t);t=e}const r=[];const i=[];const a=[];t.anonymous||r.push(t.topicHash);assertArgument(e.length===t.inputs.length,"event arguments/values mismatch","values",e);t.inputs.forEach((t,o)=>{const c=e[o];if(t.indexed)if("string"===t.type)r.push(id(c));else if("bytes"===t.type)r.push(keccak256(c));else{if("tuple"===t.baseType||"array"===t.baseType)throw new Error("not implemented");r.push(__privateGet(this,_t).encode([t.type],[c]))}else{i.push(t);a.push(c)}});return{data:__privateGet(this,_t).encode(i,a),topics:r}}decodeEventLog(t,e,r){if("string"==typeof t){const e=this.getEvent(t);assertArgument(e,"unknown event","eventFragment",t);t=e}if(null!=r&&!t.anonymous){const e=t.topicHash;assertArgument(isHexString(r[0],32)&&r[0].toLowerCase()===e,"fragment/topic mismatch","topics[0]",r[0]);r=r.slice(1)}const i=[];const a=[];const o=[];t.inputs.forEach((t,e)=>{if(t.indexed)if("string"===t.type||"bytes"===t.type||"tuple"===t.baseType||"array"===t.baseType){i.push(_a.from({type:"bytes32",name:t.name}));o.push(!0)}else{i.push(t);o.push(!1)}else{a.push(t);o.push(!1)}});const c=null!=r?__privateGet(this,_t).decode(i,concat(r)):null;const l=__privateGet(this,_t).decode(a,e,!0);const u=[];const f=[];let d=0,g=0;t.inputs.forEach((t,e)=>{let r=null;if(t.indexed)if(null==c)r=new ao(null);else if(o[e])r=new ao(c[g++]);else try{r=c[g++]}catch(i){r=i}else try{r=l[d++]}catch(i){r=i}u.push(r);f.push(t.name||null)});return sr.fromItems(u,f)}parseTransaction(t){const e=getBytes(t.data,"tx.data");const r=getBigInt(null!=t.value?t.value:0,"tx.value");const i=this.getFunction(hexlify(e.slice(0,4)));if(!i)return null;const a=__privateGet(this,_t).decode(i.inputs,e.slice(4));return new so(i,i.selector,a,r)}parseCallResult(t){throw new Error("@TODO")}parseLog(t){const e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new ro(e,e.topicHash,this.decodeEventLog(e,t.data,t.topics))}parseError(t){const e=hexlify(t);const r=this.getError(dataSlice(e,0,4));if(!r)return null;const i=__privateGet(this,_t).decode(r.inputs,dataSlice(e,4));return new io(r,r.selector,i)}static from(e){return e instanceof t?e:"string"==typeof e?new t(JSON.parse(e)):"function"==typeof e.formatJson?new t(e.formatJson()):"function"==typeof e.format?new t(e.format("json")):new t(e)}};Dt=new WeakMap;Ht=new WeakMap;Gt=new WeakMap;_t=new WeakMap;Qt=new WeakSet;zt=function(t,e,r){if(isHexString(t)){const e=t.toLowerCase();for(const t of __privateGet(this,Gt).values())if(e===t.selector)return t;return null}if(-1===t.indexOf("(")){const i=[];for(const[e,r]of __privateGet(this,Gt))e.split("(")[0]===t&&i.push(r);if(e){const t=e.length>0?e[e.length-1]:null;let r=e.length;let a=!0;if(_s.isTyped(t)&&"overrides"===t.type){a=!1;r--}for(let e=i.length-1;e>=0;e--){const t=i[e].inputs.length;t===r||a&&t===r-1||i.splice(e,1)}for(let o=i.length-1;o>=0;o--){const t=i[o].inputs;for(let r=0;r<e.length;r++)if(_s.isTyped(e[r])){if(r>=t.length){if("overrides"===e[r].type)continue;i.splice(o,1);break}if(e[r].type!==t[r].baseType){i.splice(o,1);break}}}}if(1===i.length&&e&&e.length!==i[0].inputs.length){const t=e[e.length-1];(null==t||Array.isArray(t)||"object"!=typeof t)&&i.splice(0,1)}if(0===i.length)return null;if(i.length>1&&r){const e=i.map(t=>JSON.stringify(t.format())).join(", ");assertArgument(!1,`ambiguous function description (i.e. matches ${e})`,"key",t)}return i[0]}const i=__privateGet(this,Gt).get(Ka.from(t).format());return i||null};jt=function(t,e,r){if(isHexString(t)){const e=t.toLowerCase();for(const t of __privateGet(this,Ht).values())if(e===t.topicHash)return t;return null}if(-1===t.indexOf("(")){const i=[];for(const[e,r]of __privateGet(this,Ht))e.split("(")[0]===t&&i.push(r);if(e){for(let t=i.length-1;t>=0;t--)i[t].inputs.length<e.length&&i.splice(t,1);for(let t=i.length-1;t>=0;t--){const r=i[t].inputs;for(let a=0;a<e.length;a++)if(_s.isTyped(e[a])&&e[a].type!==r[a].baseType){i.splice(t,1);break}}}if(0===i.length)return null;if(i.length>1&&r){const e=i.map(t=>JSON.stringify(t.format())).join(", ");assertArgument(!1,`ambiguous event description (i.e. matches ${e})`,"key",t)}return i[0]}const i=__privateGet(this,Ht).get(Va.from(t).format());return i||null};let uo=lo;const ho=BigInt(0);function getValue(t){return null==t?null:t}function toJson(t){return null==t?null:t.toString()}class fo{constructor(t,e,r){__publicField(this,"gasPrice");__publicField(this,"maxFeePerGas");__publicField(this,"maxPriorityFeePerGas");defineProperties(this,{gasPrice:getValue(t),maxFeePerGas:getValue(e),maxPriorityFeePerGas:getValue(r)})}toJSON(){const{gasPrice:t,maxFeePerGas:e,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:toJson(t),maxFeePerGas:toJson(e),maxPriorityFeePerGas:toJson(r)}}}function copyRequest(t){const e={};t.to&&(e.to=t.to);t.from&&(e.from=t.from);t.data&&(e.data=hexlify(t.data));const r="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const a of r)a in t&&null!=t[a]&&(e[a]=getBigInt(t[a],`request.${a}`));const i="type,nonce".split(/,/);for(const a of i)a in t&&null!=t[a]&&(e[a]=getNumber(t[a],`request.${a}`));t.accessList&&(e.accessList=accessListify(t.accessList));t.authorizationList&&(e.authorizationList=t.authorizationList.slice());"blockTag"in t&&(e.blockTag=t.blockTag);"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead);"customData"in t&&(e.customData=t.customData);"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice());"kzg"in t&&(e.kzg=t.kzg);"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(t=>isBytesLike(t)?hexlify(t):Object.assign({},t)));return e}class go{constructor(t,e){__publicField(this,"provider");__publicField(this,"number");__publicField(this,"hash");__publicField(this,"timestamp");__publicField(this,"parentHash");__publicField(this,"parentBeaconBlockRoot");__publicField(this,"nonce");__publicField(this,"difficulty");__publicField(this,"gasLimit");__publicField(this,"gasUsed");__publicField(this,"stateRoot");__publicField(this,"receiptsRoot");__publicField(this,"blobGasUsed");__publicField(this,"excessBlobGas");__publicField(this,"miner");__publicField(this,"prevRandao");__publicField(this,"extraData");__publicField(this,"baseFeePerGas");__privateAdd(this,Vt);__privateSet(this,Vt,t.transactions.map(t=>"string"!=typeof t?new wo(t,e):t));defineProperties(this,{provider:e,hash:getValue(t.hash),number:t.number,timestamp:t.timestamp,parentHash:t.parentHash,parentBeaconBlockRoot:t.parentBeaconBlockRoot,nonce:t.nonce,difficulty:t.difficulty,gasLimit:t.gasLimit,gasUsed:t.gasUsed,blobGasUsed:t.blobGasUsed,excessBlobGas:t.excessBlobGas,miner:t.miner,prevRandao:getValue(t.prevRandao),extraData:t.extraData,baseFeePerGas:getValue(t.baseFeePerGas),stateRoot:t.stateRoot,receiptsRoot:t.receiptsRoot})}get transactions(){return __privateGet(this,Vt).map(t=>"string"==typeof t?t:t.hash)}get prefetchedTransactions(){const t=__privateGet(this,Vt).slice();if(0===t.length)return[];assert("object"==typeof t[0],"transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"});return t}toJSON(){const{baseFeePerGas:t,difficulty:e,extraData:r,gasLimit:i,gasUsed:a,hash:o,miner:c,prevRandao:l,nonce:u,number:f,parentHash:d,parentBeaconBlockRoot:g,stateRoot:p,receiptsRoot:m,timestamp:y,transactions:w}=this;return{_type:"Block",baseFeePerGas:toJson(t),difficulty:toJson(e),extraData:r,gasLimit:toJson(i),gasUsed:toJson(a),blobGasUsed:toJson(this.blobGasUsed),excessBlobGas:toJson(this.excessBlobGas),hash:o,miner:c,prevRandao:l,nonce:u,number:f,parentHash:d,timestamp:y,parentBeaconBlockRoot:g,stateRoot:p,receiptsRoot:m,transactions:w}}[Symbol.iterator](){let t=0;const e=this.transactions;return{next:()=>t<this.length?{value:e[t++],done:!1}:{value:void 0,done:!0}}}get length(){return __privateGet(this,Vt).length}get date(){return null==this.timestamp?null:new Date(1e3*this.timestamp)}async getTransaction(t){let e;if("number"==typeof t)e=__privateGet(this,Vt)[t];else{const r=t.toLowerCase();for(const t of __privateGet(this,Vt)){if("string"==typeof t){if(t!==r)continue;e=t;break}if(t.hash===r){e=t;break}}}if(null==e)throw new Error("no such tx");return"string"==typeof e?await this.provider.getTransaction(e):e}getPrefetchedTransaction(t){const e=this.prefetchedTransactions;if("number"==typeof t)return e[t];t=t.toLowerCase();for(const r of e)if(r.hash===t)return r;assertArgument(!1,"no matching transaction","indexOrHash",t)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return createOrphanedBlockFilter(this)}}Vt=new WeakMap;class po{constructor(t,e){__publicField(this,"provider");__publicField(this,"transactionHash");__publicField(this,"blockHash");__publicField(this,"blockNumber");__publicField(this,"removed");__publicField(this,"address");__publicField(this,"data");__publicField(this,"topics");__publicField(this,"index");__publicField(this,"transactionIndex");this.provider=e;const r=Object.freeze(t.topics.slice());defineProperties(this,{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,removed:t.removed,address:t.address,data:t.data,topics:r,index:t.index,transactionIndex:t.transactionIndex})}toJSON(){const{address:t,blockHash:e,blockNumber:r,data:i,index:a,removed:o,topics:c,transactionHash:l,transactionIndex:u}=this;return{_type:"log",address:t,blockHash:e,blockNumber:r,data:i,index:a,removed:o,topics:c,transactionHash:l,transactionIndex:u}}async getBlock(){const t=await this.provider.getBlock(this.blockHash);assert(!!t,"failed to find transaction","UNKNOWN_ERROR",{});return t}async getTransaction(){const t=await this.provider.getTransaction(this.transactionHash);assert(!!t,"failed to find transaction","UNKNOWN_ERROR",{});return t}async getTransactionReceipt(){const t=await this.provider.getTransactionReceipt(this.transactionHash);assert(!!t,"failed to find transaction receipt","UNKNOWN_ERROR",{});return t}removedEvent(){return createRemovedLogFilter(this)}}class mo{constructor(t,e){__publicField(this,"provider");__publicField(this,"to");__publicField(this,"from");__publicField(this,"contractAddress");__publicField(this,"hash");__publicField(this,"index");__publicField(this,"blockHash");__publicField(this,"blockNumber");__publicField(this,"logsBloom");__publicField(this,"gasUsed");__publicField(this,"blobGasUsed");__publicField(this,"cumulativeGasUsed");__publicField(this,"gasPrice");__publicField(this,"blobGasPrice");__publicField(this,"type");__publicField(this,"status");__publicField(this,"root");__privateAdd(this,Wt);__privateSet(this,Wt,Object.freeze(t.logs.map(t=>new po(t,e))));let r=ho;null!=t.effectiveGasPrice?r=t.effectiveGasPrice:null!=t.gasPrice&&(r=t.gasPrice);defineProperties(this,{provider:e,to:t.to,from:t.from,contractAddress:t.contractAddress,hash:t.hash,index:t.index,blockHash:t.blockHash,blockNumber:t.blockNumber,logsBloom:t.logsBloom,gasUsed:t.gasUsed,cumulativeGasUsed:t.cumulativeGasUsed,blobGasUsed:t.blobGasUsed,gasPrice:r,blobGasPrice:t.blobGasPrice,type:t.type,status:t.status,root:t.root})}get logs(){return __privateGet(this,Wt)}toJSON(){const{to:t,from:e,contractAddress:r,hash:i,index:a,blockHash:o,blockNumber:c,logsBloom:l,logs:u,status:f,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:c,contractAddress:r,cumulativeGasUsed:toJson(this.cumulativeGasUsed),from:e,gasPrice:toJson(this.gasPrice),blobGasUsed:toJson(this.blobGasUsed),blobGasPrice:toJson(this.blobGasPrice),gasUsed:toJson(this.gasUsed),hash:i,index:a,logs:u,logsBloom:l,root:d,status:f,to:t}}get length(){return this.logs.length}[Symbol.iterator](){let t=0;return{next:()=>t<this.length?{value:this.logs[t++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const t=await this.provider.getBlock(this.blockHash);if(null==t)throw new Error("TODO");return t}async getTransaction(){const t=await this.provider.getTransaction(this.hash);if(null==t)throw new Error("TODO");return t}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return createRemovedTransactionFilter(this)}reorderedEvent(t){assert(!t||t.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"});return createReorderedTransactionFilter(this,t)}}Wt=new WeakMap;const yo=class t{constructor(t,e){__publicField(this,"provider");__publicField(this,"blockNumber");__publicField(this,"blockHash");__publicField(this,"index");__publicField(this,"hash");__publicField(this,"type");__publicField(this,"to");__publicField(this,"from");__publicField(this,"nonce");__publicField(this,"gasLimit");__publicField(this,"gasPrice");__publicField(this,"maxPriorityFeePerGas");__publicField(this,"maxFeePerGas");__publicField(this,"maxFeePerBlobGas");__publicField(this,"data");__publicField(this,"value");__publicField(this,"chainId");__publicField(this,"signature");__publicField(this,"accessList");__publicField(this,"blobVersionedHashes");__publicField(this,"authorizationList");__privateAdd(this,Jt);this.provider=e;this.blockNumber=null!=t.blockNumber?t.blockNumber:null;this.blockHash=null!=t.blockHash?t.blockHash:null;this.hash=t.hash;this.index=t.index;this.type=t.type;this.from=t.from;this.to=t.to||null;this.gasLimit=t.gasLimit;this.nonce=t.nonce;this.data=t.data;this.value=t.value;this.gasPrice=t.gasPrice;this.maxPriorityFeePerGas=null!=t.maxPriorityFeePerGas?t.maxPriorityFeePerGas:null;this.maxFeePerGas=null!=t.maxFeePerGas?t.maxFeePerGas:null;this.maxFeePerBlobGas=null!=t.maxFeePerBlobGas?t.maxFeePerBlobGas:null;this.chainId=t.chainId;this.signature=t.signature;this.accessList=null!=t.accessList?t.accessList:null;this.blobVersionedHashes=null!=t.blobVersionedHashes?t.blobVersionedHashes:null;this.authorizationList=null!=t.authorizationList?t.authorizationList:null;__privateSet(this,Jt,-1)}toJSON(){const{blockNumber:t,blockHash:e,index:r,hash:i,type:a,to:o,from:c,nonce:l,data:u,signature:f,accessList:d,blobVersionedHashes:g}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:t,blockHash:e,blobVersionedHashes:g,chainId:toJson(this.chainId),data:u,from:c,gasLimit:toJson(this.gasLimit),gasPrice:toJson(this.gasPrice),hash:i,maxFeePerGas:toJson(this.maxFeePerGas),maxPriorityFeePerGas:toJson(this.maxPriorityFeePerGas),maxFeePerBlobGas:toJson(this.maxFeePerBlobGas),nonce:l,signature:f,to:o,index:r,type:a,value:toJson(this.value)}}async getBlock(){let t=this.blockNumber;if(null==t){const e=await this.getTransaction();e&&(t=e.blockNumber)}if(null==t)return null;const e=this.provider.getBlock(t);if(null==e)throw new Error("TODO");return e}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(null==this.blockNumber){const{tx:t,blockNumber:e}=await resolveProperties({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return null==t||null==t.blockNumber?0:e-t.blockNumber+1}const t=await this.provider.getBlockNumber();return t-this.blockNumber+1}async wait(t,e){const r=null==t?1:t;const i=null==e?0:e;let a=__privateGet(this,Jt);let o=-1;let c=-1===a;const checkReplacement=async()=>{if(c)return null;const{blockNumber:t,nonce:e}=await resolveProperties({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(e<this.nonce){a=t;return}if(c)return null;const i=await this.getTransaction();if(!i||null==i.blockNumber){if(-1===o){o=a-3;o<__privateGet(this,Jt)&&(o=__privateGet(this,Jt))}for(;o<=t;){if(c)return null;const e=await this.provider.getBlock(o,!0);if(null==e)return;for(const t of e)if(t===this.hash)return;for(let i=0;i<e.length;i++){const o=await e.getTransaction(i);if(o.from===this.from&&o.nonce===this.nonce){if(c)return null;const e=await this.provider.getTransactionReceipt(o.hash);if(null==e)return;if(t-e.blockNumber+1<r)return;let i="replaced";o.data===this.data&&o.to===this.to&&o.value===this.value?i="repriced":"0x"===o.data&&o.from===o.to&&o.value===ho&&(i="cancelled");assert(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===i||"cancelled"===i,reason:i,replacement:o.replaceableTransaction(a),hash:o.hash,receipt:e})}}o++}}};const checkReceipt=t=>{if(null==t||0!==t.status)return t;assert(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:t.to,from:t.from,data:""},receipt:t})};const l=await this.provider.getTransactionReceipt(this.hash);if(0===r)return checkReceipt(l);if(l){if(1===r||await l.confirmations()>=r)return checkReceipt(l)}else{await checkReplacement();if(0===r)return null}const u=new Promise((t,e)=>{const o=[];const cancel=()=>{o.forEach(t=>t())};o.push(()=>{c=!0});if(i>0){const t=setTimeout(()=>{cancel();e(makeError("wait for transaction timeout","TIMEOUT"))},i);o.push(()=>{clearTimeout(t)})}const txListener=async i=>{if(await i.confirmations()>=r){cancel();try{t(checkReceipt(i))}catch(a){e(a)}}};o.push(()=>{this.provider.off(this.hash,txListener)});this.provider.on(this.hash,txListener);if(a>=0){const replaceListener=async()=>{try{await checkReplacement()}catch(t){if(isError(t,"TRANSACTION_REPLACED")){cancel();e(t);return}}c||this.provider.once("block",replaceListener)};o.push(()=>{this.provider.off("block",replaceListener)});this.provider.once("block",replaceListener)}});return await u}isMined(){return null!=this.blockHash}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}removedEvent(){assert(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"});return createRemovedTransactionFilter(this)}reorderedEvent(t){assert(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"});assert(!t||t.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"});return createReorderedTransactionFilter(this,t)}replaceableTransaction(e){assertArgument(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const r=new t(this,this.provider);__privateSet(r,Jt,e);return r}};Jt=new WeakMap;let wo=yo;function createOrphanedBlockFilter(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function createReorderedTransactionFilter(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function createRemovedTransactionFilter(t){return{orphan:"drop-transaction",tx:t}}function createRemovedLogFilter(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class Ao extends po{constructor(t,e,r){super(t,t.provider);__publicField(this,"interface");__publicField(this,"fragment");__publicField(this,"args");const i=e.decodeEventLog(r,t.data,t.topics);defineProperties(this,{args:i,fragment:r,interface:e})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class bo extends po{constructor(t,e){super(t,t.provider);__publicField(this,"error");defineProperties(this,{error:e})}}class Eo extends mo{constructor(t,e,r){super(r,e);__privateAdd(this,Kt);__privateSet(this,Kt,t)}get logs(){return super.logs.map(t=>{const e=t.topics.length?__privateGet(this,Kt).getEvent(t.topics[0]):null;if(e)try{return new Ao(t,__privateGet(this,Kt),e)}catch(r){return new bo(t,r)}return t})}}Kt=new WeakMap;class vo extends wo{constructor(t,e,r){super(r,e);__privateAdd(this,qt);__privateSet(this,qt,t)}async wait(t,e){const r=await super.wait(t,e);return null==r?null:new Eo(__privateGet(this,qt),this.provider,r)}}qt=new WeakMap;class ko extends Nn{constructor(t,e,r,i){super(t,e,r);__publicField(this,"log");defineProperties(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Bo extends ko{constructor(t,e,r,i,a){super(t,e,r,new Ao(a,t.interface,i));const o=t.interface.decodeEventLog(i,this.log.data,this.log.topics);defineProperties(this,{args:o,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const xo=BigInt(0);function canCall(t){return t&&"function"==typeof t.call}function canEstimate(t){return t&&"function"==typeof t.estimateGas}function canResolve(t){return t&&"function"==typeof t.resolveName}function canSend(t){return t&&"function"==typeof t.sendTransaction}function getResolver(t){if(null!=t){if(canResolve(t))return t;if(t.provider)return t.provider}}class Po{constructor(t,e,r){__privateAdd(this,Zt);__publicField(this,"fragment");defineProperties(this,{fragment:e});if(e.inputs.length<r.length)throw new Error("too many arguments");const i=getRunner(t.runner,"resolveName");const a=canResolve(i)?i:null;__privateSet(this,Zt,async function(){const i=await Promise.all(e.inputs.map((t,e)=>{const i=r[e];return null==i?null:t.walkAsync(r[e],(t,e)=>"address"===t?Array.isArray(e)?Promise.all(e.map(t=>resolveAddress(t,a))):resolveAddress(e,a):e)}));return t.interface.encodeFilterTopics(e,i)}())}getTopicFilter(){return __privateGet(this,Zt)}}Zt=new WeakMap;function getRunner(t,e){return null==t?null:"function"==typeof t[e]?t:t.provider&&"function"==typeof t.provider[e]?t.provider:null}function getProvider(t){return null==t?null:t.provider||null}async function copyOverrides(t,e){const r=_s.dereference(t,"overrides");assertArgument("object"==typeof r,"invalid overrides parameter","overrides",t);const i=copyRequest(r);assertArgument(null==i.to||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",i.to);assertArgument(null==i.data||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",i.data);i.from&&(i.from=i.from);return i}async function resolveArgs(t,e,r){const i=getRunner(t,"resolveName");const a=canResolve(i)?i:null;return await Promise.all(e.map((t,e)=>t.walkAsync(r[e],(t,e)=>{e=_s.dereference(e,t);return"address"===t?resolveAddress(e,a):e})))}function buildWrappedFallback(t){const populateTransaction=async function(e){const r=await copyOverrides(e,["data"]);r.to=await t.getAddress();r.from&&(r.from=await resolveAddress(r.from,getResolver(t.runner)));const i=t.interface;const a=getBigInt(r.value||xo,"overrides.value")===xo;const o="0x"===(r.data||"0x");!i.fallback||i.fallback.payable||!i.receive||o||a||assertArgument(!1,"cannot send data to receive or send value to non-payable fallback","overrides",e);assertArgument(i.fallback||o,"cannot send data to receive-only contract","overrides.data",r.data);const c=i.receive||i.fallback&&i.fallback.payable;assertArgument(c||a,"cannot send value to non-payable fallback","overrides.value",r.value);assertArgument(i.fallback||o,"cannot send data to receive-only contract","overrides.data",r.data);return r};const staticCall=async function(e){const r=getRunner(t.runner,"call");assert(canCall(r),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const i=await populateTransaction(e);try{return await r.call(i)}catch(a){if(isCallException(a)&&a.data)throw t.interface.makeError(a.data,i);throw a}};const send=async function(e){const r=t.runner;assert(canSend(r),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const i=await r.sendTransaction(await populateTransaction(e));const a=getProvider(t.runner);return new vo(t.interface,a,i)};const estimateGas=async function(e){const r=getRunner(t.runner,"estimateGas");assert(canEstimate(r),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"});return await r.estimateGas(await populateTransaction(e))};const method=async t=>await send(t);defineProperties(method,{_contract:t,estimateGas:estimateGas,populateTransaction:populateTransaction,send:send,staticCall:staticCall});return method}function buildWrappedMethod(t,e){const getFragment=function(...r){const i=t.interface.getFunction(e,r);assert(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:r}});return i};const populateTransaction=async function(...e){const r=getFragment(...e);let i={};if(r.inputs.length+1===e.length){i=await copyOverrides(e.pop());i.from&&(i.from=await resolveAddress(i.from,getResolver(t.runner)))}if(r.inputs.length!==e.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const a=await resolveArgs(t.runner,r.inputs,e);return Object.assign({},i,await resolveProperties({to:t.getAddress(),data:t.interface.encodeFunctionData(r,a)}))};const staticCall=async function(...t){const e=await staticCallResult(...t);return 1===e.length?e[0]:e};const send=async function(...e){const r=t.runner;assert(canSend(r),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const i=await r.sendTransaction(await populateTransaction(...e));const a=getProvider(t.runner);return new vo(t.interface,a,i)};const estimateGas=async function(...e){const r=getRunner(t.runner,"estimateGas");assert(canEstimate(r),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"});return await r.estimateGas(await populateTransaction(...e))};const staticCallResult=async function(...e){const r=getRunner(t.runner,"call");assert(canCall(r),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const i=await populateTransaction(...e);let a="0x";try{a=await r.call(i)}catch(c){if(isCallException(c)&&c.data)throw t.interface.makeError(c.data,i);throw c}const o=getFragment(...e);return t.interface.decodeFunctionResult(o,a)};const method=async(...t)=>{const e=getFragment(...t);return e.constant?await staticCall(...t):await send(...t)};defineProperties(method,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:getFragment,estimateGas:estimateGas,populateTransaction:populateTransaction,send:send,staticCall:staticCall,staticCallResult:staticCallResult});Object.defineProperty(method,"fragment",{configurable:!1,enumerable:!0,get:()=>{const r=t.interface.getFunction(e);assert(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}});return r}});return method}function buildWrappedEvent(t,e){const getFragment=function(...r){const i=t.interface.getEvent(e,r);assert(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:r}});return i};const method=function(...e){return new Po(t,getFragment(...e),e)};defineProperties(method,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:getFragment});Object.defineProperty(method,"fragment",{configurable:!1,enumerable:!0,get:()=>{const r=t.interface.getEvent(e);assert(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}});return r}});return method}const No=Symbol.for("_ethersInternal_contract");const Io=new WeakMap;function setInternal(t,e){Io.set(t[No],e)}function getInternal(t){return Io.get(t[No])}function isDeferred(t){return t&&"object"==typeof t&&"getTopicFilter"in t&&"function"==typeof t.getTopicFilter&&t.fragment}async function getSubInfo(t,e){let r;let i=null;if(Array.isArray(e)){const topicHashify=function(e){if(isHexString(e,32))return e;const r=t.interface.getEvent(e);assertArgument(r,"unknown fragment","name",e);return r.topicHash};r=e.map(t=>null==t?null:Array.isArray(t)?t.map(topicHashify):topicHashify(t))}else if("*"===e)r=[null];else if("string"==typeof e)if(isHexString(e,32))r=[e];else{i=t.interface.getEvent(e);assertArgument(i,"unknown fragment","event",e);r=[i.topicHash]}else if(isDeferred(e))r=await e.getTopicFilter();else if("fragment"in e){i=e.fragment;r=[i.topicHash]}else assertArgument(!1,"unknown event name","event",e);r=r.map(t=>{if(null==t)return null;if(Array.isArray(t)){const e=Array.from(new Set(t.map(t=>t.toLowerCase())).values());if(1===e.length)return e[0];e.sort();return e}return t.toLowerCase()});const a=r.map(t=>null==t?"null":Array.isArray(t)?t.join("|"):t).join("&");return{fragment:i,tag:a,topics:r}}async function hasSub(t,e){const{subs:r}=getInternal(t);return r.get((await getSubInfo(t,e)).tag)||null}async function getSub(t,e,r){const i=getProvider(t.runner);assert(i,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:a,tag:o,topics:c}=await getSubInfo(t,r);const{addr:l,subs:u}=getInternal(t);let f=u.get(o);if(!f){const e=l||t;const d={address:e,topics:c};const listener=e=>{let i=a;if(null==i)try{i=t.interface.getEvent(e.topics[0])}catch(o){}if(i){const o=i;const c=a?t.interface.decodeEventLog(a,e.data,e.topics):[];emit(t,r,c,i=>new Bo(t,i,r,o,e))}else emit(t,r,[],i=>new ko(t,i,r,e))};let g=[];const start=()=>{g.length||g.push(i.on(d,listener))};const stop=async()=>{if(0==g.length)return;let t=g;g=[];await Promise.all(t);i.off(d,listener)};f={tag:o,listeners:[],start:start,stop:stop};u.set(o,f)}return f}let Co=Promise.resolve();async function _emit(t,e,r,i){await Co;const a=await hasSub(t,e);if(!a)return!1;const o=a.listeners.length;a.listeners=a.listeners.filter(({listener:e,once:a})=>{const o=Array.from(r);i&&o.push(i(a?null:e));try{e.call(t,...o)}catch(c){}return!a});if(0===a.listeners.length){a.stop();getInternal(t).subs.delete(a.tag)}return o>0}async function emit(t,e,r,i){try{await Co}catch(o){}const a=_emit(t,e,r,i);Co=a;return await a}const To=["then"];Yt=No;const Oo=class t{constructor(t,e,r,i){__publicField(this,"target");__publicField(this,"interface");__publicField(this,"runner");__publicField(this,"filters");__publicField(this,Yt);__publicField(this,"fallback");assertArgument("string"==typeof t||isAddressable(t),"invalid value for Contract target","target",t);null==r&&(r=null);const a=uo.from(e);defineProperties(this,{target:t,runner:r,interface:a});Object.defineProperty(this,No,{value:{}});let o;let c=null;let l=null;if(i){const t=getProvider(r);l=new vo(this.interface,t,i)}let u=new Map;if("string"==typeof t)if(isHexString(t)){c=t;o=Promise.resolve(t)}else{const e=getRunner(r,"resolveName");if(!canResolve(e))throw makeError("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=e.resolveName(t).then(e=>{if(null==e)throw makeError("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:t});getInternal(this).addr=e;return e})}else o=t.getAddress().then(t=>{if(null==t)throw new Error("TODO");getInternal(this).addr=t;return t});setInternal(this,{addrPromise:o,addr:c,deployTx:l,subs:u});const f=new Proxy({},{get:(t,e,r)=>{if("symbol"==typeof e||To.indexOf(e)>=0)return Reflect.get(t,e,r);try{return this.getEvent(e)}catch(i){if(!isError(i,"INVALID_ARGUMENT")||"key"!==i.argument)throw i}},has:(t,e)=>To.indexOf(e)>=0?Reflect.has(t,e):Reflect.has(t,e)||this.interface.hasEvent(String(e))});defineProperties(this,{filters:f});defineProperties(this,{fallback:a.receive||a.fallback?buildWrappedFallback(this):null});return new Proxy(this,{get:(t,e,r)=>{if("symbol"==typeof e||e in t||To.indexOf(e)>=0)return Reflect.get(t,e,r);try{return t.getFunction(e)}catch(i){if(!isError(i,"INVALID_ARGUMENT")||"key"!==i.argument)throw i}},has:(t,e)=>"symbol"==typeof e||e in t||To.indexOf(e)>=0?Reflect.has(t,e):t.interface.hasFunction(e)})}connect(e){return new t(this.target,this.interface,e)}attach(e){return new t(e,this.interface,this.runner)}async getAddress(){return await getInternal(this).addrPromise}async getDeployedCode(){const t=getProvider(this.runner);assert(t,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const e=await t.getCode(await this.getAddress());return"0x"===e?null:e}async waitForDeployment(){const t=this.deploymentTransaction();if(t){await t.wait();return this}const e=await this.getDeployedCode();if(null!=e)return this;const r=getProvider(this.runner);assert(null!=r,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"});return new Promise((t,e)=>{const checkCode=async()=>{try{const e=await this.getDeployedCode();if(null!=e)return t(this);r.once("block",checkCode)}catch(i){e(i)}};checkCode()})}deploymentTransaction(){return getInternal(this).deployTx}getFunction(t){"string"!=typeof t&&(t=t.format());const e=buildWrappedMethod(this,t);return e}getEvent(t){"string"!=typeof t&&(t=t.format());return buildWrappedEvent(this,t)}async queryTransaction(t){throw new Error("@TODO")}async queryFilter(t,e,r){null==e&&(e=0);null==r&&(r="latest");const{addr:i,addrPromise:a}=getInternal(this);const o=i||await a;const{fragment:c,topics:l}=await getSubInfo(this,t);const u={address:o,topics:l,fromBlock:e,toBlock:r};const f=getProvider(this.runner);assert(f,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"});return(await f.getLogs(u)).map(t=>{let e=c;if(null==e)try{e=this.interface.getEvent(t.topics[0])}catch(r){}if(e)try{return new Ao(t,this.interface,e)}catch(r){return new bo(t,r)}return new po(t,f)})}async on(t,e){const r=await getSub(this,"on",t);r.listeners.push({listener:e,once:!1});r.start();return this}async once(t,e){const r=await getSub(this,"once",t);r.listeners.push({listener:e,once:!0});r.start();return this}async emit(t,...e){return await emit(this,t,e,null)}async listenerCount(t){if(t){const e=await hasSub(this,t);return e?e.listeners.length:0}const{subs:e}=getInternal(this);let r=0;for(const{listeners:i}of e.values())r+=i.length;return r}async listeners(t){if(t){const e=await hasSub(this,t);return e?e.listeners.map(({listener:t})=>t):[]}const{subs:e}=getInternal(this);let r=[];for(const{listeners:i}of e.values())r=r.concat(i.map(({listener:t})=>t));return r}async off(t,e){const r=await hasSub(this,t);if(!r)return this;if(e){const t=r.listeners.map(({listener:t})=>t).indexOf(e);t>=0&&r.listeners.splice(t,1)}if(null==e||0===r.listeners.length){r.stop();getInternal(this).subs.delete(r.tag)}return this}async removeAllListeners(t){if(t){const e=await hasSub(this,t);if(!e)return this;e.stop();getInternal(this).subs.delete(e.tag)}else{const{subs:t}=getInternal(this);for(const{tag:e,stop:r}of t.values()){r();t.delete(e)}}return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return await this.off(t,e)}static buildClass(e){class r extends t{constructor(t,r=null){super(t,e,r)}}return r}static from(t,e,r){null==r&&(r=null);const i=new this(t,e,r);return i}};let Ro=Oo;function _ContractBase(){return Ro}class So extends(_ContractBase()){}function getIpfsLink(t){t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):assertArgument(!1,"unsupported IPFS format","link",t);return`https://gateway.ipfs.io/ipfs/${t}`}class Uo{constructor(t){__publicField(this,"name");defineProperties(this,{name:t})}connect(t){return this}supportsCoinType(t){return!1}async encodeAddress(t,e){throw new Error("unsupported coin")}async decodeAddress(t,e){throw new Error("unsupported coin")}}const Lo=new RegExp("^(ipfs)://(.*)$","i");const Fo=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Lo,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];const Mo=class t{constructor(t,e,r){__privateAdd(this,te);__publicField(this,"provider");__publicField(this,"address");__publicField(this,"name");__privateAdd(this,Xt);__privateAdd(this,$t);defineProperties(this,{provider:t,address:e,name:r});__privateSet(this,Xt,null);__privateSet(this,$t,new So(e,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],t))}async supportsWildcard(){null==__privateGet(this,Xt)&&__privateSet(this,Xt,(async()=>{try{return await __privateGet(this,$t).supportsInterface("0x9061b923")}catch(t){if(isError(t,"CALL_EXCEPTION"))return!1;__privateSet(this,Xt,null);throw t}})());return await __privateGet(this,Xt)}async getAddress(t){null==t&&(t=60);if(60===t)try{const t=await __privateMethod(this,te,ee).call(this,"addr(bytes32)");return null==t||t===bs?null:t}catch(a){if(isError(a,"CALL_EXCEPTION"))return null;throw a}if(t>=0&&t<2147483648){let e=t+2147483648;const r=await __privateMethod(this,te,ee).call(this,"addr(bytes32,uint)",[e]);if(isHexString(r,20))return getAddress(r)}let e=null;for(const o of this.provider.plugins)if(o instanceof Uo&&o.supportsCoinType(t)){e=o;break}if(null==e)return null;const r=await __privateMethod(this,te,ee).call(this,"addr(bytes32,uint)",[t]);if(null==r||"0x"===r)return null;const i=await e.decodeAddress(t,r);if(null!=i)return i;assert(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${t})`,info:{coinType:t,data:r}})}async getText(t){const e=await __privateMethod(this,te,ee).call(this,"text(bytes32,string)",[t]);return null==e||"0x"===e?null:e}async getContentHash(){const t=await __privateMethod(this,te,ee).call(this,"contenthash(bytes32)");if(null==t||"0x"===t)return null;const e=t.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){const t="e3010170"===e[1]?"ipfs":"ipns";const r=parseInt(e[4],16);if(e[5].length===2*r)return`${t}://${encodeBase58("0x"+e[2])}`}const r=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&64===r[1].length)return`bzz://${r[1]}`;assert(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:t}})}async getAvatar(){const t=await this._getAvatar();return t.url}async _getAvatar(){const t=[{type:"name",value:this.name}];try{const i=await this.getText("avatar");if(null==i){t.push({type:"!avatar",value:""});return{url:null,linkage:t}}t.push({type:"avatar",value:i});for(let a=0;a<Fo.length;a++){const o=i.match(Fo[a]);if(null==o)continue;const c=o[1].toLowerCase();switch(c){case"https":case"data":t.push({type:"url",value:i});return{linkage:t,url:i};case"ipfs":{const e=getIpfsLink(i);t.push({type:"ipfs",value:i});t.push({type:"url",value:e});return{linkage:t,url:e}}case"erc721":case"erc1155":{const a="erc721"===c?"tokenURI(uint256)":"uri(uint256)";t.push({type:c,value:i});const l=await this.getAddress();if(null==l){t.push({type:"!owner",value:""});return{url:null,linkage:t}}const u=(o[2]||"").split("/");if(2!==u.length){t.push({type:`!${c}caip`,value:o[2]||""});return{url:null,linkage:t}}const f=u[1];const d=new So(u[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if("erc721"===c){const e=await d.ownerOf(f);if(l!==e){t.push({type:"!owner",value:e});return{url:null,linkage:t}}t.push({type:"owner",value:e})}else if("erc1155"===c){const e=await d.balanceOf(l,f);if(!e){t.push({type:"!balance",value:"0"});return{url:null,linkage:t}}t.push({type:"balance",value:e.toString()})}let g=await d[a](f);if(null==g||"0x"===g){t.push({type:"!metadata-url",value:""});return{url:null,linkage:t}}t.push({type:"metadata-url-base",value:g});if("erc1155"===c){g=g.replace("{id}",toBeHex(f,32).substring(2));t.push({type:"metadata-url-expanded",value:g})}g.match(/^ipfs:/i)&&(g=getIpfsLink(g));t.push({type:"metadata-url",value:g});let p={};const m=await new Hn(g).send();m.assertOk();try{p=m.bodyJson}catch(e){try{t.push({type:"!metadata",value:m.bodyText})}catch(r){const e=m.body;e&&t.push({type:"!metadata",value:hexlify(e)});return{url:null,linkage:t}}return{url:null,linkage:t}}if(!p){t.push({type:"!metadata",value:""});return{url:null,linkage:t}}t.push({type:"metadata",value:JSON.stringify(p)});let y=p.image;if("string"!=typeof y){t.push({type:"!imageUrl",value:""});return{url:null,linkage:t}}if(y.match(/^(https:\/\/|data:)/i));else{const e=y.match(Lo);if(null==e){t.push({type:"!imageUrl-ipfs",value:y});return{url:null,linkage:t}}t.push({type:"imageUrl-ipfs",value:y});y=getIpfsLink(y)}t.push({type:"url",value:y});return{linkage:t,url:y}}}}}catch(e){}return{linkage:t,url:null}}static async getEnsAddress(t){const e=await t.getNetwork();const r=e.getPlugin("org.ethers.plugins.network.Ens");assert(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:e}});return r.address}static async fromName(e,r){var i;let a=r;for(;;){if(""===a||"."===a)return null;if("eth"!==r&&"eth"===a)return null;const o=await __privateMethod(i=t,ne,re).call(i,e,a);if(null!=o){const i=new t(e,o,r);return a===r||await i.supportsWildcard()?i:null}a=a.split(".").slice(1).join(".")}}};Xt=new WeakMap;$t=new WeakMap;te=new WeakSet;ee=async function(t,e){e=(e||[]).slice();const r=__privateGet(this,$t).interface;e.unshift(namehash(this.name));let i=null;if(await this.supportsWildcard()){i=r.getFunction(t);assert(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:t}});e=[dnsEncode(this.name,255),r.encodeFunctionData(i,e)];t="resolve(bytes,bytes)"}e.push({enableCcipRead:!0});try{const a=await __privateGet(this,$t)[t](...e);return i?r.decodeFunctionResult(i,a)[0]:a}catch(a){if(!isError(a,"CALL_EXCEPTION"))throw a}return null};ne=new WeakSet;re=async function(t,e){const r=await Mo.getEnsAddress(t);try{const i=new So(r,["function resolver(bytes32) view returns (address)"],t);const a=await i.resolver(namehash(e),{enableCcipRead:!0});return a===bs?null:a}catch(i){throw i}return null};__privateAdd(Mo,ne);let Do=Mo;const Ho=BigInt(0);function allowNull(t,e){return function(r){return null==r?e:t(r)}}function arrayOf(t,e){return r=>{if(e&&null==r)return null;if(!Array.isArray(r))throw new Error("not an array");return r.map(e=>t(e))}}function object(t,e){return r=>{const i={};for(const o in t){let c=o;if(e&&o in e&&!(c in r))for(const t of e[o])if(t in r){c=t;break}try{const e=t[o](r[c]);void 0!==e&&(i[o]=e)}catch(a){const t=a instanceof Error?a.message:"not-an-error";assert(!1,`invalid value for value.${o} (${t})`,"BAD_DATA",{value:r})}}return i}}function formatBoolean(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}assertArgument(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function formatData(t){assertArgument(isHexString(t,!0),"invalid data","value",t);return t}function formatHash(t){assertArgument(isHexString(t,32),"invalid hash","value",t);return t}const Go=object({address:getAddress,blockHash:formatHash,blockNumber:getNumber,data:formatData,index:getNumber,removed:allowNull(formatBoolean,!1),topics:arrayOf(formatHash),transactionHash:formatHash,transactionIndex:getNumber},{index:["logIndex"]});function formatLog(t){return Go(t)}const _o=object({hash:allowNull(formatHash),parentHash:formatHash,parentBeaconBlockRoot:allowNull(formatHash,null),number:getNumber,timestamp:getNumber,nonce:allowNull(formatData),difficulty:getBigInt,gasLimit:getBigInt,gasUsed:getBigInt,stateRoot:allowNull(formatHash,null),receiptsRoot:allowNull(formatHash,null),blobGasUsed:allowNull(getBigInt,null),excessBlobGas:allowNull(getBigInt,null),miner:allowNull(getAddress),prevRandao:allowNull(formatHash,null),extraData:formatData,baseFeePerGas:allowNull(getBigInt)},{prevRandao:["mixHash"]});function formatBlock(t){const e=_o(t);e.transactions=t.transactions.map(t=>"string"==typeof t?t:formatTransactionResponse(t));return e}const Qo=object({transactionIndex:getNumber,blockNumber:getNumber,transactionHash:formatHash,address:getAddress,topics:arrayOf(formatHash),data:formatData,index:getNumber,blockHash:formatHash},{index:["logIndex"]});function formatReceiptLog(t){return Qo(t)}const zo=object({to:allowNull(getAddress,null),from:allowNull(getAddress,null),contractAddress:allowNull(getAddress,null),index:getNumber,root:allowNull(hexlify),gasUsed:getBigInt,blobGasUsed:allowNull(getBigInt,null),logsBloom:allowNull(formatData),blockHash:formatHash,hash:formatHash,logs:arrayOf(formatReceiptLog),blockNumber:getNumber,cumulativeGasUsed:getBigInt,effectiveGasPrice:allowNull(getBigInt),blobGasPrice:allowNull(getBigInt,null),status:allowNull(getNumber),type:allowNull(getNumber,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function formatTransactionReceipt(t){return zo(t)}function formatTransactionResponse(t){t.to&&getBigInt(t.to)===Ho&&(t.to="0x0000000000000000000000000000000000000000");const e=object({hash:formatHash,index:allowNull(getNumber,void 0),type:t=>"0x"===t||null==t?0:getNumber(t),accessList:allowNull(accessListify,null),blobVersionedHashes:allowNull(arrayOf(formatHash,!0),null),authorizationList:allowNull(arrayOf(t=>{let e;if(t.signature)e=t.signature;else{let r=t.yParity;"0x1b"===r?r=0:"0x1c"===r&&(r=1);e=Object.assign({},t,{yParity:r})}return{address:getAddress(t.address),chainId:getBigInt(t.chainId),nonce:getBigInt(t.nonce),signature:Ts.from(e)}},!1),null),blockHash:allowNull(formatHash,null),blockNumber:allowNull(getNumber,null),transactionIndex:allowNull(getNumber,null),from:getAddress,gasPrice:allowNull(getBigInt),maxPriorityFeePerGas:allowNull(getBigInt),maxFeePerGas:allowNull(getBigInt),maxFeePerBlobGas:allowNull(getBigInt,null),gasLimit:getBigInt,to:allowNull(getAddress,null),value:getBigInt,nonce:getNumber,data:formatData,creates:allowNull(getAddress,null),chainId:allowNull(getBigInt,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);null==e.to&&null==e.creates&&(e.creates=getCreateAddress(e));1!==t.type&&2!==t.type||null!=t.accessList||(e.accessList=[]);t.signature?e.signature=Ts.from(t.signature):e.signature=Ts.from(t);if(null==e.chainId){const t=e.signature.legacyChainId;null!=t&&(e.chainId=t)}e.blockHash&&getBigInt(e.blockHash)===Ho&&(e.blockHash=null);return e}const jo="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Vo{constructor(t){__publicField(this,"name");defineProperties(this,{name:t})}clone(){return new Vo(this.name)}}class Wo extends Vo{constructor(t,e){null==t&&(t=0);super(`org.ethers.network.plugins.GasCost#${t||0}`);__publicField(this,"effectiveBlock");__publicField(this,"txBase");__publicField(this,"txCreate");__publicField(this,"txDataZero");__publicField(this,"txDataNonzero");__publicField(this,"txAccessListStorageKey");__publicField(this,"txAccessListAddress");const r={effectiveBlock:t};function set(t,i){let a=(e||{})[t];null==a&&(a=i);assertArgument("number"==typeof a,`invalud value for ${t}`,"costs",e);r[t]=a}set("txBase",21e3);set("txCreate",32e3);set("txDataZero",4);set("txDataNonzero",16);set("txAccessListStorageKey",1900);set("txAccessListAddress",2400);defineProperties(this,r)}clone(){return new Wo(this.effectiveBlock,this)}}class Jo extends Vo{constructor(t,e){super("org.ethers.plugins.network.Ens");__publicField(this,"address");__publicField(this,"targetNetwork");defineProperties(this,{address:t||jo,targetNetwork:null==e?1:e})}clone(){return new Jo(this.address,this.targetNetwork)}}class Ko extends Vo{constructor(t,e){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");__privateAdd(this,se);__privateAdd(this,ie);__privateSet(this,se,t);__privateSet(this,ie,e)}get url(){return __privateGet(this,se)}get processFunc(){return __privateGet(this,ie)}clone(){return this}}se=new WeakMap;ie=new WeakMap;const qo=new Map;const Zo=class t{constructor(t,e){__privateAdd(this,ae);__privateAdd(this,oe);__privateAdd(this,ce);__privateSet(this,ae,t);__privateSet(this,oe,getBigInt(e));__privateSet(this,ce,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return __privateGet(this,ae)}set name(t){__privateSet(this,ae,t)}get chainId(){return __privateGet(this,oe)}set chainId(t){__privateSet(this,oe,getBigInt(t,"chainId"))}matches(t){if(null==t)return!1;if("string"==typeof t){try{return this.chainId===getBigInt(t)}catch(e){}return this.name===t}if("number"==typeof t||"bigint"==typeof t){try{return this.chainId===getBigInt(t)}catch(e){}return!1}if("object"==typeof t){if(null!=t.chainId){try{return this.chainId===getBigInt(t.chainId)}catch(e){}return!1}return null!=t.name&&this.name===t.name}return!1}get plugins(){return Array.from(__privateGet(this,ce).values())}attachPlugin(t){if(__privateGet(this,ce).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);__privateGet(this,ce).set(t.name,t.clone());return this}getPlugin(t){return __privateGet(this,ce).get(t)||null}getPlugins(t){return this.plugins.filter(e=>e.name.split("#")[0]===t)}clone(){const e=new t(this.name,this.chainId);this.plugins.forEach(t=>{e.attachPlugin(t.clone())});return e}computeIntrinsicGas(t){const e=this.getPlugin("org.ethers.plugins.network.GasCost")||new Wo;let r=e.txBase;null==t.to&&(r+=e.txCreate);if(t.data)for(let i=2;i<t.data.length;i+=2)"00"===t.data.substring(i,i+2)?r+=e.txDataZero:r+=e.txDataNonzero;if(t.accessList){const i=accessListify(t.accessList);for(const t in i)r+=e.txAccessListAddress+e.txAccessListStorageKey*i[t].storageKeys.length}return r}static from(e){injectCommonNetworks();if(null==e)return t.from("mainnet");"number"==typeof e&&(e=BigInt(e));if("string"==typeof e||"bigint"==typeof e){const r=qo.get(e);if(r)return r();if("bigint"==typeof e)return new t("unknown",e);assertArgument(!1,"unknown network","network",e)}if("function"==typeof e.clone){const t=e.clone();return t}if("object"==typeof e){assertArgument("string"==typeof e.name&&"number"==typeof e.chainId,"invalid network object name or chainId","network",e);const r=new t(e.name,e.chainId);(e.ensAddress||null!=e.ensNetwork)&&r.attachPlugin(new Jo(e.ensAddress,e.ensNetwork));return r}assertArgument(!1,"invalid network","network",e)}static register(t,e){"number"==typeof t&&(t=BigInt(t));const r=qo.get(t);r&&assertArgument(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",t);qo.set(t,e)}};ae=new WeakMap;oe=new WeakMap;ce=new WeakMap;let Yo=Zo;function parseUnits(t,e){const r=String(t);if(!r.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const i=r.split(".");1===i.length&&i.push("");if(2!==i.length)throw new Error(`invalid gwei value: ${t}`);for(;i[1].length<e;)i[1]+="0";if(i[1].length>9){let t=BigInt(i[1].substring(0,9));i[1].substring(9).match(/^0+$/)||t++;i[1]=t.toString()}return BigInt(i[0]+i[1])}function getGasStationPlugin(t){return new Ko(t,async(t,e,r)=>{r.setHeader("User-Agent","ethers");let i;try{const[e,a]=await Promise.all([r.send(),t()]);i=e;const o=i.bodyJson.standard;const c={gasPrice:a.gasPrice,maxFeePerGas:parseUnits(o.maxFee,9),maxPriorityFeePerGas:parseUnits(o.maxPriorityFee,9)};return c}catch(a){assert(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:a})}})}let Xo=!1;function injectCommonNetworks(){if(!Xo){Xo=!0;registerEth("mainnet",1,{ensNetwork:1,altNames:["homestead"]});registerEth("ropsten",3,{ensNetwork:3});registerEth("rinkeby",4,{ensNetwork:4});registerEth("goerli",5,{ensNetwork:5});registerEth("kovan",42,{ensNetwork:42});registerEth("sepolia",11155111,{ensNetwork:11155111});registerEth("holesky",17e3,{ensNetwork:17e3});registerEth("classic",61,{});registerEth("classicKotti",6,{});registerEth("arbitrum",42161,{ensNetwork:1});registerEth("arbitrum-goerli",421613,{});registerEth("arbitrum-sepolia",421614,{});registerEth("base",8453,{ensNetwork:1});registerEth("base-goerli",84531,{});registerEth("base-sepolia",84532,{});registerEth("bnb",56,{ensNetwork:1});registerEth("bnbt",97,{});registerEth("linea",59144,{ensNetwork:1});registerEth("linea-goerli",59140,{});registerEth("linea-sepolia",59141,{});registerEth("matic",137,{ensNetwork:1,plugins:[getGasStationPlugin("https://gasstation.polygon.technology/v2")]});registerEth("matic-amoy",80002,{});registerEth("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[getGasStationPlugin("https://gasstation-testnet.polygon.technology/v2")]});registerEth("optimism",10,{ensNetwork:1,plugins:[]});registerEth("optimism-goerli",420,{});registerEth("optimism-sepolia",11155420,{});registerEth("xdai",100,{ensNetwork:1})}function registerEth(t,e,r){const func=function(){const i=new Yo(t,e);null!=r.ensNetwork&&i.attachPlugin(new Jo(null,r.ensNetwork));i.attachPlugin(new Wo);(r.plugins||[]).forEach(t=>{i.attachPlugin(t)});return i};Yo.register(t,func);Yo.register(e,func);r.altNames&&r.altNames.forEach(t=>{Yo.register(t,func)})}}function copy$2(t){return JSON.parse(JSON.stringify(t))}class $o{constructor(t){__privateAdd(this,de);__privateAdd(this,le);__privateAdd(this,ue);__privateAdd(this,he);__privateAdd(this,fe);__privateSet(this,le,t);__privateSet(this,ue,null);__privateSet(this,he,4e3);__privateSet(this,fe,-2)}get pollingInterval(){return __privateGet(this,he)}set pollingInterval(t){__privateSet(this,he,t)}start(){if(!__privateGet(this,ue)){__privateSet(this,ue,__privateGet(this,le)._setTimeout(__privateMethod(this,de,ge).bind(this),__privateGet(this,he)));__privateMethod(this,de,ge).call(this)}}stop(){if(__privateGet(this,ue)){__privateGet(this,le)._clearTimeout(__privateGet(this,ue));__privateSet(this,ue,null)}}pause(t){this.stop();t&&__privateSet(this,fe,-2)}resume(){this.start()}}le=new WeakMap;ue=new WeakMap;he=new WeakMap;fe=new WeakMap;de=new WeakSet;ge=async function(){try{const t=await __privateGet(this,le).getBlockNumber();if(-2===__privateGet(this,fe)){__privateSet(this,fe,t);return}if(t!==__privateGet(this,fe)){for(let e=__privateGet(this,fe)+1;e<=t;e++){if(null==__privateGet(this,ue))return;await __privateGet(this,le).emit("block",e)}__privateSet(this,fe,t)}}catch(t){}null!=__privateGet(this,ue)&&__privateSet(this,ue,__privateGet(this,le)._setTimeout(__privateMethod(this,de,ge).bind(this),__privateGet(this,he)))};class tc{constructor(t){__privateAdd(this,pe);__privateAdd(this,me);__privateAdd(this,ye);__privateSet(this,pe,t);__privateSet(this,ye,!1);__privateSet(this,me,t=>{this._poll(t,__privateGet(this,pe))})}async _poll(t,e){throw new Error("sub-classes must override this")}start(){if(!__privateGet(this,ye)){__privateSet(this,ye,!0);__privateGet(this,me).call(this,-2);__privateGet(this,pe).on("block",__privateGet(this,me))}}stop(){if(__privateGet(this,ye)){__privateSet(this,ye,!1);__privateGet(this,pe).off("block",__privateGet(this,me))}}pause(t){this.stop()}resume(){this.start()}}pe=new WeakMap;me=new WeakMap;ye=new WeakMap;class ec extends tc{constructor(t,e){super(t);__privateAdd(this,we);__privateAdd(this,Ae);__privateSet(this,we,e);__privateSet(this,Ae,-2)}pause(t){t&&__privateSet(this,Ae,-2);super.pause(t)}async _poll(t,e){const r=await e.getBlock(__privateGet(this,we));if(null!=r)if(-2===__privateGet(this,Ae))__privateSet(this,Ae,r.number);else if(r.number>__privateGet(this,Ae)){e.emit(__privateGet(this,we),r.number);__privateSet(this,Ae,r.number)}}}we=new WeakMap;Ae=new WeakMap;class nc extends tc{constructor(t,e){super(t);__privateAdd(this,be);__privateSet(this,be,copy$2(e))}async _poll(t,e){throw new Error("@TODO")}}be=new WeakMap;class rc extends tc{constructor(t,e){super(t);__privateAdd(this,Ee);__privateSet(this,Ee,e)}async _poll(t,e){const r=await e.getTransactionReceipt(__privateGet(this,Ee));r&&e.emit(__privateGet(this,Ee),r)}}Ee=new WeakMap;class sc{constructor(t,e){__privateAdd(this,Ne);__privateAdd(this,ve);__privateAdd(this,ke);__privateAdd(this,Be);__privateAdd(this,xe);__privateAdd(this,Pe);__privateSet(this,ve,t);__privateSet(this,ke,copy$2(e));__privateSet(this,Be,__privateMethod(this,Ne,Ie).bind(this));__privateSet(this,xe,!1);__privateSet(this,Pe,-2)}start(){if(!__privateGet(this,xe)){__privateSet(this,xe,!0);-2===__privateGet(this,Pe)&&__privateGet(this,ve).getBlockNumber().then(t=>{__privateSet(this,Pe,t)});__privateGet(this,ve).on("block",__privateGet(this,Be))}}stop(){if(__privateGet(this,xe)){__privateSet(this,xe,!1);__privateGet(this,ve).off("block",__privateGet(this,Be))}}pause(t){this.stop();t&&__privateSet(this,Pe,-2)}resume(){this.start()}}ve=new WeakMap;ke=new WeakMap;Be=new WeakMap;xe=new WeakMap;Pe=new WeakMap;Ne=new WeakSet;Ie=async function(t){if(-2===__privateGet(this,Pe))return;const e=copy$2(__privateGet(this,ke));e.fromBlock=__privateGet(this,Pe)+1;e.toBlock=t;const r=await __privateGet(this,ve).getLogs(e);if(0!==r.length)for(const i of r){__privateGet(this,ve).emit(__privateGet(this,ke),i);__privateSet(this,Pe,i.blockNumber)}else __privateGet(this,Pe)<t-60&&__privateSet(this,Pe,t-60)};const ic=BigInt(2);const ac=10;function isPromise(t){return t&&"function"==typeof t.then}function getTag(t,e){return t+":"+JSON.stringify(e,(t,e)=>{if(null==e)return"null";if("bigint"==typeof e)return`bigint:${e.toString()}`;if("string"==typeof e)return e.toLowerCase();if("object"==typeof e&&!Array.isArray(e)){const t=Object.keys(e);t.sort();return t.reduce((t,r)=>{t[r]=e[r];return t},{})}return e})}class oc{constructor(t){__publicField(this,"name");defineProperties(this,{name:t})}start(){}stop(){}pause(t){}resume(){}}function copy$1(t){return JSON.parse(JSON.stringify(t))}function concisify(t){t=Array.from(new Set(t).values());t.sort();return t}async function getSubscription(t,e){if(null==t)throw new Error("invalid event");Array.isArray(t)&&(t={topics:t});if("string"==typeof t)switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(isHexString(t,32)){const e=t.toLowerCase();return{type:"transaction",tag:getTag("tx",{hash:e}),hash:e}}if(t.orphan){const e=t;return{type:"orphan",tag:getTag("orphan",e),filter:copy$1(e)}}if(t.address||t.topics){const r=t;const i={topics:(r.topics||[]).map(t=>null==t?null:Array.isArray(t)?concisify(t.map(t=>t.toLowerCase())):t.toLowerCase())};if(r.address){const t=[];const a=[];const addAddress=r=>{isHexString(r)?t.push(r):a.push((async()=>{t.push(await resolveAddress(r,e))})())};Array.isArray(r.address)?r.address.forEach(addAddress):addAddress(r.address);a.length&&await Promise.all(a);i.address=concisify(t.map(t=>t.toLowerCase()))}return{filter:i,tag:getTag("event",i),type:"event"}}assertArgument(!1,"unknown ProviderEvent","event",t)}function getTime(){return(new Date).getTime()}const cc={cacheTimeout:250,pollingInterval:4e3};class lc{constructor(t,e){__privateAdd(this,_e);__privateAdd(this,Ce);__privateAdd(this,Te);__privateAdd(this,Oe);__privateAdd(this,Re);__privateAdd(this,Se);__privateAdd(this,Ue);__privateAdd(this,Le);__privateAdd(this,Fe);__privateAdd(this,Me);__privateAdd(this,De);__privateAdd(this,He);__privateAdd(this,Ge);__privateSet(this,Ge,Object.assign({},cc,e||{}));if("any"===t){__privateSet(this,Ue,!0);__privateSet(this,Se,null)}else if(t){const e=Yo.from(t);__privateSet(this,Ue,!1);__privateSet(this,Se,Promise.resolve(e));setTimeout(()=>{this.emit("network",e,null)},0)}else{__privateSet(this,Ue,!1);__privateSet(this,Se,null)}__privateSet(this,Fe,-1);__privateSet(this,Le,new Map);__privateSet(this,Ce,new Map);__privateSet(this,Te,new Map);__privateSet(this,Oe,null);__privateSet(this,Re,!1);__privateSet(this,Me,1);__privateSet(this,De,new Map);__privateSet(this,He,!1)}get pollingInterval(){return __privateGet(this,Ge).pollingInterval}get provider(){return this}get plugins(){return Array.from(__privateGet(this,Te).values())}attachPlugin(t){if(__privateGet(this,Te).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);__privateGet(this,Te).set(t.name,t.connect(this));return this}getPlugin(t){return __privateGet(this,Te).get(t)||null}get disableCcipRead(){return __privateGet(this,He)}set disableCcipRead(t){__privateSet(this,He,!!t)}async ccipReadFetch(t,e,r){if(this.disableCcipRead||0===r.length||null==t.to)return null;const i=t.to.toLowerCase();const a=e.toLowerCase();const o=[];for(let l=0;l<r.length;l++){const e=r[l];const u=e.replace("{sender}",i).replace("{data}",a);const f=new Hn(u);-1===e.indexOf("{data}")&&(f.body={data:a,sender:i});this.emit("debug",{action:"sendCcipReadFetchRequest",request:f,index:l,urls:r});let d="unknown error";let g;try{g=await f.send()}catch(c){o.push(c.message);this.emit("debug",{action:"receiveCcipReadFetchError",request:f,result:{error:c}});continue}try{const t=g.bodyJson;if(t.data){this.emit("debug",{action:"receiveCcipReadFetchResult",request:f,result:t});return t.data}t.message&&(d=t.message);this.emit("debug",{action:"receiveCcipReadFetchError",request:f,result:t})}catch(c){}assert(g.statusCode<400||g.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:t,info:{url:e,errorMessage:d}});o.push(d)}assert(!1,`error encountered during CCIP fetch: ${o.map(t=>JSON.stringify(t)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:t,info:{urls:r,errorMessages:o}})}_wrapBlock(t,e){return new go(formatBlock(t),this)}_wrapLog(t,e){return new po(formatLog(t),this)}_wrapTransactionReceipt(t,e){return new mo(formatTransactionReceipt(t),this)}_wrapTransactionResponse(t,e){return new wo(formatTransactionResponse(t),this)}_detectNetwork(){assert(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(t){assert(!1,`unsupported method: ${t.method}`,"UNSUPPORTED_OPERATION",{operation:t.method,info:t})}async getBlockNumber(){const t=getNumber(await __privateMethod(this,_e,Qe).call(this,{method:"getBlockNumber"}),"%response");__privateGet(this,Fe)>=0&&__privateSet(this,Fe,t);return t}_getAddress(t){return resolveAddress(t,this)}_getBlockTag(t){if(null==t)return"latest";switch(t){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return t}if(isHexString(t))return isHexString(t,32)?t:toQuantity(t);"bigint"==typeof t&&(t=getNumber(t,"blockTag"));if("number"==typeof t)return t>=0?toQuantity(t):__privateGet(this,Fe)>=0?toQuantity(__privateGet(this,Fe)+t):this.getBlockNumber().then(e=>toQuantity(e+t));assertArgument(!1,"invalid blockTag","blockTag",t)}_getFilter(t){const e=(t.topics||[]).map(t=>null==t?null:Array.isArray(t)?concisify(t.map(t=>t.toLowerCase())):t.toLowerCase());const r="blockHash"in t?t.blockHash:void 0;const resolve=(t,i,a)=>{let o;switch(t.length){case 0:break;case 1:o=t[0];break;default:t.sort();o=t}if(r&&(null!=i||null!=a))throw new Error("invalid filter");const c={};o&&(c.address=o);e.length&&(c.topics=e);i&&(c.fromBlock=i);a&&(c.toBlock=a);r&&(c.blockHash=r);return c};let i=[];if(t.address)if(Array.isArray(t.address))for(const c of t.address)i.push(this._getAddress(c));else i.push(this._getAddress(t.address));let a;"fromBlock"in t&&(a=this._getBlockTag(t.fromBlock));let o;"toBlock"in t&&(o=this._getBlockTag(t.toBlock));return i.filter(t=>"string"!=typeof t).length||null!=a&&"string"!=typeof a||null!=o&&"string"!=typeof o?Promise.all([Promise.all(i),a,o]).then(t=>resolve(t[0],t[1],t[2])):resolve(i,a,o)}_getTransactionRequest(t){const e=copyRequest(t);const r=[];["to","from"].forEach(t=>{if(null==e[t])return;const i=resolveAddress(e[t],this);isPromise(i)?r.push(async function(){e[t]=await i}()):e[t]=i});if(null!=e.blockTag){const t=this._getBlockTag(e.blockTag);isPromise(t)?r.push(async function(){e.blockTag=await t}()):e.blockTag=t}return r.length?async function(){await Promise.all(r);return e}():e}async getNetwork(){if(null==__privateGet(this,Se)){const t=(async()=>{try{const t=await this._detectNetwork();this.emit("network",t,null);return t}catch(e){__privateGet(this,Se)===t&&__privateSet(this,Se,null);throw e}})();__privateSet(this,Se,t);return(await t).clone()}const t=__privateGet(this,Se);const[e,r]=await Promise.all([t,this._detectNetwork()]);if(e.chainId!==r.chainId)if(__privateGet(this,Ue)){this.emit("network",r,e);__privateGet(this,Se)===t&&__privateSet(this,Se,Promise.resolve(r))}else assert(!1,`network changed: ${e.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"});return e.clone()}async getFeeData(){const t=await this.getNetwork();const getFeeDataFunc=async()=>{const{_block:e,gasPrice:r,priorityFee:i}=await resolveProperties({_block:__privateMethod(this,_e,We).call(this,"latest",!1),gasPrice:(async()=>{try{const t=await __privateMethod(this,_e,Qe).call(this,{method:"getGasPrice"});return getBigInt(t,"%response")}catch(t){}return null})(),priorityFee:(async()=>{try{const t=await __privateMethod(this,_e,Qe).call(this,{method:"getPriorityFee"});return getBigInt(t,"%response")}catch(t){}return null})()});let a=null;let o=null;const c=this._wrapBlock(e,t);if(c&&c.baseFeePerGas){o=null!=i?i:BigInt("1000000000");a=c.baseFeePerGas*ic+o}return new fo(r,a,o)};const e=t.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(e){const t=new Hn(e.url);const r=await e.processFunc(getFeeDataFunc,this,t);return new fo(r.gasPrice,r.maxFeePerGas,r.maxPriorityFeePerGas)}return await getFeeDataFunc()}async estimateGas(t){let e=this._getTransactionRequest(t);isPromise(e)&&(e=await e);return getBigInt(await __privateMethod(this,_e,Qe).call(this,{method:"estimateGas",transaction:e}),"%response")}async call(t){const{tx:e,blockTag:r}=await resolveProperties({tx:this._getTransactionRequest(t),blockTag:this._getBlockTag(t.blockTag)});return await __privateMethod(this,_e,je).call(this,__privateMethod(this,_e,ze).call(this,e,r,t.enableCcipRead?0:-1))}async getBalance(t,e){return getBigInt(await __privateMethod(this,_e,Ve).call(this,{method:"getBalance"},t,e),"%response")}async getTransactionCount(t,e){return getNumber(await __privateMethod(this,_e,Ve).call(this,{method:"getTransactionCount"},t,e),"%response")}async getCode(t,e){return hexlify(await __privateMethod(this,_e,Ve).call(this,{method:"getCode"},t,e))}async getStorage(t,e,r){const i=getBigInt(e,"position");return hexlify(await __privateMethod(this,_e,Ve).call(this,{method:"getStorage",position:i},t,r))}async broadcastTransaction(t){const{blockNumber:e,hash:r,network:i}=await resolveProperties({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:t}),network:this.getNetwork()});const a=hi.from(t);if(a.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(a,i).replaceableTransaction(e)}async getBlock(t,e){const{network:r,params:i}=await resolveProperties({network:this.getNetwork(),params:__privateMethod(this,_e,We).call(this,t,!!e)});return null==i?null:this._wrapBlock(i,r)}async getTransaction(t){const{network:e,params:r}=await resolveProperties({network:this.getNetwork(),params:__privateMethod(this,_e,Qe).call(this,{method:"getTransaction",hash:t})});return null==r?null:this._wrapTransactionResponse(r,e)}async getTransactionReceipt(t){const{network:e,params:r}=await resolveProperties({network:this.getNetwork(),params:__privateMethod(this,_e,Qe).call(this,{method:"getTransactionReceipt",hash:t})});if(null==r)return null;if(null==r.gasPrice&&null==r.effectiveGasPrice){const e=await __privateMethod(this,_e,Qe).call(this,{method:"getTransaction",hash:t});if(null==e)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=e.gasPrice}return this._wrapTransactionReceipt(r,e)}async getTransactionResult(t){const{result:e}=await resolveProperties({network:this.getNetwork(),result:__privateMethod(this,_e,Qe).call(this,{method:"getTransactionResult",hash:t})});return null==e?null:hexlify(e)}async getLogs(t){let e=this._getFilter(t);isPromise(e)&&(e=await e);const{network:r,params:i}=await resolveProperties({network:this.getNetwork(),params:__privateMethod(this,_e,Qe).call(this,{method:"getLogs",filter:e})});return i.map(t=>this._wrapLog(t,r))}_getProvider(t){assert(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(t){return await Do.fromName(this,t)}async getAvatar(t){const e=await this.getResolver(t);return e?await e.getAvatar():null}async resolveName(t){const e=await this.getResolver(t);return e?await e.getAddress():null}async lookupAddress(t){t=getAddress(t);const e=namehash(t.substring(2).toLowerCase()+".addr.reverse");try{const r=await Do.getEnsAddress(this);const i=new So(r,["function resolver(bytes32) view returns (address)"],this);const a=await i.resolver(e);if(null==a||a===bs)return null;const o=new So(a,["function name(bytes32) view returns (string)"],this);const c=await o.name(e);const l=await this.resolveName(c);return l!==t?null:c}catch(r){if(isError(r,"BAD_DATA")&&"0x"===r.value)return null;if(isError(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(t,e,r){const i=null!=e?e:1;return 0===i?this.getTransactionReceipt(t):new Promise(async(e,a)=>{let o=null;const listener=async r=>{try{const a=await this.getTransactionReceipt(t);if(null!=a&&r-a.blockNumber+1>=i){e(a);if(o){clearTimeout(o);o=null}return}}catch(a){console.log("EEE",a)}this.once("block",listener)};null!=r&&(o=setTimeout(()=>{if(null!=o){o=null;this.off("block",listener);a(makeError("timeout","TIMEOUT",{reason:"timeout"}))}},r));listener(await this.getBlockNumber())})}async waitForBlock(t){assert(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(t){const e=__privateGet(this,De).get(t);if(e){e.timer&&clearTimeout(e.timer);__privateGet(this,De).delete(t)}}_setTimeout(t,e){null==e&&(e=0);const r=__privateWrapper(this,Me)._++;const func=()=>{__privateGet(this,De).delete(r);t()};if(this.paused)__privateGet(this,De).set(r,{timer:null,func:func,time:e});else{const t=setTimeout(func,e);__privateGet(this,De).set(r,{timer:t,func:func,time:getTime()})}return r}_forEachSubscriber(t){for(const e of __privateGet(this,Ce).values())t(e.subscriber)}_getSubscriber(t){switch(t.type){case"debug":case"error":case"network":return new oc(t.type);case"block":{const t=new $o(this);t.pollingInterval=this.pollingInterval;return t}case"safe":case"finalized":return new ec(this,t.type);case"event":return new sc(this,t.filter);case"transaction":return new rc(this,t.hash);case"orphan":return new nc(this,t.filter)}throw new Error(`unsupported event: ${t.type}`)}_recoverSubscriber(t,e){for(const r of __privateGet(this,Ce).values())if(r.subscriber===t){r.started&&r.subscriber.stop();r.subscriber=e;r.started&&e.start();null!=__privateGet(this,Oe)&&e.pause(__privateGet(this,Oe));break}}async on(t,e){const r=await __privateMethod(this,_e,Ke).call(this,t);r.listeners.push({listener:e,once:!1});if(!r.started){r.subscriber.start();r.started=!0;null!=__privateGet(this,Oe)&&r.subscriber.pause(__privateGet(this,Oe))}return this}async once(t,e){const r=await __privateMethod(this,_e,Ke).call(this,t);r.listeners.push({listener:e,once:!0});if(!r.started){r.subscriber.start();r.started=!0;null!=__privateGet(this,Oe)&&r.subscriber.pause(__privateGet(this,Oe))}return this}async emit(t,...e){const r=await __privateMethod(this,_e,Je).call(this,t,e);if(!r||0===r.listeners.length)return!1;const i=r.listeners.length;r.listeners=r.listeners.filter(({listener:r,once:i})=>{const a=new Nn(this,i?null:r,t);try{r.call(this,...e,a)}catch(o){}return!i});if(0===r.listeners.length){r.started&&r.subscriber.stop();__privateGet(this,Ce).delete(r.tag)}return i>0}async listenerCount(t){if(t){const e=await __privateMethod(this,_e,Je).call(this,t);return e?e.listeners.length:0}let e=0;for(const{listeners:r}of __privateGet(this,Ce).values())e+=r.length;return e}async listeners(t){if(t){const e=await __privateMethod(this,_e,Je).call(this,t);return e?e.listeners.map(({listener:t})=>t):[]}let e=[];for(const{listeners:r}of __privateGet(this,Ce).values())e=e.concat(r.map(({listener:t})=>t));return e}async off(t,e){const r=await __privateMethod(this,_e,Je).call(this,t);if(!r)return this;if(e){const t=r.listeners.map(({listener:t})=>t).indexOf(e);t>=0&&r.listeners.splice(t,1)}if(!e||0===r.listeners.length){r.started&&r.subscriber.stop();__privateGet(this,Ce).delete(r.tag)}return this}async removeAllListeners(t){if(t){const{tag:e,started:r,subscriber:i}=await __privateMethod(this,_e,Ke).call(this,t);r&&i.stop();__privateGet(this,Ce).delete(e)}else for(const[e,{started:r,subscriber:i}]of __privateGet(this,Ce)){r&&i.stop();__privateGet(this,Ce).delete(e)}return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return this.off(t,e)}get destroyed(){return __privateGet(this,Re)}destroy(){this.removeAllListeners();for(const t of __privateGet(this,De).keys())this._clearTimeout(t);__privateSet(this,Re,!0)}get paused(){return null!=__privateGet(this,Oe)}set paused(t){!!t!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(t){__privateSet(this,Fe,-1);if(null!=__privateGet(this,Oe)){if(__privateGet(this,Oe)==!!t)return;assert(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(e=>e.pause(t));__privateSet(this,Oe,!!t);for(const e of __privateGet(this,De).values()){e.timer&&clearTimeout(e.timer);e.time=getTime()-e.time}}resume(){if(null!=__privateGet(this,Oe)){this._forEachSubscriber(t=>t.resume());__privateSet(this,Oe,null);for(const t of __privateGet(this,De).values()){let e=t.time;e<0&&(e=0);t.time=getTime();setTimeout(t.func,e)}}}}Ce=new WeakMap;Te=new WeakMap;Oe=new WeakMap;Re=new WeakMap;Se=new WeakMap;Ue=new WeakMap;Le=new WeakMap;Fe=new WeakMap;Me=new WeakMap;De=new WeakMap;He=new WeakMap;Ge=new WeakMap;_e=new WeakSet;Qe=async function(t){const e=__privateGet(this,Ge).cacheTimeout;if(e<0)return await this._perform(t);const r=getTag(t.method,t);let i=__privateGet(this,Le).get(r);if(!i){i=this._perform(t);__privateGet(this,Le).set(r,i);setTimeout(()=>{__privateGet(this,Le).get(r)===i&&__privateGet(this,Le).delete(r)},e)}return await i};ze=async function(t,e,r){assert(r<ac,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},t,{blockTag:e,enableCcipRead:!0})});const i=copyRequest(t);try{return hexlify(await this._perform({method:"call",transaction:i,blockTag:e}))}catch(a){if(!this.disableCcipRead&&isCallException(a)&&a.data&&r>=0&&"latest"===e&&null!=i.to&&"0x556f1830"===dataSlice(a.data,0,4)){const t=a.data;const c=await resolveAddress(i.to,this);let l;try{l=parseOffchainLookup(dataSlice(a.data,4))}catch(o){assert(!1,o.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:t}})}assert(l.sender.toLowerCase()===c.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:t,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:l.errorArgs}});const u=await this.ccipReadFetch(i,l.calldata,l.urls);assert(null!=u,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:a.data,errorArgs:l.errorArgs}});const f={to:c,data:concat([l.selector,encodeBytes([u,l.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:f});try{const t=await __privateMethod(this,_e,ze).call(this,f,e,r+1);this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},f),result:t});return t}catch(o){this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},f),error:o});throw o}}throw a}};je=async function(t){const{value:e}=await resolveProperties({network:this.getNetwork(),value:t});return e};Ve=async function(t,e,r){let i=this._getAddress(e);let a=this._getBlockTag(r);"string"==typeof i&&"string"==typeof a||([i,a]=await Promise.all([i,a]));return await __privateMethod(this,_e,je).call(this,__privateMethod(this,_e,Qe).call(this,Object.assign(t,{address:i,blockTag:a})))};We=async function(t,e){if(isHexString(t,32))return await __privateMethod(this,_e,Qe).call(this,{method:"getBlock",blockHash:t,includeTransactions:e});let r=this._getBlockTag(t);"string"!=typeof r&&(r=await r);return await __privateMethod(this,_e,Qe).call(this,{method:"getBlock",blockTag:r,includeTransactions:e})};Je=async function(t,e){let r=await getSubscription(t,this);"event"===r.type&&e&&e.length>0&&!0===e[0].removed&&(r=await getSubscription({orphan:"drop-log",log:e[0]},this));return __privateGet(this,Ce).get(r.tag)||null};Ke=async function(t){const e=await getSubscription(t,this);const r=e.tag;let i=__privateGet(this,Ce).get(r);if(!i){const t=this._getSubscriber(e);const a=new WeakMap;const o=new Map;i={subscriber:t,tag:r,addressableMap:a,nameMap:o,started:!1,listeners:[]};__privateGet(this,Ce).set(r,i)}return i};function _parseString(t,e){try{const r=_parseBytes(t,e);if(r)return toUtf8String(r)}catch(r){}return null}function _parseBytes(t,e){if("0x"===t)return null;try{const r=getNumber(dataSlice(t,e,e+32));const i=getNumber(dataSlice(t,r,r+32));return dataSlice(t,r+32,r+32+i)}catch(r){}return null}function numPad(t){const e=toBeArray(t);if(e.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);r.set(e,32-e.length);return r}function bytesPad(t){if(t.length%32==0)return t;const e=new Uint8Array(32*Math.ceil(t.length/32));e.set(t);return e}const uc=new Uint8Array([]);function encodeBytes(t){const e=[];let r=0;for(let i=0;i<t.length;i++){e.push(uc);r+=32}for(let i=0;i<t.length;i++){const a=getBytes(t[i]);e[i]=numPad(r);e.push(numPad(a.length));e.push(bytesPad(a));r+=32+32*Math.ceil(a.length/32)}return concat(e)}const hc="0x0000000000000000000000000000000000000000000000000000000000000000";function parseOffchainLookup(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};assert(dataLength(t)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const r=dataSlice(t,0,32);assert(dataSlice(r,0,12)===dataSlice(hc,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"});e.sender=dataSlice(r,12);try{const r=[];const i=getNumber(dataSlice(t,32,64));const a=getNumber(dataSlice(t,i,i+32));const o=dataSlice(t,i+32);for(let t=0;t<a;t++){const e=_parseString(o,32*t);if(null==e)throw new Error("abort");r.push(e)}e.urls=r}catch(i){assert(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=_parseBytes(t,64);if(null==r)throw new Error("abort");e.calldata=r}catch(i){assert(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}assert(dataSlice(t,100,128)===dataSlice(hc,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"});e.selector=dataSlice(t,96,100);try{const r=_parseBytes(t,128);if(null==r)throw new Error("abort");e.extraData=r}catch(i){assert(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(t=>e[t]);return e}function checkProvider(t,e){if(t.provider)return t.provider;assert(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function populate(t,e){let r=copyRequest(e);null!=r.to&&(r.to=resolveAddress(r.to,t));if(null!=r.from){const e=r.from;r.from=Promise.all([t.getAddress(),resolveAddress(e,t)]).then(([t,e])=>{assertArgument(t.toLowerCase()===e.toLowerCase(),"transaction from mismatch","tx.from",e);return t})}else r.from=t.getAddress();return await resolveProperties(r)}class fc{constructor(t){__publicField(this,"provider");defineProperties(this,{provider:t||null})}async getNonce(t){return checkProvider(this,"getTransactionCount").getTransactionCount(await this.getAddress(),t)}async populateCall(t){const e=await populate(this,t);return e}async populateTransaction(t){const e=checkProvider(this,"populateTransaction");const r=await populate(this,t);null==r.nonce&&(r.nonce=await this.getNonce("pending"));null==r.gasLimit&&(r.gasLimit=await this.estimateGas(r));const i=await this.provider.getNetwork();if(null!=r.chainId){const e=getBigInt(r.chainId);assertArgument(e===i.chainId,"transaction chainId mismatch","tx.chainId",t.chainId)}else r.chainId=i.chainId;const a=null!=r.maxFeePerGas||null!=r.maxPriorityFeePerGas;null==r.gasPrice||2!==r.type&&!a?0!==r.type&&1!==r.type||!a||assertArgument(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",t):assertArgument(!1,"eip-1559 transaction do not support gasPrice","tx",t);if(2!==r.type&&null!=r.type||null==r.maxFeePerGas||null==r.maxPriorityFeePerGas)if(0===r.type||1===r.type){const t=await e.getFeeData();assert(null!=t.gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"});null==r.gasPrice&&(r.gasPrice=t.gasPrice)}else{const t=await e.getFeeData();if(null==r.type)if(null!=t.maxFeePerGas&&null!=t.maxPriorityFeePerGas){r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2;if(null!=r.gasPrice){const t=r.gasPrice;delete r.gasPrice;r.maxFeePerGas=t;r.maxPriorityFeePerGas=t}else{null==r.maxFeePerGas&&(r.maxFeePerGas=t.maxFeePerGas);null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=t.maxPriorityFeePerGas)}}else if(null!=t.gasPrice){assert(!a,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"});null==r.gasPrice&&(r.gasPrice=t.gasPrice);r.type=0}else assert(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else if(2===r.type||3===r.type||4===r.type){null==r.maxFeePerGas&&(r.maxFeePerGas=t.maxFeePerGas);null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=t.maxPriorityFeePerGas)}}else r.type=2;return await resolveProperties(r)}async populateAuthorization(t){const e=Object.assign({},t);null==e.chainId&&(e.chainId=(await checkProvider(this,"getNetwork").getNetwork()).chainId);null==e.nonce&&(e.nonce=await this.getNonce());return e}async estimateGas(t){return checkProvider(this,"estimateGas").estimateGas(await this.populateCall(t))}async call(t){return checkProvider(this,"call").call(await this.populateCall(t))}async resolveName(t){const e=checkProvider(this,"resolveName");return await e.resolveName(t)}async sendTransaction(t){const e=checkProvider(this,"sendTransaction");const r=await this.populateTransaction(t);delete r.from;const i=hi.from(r);return await e.broadcastTransaction(await this.signTransaction(i))}authorize(t){assert(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function copy(t){return JSON.parse(JSON.stringify(t))}class dc{constructor(t){__privateAdd(this,en);__privateAdd(this,qe);__privateAdd(this,Ze);__privateAdd(this,Ye);__privateAdd(this,Xe);__privateAdd(this,$e);__privateAdd(this,tn);__privateSet(this,qe,t);__privateSet(this,Ze,null);__privateSet(this,Ye,__privateMethod(this,en,nn).bind(this));__privateSet(this,Xe,!1);__privateSet(this,$e,null);__privateSet(this,tn,!1)}_subscribe(t){throw new Error("subclasses must override this")}_emitResults(t,e){throw new Error("subclasses must override this")}_recover(t){throw new Error("subclasses must override this")}start(){if(!__privateGet(this,Xe)){__privateSet(this,Xe,!0);__privateMethod(this,en,nn).call(this,-2)}}stop(){if(__privateGet(this,Xe)){__privateSet(this,Xe,!1);__privateSet(this,tn,!0);__privateMethod(this,en,rn).call(this);__privateGet(this,qe).off("block",__privateGet(this,Ye))}}pause(t){t&&__privateMethod(this,en,rn).call(this);__privateGet(this,qe).off("block",__privateGet(this,Ye))}resume(){this.start()}}qe=new WeakMap;Ze=new WeakMap;Ye=new WeakMap;Xe=new WeakMap;$e=new WeakMap;tn=new WeakMap;en=new WeakSet;nn=async function(t){try{null==__privateGet(this,Ze)&&__privateSet(this,Ze,this._subscribe(__privateGet(this,qe)));let t=null;try{t=await __privateGet(this,Ze)}catch(e){if(!isError(e,"UNSUPPORTED_OPERATION")||"eth_newFilter"!==e.operation)throw e}if(null==t){__privateSet(this,Ze,null);__privateGet(this,qe)._recoverSubscriber(this,this._recover(__privateGet(this,qe)));return}const r=await __privateGet(this,qe).getNetwork();__privateGet(this,$e)||__privateSet(this,$e,r);if(__privateGet(this,$e).chainId!==r.chainId)throw new Error("chaid changed");if(__privateGet(this,tn))return;const i=await __privateGet(this,qe).send("eth_getFilterChanges",[t]);await this._emitResults(__privateGet(this,qe),i)}catch(e){console.log("@TODO",e)}__privateGet(this,qe).once("block",__privateGet(this,Ye))};rn=function(){const t=__privateGet(this,Ze);if(t){__privateSet(this,Ze,null);t.then(t=>{__privateGet(this,qe).destroyed||__privateGet(this,qe).send("eth_uninstallFilter",[t])})}};class gc extends dc{constructor(t,e){super(t);__privateAdd(this,sn);__privateSet(this,sn,copy(e))}_recover(t){return new sc(t,__privateGet(this,sn))}async _subscribe(t){const e=await t.send("eth_newFilter",[__privateGet(this,sn)]);return e}async _emitResults(t,e){for(const r of e)t.emit(__privateGet(this,sn),t._wrapLog(r,t._network))}}sn=new WeakMap;class pc extends dc{async _subscribe(t){return await t.send("eth_newPendingTransactionFilter",[])}async _emitResults(t,e){for(const r of e)t.emit("pending",r)}}const mc="bigint,boolean,function,number,string,symbol".split(/,/g);function deepCopy(t){if(null==t||mc.indexOf(typeof t)>=0)return t;if("function"==typeof t.getAddress)return t;if(Array.isArray(t))return t.map(deepCopy);if("object"==typeof t)return Object.keys(t).reduce((e,r)=>{e[r]=t[r];return e},{});throw new Error(`should not happen: ${t} (${typeof t})`)}function stall(t){return new Promise(e=>{setTimeout(e,t)})}function getLowerCase(t){return t?t.toLowerCase():t}function isPollable(t){return t&&"number"==typeof t.pollingInterval}const yc={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class wc extends fc{constructor(t,e){super(t);__publicField(this,"address");e=getAddress(e);defineProperties(this,{address:e})}connect(t){assert(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(t){return await this.populateCall(t)}async sendUncheckedTransaction(t){const e=deepCopy(t);const r=[];if(e.from){const i=e.from;r.push((async()=>{const r=await resolveAddress(i,this.provider);assertArgument(null!=r&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t);e.from=r})())}else e.from=this.address;null==e.gasLimit&&r.push((async()=>{e.gasLimit=await this.provider.estimateGas({...e,from:this.address})})());if(null!=e.to){const t=e.to;r.push((async()=>{e.to=await resolveAddress(t,this.provider)})())}r.length&&await Promise.all(r);const i=this.provider.getRpcTransaction(e);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(t){const e=await this.provider.getBlockNumber();const r=await this.sendUncheckedTransaction(t);return await new Promise((t,i)=>{const a=[1e3,100];let o=0;const checkTx=async()=>{try{const i=await this.provider.getTransaction(r);if(null!=i){t(i.replaceableTransaction(e));return}}catch(c){if(isError(c,"CANCELLED")||isError(c,"BAD_DATA")||isError(c,"NETWORK_ERROR")||isError(c,"UNSUPPORTED_OPERATION")){null==c.info&&(c.info={});c.info.sendTransactionHash=r;i(c);return}if(isError(c,"INVALID_ARGUMENT")){o++;null==c.info&&(c.info={});c.info.sendTransactionHash=r;if(o>10){i(c);return}}this.provider.emit("error",makeError("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:c}))}this.provider._setTimeout(()=>{checkTx()},a.pop()||4e3)};checkTx()})}async signTransaction(t){const e=deepCopy(t);if(e.from){const r=await resolveAddress(e.from,this.provider);assertArgument(null!=r&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t);e.from=r}else e.from=this.address;const r=this.provider.getRpcTransaction(e);return await this.provider.send("eth_signTransaction",[r])}async signMessage(t){const e="string"==typeof t?toUtf8Bytes(t):t;return await this.provider.send("personal_sign",[hexlify(e),this.address.toLowerCase()])}async signTypedData(t,e,r){const i=deepCopy(r);const a=await ua.resolveNames(t,e,i,async t=>{const e=await resolveAddress(t);assertArgument(null!=e,"TypedData does not support null address","value",t);return e});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(ua.getPayload(a.domain,e,a.value))])}async unlock(t){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),t,null])}async _legacySignMessage(t){const e="string"==typeof t?toUtf8Bytes(t):t;return await this.provider.send("eth_sign",[this.address.toLowerCase(),hexlify(e)])}}class Ac extends lc{constructor(t,e){super(t,e);__privateAdd(this,dn);__privateAdd(this,an);__privateAdd(this,on);__privateAdd(this,cn);__privateAdd(this,ln);__privateAdd(this,un);__privateAdd(this,hn);__privateAdd(this,fn);__privateSet(this,on,1);__privateSet(this,an,Object.assign({},yc,e||{}));__privateSet(this,cn,[]);__privateSet(this,ln,null);__privateSet(this,hn,null);__privateSet(this,fn,null);{let t=null;const e=new Promise(e=>{t=e});__privateSet(this,un,{promise:e,resolve:t})}const r=this._getOption("staticNetwork");if("boolean"==typeof r){assertArgument(!r||"any"!==t,"staticNetwork cannot be used on special network 'any'","options",e);r&&null!=t&&__privateSet(this,hn,Yo.from(t))}else if(r){assertArgument(null==t||r.matches(t),"staticNetwork MUST match network object","options",e);__privateSet(this,hn,r)}}_getOption(t){return __privateGet(this,an)[t]}get _network(){assert(__privateGet(this,hn),"network is not available yet","NETWORK_ERROR");return __privateGet(this,hn)}async _perform(t){if("call"===t.method||"estimateGas"===t.method){let e=t.transaction;if(e&&null!=e.type&&getBigInt(e.type)&&null==e.maxFeePerGas&&null==e.maxPriorityFeePerGas){const r=await this.getFeeData();null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas&&(t=Object.assign({},t,{transaction:Object.assign({},e,{type:void 0})}))}}const e=this.getRpcRequest(t);return null!=e?await this.send(e.method,e.args):super._perform(t)}async _detectNetwork(){const t=this._getOption("staticNetwork");if(t){if(!0!==t)return t;if(__privateGet(this,hn))return __privateGet(this,hn)}if(__privateGet(this,fn))return await __privateGet(this,fn);if(this.ready){__privateSet(this,fn,(async()=>{try{const t=Yo.from(getBigInt(await this.send("eth_chainId",[])));__privateSet(this,fn,null);return t}catch(t){__privateSet(this,fn,null);throw t}})());return await __privateGet(this,fn)}__privateSet(this,fn,(async()=>{const t={id:__privateWrapper(this,on)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:t});let e;try{e=(await this._send(t))[0];__privateSet(this,fn,null)}catch(r){__privateSet(this,fn,null);this.emit("debug",{action:"receiveRpcError",error:r});throw r}this.emit("debug",{action:"receiveRpcResult",result:e});if("result"in e)return Yo.from(getBigInt(e.result));throw this.getRpcError(t,e)})());return await __privateGet(this,fn)}_start(){if(null!=__privateGet(this,un)&&null!=__privateGet(this,un).resolve){__privateGet(this,un).resolve();__privateSet(this,un,null);(async()=>{for(;null==__privateGet(this,hn)&&!this.destroyed;)try{__privateSet(this,hn,await this._detectNetwork())}catch(t){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)");this.emit("error",makeError("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:t}}));await stall(1e3)}__privateMethod(this,dn,gn).call(this)})()}}async _waitUntilReady(){if(null!=__privateGet(this,un))return await __privateGet(this,un).promise}_getSubscriber(t){return"pending"===t.type?new pc(this):"event"===t.type?this._getOption("polling")?new sc(this,t.filter):new gc(this,t.filter):"orphan"===t.type&&"drop-log"===t.filter.orphan?new oc("orphan"):super._getSubscriber(t)}get ready(){return null==__privateGet(this,un)}getRpcTransaction(t){const e={};["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(r=>{if(null==t[r])return;let i=r;"gasLimit"===r&&(i="gas");e[i]=toQuantity(getBigInt(t[r],`tx.${r}`))});["from","to","data"].forEach(r=>{null!=t[r]&&(e[r]=hexlify(t[r]))});t.accessList&&(e.accessList=accessListify(t.accessList));t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.map(t=>t.toLowerCase()));t.authorizationList&&(e.authorizationList=t.authorizationList.map(t=>{const e=authorizationify(t);return{address:e.address,nonce:toQuantity(e.nonce),chainId:toQuantity(e.chainId),yParity:toQuantity(e.signature.yParity),r:toQuantity(e.signature.r),s:toQuantity(e.signature.s)}}));return e}getRpcRequest(t){switch(t.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[getLowerCase(t.address),t.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[getLowerCase(t.address),t.blockTag]};case"getCode":return{method:"eth_getCode",args:[getLowerCase(t.address),t.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[getLowerCase(t.address),"0x"+t.position.toString(16),t.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[t.signedTransaction]};case"getBlock":if("blockTag"in t)return{method:"eth_getBlockByNumber",args:[t.blockTag,!!t.includeTransactions]};if("blockHash"in t)return{method:"eth_getBlockByHash",args:[t.blockHash,!!t.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[t.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[t.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(t.transaction),t.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(t.transaction)]};case"getLogs":t.filter&&null!=t.filter.address&&(Array.isArray(t.filter.address)?t.filter.address=t.filter.address.map(getLowerCase):t.filter.address=getLowerCase(t.filter.address));return{method:"eth_getLogs",args:[t.filter]}}return null}getRpcError(t,e){const{method:r}=t;const{error:i}=e;if("eth_estimateGas"===r&&i.message){const e=i.message;if(!e.match(/revert/i)&&e.match(/insufficient funds/i))return makeError("insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.params[0],info:{payload:t,error:i}});if(e.match(/nonce/i)&&e.match(/too low/i))return makeError("nonce has already been used","NONCE_EXPIRED",{transaction:t.params[0],info:{payload:t,error:i}})}if("eth_call"===r||"eth_estimateGas"===r){const e=spelunkData(i);const a=no.getBuiltinCallException("eth_call"===r?"call":"estimateGas",t.params[0],e?e.data:null);a.info={error:i,payload:t};return a}const a=JSON.stringify(spelunkMessage(i));if("string"==typeof i.message&&i.message.match(/user denied|ethers-user-denied/i)){const e={eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"};return makeError("user rejected action","ACTION_REJECTED",{action:e[r]||"unknown",reason:"rejected",info:{payload:t,error:i}})}if("eth_sendRawTransaction"===r||"eth_sendTransaction"===r){const e=t.params[0];if(a.match(/insufficient funds|base fee exceeds gas limit/i))return makeError("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:e,info:{error:i}});if(a.match(/nonce/i)&&a.match(/too low/i))return makeError("nonce has already been used","NONCE_EXPIRED",{transaction:e,info:{error:i}});if(a.match(/replacement transaction/i)&&a.match(/underpriced/i))return makeError("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:e,info:{error:i}});if(a.match(/only replay-protected/i))return makeError("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:r,info:{transaction:e,info:{error:i}}})}let o=!!a.match(/the method .* does not exist/i);o||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(o=!0);return o?makeError("unsupported operation","UNSUPPORTED_OPERATION",{operation:t.method,info:{error:i,payload:t}}):makeError("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:t})}send(t,e){if(this.destroyed)return Promise.reject(makeError("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t}));const r=__privateWrapper(this,on)._++;const i=new Promise((i,a)=>{__privateGet(this,cn).push({resolve:i,reject:a,payload:{method:t,params:e,id:r,jsonrpc:"2.0"}})});__privateMethod(this,dn,gn).call(this);return i}async getSigner(t){null==t&&(t=0);const e=this.send("eth_accounts",[]);if("number"==typeof t){const r=await e;if(t>=r.length)throw new Error("no such account");return new wc(this,r[t])}const{accounts:r}=await resolveProperties({network:this.getNetwork(),accounts:e});t=getAddress(t);for(const i of r)if(getAddress(i)===t)return new wc(this,t);throw new Error("invalid account")}async listAccounts(){const t=await this.send("eth_accounts",[]);return t.map(t=>new wc(this,t))}destroy(){if(__privateGet(this,ln)){clearTimeout(__privateGet(this,ln));__privateSet(this,ln,null)}for(const{payload:t,reject:e}of __privateGet(this,cn))e(makeError("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t.method}));__privateSet(this,cn,[]);super.destroy()}}an=new WeakMap;on=new WeakMap;cn=new WeakMap;ln=new WeakMap;un=new WeakMap;hn=new WeakMap;fn=new WeakMap;dn=new WeakSet;gn=function(){if(__privateGet(this,ln))return;const t=1===this._getOption("batchMaxCount")?0:this._getOption("batchStallTime");__privateSet(this,ln,setTimeout(()=>{__privateSet(this,ln,null);const t=__privateGet(this,cn);__privateSet(this,cn,[]);for(;t.length;){const e=[t.shift()];for(;t.length&&e.length!==__privateGet(this,an).batchMaxCount;){e.push(t.shift());const r=JSON.stringify(e.map(t=>t.payload));if(r.length>__privateGet(this,an).batchMaxSize){t.unshift(e.pop());break}}(async()=>{const t=1===e.length?e[0].payload:e.map(t=>t.payload);this.emit("debug",{action:"sendRpcPayload",payload:t});try{const r=await this._send(t);this.emit("debug",{action:"receiveRpcResult",result:r});for(const{resolve:t,reject:i,payload:a}of e){if(this.destroyed){i(makeError("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:a.method}));continue}const e=r.filter(t=>t.id===a.id)[0];if(null==e){const t=makeError("missing response for request","BAD_DATA",{value:r,info:{payload:a}});this.emit("error",t);i(t);continue}"error"in e?i(this.getRpcError(a,e)):t(e.result)}}catch(r){this.emit("debug",{action:"receiveRpcError",error:r});for(const{reject:t}of e)t(r)}})()}},t))};class bc extends Ac{constructor(t,e){super(t,e);__privateAdd(this,pn);let r=this._getOption("pollingInterval");null==r&&(r=yc.pollingInterval);__privateSet(this,pn,r)}_getSubscriber(t){const e=super._getSubscriber(t);isPollable(e)&&(e.pollingInterval=__privateGet(this,pn));return e}get pollingInterval(){return __privateGet(this,pn)}set pollingInterval(t){if(!Number.isInteger(t)||t<0)throw new Error("invalid interval");__privateSet(this,pn,t);this._forEachSubscriber(t=>{isPollable(t)&&(t.pollingInterval=__privateGet(this,pn))})}}pn=new WeakMap;class Ec extends bc{constructor(t,e,r){null==t&&(t="http://localhost:8545");super(e,r);__privateAdd(this,mn);__privateSet(this,mn,"string"==typeof t?new Hn(t):t.clone())}_getConnection(){return __privateGet(this,mn).clone()}async send(t,e){await this._start();return await super.send(t,e)}async _send(t){const e=this._getConnection();e.body=JSON.stringify(t);e.setHeader("content-type","application/json");const r=await e.send();r.assertOk();let i=r.bodyJson;Array.isArray(i)||(i=[i]);return i}}mn=new WeakMap;function spelunkData(t){if(null==t)return null;if("string"==typeof t.message&&t.message.match(/revert/i)&&isHexString(t.data))return{message:t.message,data:t.data};if("object"==typeof t){for(const e in t){const r=spelunkData(t[e]);if(r)return r}return null}if("string"==typeof t)try{return spelunkData(JSON.parse(t))}catch(e){}return null}function _spelunkMessage(t,e){if(null!=t){"string"==typeof t.message&&e.push(t.message);if("object"==typeof t)for(const r in t)_spelunkMessage(t[r],e);if("string"==typeof t)try{return _spelunkMessage(JSON.parse(t),e)}catch(r){}}}function spelunkMessage(t){const e=[];_spelunkMessage(t,e);return e}const vc=class t extends bc{constructor(ethereum,t,e){const r=Object.assign({},null!=e?e:{},{batchMaxCount:1});assertArgument(ethereum&&ethereum.request,"invalid EIP-1193 provider","ethereum",ethereum);super(t,r);__privateAdd(this,yn);__privateAdd(this,wn);__privateSet(this,wn,null);e&&e.providerInfo&&__privateSet(this,wn,e.providerInfo);__privateSet(this,yn,async(t,e)=>{const r={method:t,params:e};this.emit("debug",{action:"sendEip1193Request",payload:r});try{const t=await ethereum.request(r);this.emit("debug",{action:"receiveEip1193Result",result:t});return t}catch(i){const t=new Error(i.message);t.code=i.code;t.data=i.data;t.payload=r;this.emit("debug",{action:"receiveEip1193Error",error:t});throw t}})}get providerInfo(){return __privateGet(this,wn)}async send(t,e){await this._start();return await super.send(t,e)}async _send(t){assertArgument(!Array.isArray(t),"EIP-1193 does not support batch request","payload",t);try{const e=await __privateGet(this,yn).call(this,t.method,t.params||[]);return[{id:t.id,result:e}]}catch(e){return[{id:t.id,error:{code:e.code,data:e.data,message:e.message}}]}}getRpcError(t,e){e=JSON.parse(JSON.stringify(e));switch(e.error.code||-1){case 4001:e.error.message=`ethers-user-denied: ${e.error.message}`;break;case 4200:e.error.message=`ethers-unsupported: ${e.error.message}`}return super.getRpcError(t,e)}async hasSigner(t){null==t&&(t=0);const e=await this.send("eth_accounts",[]);if("number"==typeof t)return e.length>t;t=t.toLowerCase();return 0!==e.filter(e=>e.toLowerCase()===t).length}async getSigner(t){null==t&&(t=0);if(!(await this.hasSigner(t)))try{await __privateGet(this,yn).call(this,"eth_requestAccounts",[])}catch(e){const t=e.payload;throw this.getRpcError(t,{id:t.id,error:e})}return await super.getSigner(t)}static async discover(e){null==e&&(e={});if(e.provider)return new t(e.provider);const r=e.window?e.window:"undefined"!=typeof window?window:null;if(null==r)return null;const i=e.anyProvider;if(i&&r.ethereum)return new t(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const a=e.timeout?e.timeout:300;return 0===a?null:await new Promise((o,c)=>{let l=[];const addProvider=t=>{l.push(t.detail);i&&finalize()};const finalize=()=>{clearTimeout(u);if(l.length)if(e&&e.filter){const r=e.filter(l.map(t=>Object.assign({},t.info)));if(null==r)o(null);else if(r instanceof t)o(r);else{let e=null;if(r.uuid){const t=l.filter(t=>r.uuid===t.info.uuid);e=t[0]}if(e){const{provider:r,info:i}=e;o(new t(r,void 0,{providerInfo:i}))}else c(makeError("filter returned unknown info","UNSUPPORTED_OPERATION",{value:r}))}}else{const{provider:e,info:r}=l[0];o(new t(e,void 0,{providerInfo:r}))}else o(null);r.removeEventListener("eip6963:announceProvider",addProvider)};const u=setTimeout(()=>{finalize()},a);r.addEventListener("eip6963:announceProvider",addProvider);r.dispatchEvent(new Event("eip6963:requestProvider"))})}};yn=new WeakMap;wn=new WeakMap;let kc=vc;export{kc as B,So as C,Ec as J,bs as Z,formatEther as a,parseEther as b,formatUnits as f,getAddress as g,isAddress as i,keccak256 as k,parseUnits$1 as p,solidityPacked as s};
//# sourceMappingURL=ethers-D0WqDNGY.js.map
